var mw=Object.defineProperty;var hw=(t,e,r)=>e in t?mw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var oe=(t,e,r)=>(hw(t,typeof e!="symbol"?e+"":e,r),r);function xw(t,e){for(var r=0;r<e.length;r++){const a=e[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function pw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lv={exports:{}},ou={},ov={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=Symbol.for("react.element"),gw=Symbol.for("react.portal"),fw=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),bw=Symbol.for("react.profiler"),vw=Symbol.for("react.provider"),jw=Symbol.for("react.context"),Nw=Symbol.for("react.forward_ref"),ww=Symbol.for("react.suspense"),Sw=Symbol.for("react.memo"),Cw=Symbol.for("react.lazy"),yg=Symbol.iterator;function kw(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var cv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dv=Object.assign,uv={};function Si(t,e,r){this.props=t,this.context=e,this.refs=uv,this.updater=r||cv}Si.prototype.isReactComponent={};Si.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Si.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mv(){}mv.prototype=Si.prototype;function Nx(t,e,r){this.props=t,this.context=e,this.refs=uv,this.updater=r||cv}var wx=Nx.prototype=new mv;wx.constructor=Nx;dv(wx,Si.prototype);wx.isPureReactComponent=!0;var bg=Array.isArray,hv=Object.prototype.hasOwnProperty,Sx={current:null},xv={key:!0,ref:!0,__self:!0,__source:!0};function pv(t,e,r){var a,n={},i=null,l=null;if(e!=null)for(a in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)hv.call(e,a)&&!xv.hasOwnProperty(a)&&(n[a]=e[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(a in o=t.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:po,type:t,key:i,ref:l,props:n,_owner:Sx.current}}function _w(t,e){return{$$typeof:po,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cx(t){return typeof t=="object"&&t!==null&&t.$$typeof===po}function Pw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var vg=/\/+/g;function mm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Pw(""+t.key):e.toString(36)}function pc(t,e,r,a,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case po:case gw:l=!0}}if(l)return l=t,n=n(l),t=a===""?"."+mm(l,0):a,bg(n)?(r="",t!=null&&(r=t.replace(vg,"$&/")+"/"),pc(n,e,r,"",function(d){return d})):n!=null&&(Cx(n)&&(n=_w(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(vg,"$&/")+"/")+t)),e.push(n)),1;if(l=0,a=a===""?".":a+":",bg(t))for(var o=0;o<t.length;o++){i=t[o];var c=a+mm(i,o);l+=pc(i,e,r,c,n)}else if(c=kw(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=a+mm(i,o++),l+=pc(i,e,r,c,n);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Mo(t,e,r){if(t==null)return t;var a=[],n=0;return pc(t,a,"","",function(i){return e.call(r,i,n++)}),a}function Tw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ss={current:null},gc={transition:null},Aw={ReactCurrentDispatcher:ss,ReactCurrentBatchConfig:gc,ReactCurrentOwner:Sx};function gv(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Mo,forEach:function(t,e,r){Mo(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Mo(t,function(){e++}),e},toArray:function(t){return Mo(t,function(e){return e})||[]},only:function(t){if(!Cx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Si;Ce.Fragment=fw;Ce.Profiler=bw;Ce.PureComponent=Nx;Ce.StrictMode=yw;Ce.Suspense=ww;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Aw;Ce.act=gv;Ce.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=dv({},t.props),n=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Sx.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)hv.call(e,c)&&!xv.hasOwnProperty(c)&&(a[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:po,type:t.type,key:n,ref:i,props:a,_owner:l}};Ce.createContext=function(t){return t={$$typeof:jw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vw,_context:t},t.Consumer=t};Ce.createElement=pv;Ce.createFactory=function(t){var e=pv.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:Nw,render:t}};Ce.isValidElement=Cx;Ce.lazy=function(t){return{$$typeof:Cw,_payload:{_status:-1,_result:t},_init:Tw}};Ce.memo=function(t,e){return{$$typeof:Sw,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=gc.transition;gc.transition={};try{t()}finally{gc.transition=e}};Ce.unstable_act=gv;Ce.useCallback=function(t,e){return ss.current.useCallback(t,e)};Ce.useContext=function(t){return ss.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return ss.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return ss.current.useEffect(t,e)};Ce.useId=function(){return ss.current.useId()};Ce.useImperativeHandle=function(t,e,r){return ss.current.useImperativeHandle(t,e,r)};Ce.useInsertionEffect=function(t,e){return ss.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return ss.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return ss.current.useMemo(t,e)};Ce.useReducer=function(t,e,r){return ss.current.useReducer(t,e,r)};Ce.useRef=function(t){return ss.current.useRef(t)};Ce.useState=function(t){return ss.current.useState(t)};Ce.useSyncExternalStore=function(t,e,r){return ss.current.useSyncExternalStore(t,e,r)};Ce.useTransition=function(){return ss.current.useTransition()};Ce.version="18.3.1";ov.exports=Ce;var j=ov.exports;const Hs=pw(j),Dw=xw({__proto__:null,default:Hs},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw=j,Ew=Symbol.for("react.element"),Iw=Symbol.for("react.fragment"),Rw=Object.prototype.hasOwnProperty,Lw=Mw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ow={key:!0,ref:!0,__self:!0,__source:!0};function fv(t,e,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(a in e)Rw.call(e,a)&&!Ow.hasOwnProperty(a)&&(n[a]=e[a]);if(t&&t.defaultProps)for(a in e=t.defaultProps,e)n[a]===void 0&&(n[a]=e[a]);return{$$typeof:Ew,type:t,key:i,ref:l,props:n,_owner:Lw.current}}ou.Fragment=Iw;ou.jsx=fv;ou.jsxs=fv;lv.exports=ou;var s=lv.exports,Kh={},yv={exports:{}},Ns={},bv={exports:{}},vv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,z){var D=M.length;M.push(z);e:for(;0<D;){var X=D-1>>>1,F=M[X];if(0<n(F,z))M[X]=z,M[D]=F,D=X;else break e}}function r(M){return M.length===0?null:M[0]}function a(M){if(M.length===0)return null;var z=M[0],D=M.pop();if(D!==z){M[0]=D;e:for(var X=0,F=M.length,ie=F>>>1;X<ie;){var ye=2*(X+1)-1,fe=M[ye],pe=ye+1,Te=M[pe];if(0>n(fe,D))pe<F&&0>n(Te,fe)?(M[X]=Te,M[pe]=D,X=pe):(M[X]=fe,M[ye]=D,X=ye);else if(pe<F&&0>n(Te,D))M[X]=Te,M[pe]=D,X=pe;else break e}}return z}function n(M,z){var D=M.sortIndex-z.sortIndex;return D!==0?D:M.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,x=!1,g=!1,f=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(M){for(var z=r(d);z!==null;){if(z.callback===null)a(d);else if(z.startTime<=M)a(d),z.sortIndex=z.expirationTime,e(c,z);else break;z=r(d)}}function w(M){if(f=!1,v(M),!g)if(r(c)!==null)g=!0,V(N);else{var z=r(d);z!==null&&G(w,z.startTime-M)}}function N(M,z){g=!1,f&&(f=!1,p(P),P=-1),x=!0;var D=h;try{for(v(z),m=r(c);m!==null&&(!(m.expirationTime>z)||M&&!T());){var X=m.callback;if(typeof X=="function"){m.callback=null,h=m.priorityLevel;var F=X(m.expirationTime<=z);z=t.unstable_now(),typeof F=="function"?m.callback=F:m===r(c)&&a(c),v(z)}else a(c);m=r(c)}if(m!==null)var ie=!0;else{var ye=r(d);ye!==null&&G(w,ye.startTime-z),ie=!1}return ie}finally{m=null,h=D,x=!1}}var S=!1,k=null,P=-1,_=5,L=-1;function T(){return!(t.unstable_now()-L<_)}function U(){if(k!==null){var M=t.unstable_now();L=M;var z=!0;try{z=k(!0,M)}finally{z?H():(S=!1,k=null)}}else S=!1}var H;if(typeof b=="function")H=function(){b(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,J=W.port2;W.port1.onmessage=U,H=function(){J.postMessage(null)}}else H=function(){y(U,0)};function V(M){k=M,S||(S=!0,H())}function G(M,z){P=y(function(){M(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){g||x||(g=!0,V(N))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var D=h;h=z;try{return M()}finally{h=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var D=h;h=M;try{return z()}finally{h=D}},t.unstable_scheduleCallback=function(M,z,D){var X=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?X+D:X):D=X,M){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=D+F,M={id:u++,callback:z,priorityLevel:M,startTime:D,expirationTime:F,sortIndex:-1},D>X?(M.sortIndex=D,e(d,M),r(c)===null&&M===r(d)&&(f?(p(P),P=-1):f=!0,G(w,D-X))):(M.sortIndex=F,e(c,M),g||x||(g=!0,V(N))),M},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(M){var z=h;return function(){var D=h;h=z;try{return M.apply(this,arguments)}finally{h=D}}}})(vv);bv.exports=vv;var Fw=bv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w=j,vs=Fw;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jv=new Set,Tl={};function Tn(t,e){ui(t,e),ui(t+"Capture",e)}function ui(t,e){for(Tl[t]=e,t=0;t<e.length;t++)jv.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=Object.prototype.hasOwnProperty,zw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jg={},Ng={};function Bw(t){return Xh.call(Ng,t)?!0:Xh.call(jg,t)?!1:zw.test(t)?Ng[t]=!0:(jg[t]=!0,!1)}function Vw(t,e,r,a){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uw(t,e,r,a){if(e===null||typeof e>"u"||Vw(t,e,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rs(t,e,r,a,n,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new rs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new rs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new rs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new rs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new rs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new rs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new rs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new rs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new rs(t,5,!1,t.toLowerCase(),null,!1,!1)});var kx=/[\-:]([a-z])/g;function _x(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kx,_x);Et[e]=new rs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kx,_x);Et[e]=new rs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kx,_x);Et[e]=new rs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new rs(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new rs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new rs(t,1,!1,t.toLowerCase(),null,!0,!0)});function Px(t,e,r,a){var n=Et.hasOwnProperty(e)?Et[e]:null;(n!==null?n.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uw(e,r,n,a)&&(r=null),a||n===null?Bw(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(e=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(e):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,e,r):t.setAttribute(e,r))))}var $r=$w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eo=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),$n=Symbol.for("react.fragment"),Tx=Symbol.for("react.strict_mode"),Qh=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),Ax=Symbol.for("react.forward_ref"),Gh=Symbol.for("react.suspense"),Jh=Symbol.for("react.suspense_list"),Dx=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),Sv=Symbol.for("react.offscreen"),wg=Symbol.iterator;function Mi(t){return t===null||typeof t!="object"?null:(t=wg&&t[wg]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,hm;function Ki(t){if(hm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);hm=e&&e[1]||""}return`
`+hm+t}var xm=!1;function pm(t,e){if(!t||xm)return"";xm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var a=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){a=d}t.call(e.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{xm=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ki(t):""}function Hw(t){switch(t.tag){case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 2:case 15:return t=pm(t.type,!1),t;case 11:return t=pm(t.type.render,!1),t;case 1:return t=pm(t.type,!0),t;default:return""}}function Zh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $n:return"Fragment";case Fn:return"Portal";case Qh:return"Profiler";case Tx:return"StrictMode";case Gh:return"Suspense";case Jh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wv:return(t.displayName||"Context")+".Consumer";case Nv:return(t._context.displayName||"Context")+".Provider";case Ax:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dx:return e=t.displayName||null,e!==null?e:Zh(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return Zh(t(e))}catch{}}return null}function Ww(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zh(e);case 8:return e===Tx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qw(t){var e=Cv(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),a=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Io(t){t._valueTracker||(t._valueTracker=qw(t))}function kv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),a="";return t&&(a=Cv(t)?t.checked?"true":"false":t.value),t=a,t!==r?(e.setValue(t),!0):!1}function nd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function e0(t,e){var r=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Sg(t,e){var r=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;r=ba(e.value!=null?e.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _v(t,e){e=e.checked,e!=null&&Px(t,"checked",e,!1)}function t0(t,e){_v(t,e);var r=ba(e.value),a=e.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?s0(t,e.type,r):e.hasOwnProperty("defaultValue")&&s0(t,e.type,ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function s0(t,e,r){(e!=="number"||nd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Xi=Array.isArray;function Jn(t,e,r,a){if(t=t.options,e){e={};for(var n=0;n<r.length;n++)e["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=e.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+ba(r),e=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function r0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(se(92));if(Xi(r)){if(1<r.length)throw Error(se(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ba(r)}}function Pv(t,e){var r=ba(e.value),a=ba(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function _g(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ro,Av=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(e,r,a,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ro=Ro||document.createElement("div"),Ro.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ro.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Al(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yw=["Webkit","ms","Moz","O"];Object.keys(rl).forEach(function(t){Yw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rl[e]=rl[t]})});function Dv(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||rl.hasOwnProperty(t)&&rl[t]?(""+e).trim():e+"px"}function Mv(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Dv(r,e[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var Kw=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function n0(t,e){if(e){if(Kw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function i0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=null;function Mx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var o0=null,Zn=null,ei=null;function Pg(t){if(t=yo(t)){if(typeof o0!="function")throw Error(se(280));var e=t.stateNode;e&&(e=hu(e),o0(t.stateNode,t.type,e))}}function Ev(t){Zn?ei?ei.push(t):ei=[t]:Zn=t}function Iv(){if(Zn){var t=Zn,e=ei;if(ei=Zn=null,Pg(t),e)for(t=0;t<e.length;t++)Pg(e[t])}}function Rv(t,e){return t(e)}function Lv(){}var gm=!1;function Ov(t,e,r){if(gm)return t(e,r);gm=!0;try{return Rv(t,e,r)}finally{gm=!1,(Zn!==null||ei!==null)&&(Lv(),Iv())}}function Dl(t,e){var r=t.stateNode;if(r===null)return null;var a=hu(r);if(a===null)return null;r=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(se(231,e,typeof r));return r}var c0=!1;if(Mr)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){c0=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{c0=!1}function Xw(t,e,r,a,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var al=!1,id=null,ld=!1,d0=null,Qw={onError:function(t){al=!0,id=t}};function Gw(t,e,r,a,n,i,l,o,c){al=!1,id=null,Xw.apply(Qw,arguments)}function Jw(t,e,r,a,n,i,l,o,c){if(Gw.apply(this,arguments),al){if(al){var d=id;al=!1,id=null}else throw Error(se(198));ld||(ld=!0,d0=d)}}function An(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Fv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tg(t){if(An(t)!==t)throw Error(se(188))}function Zw(t){var e=t.alternate;if(!e){if(e=An(t),e===null)throw Error(se(188));return e!==t?null:t}for(var r=t,a=e;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Tg(n),t;if(i===a)return Tg(n),e;i=i.sibling}throw Error(se(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(se(189))}}if(r.alternate!==a)throw Error(se(190))}if(r.tag!==3)throw Error(se(188));return r.stateNode.current===r?t:e}function $v(t){return t=Zw(t),t!==null?zv(t):null}function zv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zv(t);if(e!==null)return e;t=t.sibling}return null}var Bv=vs.unstable_scheduleCallback,Ag=vs.unstable_cancelCallback,e4=vs.unstable_shouldYield,t4=vs.unstable_requestPaint,ut=vs.unstable_now,s4=vs.unstable_getCurrentPriorityLevel,Ex=vs.unstable_ImmediatePriority,Vv=vs.unstable_UserBlockingPriority,od=vs.unstable_NormalPriority,r4=vs.unstable_LowPriority,Uv=vs.unstable_IdlePriority,cu=null,cr=null;function a4(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(cu,t,void 0,(t.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:l4,n4=Math.log,i4=Math.LN2;function l4(t){return t>>>=0,t===0?32:31-(n4(t)/i4|0)|0}var Lo=64,Oo=4194304;function Qi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cd(t,e){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=Qi(o):(i&=l,i!==0&&(a=Qi(i)))}else l=r&~n,l!==0?a=Qi(l):i!==0&&(a=Qi(i));if(a===0)return 0;if(e!==0&&e!==a&&!(e&n)&&(n=a&-a,i=e&-e,n>=i||n===16&&(i&4194240)!==0))return e;if(a&4&&(a|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=a;0<e;)r=31-Ws(e),n=1<<r,a|=t[r],e&=~n;return a}function o4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c4(t,e){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Ws(i),o=1<<l,c=n[l];c===-1?(!(o&r)||o&a)&&(n[l]=o4(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function u0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hv(){var t=Lo;return Lo<<=1,!(Lo&4194240)&&(Lo=64),t}function fm(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function go(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ws(e),t[e]=r}function d4(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-Ws(r),i=1<<n;e[n]=0,a[n]=-1,t[n]=-1,r&=~i}}function Ix(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var a=31-Ws(r),n=1<<a;n&e|t[a]&e&&(t[a]|=e),r&=~n}}var ze=0;function Wv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qv,Rx,Yv,Kv,Xv,m0=!1,Fo=[],na=null,ia=null,la=null,Ml=new Map,El=new Map,Yr=[],u4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dg(t,e){switch(t){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(e.pointerId)}}function Ii(t,e,r,a,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},e!==null&&(e=yo(e),e!==null&&Rx(e)),t):(t.eventSystemFlags|=a,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function m4(t,e,r,a,n){switch(e){case"focusin":return na=Ii(na,t,e,r,a,n),!0;case"dragenter":return ia=Ii(ia,t,e,r,a,n),!0;case"mouseover":return la=Ii(la,t,e,r,a,n),!0;case"pointerover":var i=n.pointerId;return Ml.set(i,Ii(Ml.get(i)||null,t,e,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,El.set(i,Ii(El.get(i)||null,t,e,r,a,n)),!0}return!1}function Qv(t){var e=Wa(t.target);if(e!==null){var r=An(e);if(r!==null){if(e=r.tag,e===13){if(e=Fv(r),e!==null){t.blockedOn=e,Xv(t.priority,function(){Yv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=h0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);l0=a,r.target.dispatchEvent(a),l0=null}else return e=yo(r),e!==null&&Rx(e),t.blockedOn=r,!1;e.shift()}return!0}function Mg(t,e,r){fc(t)&&r.delete(e)}function h4(){m0=!1,na!==null&&fc(na)&&(na=null),ia!==null&&fc(ia)&&(ia=null),la!==null&&fc(la)&&(la=null),Ml.forEach(Mg),El.forEach(Mg)}function Ri(t,e){t.blockedOn===e&&(t.blockedOn=null,m0||(m0=!0,vs.unstable_scheduleCallback(vs.unstable_NormalPriority,h4)))}function Il(t){function e(n){return Ri(n,t)}if(0<Fo.length){Ri(Fo[0],t);for(var r=1;r<Fo.length;r++){var a=Fo[r];a.blockedOn===t&&(a.blockedOn=null)}}for(na!==null&&Ri(na,t),ia!==null&&Ri(ia,t),la!==null&&Ri(la,t),Ml.forEach(e),El.forEach(e),r=0;r<Yr.length;r++)a=Yr[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Yr.length&&(r=Yr[0],r.blockedOn===null);)Qv(r),r.blockedOn===null&&Yr.shift()}var ti=$r.ReactCurrentBatchConfig,dd=!0;function x4(t,e,r,a){var n=ze,i=ti.transition;ti.transition=null;try{ze=1,Lx(t,e,r,a)}finally{ze=n,ti.transition=i}}function p4(t,e,r,a){var n=ze,i=ti.transition;ti.transition=null;try{ze=4,Lx(t,e,r,a)}finally{ze=n,ti.transition=i}}function Lx(t,e,r,a){if(dd){var n=h0(t,e,r,a);if(n===null)_m(t,e,a,ud,r),Dg(t,a);else if(m4(n,t,e,r,a))a.stopPropagation();else if(Dg(t,a),e&4&&-1<u4.indexOf(t)){for(;n!==null;){var i=yo(n);if(i!==null&&qv(i),i=h0(t,e,r,a),i===null&&_m(t,e,a,ud,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else _m(t,e,a,null,r)}}var ud=null;function h0(t,e,r,a){if(ud=null,t=Mx(a),t=Wa(t),t!==null)if(e=An(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Fv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ud=t,null}function Gv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s4()){case Ex:return 1;case Vv:return 4;case od:case r4:return 16;case Uv:return 536870912;default:return 16}default:return 16}}var Zr=null,Ox=null,yc=null;function Jv(){if(yc)return yc;var t,e=Ox,r=e.length,a,n="value"in Zr?Zr.value:Zr.textContent,i=n.length;for(t=0;t<r&&e[t]===n[t];t++);var l=r-t;for(a=1;a<=l&&e[r-a]===n[i-a];a++);return yc=n.slice(t,1<a?1-a:void 0)}function bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $o(){return!0}function Eg(){return!1}function ws(t){function e(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$o:Eg,this.isPropagationStopped=Eg,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fx=ws(Ci),fo=st({},Ci,{view:0,detail:0}),g4=ws(fo),ym,bm,Li,du=st({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$x,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Li&&(Li&&t.type==="mousemove"?(ym=t.screenX-Li.screenX,bm=t.screenY-Li.screenY):bm=ym=0,Li=t),ym)},movementY:function(t){return"movementY"in t?t.movementY:bm}}),Ig=ws(du),f4=st({},du,{dataTransfer:0}),y4=ws(f4),b4=st({},fo,{relatedTarget:0}),vm=ws(b4),v4=st({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),j4=ws(v4),N4=st({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),w4=ws(N4),S4=st({},Ci,{data:0}),Rg=ws(S4),C4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_4[t])?!!e[t]:!1}function $x(){return P4}var T4=st({},fo,{key:function(t){if(t.key){var e=C4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?k4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$x,charCode:function(t){return t.type==="keypress"?bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A4=ws(T4),D4=st({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lg=ws(D4),M4=st({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$x}),E4=ws(M4),I4=st({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),R4=ws(I4),L4=st({},du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),O4=ws(L4),F4=[9,13,27,32],zx=Mr&&"CompositionEvent"in window,nl=null;Mr&&"documentMode"in document&&(nl=document.documentMode);var $4=Mr&&"TextEvent"in window&&!nl,Zv=Mr&&(!zx||nl&&8<nl&&11>=nl),Og=String.fromCharCode(32),Fg=!1;function ej(t,e){switch(t){case"keyup":return F4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zn=!1;function z4(t,e){switch(t){case"compositionend":return tj(e);case"keypress":return e.which!==32?null:(Fg=!0,Og);case"textInput":return t=e.data,t===Og&&Fg?null:t;default:return null}}function B4(t,e){if(zn)return t==="compositionend"||!zx&&ej(t,e)?(t=Jv(),yc=Ox=Zr=null,zn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zv&&e.locale!=="ko"?null:e.data;default:return null}}var V4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V4[t.type]:e==="textarea"}function sj(t,e,r,a){Ev(a),e=md(e,"onChange"),0<e.length&&(r=new Fx("onChange","change",null,r,a),t.push({event:r,listeners:e}))}var il=null,Rl=null;function U4(t){hj(t,0)}function uu(t){var e=Un(t);if(kv(e))return t}function H4(t,e){if(t==="change")return e}var rj=!1;if(Mr){var jm;if(Mr){var Nm="oninput"in document;if(!Nm){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),Nm=typeof zg.oninput=="function"}jm=Nm}else jm=!1;rj=jm&&(!document.documentMode||9<document.documentMode)}function Bg(){il&&(il.detachEvent("onpropertychange",aj),Rl=il=null)}function aj(t){if(t.propertyName==="value"&&uu(Rl)){var e=[];sj(e,Rl,t,Mx(t)),Ov(U4,e)}}function W4(t,e,r){t==="focusin"?(Bg(),il=e,Rl=r,il.attachEvent("onpropertychange",aj)):t==="focusout"&&Bg()}function q4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uu(Rl)}function Y4(t,e){if(t==="click")return uu(e)}function K4(t,e){if(t==="input"||t==="change")return uu(e)}function X4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ks=typeof Object.is=="function"?Object.is:X4;function Ll(t,e){if(Ks(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),a=Object.keys(e);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Xh.call(e,n)||!Ks(t[n],e[n]))return!1}return!0}function Vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,e){var r=Vg(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=e&&a>=e)return{node:r,offset:e-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vg(r)}}function nj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ij(){for(var t=window,e=nd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=nd(t.document)}return e}function Bx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q4(t){var e=ij(),r=t.focusedElem,a=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&nj(r.ownerDocument.documentElement,r)){if(a!==null&&Bx(r)){if(e=a.start,t=a.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!t.extend&&i>a&&(n=a,a=i,i=n),n=Ug(r,i);var l=Ug(r,a);n&&l&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),i>a?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var G4=Mr&&"documentMode"in document&&11>=document.documentMode,Bn=null,x0=null,ll=null,p0=!1;function Hg(t,e,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;p0||Bn==null||Bn!==nd(a)||(a=Bn,"selectionStart"in a&&Bx(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ll&&Ll(ll,a)||(ll=a,a=md(x0,"onSelect"),0<a.length&&(e=new Fx("onSelect","select",null,e,r),t.push({event:e,listeners:a}),e.target=Bn)))}function zo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Vn={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionend:zo("Transition","TransitionEnd")},wm={},lj={};Mr&&(lj=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function mu(t){if(wm[t])return wm[t];if(!Vn[t])return t;var e=Vn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in lj)return wm[t]=e[r];return t}var oj=mu("animationend"),cj=mu("animationiteration"),dj=mu("animationstart"),uj=mu("transitionend"),mj=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ka(t,e){mj.set(t,e),Tn(e,[t])}for(var Sm=0;Sm<Wg.length;Sm++){var Cm=Wg[Sm],J4=Cm.toLowerCase(),Z4=Cm[0].toUpperCase()+Cm.slice(1);ka(J4,"on"+Z4)}ka(oj,"onAnimationEnd");ka(cj,"onAnimationIteration");ka(dj,"onAnimationStart");ka("dblclick","onDoubleClick");ka("focusin","onFocus");ka("focusout","onBlur");ka(uj,"onTransitionEnd");ui("onMouseEnter",["mouseout","mouseover"]);ui("onMouseLeave",["mouseout","mouseover"]);ui("onPointerEnter",["pointerout","pointerover"]);ui("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function qg(t,e,r){var a=t.type||"unknown-event";t.currentTarget=r,Jw(a,e,void 0,t),t.currentTarget=null}function hj(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var i=void 0;if(e)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;qg(n,o,d),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;qg(n,o,d),i=c}}}if(ld)throw t=d0,ld=!1,d0=null,t}function Ye(t,e){var r=e[v0];r===void 0&&(r=e[v0]=new Set);var a=t+"__bubble";r.has(a)||(xj(e,t,2,!1),r.add(a))}function km(t,e,r){var a=0;e&&(a|=4),xj(r,t,a,e)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function Ol(t){if(!t[Bo]){t[Bo]=!0,jv.forEach(function(r){r!=="selectionchange"&&(e6.has(r)||km(r,!1,t),km(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bo]||(e[Bo]=!0,km("selectionchange",!1,e))}}function xj(t,e,r,a){switch(Gv(e)){case 1:var n=x4;break;case 4:n=p4;break;default:n=Lx}r=n.bind(null,e,r,t),n=void 0,!c0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(e,r,{capture:!0,passive:n}):t.addEventListener(e,r,!0):n!==void 0?t.addEventListener(e,r,{passive:n}):t.addEventListener(e,r,!1)}function _m(t,e,r,a,n){var i=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Wa(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}Ov(function(){var d=i,u=Mx(r),m=[];e:{var h=mj.get(t);if(h!==void 0){var x=Fx,g=t;switch(t){case"keypress":if(bc(r)===0)break e;case"keydown":case"keyup":x=A4;break;case"focusin":g="focus",x=vm;break;case"focusout":g="blur",x=vm;break;case"beforeblur":case"afterblur":x=vm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=y4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=E4;break;case oj:case cj:case dj:x=j4;break;case uj:x=R4;break;case"scroll":x=g4;break;case"wheel":x=O4;break;case"copy":case"cut":case"paste":x=w4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Lg}var f=(e&4)!==0,y=!f&&t==="scroll",p=f?h!==null?h+"Capture":null:h;f=[];for(var b=d,v;b!==null;){v=b;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,p!==null&&(w=Dl(b,p),w!=null&&f.push(Fl(b,w,v)))),y)break;b=b.return}0<f.length&&(h=new x(h,g,null,r,u),m.push({event:h,listeners:f}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",h&&r!==l0&&(g=r.relatedTarget||r.fromElement)&&(Wa(g)||g[Er]))break e;if((x||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,x?(g=r.relatedTarget||r.toElement,x=d,g=g?Wa(g):null,g!==null&&(y=An(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(x=null,g=d),x!==g)){if(f=Ig,w="onMouseLeave",p="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(f=Lg,w="onPointerLeave",p="onPointerEnter",b="pointer"),y=x==null?h:Un(x),v=g==null?h:Un(g),h=new f(w,b+"leave",x,r,u),h.target=y,h.relatedTarget=v,w=null,Wa(u)===d&&(f=new f(p,b+"enter",g,r,u),f.target=v,f.relatedTarget=y,w=f),y=w,x&&g)t:{for(f=x,p=g,b=0,v=f;v;v=Rn(v))b++;for(v=0,w=p;w;w=Rn(w))v++;for(;0<b-v;)f=Rn(f),b--;for(;0<v-b;)p=Rn(p),v--;for(;b--;){if(f===p||p!==null&&f===p.alternate)break t;f=Rn(f),p=Rn(p)}f=null}else f=null;x!==null&&Yg(m,h,x,f,!1),g!==null&&y!==null&&Yg(m,y,g,f,!0)}}e:{if(h=d?Un(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var N=H4;else if($g(h))if(rj)N=K4;else{N=q4;var S=W4}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Y4);if(N&&(N=N(t,d))){sj(m,N,r,u);break e}S&&S(t,h,d),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&s0(h,"number",h.value)}switch(S=d?Un(d):window,t){case"focusin":($g(S)||S.contentEditable==="true")&&(Bn=S,x0=d,ll=null);break;case"focusout":ll=x0=Bn=null;break;case"mousedown":p0=!0;break;case"contextmenu":case"mouseup":case"dragend":p0=!1,Hg(m,r,u);break;case"selectionchange":if(G4)break;case"keydown":case"keyup":Hg(m,r,u)}var k;if(zx)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else zn?ej(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Zv&&r.locale!=="ko"&&(zn||P!=="onCompositionStart"?P==="onCompositionEnd"&&zn&&(k=Jv()):(Zr=u,Ox="value"in Zr?Zr.value:Zr.textContent,zn=!0)),S=md(d,P),0<S.length&&(P=new Rg(P,t,null,r,u),m.push({event:P,listeners:S}),k?P.data=k:(k=tj(r),k!==null&&(P.data=k)))),(k=$4?z4(t,r):B4(t,r))&&(d=md(d,"onBeforeInput"),0<d.length&&(u=new Rg("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=k))}hj(m,e)})}function Fl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function md(t,e){for(var r=e+"Capture",a=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Dl(t,r),i!=null&&a.unshift(Fl(t,i,n)),i=Dl(t,e),i!=null&&a.push(Fl(t,i,n))),t=t.return}return a}function Rn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yg(t,e,r,a,n){for(var i=e._reactName,l=[];r!==null&&r!==a;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=Dl(r,i),c!=null&&l.unshift(Fl(r,c,o))):n||(c=Dl(r,i),c!=null&&l.push(Fl(r,c,o)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var t6=/\r\n?/g,s6=/\u0000|\uFFFD/g;function Kg(t){return(typeof t=="string"?t:""+t).replace(t6,`
`).replace(s6,"")}function Vo(t,e,r){if(e=Kg(e),Kg(t)!==e&&r)throw Error(se(425))}function hd(){}var g0=null,f0=null;function y0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var b0=typeof setTimeout=="function"?setTimeout:void 0,r6=typeof clearTimeout=="function"?clearTimeout:void 0,Xg=typeof Promise=="function"?Promise:void 0,a6=typeof queueMicrotask=="function"?queueMicrotask:typeof Xg<"u"?function(t){return Xg.resolve(null).then(t).catch(n6)}:b0;function n6(t){setTimeout(function(){throw t})}function Pm(t,e){var r=e,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Il(e);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Il(e)}function oa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ki=Math.random().toString(36).slice(2),ir="__reactFiber$"+ki,$l="__reactProps$"+ki,Er="__reactContainer$"+ki,v0="__reactEvents$"+ki,i6="__reactListeners$"+ki,l6="__reactHandles$"+ki;function Wa(t){var e=t[ir];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Er]||r[ir]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Qg(t);t!==null;){if(r=t[ir])return r;t=Qg(t)}return e}t=r,r=t.parentNode}return null}function yo(t){return t=t[ir]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Un(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function hu(t){return t[$l]||null}var j0=[],Hn=-1;function _a(t){return{current:t}}function Xe(t){0>Hn||(t.current=j0[Hn],j0[Hn]=null,Hn--)}function qe(t,e){Hn++,j0[Hn]=t.current,t.current=e}var va={},Wt=_a(va),cs=_a(!1),gn=va;function mi(t,e){var r=t.type.contextTypes;if(!r)return va;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=e[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function ds(t){return t=t.childContextTypes,t!=null}function xd(){Xe(cs),Xe(Wt)}function Gg(t,e,r){if(Wt.current!==va)throw Error(se(168));qe(Wt,e),qe(cs,r)}function pj(t,e,r){var a=t.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in e))throw Error(se(108,Ww(t)||"Unknown",n));return st({},r,a)}function pd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||va,gn=Wt.current,qe(Wt,t),qe(cs,cs.current),!0}function Jg(t,e,r){var a=t.stateNode;if(!a)throw Error(se(169));r?(t=pj(t,e,gn),a.__reactInternalMemoizedMergedChildContext=t,Xe(cs),Xe(Wt),qe(Wt,t)):Xe(cs),qe(cs,r)}var wr=null,xu=!1,Tm=!1;function gj(t){wr===null?wr=[t]:wr.push(t)}function o6(t){xu=!0,gj(t)}function Pa(){if(!Tm&&wr!==null){Tm=!0;var t=0,e=ze;try{var r=wr;for(ze=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}wr=null,xu=!1}catch(n){throw wr!==null&&(wr=wr.slice(t+1)),Bv(Ex,Pa),n}finally{ze=e,Tm=!1}}return null}var Wn=[],qn=0,gd=null,fd=0,_s=[],Ps=0,fn=null,Cr=1,kr="";function Fa(t,e){Wn[qn++]=fd,Wn[qn++]=gd,gd=t,fd=e}function fj(t,e,r){_s[Ps++]=Cr,_s[Ps++]=kr,_s[Ps++]=fn,fn=t;var a=Cr;t=kr;var n=32-Ws(a)-1;a&=~(1<<n),r+=1;var i=32-Ws(e)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,Cr=1<<32-Ws(e)+n|r<<n|a,kr=i+t}else Cr=1<<i|r<<n|a,kr=t}function Vx(t){t.return!==null&&(Fa(t,1),fj(t,1,0))}function Ux(t){for(;t===gd;)gd=Wn[--qn],Wn[qn]=null,fd=Wn[--qn],Wn[qn]=null;for(;t===fn;)fn=_s[--Ps],_s[Ps]=null,kr=_s[--Ps],_s[Ps]=null,Cr=_s[--Ps],_s[Ps]=null}var bs=null,ys=null,Je=!1,zs=null;function yj(t,e){var r=Ts(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Zg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bs=t,ys=oa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bs=t,ys=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=fn!==null?{id:Cr,overflow:kr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ts(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,bs=t,ys=null,!0):!1;default:return!1}}function N0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function w0(t){if(Je){var e=ys;if(e){var r=e;if(!Zg(t,e)){if(N0(t))throw Error(se(418));e=oa(r.nextSibling);var a=bs;e&&Zg(t,e)?yj(a,r):(t.flags=t.flags&-4097|2,Je=!1,bs=t)}}else{if(N0(t))throw Error(se(418));t.flags=t.flags&-4097|2,Je=!1,bs=t}}}function ef(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bs=t}function Uo(t){if(t!==bs)return!1;if(!Je)return ef(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!y0(t.type,t.memoizedProps)),e&&(e=ys)){if(N0(t))throw bj(),Error(se(418));for(;e;)yj(t,e),e=oa(e.nextSibling)}if(ef(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ys=oa(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ys=null}}else ys=bs?oa(t.stateNode.nextSibling):null;return!0}function bj(){for(var t=ys;t;)t=oa(t.nextSibling)}function hi(){ys=bs=null,Je=!1}function Hx(t){zs===null?zs=[t]:zs.push(t)}var c6=$r.ReactCurrentBatchConfig;function Oi(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(se(309));var a=r.stateNode}if(!a)throw Error(se(147,t));var n=a,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(se(284));if(!r._owner)throw Error(se(290,t))}return t}function Ho(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tf(t){var e=t._init;return e(t._payload)}function vj(t){function e(p,b){if(t){var v=p.deletions;v===null?(p.deletions=[b],p.flags|=16):v.push(b)}}function r(p,b){if(!t)return null;for(;b!==null;)e(p,b),b=b.sibling;return null}function a(p,b){for(p=new Map;b!==null;)b.key!==null?p.set(b.key,b):p.set(b.index,b),b=b.sibling;return p}function n(p,b){return p=ma(p,b),p.index=0,p.sibling=null,p}function i(p,b,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<b?(p.flags|=2,b):v):(p.flags|=2,b)):(p.flags|=1048576,b)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,b,v,w){return b===null||b.tag!==6?(b=Lm(v,p.mode,w),b.return=p,b):(b=n(b,v),b.return=p,b)}function c(p,b,v,w){var N=v.type;return N===$n?u(p,b,v.props.children,w,v.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hr&&tf(N)===b.type)?(w=n(b,v.props),w.ref=Oi(p,b,v),w.return=p,w):(w=kc(v.type,v.key,v.props,null,p.mode,w),w.ref=Oi(p,b,v),w.return=p,w)}function d(p,b,v,w){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=Om(v,p.mode,w),b.return=p,b):(b=n(b,v.children||[]),b.return=p,b)}function u(p,b,v,w,N){return b===null||b.tag!==7?(b=rn(v,p.mode,w,N),b.return=p,b):(b=n(b,v),b.return=p,b)}function m(p,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Lm(""+b,p.mode,v),b.return=p,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Eo:return v=kc(b.type,b.key,b.props,null,p.mode,v),v.ref=Oi(p,null,b),v.return=p,v;case Fn:return b=Om(b,p.mode,v),b.return=p,b;case Hr:var w=b._init;return m(p,w(b._payload),v)}if(Xi(b)||Mi(b))return b=rn(b,p.mode,v,null),b.return=p,b;Ho(p,b)}return null}function h(p,b,v,w){var N=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:o(p,b,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Eo:return v.key===N?c(p,b,v,w):null;case Fn:return v.key===N?d(p,b,v,w):null;case Hr:return N=v._init,h(p,b,N(v._payload),w)}if(Xi(v)||Mi(v))return N!==null?null:u(p,b,v,w,null);Ho(p,v)}return null}function x(p,b,v,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(v)||null,o(b,p,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Eo:return p=p.get(w.key===null?v:w.key)||null,c(b,p,w,N);case Fn:return p=p.get(w.key===null?v:w.key)||null,d(b,p,w,N);case Hr:var S=w._init;return x(p,b,v,S(w._payload),N)}if(Xi(w)||Mi(w))return p=p.get(v)||null,u(b,p,w,N,null);Ho(b,w)}return null}function g(p,b,v,w){for(var N=null,S=null,k=b,P=b=0,_=null;k!==null&&P<v.length;P++){k.index>P?(_=k,k=null):_=k.sibling;var L=h(p,k,v[P],w);if(L===null){k===null&&(k=_);break}t&&k&&L.alternate===null&&e(p,k),b=i(L,b,P),S===null?N=L:S.sibling=L,S=L,k=_}if(P===v.length)return r(p,k),Je&&Fa(p,P),N;if(k===null){for(;P<v.length;P++)k=m(p,v[P],w),k!==null&&(b=i(k,b,P),S===null?N=k:S.sibling=k,S=k);return Je&&Fa(p,P),N}for(k=a(p,k);P<v.length;P++)_=x(k,p,P,v[P],w),_!==null&&(t&&_.alternate!==null&&k.delete(_.key===null?P:_.key),b=i(_,b,P),S===null?N=_:S.sibling=_,S=_);return t&&k.forEach(function(T){return e(p,T)}),Je&&Fa(p,P),N}function f(p,b,v,w){var N=Mi(v);if(typeof N!="function")throw Error(se(150));if(v=N.call(v),v==null)throw Error(se(151));for(var S=N=null,k=b,P=b=0,_=null,L=v.next();k!==null&&!L.done;P++,L=v.next()){k.index>P?(_=k,k=null):_=k.sibling;var T=h(p,k,L.value,w);if(T===null){k===null&&(k=_);break}t&&k&&T.alternate===null&&e(p,k),b=i(T,b,P),S===null?N=T:S.sibling=T,S=T,k=_}if(L.done)return r(p,k),Je&&Fa(p,P),N;if(k===null){for(;!L.done;P++,L=v.next())L=m(p,L.value,w),L!==null&&(b=i(L,b,P),S===null?N=L:S.sibling=L,S=L);return Je&&Fa(p,P),N}for(k=a(p,k);!L.done;P++,L=v.next())L=x(k,p,P,L.value,w),L!==null&&(t&&L.alternate!==null&&k.delete(L.key===null?P:L.key),b=i(L,b,P),S===null?N=L:S.sibling=L,S=L);return t&&k.forEach(function(U){return e(p,U)}),Je&&Fa(p,P),N}function y(p,b,v,w){if(typeof v=="object"&&v!==null&&v.type===$n&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Eo:e:{for(var N=v.key,S=b;S!==null;){if(S.key===N){if(N=v.type,N===$n){if(S.tag===7){r(p,S.sibling),b=n(S,v.props.children),b.return=p,p=b;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hr&&tf(N)===S.type){r(p,S.sibling),b=n(S,v.props),b.ref=Oi(p,S,v),b.return=p,p=b;break e}r(p,S);break}else e(p,S);S=S.sibling}v.type===$n?(b=rn(v.props.children,p.mode,w,v.key),b.return=p,p=b):(w=kc(v.type,v.key,v.props,null,p.mode,w),w.ref=Oi(p,b,v),w.return=p,p=w)}return l(p);case Fn:e:{for(S=v.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){r(p,b.sibling),b=n(b,v.children||[]),b.return=p,p=b;break e}else{r(p,b);break}else e(p,b);b=b.sibling}b=Om(v,p.mode,w),b.return=p,p=b}return l(p);case Hr:return S=v._init,y(p,b,S(v._payload),w)}if(Xi(v))return g(p,b,v,w);if(Mi(v))return f(p,b,v,w);Ho(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(r(p,b.sibling),b=n(b,v),b.return=p,p=b):(r(p,b),b=Lm(v,p.mode,w),b.return=p,p=b),l(p)):r(p,b)}return y}var xi=vj(!0),jj=vj(!1),yd=_a(null),bd=null,Yn=null,Wx=null;function qx(){Wx=Yn=bd=null}function Yx(t){var e=yd.current;Xe(yd),t._currentValue=e}function S0(t,e,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),t===r)break;t=t.return}}function si(t,e){bd=t,Wx=Yn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(os=!0),t.firstContext=null)}function Ms(t){var e=t._currentValue;if(Wx!==t)if(t={context:t,memoizedValue:e,next:null},Yn===null){if(bd===null)throw Error(se(308));Yn=t,bd.dependencies={lanes:0,firstContext:t}}else Yn=Yn.next=t;return e}var qa=null;function Kx(t){qa===null?qa=[t]:qa.push(t)}function Nj(t,e,r,a){var n=e.interleaved;return n===null?(r.next=r,Kx(e)):(r.next=n.next,n.next=r),e.interleaved=r,Ir(t,a)}function Ir(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Wr=!1;function Xx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ca(t,e,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,De&2){var n=a.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),a.pending=e,Ir(t,r)}return n=a.interleaved,n===null?(e.next=e,Kx(a)):(e.next=n.next,n.next=e),a.interleaved=e,Ir(t,r)}function vc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var a=e.lanes;a&=t.pendingLanes,r|=a,e.lanes=r,Ix(t,r)}}function sf(t,e){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=e:i=i.next=e}else n=i=e;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function vd(t,e,r,a){var n=t.updateQueue;Wr=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=n.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,x=o.eventTime;if((a&h)===h){u!==null&&(u=u.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,f=o;switch(h=e,x=r,f.tag){case 1:if(g=f.payload,typeof g=="function"){m=g.call(x,m,h);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=f.payload,h=typeof g=="function"?g.call(x,m,h):g,h==null)break e;m=st({},m,h);break e;case 2:Wr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=n.effects,h===null?n.effects=[o]:h.push(o))}else x={eventTime:x,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=x,c=m):u=u.next=x,l|=h;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;h=o,o=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(1);if(u===null&&(c=m),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,e=n.shared.interleaved,e!==null){n=e;do l|=n.lane,n=n.next;while(n!==e)}else i===null&&(n.shared.lanes=0);bn|=l,t.lanes=l,t.memoizedState=m}}function rf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var a=t[e],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(se(191,n));n.call(a)}}}var bo={},dr=_a(bo),zl=_a(bo),Bl=_a(bo);function Ya(t){if(t===bo)throw Error(se(174));return t}function Qx(t,e){switch(qe(Bl,e),qe(zl,t),qe(dr,bo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:a0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=a0(e,t)}Xe(dr),qe(dr,e)}function pi(){Xe(dr),Xe(zl),Xe(Bl)}function Sj(t){Ya(Bl.current);var e=Ya(dr.current),r=a0(e,t.type);e!==r&&(qe(zl,t),qe(dr,r))}function Gx(t){zl.current===t&&(Xe(dr),Xe(zl))}var et=_a(0);function jd(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Am=[];function Jx(){for(var t=0;t<Am.length;t++)Am[t]._workInProgressVersionPrimary=null;Am.length=0}var jc=$r.ReactCurrentDispatcher,Dm=$r.ReactCurrentBatchConfig,yn=0,tt=null,bt=null,St=null,Nd=!1,ol=!1,Vl=0,d6=0;function Lt(){throw Error(se(321))}function Zx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ks(t[r],e[r]))return!1;return!0}function ep(t,e,r,a,n,i){if(yn=i,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jc.current=t===null||t.memoizedState===null?x6:p6,t=r(a,n),ol){i=0;do{if(ol=!1,Vl=0,25<=i)throw Error(se(301));i+=1,St=bt=null,e.updateQueue=null,jc.current=g6,t=r(a,n)}while(ol)}if(jc.current=wd,e=bt!==null&&bt.next!==null,yn=0,St=bt=tt=null,Nd=!1,e)throw Error(se(300));return t}function tp(){var t=Vl!==0;return Vl=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?tt.memoizedState=St=t:St=St.next=t,St}function Es(){if(bt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var e=St===null?tt.memoizedState:St.next;if(e!==null)St=e,bt=t;else{if(t===null)throw Error(se(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},St===null?tt.memoizedState=St=t:St=St.next=t}return St}function Ul(t,e){return typeof e=="function"?e(t):e}function Mm(t){var e=Es(),r=e.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var a=bt,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((yn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=a):c=c.next=m,tt.lanes|=u,bn|=u}d=d.next}while(d!==null&&d!==i);c===null?l=a:c.next=o,Ks(a,e.memoizedState)||(os=!0),e.memoizedState=a,e.baseState=l,e.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do i=n.lane,tt.lanes|=i,bn|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Em(t){var e=Es(),r=e.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,i=e.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=t(i,l.action),l=l.next;while(l!==n);Ks(i,e.memoizedState)||(os=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,a]}function Cj(){}function kj(t,e){var r=tt,a=Es(),n=e(),i=!Ks(a.memoizedState,n);if(i&&(a.memoizedState=n,os=!0),a=a.queue,sp(Tj.bind(null,r,a,t),[t]),a.getSnapshot!==e||i||St!==null&&St.memoizedState.tag&1){if(r.flags|=2048,Hl(9,Pj.bind(null,r,a,n,e),void 0,null),Ct===null)throw Error(se(349));yn&30||_j(r,e,n)}return n}function _j(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Pj(t,e,r,a){e.value=r,e.getSnapshot=a,Aj(e)&&Dj(t)}function Tj(t,e,r){return r(function(){Aj(e)&&Dj(t)})}function Aj(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ks(t,r)}catch{return!0}}function Dj(t){var e=Ir(t,1);e!==null&&qs(e,t,1,-1)}function af(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:t},e.queue=t,t=t.dispatch=h6.bind(null,tt,t),[e.memoizedState,t]}function Hl(t,e,r,a){return t={tag:t,create:e,destroy:r,deps:a,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,e.lastEffect=t)),t}function Mj(){return Es().memoizedState}function Nc(t,e,r,a){var n=ar();tt.flags|=t,n.memoizedState=Hl(1|e,r,void 0,a===void 0?null:a)}function pu(t,e,r,a){var n=Es();a=a===void 0?null:a;var i=void 0;if(bt!==null){var l=bt.memoizedState;if(i=l.destroy,a!==null&&Zx(a,l.deps)){n.memoizedState=Hl(e,r,i,a);return}}tt.flags|=t,n.memoizedState=Hl(1|e,r,i,a)}function nf(t,e){return Nc(8390656,8,t,e)}function sp(t,e){return pu(2048,8,t,e)}function Ej(t,e){return pu(4,2,t,e)}function Ij(t,e){return pu(4,4,t,e)}function Rj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lj(t,e,r){return r=r!=null?r.concat([t]):null,pu(4,4,Rj.bind(null,e,t),r)}function rp(){}function Oj(t,e){var r=Es();e=e===void 0?null:e;var a=r.memoizedState;return a!==null&&e!==null&&Zx(e,a[1])?a[0]:(r.memoizedState=[t,e],t)}function Fj(t,e){var r=Es();e=e===void 0?null:e;var a=r.memoizedState;return a!==null&&e!==null&&Zx(e,a[1])?a[0]:(t=t(),r.memoizedState=[t,e],t)}function $j(t,e,r){return yn&21?(Ks(r,e)||(r=Hv(),tt.lanes|=r,bn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,os=!0),t.memoizedState=r)}function u6(t,e){var r=ze;ze=r!==0&&4>r?r:4,t(!0);var a=Dm.transition;Dm.transition={};try{t(!1),e()}finally{ze=r,Dm.transition=a}}function zj(){return Es().memoizedState}function m6(t,e,r){var a=ua(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Bj(t))Vj(e,r);else if(r=Nj(t,e,r,a),r!==null){var n=es();qs(r,t,a,n),Uj(r,e,a)}}function h6(t,e,r){var a=ua(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bj(t))Vj(e,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,Ks(o,l)){var c=e.interleaved;c===null?(n.next=n,Kx(e)):(n.next=c.next,c.next=n),e.interleaved=n;return}}catch{}finally{}r=Nj(t,e,n,a),r!==null&&(n=es(),qs(r,t,a,n),Uj(r,e,a))}}function Bj(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function Vj(t,e){ol=Nd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Uj(t,e,r){if(r&4194240){var a=e.lanes;a&=t.pendingLanes,r|=a,e.lanes=r,Ix(t,r)}}var wd={readContext:Ms,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},x6={readContext:Ms,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Ms,useEffect:nf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Nc(4194308,4,Rj.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nc(4,2,t,e)},useMemo:function(t,e){var r=ar();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var a=ar();return e=r!==void 0?r(e):e,a.memoizedState=a.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},a.queue=t,t=t.dispatch=m6.bind(null,tt,t),[a.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:af,useDebugValue:rp,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=af(!1),e=t[0];return t=u6.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var a=tt,n=ar();if(Je){if(r===void 0)throw Error(se(407));r=r()}else{if(r=e(),Ct===null)throw Error(se(349));yn&30||_j(a,e,r)}n.memoizedState=r;var i={value:r,getSnapshot:e};return n.queue=i,nf(Tj.bind(null,a,i,t),[t]),a.flags|=2048,Hl(9,Pj.bind(null,a,i,r,e),void 0,null),r},useId:function(){var t=ar(),e=Ct.identifierPrefix;if(Je){var r=kr,a=Cr;r=(a&~(1<<32-Ws(a)-1)).toString(32)+r,e=":"+e+"R"+r,r=Vl++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=d6++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},p6={readContext:Ms,useCallback:Oj,useContext:Ms,useEffect:sp,useImperativeHandle:Lj,useInsertionEffect:Ej,useLayoutEffect:Ij,useMemo:Fj,useReducer:Mm,useRef:Mj,useState:function(){return Mm(Ul)},useDebugValue:rp,useDeferredValue:function(t){var e=Es();return $j(e,bt.memoizedState,t)},useTransition:function(){var t=Mm(Ul)[0],e=Es().memoizedState;return[t,e]},useMutableSource:Cj,useSyncExternalStore:kj,useId:zj,unstable_isNewReconciler:!1},g6={readContext:Ms,useCallback:Oj,useContext:Ms,useEffect:sp,useImperativeHandle:Lj,useInsertionEffect:Ej,useLayoutEffect:Ij,useMemo:Fj,useReducer:Em,useRef:Mj,useState:function(){return Em(Ul)},useDebugValue:rp,useDeferredValue:function(t){var e=Es();return bt===null?e.memoizedState=t:$j(e,bt.memoizedState,t)},useTransition:function(){var t=Em(Ul)[0],e=Es().memoizedState;return[t,e]},useMutableSource:Cj,useSyncExternalStore:kj,useId:zj,unstable_isNewReconciler:!1};function Fs(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function C0(t,e,r,a){e=t.memoizedState,r=r(a,e),r=r==null?e:st({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var gu={isMounted:function(t){return(t=t._reactInternals)?An(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var a=es(),n=ua(t),i=Ar(a,n);i.payload=e,r!=null&&(i.callback=r),e=ca(t,i,n),e!==null&&(qs(e,t,n,a),vc(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var a=es(),n=ua(t),i=Ar(a,n);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=ca(t,i,n),e!==null&&(qs(e,t,n,a),vc(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=es(),a=ua(t),n=Ar(r,a);n.tag=2,e!=null&&(n.callback=e),e=ca(t,n,a),e!==null&&(qs(e,t,a,r),vc(e,t,a))}};function lf(t,e,r,a,n,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,l):e.prototype&&e.prototype.isPureReactComponent?!Ll(r,a)||!Ll(n,i):!0}function Hj(t,e,r){var a=!1,n=va,i=e.contextType;return typeof i=="object"&&i!==null?i=Ms(i):(n=ds(e)?gn:Wt.current,a=e.contextTypes,i=(a=a!=null)?mi(t,n):va),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gu,t.stateNode=e,e._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),e}function of(t,e,r,a){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,a),e.state!==t&&gu.enqueueReplaceState(e,e.state,null)}function k0(t,e,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Xx(t);var i=e.contextType;typeof i=="object"&&i!==null?n.context=Ms(i):(i=ds(e)?gn:Wt.current,n.context=mi(t,i)),n.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(C0(t,e,i,r),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&gu.enqueueReplaceState(n,n.state,null),vd(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function gi(t,e){try{var r="",a=e;do r+=Hw(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:n,digest:null}}function Im(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function _0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var f6=typeof WeakMap=="function"?WeakMap:Map;function Wj(t,e,r){r=Ar(-1,r),r.tag=3,r.payload={element:null};var a=e.value;return r.callback=function(){Cd||(Cd=!0,O0=a),_0(t,e)},r}function qj(t,e,r){r=Ar(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=e.value;r.payload=function(){return a(n)},r.callback=function(){_0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){_0(t,e),typeof a!="function"&&(da===null?da=new Set([this]):da.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function cf(t,e,r){var a=t.pingCache;if(a===null){a=t.pingCache=new f6;var n=new Set;a.set(e,n)}else n=a.get(e),n===void 0&&(n=new Set,a.set(e,n));n.has(r)||(n.add(r),t=D6.bind(null,t,e,r),e.then(t,t))}function df(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uf(t,e,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ar(-1,1),e.tag=2,ca(r,e,1))),r.lanes|=1),t)}var y6=$r.ReactCurrentOwner,os=!1;function Zt(t,e,r,a){e.child=t===null?jj(e,null,r,a):xi(e,t.child,r,a)}function mf(t,e,r,a,n){r=r.render;var i=e.ref;return si(e,n),a=ep(t,e,r,a,i,n),r=tp(),t!==null&&!os?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Rr(t,e,n)):(Je&&r&&Vx(e),e.flags|=1,Zt(t,e,a,n),e.child)}function hf(t,e,r,a,n){if(t===null){var i=r.type;return typeof i=="function"&&!up(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Yj(t,e,i,a,n)):(t=kc(r.type,null,a,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ll,r(l,a)&&t.ref===e.ref)return Rr(t,e,n)}return e.flags|=1,t=ma(i,a),t.ref=e.ref,t.return=e,e.child=t}function Yj(t,e,r,a,n){if(t!==null){var i=t.memoizedProps;if(Ll(i,a)&&t.ref===e.ref)if(os=!1,e.pendingProps=a=i,(t.lanes&n)!==0)t.flags&131072&&(os=!0);else return e.lanes=t.lanes,Rr(t,e,n)}return P0(t,e,r,a,n)}function Kj(t,e,r){var a=e.pendingProps,n=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Xn,fs),fs|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(Xn,fs),fs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,qe(Xn,fs),fs|=a}else i!==null?(a=i.baseLanes|r,e.memoizedState=null):a=r,qe(Xn,fs),fs|=a;return Zt(t,e,n,r),e.child}function Xj(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function P0(t,e,r,a,n){var i=ds(r)?gn:Wt.current;return i=mi(e,i),si(e,n),r=ep(t,e,r,a,i,n),a=tp(),t!==null&&!os?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Rr(t,e,n)):(Je&&a&&Vx(e),e.flags|=1,Zt(t,e,r,n),e.child)}function xf(t,e,r,a,n){if(ds(r)){var i=!0;pd(e)}else i=!1;if(si(e,n),e.stateNode===null)wc(t,e),Hj(e,r,a),k0(e,r,a,n),a=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ms(d):(d=ds(r)?gn:Wt.current,d=mi(e,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==d)&&of(e,l,a,d),Wr=!1;var h=e.memoizedState;l.state=h,vd(e,a,l,n),c=e.memoizedState,o!==a||h!==c||cs.current||Wr?(typeof u=="function"&&(C0(e,r,u,a),c=e.memoizedState),(o=Wr||lf(e,r,o,a,h,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=c),l.props=a,l.state=c,l.context=d,a=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{l=e.stateNode,wj(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:Fs(e.type,o),l.props=d,m=e.pendingProps,h=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ms(c):(c=ds(r)?gn:Wt.current,c=mi(e,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||h!==c)&&of(e,l,a,c),Wr=!1,h=e.memoizedState,l.state=h,vd(e,a,l,n);var g=e.memoizedState;o!==m||h!==g||cs.current||Wr?(typeof x=="function"&&(C0(e,r,x,a),g=e.memoizedState),(d=Wr||lf(e,r,d,a,h,g,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,g,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=g),l.props=a,l.state=g,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),a=!1)}return T0(t,e,r,a,i,n)}function T0(t,e,r,a,n,i){Xj(t,e);var l=(e.flags&128)!==0;if(!a&&!l)return n&&Jg(e,r,!1),Rr(t,e,i);a=e.stateNode,y6.current=e;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,t!==null&&l?(e.child=xi(e,t.child,null,i),e.child=xi(e,null,o,i)):Zt(t,e,o,i),e.memoizedState=a.state,n&&Jg(e,r,!0),e.child}function Qj(t){var e=t.stateNode;e.pendingContext?Gg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gg(t,e.context,!1),Qx(t,e.containerInfo)}function pf(t,e,r,a,n){return hi(),Hx(n),e.flags|=256,Zt(t,e,r,a),e.child}var A0={dehydrated:null,treeContext:null,retryLane:0};function D0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gj(t,e,r){var a=e.pendingProps,n=et.current,i=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),qe(et,n&1),t===null)return w0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=a.children,t=a.fallback,i?(a=e.mode,i=e.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=bu(l,a,0,null),t=rn(t,a,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=D0(r),e.memoizedState=A0,t):ap(e,l));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return b6(t,e,l,a,o,n,r);if(i){i=a.fallback,l=e.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&e.child!==n?(a=e.child,a.childLanes=0,a.pendingProps=c,e.deletions=null):(a=ma(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=ma(o,i):(i=rn(i,l,r,null),i.flags|=2),i.return=e,a.return=e,a.sibling=i,e.child=a,a=i,i=e.child,l=t.child.memoizedState,l=l===null?D0(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,e.memoizedState=A0,a}return i=t.child,t=i.sibling,a=ma(i,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=r),a.return=e,a.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=a,e.memoizedState=null,a}function ap(t,e){return e=bu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wo(t,e,r,a){return a!==null&&Hx(a),xi(e,t.child,null,r),t=ap(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function b6(t,e,r,a,n,i,l){if(r)return e.flags&256?(e.flags&=-257,a=Im(Error(se(422))),Wo(t,e,l,a)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=a.fallback,n=e.mode,a=bu({mode:"visible",children:a.children},n,0,null),i=rn(i,n,l,null),i.flags|=2,a.return=e,i.return=e,a.sibling=i,e.child=a,e.mode&1&&xi(e,t.child,null,l),e.child.memoizedState=D0(l),e.memoizedState=A0,i);if(!(e.mode&1))return Wo(t,e,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(se(419)),a=Im(i,a,void 0),Wo(t,e,l,a)}if(o=(l&t.childLanes)!==0,os||o){if(a=Ct,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Ir(t,n),qs(a,t,n,-1))}return dp(),a=Im(Error(se(421))),Wo(t,e,l,a)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=M6.bind(null,t),n._reactRetry=e,null):(t=i.treeContext,ys=oa(n.nextSibling),bs=e,Je=!0,zs=null,t!==null&&(_s[Ps++]=Cr,_s[Ps++]=kr,_s[Ps++]=fn,Cr=t.id,kr=t.overflow,fn=e),e=ap(e,a.children),e.flags|=4096,e)}function gf(t,e,r){t.lanes|=e;var a=t.alternate;a!==null&&(a.lanes|=e),S0(t.return,e,r)}function Rm(t,e,r,a,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function Jj(t,e,r){var a=e.pendingProps,n=a.revealOrder,i=a.tail;if(Zt(t,e,a.children,r),a=et.current,a&2)a=a&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gf(t,r,e);else if(t.tag===19)gf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(qe(et,a),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(r=e.child,n=null;r!==null;)t=r.alternate,t!==null&&jd(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=e.child,e.child=null):(n=r.sibling,r.sibling=null),Rm(e,!1,n,r,i);break;case"backwards":for(r=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&jd(t)===null){e.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Rm(e,!0,r,null,i);break;case"together":Rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),bn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,r=ma(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ma(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function v6(t,e,r){switch(e.tag){case 3:Qj(e),hi();break;case 5:Sj(e);break;case 1:ds(e.type)&&pd(e);break;case 4:Qx(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,n=e.memoizedProps.value;qe(yd,a._currentValue),a._currentValue=n;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(qe(et,et.current&1),e.flags|=128,null):r&e.child.childLanes?Gj(t,e,r):(qe(et,et.current&1),t=Rr(t,e,r),t!==null?t.sibling:null);qe(et,et.current&1);break;case 19:if(a=(r&e.childLanes)!==0,t.flags&128){if(a)return Jj(t,e,r);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),qe(et,et.current),a)break;return null;case 22:case 23:return e.lanes=0,Kj(t,e,r)}return Rr(t,e,r)}var Zj,M0,e1,t1;Zj=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};M0=function(){};e1=function(t,e,r,a){var n=t.memoizedProps;if(n!==a){t=e.stateNode,Ya(dr.current);var i=null;switch(r){case"input":n=e0(t,n),a=e0(t,a),i=[];break;case"select":n=st({},n,{value:void 0}),a=st({},a,{value:void 0}),i=[];break;case"textarea":n=r0(t,n),a=r0(t,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=hd)}n0(r,a);var l;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Tl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Tl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ye("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};t1=function(t,e,r,a){r!==a&&(e.flags|=4)};function Fi(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(e)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,e}function j6(t,e,r){var a=e.pendingProps;switch(Ux(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return ds(e.type)&&xd(),Ot(e),null;case 3:return a=e.stateNode,pi(),Xe(cs),Xe(Wt),Jx(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zs!==null&&(z0(zs),zs=null))),M0(t,e),Ot(e),null;case 5:Gx(e);var n=Ya(Bl.current);if(r=e.type,t!==null&&e.stateNode!=null)e1(t,e,r,a,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(se(166));return Ot(e),null}if(t=Ya(dr.current),Uo(e)){a=e.stateNode,r=e.type;var i=e.memoizedProps;switch(a[ir]=e,a[$l]=i,t=(e.mode&1)!==0,r){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(n=0;n<Gi.length;n++)Ye(Gi[n],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":Sg(a,i),Ye("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Ye("invalid",a);break;case"textarea":kg(a,i),Ye("invalid",a)}n0(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&Vo(a.textContent,o,t),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Vo(a.textContent,o,t),n=["children",""+o]):Tl.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ye("scroll",a)}switch(r){case"input":Io(a),Cg(a,i,!0);break;case"textarea":Io(a),_g(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=hd)}a=n,e.updateQueue=a,a!==null&&(e.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=l.createElement(r,{is:a.is}):(t=l.createElement(r),r==="select"&&(l=t,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):t=l.createElementNS(t,r),t[ir]=e,t[$l]=a,Zj(t,e,!1,!1),e.stateNode=t;e:{switch(l=i0(r,a),r){case"dialog":Ye("cancel",t),Ye("close",t),n=a;break;case"iframe":case"object":case"embed":Ye("load",t),n=a;break;case"video":case"audio":for(n=0;n<Gi.length;n++)Ye(Gi[n],t);n=a;break;case"source":Ye("error",t),n=a;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),n=a;break;case"details":Ye("toggle",t),n=a;break;case"input":Sg(t,a),n=e0(t,a),Ye("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=st({},a,{value:void 0}),Ye("invalid",t);break;case"textarea":kg(t,a),n=r0(t,a),Ye("invalid",t);break;default:n=a}n0(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Mv(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Av(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Al(t,c):typeof c=="number"&&Al(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Tl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ye("scroll",t):c!=null&&Px(t,i,c,l))}switch(r){case"input":Io(t),Cg(t,a,!1);break;case"textarea":Io(t),_g(t);break;case"option":a.value!=null&&t.setAttribute("value",""+ba(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?Jn(t,!!a.multiple,i,!1):a.defaultValue!=null&&Jn(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=hd)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)t1(t,e,t.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(se(166));if(r=Ya(Bl.current),Ya(dr.current),Uo(e)){if(a=e.stateNode,r=e.memoizedProps,a[ir]=e,(i=a.nodeValue!==r)&&(t=bs,t!==null))switch(t.tag){case 3:Vo(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vo(a.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[ir]=e,e.stateNode=a}return Ot(e),null;case 13:if(Xe(et),a=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&ys!==null&&e.mode&1&&!(e.flags&128))bj(),hi(),e.flags|=98560,i=!1;else if(i=Uo(e),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(se(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(se(317));i[ir]=e}else hi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),i=!1}else zs!==null&&(z0(zs),zs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?jt===0&&(jt=3):dp())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return pi(),M0(t,e),t===null&&Ol(e.stateNode.containerInfo),Ot(e),null;case 10:return Yx(e.type._context),Ot(e),null;case 17:return ds(e.type)&&xd(),Ot(e),null;case 19:if(Xe(et),i=e.memoizedState,i===null)return Ot(e),null;if(a=(e.flags&128)!==0,l=i.rendering,l===null)if(a)Fi(i,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=jd(t),l!==null){for(e.flags|=128,Fi(i,!1),a=l.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=r,r=e.child;r!==null;)i=r,t=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return qe(et,et.current&1|2),e.child}t=t.sibling}i.tail!==null&&ut()>fi&&(e.flags|=128,a=!0,Fi(i,!1),e.lanes=4194304)}else{if(!a)if(t=jd(l),t!==null){if(e.flags|=128,a=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Fi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Je)return Ot(e),null}else 2*ut()-i.renderingStartTime>fi&&r!==1073741824&&(e.flags|=128,a=!0,Fi(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(r=i.last,r!==null?r.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ut(),e.sibling=null,r=et.current,qe(et,a?r&1|2:r&1),e):(Ot(e),null);case 22:case 23:return cp(),a=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fs&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function N6(t,e){switch(Ux(e),e.tag){case 1:return ds(e.type)&&xd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pi(),Xe(cs),Xe(Wt),Jx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gx(e),null;case 13:if(Xe(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(et),null;case 4:return pi(),null;case 10:return Yx(e.type._context),null;case 22:case 23:return cp(),null;case 24:return null;default:return null}}var qo=!1,Bt=!1,w6=typeof WeakSet=="function"?WeakSet:Set,de=null;function Kn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){it(t,e,a)}else r.current=null}function E0(t,e,r){try{r()}catch(a){it(t,e,a)}}var ff=!1;function S6(t,e){if(g0=dd,t=ij(),Bx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=t,h=null;t:for(;;){for(var x;m!==r||n!==0&&m.nodeType!==3||(o=l+n),m!==i||a!==0&&m.nodeType!==3||(c=l+a),m.nodeType===3&&(l+=m.nodeValue.length),(x=m.firstChild)!==null;)h=m,m=x;for(;;){if(m===t)break t;if(h===r&&++d===n&&(o=l),h===i&&++u===a&&(c=l),(x=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=x}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(f0={focusedElem:t,selectionRange:r},dd=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var f=g.memoizedProps,y=g.memoizedState,p=e.stateNode,b=p.getSnapshotBeforeUpdate(e.elementType===e.type?f:Fs(e.type,f),y);p.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(w){it(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return g=ff,ff=!1,g}function cl(t,e,r){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&E0(e,r,i)}n=n.next}while(n!==a)}}function fu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==e)}}function I0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function s1(t){var e=t.alternate;e!==null&&(t.alternate=null,s1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ir],delete e[$l],delete e[v0],delete e[i6],delete e[l6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function r1(t){return t.tag===5||t.tag===3||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function R0(t,e,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=hd));else if(a!==4&&(t=t.child,t!==null))for(R0(t,e,r),t=t.sibling;t!==null;)R0(t,e,r),t=t.sibling}function L0(t,e,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(L0(t,e,r),t=t.sibling;t!==null;)L0(t,e,r),t=t.sibling}var Dt=null,$s=!1;function Vr(t,e,r){for(r=r.child;r!==null;)a1(t,e,r),r=r.sibling}function a1(t,e,r){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(cu,r)}catch{}switch(r.tag){case 5:Bt||Kn(r,e);case 6:var a=Dt,n=$s;Dt=null,Vr(t,e,r),Dt=a,$s=n,Dt!==null&&($s?(t=Dt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Dt.removeChild(r.stateNode));break;case 18:Dt!==null&&($s?(t=Dt,r=r.stateNode,t.nodeType===8?Pm(t.parentNode,r):t.nodeType===1&&Pm(t,r),Il(t)):Pm(Dt,r.stateNode));break;case 4:a=Dt,n=$s,Dt=r.stateNode.containerInfo,$s=!0,Vr(t,e,r),Dt=a,$s=n;break;case 0:case 11:case 14:case 15:if(!Bt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&E0(r,e,l),n=n.next}while(n!==a)}Vr(t,e,r);break;case 1:if(!Bt&&(Kn(r,e),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){it(r,e,o)}Vr(t,e,r);break;case 21:Vr(t,e,r);break;case 22:r.mode&1?(Bt=(a=Bt)||r.memoizedState!==null,Vr(t,e,r),Bt=a):Vr(t,e,r);break;default:Vr(t,e,r)}}function bf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new w6),e.forEach(function(a){var n=E6.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Os(t,e){var r=e.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Dt=o.stateNode,$s=!1;break e;case 3:Dt=o.stateNode.containerInfo,$s=!0;break e;case 4:Dt=o.stateNode.containerInfo,$s=!0;break e}o=o.return}if(Dt===null)throw Error(se(160));a1(i,l,n),Dt=null,$s=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){it(n,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)n1(e,t),e=e.sibling}function n1(t,e){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Os(e,t),tr(t),a&4){try{cl(3,t,t.return),fu(3,t)}catch(f){it(t,t.return,f)}try{cl(5,t,t.return)}catch(f){it(t,t.return,f)}}break;case 1:Os(e,t),tr(t),a&512&&r!==null&&Kn(r,r.return);break;case 5:if(Os(e,t),tr(t),a&512&&r!==null&&Kn(r,r.return),t.flags&32){var n=t.stateNode;try{Al(n,"")}catch(f){it(t,t.return,f)}}if(a&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&_v(n,i),i0(o,l);var d=i0(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?Mv(n,m):u==="dangerouslySetInnerHTML"?Av(n,m):u==="children"?Al(n,m):Px(n,u,m,d)}switch(o){case"input":t0(n,i);break;case"textarea":Pv(n,i);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Jn(n,!!i.multiple,x,!1):h!==!!i.multiple&&(i.defaultValue!=null?Jn(n,!!i.multiple,i.defaultValue,!0):Jn(n,!!i.multiple,i.multiple?[]:"",!1))}n[$l]=i}catch(f){it(t,t.return,f)}}break;case 6:if(Os(e,t),tr(t),a&4){if(t.stateNode===null)throw Error(se(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(f){it(t,t.return,f)}}break;case 3:if(Os(e,t),tr(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Il(e.containerInfo)}catch(f){it(t,t.return,f)}break;case 4:Os(e,t),tr(t);break;case 13:Os(e,t),tr(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(lp=ut())),a&4&&bf(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Bt=(d=Bt)||u,Os(e,t),Bt=d):Os(e,t),tr(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(de=t,u=t.child;u!==null;){for(m=de=u;de!==null;){switch(h=de,x=h.child,h.tag){case 0:case 11:case 14:case 15:cl(4,h,h.return);break;case 1:Kn(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){a=h,r=h.return;try{e=a,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(f){it(a,r,f)}}break;case 5:Kn(h,h.return);break;case 22:if(h.memoizedState!==null){jf(m);continue}}x!==null?(x.return=h,de=x):jf(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{n=m.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Dv("display",l))}catch(f){it(t,t.return,f)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){it(t,t.return,f)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Os(e,t),tr(t),a&4&&bf(t);break;case 21:break;default:Os(e,t),tr(t)}}function tr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(r1(r)){var a=r;break e}r=r.return}throw Error(se(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Al(n,""),a.flags&=-33);var i=yf(t);L0(t,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=yf(t);R0(t,o,l);break;default:throw Error(se(161))}}catch(c){it(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function C6(t,e,r){de=t,i1(t)}function i1(t,e,r){for(var a=(t.mode&1)!==0;de!==null;){var n=de,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||qo;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Bt;o=qo;var d=Bt;if(qo=l,(Bt=c)&&!d)for(de=n;de!==null;)l=de,c=l.child,l.tag===22&&l.memoizedState!==null?Nf(n):c!==null?(c.return=l,de=c):Nf(n);for(;i!==null;)de=i,i1(i),i=i.sibling;de=n,qo=o,Bt=d}vf(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,de=i):vf(t)}}function vf(t){for(;de!==null;){var e=de;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||fu(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!Bt)if(r===null)a.componentDidMount();else{var n=e.elementType===e.type?r.memoizedProps:Fs(e.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&rf(e,i,a);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}rf(e,l,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Il(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Bt||e.flags&512&&I0(e)}catch(h){it(e,e.return,h)}}if(e===t){de=null;break}if(r=e.sibling,r!==null){r.return=e.return,de=r;break}de=e.return}}function jf(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var r=e.sibling;if(r!==null){r.return=e.return,de=r;break}de=e.return}}function Nf(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{fu(4,e)}catch(c){it(e,r,c)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var n=e.return;try{a.componentDidMount()}catch(c){it(e,n,c)}}var i=e.return;try{I0(e)}catch(c){it(e,i,c)}break;case 5:var l=e.return;try{I0(e)}catch(c){it(e,l,c)}}}catch(c){it(e,e.return,c)}if(e===t){de=null;break}var o=e.sibling;if(o!==null){o.return=e.return,de=o;break}de=e.return}}var k6=Math.ceil,Sd=$r.ReactCurrentDispatcher,np=$r.ReactCurrentOwner,Ds=$r.ReactCurrentBatchConfig,De=0,Ct=null,ft=null,Mt=0,fs=0,Xn=_a(0),jt=0,Wl=null,bn=0,yu=0,ip=0,dl=null,is=null,lp=0,fi=1/0,Nr=null,Cd=!1,O0=null,da=null,Yo=!1,ea=null,kd=0,ul=0,F0=null,Sc=-1,Cc=0;function es(){return De&6?ut():Sc!==-1?Sc:Sc=ut()}function ua(t){return t.mode&1?De&2&&Mt!==0?Mt&-Mt:c6.transition!==null?(Cc===0&&(Cc=Hv()),Cc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:Gv(t.type)),t):1}function qs(t,e,r,a){if(50<ul)throw ul=0,F0=null,Error(se(185));go(t,r,a),(!(De&2)||t!==Ct)&&(t===Ct&&(!(De&2)&&(yu|=r),jt===4&&Kr(t,Mt)),us(t,a),r===1&&De===0&&!(e.mode&1)&&(fi=ut()+500,xu&&Pa()))}function us(t,e){var r=t.callbackNode;c4(t,e);var a=cd(t,t===Ct?Mt:0);if(a===0)r!==null&&Ag(r),t.callbackNode=null,t.callbackPriority=0;else if(e=a&-a,t.callbackPriority!==e){if(r!=null&&Ag(r),e===1)t.tag===0?o6(wf.bind(null,t)):gj(wf.bind(null,t)),a6(function(){!(De&6)&&Pa()}),r=null;else{switch(Wv(a)){case 1:r=Ex;break;case 4:r=Vv;break;case 16:r=od;break;case 536870912:r=Uv;break;default:r=od}r=x1(r,l1.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function l1(t,e){if(Sc=-1,Cc=0,De&6)throw Error(se(327));var r=t.callbackNode;if(ri()&&t.callbackNode!==r)return null;var a=cd(t,t===Ct?Mt:0);if(a===0)return null;if(a&30||a&t.expiredLanes||e)e=_d(t,a);else{e=a;var n=De;De|=2;var i=c1();(Ct!==t||Mt!==e)&&(Nr=null,fi=ut()+500,sn(t,e));do try{T6();break}catch(o){o1(t,o)}while(1);qx(),Sd.current=i,De=n,ft!==null?e=0:(Ct=null,Mt=0,e=jt)}if(e!==0){if(e===2&&(n=u0(t),n!==0&&(a=n,e=$0(t,n))),e===1)throw r=Wl,sn(t,0),Kr(t,a),us(t,ut()),r;if(e===6)Kr(t,a);else{if(n=t.current.alternate,!(a&30)&&!_6(n)&&(e=_d(t,a),e===2&&(i=u0(t),i!==0&&(a=i,e=$0(t,i))),e===1))throw r=Wl,sn(t,0),Kr(t,a),us(t,ut()),r;switch(t.finishedWork=n,t.finishedLanes=a,e){case 0:case 1:throw Error(se(345));case 2:$a(t,is,Nr);break;case 3:if(Kr(t,a),(a&130023424)===a&&(e=lp+500-ut(),10<e)){if(cd(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){es(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=b0($a.bind(null,t,is,Nr),e);break}$a(t,is,Nr);break;case 4:if(Kr(t,a),(a&4194240)===a)break;for(e=t.eventTimes,n=-1;0<a;){var l=31-Ws(a);i=1<<l,l=e[l],l>n&&(n=l),a&=~i}if(a=n,a=ut()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*k6(a/1960))-a,10<a){t.timeoutHandle=b0($a.bind(null,t,is,Nr),a);break}$a(t,is,Nr);break;case 5:$a(t,is,Nr);break;default:throw Error(se(329))}}}return us(t,ut()),t.callbackNode===r?l1.bind(null,t):null}function $0(t,e){var r=dl;return t.current.memoizedState.isDehydrated&&(sn(t,e).flags|=256),t=_d(t,e),t!==2&&(e=is,is=r,e!==null&&z0(e)),t}function z0(t){is===null?is=t:is.push.apply(is,t)}function _6(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!Ks(i(),n))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~ip,e&=~yu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ws(e),a=1<<r;t[r]=-1,e&=~a}}function wf(t){if(De&6)throw Error(se(327));ri();var e=cd(t,0);if(!(e&1))return us(t,ut()),null;var r=_d(t,e);if(t.tag!==0&&r===2){var a=u0(t);a!==0&&(e=a,r=$0(t,a))}if(r===1)throw r=Wl,sn(t,0),Kr(t,e),us(t,ut()),r;if(r===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$a(t,is,Nr),us(t,ut()),null}function op(t,e){var r=De;De|=1;try{return t(e)}finally{De=r,De===0&&(fi=ut()+500,xu&&Pa())}}function vn(t){ea!==null&&ea.tag===0&&!(De&6)&&ri();var e=De;De|=1;var r=Ds.transition,a=ze;try{if(Ds.transition=null,ze=1,t)return t()}finally{ze=a,Ds.transition=r,De=e,!(De&6)&&Pa()}}function cp(){fs=Xn.current,Xe(Xn)}function sn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,r6(r)),ft!==null)for(r=ft.return;r!==null;){var a=r;switch(Ux(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&xd();break;case 3:pi(),Xe(cs),Xe(Wt),Jx();break;case 5:Gx(a);break;case 4:pi();break;case 13:Xe(et);break;case 19:Xe(et);break;case 10:Yx(a.type._context);break;case 22:case 23:cp()}r=r.return}if(Ct=t,ft=t=ma(t.current,null),Mt=fs=e,jt=0,Wl=null,ip=yu=bn=0,is=dl=null,qa!==null){for(e=0;e<qa.length;e++)if(r=qa[e],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}qa=null}return t}function o1(t,e){do{var r=ft;try{if(qx(),jc.current=wd,Nd){for(var a=tt.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Nd=!1}if(yn=0,St=bt=tt=null,ol=!1,Vl=0,np.current=null,r===null||r.return===null){jt=1,Wl=e,ft=null;break}e:{var i=t,l=r.return,o=r,c=e;if(e=Mt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=df(l);if(x!==null){x.flags&=-257,uf(x,l,o,i,e),x.mode&1&&cf(i,d,e),e=x,c=d;var g=e.updateQueue;if(g===null){var f=new Set;f.add(c),e.updateQueue=f}else g.add(c);break e}else{if(!(e&1)){cf(i,d,e),dp();break e}c=Error(se(426))}}else if(Je&&o.mode&1){var y=df(l);if(y!==null){!(y.flags&65536)&&(y.flags|=256),uf(y,l,o,i,e),Hx(gi(c,o));break e}}i=c=gi(c,o),jt!==4&&(jt=2),dl===null?dl=[i]:dl.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Wj(i,c,e);sf(i,p);break e;case 1:o=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(da===null||!da.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=qj(i,o,e);sf(i,w);break e}}i=i.return}while(i!==null)}u1(r)}catch(N){e=N,ft===r&&r!==null&&(ft=r=r.return);continue}break}while(1)}function c1(){var t=Sd.current;return Sd.current=wd,t===null?wd:t}function dp(){(jt===0||jt===3||jt===2)&&(jt=4),Ct===null||!(bn&268435455)&&!(yu&268435455)||Kr(Ct,Mt)}function _d(t,e){var r=De;De|=2;var a=c1();(Ct!==t||Mt!==e)&&(Nr=null,sn(t,e));do try{P6();break}catch(n){o1(t,n)}while(1);if(qx(),De=r,Sd.current=a,ft!==null)throw Error(se(261));return Ct=null,Mt=0,jt}function P6(){for(;ft!==null;)d1(ft)}function T6(){for(;ft!==null&&!e4();)d1(ft)}function d1(t){var e=h1(t.alternate,t,fs);t.memoizedProps=t.pendingProps,e===null?u1(t):ft=e,np.current=null}function u1(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=N6(r,e),r!==null){r.flags&=32767,ft=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,ft=null;return}}else if(r=j6(r,e,fs),r!==null){ft=r;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);jt===0&&(jt=5)}function $a(t,e,r){var a=ze,n=Ds.transition;try{Ds.transition=null,ze=1,A6(t,e,r,a)}finally{Ds.transition=n,ze=a}return null}function A6(t,e,r,a){do ri();while(ea!==null);if(De&6)throw Error(se(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(d4(t,i),t===Ct&&(ft=Ct=null,Mt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yo||(Yo=!0,x1(od,function(){return ri(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ds.transition,Ds.transition=null;var l=ze;ze=1;var o=De;De|=4,np.current=null,S6(t,r),n1(r,t),Q4(f0),dd=!!g0,f0=g0=null,t.current=r,C6(r),t4(),De=o,ze=l,Ds.transition=i}else t.current=r;if(Yo&&(Yo=!1,ea=t,kd=n),i=t.pendingLanes,i===0&&(da=null),a4(r.stateNode),us(t,ut()),e!==null)for(a=t.onRecoverableError,r=0;r<e.length;r++)n=e[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Cd)throw Cd=!1,t=O0,O0=null,t;return kd&1&&t.tag!==0&&ri(),i=t.pendingLanes,i&1?t===F0?ul++:(ul=0,F0=t):ul=0,Pa(),null}function ri(){if(ea!==null){var t=Wv(kd),e=Ds.transition,r=ze;try{if(Ds.transition=null,ze=16>t?16:t,ea===null)var a=!1;else{if(t=ea,ea=null,kd=0,De&6)throw Error(se(331));var n=De;for(De|=4,de=t.current;de!==null;){var i=de,l=i.child;if(de.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(de=d;de!==null;){var u=de;switch(u.tag){case 0:case 11:case 15:cl(8,u,i)}var m=u.child;if(m!==null)m.return=u,de=m;else for(;de!==null;){u=de;var h=u.sibling,x=u.return;if(s1(u),u===d){de=null;break}if(h!==null){h.return=x,de=h;break}de=x}}}var g=i.alternate;if(g!==null){var f=g.child;if(f!==null){g.child=null;do{var y=f.sibling;f.sibling=null,f=y}while(f!==null)}}de=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,de=l;else e:for(;de!==null;){if(i=de,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cl(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,de=p;break e}de=i.return}}var b=t.current;for(de=b;de!==null;){l=de;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,de=v;else e:for(l=b;de!==null;){if(o=de,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:fu(9,o)}}catch(N){it(o,o.return,N)}if(o===l){de=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,de=w;break e}de=o.return}}if(De=n,Pa(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(cu,t)}catch{}a=!0}return a}finally{ze=r,Ds.transition=e}}return!1}function Sf(t,e,r){e=gi(r,e),e=Wj(t,e,1),t=ca(t,e,1),e=es(),t!==null&&(go(t,1,e),us(t,e))}function it(t,e,r){if(t.tag===3)Sf(t,t,r);else for(;e!==null;){if(e.tag===3){Sf(e,t,r);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(da===null||!da.has(a))){t=gi(r,t),t=qj(e,t,1),e=ca(e,t,1),t=es(),e!==null&&(go(e,1,t),us(e,t));break}}e=e.return}}function D6(t,e,r){var a=t.pingCache;a!==null&&a.delete(e),e=es(),t.pingedLanes|=t.suspendedLanes&r,Ct===t&&(Mt&r)===r&&(jt===4||jt===3&&(Mt&130023424)===Mt&&500>ut()-lp?sn(t,0):ip|=r),us(t,e)}function m1(t,e){e===0&&(t.mode&1?(e=Oo,Oo<<=1,!(Oo&130023424)&&(Oo=4194304)):e=1);var r=es();t=Ir(t,e),t!==null&&(go(t,e,r),us(t,r))}function M6(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),m1(t,r)}function E6(t,e){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(se(314))}a!==null&&a.delete(e),m1(t,r)}var h1;h1=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||cs.current)os=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return os=!1,v6(t,e,r);os=!!(t.flags&131072)}else os=!1,Je&&e.flags&1048576&&fj(e,fd,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;wc(t,e),t=e.pendingProps;var n=mi(e,Wt.current);si(e,r),n=ep(null,e,a,t,n,r);var i=tp();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ds(a)?(i=!0,pd(e)):i=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Xx(e),n.updater=gu,e.stateNode=n,n._reactInternals=e,k0(e,a,t,r),e=T0(null,e,a,!0,i,r)):(e.tag=0,Je&&i&&Vx(e),Zt(null,e,n,r),e=e.child),e;case 16:a=e.elementType;e:{switch(wc(t,e),t=e.pendingProps,n=a._init,a=n(a._payload),e.type=a,n=e.tag=R6(a),t=Fs(a,t),n){case 0:e=P0(null,e,a,t,r);break e;case 1:e=xf(null,e,a,t,r);break e;case 11:e=mf(null,e,a,t,r);break e;case 14:e=hf(null,e,a,Fs(a.type,t),r);break e}throw Error(se(306,a,""))}return e;case 0:return a=e.type,n=e.pendingProps,n=e.elementType===a?n:Fs(a,n),P0(t,e,a,n,r);case 1:return a=e.type,n=e.pendingProps,n=e.elementType===a?n:Fs(a,n),xf(t,e,a,n,r);case 3:e:{if(Qj(e),t===null)throw Error(se(387));a=e.pendingProps,i=e.memoizedState,n=i.element,wj(t,e),vd(e,a,null,r);var l=e.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){n=gi(Error(se(423)),e),e=pf(t,e,a,r,n);break e}else if(a!==n){n=gi(Error(se(424)),e),e=pf(t,e,a,r,n);break e}else for(ys=oa(e.stateNode.containerInfo.firstChild),bs=e,Je=!0,zs=null,r=jj(e,null,a,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hi(),a===n){e=Rr(t,e,r);break e}Zt(t,e,a,r)}e=e.child}return e;case 5:return Sj(e),t===null&&w0(e),a=e.type,n=e.pendingProps,i=t!==null?t.memoizedProps:null,l=n.children,y0(a,n)?l=null:i!==null&&y0(a,i)&&(e.flags|=32),Xj(t,e),Zt(t,e,l,r),e.child;case 6:return t===null&&w0(e),null;case 13:return Gj(t,e,r);case 4:return Qx(e,e.stateNode.containerInfo),a=e.pendingProps,t===null?e.child=xi(e,null,a,r):Zt(t,e,a,r),e.child;case 11:return a=e.type,n=e.pendingProps,n=e.elementType===a?n:Fs(a,n),mf(t,e,a,n,r);case 7:return Zt(t,e,e.pendingProps,r),e.child;case 8:return Zt(t,e,e.pendingProps.children,r),e.child;case 12:return Zt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(a=e.type._context,n=e.pendingProps,i=e.memoizedProps,l=n.value,qe(yd,a._currentValue),a._currentValue=l,i!==null)if(Ks(i.value,l)){if(i.children===n.children&&!cs.current){e=Rr(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Ar(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),S0(i.return,r,e),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(se(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),S0(l,r,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Zt(t,e,n.children,r),e=e.child}return e;case 9:return n=e.type,a=e.pendingProps.children,si(e,r),n=Ms(n),a=a(n),e.flags|=1,Zt(t,e,a,r),e.child;case 14:return a=e.type,n=Fs(a,e.pendingProps),n=Fs(a.type,n),hf(t,e,a,n,r);case 15:return Yj(t,e,e.type,e.pendingProps,r);case 17:return a=e.type,n=e.pendingProps,n=e.elementType===a?n:Fs(a,n),wc(t,e),e.tag=1,ds(a)?(t=!0,pd(e)):t=!1,si(e,r),Hj(e,a,n),k0(e,a,n,r),T0(null,e,a,!0,t,r);case 19:return Jj(t,e,r);case 22:return Kj(t,e,r)}throw Error(se(156,e.tag))};function x1(t,e){return Bv(t,e)}function I6(t,e,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(t,e,r,a){return new I6(t,e,r,a)}function up(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R6(t){if(typeof t=="function")return up(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ax)return 11;if(t===Dx)return 14}return 2}function ma(t,e){var r=t.alternate;return r===null?(r=Ts(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function kc(t,e,r,a,n,i){var l=2;if(a=t,typeof t=="function")up(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case $n:return rn(r.children,n,i,e);case Tx:l=8,n|=8;break;case Qh:return t=Ts(12,r,e,n|2),t.elementType=Qh,t.lanes=i,t;case Gh:return t=Ts(13,r,e,n),t.elementType=Gh,t.lanes=i,t;case Jh:return t=Ts(19,r,e,n),t.elementType=Jh,t.lanes=i,t;case Sv:return bu(r,n,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nv:l=10;break e;case wv:l=9;break e;case Ax:l=11;break e;case Dx:l=14;break e;case Hr:l=16,a=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Ts(l,r,e,n),e.elementType=t,e.type=a,e.lanes=i,e}function rn(t,e,r,a){return t=Ts(7,t,a,e),t.lanes=r,t}function bu(t,e,r,a){return t=Ts(22,t,a,e),t.elementType=Sv,t.lanes=r,t.stateNode={isHidden:!1},t}function Lm(t,e,r){return t=Ts(6,t,null,e),t.lanes=r,t}function Om(t,e,r){return e=Ts(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function L6(t,e,r,a,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fm(0),this.expirationTimes=fm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fm(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function mp(t,e,r,a,n,i,l,o,c){return t=new L6(t,e,r,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ts(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xx(i),t}function O6(t,e,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:a==null?null:""+a,children:t,containerInfo:e,implementation:r}}function p1(t){if(!t)return va;t=t._reactInternals;e:{if(An(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ds(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var r=t.type;if(ds(r))return pj(t,r,e)}return e}function g1(t,e,r,a,n,i,l,o,c){return t=mp(r,a,!0,t,n,i,l,o,c),t.context=p1(null),r=t.current,a=es(),n=ua(r),i=Ar(a,n),i.callback=e??null,ca(r,i,n),t.current.lanes=n,go(t,n,a),us(t,a),t}function vu(t,e,r,a){var n=e.current,i=es(),l=ua(n);return r=p1(r),e.context===null?e.context=r:e.pendingContext=r,e=Ar(i,l),e.payload={element:t},a=a===void 0?null:a,a!==null&&(e.callback=a),t=ca(n,e,l),t!==null&&(qs(t,n,l,i),vc(t,n,l)),l}function Pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hp(t,e){Cf(t,e),(t=t.alternate)&&Cf(t,e)}function F6(){return null}var f1=typeof reportError=="function"?reportError:function(t){console.error(t)};function xp(t){this._internalRoot=t}ju.prototype.render=xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));vu(t,e,null,null)};ju.prototype.unmount=xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vn(function(){vu(null,t,null,null)}),e[Er]=null}};function ju(t){this._internalRoot=t}ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kv();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Yr.length&&e!==0&&e<Yr[r].priority;r++);Yr.splice(r,0,t),r===0&&Qv(t)}};function pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kf(){}function $6(t,e,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=Pd(l);i.call(d)}}var l=g1(e,a,t,0,null,!1,!1,"",kf);return t._reactRootContainer=l,t[Er]=l.current,Ol(t.nodeType===8?t.parentNode:t),vn(),l}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=Pd(c);o.call(d)}}var c=mp(t,0,!1,null,null,!1,!1,"",kf);return t._reactRootContainer=c,t[Er]=c.current,Ol(t.nodeType===8?t.parentNode:t),vn(function(){vu(e,c,r,a)}),c}function wu(t,e,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=Pd(l);o.call(c)}}vu(e,l,t,n)}else l=$6(r,e,t,n,a);return Pd(l)}qv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Qi(e.pendingLanes);r!==0&&(Ix(e,r|1),us(e,ut()),!(De&6)&&(fi=ut()+500,Pa()))}break;case 13:vn(function(){var a=Ir(t,1);if(a!==null){var n=es();qs(a,t,1,n)}}),hp(t,1)}};Rx=function(t){if(t.tag===13){var e=Ir(t,134217728);if(e!==null){var r=es();qs(e,t,134217728,r)}hp(t,134217728)}};Yv=function(t){if(t.tag===13){var e=ua(t),r=Ir(t,e);if(r!==null){var a=es();qs(r,t,e,a)}hp(t,e)}};Kv=function(){return ze};Xv=function(t,e){var r=ze;try{return ze=t,e()}finally{ze=r}};o0=function(t,e,r){switch(e){case"input":if(t0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var a=r[e];if(a!==t&&a.form===t.form){var n=hu(a);if(!n)throw Error(se(90));kv(a),t0(a,n)}}}break;case"textarea":Pv(t,r);break;case"select":e=r.value,e!=null&&Jn(t,!!r.multiple,e,!1)}};Rv=op;Lv=vn;var z6={usingClientEntryPoint:!1,Events:[yo,Un,hu,Ev,Iv,op]},$i={findFiberByHostInstance:Wa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B6={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$v(t),t===null?null:t.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||F6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{cu=Ko.inject(B6),cr=Ko}catch{}}Ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z6;Ns.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pp(e))throw Error(se(200));return O6(t,e,null,r)};Ns.createRoot=function(t,e){if(!pp(t))throw Error(se(299));var r=!1,a="",n=f1;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=mp(t,1,!1,null,null,r,!1,a,n),t[Er]=e.current,Ol(t.nodeType===8?t.parentNode:t),new xp(e)};Ns.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=$v(e),t=t===null?null:t.stateNode,t};Ns.flushSync=function(t){return vn(t)};Ns.hydrate=function(t,e,r){if(!Nu(e))throw Error(se(200));return wu(null,t,e,!0,r)};Ns.hydrateRoot=function(t,e,r){if(!pp(t))throw Error(se(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=f1;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=g1(e,null,t,1,r??null,n,!1,i,l),t[Er]=e.current,Ol(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,n]:e.mutableSourceEagerHydrationData.push(r,n);return new ju(e)};Ns.render=function(t,e,r){if(!Nu(e))throw Error(se(200));return wu(null,t,e,!1,r)};Ns.unmountComponentAtNode=function(t){if(!Nu(t))throw Error(se(40));return t._reactRootContainer?(vn(function(){wu(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};Ns.unstable_batchedUpdates=op;Ns.unstable_renderSubtreeIntoContainer=function(t,e,r,a){if(!Nu(r))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return wu(t,e,r,!1,a)};Ns.version="18.3.1-next-f1338f8080-20240426";function y1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y1)}catch(t){console.error(t)}}y1(),yv.exports=Ns;var b1=yv.exports,_f=b1;Kh.createRoot=_f.createRoot,Kh.hydrateRoot=_f.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ql.apply(this,arguments)}var ta;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ta||(ta={}));const Pf="popstate";function V6(t){t===void 0&&(t={});function e(a,n){let{pathname:i,search:l,hash:o}=a.location;return B0("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:Td(n)}return H6(e,r,null,t)}function xt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function v1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function U6(){return Math.random().toString(36).substr(2,8)}function Tf(t,e){return{usr:t.state,key:t.key,idx:e}}function B0(t,e,r,a){return r===void 0&&(r=null),ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_i(e):e,{state:r,key:e&&e.key||a||U6()})}function Td(t){let{pathname:e="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function _i(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(e.search=t.substr(a),t=t.substr(0,a)),t&&(e.pathname=t)}return e}function H6(t,e,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,l=n.history,o=ta.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(ql({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){o=ta.Pop;let y=u(),p=y==null?null:y-d;d=y,c&&c({action:o,location:f.location,delta:p})}function h(y,p){o=ta.Push;let b=B0(f.location,y,p);r&&r(b,y),d=u()+1;let v=Tf(b,d),w=f.createHref(b);try{l.pushState(v,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;n.location.assign(w)}i&&c&&c({action:o,location:f.location,delta:1})}function x(y,p){o=ta.Replace;let b=B0(f.location,y,p);r&&r(b,y),d=u();let v=Tf(b,d),w=f.createHref(b);l.replaceState(v,"",w),i&&c&&c({action:o,location:f.location,delta:0})}function g(y){let p=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof y=="string"?y:Td(y);return b=b.replace(/ $/,"%20"),xt(p,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,p)}let f={get action(){return o},get location(){return t(n,l)},listen(y){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Pf,m),c=y,()=>{n.removeEventListener(Pf,m),c=null}},createHref(y){return e(n,y)},createURL:g,encodeLocation(y){let p=g(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:x,go(y){return l.go(y)}};return f}var Af;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Af||(Af={}));function W6(t,e,r){return r===void 0&&(r="/"),q6(t,e,r,!1)}function q6(t,e,r,a){let n=typeof e=="string"?_i(e):e,i=gp(n.pathname||"/",r);if(i==null)return null;let l=j1(t);Y6(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=a3(i);o=s3(l[c],d,a)}return o}function j1(t,e,r,a){e===void 0&&(e=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(xt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=ha([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(xt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),j1(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:e3(d,i.index),routesMeta:u})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,l);else for(let c of N1(i.path))n(i,l,c)}),e}function N1(t){let e=t.split("/");if(e.length===0)return[];let[r,...a]=e,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let l=N1(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Y6(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:t3(e.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const K6=/^:[\w-]+$/,X6=3,Q6=2,G6=1,J6=10,Z6=-2,Df=t=>t==="*";function e3(t,e){let r=t.split("/"),a=r.length;return r.some(Df)&&(a+=Z6),e&&(a+=Q6),r.filter(n=>!Df(n)).reduce((n,i)=>n+(K6.test(i)?X6:i===""?G6:J6),a)}function t3(t,e){return t.length===e.length&&t.slice(0,-1).every((a,n)=>a===e[n])?t[t.length-1]-e[e.length-1]:0}function s3(t,e,r){r===void 0&&(r=!1);let{routesMeta:a}=t,n={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,u=i==="/"?e:e.slice(i.length)||"/",m=Mf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m&&d&&r&&!a[a.length-1].route.index&&(m=Mf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(n,m.params),l.push({params:n,pathname:ha([i,m.pathname]),pathnameBase:o3(ha([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=ha([i,m.pathnameBase]))}return l}function Mf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=r3(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,u,m)=>{let{paramName:h,isOptional:x}=u;if(h==="*"){let f=o[m]||"";l=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const g=o[m];return x&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function r3(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),v1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),a]}function a3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return v1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}function n3(t,e){e===void 0&&(e="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?_i(t):t;return{pathname:r?r.startsWith("/")?r:i3(r,e):e,search:c3(a),hash:d3(n)}}function i3(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Fm(t,e,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function l3(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function fp(t,e){let r=l3(t);return e?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function yp(t,e,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=_i(t):(n=ql({},t),xt(!n.pathname||!n.pathname.includes("?"),Fm("?","pathname","search",n)),xt(!n.pathname||!n.pathname.includes("#"),Fm("#","pathname","hash",n)),xt(!n.search||!n.search.includes("#"),Fm("#","search","hash",n)));let i=t===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=r;else{let m=e.length-1;if(!a&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),m-=1;n.pathname=h.join("/")}o=m>=0?e[m]:"/"}let c=n3(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const ha=t=>t.join("/").replace(/\/\/+/g,"/"),o3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),c3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,d3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function u3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const w1=["post","put","patch","delete"];new Set(w1);const m3=["get",...w1];new Set(m3);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yl(){return Yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Yl.apply(this,arguments)}const bp=j.createContext(null),h3=j.createContext(null),Ta=j.createContext(null),Su=j.createContext(null),pr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),S1=j.createContext(null);function x3(t,e){let{relative:r}=e===void 0?{}:e;Pi()||xt(!1);let{basename:a,navigator:n}=j.useContext(Ta),{hash:i,pathname:l,search:o}=k1(t,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:ha([a,l])),n.createHref({pathname:c,search:o,hash:i})}function Pi(){return j.useContext(Su)!=null}function gr(){return Pi()||xt(!1),j.useContext(Su).location}function C1(t){j.useContext(Ta).static||j.useLayoutEffect(t)}function Dn(){let{isDataRoute:t}=j.useContext(pr);return t?A3():p3()}function p3(){Pi()||xt(!1);let t=j.useContext(bp),{basename:e,future:r,navigator:a}=j.useContext(Ta),{matches:n}=j.useContext(pr),{pathname:i}=gr(),l=JSON.stringify(fp(n,r.v7_relativeSplatPath)),o=j.useRef(!1);return C1(()=>{o.current=!0}),j.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let m=yp(d,JSON.parse(l),i,u.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ha([e,m.pathname])),(u.replace?a.replace:a.push)(m,u.state,u)},[e,a,l,i,t])}const g3=j.createContext(null);function f3(t){let e=j.useContext(pr).outlet;return e&&j.createElement(g3.Provider,{value:t},e)}function y3(){let{matches:t}=j.useContext(pr),e=t[t.length-1];return e?e.params:{}}function k1(t,e){let{relative:r}=e===void 0?{}:e,{future:a}=j.useContext(Ta),{matches:n}=j.useContext(pr),{pathname:i}=gr(),l=JSON.stringify(fp(n,a.v7_relativeSplatPath));return j.useMemo(()=>yp(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function b3(t,e){return v3(t,e)}function v3(t,e,r,a){Pi()||xt(!1);let{navigator:n}=j.useContext(Ta),{matches:i}=j.useContext(pr),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=gr(),u;if(e){var m;let y=typeof e=="string"?_i(e):e;c==="/"||(m=y.pathname)!=null&&m.startsWith(c)||xt(!1),u=y}else u=d;let h=u.pathname||"/",x=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=W6(t,{pathname:x}),f=C3(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:ha([c,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ha([c,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,a);return e&&f?j.createElement(Su.Provider,{value:{location:Yl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ta.Pop}},f):f}function j3(){let t=T3(),e=u3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),r?j.createElement("pre",{style:n},r):null,i)}const N3=j.createElement(j3,null);class w3 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?j.createElement(pr.Provider,{value:this.props.routeContext},j.createElement(S1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S3(t){let{routeContext:e,match:r,children:a}=t,n=j.useContext(bp);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(pr.Provider,{value:e},a)}function C3(t,e,r,a){var n;if(e===void 0&&(e=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let u=l.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||xt(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:x}=r,g=m.route.loader&&h[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||g){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,h)=>{let x,g=!1,f=null,y=null;r&&(x=o&&m.route.id?o[m.route.id]:void 0,f=m.route.errorElement||N3,c&&(d<0&&h===0?(D3("route-fallback",!1),g=!0,y=null):d===h&&(g=!0,y=m.route.hydrateFallbackElement||null)));let p=e.concat(l.slice(0,h+1)),b=()=>{let v;return x?v=f:g?v=y:m.route.Component?v=j.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=u,j.createElement(S3,{match:m,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:v})};return r&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?j.createElement(w3,{location:r.location,revalidation:r.revalidation,component:f,error:x,children:b(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):b()},null)}var _1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_1||{}),Ad=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ad||{});function k3(t){let e=j.useContext(bp);return e||xt(!1),e}function _3(t){let e=j.useContext(h3);return e||xt(!1),e}function P3(t){let e=j.useContext(pr);return e||xt(!1),e}function P1(t){let e=P3(),r=e.matches[e.matches.length-1];return r.route.id||xt(!1),r.route.id}function T3(){var t;let e=j.useContext(S1),r=_3(Ad.UseRouteError),a=P1(Ad.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[a]}function A3(){let{router:t}=k3(_1.UseNavigateStable),e=P1(Ad.UseNavigateStable),r=j.useRef(!1);return C1(()=>{r.current=!0}),j.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Yl({fromRouteId:e},i)))},[t,e])}const Ef={};function D3(t,e,r){!e&&!Ef[t]&&(Ef[t]=!0)}function M3(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function za(t){let{to:e,replace:r,state:a,relative:n}=t;Pi()||xt(!1);let{future:i,static:l}=j.useContext(Ta),{matches:o}=j.useContext(pr),{pathname:c}=gr(),d=Dn(),u=yp(e,fp(o,i.v7_relativeSplatPath),c,n==="path"),m=JSON.stringify(u);return j.useEffect(()=>d(JSON.parse(m),{replace:r,state:a,relative:n}),[d,m,n,r,a]),null}function T1(t){return f3(t.context)}function be(t){xt(!1)}function E3(t){let{basename:e="/",children:r=null,location:a,navigationType:n=ta.Pop,navigator:i,static:l=!1,future:o}=t;Pi()&&xt(!1);let c=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:i,static:l,future:Yl({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=_i(a));let{pathname:u="/",search:m="",hash:h="",state:x=null,key:g="default"}=a,f=j.useMemo(()=>{let y=gp(u,c);return y==null?null:{location:{pathname:y,search:m,hash:h,state:x,key:g},navigationType:n}},[c,u,m,h,x,g,n]);return f==null?null:j.createElement(Ta.Provider,{value:d},j.createElement(Su.Provider,{children:r,value:f}))}function I3(t){let{children:e,location:r}=t;return b3(V0(e),r)}new Promise(()=>{});function V0(t,e){e===void 0&&(e=[]);let r=[];return j.Children.forEach(t,(a,n)=>{if(!j.isValidElement(a))return;let i=[...e,n];if(a.type===j.Fragment){r.push.apply(r,V0(a.props.children,i));return}a.type!==be&&xt(!1),!a.props.index||!a.props.children||xt(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=V0(a.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U0(){return U0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},U0.apply(this,arguments)}function R3(t,e){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function L3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function O3(t,e){return t.button===0&&(!e||e==="_self")&&!L3(t)}const F3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$3="6";try{window.__reactRouterVersion=$3}catch{}const z3="startTransition",If=Dw[z3];function B3(t){let{basename:e,children:r,future:a,window:n}=t,i=j.useRef();i.current==null&&(i.current=V6({window:n,v5Compat:!0}));let l=i.current,[o,c]=j.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},u=j.useCallback(m=>{d&&If?If(()=>c(m)):c(m)},[c,d]);return j.useLayoutEffect(()=>l.listen(u),[l,u]),j.useEffect(()=>M3(a),[a]),j.createElement(E3,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:l,future:a})}const V3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=j.forwardRef(function(e,r){let{onClick:a,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=e,h=R3(e,F3),{basename:x}=j.useContext(Ta),g,f=!1;if(typeof d=="string"&&U3.test(d)&&(g=d,V3))try{let v=new URL(window.location.href),w=d.startsWith("//")?new URL(v.protocol+d):new URL(d),N=gp(w.pathname,x);w.origin===v.origin&&N!=null?d=N+w.search+w.hash:f=!0}catch{}let y=x3(d,{relative:n}),p=H3(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:m});function b(v){a&&a(v),v.defaultPrevented||p(v)}return j.createElement("a",U0({},h,{href:g||y,onClick:f||i?a:b,ref:r,target:c}))});var Rf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rf||(Rf={}));var Lf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lf||(Lf={}));function H3(t,e){let{target:r,replace:a,state:n,preventScrollReset:i,relative:l,viewTransition:o}=e===void 0?{}:e,c=Dn(),d=gr(),u=k1(t,{relative:l});return j.useCallback(m=>{if(O3(m,r)){m.preventDefault();let h=a!==void 0?a:Td(d)===Td(u);c(t,{replace:h,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,a,n,r,t,i,l,o])}var A1={exports:{}},D1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yi=j;function W3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var q3=typeof Object.is=="function"?Object.is:W3,Y3=yi.useState,K3=yi.useEffect,X3=yi.useLayoutEffect,Q3=yi.useDebugValue;function G3(t,e){var r=e(),a=Y3({inst:{value:r,getSnapshot:e}}),n=a[0].inst,i=a[1];return X3(function(){n.value=r,n.getSnapshot=e,$m(n)&&i({inst:n})},[t,r,e]),K3(function(){return $m(n)&&i({inst:n}),t(function(){$m(n)&&i({inst:n})})},[t]),Q3(r),r}function $m(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!q3(t,r)}catch{return!0}}function J3(t,e){return e()}var Z3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?J3:G3;D1.useSyncExternalStore=yi.useSyncExternalStore!==void 0?yi.useSyncExternalStore:Z3;A1.exports=D1;var eS=A1.exports,M1={exports:{}},E1={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cu=j,tS=eS;function sS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rS=typeof Object.is=="function"?Object.is:sS,aS=tS.useSyncExternalStore,nS=Cu.useRef,iS=Cu.useEffect,lS=Cu.useMemo,oS=Cu.useDebugValue;E1.useSyncExternalStoreWithSelector=function(t,e,r,a,n){var i=nS(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=lS(function(){function c(x){if(!d){if(d=!0,u=x,x=a(x),n!==void 0&&l.hasValue){var g=l.value;if(n(g,x))return m=g}return m=x}if(g=m,rS(u,x))return g;var f=a(x);return n!==void 0&&n(g,f)?(u=x,g):(u=x,m=f)}var d=!1,u,m,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,a,n]);var o=aS(t,i[0],i[1]);return iS(function(){l.hasValue=!0,l.value=o},[o]),oS(o),o};M1.exports=E1;var cS=M1.exports;function dS(t){t()}let I1=dS;const uS=t=>I1=t,mS=()=>I1,Of=Symbol.for("react-redux-context"),Ff=typeof globalThis<"u"?globalThis:{};function hS(){var t;if(!j.createContext)return{};const e=(t=Ff[Of])!=null?t:Ff[Of]=new Map;let r=e.get(j.createContext);return r||(r=j.createContext(null),e.set(j.createContext,r)),r}const ja=hS();function vp(t=ja){return function(){return j.useContext(t)}}const R1=vp(),xS=()=>{throw new Error("uSES not initialized!")};let L1=xS;const pS=t=>{L1=t},gS=(t,e)=>t===e;function fS(t=ja){const e=t===ja?R1:vp(t);return function(a,n={}){const{equalityFn:i=gS,stabilityCheck:l=void 0,noopCheck:o=void 0}=typeof n=="function"?{equalityFn:n}:n,{store:c,subscription:d,getServerState:u,stabilityCheck:m,noopCheck:h}=e();j.useRef(!0);const x=j.useCallback({[a.name](f){return a(f)}}[a.name],[a,m,l]),g=L1(d.addNestedSub,c.getState,u||c.getState,x,i);return j.useDebugValue(g),g}}const O1=fS();var F1={exports:{}},Be={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tt=typeof Symbol=="function"&&Symbol.for,jp=Tt?Symbol.for("react.element"):60103,Np=Tt?Symbol.for("react.portal"):60106,ku=Tt?Symbol.for("react.fragment"):60107,_u=Tt?Symbol.for("react.strict_mode"):60108,Pu=Tt?Symbol.for("react.profiler"):60114,Tu=Tt?Symbol.for("react.provider"):60109,Au=Tt?Symbol.for("react.context"):60110,wp=Tt?Symbol.for("react.async_mode"):60111,Du=Tt?Symbol.for("react.concurrent_mode"):60111,Mu=Tt?Symbol.for("react.forward_ref"):60112,Eu=Tt?Symbol.for("react.suspense"):60113,yS=Tt?Symbol.for("react.suspense_list"):60120,Iu=Tt?Symbol.for("react.memo"):60115,Ru=Tt?Symbol.for("react.lazy"):60116,bS=Tt?Symbol.for("react.block"):60121,vS=Tt?Symbol.for("react.fundamental"):60117,jS=Tt?Symbol.for("react.responder"):60118,NS=Tt?Symbol.for("react.scope"):60119;function Ss(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jp:switch(t=t.type,t){case wp:case Du:case ku:case Pu:case _u:case Eu:return t;default:switch(t=t&&t.$$typeof,t){case Au:case Mu:case Ru:case Iu:case Tu:return t;default:return e}}case Np:return e}}}function $1(t){return Ss(t)===Du}Be.AsyncMode=wp;Be.ConcurrentMode=Du;Be.ContextConsumer=Au;Be.ContextProvider=Tu;Be.Element=jp;Be.ForwardRef=Mu;Be.Fragment=ku;Be.Lazy=Ru;Be.Memo=Iu;Be.Portal=Np;Be.Profiler=Pu;Be.StrictMode=_u;Be.Suspense=Eu;Be.isAsyncMode=function(t){return $1(t)||Ss(t)===wp};Be.isConcurrentMode=$1;Be.isContextConsumer=function(t){return Ss(t)===Au};Be.isContextProvider=function(t){return Ss(t)===Tu};Be.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jp};Be.isForwardRef=function(t){return Ss(t)===Mu};Be.isFragment=function(t){return Ss(t)===ku};Be.isLazy=function(t){return Ss(t)===Ru};Be.isMemo=function(t){return Ss(t)===Iu};Be.isPortal=function(t){return Ss(t)===Np};Be.isProfiler=function(t){return Ss(t)===Pu};Be.isStrictMode=function(t){return Ss(t)===_u};Be.isSuspense=function(t){return Ss(t)===Eu};Be.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ku||t===Du||t===Pu||t===_u||t===Eu||t===yS||typeof t=="object"&&t!==null&&(t.$$typeof===Ru||t.$$typeof===Iu||t.$$typeof===Tu||t.$$typeof===Au||t.$$typeof===Mu||t.$$typeof===vS||t.$$typeof===jS||t.$$typeof===NS||t.$$typeof===bS)};Be.typeOf=Ss;F1.exports=Be;var wS=F1.exports,z1=wS,SS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},CS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},B1={};B1[z1.ForwardRef]=SS;B1[z1.Memo]=CS;var Ue={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp=Symbol.for("react.element"),Cp=Symbol.for("react.portal"),Lu=Symbol.for("react.fragment"),Ou=Symbol.for("react.strict_mode"),Fu=Symbol.for("react.profiler"),$u=Symbol.for("react.provider"),zu=Symbol.for("react.context"),kS=Symbol.for("react.server_context"),Bu=Symbol.for("react.forward_ref"),Vu=Symbol.for("react.suspense"),Uu=Symbol.for("react.suspense_list"),Hu=Symbol.for("react.memo"),Wu=Symbol.for("react.lazy"),_S=Symbol.for("react.offscreen"),V1;V1=Symbol.for("react.module.reference");function Rs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Sp:switch(t=t.type,t){case Lu:case Fu:case Ou:case Vu:case Uu:return t;default:switch(t=t&&t.$$typeof,t){case kS:case zu:case Bu:case Wu:case Hu:case $u:return t;default:return e}}case Cp:return e}}}Ue.ContextConsumer=zu;Ue.ContextProvider=$u;Ue.Element=Sp;Ue.ForwardRef=Bu;Ue.Fragment=Lu;Ue.Lazy=Wu;Ue.Memo=Hu;Ue.Portal=Cp;Ue.Profiler=Fu;Ue.StrictMode=Ou;Ue.Suspense=Vu;Ue.SuspenseList=Uu;Ue.isAsyncMode=function(){return!1};Ue.isConcurrentMode=function(){return!1};Ue.isContextConsumer=function(t){return Rs(t)===zu};Ue.isContextProvider=function(t){return Rs(t)===$u};Ue.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sp};Ue.isForwardRef=function(t){return Rs(t)===Bu};Ue.isFragment=function(t){return Rs(t)===Lu};Ue.isLazy=function(t){return Rs(t)===Wu};Ue.isMemo=function(t){return Rs(t)===Hu};Ue.isPortal=function(t){return Rs(t)===Cp};Ue.isProfiler=function(t){return Rs(t)===Fu};Ue.isStrictMode=function(t){return Rs(t)===Ou};Ue.isSuspense=function(t){return Rs(t)===Vu};Ue.isSuspenseList=function(t){return Rs(t)===Uu};Ue.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Lu||t===Fu||t===Ou||t===Vu||t===Uu||t===_S||typeof t=="object"&&t!==null&&(t.$$typeof===Wu||t.$$typeof===Hu||t.$$typeof===$u||t.$$typeof===zu||t.$$typeof===Bu||t.$$typeof===V1||t.getModuleId!==void 0)};Ue.typeOf=Rs;function PS(){const t=mS();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){let a=[],n=e;for(;n;)a.push(n),n=n.next;return a},subscribe(a){let n=!0,i=r={callback:a,next:null,prev:r};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const $f={notify(){},get:()=>[]};function TS(t,e){let r,a=$f,n=0,i=!1;function l(f){u();const y=a.subscribe(f);let p=!1;return()=>{p||(p=!0,y(),m())}}function o(){a.notify()}function c(){g.onStateChange&&g.onStateChange()}function d(){return i}function u(){n++,r||(r=e?e.addNestedSub(c):t.subscribe(c),a=PS())}function m(){n--,r&&n===0&&(r(),r=void 0,a.clear(),a=$f)}function h(){i||(i=!0,u())}function x(){i&&(i=!1,m())}const g={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:h,tryUnsubscribe:x,getListeners:()=>a};return g}const AS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DS=AS?j.useLayoutEffect:j.useEffect;function MS({store:t,context:e,children:r,serverState:a,stabilityCheck:n="once",noopCheck:i="once"}){const l=j.useMemo(()=>{const d=TS(t);return{store:t,subscription:d,getServerState:a?()=>a:void 0,stabilityCheck:n,noopCheck:i}},[t,a,n,i]),o=j.useMemo(()=>t.getState(),[t]);DS(()=>{const{subscription:d}=l;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==t.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[l,o]);const c=e||ja;return j.createElement(c.Provider,{value:l},r)}function U1(t=ja){const e=t===ja?R1:vp(t);return function(){const{store:a}=e();return a}}const ES=U1();function IS(t=ja){const e=t===ja?ES:U1(t);return function(){return e().dispatch}}const H1=IS();pS(cS.useSyncExternalStoreWithSelector);uS(b1.unstable_batchedUpdates);let RS={data:""},LS=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||RS,OS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,FS=/\/\*[^]*?\*\/|  +/g,zf=/\n+/g,Xr=(t,e)=>{let r="",a="",n="";for(let i in t){let l=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+l+";":a+=i[1]=="f"?Xr(l,i):i+"{"+Xr(l,i[1]=="k"?"":e)+"}":typeof l=="object"?a+=Xr(l,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Xr.p?Xr.p(i,l):i+":"+l+";")}return r+(e&&n?e+"{"+n+"}":n)+a},yr={},W1=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+W1(t[r]);return e}return t},$S=(t,e,r,a,n)=>{let i=W1(t),l=yr[i]||(yr[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!yr[l]){let c=i!==t?t:(d=>{let u,m,h=[{}];for(;u=OS.exec(d.replace(FS,""));)u[4]?h.shift():u[3]?(m=u[3].replace(zf," ").trim(),h.unshift(h[0][m]=h[0][m]||{})):h[0][u[1]]=u[2].replace(zf," ").trim();return h[0]})(t);yr[l]=Xr(n?{["@keyframes "+l]:c}:c,r?"":"."+l)}let o=r&&yr.g?yr.g:null;return r&&(yr.g=yr[l]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(yr[l],e,a,o),l},zS=(t,e,r)=>t.reduce((a,n,i)=>{let l=e[i];if(l&&l.call){let o=l(r),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":Xr(o,""):o===!1?"":o}return a+n+(l??"")},"");function qu(t){let e=this||{},r=t.call?t(e.p):t;return $S(r.unshift?r.raw?zS(r,[].slice.call(arguments,1),e.p):r.reduce((a,n)=>Object.assign(a,n&&n.call?n(e.p):n),{}):r,LS(e.target),e.g,e.o,e.k)}let q1,H0,W0;qu.bind({g:1});let Lr=qu.bind({k:1});function BS(t,e,r,a){Xr.p=e,q1=t,H0=r,W0=a}function Aa(t,e){let r=this||{};return function(){let a=arguments;function n(i,l){let o=Object.assign({},i),c=o.className||n.className;r.p=Object.assign({theme:H0&&H0()},o),r.o=/ *go\d+/.test(c),o.className=qu.apply(r,a)+(c?" "+c:""),e&&(o.ref=l);let d=t;return t[0]&&(d=o.as||t,delete o.as),W0&&d[0]&&W0(o),q1(d,o)}return e?e(n):n}}var VS=t=>typeof t=="function",Dd=(t,e)=>VS(t)?t(e):t,US=(()=>{let t=0;return()=>(++t).toString()})(),Y1=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),HS=20,K1=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,HS)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:r}=e;return K1(t,{type:t.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(i=>i.id===a||a===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let n=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},_c=[],Ka={toasts:[],pausedAt:void 0},Mn=t=>{Ka=K1(Ka,t),_c.forEach(e=>{e(Ka)})},WS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},qS=(t={})=>{let[e,r]=j.useState(Ka),a=j.useRef(Ka);j.useEffect(()=>(a.current!==Ka&&r(Ka),_c.push(r),()=>{let i=_c.indexOf(r);i>-1&&_c.splice(i,1)}),[]);let n=e.toasts.map(i=>{var l,o,c;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((l=t[i.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||(t==null?void 0:t.duration)||WS[i.type],style:{...t.style,...(c=t[i.type])==null?void 0:c.style,...i.style}}});return{...e,toasts:n}},YS=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||US()}),vo=t=>(e,r)=>{let a=YS(e,t,r);return Mn({type:2,toast:a}),a.id},C=(t,e)=>vo("blank")(t,e);C.error=vo("error");C.success=vo("success");C.loading=vo("loading");C.custom=vo("custom");C.dismiss=t=>{Mn({type:3,toastId:t})};C.remove=t=>Mn({type:4,toastId:t});C.promise=(t,e,r)=>{let a=C.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=e.success?Dd(e.success,n):void 0;return i?C.success(i,{id:a,...r,...r==null?void 0:r.success}):C.dismiss(a),n}).catch(n=>{let i=e.error?Dd(e.error,n):void 0;i?C.error(i,{id:a,...r,...r==null?void 0:r.error}):C.dismiss(a)}),t};var KS=(t,e)=>{Mn({type:1,toast:{id:t,height:e}})},XS=()=>{Mn({type:5,time:Date.now()})},ml=new Map,QS=1e3,GS=(t,e=QS)=>{if(ml.has(t))return;let r=setTimeout(()=>{ml.delete(t),Mn({type:4,toastId:t})},e);ml.set(t,r)},JS=t=>{let{toasts:e,pausedAt:r}=qS(t);j.useEffect(()=>{if(r)return;let i=Date.now(),l=e.map(o=>{if(o.duration===1/0)return;let c=(o.duration||0)+o.pauseDuration-(i-o.createdAt);if(c<0){o.visible&&C.dismiss(o.id);return}return setTimeout(()=>C.dismiss(o.id),c)});return()=>{l.forEach(o=>o&&clearTimeout(o))}},[e,r]);let a=j.useCallback(()=>{r&&Mn({type:6,time:Date.now()})},[r]),n=j.useCallback((i,l)=>{let{reverseOrder:o=!1,gutter:c=8,defaultPosition:d}=l||{},u=e.filter(x=>(x.position||d)===(i.position||d)&&x.height),m=u.findIndex(x=>x.id===i.id),h=u.filter((x,g)=>g<m&&x.visible).length;return u.filter(x=>x.visible).slice(...o?[h+1]:[0,h]).reduce((x,g)=>x+(g.height||0)+c,0)},[e]);return j.useEffect(()=>{e.forEach(i=>{if(i.dismissed)GS(i.id,i.removeDelay);else{let l=ml.get(i.id);l&&(clearTimeout(l),ml.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:KS,startPause:XS,endPause:a,calculateOffset:n}}},ZS=Lr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,e5=Lr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,t5=Lr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,s5=Aa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ZS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${e5} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${t5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,r5=Lr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,a5=Aa("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${r5} 1s linear infinite;
`,n5=Lr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,i5=Lr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,l5=Aa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${n5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${i5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,o5=Aa("div")`
  position: absolute;
`,c5=Aa("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,d5=Lr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,u5=Aa("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${d5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,m5=({toast:t})=>{let{icon:e,type:r,iconTheme:a}=t;return e!==void 0?typeof e=="string"?j.createElement(u5,null,e):e:r==="blank"?null:j.createElement(c5,null,j.createElement(a5,{...a}),r!=="loading"&&j.createElement(o5,null,r==="error"?j.createElement(s5,{...a}):j.createElement(l5,{...a})))},h5=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,x5=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,p5="0%{opacity:0;} 100%{opacity:1;}",g5="0%{opacity:1;} 100%{opacity:0;}",f5=Aa("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,y5=Aa("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,b5=(t,e)=>{let r=t.includes("top")?1:-1,[a,n]=Y1()?[p5,g5]:[h5(r),x5(r)];return{animation:e?`${Lr(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Lr(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},v5=j.memo(({toast:t,position:e,style:r,children:a})=>{let n=t.height?b5(t.position||e||"top-center",t.visible):{opacity:0},i=j.createElement(m5,{toast:t}),l=j.createElement(y5,{...t.ariaProps},Dd(t.message,t));return j.createElement(f5,{className:t.className,style:{...n,...r,...t.style}},typeof a=="function"?a({icon:i,message:l}):j.createElement(j.Fragment,null,i,l))});BS(j.createElement);var j5=({id:t,className:e,style:r,onHeightUpdate:a,children:n})=>{let i=j.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;a(t,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return j.createElement("div",{ref:i,className:e,style:r},n)},N5=(t,e)=>{let r=t.includes("top"),a=r?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Y1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...a,...n}},w5=qu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Xo=16,S5=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:a,children:n,containerStyle:i,containerClassName:l})=>{let{toasts:o,handlers:c}=JS(r);return j.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Xo,left:Xo,right:Xo,bottom:Xo,pointerEvents:"none",...i},className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},o.map(d=>{let u=d.position||e,m=c.calculateOffset(d,{reverseOrder:t,gutter:a,defaultPosition:e}),h=N5(u,m);return j.createElement(j5,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?w5:"",style:h},d.type==="custom"?Dd(d.message,d):n?n(d):j.createElement(v5,{toast:d,position:u}))}))};function X1(t,e){return function(){return t.apply(e,arguments)}}const{toString:C5}=Object.prototype,{getPrototypeOf:kp}=Object,{iterator:Yu,toStringTag:Q1}=Symbol,Ku=(t=>e=>{const r=C5.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Gs=t=>(t=t.toLowerCase(),e=>Ku(e)===t),Xu=t=>e=>typeof e===t,{isArray:Ti}=Array,Kl=Xu("undefined");function jo(t){return t!==null&&!Kl(t)&&t.constructor!==null&&!Kl(t.constructor)&&ms(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const G1=Gs("ArrayBuffer");function k5(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&G1(t.buffer),e}const _5=Xu("string"),ms=Xu("function"),J1=Xu("number"),No=t=>t!==null&&typeof t=="object",P5=t=>t===!0||t===!1,Pc=t=>{if(Ku(t)!=="object")return!1;const e=kp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Q1 in t)&&!(Yu in t)},T5=t=>{if(!No(t)||jo(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},A5=Gs("Date"),D5=Gs("File"),M5=Gs("Blob"),E5=Gs("FileList"),I5=t=>No(t)&&ms(t.pipe),R5=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ms(t.append)&&((e=Ku(t))==="formdata"||e==="object"&&ms(t.toString)&&t.toString()==="[object FormData]"))},L5=Gs("URLSearchParams"),[O5,F5,$5,z5]=["ReadableStream","Request","Response","Headers"].map(Gs),B5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wo(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),Ti(t))for(a=0,n=t.length;a<n;a++)e.call(null,t[a],a,t);else{if(jo(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let o;for(a=0;a<l;a++)o=i[a],e.call(null,t[o],o,t)}}function Z1(t,e){if(jo(t))return null;e=e.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],e===n.toLowerCase())return n;return null}const Xa=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),e2=t=>!Kl(t)&&t!==Xa;function q0(){const{caseless:t}=e2(this)&&this||{},e={},r=(a,n)=>{const i=t&&Z1(e,n)||n;Pc(e[i])&&Pc(a)?e[i]=q0(e[i],a):Pc(a)?e[i]=q0({},a):Ti(a)?e[i]=a.slice():e[i]=a};for(let a=0,n=arguments.length;a<n;a++)arguments[a]&&wo(arguments[a],r);return e}const V5=(t,e,r,{allOwnKeys:a}={})=>(wo(e,(n,i)=>{r&&ms(n)?t[i]=X1(n,r):t[i]=n},{allOwnKeys:a}),t),U5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),H5=(t,e,r,a)=>{t.prototype=Object.create(e.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},W5=(t,e,r,a)=>{let n,i,l;const o={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!a||a(l,t,e))&&!o[l]&&(e[l]=t[l],o[l]=!0);t=r!==!1&&kp(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},q5=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const a=t.indexOf(e,r);return a!==-1&&a===r},Y5=t=>{if(!t)return null;if(Ti(t))return t;let e=t.length;if(!J1(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},K5=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&kp(Uint8Array)),X5=(t,e)=>{const a=(t&&t[Yu]).call(t);let n;for(;(n=a.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},Q5=(t,e)=>{let r;const a=[];for(;(r=t.exec(e))!==null;)a.push(r);return a},G5=Gs("HTMLFormElement"),J5=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),Bf=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Z5=Gs("RegExp"),t2=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),a={};wo(r,(n,i)=>{let l;(l=e(n,i,t))!==!1&&(a[i]=l||n)}),Object.defineProperties(t,a)},eC=t=>{t2(t,(e,r)=>{if(ms(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(ms(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},tC=(t,e)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return Ti(t)?a(t):a(String(t).split(e)),r},sC=()=>{},rC=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function aC(t){return!!(t&&ms(t.append)&&t[Q1]==="FormData"&&t[Yu])}const nC=t=>{const e=new Array(10),r=(a,n)=>{if(No(a)){if(e.indexOf(a)>=0)return;if(jo(a))return a;if(!("toJSON"in a)){e[n]=a;const i=Ti(a)?[]:{};return wo(a,(l,o)=>{const c=r(l,n+1);!Kl(c)&&(i[o]=c)}),e[n]=void 0,i}}return a};return r(t,0)},iC=Gs("AsyncFunction"),lC=t=>t&&(No(t)||ms(t))&&ms(t.then)&&ms(t.catch),s2=((t,e)=>t?setImmediate:e?((r,a)=>(Xa.addEventListener("message",({source:n,data:i})=>{n===Xa&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),Xa.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ms(Xa.postMessage)),oC=typeof queueMicrotask<"u"?queueMicrotask.bind(Xa):typeof process<"u"&&process.nextTick||s2,cC=t=>t!=null&&ms(t[Yu]),Q={isArray:Ti,isArrayBuffer:G1,isBuffer:jo,isFormData:R5,isArrayBufferView:k5,isString:_5,isNumber:J1,isBoolean:P5,isObject:No,isPlainObject:Pc,isEmptyObject:T5,isReadableStream:O5,isRequest:F5,isResponse:$5,isHeaders:z5,isUndefined:Kl,isDate:A5,isFile:D5,isBlob:M5,isRegExp:Z5,isFunction:ms,isStream:I5,isURLSearchParams:L5,isTypedArray:K5,isFileList:E5,forEach:wo,merge:q0,extend:V5,trim:B5,stripBOM:U5,inherits:H5,toFlatObject:W5,kindOf:Ku,kindOfTest:Gs,endsWith:q5,toArray:Y5,forEachEntry:X5,matchAll:Q5,isHTMLForm:G5,hasOwnProperty:Bf,hasOwnProp:Bf,reduceDescriptors:t2,freezeMethods:eC,toObjectSet:tC,toCamelCase:J5,noop:sC,toFiniteNumber:rC,findKey:Z1,global:Xa,isContextDefined:e2,isSpecCompliantForm:aC,toJSONObject:nC,isAsyncFn:iC,isThenable:lC,setImmediate:s2,asap:oC,isIterable:cC};function Ne(t,e,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}Q.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const r2=Ne.prototype,a2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{a2[t]={value:t}});Object.defineProperties(Ne,a2);Object.defineProperty(r2,"isAxiosError",{value:!0});Ne.from=(t,e,r,a,n,i)=>{const l=Object.create(r2);return Q.toFlatObject(t,l,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Ne.call(l,t.message,e,r,a,n),l.cause=t,l.name=t.name,i&&Object.assign(l,i),l};const dC=null;function Y0(t){return Q.isPlainObject(t)||Q.isArray(t)}function n2(t){return Q.endsWith(t,"[]")?t.slice(0,-2):t}function Vf(t,e,r){return t?t.concat(e).map(function(n,i){return n=n2(n),!r&&i?"["+n+"]":n}).join(r?".":""):e}function uC(t){return Q.isArray(t)&&!t.some(Y0)}const mC=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function Qu(t,e,r){if(!Q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,y){return!Q.isUndefined(y[f])});const a=r.metaTokens,n=r.visitor||u,i=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(n))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(Q.isDate(g))return g.toISOString();if(Q.isBoolean(g))return g.toString();if(!c&&Q.isBlob(g))throw new Ne("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(g)||Q.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,f,y){let p=g;if(g&&!y&&typeof g=="object"){if(Q.endsWith(f,"{}"))f=a?f:f.slice(0,-2),g=JSON.stringify(g);else if(Q.isArray(g)&&uC(g)||(Q.isFileList(g)||Q.endsWith(f,"[]"))&&(p=Q.toArray(g)))return f=n2(f),p.forEach(function(v,w){!(Q.isUndefined(v)||v===null)&&e.append(l===!0?Vf([f],w,i):l===null?f:f+"[]",d(v))}),!1}return Y0(g)?!0:(e.append(Vf(y,f,i),d(g)),!1)}const m=[],h=Object.assign(mC,{defaultVisitor:u,convertValue:d,isVisitable:Y0});function x(g,f){if(!Q.isUndefined(g)){if(m.indexOf(g)!==-1)throw Error("Circular reference detected in "+f.join("."));m.push(g),Q.forEach(g,function(p,b){(!(Q.isUndefined(p)||p===null)&&n.call(e,p,Q.isString(b)?b.trim():b,f,h))===!0&&x(p,f?f.concat(b):[b])}),m.pop()}}if(!Q.isObject(t))throw new TypeError("data must be an object");return x(t),e}function Uf(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function _p(t,e){this._pairs=[],t&&Qu(t,this,e)}const i2=_p.prototype;i2.append=function(e,r){this._pairs.push([e,r])};i2.toString=function(e){const r=e?function(a){return e.call(this,a,Uf)}:Uf;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function hC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function l2(t,e,r){if(!e)return t;const a=r&&r.encode||hC;Q.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(e,r):i=Q.isURLSearchParams(e)?e.toString():new _p(e,r).toString(a),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class xC{constructor(){this.handlers=[]}use(e,r,a){return this.handlers.push({fulfilled:e,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(a){a!==null&&e(a)})}}const Hf=xC,o2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pC=typeof URLSearchParams<"u"?URLSearchParams:_p,gC=typeof FormData<"u"?FormData:null,fC=typeof Blob<"u"?Blob:null,yC={isBrowser:!0,classes:{URLSearchParams:pC,FormData:gC,Blob:fC},protocols:["http","https","file","blob","url","data"]},Pp=typeof window<"u"&&typeof document<"u",K0=typeof navigator=="object"&&navigator||void 0,bC=Pp&&(!K0||["ReactNative","NativeScript","NS"].indexOf(K0.product)<0),vC=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),jC=Pp&&window.location.href||"http://localhost",NC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pp,hasStandardBrowserEnv:bC,hasStandardBrowserWebWorkerEnv:vC,navigator:K0,origin:jC},Symbol.toStringTag,{value:"Module"})),Vt={...NC,...yC};function wC(t,e){return Qu(t,new Vt.classes.URLSearchParams,{visitor:function(r,a,n,i){return Vt.isNode&&Q.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function SC(t){return Q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function CC(t){const e={},r=Object.keys(t);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],e[i]=t[i];return e}function c2(t){function e(r,a,n,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=r.length;return l=!l&&Q.isArray(n)?n.length:l,c?(Q.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!o):((!n[l]||!Q.isObject(n[l]))&&(n[l]=[]),e(r,a,n[l],i)&&Q.isArray(n[l])&&(n[l]=CC(n[l])),!o)}if(Q.isFormData(t)&&Q.isFunction(t.entries)){const r={};return Q.forEachEntry(t,(a,n)=>{e(SC(a),n,r,0)}),r}return null}function kC(t,e,r){if(Q.isString(t))try{return(e||JSON.parse)(t),Q.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Tp={transitional:o2,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=Q.isObject(e);if(i&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return n?JSON.stringify(c2(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return wC(e,this.formSerializer).toString();if((o=Q.isFileList(e))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Qu(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),kC(e)):e}],transformResponse:[function(e){const r=this.transitional||Tp.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(a&&!this.responseType||n)){const l=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(l)throw o.name==="SyntaxError"?Ne.from(o,Ne.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vt.classes.FormData,Blob:Vt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],t=>{Tp.headers[t]={}});const Ap=Tp,_C=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PC=t=>{const e={};let r,a,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),r=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!r||e[r]&&_C[r])&&(r==="set-cookie"?e[r]?e[r].push(a):e[r]=[a]:e[r]=e[r]?e[r]+", "+a:a)}),e},Wf=Symbol("internals");function zi(t){return t&&String(t).trim().toLowerCase()}function Tc(t){return t===!1||t==null?t:Q.isArray(t)?t.map(Tc):String(t)}function TC(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)e[a[1]]=a[2];return e}const AC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zm(t,e,r,a,n){if(Q.isFunction(a))return a.call(this,e,r);if(n&&(e=r),!!Q.isString(e)){if(Q.isString(a))return e.indexOf(a)!==-1;if(Q.isRegExp(a))return a.test(e)}}function DC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,a)=>r.toUpperCase()+a)}function MC(t,e){const r=Q.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,i,l){return this[a].call(this,e,n,i,l)},configurable:!0})})}class Gu{constructor(e){e&&this.set(e)}set(e,r,a){const n=this;function i(o,c,d){const u=zi(c);if(!u)throw new Error("header name must be a non-empty string");const m=Q.findKey(n,u);(!m||n[m]===void 0||d===!0||d===void 0&&n[m]!==!1)&&(n[m||c]=Tc(o))}const l=(o,c)=>Q.forEach(o,(d,u)=>i(d,u,c));if(Q.isPlainObject(e)||e instanceof this.constructor)l(e,r);else if(Q.isString(e)&&(e=e.trim())&&!AC(e))l(PC(e),r);else if(Q.isObject(e)&&Q.isIterable(e)){let o={},c,d;for(const u of e){if(!Q.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?Q.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,r)}else e!=null&&i(r,e,a);return this}get(e,r){if(e=zi(e),e){const a=Q.findKey(this,e);if(a){const n=this[a];if(!r)return n;if(r===!0)return TC(n);if(Q.isFunction(r))return r.call(this,n,a);if(Q.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=zi(e),e){const a=Q.findKey(this,e);return!!(a&&this[a]!==void 0&&(!r||zm(this,this[a],a,r)))}return!1}delete(e,r){const a=this;let n=!1;function i(l){if(l=zi(l),l){const o=Q.findKey(a,l);o&&(!r||zm(a,a[o],o,r))&&(delete a[o],n=!0)}}return Q.isArray(e)?e.forEach(i):i(e),n}clear(e){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!e||zm(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const r=this,a={};return Q.forEach(this,(n,i)=>{const l=Q.findKey(a,i);if(l){r[l]=Tc(n),delete r[i];return}const o=e?DC(i):String(i).trim();o!==i&&delete r[i],r[o]=Tc(n),a[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Q.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=e&&Q.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const a=new this(e);return r.forEach(n=>a.set(n)),a}static accessor(e){const a=(this[Wf]=this[Wf]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=zi(l);a[o]||(MC(n,l),a[o]=!0)}return Q.isArray(e)?e.forEach(i):i(e),this}}Gu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Gu.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(a){this[r]=a}}});Q.freezeMethods(Gu);const Ys=Gu;function Bm(t,e){const r=this||Ap,a=e||r,n=Ys.from(a.headers);let i=a.data;return Q.forEach(t,function(o){i=o.call(r,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function d2(t){return!!(t&&t.__CANCEL__)}function Ai(t,e,r){Ne.call(this,t??"canceled",Ne.ERR_CANCELED,e,r),this.name="CanceledError"}Q.inherits(Ai,Ne,{__CANCEL__:!0});function u2(t,e,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):e(new Ne("Request failed with status code "+r.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function EC(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function IC(t,e){t=t||10;const r=new Array(t),a=new Array(t);let n=0,i=0,l;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),u=a[i];l||(l=d),r[n]=c,a[n]=d;let m=i,h=0;for(;m!==n;)h+=r[m++],m=m%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),d-l<e)return;const x=u&&d-u;return x?Math.round(h*1e3/x):void 0}}function RC(t,e){let r=0,a=1e3/e,n,i;const l=(d,u=Date.now())=>{r=u,n=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const u=Date.now(),m=u-r;m>=a?l(d,u):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},a-m)))},()=>n&&l(n)]}const Md=(t,e,r=3)=>{let a=0;const n=IC(50,250);return RC(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-a,d=n(c),u=l<=o;a=l;const m={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(m)},r)},qf=(t,e)=>{const r=t!=null;return[a=>e[0]({lengthComputable:r,total:t,loaded:a}),e[1]]},Yf=t=>(...e)=>Q.asap(()=>t(...e)),LC=Vt.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Vt.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Vt.origin),Vt.navigator&&/(msie|trident)/i.test(Vt.navigator.userAgent)):()=>!0,OC=Vt.hasStandardBrowserEnv?{write(t,e,r,a,n,i){const l=[t+"="+encodeURIComponent(e)];Q.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Q.isString(a)&&l.push("path="+a),Q.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function FC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $C(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function m2(t,e,r){let a=!FC(e);return t&&(a||r==!1)?$C(t,e):e}const Kf=t=>t instanceof Ys?{...t}:t;function jn(t,e){e=e||{};const r={};function a(d,u,m,h){return Q.isPlainObject(d)&&Q.isPlainObject(u)?Q.merge.call({caseless:h},d,u):Q.isPlainObject(u)?Q.merge({},u):Q.isArray(u)?u.slice():u}function n(d,u,m,h){if(Q.isUndefined(u)){if(!Q.isUndefined(d))return a(void 0,d,m,h)}else return a(d,u,m,h)}function i(d,u){if(!Q.isUndefined(u))return a(void 0,u)}function l(d,u){if(Q.isUndefined(u)){if(!Q.isUndefined(d))return a(void 0,d)}else return a(void 0,u)}function o(d,u,m){if(m in e)return a(d,u);if(m in t)return a(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,m)=>n(Kf(d),Kf(u),m,!0)};return Q.forEach(Object.keys({...t,...e}),function(u){const m=c[u]||n,h=m(t[u],e[u],u);Q.isUndefined(h)&&m!==o||(r[u]=h)}),r}const h2=t=>{const e=jn({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=e;e.headers=l=Ys.from(l),e.url=l2(m2(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(Q.isFormData(r)){if(Vt.hasStandardBrowserEnv||Vt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Vt.hasStandardBrowserEnv&&(a&&Q.isFunction(a)&&(a=a(e)),a||a!==!1&&LC(e.url))){const d=n&&i&&OC.read(i);d&&l.set(n,d)}return e},zC=typeof XMLHttpRequest<"u",BC=zC&&function(t){return new Promise(function(r,a){const n=h2(t);let i=n.data;const l=Ys.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,u,m,h,x,g;function f(){x&&x(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(n.method.toUpperCase(),n.url,!0),y.timeout=n.timeout;function p(){if(!y)return;const v=Ys.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),N={data:!o||o==="text"||o==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:v,config:t,request:y};u2(function(k){r(k),f()},function(k){a(k),f()},N),y=null}"onloadend"in y?y.onloadend=p:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(p)},y.onabort=function(){y&&(a(new Ne("Request aborted",Ne.ECONNABORTED,t,y)),y=null)},y.onerror=function(){a(new Ne("Network Error",Ne.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const N=n.transitional||o2;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),a(new Ne(w,N.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,t,y)),y=null},i===void 0&&l.setContentType(null),"setRequestHeader"in y&&Q.forEach(l.toJSON(),function(w,N){y.setRequestHeader(N,w)}),Q.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),o&&o!=="json"&&(y.responseType=n.responseType),d&&([h,g]=Md(d,!0),y.addEventListener("progress",h)),c&&y.upload&&([m,x]=Md(c),y.upload.addEventListener("progress",m),y.upload.addEventListener("loadend",x)),(n.cancelToken||n.signal)&&(u=v=>{y&&(a(!v||v.type?new Ai(null,t,y):v),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const b=EC(n.url);if(b&&Vt.protocols.indexOf(b)===-1){a(new Ne("Unsupported protocol "+b+":",Ne.ERR_BAD_REQUEST,t));return}y.send(i||null)})},VC=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let a=new AbortController,n;const i=function(d){if(!n){n=!0,o();const u=d instanceof Error?d:this.reason;a.abort(u instanceof Ne?u:new Ai(u instanceof Error?u.message:u))}};let l=e&&setTimeout(()=>{l=null,i(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const o=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=a;return c.unsubscribe=()=>Q.asap(o),c}},UC=VC,HC=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let a=0,n;for(;a<r;)n=a+e,yield t.slice(a,n),a=n},WC=async function*(t,e){for await(const r of qC(t))yield*HC(r,e)},qC=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:a}=await e.read();if(r)break;yield a}}finally{await e.cancel()}},Xf=(t,e,r,a)=>{const n=WC(t,e);let i=0,l,o=c=>{l||(l=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){o(),c.close();return}let m=u.byteLength;if(r){let h=i+=m;r(h)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},Ju=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",x2=Ju&&typeof ReadableStream=="function",YC=Ju&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),p2=(t,...e)=>{try{return!!t(...e)}catch{return!1}},KC=x2&&p2(()=>{let t=!1;const e=new Request(Vt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Qf=64*1024,X0=x2&&p2(()=>Q.isReadableStream(new Response("").body)),Ed={stream:X0&&(t=>t.body)};Ju&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ed[e]&&(Ed[e]=Q.isFunction(t[e])?r=>r[e]():(r,a)=>{throw new Ne(`Response type '${e}' is not supported`,Ne.ERR_NOT_SUPPORT,a)})})})(new Response);const XC=async t=>{if(t==null)return 0;if(Q.isBlob(t))return t.size;if(Q.isSpecCompliantForm(t))return(await new Request(Vt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(t)||Q.isArrayBuffer(t))return t.byteLength;if(Q.isURLSearchParams(t)&&(t=t+""),Q.isString(t))return(await YC(t)).byteLength},QC=async(t,e)=>{const r=Q.toFiniteNumber(t.getContentLength());return r??XC(e)},GC=Ju&&(async t=>{let{url:e,method:r,data:a,signal:n,cancelToken:i,timeout:l,onDownloadProgress:o,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:h}=h2(t);d=d?(d+"").toLowerCase():"text";let x=UC([n,i&&i.toAbortSignal()],l),g;const f=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let y;try{if(c&&KC&&r!=="get"&&r!=="head"&&(y=await QC(u,a))!==0){let N=new Request(e,{method:"POST",body:a,duplex:"half"}),S;if(Q.isFormData(a)&&(S=N.headers.get("content-type"))&&u.setContentType(S),N.body){const[k,P]=qf(y,Md(Yf(c)));a=Xf(N.body,Qf,k,P)}}Q.isString(m)||(m=m?"include":"omit");const p="credentials"in Request.prototype;g=new Request(e,{...h,signal:x,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:a,duplex:"half",credentials:p?m:void 0});let b=await fetch(g,h);const v=X0&&(d==="stream"||d==="response");if(X0&&(o||v&&f)){const N={};["status","statusText","headers"].forEach(_=>{N[_]=b[_]});const S=Q.toFiniteNumber(b.headers.get("content-length")),[k,P]=o&&qf(S,Md(Yf(o),!0))||[];b=new Response(Xf(b.body,Qf,k,()=>{P&&P(),f&&f()}),N)}d=d||"text";let w=await Ed[Q.findKey(Ed,d)||"text"](b,t);return!v&&f&&f(),await new Promise((N,S)=>{u2(N,S,{data:w,headers:Ys.from(b.headers),status:b.status,statusText:b.statusText,config:t,request:g})})}catch(p){throw f&&f(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,t,g),{cause:p.cause||p}):Ne.from(p,p&&p.code,t,g)}}),Q0={http:dC,xhr:BC,fetch:GC};Q.forEach(Q0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Gf=t=>`- ${t}`,JC=t=>Q.isFunction(t)||t===null||t===!1,g2={getAdapter:t=>{t=Q.isArray(t)?t:[t];const{length:e}=t;let r,a;const n={};for(let i=0;i<e;i++){r=t[i];let l;if(a=r,!JC(r)&&(a=Q0[(l=String(r)).toLowerCase()],a===void 0))throw new Ne(`Unknown adapter '${l}'`);if(a)break;n[l||"#"+i]=a}if(!a){const i=Object.entries(n).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=e?i.length>1?`since :
`+i.map(Gf).join(`
`):" "+Gf(i[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:Q0};function Vm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ai(null,t)}function Jf(t){return Vm(t),t.headers=Ys.from(t.headers),t.data=Bm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),g2.getAdapter(t.adapter||Ap.adapter)(t).then(function(a){return Vm(t),a.data=Bm.call(t,t.transformResponse,a),a.headers=Ys.from(a.headers),a},function(a){return d2(a)||(Vm(t),a&&a.response&&(a.response.data=Bm.call(t,t.transformResponse,a.response),a.response.headers=Ys.from(a.response.headers))),Promise.reject(a)})}const f2="1.11.0",Zu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zu[t]=function(a){return typeof a===t||"a"+(e<1?"n ":" ")+t}});const Zf={};Zu.transitional=function(e,r,a){function n(i,l){return"[Axios v"+f2+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,o)=>{if(e===!1)throw new Ne(n(l," has been removed"+(r?" in "+r:"")),Ne.ERR_DEPRECATED);return r&&!Zf[l]&&(Zf[l]=!0,console.warn(n(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,l,o):!0}};Zu.spelling=function(e){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${e}`),!0)};function ZC(t,e,r){if(typeof t!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const i=a[n],l=e[i];if(l){const o=t[i],c=o===void 0||l(o,i,t);if(c!==!0)throw new Ne("option "+i+" must be "+c,Ne.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ne("Unknown option "+i,Ne.ERR_BAD_OPTION)}}const Ac={assertOptions:ZC,validators:Zu},sr=Ac.validators;class Id{constructor(e){this.defaults=e||{},this.interceptors={request:new Hf,response:new Hf}}async request(e,r){try{return await this._request(e,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=jn(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&Ac.assertOptions(a,{silentJSONParsing:sr.transitional(sr.boolean),forcedJSONParsing:sr.transitional(sr.boolean),clarifyTimeoutError:sr.transitional(sr.boolean)},!1),n!=null&&(Q.isFunction(n)?r.paramsSerializer={serialize:n}:Ac.assertOptions(n,{encode:sr.function,serialize:sr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ac.assertOptions(r,{baseUrl:sr.spelling("baseURL"),withXsrfToken:sr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&Q.merge(i.common,i[r.method]);i&&Q.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=Ys.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(c=c&&f.synchronous,o.unshift(f.fulfilled,f.rejected))});const d=[];this.interceptors.response.forEach(function(f){d.push(f.fulfilled,f.rejected)});let u,m=0,h;if(!c){const g=[Jf.bind(this),void 0];for(g.unshift(...o),g.push(...d),h=g.length,u=Promise.resolve(r);m<h;)u=u.then(g[m++],g[m++]);return u}h=o.length;let x=r;for(m=0;m<h;){const g=o[m++],f=o[m++];try{x=g(x)}catch(y){f.call(this,y);break}}try{u=Jf.call(this,x)}catch(g){return Promise.reject(g)}for(m=0,h=d.length;m<h;)u=u.then(d[m++],d[m++]);return u}getUri(e){e=jn(this.defaults,e);const r=m2(e.baseURL,e.url,e.allowAbsoluteUrls);return l2(r,e.params,e.paramsSerializer)}}Q.forEach(["delete","get","head","options"],function(e){Id.prototype[e]=function(r,a){return this.request(jn(a||{},{method:e,url:r,data:(a||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function r(a){return function(i,l,o){return this.request(jn(o||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Id.prototype[e]=r(),Id.prototype[e+"Form"]=r(!0)});const Dc=Id;class Dp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{a.subscribe(o),i=o}).then(n);return l.cancel=function(){a.unsubscribe(i)},l},e(function(i,l,o){a.reason||(a.reason=new Ai(i,l,o),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=a=>{e.abort(a)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Dp(function(n){e=n}),cancel:e}}}const ek=Dp;function tk(t){return function(r){return t.apply(null,r)}}function sk(t){return Q.isObject(t)&&t.isAxiosError===!0}const G0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(G0).forEach(([t,e])=>{G0[e]=t});const rk=G0;function y2(t){const e=new Dc(t),r=X1(Dc.prototype.request,e);return Q.extend(r,Dc.prototype,e,{allOwnKeys:!0}),Q.extend(r,e,null,{allOwnKeys:!0}),r.create=function(n){return y2(jn(t,n))},r}const yt=y2(Ap);yt.Axios=Dc;yt.CanceledError=Ai;yt.CancelToken=ek;yt.isCancel=d2;yt.VERSION=f2;yt.toFormData=Qu;yt.AxiosError=Ne;yt.Cancel=yt.CanceledError;yt.all=function(e){return Promise.all(e)};yt.spread=tk;yt.isAxiosError=sk;yt.mergeConfig=jn;yt.AxiosHeaders=Ys;yt.formToJSON=t=>c2(Q.isHTMLForm(t)?new FormData(t):t);yt.getAdapter=g2.getAdapter;yt.HttpStatusCode=rk;yt.default=yt;const ak=yt,at="http://localhost:3001",nt={APPOINTMENTS:`${at}/api/appointments`,CUSTOMERS:`${at}/api/customers`,AUTH:`${at}/api/auth`,SERVICES:`${at}/api/services`,USERS:`${at}/api/users`,TASKS:`${at}/api/tasks`,INVENTORY:`${at}/api/inventory`,INVOICES:`${at}/api/invoices`,REMINDERS:`${at}/api/reminders`,REPORTS:`${at}/api/reports`,DASHBOARD:`${at}/api/dashboard`,ADMIN:`${at}/api/admin`,EMAIL:`${at}/api/email`,UPLOAD:`${at}/api/upload`,CHAT:`${at}/api/chat`,MARKETING:`${at}/api/marketing`,SALES:`${at}/api/sales`,COLLECTIONS:`${at}/api/collections`,YELLOWPAGES:`${at}/api/yellowpages`,MAILCHIMP:`${at}/api/mailchimp`,SMS:`${at}/api/sms`},gt=()=>{const t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}},So=async(t,e={})=>{const r=await fetch(t,{...e,headers:{...gt(),...e.headers}});if(!r.ok){const a=await r.json().catch(()=>({}));throw new Error(a.message||`HTTP error! status: ${r.status}`)}return r.json()},A=ak.create({baseURL:`${at}/api`,timeout:1e4,headers:{"Content-Type":"application/json"}});A.interceptors.request.use(t=>{const e=localStorage.getItem("authToken");return e&&t.headers&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));A.interceptors.response.use(t=>t,t=>{var r,a,n,i,l;const e=((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"An error occurred";return((n=t.response)==null?void 0:n.status)===401?(localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("role"),localStorage.removeItem("email"),window.location.href="/admin/login",C.error("Session expired. Please login again.")):((i=t.response)==null?void 0:i.status)===403?C.error("Access denied. You don't have permission for this action."):((l=t.response)==null?void 0:l.status)>=500?C.error("Server error. Please try again later."):C.error(e),Promise.reject(t)});const ae=async t=>{try{return(await t).data}catch(e){throw e}},Ve={async login(t){const e=await ae(A.post("/auth/login",t));return e.success&&(localStorage.setItem("authToken",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("role",e.data.user.role),localStorage.setItem("email",e.data.user.email)),e},async register(t){return await ae(A.post("/auth/register",t))},async getCurrentUser(){return await ae(A.get("/auth/me"))},async changePassword(t){return await ae(A.put("/auth/change-password",t))},logout(){const t=this.getCurrentUserFromStorage();t==null||t.role,localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("role"),localStorage.removeItem("email"),window.location.href="/auth/login"},isAuthenticated(){return!!localStorage.getItem("authToken")},getCurrentUserFromStorage(){const t=localStorage.getItem("user");return t?JSON.parse(t):null},getToken(){return localStorage.getItem("authToken")},hasPermission(t){var r;const e=this.getCurrentUserFromStorage();return((r=e==null?void 0:e.permissions)==null?void 0:r.includes(t))||(e==null?void 0:e.role)==="super_admin"||(e==null?void 0:e.role)==="admin"||!1},isSuperAdmin(){const t=this.getCurrentUserFromStorage();return(t==null?void 0:t.role)==="super_admin"},isAdmin(){const t=this.getCurrentUserFromStorage();return(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin"},isBusinessClient(){const t=this.getCurrentUserFromStorage();return(t==null?void 0:t.role)==="business_client"},isCustomer(){const t=this.getCurrentUserFromStorage();return(t==null?void 0:t.role)==="customer"},isAnyAdmin(){const t=this.getCurrentUserFromStorage();return(t==null?void 0:t.role)==="super_admin"||(t==null?void 0:t.role)==="admin"}},b2=j.createContext(void 0),nk=({children:t})=>{const[e,r]=j.useState(null),[a,n]=j.useState(!0);j.useEffect(()=>{(async()=>{try{if(Ve.isAuthenticated()){const b=await Ve.getCurrentUser();b.success?r(b.data.user):Ve.logout()}}catch(b){console.error("Auth initialization error:",b),Ve.logout()}finally{n(!1)}})()},[]);const y={user:e,isAuthenticated:!!e,isLoading:a,login:async p=>{try{n(!0);const b=await Ve.login(p);return b.success?(console.log("AuthContext: Login successful, setting user:",b.data.user),r(b.data.user),C.success("Login successful!"),!0):(console.log("AuthContext: Login failed:",b.message),C.error(b.message||"Login failed"),!1)}catch(b){return console.error("AuthContext: Login error:",b),C.error("Login failed. Please try again."),!1}finally{n(!1)}},register:async p=>{try{n(!0);const b=await Ve.register(p);return b.success?(C.success("User registered successfully!"),!0):(C.error(b.message||"Registration failed"),!1)}catch(b){return console.error("Registration error:",b),C.error("Registration failed. Please try again."),!1}finally{n(!1)}},logout:()=>{Ve.logout(),r(null),C.success("Logged out successfully")},changePassword:async p=>{try{n(!0);const b=await Ve.changePassword(p);return b.success?(C.success("Password changed successfully!"),!0):(C.error(b.message||"Password change failed"),!1)}catch(b){return console.error("Password change error:",b),C.error("Password change failed. Please try again."),!1}finally{n(!1)}},hasPermission:p=>Ve.hasPermission(p),isSuperAdmin:()=>Ve.isSuperAdmin(),isAdmin:()=>Ve.isAdmin(),isBusinessClient:()=>Ve.isBusinessClient(),isCustomer:()=>Ve.isCustomer(),isAnyAdmin:()=>Ve.isAnyAdmin(),refreshUser:async()=>{try{if(Ve.isAuthenticated()){const p=await Ve.getCurrentUser();p.success&&r(p.data.user)}}catch(p){console.error("User refresh error:",p)}}};return s.jsx(b2.Provider,{value:y,children:t})},xs=()=>{const t=j.useContext(b2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Qo=({children:t,requiredPermissions:e=[],requireSuperAdmin:r=!1,requireAdmin:a=!1,requireBusinessClient:n=!1,requireCustomer:i=!1,requireAnyAdmin:l=!1})=>{const{isAuthenticated:o,isLoading:c,user:d,hasPermission:u,isSuperAdmin:m,isAdmin:h,isBusinessClient:x,isCustomer:g,isAnyAdmin:f}=xs(),y=gr();return c?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):o?r&&!m()?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"You need Super Admin privileges to access this page."}),s.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):l&&!f()?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"You need Admin privileges to access this page."}),s.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):a&&!h()?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"You need Admin privileges to access this page."}),s.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):n&&!x()?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"You need Business Client privileges to access this page."}),s.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):i&&!g()?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"You need Customer privileges to access this page."}),s.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):e.length>0&&!e.every(b=>u(b))?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"You don't have the required permissions to access this page."}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Required permissions: ",e.join(", ")]}),s.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):s.jsx(s.Fragment,{children:t}):s.jsx(za,{to:"/auth/login",state:{from:y},replace:!0})};var v2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ey=Hs.createContext&&Hs.createContext(v2),ik=["attr","size","title"];function lk(t,e){if(t==null)return{};var r=ok(t,e),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function ok(t,e){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;r[a]=t[a]}return r}function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Rd.apply(this,arguments)}function ty(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Ld(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ty(Object(r),!0).forEach(function(a){ck(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ty(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function ck(t,e,r){return e=dk(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dk(t){var e=uk(t,"string");return typeof e=="symbol"?e:e+""}function uk(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j2(t){return t&&t.map((e,r)=>Hs.createElement(e.tag,Ld({key:r},e.attr),j2(e.child)))}function re(t){return e=>Hs.createElement(mk,Rd({attr:Ld({},t.attr)},e),j2(t.child))}function mk(t){var e=r=>{var{attr:a,size:n,title:i}=t,l=lk(t,ik),o=n||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Hs.createElement("svg",Rd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,l,{className:c,style:Ld(Ld({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&Hs.createElement("title",null,i),t.children)};return ey!==void 0?Hs.createElement(ey.Consumer,null,r=>e(r)):e(v2)}function N2(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function w2(t){return re({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function S2(t){return re({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function C2(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function J0(t){return re({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function hk(t){return re({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M97.12 362.63c-8.69-8.69-4.16-6.24-25.12-11.85-9.51-2.55-17.87-7.45-25.43-13.32L1.2 448.7c-4.39 10.77 3.81 22.47 15.43 22.03l52.69-2.01L105.56 507c8 8.44 22.04 5.81 26.43-4.96l52.05-127.62c-10.84 6.04-22.87 9.58-35.31 9.58-19.5 0-37.82-7.59-51.61-21.37zM382.8 448.7l-45.37-111.24c-7.56 5.88-15.92 10.77-25.43 13.32-21.07 5.64-16.45 3.18-25.12 11.85-13.79 13.78-32.12 21.37-51.62 21.37-12.44 0-24.47-3.55-35.31-9.58L252 502.04c4.39 10.77 18.44 13.4 26.43 4.96l36.25-38.28 52.69 2.01c11.62.44 19.82-11.27 15.43-22.03zM263 340c15.28-15.55 17.03-14.21 38.79-20.14 13.89-3.79 24.75-14.84 28.47-28.98 7.48-28.4 5.54-24.97 25.95-45.75 10.17-10.35 14.14-25.44 10.42-39.58-7.47-28.38-7.48-24.42 0-52.83 3.72-14.14-.25-29.23-10.42-39.58-20.41-20.78-18.47-17.36-25.95-45.75-3.72-14.14-14.58-25.19-28.47-28.98-27.88-7.61-24.52-5.62-44.95-26.41-10.17-10.35-25-14.4-38.89-10.61-27.87 7.6-23.98 7.61-51.9 0-13.89-3.79-28.72.25-38.89 10.61-20.41 20.78-17.05 18.8-44.94 26.41-13.89 3.79-24.75 14.84-28.47 28.98-7.47 28.39-5.54 24.97-25.95 45.75-10.17 10.35-14.15 25.44-10.42 39.58 7.47 28.36 7.48 24.4 0 52.82-3.72 14.14.25 29.23 10.42 39.59 20.41 20.78 18.47 17.35 25.95 45.75 3.72 14.14 14.58 25.19 28.47 28.98C104.6 325.96 106.27 325 121 340c13.23 13.47 33.84 15.88 49.74 5.82a39.676 39.676 0 0 1 42.53 0c15.89 10.06 36.5 7.65 49.73-5.82zM97.66 175.96c0-53.03 42.24-96.02 94.34-96.02s94.34 42.99 94.34 96.02-42.24 96.02-94.34 96.02-94.34-42.99-94.34-96.02z"},child:[]}]})(t)}function xk(t){return re({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function sy(t){return re({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function Mp(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M499.99 176h-59.87l-16.64-41.6C406.38 91.63 365.57 64 319.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4L71.87 176H12.01C4.2 176-1.53 183.34.37 190.91l6 24C7.7 220.25 12.5 224 18.01 224h20.07C24.65 235.73 16 252.78 16 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-19.22-8.65-36.27-22.07-48H494c5.51 0 10.31-3.75 11.64-9.09l6-24c1.89-7.57-3.84-14.91-11.65-14.91zm-352.06-17.83c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L384 208H128l19.93-49.83zM96 319.8c-19.2 0-32-12.76-32-31.9S76.8 256 96 256s48 28.71 48 47.85-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S396.8 256 416 256s32 12.76 32 31.9-12.8 31.9-32 31.9z"},child:[]}]})(t)}function pk(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function gk(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function fk(t){return re({tag:"svg",attr:{viewBox:"0 0 544 512"},child:[{tag:"path",attr:{d:"M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"},child:[]}]})(t)}function qr(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function Jt(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function em(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function k2(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function Um(t){return re({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(t)}function _2(t){return re({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(t)}function ry(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function P2(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function yk(t){return re({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function bk(t){return re({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function vk(t){return re({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function jk(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(t)}function Nk(t){return re({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z"},child:[]}]})(t)}function wk(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function Sk(t){return re({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function Od(t){return re({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function Ck(t){return re({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M629.8 160.31L416 224l-50.49-25.24a64.07 64.07 0 0 0-28.62-6.76H280v-48h56c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h56v48h-56L37.72 166.86a31.9 31.9 0 0 0-5.79-.53C14.67 166.33 0 180.36 0 198.34v94.95c0 15.46 11.06 28.72 26.28 31.48L96 337.46V384c0 17.67 14.33 32 32 32h274.63c8.55 0 16.75-3.42 22.76-9.51l212.26-214.75c1.5-1.5 2.34-3.54 2.34-5.66V168c.01-5.31-5.08-9.15-10.19-7.69zM96 288.67l-48-8.73v-62.43l48 8.73v62.43zm453.33 84.66c0 23.56 19.1 42.67 42.67 42.67s42.67-19.1 42.67-42.67S592 288 592 288s-42.67 61.77-42.67 85.33z"},child:[]}]})(t)}function kk(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function Xl(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function ay(t){return re({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(t)}function Ep(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(t)}function _k(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function Ba(t){return re({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function Pk(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(t)}function T2(t){return re({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}function A2(t){return re({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function D2(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(t)}function M2(t){return re({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function Z0(t){return re({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function Tk(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 352H48c-26.5 0-48 21.5-48 48v32c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-32c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function Fd(t){return re({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(t)}const Ak=()=>{const{isAuthenticated:t,user:e}=xs(),r=window.location.pathname;if(!t||r.startsWith("/admin/dashboard")||r.startsWith("/customer/dashboard"))return null;const a=()=>(e==null?void 0:e.role)==="admin"?"/admin/dashboard":(e==null?void 0:e.role)==="customer"?"/customer/dashboard":"/admin/dashboard",n=()=>(e==null?void 0:e.role)==="admin"?"Go to Admin Dashboard":(e==null?void 0:e.role)==="customer"?"Go to Customer Dashboard":"Go to Dashboard";return s.jsx("div",{className:"fixed bottom-24 right-6 z-50",children:s.jsx(me,{to:a(),className:"bg-green-600 hover:bg-green-700 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center",title:n(),children:s.jsx(T2,{className:"w-6 h-6"})})})};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mk=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase()),ny=t=>{const e=Mk(t);return e.charAt(0).toUpperCase()+e.slice(1)},E2=(...t)=>t.filter((e,r,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===r).join(" ").trim(),Ek=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ik={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...o},c)=>j.createElement("svg",{ref:c,...Ik,width:e,height:e,stroke:t,strokeWidth:a?Number(r)*24/Number(e):r,className:E2("lucide",n),...!i&&!Ek(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>j.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(t,e)=>{const r=j.forwardRef(({className:a,...n},i)=>j.createElement(Rk,{ref:i,iconNode:e,className:E2(`lucide-${Dk(ny(t))}`,`lucide-${t}`,a),...n}));return r.displayName=ny(t),r};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],iy=ge("activity",Lk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Fk=ge("arrow-left",Ok);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],zk=ge("bell",$k);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],I2=ge("building-2",Bk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Nn=ge("building",Vk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Hk=ge("calendar-check",Uk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ur=ge("calendar",Wk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],$d=ge("car",qk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Kk=ge("chart-column",Yk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hm=ge("circle-check-big",Xk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ly=ge("circle-x",Qk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Jk=ge("clipboard-list",Gk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ex=ge("clock",Zk);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],R2=ge("credit-card",e8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],s8=ge("database",t8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],zd=ge("dollar-sign",r8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],n8=ge("eye",a8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ql=ge("file-text",i8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],o8=ge("funnel",l8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],d8=ge("gauge",c8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],L2=ge("grid-3x3",u8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],h8=ge("hard-drive",m8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],p8=ge("hash",x8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],f8=ge("house",g8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Wm=ge("loader-circle",y8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],v8=ge("list",b8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Bd=ge("mail",j8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ip=ge("map-pin",N8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],S8=ge("message-circle",w8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],k8=ge("message-square",C8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],P8=ge("monitor",_8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],A8=ge("package",T8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],M8=ge("palette",D8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],I8=ge("pencil",E8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],oy=ge("phone-call",R8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Gl=ge("phone",L8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Jl=ge("plus",O8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Rp=ge("save",F8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bi=ge("search",$8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],B8=ge("server",z8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],U8=ge("settings",V8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Vd=ge("square-pen",H8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],q8=ge("tag",W8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Is=ge("trash-2",Y8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mc=ge("triangle-alert",K8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Zl=ge("truck",X8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wn=ge("user",Q8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],J8=ge("users",G8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],e7=ge("wrench",Z8);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],En=ge("x",t7);const s7=[{to:"/admin/dashboard",label:"Dashboard",icon:s.jsx(f8,{size:18})},{to:"/admin/dashboard/appointments",label:"Appointments",icon:s.jsx(Hk,{size:18})},{to:"/admin/dashboard/customers",label:"Customers",icon:s.jsx(J8,{size:18})},{to:"/admin/dashboard/business-clients",label:"Business Clients",icon:s.jsx(Nn,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/services",label:"Services",icon:s.jsx(e7,{size:18})},{to:"/admin/dashboard/invoices",label:"Invoices",icon:s.jsx(Ql,{size:18})},{to:"/admin/dashboard/inventory",label:"Inventory",icon:s.jsx(A8,{size:18})},{to:"/admin/dashboard/reports",label:"Reports",icon:s.jsx(Kk,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/reminders",label:"Reminders",icon:s.jsx(zk,{size:18})},{to:"/admin/dashboard/contact-logs",label:"Communication",icon:s.jsx(oy,{size:18})},{to:"/admin/dashboard/tasks",label:"Tasks",icon:s.jsx(Jk,{size:18})},{to:"/admin/dashboard/promotions",label:"Promotions",icon:s.jsx(S8,{size:18})},{to:"/admin/dashboard/marketing",label:"Marketing",icon:s.jsx(Bd,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/sms",label:"SMS",icon:s.jsx(oy,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/mailchimp",label:"MailChimp",icon:s.jsx(Bd,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/live-chat",label:"Live Chat",icon:s.jsx(k8,{size:18})},{to:"/admin/dashboard/yellowpages",label:"YellowPages",icon:s.jsx(bi,{size:18})},{to:"/admin/dashboard/system-admin",label:"System Administration",icon:s.jsx(U8,{size:18}),roles:["super_admin"]}];function r7(){const t=gr(),{user:e}=xs();return s.jsxs("aside",{className:"bg-gray-900 text-white w-64 flex flex-col h-screen",children:[s.jsx("div",{className:"p-4 border-b border-gray-700",children:s.jsx(me,{to:"/",className:"block",children:s.jsx("div",{className:"text-xl font-bold text-yellow-400 hover:text-yellow-300 transition-colors cursor-pointer",children:" AutoCRM Pro"})})}),s.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 sidebar-nav",children:s7.filter(r=>!r.roles||r.roles.includes((e==null?void 0:e.role)||"")).map(r=>s.jsxs(me,{to:r.to,className:`flex items-center gap-2 px-4 py-2 rounded hover:bg-gray-800 transition ${t.pathname===r.to?"bg-gray-800 text-yellow-400":"text-gray-300"}`,children:[r.icon,r.label]},r.to))})]})}function a7(){const{user:t,logout:e,isLoading:r}=xs(),a=()=>{e()};return r||!t?s.jsxs("header",{className:"flex justify-between items-center px-6 py-4 bg-gray-800 shadow-md",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"hover:text-yellow-300 transition-colors",children:s.jsx("h1",{className:"text-xl font-bold text-yellow-400",children:"Virtual Auto Secretary"})}),s.jsx("span",{className:"ml-4 text-sm text-gray-300",children:"Admin Dashboard"})]}),s.jsx("div",{className:"text-gray-300 text-sm",children:"Loading..."})]}):s.jsxs("header",{className:"flex justify-between items-center px-6 py-4 bg-gray-800 shadow-md",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"hover:text-yellow-300 transition-colors",children:s.jsx("h1",{className:"text-xl font-bold text-yellow-400",children:"Virtual Auto Secretary"})}),s.jsx("span",{className:"ml-4 text-sm text-gray-300",children:"Admin Dashboard"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[s.jsx(M2,{className:"w-4 h-4 text-gray-300"}),s.jsx("span",{className:"text-sm font-medium",children:(t==null?void 0:t.name)||"Admin"}),s.jsxs("span",{className:"text-xs text-gray-400",children:["(",(t==null?void 0:t.role)||"Admin",")"]})]}),s.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition duration-200",children:[s.jsx(_k,{className:"w-4 h-4"}),s.jsx("span",{children:"Logout"})]})]})]})}function n7(){const[t,e]=j.useState("");return j.useEffect(()=>{const r=localStorage.getItem("role");r?e(r):window.location.href="/admin/login"},[]),t?s.jsxs("div",{className:"flex h-screen overflow-hidden",children:[s.jsx(r7,{}),s.jsxs("div",{className:"flex flex-col flex-1 bg-gray-100",children:[s.jsx(a7,{}),s.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:s.jsx(T1,{})})]})]}):s.jsx("div",{className:"h-screen flex items-center justify-center text-gray-600",children:"Loading dashboard..."})}function i7({currentRole:t,isLoginMode:e}){const[r,a]=j.useState(0),[n,i]=j.useState(!1),l=[{title:"Smart Role Detection",description:"Automatically detects your account type and provides relevant features",icon:"",color:"from-blue-500 to-purple-500"},{title:"Real-time Validation",description:"Instant feedback on form inputs with helpful suggestions",icon:"",color:"from-green-500 to-blue-500"},{title:"Password Strength Analyzer",description:"Advanced password strength checker with improvement suggestions",icon:"",color:"from-red-500 to-orange-500"},{title:"Smart Redirects",description:"Automatically redirects to the appropriate dashboard based on your role",icon:"",color:"from-purple-500 to-pink-500"},{title:"Responsive Design",description:"Perfect experience on all devices - desktop, tablet, and mobile",icon:"",color:"from-indigo-500 to-purple-500"}];return j.useEffect(()=>{i(!0);const o=setInterval(()=>{a(c=>(c+1)%l.length)},3e3);return()=>clearInterval(o)},[]),e?s.jsxs("div",{className:"hidden lg:block w-96 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Welcome Back!"}),s.jsxs("p",{className:"text-gray-600",children:["Sign in to access your ",t==="admin"?"business dashboard":"vehicle management portal"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 text-lg",children:""})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-800",children:"Quick Access"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get to your dashboard in seconds"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 text-lg",children:""})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-800",children:"Secure Login"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Your data is protected with industry-standard security"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 text-lg",children:""})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-800",children:"Mobile Ready"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Access your account from any device"})]})]})})]})]}):s.jsxs("div",{className:"hidden lg:block w-96 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Smart Features"}),s.jsx("p",{className:"text-gray-600",children:"Experience the next generation of authentication"})]}),s.jsxs("div",{className:"relative h-64 bg-white rounded-lg shadow-sm overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-500 opacity-10"}),s.jsxs("div",{className:"relative p-6 h-full flex flex-col justify-center items-center text-center",children:[s.jsx("div",{className:`text-4xl mb-4 transition-all duration-500 ${n?"scale-100":"scale-75"}`,children:l[r].icon}),s.jsx("h4",{className:`font-semibold text-gray-800 mb-2 transition-all duration-500 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:l[r].title}),s.jsx("p",{className:`text-sm text-gray-600 transition-all duration-500 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:l[r].description})]}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:l.map((o,c)=>s.jsx("button",{onClick:()=>a(c),className:`w-2 h-2 rounded-full transition-all duration-300 ${c===r?"bg-blue-600 scale-125":"bg-gray-300 hover:bg-gray-400"}`},c))})]}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:t==="admin"?"Admin Benefits":"Customer Benefits"}),t==="admin"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{children:"Manage business operations"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{children:"Access customer management tools"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{children:"View analytics and reports"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Manage your vehicles"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Schedule appointments"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Track service history"})]})]})]}),s.jsxs("div",{className:"mt-6 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg p-4 text-white text-center",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),s.jsx("span",{className:"font-semibold",children:"Enterprise Security"})]}),s.jsx("p",{className:"text-sm opacity-90",children:"Your data is protected with bank-level encryption"})]})]})}function cy(){const[t,e]=j.useState(!0),[r,a]=j.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"customer",businessName:"",permissions:["customer_access"]}),[n,i]=j.useState({}),[l,o]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,x]=j.useState(0),[g,f]=j.useState([]),y=Dn(),p=gr();j.useEffect(()=>{const T=p.pathname;T.includes("/register")?e(!1):T.includes("/login")&&e(!0),T.includes("/admin")?a(U=>({...U,role:"admin",permissions:["admin_access"]})):T.includes("/customer")&&a(U=>({...U,role:"customer",permissions:["customer_access"]}))},[p]);const b=T=>{let U=0;const H=[];T.length>=8?U+=1:H.push("Use at least 8 characters"),/[a-z]/.test(T)?U+=1:H.push("Include lowercase letters"),/[A-Z]/.test(T)?U+=1:H.push("Include uppercase letters"),/[0-9]/.test(T)?U+=1:H.push("Include numbers"),/[^A-Za-z0-9]/.test(T)?U+=1:H.push("Include special characters"),x(U),f(H)},v=(T,U)=>{const H={...n};switch(T){case"name":t||(U.trim()?U.length<2?H.name="Name must be at least 2 characters":delete H.name:H.name="Name is required");break;case"email":U?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U)?delete H.email:H.email="Please enter a valid email address":H.email="Email is required";break;case"phone":t||(U&&!/^[\+]?[1-9][\d]{0,15}$/.test(U.replace(/[\s\-\(\)]/g,""))?H.phone="Please enter a valid phone number":delete H.phone);break;case"password":U?!t&&U.length<6?(b(U),H.password="Password must be at least 6 characters"):(t||b(U),delete H.password):H.password="Password is required";break;case"confirmPassword":!t&&U!==r.password?H.confirmPassword="Passwords do not match":delete H.confirmPassword;break;case"businessName":!t&&r.role==="admin"&&!U.trim()?H.businessName="Business name is required for admin accounts":delete H.businessName;break}i(H)},w=T=>{const{name:U,value:H}=T.target;if(a(W=>({...W,[U]:H})),U==="role"){const W=H==="admin"?["admin_access"]:["customer_access"];a(J=>({...J,role:H,permissions:W}))}v(U,H)},N=()=>{var U;const T={};return r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(T.email="Please enter a valid email address"):T.email="Email is required",r.password?!t&&r.password.length<6&&(T.password="Password must be at least 6 characters"):T.password="Password is required",t||(r.name.trim()||(T.name="Name is required"),r.password!==r.confirmPassword&&(T.confirmPassword="Passwords do not match"),r.role==="admin"&&!((U=r.businessName)!=null&&U.trim())&&(T.businessName="Business name is required for admin accounts")),i(T),Object.keys(T).length===0},{login:S,register:k}=xs(),P=async T=>{if(T.preventDefault(),!N()){C.error("Please fix the errors in the form");return}o(!0);try{if(t){if(await S({email:r.email,password:r.password})){const H=Ve.getCurrentUserFromStorage();console.log("Login successful, user:",H),H?H.role==="customer"?(console.log("Redirecting to customer dashboard"),y("/customer/dashboard")):(console.log("Redirecting to admin dashboard"),y("/admin/dashboard")):console.error("User not found in storage after successful login")}}else{const U={name:r.name,email:r.email,password:r.password,role:r.role,permissions:r.permissions||[],phone:r.phone};r.businessName&&r.businessName.trim()&&(U.businessName=r.businessName.trim()),await k(U)&&(e(!0),a(W=>({...W,password:"",confirmPassword:""})))}}catch(U){console.error("Authentication error:",U),C.error("An error occurred. Please try again.")}finally{o(!1)}},_=()=>h<=2?"text-red-500":h<=3?"text-yellow-500":h<=4?"text-blue-500":"text-green-500",L=()=>h<=2?"Weak":h<=3?"Fair":h<=4?"Good":"Strong";return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"flex items-center justify-center space-x-8 max-w-6xl w-full",children:[s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:t?"Welcome Back":"Create Account"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:t?"Sign in to access your dashboard":"Join us to manage your business or vehicles"})]}),s.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>e(!0),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Sign In"}),s.jsx("button",{onClick:()=>e(!1),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t?"text-gray-600 hover:text-gray-900":"bg-white text-blue-600 shadow-sm"}`,children:"Sign Up"})]}),s.jsx("form",{className:"mt-8 space-y-6",onSubmit:P,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[s.jsxs("div",{className:"space-y-4",children:[!t&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:r.name,onChange:w,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter your full name"}),n.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.name})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number (Optional)"}),s.jsx("input",{id:"phone",name:"phone",type:"tel",value:r.phone,onChange:w,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.phone?"border-red-300":"border-gray-300"}`,placeholder:"Enter your phone number"}),n.phone&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.phone})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Type"}),s.jsxs("select",{id:"role",name:"role",value:r.role,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"customer",children:"Customer - Manage my vehicles"}),s.jsx("option",{value:"admin",children:"Admin - Manage business operations"})]})]}),r.role==="admin"&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"businessName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),s.jsx("input",{id:"businessName",name:"businessName",type:"text",required:!0,value:r.businessName,onChange:w,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.businessName?"border-red-300":"border-gray-300"}`,placeholder:"Enter your business name"}),n.businessName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.businessName})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:r.email,onChange:w,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter your email"}),n.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:c?"text":"password",required:!0,value:r.password,onChange:w,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.password?"border-red-300":"border-gray-300"}`,placeholder:t?"Enter your password":"Create a password"}),s.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):s.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password}),!t&&r.password&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${h<=2?"bg-red-500":h<=3?"bg-yellow-500":h<=4?"bg-blue-500":"bg-green-500"}`,style:{width:`${h/5*100}%`}})}),s.jsx("span",{className:`text-sm font-medium ${_()}`,children:L()})]}),g.length>0&&s.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[s.jsx("p",{className:"font-medium",children:"Suggestions:"}),s.jsx("ul",{className:"list-disc list-inside space-y-1",children:g.map((T,U)=>s.jsx("li",{children:T},U))})]})]})]}),!t&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:u?"text":"password",required:!0,value:r.confirmPassword,onChange:w,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.confirmPassword?"border-red-300":"border-gray-300"}`,placeholder:"Confirm your password"}),s.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):s.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n.confirmPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.confirmPassword})]})]}),s.jsx("button",{type:"submit",disabled:l,className:"w-full mt-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:l?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t?"Signing in...":"Creating account..."]}):t?"Sign In":"Create Account"}),s.jsx("div",{className:"mt-6 text-center space-y-2",children:t?s.jsxs(s.Fragment,{children:[s.jsx(me,{to:"/auth/register",className:"text-sm text-blue-600 hover:text-blue-500 block",children:"Don't have an account? Sign up"}),s.jsx(me,{to:"/auth/forgot-password",className:"text-sm text-gray-600 hover:text-gray-500 block",children:"Forgot your password?"})]}):s.jsx(me,{to:"/auth/login",className:"text-sm text-blue-600 hover:text-blue-500 block",children:"Already have an account? Sign in"})})]})}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",s.jsx(me,{to:"/contact",className:"text-blue-600 hover:text-blue-500",children:"Contact us"})]})})]}),s.jsx(i7,{currentRole:r.role,isLoginMode:t})]})})}function l7(){const{user:t,logout:e}=xs(),r=gr(),a=()=>{e()};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Customer Portal"})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",(t==null?void 0:t.name)||"Customer"]}),s.jsx("button",{onClick:a,className:"text-sm text-red-600 hover:text-red-500",children:"Logout"})]})]})})}),s.jsxs("div",{className:"flex",children:[s.jsx("nav",{className:"w-64 bg-white shadow-sm min-h-screen",children:s.jsx("div",{className:"p-4",children:s.jsxs("nav",{className:"space-y-2",children:[s.jsx(me,{to:"/",className:"block px-4 py-2 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:bg-gray-100",children:" Home"}),s.jsx(me,{to:"/customer/dashboard",className:`block px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pathname==="/customer/dashboard"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" Dashboard"}),s.jsx(me,{to:"/customer/dashboard/vehicles",className:`block px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pathname==="/customer/dashboard/vehicles"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" My Vehicles"}),s.jsx(me,{to:"/customer/dashboard/appointments",className:`block px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pathname==="/customer/dashboard/appointments"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" Appointments"}),s.jsx(me,{to:"/customer/dashboard/services",className:`block px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pathname==="/customer/dashboard/services"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" Services"}),s.jsx(me,{to:"/customer/dashboard/invoices",className:`block px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pathname==="/customer/dashboard/invoices"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" Invoices"}),s.jsx(me,{to:"/customer/dashboard/messages",className:`block px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pathname==="/customer/dashboard/messages"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" Messages"}),s.jsx(me,{to:"/customer/dashboard/notifications",className:`block px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pathname==="/customer/dashboard/notifications"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" Notifications"}),s.jsx(me,{to:"/customer/dashboard/profile",className:`block px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pathname==="/customer/dashboard/profile"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:" Profile"})]})})}),s.jsx("main",{className:"flex-1 p-6",children:s.jsx(T1,{})})]})]})}function o7(){const{user:t}=xs(),[e,r]=j.useState({totalVehicles:0,upcomingAppointments:1,pendingInvoices:0,unreadMessages:2,unreadNotifications:0,totalSpent:0,loyaltyPoints:0}),[a,n]=j.useState([]),[i,l]=j.useState([]),[o,c]=j.useState(!0),[d,u]=j.useState([]);j.useEffect(()=>{(async()=>{c(!0);try{await new Promise(b=>setTimeout(b,800)),r({totalVehicles:2,upcomingAppointments:1,pendingInvoices:0,unreadMessages:2,unreadNotifications:3,lastServiceDate:"2024-01-10",nextServiceDue:"2024-03-15",totalSpent:1250,loyaltyPoints:450}),n([{id:"1",type:"appointment",title:"Oil Change Appointment",description:"Scheduled for Toyota Camry 2020",date:"2024-01-15",status:"pending",priority:"medium",actionRequired:!0},{id:"2",type:"service",title:"Brake Inspection Completed",description:"Honda Civic 2019 - All brakes in good condition",date:"2024-01-10",status:"completed",priority:"low"},{id:"3",type:"payment",title:"Payment Received",description:"Invoice #1234 - $85.00",date:"2024-01-08",status:"completed",priority:"low"},{id:"4",type:"reminder",title:"Service Due Soon",description:"Honda Civic due for 30,000 mile service",date:"2024-02-15",status:"pending",priority:"high",actionRequired:!0}]),l([{id:"1",type:"maintenance",title:"Schedule 30,000 Mile Service",description:"Your Honda Civic is approaching the 30,000 mile mark. Book your service now to maintain warranty coverage.",priority:"high",estimatedCost:150,urgency:"soon",action:"Book Service",actionUrl:"/customer/dashboard/appointments"},{id:"2",type:"service",title:"Tire Rotation & Balance",description:"Based on your driving patterns, your tires should be rotated every 6,000 miles.",priority:"medium",estimatedCost:45,urgency:"routine",action:"Schedule Now",actionUrl:"/customer/dashboard/appointments"},{id:"3",type:"promotion",title:"20% Off Brake Service",description:"Special offer for loyal customers. Valid until end of month.",priority:"low",urgency:"routine",action:"View Details",actionUrl:"/customer/dashboard/services"}]);const p=[];e.pendingInvoices>0&&p.push("You have pending invoices that require attention"),e.unreadMessages>0&&p.push(`You have ${e.unreadMessages} unread messages from the shop`),e.upcomingAppointments>0&&p.push("You have upcoming appointments - please confirm details"),u(p)}catch(p){C.error("Failed to load dashboard data"),console.error("Dashboard data loading error:",p)}finally{c(!1)}})()},[]);const m=y=>{switch(y){case"appointment":return"";case"service":return"";case"payment":return"";case"message":return"";case"reminder":return"";case"promotion":return"";default:return""}},h=y=>{switch(y){case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"cancelled":return"text-red-600 bg-red-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},x=y=>{switch(y){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},g=y=>{switch(y){case"urgent":return"text-red-600 bg-red-100";case"soon":return"text-orange-600 bg-orange-100";case"routine":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},f=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y);return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow p-6 border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(t==null?void 0:t.name)||"Customer","! "]}),s.jsx("p",{className:"text-gray-600 mb-3",children:"Here's what's happening with your vehicles and appointments."}),d.length>0&&s.jsx("div",{className:"space-y-2",children:d.map((y,p)=>s.jsxs("div",{className:"flex items-center text-sm text-amber-700 bg-amber-100 px-3 py-2 rounded-lg",children:[s.jsx("span",{className:"mr-2",children:""}),y]},p))})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.loyaltyPoints}),s.jsx("div",{className:"text-sm text-gray-600",children:"Loyalty Points"})]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Vehicles"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.totalVehicles}),e.nextServiceDue&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Next service: ",new Date(e.nextServiceDue).toLocaleDateString()]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-green-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming Appointments"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.upcomingAppointments}),s.jsx("p",{className:"text-xs text-gray-500",children:"Click to view details"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-yellow-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Invoices"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.pendingInvoices}),s.jsx("p",{className:"text-xs text-gray-500",children:"All caught up!"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-purple-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unread Messages"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.unreadMessages}),s.jsx("p",{className:"text-xs text-gray-500",children:"Requires attention"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Smart Recommendations"}),s.jsx("span",{className:"text-sm text-gray-500",children:"AI-powered suggestions"})]}),s.jsx("div",{className:"space-y-4",children:i.map(y=>s.jsxs("div",{className:"flex items-start space-x-4 p-4 border border-gray-100 rounded-lg hover:border-blue-200 hover:bg-blue-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g(y.urgency)}`,children:y.urgency})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:y.title}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(y.priority)}`,children:y.priority})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:y.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[y.estimatedCost&&s.jsxs("span",{className:"text-sm font-medium text-green-600",children:["Est. ",f(y.estimatedCost)]}),s.jsx("span",{className:"text-xs text-gray-500",children:y.type.charAt(0).toUpperCase()+y.type.slice(1)})]}),s.jsx(me,{to:y.actionUrl,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:y.action})]})]})]},y.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(me,{to:"/customer/dashboard/appointments",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors group",children:[s.jsx("span",{className:"text-2xl mr-3 group-hover:scale-110 transition-transform",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Schedule Appointment"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Book a service"})]})]}),s.jsxs(me,{to:"/customer/dashboard/vehicles",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors group",children:[s.jsx("span",{className:"text-2xl mr-3 group-hover:scale-110 transition-transform",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"View Vehicles"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage your cars"})]})]}),s.jsxs(me,{to:"/customer/dashboard/invoices",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors group",children:[s.jsx("span",{className:"text-2xl mr-3 group-hover:scale-110 transition-transform",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Pay Invoice"}),s.jsx("p",{className:"text-sm text-gray-600",children:"View & pay bills"})]})]}),s.jsxs(me,{to:"/customer/dashboard/messages",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors group",children:[s.jsx("span",{className:"text-2xl mr-3 group-hover:scale-110 transition-transform",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Send Message"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Contact the shop"})]})]}),s.jsxs(me,{to:"/customer/dashboard/notifications",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors group relative",children:[s.jsx("span",{className:"text-2xl mr-3 group-hover:scale-110 transition-transform",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Notifications"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[e.unreadNotifications," unread"]})]}),e.unreadNotifications>0&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:e.unreadNotifications})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),s.jsx(me,{to:"/customer/dashboard/activity",className:"text-sm text-blue-600 hover:text-blue-500",children:"View all"})]}),s.jsx("div",{className:"space-y-4",children:a.map(y=>s.jsxs("div",{className:`flex items-start space-x-4 p-4 border rounded-lg transition-colors ${y.actionRequired?"border-orange-200 bg-orange-50":"border-gray-100 hover:border-gray-200"}`,children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:m(y.type)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.title}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(y.status)}`,children:y.status}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(y.priority)}`,children:y.priority})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:y.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:new Date(y.date).toLocaleDateString()}),y.actionRequired&&s.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"Action Required"})]})]})]},y.id))})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg shadow-sm p-6 border-l-4 border-green-500",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Financial Summary"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:f(e.totalSpent)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Spent This Year"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.loyaltyPoints}),s.jsx("div",{className:"text-sm text-gray-600",children:"Loyalty Points Earned"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f(e.pendingInvoices)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Outstanding Balance"})]})]})]})]})}class c7{async getProfile(){return(await A.get("/customers/profile")).data}async updateProfile(e){return(await A.put("/customers/profile",e)).data}async getVehicles(){return(await A.get("/customers/vehicles")).data}async addVehicle(e){return(await A.post("/customers/vehicles",e)).data}async updateVehicle(e,r){return(await A.put(`/customers/vehicles/${e}`,r)).data}async deleteVehicle(e){return(await A.delete(`/customers/vehicles/${e}`)).data}async getAppointments(){return(await A.get("/customers/appointments")).data}async createAppointment(e){return(await A.post("/customers/appointments",e)).data}async updateAppointment(e,r){return(await A.put(`/customers/appointments/${e}`,r)).data}async cancelAppointment(e){return(await A.delete(`/customers/appointments/${e}`)).data}async confirmAppointment(e){return(await A.put(`/customers/appointments/${e}/confirm`)).data}async getServices(){return(await A.get("/customers/services")).data}async getInvoices(){return(await A.get("/customers/invoices")).data}async payInvoice(e,r){return(await A.post(`/customers/invoices/${e}/pay`,r)).data}async downloadInvoice(e){return(await A.get(`/customers/invoices/${e}/download`)).data}async getMessages(){return(await A.get("/customers/messages")).data}async sendMessage(e){return(await A.post("/customers/messages",e)).data}async markMessageAsRead(e){return(await A.put(`/customers/messages/${e}/read`)).data}async deleteMessage(e){return(await A.delete(`/customers/messages/${e}`)).data}async getDashboardData(){return(await A.get("/customers/dashboard")).data}async getNotifications(e=1,r=20,a,n){const i=new URLSearchParams({page:e.toString(),limit:r.toString()});return a&&i.append("type",a),n&&i.append("status",n),(await A.get(`/customers/notifications?${i}`)).data}async markNotificationAsRead(e){return(await A.put(`/customers/notifications/${e}/read`)).data}async markAllNotificationsAsRead(){return(await A.put("/customers/notifications/read-all")).data}async getTechnicians(){return(await A.get("/customers/technicians")).data}}const He=new c7;function tm({isOpen:t,title:e,message:r,confirmText:a="Confirm",cancelText:n="Cancel",onConfirm:i,onCancel:l,type:o="info"}){if(!t)return null;const d=(()=>{switch(o){case"danger":return{icon:"",confirmButton:"bg-red-600 hover:bg-red-700 text-white",border:"border-red-200"};case"warning":return{icon:"",confirmButton:"bg-yellow-600 hover:bg-yellow-700 text-white",border:"border-yellow-200"};case"success":return{icon:"",confirmButton:"bg-green-600 hover:bg-green-700 text-white",border:"border-green-200"};default:return{icon:"",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white",border:"border-blue-200"}}})();return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:`bg-white rounded-lg p-6 w-full max-w-md border-l-4 ${d.border}`,children:[s.jsxs("div",{className:"flex items-start mb-4",children:[s.jsx("span",{className:"text-2xl mr-3",children:d.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),s.jsx("p",{className:"text-gray-600 mt-1",children:r})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:n}),s.jsx("button",{onClick:i,className:`px-4 py-2 rounded-lg transition-colors ${d.confirmButton}`,children:a})]})]})})}function d7(){xs();const[t,e]=j.useState([]),[r,a]=j.useState([]),[n,i]=j.useState([]),[l,o]=j.useState(!0),[c,d]=j.useState(!1),[u,m]=j.useState(null);j.useState(null);const[h,x]=j.useState("overview"),[g,f]=j.useState({year:"",make:"",model:"",vin:"",licensePlate:"",color:"",mileage:"",fuelType:"",transmission:"",engineSize:"",status:"active"}),[y,p]=j.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"info"});j.useEffect(()=>{b()},[]),j.useEffect(()=>{t.length>0&&(v(),w())},[t]);const b=async()=>{try{o(!0);const V=await He.getVehicles();V.success?e(V.data.vehicles):C.error(V.message||"Failed to load vehicles")}catch(V){console.error("Error loading vehicles:",V),V instanceof Error?V.message.includes("401")||V.message.includes("Unauthorized")?C.error("Please login again to access your vehicles"):V.message.includes("500")||V.message.includes("Internal Server Error")?C.error("Server error. Please try again later."):V.message.includes("Network")||V.message.includes("fetch")?C.error("Cannot connect to server. Please check your connection."):C.error(`Failed to load vehicles: ${V.message}`):C.error("Failed to load vehicles")}finally{o(!1)}},v=()=>{const V=[];t.forEach(G=>{const M=G.mileage;M%5e3<500&&V.push({id:`oil_${G.id}`,vehicleId:G.id,type:"oil_change",title:"Oil Change Due",description:`${G.year} ${G.make} ${G.model} is due for an oil change`,dueMileage:Math.ceil(M/5e3)*5e3,priority:M%5e3<100?"urgent":"high",estimatedCost:35,isOverdue:M%5e3>1e3}),M%6e3<500&&V.push({id:`tire_${G.id}`,vehicleId:G.id,type:"tire_rotation",title:"Tire Rotation Due",description:`${G.year} ${G.make} ${G.model} needs tire rotation`,dueMileage:Math.ceil(M/6e3)*6e3,priority:M%6e3<100?"high":"medium",estimatedCost:45,isOverdue:M%6e3>1e3}),M%2e4<1e3&&V.push({id:`brake_${G.id}`,vehicleId:G.id,type:"brake_service",title:"Brake Service Due",description:`${G.year} ${G.make} ${G.model} brake inspection needed`,dueMileage:Math.ceil(M/2e4)*2e4,priority:M%2e4<500?"urgent":"high",estimatedCost:120,isOverdue:M%2e4>2e3})}),a(V)},w=()=>{const V=[];t.forEach(G=>{G.lastServiceDate&&V.push({id:`service_${G.id}_1`,vehicleId:G.id,serviceType:"Oil Change & Inspection",description:"Regular maintenance service",date:G.lastServiceDate,mileage:G.mileage-5e3,cost:85,technician:"Mike Johnson",notes:"All systems checked, vehicle in good condition"})}),i(V)},N=V=>{const{name:G,value:M}=V.target;f(z=>({...z,[G]:M}))},S=()=>{if(!g.year||!g.make||!g.model||!g.vin||!g.licensePlate||!g.color||!g.mileage)return C.error("Please fill in all required fields"),!1;if(g.vin.length!==17)return C.error("VIN must be 17 characters long"),!1;if(!u&&t.find(D=>D.vin.toUpperCase()===g.vin.toUpperCase()))return C.error("A vehicle with this VIN already exists"),!1;const V=new Date().getFullYear(),G=parseInt(g.year);return G<1900||G>V+1?(C.error(`Year must be between 1900 and ${V+1}`),!1):parseInt(g.mileage)<0?(C.error("Mileage must be a positive number"),!1):!0},k=async V=>{var G,M,z,D,X;if(V.preventDefault(),!!S())try{const F={year:parseInt(g.year),make:g.make,model:g.model,vin:g.vin.toUpperCase(),licensePlate:g.licensePlate.toUpperCase(),color:g.color,mileage:parseInt(g.mileage),status:g.status};if(u){const ie=await He.updateVehicle(u.id,F);ie.success?C.success("Vehicle updated successfully"):C.error(ie.message||"Failed to update vehicle")}else{const ie=await He.addVehicle(F);ie.success?C.success("Vehicle added successfully"):C.error(ie.message||"Failed to add vehicle")}await b(),L()}catch(F){if(console.error("Error saving vehicle:",F),((G=F.response)==null?void 0:G.status)===400){const ie=((M=F.response.data)==null?void 0:M.message)||"Invalid vehicle data";console.log("Validation error details:",F.response.data),C.error(`Validation Error: ${ie}`)}else((z=F.response)==null?void 0:z.status)===409?C.error("A vehicle with this VIN already exists"):(D=F.message)!=null&&D.includes("E11000")||(X=F.message)!=null&&X.includes("duplicate key")?C.error("A vehicle with this VIN already exists in the database"):C.error("Failed to save vehicle. Please try again.")}},P=V=>{m(V),f({year:V.year.toString(),make:V.make,model:V.model,vin:V.vin,licensePlate:V.licensePlate,color:V.color,mileage:V.mileage.toString(),fuelType:V.fuelType||"",transmission:V.transmission||"",engineSize:V.engineSize||"",status:V.status||"active"}),d(!0)},_=async V=>{p({isOpen:!0,title:"Delete Vehicle",message:"Are you sure you want to delete this vehicle? This action cannot be undone and will remove all associated data.",type:"danger",onConfirm:async()=>{try{const G=await He.deleteVehicle(V);G.success?(await b(),C.success("Vehicle deleted successfully")):C.error(G.message||"Failed to delete vehicle")}catch(G){console.error("Error deleting vehicle:",G),C.error("Failed to delete vehicle")}p(G=>({...G,isOpen:!1}))}})},L=()=>{d(!1),m(null),f({year:"",make:"",model:"",vin:"",licensePlate:"",color:"",mileage:"",fuelType:"",transmission:"",engineSize:"",status:"active"})},T=()=>{p(V=>({...V,isOpen:!1}))},U=V=>V==="active"?"text-green-600 bg-green-100":"text-red-600 bg-red-100",H=V=>{switch(V){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},W=V=>{switch(V){case"oil_change":return"";case"tire_rotation":return"";case"brake_service":return"";case"timing_belt":return"";case"air_filter":return"";case"spark_plugs":return"";default:return""}},J=V=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(V);return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Vehicles"}),s.jsx("p",{className:"text-gray-600",children:"Manage your registered vehicles and maintenance"}),r.length>0&&s.jsxs("div",{className:"mt-3 flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-amber-700 bg-amber-100 px-3 py-2 rounded-lg",children:[s.jsx("span",{className:"mr-2",children:""}),r.filter(V=>V.priority==="urgent").length," urgent maintenance items"]}),s.jsxs("div",{className:"flex items-center text-sm text-orange-700 bg-orange-100 px-3 py-2 rounded-lg",children:[s.jsx("span",{className:"mr-2",children:""}),r.length," total maintenance alerts"]})]})]}),s.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-200",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Add Vehicle"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Vehicles"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active Vehicles"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(V=>V.status==="active").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-orange-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Due for Service"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(V=>V.isOverdue).length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-purple-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Mileage"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length>0?Math.round(t.reduce((V,G)=>V+G.mileage,0)/t.length).toLocaleString():"0"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex space-x-8 px-6",children:[s.jsx("button",{onClick:()=>x("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm ${h==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),s.jsxs("button",{onClick:()=>x("maintenance"),className:`py-4 px-1 border-b-2 font-medium text-sm ${h==="maintenance"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Maintenance Alerts",r.length>0&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:r.length})]}),s.jsx("button",{onClick:()=>x("history"),className:`py-4 px-1 border-b-2 font-medium text-sm ${h==="history"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Service History"})]})}),s.jsxs("div",{className:"p-6",children:[h==="overview"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"VIN"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"License Plate"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mileage"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(V=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[V.year," ",V.make," ",V.model]}),s.jsx("div",{className:"text-sm text-gray-500",children:V.color})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:V.vin}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:V.licensePlate}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[V.mileage.toLocaleString()," mi"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:V.nextServiceDate?s.jsx("span",{className:new Date(V.nextServiceDate)<=new Date?"text-red-600 font-medium":"",children:new Date(V.nextServiceDate).toLocaleDateString()}):s.jsx("span",{className:"text-gray-400",children:"Not scheduled"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U(V.status)}`,children:V.status})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[s.jsx("button",{onClick:()=>P(V),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),s.jsx("button",{onClick:()=>_(V.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},V.id))})]}),t.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No vehicles found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't added any vehicles yet. Add your first vehicle to get started."}),s.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center space-x-2 mx-auto",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Add Your First Vehicle"})]})]})]})}),h==="maintenance"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Maintenance Alerts"}),r.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"All caught up!"}),s.jsx("p",{className:"text-gray-600",children:"No maintenance items due at this time."})]}):s.jsx("div",{className:"space-y-4",children:r.sort((V,G)=>{const M={urgent:0,high:1,medium:2,low:3};return M[V.priority]-M[G.priority]}).map(V=>{const G=t.find(M=>M.id===V.vehicleId);return s.jsx("div",{className:`border rounded-lg p-4 ${V.isOverdue?"border-red-200 bg-red-50":"border-gray-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-2xl",children:W(V.type)}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:V.title}),s.jsx("p",{className:"text-sm text-gray-600",children:V.description}),G&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Vehicle: ",G.year," ",G.make," ",G.model]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Due at: ",V.dueMileage.toLocaleString()," miles"]})]})]}),s.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H(V.priority)}`,children:V.priority}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-medium text-green-600",children:["Est. ",J(V.estimatedCost)]}),V.isOverdue&&s.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Overdue"})]})]})]})},V.id)})})]}),h==="history"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service History"}),n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No service history"}),s.jsx("p",{className:"text-gray-600",children:"Service records will appear here after your first visit."})]}):s.jsx("div",{className:"space-y-4",children:n.map(V=>{const G=t.find(M=>M.id===V.vehicleId);return s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:V.serviceType}),s.jsx("p",{className:"text-sm text-gray-600",children:V.description}),G&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Vehicle: ",G.year," ",G.make," ",G.model]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Technician: ",V.technician]}),V.notes&&s.jsxs("p",{className:"text-sm text-gray-600 mt-2 italic",children:['"',V.notes,'"']})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-green-600",children:J(V.cost)}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(V.date).toLocaleDateString()}),s.jsxs("p",{className:"text-xs text-gray-500",children:[V.mileage.toLocaleString()," mi"]})]})]})},V.id)})})]})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:u?"Edit Vehicle":"Add New Vehicle"}),s.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600",children:s.jsx("span",{className:"text-2xl",children:""})})]}),s.jsxs("form",{onSubmit:k,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year *"}),s.jsx("input",{type:"text",name:"year",value:g.year,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"2020",maxLength:4})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color *"}),s.jsx("input",{type:"text",name:"color",value:g.color,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Silver"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Make *"}),s.jsx("input",{type:"text",name:"make",value:g.make,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Toyota"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model *"}),s.jsx("input",{type:"text",name:"model",value:g.model,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Camry"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VIN (17 characters) *"}),s.jsx("input",{type:"text",name:"vin",value:g.vin,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"1HGBH41JXMN109186",maxLength:17})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Plate *"}),s.jsx("input",{type:"text",name:"licensePlate",value:g.licensePlate,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"ABC123"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mileage *"}),s.jsx("input",{type:"number",name:"mileage",value:g.mileage,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"45000",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{name:"status",value:g.status,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:u?"Update Vehicle":"Add Vehicle"})]})]})]})}),s.jsx(tm,{isOpen:y.isOpen,title:y.title,message:y.message,onConfirm:y.onConfirm,onCancel:T,type:y.type})]})}function u7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(t)}function m7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}function dy(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"},child:[]}]})(t)}function vt(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(t)}function Ud(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"},child:[]}]})(t)}function Go(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z",clipRule:"evenodd"},child:[]}]})(t)}function uy(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"},child:[]}]})(t)}function eo(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(t)}function mr(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(t)}function h7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(t)}function x7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}function Hd(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"},child:[]}]})(t)}function lt(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},child:[]}]})(t)}function Sn(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"},child:[]}]})(t)}function my(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"},child:[]}]})(t)}function Na(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"},child:[]}]})(t)}function p7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z",clipRule:"evenodd"},child:[]}]})(t)}function sm(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"},child:[]}]})(t)}function Qn(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function ts(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(t)}function Xs(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"},child:[]}]})(t)}function g7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"},child:[]}]})(t)}function hy(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z",clipRule:"evenodd"},child:[]}]})(t)}function xy(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z",clipRule:"evenodd"},child:[]}]})(t)}function O2(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},child:[]}]})(t)}function mt(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(t)}function rm(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"},child:[]}]})(t)}function F2(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(t)}function kt(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(t)}function Ut(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"},child:[]}]})(t)}function $2(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"},child:[]}]})(t)}function _t(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"},child:[]}]})(t)}function Co(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"},child:[]}]})(t)}function Lp(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"},child:[]}]})(t)}function wa(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},child:[]}]})(t)}function py(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 3a1 1 0 00-1.447-.894L8.763 6H5a3 3 0 000 6h.28l1.771 5.316A1 1 0 008 18h1a1 1 0 001-1v-4.382l6.553 3.276A1 1 0 0018 15V3z",clipRule:"evenodd"},child:[]}]})(t)}function f7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},child:[]}]})(t)}function y7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},child:[]}]})(t)}function am(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},child:[]}]})(t)}function Le(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(t)}function b7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 13a1 1 0 100 2h5a1 1 0 001-1V9a1 1 0 10-2 0v2.586l-4.293-4.293a1 1 0 00-1.414 0L8 9.586 3.707 5.293a1 1 0 00-1.414 1.414l5 5a1 1 0 001.414 0L11 9.414 14.586 13H12z",clipRule:"evenodd"},child:[]}]})(t)}function z2(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"},child:[]}]})(t)}function to(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"},child:[]},{tag:"path",attr:{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1v-5a1 1 0 00-.293-.707l-2-2A1 1 0 0015 7h-1z"},child:[]}]})(t)}function B2(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"},child:[]}]})(t)}function v7(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"},child:[]}]})(t)}function hs(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"},child:[]}]})(t)}function Or(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"},child:[]}]})(t)}function vi(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},child:[]}]})(t)}function Re(t){return re({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}const we=H1,ve=O1;function j7(){xs(),we();const[t,e]=j.useState([]),[r,a]=j.useState([]),[n,i]=j.useState([]),[l,o]=j.useState(!0),[c,d]=j.useState(!1),[u,m]=j.useState(null),[h,x]=j.useState("upcoming"),[g,f]=j.useState([]),[y,p]=j.useState({scheduledDate:"",scheduledTime:"",serviceType:"",vehicleId:"",notes:"",status:"scheduled",estimatedDuration:"60",priority:"medium",technicianId:""}),[b,v]=j.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"info"}),w=["Oil Change & Inspection","Brake Service","Tire Rotation","Tire Replacement","Battery Replacement","Air Filter Replacement","Spark Plug Replacement","Transmission Service","Coolant Flush","Power Steering Service","Suspension Service","Exhaust System Repair","Electrical System Repair","AC/Heating Service","Diagnostic Service","Custom Service"];j.useEffect(()=>{N()},[]),j.useEffect(()=>{const D=async()=>{try{const X=await He.getTechnicians();X.success?e(X.data.technicians||[]):(console.error("Failed to load technicians:",X.message),e([]))}catch(X){console.error("Error loading technicians:",X),e([])}};t.length===0&&D()},[t.length]),j.useEffect(()=>{n.length>0&&r.length>0&&S()},[n,r]);const N=async()=>{try{o(!0);const[D,X]=await Promise.all([He.getAppointments(),He.getVehicles()]);D.success?a(D.data.appointments):C.error(D.message||"Failed to load appointments"),X.success?i(X.data.vehicles):C.error(X.message||"Failed to load vehicles")}catch(D){console.error("Error loading data:",D),C.error("Failed to load appointments and vehicles")}finally{o(!1)}},S=()=>{const D=[],X=new Date;n.forEach(F=>{F.nextServiceDate&&new Date(F.nextServiceDate)<=X&&D.push({id:`service_${F.id}`,type:"service_due",title:"Service Due Soon",description:`${F.year} ${F.make} ${F.model} is due for service`,priority:"high",action:"Schedule Service",vehicleId:F.id})}),r.forEach(F=>{if(F.status==="scheduled"){const ie=new Date(`${F.scheduledDate}T${F.scheduledTime}`),ye=Math.ceil((ie.getTime()-X.getTime())/(1e3*60*60*24));ye<=2&&ye>0&&D.push({id:`confirm_${F.id}`,type:"confirmation_needed",title:"Confirm Appointment",description:`Please confirm your appointment for ${F.scheduledDate}`,priority:"medium",action:"Confirm",appointmentId:F.id})}}),f(D)},k=D=>{const{name:X,value:F}=D.target;p(ie=>({...ie,[X]:F}))},P=()=>{if(!y.scheduledDate||!y.scheduledTime||!y.serviceType||!y.vehicleId)return C.error("Please fill in all required fields"),!1;if(n.length===0)return C.error("Please add a vehicle first before scheduling an appointment"),!1;if(new Date(`${y.scheduledDate}T${y.scheduledTime}`)<=new Date)return C.error("Please select a future date and time"),!1;const F=parseInt(y.estimatedDuration);return isNaN(F)||F<15||F>480?(C.error("Duration must be between 15 and 480 minutes"),!1):!0},_=async D=>{if(D.preventDefault(),!!P())try{const X={scheduledDate:y.scheduledDate,scheduledTime:y.scheduledTime,serviceType:y.serviceType,vehicleId:y.vehicleId,notes:y.notes.trim()||void 0,status:y.status,estimatedDuration:y.estimatedDuration,priority:y.priority,technicianId:y.technicianId||void 0};if(u){const F=await He.updateAppointment(u.id,X);F.success?C.success("Appointment updated successfully"):C.error(F.message||"Failed to update appointment")}else{const F=await He.createAppointment(X);F.success?C.success("Appointment scheduled successfully"):C.error(F.message||"Failed to create appointment")}await N(),H()}catch(X){console.error("Error saving appointment:",X),C.error("Failed to save appointment")}},L=D=>{m(D),p({scheduledDate:D.scheduledDate.split("T")[0],scheduledTime:D.scheduledTime,serviceType:D.serviceType,vehicleId:D.vehicleId,notes:D.notes||"",status:D.status,estimatedDuration:D.estimatedDuration||"60",priority:"medium",technicianId:D.technician||""}),d(!0)},T=async D=>{v({isOpen:!0,title:"Cancel Appointment",message:"Are you sure you want to cancel this appointment? This action cannot be undone.",type:"warning",onConfirm:async()=>{try{const X=await He.cancelAppointment(D);X.success?(await N(),C.success("Appointment cancelled successfully")):C.error(X.message||"Failed to cancel appointment")}catch(X){console.error("Error cancelling appointment:",X),C.error("Failed to cancel appointment")}v(X=>({...X,isOpen:!1}))}})},U=async D=>{var X,F,ie;try{switch(D.type){case"service_due":p({scheduledDate:"",scheduledTime:"",serviceType:"",vehicleId:D.vehicleId,notes:`Service due for ${(X=n.find(fe=>fe.id===D.vehicleId))==null?void 0:X.year} ${(F=n.find(fe=>fe.id===D.vehicleId))==null?void 0:F.make} ${(ie=n.find(fe=>fe.id===D.vehicleId))==null?void 0:ie.model}`,status:"scheduled",estimatedDuration:"60",priority:"medium",technicianId:""}),d(!0);break;case"confirmation_needed":const ye=D.description.split("for ")[1];v({isOpen:!0,title:"Confirm Appointment",message:`Please confirm your appointment for ${ye}. This will mark your appointment as confirmed.`,type:"info",onConfirm:async()=>{try{const fe=await He.confirmAppointment(D.appointmentId);fe.success?(C.success("Appointment confirmed successfully!"),await N(),f(pe=>pe.filter(Te=>Te.id!==D.id))):C.error(fe.message||"Failed to confirm appointment")}catch(fe){console.error("Error confirming appointment:",fe),C.error("Failed to confirm appointment")}v(fe=>({...fe,isOpen:!1}))}});break;default:console.log("Unknown suggestion type:",D.type)}}catch(ye){console.error("Error handling suggestion action:",ye),C.error("Failed to process action")}},H=()=>{d(!1),m(null),p({scheduledDate:"",scheduledTime:"",serviceType:"",vehicleId:"",notes:"",status:"scheduled",estimatedDuration:"60",priority:"medium",technicianId:""})},W=()=>{v(D=>({...D,isOpen:!1}))},J=D=>{switch(D){case"scheduled":return"text-blue-600 bg-blue-100";case"in-progress":return"text-yellow-600 bg-yellow-100";case"completed":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},V=D=>{switch(D){case"scheduled":return"";case"in-progress":return"";case"completed":return"";case"cancelled":return"";default:return""}},G=r.filter(D=>{const X=new Date(`${D.scheduledDate}T${D.scheduledTime}`),F=new Date;switch(h){case"upcoming":return X>F&&D.status!=="cancelled";case"past":return X<=F||D.status==="completed";case"all":return!0;default:return!0}}),M=r.filter(D=>new Date(`${D.scheduledDate}T${D.scheduledTime}`)>new Date&&D.status!=="cancelled"),z=r.filter(D=>new Date(`${D.scheduledDate}T${D.scheduledTime}`)<=new Date||D.status==="completed");return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 border-l-4 border-green-500",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Appointments"}),s.jsx("p",{className:"text-gray-600",children:"Schedule and manage your service appointments"}),g.length>0&&s.jsx("div",{className:"mt-3 space-y-2",children:g.slice(0,2).map(D=>s.jsxs("div",{className:"flex items-center text-sm text-amber-700 bg-amber-100 px-3 py-2 rounded-lg",children:[s.jsx("span",{className:"mr-2",children:""}),D.description,s.jsx("button",{className:"ml-2 text-amber-800 underline hover:text-amber-900",onClick:()=>U(D),children:D.action})]},D.id))}),n.length===0&&s.jsxs("div",{className:"mt-3 flex items-center text-sm text-red-700 bg-red-100 px-3 py-2 rounded-lg",children:[s.jsx("span",{className:"mr-2",children:""}),"No vehicles found. Please add a vehicle first to schedule appointments."]})]}),s.jsxs("button",{onClick:()=>d(!0),disabled:n.length===0,className:`px-4 py-2 rounded-lg flex items-center space-x-2 shadow-lg transition-all duration-200 ${n.length===0?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl"}`,children:[s.jsx("span",{children:""}),s.jsx("span",{children:n.length===0?"No Vehicles Available":"Schedule Appointment"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Appointments"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(D=>D.status==="completed").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Spent"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.filter(D=>D.status==="completed"&&D.totalCost).reduce((D,X)=>D+(X.totalCost||0),0).toFixed(2)]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:[{key:"upcoming",label:"Upcoming",count:M.length},{key:"past",label:"Past",count:z.length},{key:"all",label:"All",count:r.length}].map(D=>s.jsxs("button",{onClick:()=>x(D.key),className:`py-4 px-1 border-b-2 font-medium text-sm ${h===D.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[D.label,s.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2.5 rounded-full text-xs",children:D.count})]},D.key))})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(D=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg mr-3",children:V(D.status)}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",D.id]}),s.jsx("div",{className:"text-sm text-gray-500",children:D.estimatedDuration})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(()=>{const X=n.find(F=>F.id===D.vehicleId);return X?s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[X.year," ",X.make," ",X.model]}),s.jsxs("div",{className:"text-gray-500 text-xs",children:[X.licensePlate,"  ",X.mileage.toLocaleString()," mi"]})]}):s.jsx("span",{className:"text-red-600",children:"Unknown Vehicle"})})()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.serviceType}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:new Date(D.scheduledDate).toLocaleDateString()}),s.jsx("div",{className:"text-gray-500",children:D.scheduledTime})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${J(D.status)}`,children:D.status.replace("-"," ")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.totalCost?`$${D.totalCost.toFixed(2)}`:"TBD"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[D.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>L(D),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),s.jsx("button",{onClick:()=>T(D.id),className:"text-red-600 hover:text-red-900",children:"Cancel"})]}),D.status==="completed"&&s.jsx("button",{className:"text-green-600 hover:text-green-900",children:"View Details"})]})]},D.id))})]})}),G.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:h==="upcoming"?"No upcoming appointments":"No past appointments"}),s.jsx("p",{className:"text-gray-600 mb-6",children:h==="upcoming"?n.length===0?"Add a vehicle first to schedule appointments":"Schedule your first appointment to get started":"Your completed appointments will appear here"}),h==="upcoming"&&s.jsx("div",{className:"space-y-2",children:n.length===0?s.jsx("button",{onClick:()=>window.location.href="/customer/vehicles",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Add Vehicle"}):s.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Schedule Appointment"})})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:u?"Edit Appointment":"Schedule New Appointment"}),s.jsx("button",{onClick:H,className:"text-gray-400 hover:text-gray-600",children:s.jsx("span",{className:"text-2xl",children:""})})]}),s.jsxs("form",{onSubmit:_,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(vt,{className:"w-4 h-4"}),"Date *"]}),s.jsx("input",{type:"date",name:"scheduledDate",value:y.scheduledDate,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(lt,{className:"w-4 h-4"}),"Time *"]}),s.jsx("input",{type:"time",name:"scheduledTime",value:y.scheduledTime,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(to,{className:"w-4 h-4"}),"Vehicle *"]}),s.jsxs("select",{name:"vehicleId",value:y.vehicleId,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:n.length===0,children:[s.jsx("option",{value:"",children:n.length===0?"No vehicles available":"Select a vehicle"}),n.map(D=>s.jsxs("option",{value:D.id,children:[D.year," ",D.make," ",D.model," - ",D.licensePlate," (",D.mileage.toLocaleString()," mi)"]},D.id))]}),n.length===0&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please add a vehicle first before scheduling an appointment."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(Sn,{className:"w-4 h-4"}),"Service Type *"]}),s.jsxs("select",{name:"serviceType",value:y.serviceType,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select a service"}),w.map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(hs,{className:"w-4 h-4"}),"Assign Technician"]}),s.jsxs("select",{name:"technicianId",value:y.technicianId,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select a technician (optional)"}),t.filter(D=>D.isActive).map(D=>{const X=D.id||D._id,F=D.specializations||D.specialization||[];return s.jsxs("option",{value:X,children:[D.name," - ",Array.isArray(F)?F.join(", "):F]},X)})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a technician to assign to this appointment"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(lt,{className:"w-4 h-4"}),"Duration (minutes)"]}),s.jsx("input",{type:"number",name:"estimatedDuration",min:"15",max:"480",value:y.estimatedDuration,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"60"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(hy,{className:"w-4 h-4"}),"Priority"]}),s.jsxs("select",{name:"priority",value:y.priority,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(hy,{className:"w-4 h-4"}),"Status"]}),s.jsxs("select",{name:"status",value:y.status,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[s.jsx(sm,{className:"w-4 h-4"}),"Notes (Optional)"]}),s.jsx("textarea",{name:"notes",value:y.notes,onChange:k,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Any special requests or additional information..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:u?"Update Appointment":"Schedule Appointment"})]})]})]})}),s.jsx(tm,{isOpen:b.isOpen,title:b.title,message:b.message,onConfirm:b.onConfirm,onCancel:W,type:b.type})]})}function N7(){xs();const[t,e]=j.useState([]),[r,a]=j.useState([]),[n,i]=j.useState([]),[l,o]=j.useState([]),[c,d]=j.useState(!0),[u,m]=j.useState("history"),[h,x]=j.useState("all");j.useEffect(()=>{g()},[]),j.useEffect(()=>{r.length>0&&t.length>0&&y()},[r,t]);const g=async()=>{try{d(!0);const[_,L]=await Promise.all([He.getServices(),He.getVehicles()]);_.success?e(_.data.services):C.error(_.message||"Failed to load services"),L.success?a(L.data.vehicles):C.error(L.message||"Failed to load vehicles");const T=L.success?L.data.vehicles:[],U=_.success?_.data.services:[],H=f(T,U);i(H)}catch(_){console.error("Error loading data:",_),C.error("Failed to load service data")}finally{d(!1)}},f=(_,L)=>{const T=[];return _.forEach(U=>{const W=L.filter(V=>V.vehicleId===U.id).sort((V,G)=>new Date(G.date).getTime()-new Date(V.date).getTime())[0],J={id:`oil-${U.id}`,vehicleId:U.id,vehicleInfo:`${U.year} ${U.make} ${U.model}`,serviceType:"Oil Change & Inspection",recommendedInterval:"Every 3,000 miles or 3 months",lastServiceDate:(W==null?void 0:W.date)||U.lastServiceDate||new Date().toISOString().split("T")[0],lastServiceMileage:(W==null?void 0:W.mileage)||U.lastServiceMileage||U.mileage,nextServiceDate:U.nextServiceDate||new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],nextServiceMileage:U.nextServiceMileage||U.mileage+3e3,status:U.nextServiceDate&&new Date(U.nextServiceDate)<=new Date?"overdue":"upcoming"};T.push(J)}),T},y=()=>{const _=[];r.forEach(L=>{t.filter(H=>H.vehicleId===L.id).sort((H,W)=>new Date(W.date).getTime()-new Date(H.date).getTime())[0],L.nextServiceDate&&new Date(L.nextServiceDate)<=new Date&&_.push({id:`urgent_${L.id}`,type:"urgent_service",title:"Service Overdue",description:`${L.year} ${L.make} ${L.model} is overdue for service`,priority:"urgent",estimatedCost:150,action:"Schedule Now",vehicleId:L.id});const U=new Date().getMonth();(U>=8||U<=2)&&_.push({id:`seasonal_${L.id}`,type:"seasonal_maintenance",title:"Winter Preparation",description:"Prepare your vehicle for winter conditions",priority:"medium",estimatedCost:200,action:"Learn More",vehicleId:L.id}),L.mileage>1e5&&_.push({id:`high_mileage_${L.id}`,type:"high_mileage",title:"High Mileage Service",description:"Your vehicle may need additional attention due to high mileage",priority:"high",estimatedCost:300,action:"Schedule Inspection",vehicleId:L.id})}),o(_)},p=_=>{switch(_){case"completed":return"text-green-600 bg-green-100";case"in-progress":return"text-yellow-600 bg-yellow-100";case"scheduled":return"text-blue-600 bg-blue-100";case"due":return"text-orange-600 bg-orange-100";case"upcoming":return"text-blue-600 bg-blue-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=_=>{switch(_){case"completed":return"";case"in-progress":return"";case"scheduled":return"";case"due":return"";case"upcoming":return"";case"overdue":return"";default:return""}},v=h==="all"?t:t.filter(_=>_.vehicleId===h),w=h==="all"?n:n.filter(_=>_.vehicleId===h),N=t.reduce((_,L)=>_+L.cost,0),S=t.filter(_=>_.status==="completed").length,k=n.filter(_=>_.status==="upcoming").length,P=n.filter(_=>_.status==="overdue").length;return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Service History"}),s.jsx("p",{className:"text-gray-600",children:"View your vehicle maintenance records and schedules"})]}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("select",{value:h,onChange:_=>x(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Vehicles"}),r.map(_=>s.jsxs("option",{value:_.id,children:[_.year," ",_.make," ",_.model," - ",_.licensePlate]},_.id))]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Services"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Spent"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",N.toFixed(2)]})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:[{key:"history",label:"Service History",count:v.length},{key:"schedule",label:"Maintenance Schedule",count:w.length},{key:"recommendations",label:"Recommendations",count:P}].map(_=>s.jsxs("button",{onClick:()=>m(_.key),className:`py-4 px-1 border-b-2 font-medium text-sm ${u===_.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[_.label,s.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2.5 rounded-full text-xs",children:_.count})]},_.key))})}),s.jsxs("div",{className:"p-6",children:[u==="history"&&s.jsxs("div",{className:"space-y-4",children:[v.map(_=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:b(_.status)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_.serviceType}),s.jsx("p",{className:"text-sm text-gray-600",children:(()=>{const L=r.find(T=>T.id===_.vehicleId);return L?`${L.year} ${L.make} ${L.model}`:"Unknown Vehicle"})()})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["$",_.cost.toFixed(2)]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[_.mileage.toLocaleString()," mi"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),s.jsx("p",{className:"font-medium",children:new Date(_.date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Technician"}),s.jsx("p",{className:"font-medium",children:_.technician})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Description"}),s.jsx("p",{className:"font-medium",children:_.description})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(_.status)}`,children:_.status.replace("-"," ")})]})]}),_.parts&&_.parts.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Parts Used:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:_.parts.map((L,T)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:L},T))})]}),_.notes&&s.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",_.notes]})}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[s.jsx("div",{children:_.warranty&&s.jsxs("span",{children:["Warranty: ",_.warranty]})}),s.jsx("div",{children:_.nextServiceDate&&s.jsxs("span",{children:["Next Service: ",new Date(_.nextServiceDate).toLocaleDateString()]})})]})]},_.id)),v.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No service records found"}),s.jsx("p",{className:"text-gray-600",children:"Your service history will appear here after your first service appointment."})]})]}),u==="schedule"&&s.jsxs("div",{className:"space-y-4",children:[w.map(_=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:b(_.status)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_.serviceType}),s.jsx("p",{className:"text-sm text-gray-600",children:_.vehicleInfo})]})]}),s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${p(_.status)}`,children:_.status})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Recommended Interval"}),s.jsx("p",{className:"font-medium",children:_.recommendedInterval})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Last Service"}),s.jsxs("p",{className:"font-medium",children:[new Date(_.lastServiceDate).toLocaleDateString(),s.jsxs("span",{className:"text-gray-500 ml-2",children:["(",_.lastServiceMileage.toLocaleString()," mi)"]})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Next Service"}),s.jsxs("p",{className:"font-medium",children:[new Date(_.nextServiceDate).toLocaleDateString(),s.jsxs("span",{className:"text-gray-500 ml-2",children:["(",_.nextServiceMileage.toLocaleString()," mi)"]})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),s.jsx("p",{className:"font-medium capitalize",children:_.status})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm",children:"Schedule Service"})})]},_.id)),w.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No maintenance schedule found"}),s.jsx("p",{className:"text-gray-600",children:"Your maintenance schedule will be created based on your vehicle and service history."})]})]}),u==="recommendations"&&s.jsxs("div",{className:"space-y-4",children:[P>0?s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("span",{className:"text-2xl mr-3",children:""}),s.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Maintenance Recommendations"})]}),s.jsxs("p",{className:"text-yellow-700 mb-4",children:["You have ",P," service(s) that are overdue. We recommend scheduling these services soon to maintain your vehicle's performance and safety."]}),s.jsx("button",{className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg",children:"Schedule Overdue Services"})]}):s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("span",{className:"text-2xl mr-3",children:""}),s.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"All Up to Date"})]}),s.jsx("p",{className:"text-green-700",children:"Great job! Your vehicle maintenance is current. Continue following the recommended service intervals to keep your vehicle in optimal condition."})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Service Tips"}),s.jsxs("ul",{className:"space-y-2 text-blue-700",children:[s.jsx("li",{children:" Regular oil changes help maintain engine performance and longevity"}),s.jsx("li",{children:" Brake inspections every 6 months ensure safety"}),s.jsx("li",{children:" Tire rotations every 6,000 miles promote even wear"}),s.jsx("li",{children:" Keep records of all services for warranty purposes"}),s.jsx("li",{children:" Address warning lights promptly to prevent costly repairs"})]})]})]})]})]})]})}function w7(){const[t,e]=j.useState([]),[r,a]=j.useState([]),[n,i]=j.useState(!0),[l,o]=j.useState("all"),[c,d]=j.useState(!1),[u,m]=j.useState(null),[h,x]=j.useState({paymentMethod:"credit_card",paymentReference:""});j.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const[k,P]=await Promise.all([He.getInvoices(),He.getVehicles()]);k.success?e(k.data.invoices):C.error(k.message||"Failed to load invoices"),P.success?a(P.data.vehicles):C.error(P.message||"Failed to load vehicles")}catch(k){console.error("Error loading data:",k),C.error("Failed to load invoice data")}finally{i(!1)}},f=k=>{switch(k){case"paid":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},y=async k=>{m(k),d(!0)},p=async k=>{if(k.preventDefault(),!!u)try{const P=await He.payInvoice(u.id,h);if(!P.success){C.error(P.message||"Failed to process payment");return}e(_=>_.map(L=>L.id===u.id?{...L,status:"paid",paymentDate:new Date().toISOString()}:L)),d(!1),m(null),x({paymentMethod:"credit_card",paymentReference:""}),C.success("Payment processed successfully!")}catch(P){console.error("Error processing payment:",P),C.error("Failed to process payment")}},b=async k=>{try{const P=await He.downloadInvoice(k);P.success?(C.success("Invoice download initiated"),console.log("Download URL:",P.data.downloadUrl)):C.error(P.message||"Failed to download invoice")}catch(P){console.error("Error downloading invoice:",P),C.error("Failed to download invoice")}},v=l==="all"?t:t.filter(k=>k.status===l),w=t.reduce((k,P)=>k+P.total,0),N=t.filter(k=>k.status==="paid").reduce((k,P)=>k+P.total,0),S=w-N;return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoices & Payments"}),s.jsx("p",{className:"text-gray-600",children:"Manage your invoices and track payments"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoiced"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",w.toFixed(2)]})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Paid"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",N.toFixed(2)]})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Outstanding"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",S.toFixed(2)]})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center space-x-4 mb-4",children:s.jsxs("select",{value:l,onChange:k=>o(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"overdue",children:"Overdue"})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(k=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.invoiceNumber}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Due: ",new Date(k.dueDate).toLocaleDateString()]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(()=>{const P=r.find(_=>_.id===k.vehicleId);return P?`${P.year} ${P.make} ${P.model}`:"Unknown Vehicle"})()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.serviceType}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(k.date).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",k.total.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${f(k.status)}`,children:k.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:"View"}),k.status==="pending"&&s.jsx("button",{onClick:()=>y(k),className:"text-green-600 hover:text-green-900",children:"Pay"}),s.jsx("button",{onClick:()=>b(k.id),className:"text-gray-600 hover:text-gray-900",children:"Download"})]})})]},k.id))})]})}),v.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No invoices found"}),s.jsx("p",{className:"text-gray-600",children:"Your invoices will appear here after service appointments."})]})]})}),c&&u&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Process Payment"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),s.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Invoice Details"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Invoice #",u.invoiceNumber]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Amount: $",u.total.toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",new Date(u.dueDate).toLocaleDateString()]})]}),s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),s.jsxs("select",{value:h.paymentMethod,onChange:k=>x(P=>({...P,paymentMethod:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"credit_card",children:"Credit Card"}),s.jsx("option",{value:"debit_card",children:"Debit Card"}),s.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),s.jsx("option",{value:"cash",children:"Cash"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Reference (Optional)"}),s.jsx("input",{type:"text",value:h.paymentReference,onChange:k=>x(P=>({...P,paymentReference:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Transaction ID or reference number"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Process Payment"})]})]})]})})]})}function S7(){const[t,e]=j.useState([]),[r,a]=j.useState(null),[n,i]=j.useState(!0),[l,o]=j.useState("all"),[c,d]=j.useState(!1),[u,m]=j.useState({subject:"",message:"",type:"general",priority:"medium"});j.useEffect(()=>{h()},[]);const h=async()=>{try{i(!0);const p=await He.getMessages();p.success?e(p.data.messages):C.error(p.message||"Failed to load messages")}catch(p){console.error("Error loading messages:",p),C.error("Failed to load messages")}finally{i(!1)}},x=t.filter(p=>{switch(l){case"unread":return!p.isRead;case"read":return p.isRead;default:return!0}}),g=async p=>{try{const b=await He.markMessageAsRead(p);if(!b.success){C.error(b.message||"Failed to mark message as read");return}e(v=>v.map(w=>w.id===p?{...w,isRead:!0}:w))}catch(b){console.error("Error marking message as read:",b),C.error("Failed to mark message as read")}},f=async p=>{if(p.preventDefault(),!u.subject.trim()||!u.message.trim()){C.error("Please fill in all required fields");return}try{const b=await He.sendMessage({subject:u.subject,message:u.message,type:u.type,priority:u.priority});if(b.success)e(v=>[b.data.message,...v]);else{C.error(b.message||"Failed to send message");return}m({subject:"",message:"",type:"general",priority:"medium"}),d(!1),C.success("Message sent successfully")}catch(b){console.error("Error sending message:",b),C.error("Failed to send message")}},y=async p=>{if(confirm("Are you sure you want to delete this message?"))try{const b=await He.deleteMessage(p);if(!b.success){C.error(b.message||"Failed to delete message");return}e(v=>v.filter(w=>w.id!==p)),(r==null?void 0:r.id)===p&&a(null),C.success("Message deleted successfully")}catch(b){console.error("Error deleting message:",b),C.error("Failed to delete message")}};return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Messages"}),s.jsx("p",{className:"text-gray-600",children:"View messages from our service team"})]}),s.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-300",children:"New Message"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-96",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("div",{className:"flex space-x-2",children:[{key:"all",label:"All",count:t.length},{key:"unread",label:"Unread",count:t.filter(p=>!p.isRead).length},{key:"read",label:"Read",count:t.filter(p=>p.isRead).length}].map(p=>s.jsxs("button",{onClick:()=>o(p.key),className:`px-3 py-1 text-sm rounded-lg ${l===p.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[p.label," (",p.count,")"]},p.key))})}),s.jsx("div",{className:"overflow-y-auto h-80",children:x.map(p=>s.jsxs("div",{onClick:()=>{a(p),p.isRead||g(p.id)},className:`p-4 border-b cursor-pointer hover:bg-gray-50 ${(r==null?void 0:r.id)===p.id?"bg-blue-50":""}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 truncate",children:p.subject}),!p.isRead&&s.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:"New"})]}),s.jsx("p",{className:"text-sm text-gray-600 truncate mb-1",children:p.message}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(p.date).toLocaleDateString()}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${p.type==="appointment"?"bg-blue-100 text-blue-700":p.type==="reminder"?"bg-yellow-100 text-yellow-700":p.type==="service"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:p.type})]})]},p.id))})]}),s.jsx("div",{className:"lg:col-span-2 bg-white rounded-lg shadow",children:r?s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r.subject}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r.type==="appointment"?"bg-blue-100 text-blue-700":r.type==="reminder"?"bg-yellow-100 text-yellow-700":r.type==="service"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:r.type}),s.jsx("button",{onClick:()=>y(r.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),s.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["From: ",r.from,"  ",new Date(r.date).toLocaleString()]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:r.message})})})]}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a message"}),s.jsx("p",{className:"text-gray-600",children:"Choose a message from the list to view its details."})]})})})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Send New Message"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),s.jsx("input",{type:"text",value:u.subject,onChange:p=>m(b=>({...b,subject:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter message subject",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message *"}),s.jsx("textarea",{value:u.message,onChange:p=>m(b=>({...b,message:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Enter your message",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),s.jsxs("select",{value:u.type,onChange:p=>m(b=>({...b,type:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"appointment",children:"Appointment"}),s.jsx("option",{value:"service",children:"Service"}),s.jsx("option",{value:"support",children:"Support"}),s.jsx("option",{value:"reminder",children:"Reminder"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:u.priority,onChange:p=>m(b=>({...b,priority:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Send Message"})]})]})]})})]})}function C7(){xs();const[t,e]=j.useState([]),[r,a]=j.useState(0),[n,i]=j.useState(!0),[l,o]=j.useState("all"),[c,d]=j.useState(""),[u,m]=j.useState(1),[h,x]=j.useState(1);j.useEffect(()=>{g()},[u,l,c]);const g=async()=>{var N;try{i(!0);const S=l==="all"?void 0:l,k=await He.getNotifications(u,20,c,S);k.success?(e(k.data.notifications),a(k.data.unreadCount),x(((N=k.data.pagination)==null?void 0:N.pages)||1)):C.error(k.message||"Failed to load notifications")}catch(S){console.error("Error loading notifications:",S),C.error("Failed to load notifications")}finally{i(!1)}},f=async N=>{try{const S=await He.markNotificationAsRead(N);S.success?(e(k=>k.map(P=>P.id===N?{...P,status:"read",readAt:new Date().toISOString()}:P)),a(k=>Math.max(0,k-1)),C.success("Notification marked as read")):C.error(S.message||"Failed to mark notification as read")}catch(S){console.error("Error marking notification as read:",S),C.error("Failed to mark notification as read")}},y=async()=>{try{const N=await He.markAllNotificationsAsRead();N.success?(e(S=>S.map(k=>({...k,status:"read"}))),a(0),C.success("All notifications marked as read")):C.error(N.message||"Failed to mark all notifications as read")}catch(N){console.error("Error marking all notifications as read:",N),C.error("Failed to mark all notifications as read")}},p=N=>{switch(N){case"service_reminder":return"";case"appointment_reminder":return"";case"appointment_confirmation":return"";case"payment_reminder":return"";case"maintenance_alert":return"";case"warranty_expiry":return"";case"follow_up":return"";case"marketing":return"";default:return""}},b=N=>{switch(N){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=N=>{switch(N){case"service_reminder":return"Service Reminder";case"appointment_reminder":return"Appointment Reminder";case"appointment_confirmation":return"Appointment Confirmation";case"payment_reminder":return"Payment Reminder";case"maintenance_alert":return"Maintenance Alert";case"warranty_expiry":return"Warranty Expiry";case"follow_up":return"Follow-up";case"marketing":return"Marketing";default:return"General"}},w=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((N,S)=>s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},S))})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Stay updated with your vehicle maintenance, appointments, and important updates"})]}),r>0&&s.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Mark All as Read"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("span",{className:"text-blue-600 text-xl",children:""})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx("span",{className:"text-red-600 text-xl",children:""})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unread"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("span",{className:"text-green-600 text-xl",children:""})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Read"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length-r})]})]})})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:l,onChange:N=>o(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Notifications"}),s.jsx("option",{value:"unread",children:"Unread Only"}),s.jsx("option",{value:"read",children:"Read Only"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),s.jsxs("select",{value:c,onChange:N=>d(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"service_reminder",children:"Service Reminders"}),s.jsx("option",{value:"appointment_reminder",children:"Appointment Reminders"}),s.jsx("option",{value:"payment_reminder",children:"Payment Reminders"}),s.jsx("option",{value:"maintenance_alert",children:"Maintenance Alerts"}),s.jsx("option",{value:"follow_up",children:"Follow-ups"}),s.jsx("option",{value:"marketing",children:"Marketing"})]})]})]})})]}),s.jsx("div",{className:"space-y-4",children:t.length===0?s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-gray-600",children:l==="all"?"You're all caught up! No notifications at the moment.":`No ${l} notifications found.`})]}):t.map(N=>{var S,k;return s.jsx("div",{className:`bg-white p-6 rounded-lg shadow border-l-4 ${N.status==="read"?"border-gray-200":"border-blue-500"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[s.jsx("div",{className:"text-2xl",children:p(N.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.title}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${b(N.priority)}`,children:N.priority}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:v(N.type)})]}),s.jsx("p",{className:"text-gray-700 mb-3",children:N.message}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.jsxs("span",{children:[" ",w(N.createdAt)]}),s.jsxs("span",{children:[" ",N.channel]}),((S=N.metadata)==null?void 0:S.serviceType)&&s.jsxs("span",{children:[" ",N.metadata.serviceType]}),((k=N.metadata)==null?void 0:k.mileage)&&s.jsxs("span",{children:[" ",N.metadata.mileage.toLocaleString()," miles"]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[N.status!=="read"&&s.jsx("button",{onClick:()=>f(N.id),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Mark Read"}),N.status==="read"&&s.jsx("span",{className:"text-sm text-gray-500",children:" Read"})]})]})},N.id)})}),h>1&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("nav",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>m(N=>Math.max(1,N-1)),disabled:u===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsxs("span",{className:"px-3 py-2 text-sm text-gray-700",children:["Page ",u," of ",h]}),s.jsx("button",{onClick:()=>m(N=>Math.min(h,N+1)),disabled:u===h,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})})}function k7(){const[t,e]=j.useState(null),[r,a]=j.useState(!0),[n,i]=j.useState(!1),[l,o]=j.useState("profile"),[c,d]=j.useState(!1),[u,m]=j.useState({name:"",email:"",phone:"",businessName:"",street:"",city:"",state:"",zipCode:""}),[h,x]=j.useState({notifications:{email:!0,sms:!0,push:!1},reminders:{appointments:!0,maintenance:!0,payments:!0},privacy:{shareData:!1,marketing:!1}});j.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0);const S=await He.getProfile();if(S.success){const k=S.data.profile;e(k),m({name:k.name,email:k.email,phone:k.phone,businessName:k.businessName||"",street:k.address.street,city:k.address.city,state:k.address.state,zipCode:k.address.zipCode}),x(k.preferences)}else C.error(S.message||"Failed to load profile data")}catch(S){console.error("Error loading profile:",S),C.error("Failed to load profile data")}finally{a(!1)}},f=S=>{const{name:k,value:P}=S.target;m(_=>({..._,[k]:P}))},y=(S,k,P)=>{x(_=>({..._,[S]:{..._[S],[k]:P}}))},p=async()=>{try{const S={name:u.name,email:u.email,phone:u.phone,businessName:u.businessName,address:{street:u.street,city:u.city,state:u.state,zipCode:u.zipCode}},k=await He.updateProfile(S);k.success?(await g(),C.success("Profile updated successfully!"),i(!1)):C.error(k.message||"Failed to update profile")}catch(S){console.error("Error updating profile:",S),C.error("Failed to update profile")}},b=async()=>{try{const S=await He.updateProfile({preferences:h});S.success?C.success("Preferences updated successfully!"):C.error(S.message||"Failed to update preferences")}catch(S){console.error("Error updating preferences:",S),C.error("Failed to update preferences")}},v=()=>{C.success("Password change email sent!")},w=()=>{d(!0)},N=()=>{C.success("Account deletion request submitted"),d(!1)};return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile & Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage your account and preferences"})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:s.jsx("nav",{className:"space-y-2",children:[{key:"profile",label:"Profile",icon:""},{key:"preferences",label:"Preferences",icon:""},{key:"security",label:"Security",icon:""}].map(S=>s.jsxs("button",{onClick:()=>o(S.key),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left ${l===S.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx("span",{className:"text-lg",children:S.icon}),s.jsx("span",{className:"font-medium",children:S.label})]},S.key))})})}),s.jsx("div",{className:"lg:col-span-3",children:s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l==="profile"&&s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profile Information"}),s.jsx("button",{onClick:()=>i(!n),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:n?"Cancel":"Edit Profile"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",name:"name",value:u.name,onChange:f,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",name:"email",value:u.email,onChange:f,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:f,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name (Optional)"}),s.jsx("input",{type:"text",name:"businessName",value:u.businessName,onChange:f,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),s.jsx("input",{type:"text",name:"street",value:u.street,onChange:f,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),s.jsx("input",{type:"text",name:"city",value:u.city,onChange:f,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),s.jsx("input",{type:"text",name:"state",value:u.state,onChange:f,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),s.jsx("input",{type:"text",name:"zipCode",value:u.zipCode,onChange:f,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]})]})]}),n&&s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]}),l==="preferences"&&s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Preferences"}),s.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Preferences"})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notifications"}),s.jsx("div",{className:"space-y-4",children:Object.entries(h.notifications).map(([S,k])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[S," Notifications"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Receive notifications via ",S]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:P=>y("notifications",S,P.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},S))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reminders"}),s.jsx("div",{className:"space-y-4",children:Object.entries(h.reminders).map(([S,k])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[S," Reminders"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Get reminded about upcoming ",S]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:P=>y("reminders",S,P.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},S))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Privacy"}),s.jsx("div",{className:"space-y-4",children:Object.entries(h.privacy).map(([S,k])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 capitalize",children:S==="shareData"?"Share Data":"Marketing Communications"}),s.jsx("p",{className:"text-sm text-gray-600",children:S==="shareData"?"Allow us to use your data for service improvements":"Receive marketing and promotional communications"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:P=>y("privacy",S,P.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},S))})]})]})]}),l==="security"&&s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Security Settings"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Change Password"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Update your account password"})]}),s.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change Password"})]})}),s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),s.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Enable 2FA"})]})}),s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Account Activity"}),s.jsx("p",{className:"text-sm text-gray-600",children:"View your recent login activity"})]}),s.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"View Activity"})]})}),s.jsx("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-red-900",children:"Delete Account"}),s.jsx("p",{className:"text-sm text-red-600",children:"Permanently delete your account and all data"})]}),s.jsx("button",{onClick:w,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete Account"})]})})]})]})]})})]}),s.jsx(tm,{isOpen:c,title:"Delete Account",message:"Are you sure you want to delete your account? This action cannot be undone.",confirmText:"Delete Account",cancelText:"Cancel",onConfirm:N,onCancel:()=>d(!1),type:"danger"})]})}function Bs(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(n){return"'"+n+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Sa(t){return!!t&&!!t[Ge]}function Fr(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===R7}(t)||Array.isArray(t)||!!t[Ny]||!!(!((e=t.constructor)===null||e===void 0)&&e[Ny])||Op(t)||Fp(t))}function Cn(t,e,r){r===void 0&&(r=!1),Di(t)===0?(r?Object.keys:ni)(t).forEach(function(a){r&&typeof a=="symbol"||e(a,t[a],t)}):t.forEach(function(a,n){return e(n,a,t)})}function Di(t){var e=t[Ge];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Op(t)?2:Fp(t)?3:0}function ai(t,e){return Di(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function _7(t,e){return Di(t)===2?t.get(e):t[e]}function V2(t,e,r){var a=Di(t);a===2?t.set(e,r):a===3?t.add(r):t[e]=r}function U2(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Op(t){return E7&&t instanceof Map}function Fp(t){return I7&&t instanceof Set}function Va(t){return t.o||t.t}function $p(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=W2(t);delete e[Ge];for(var r=ni(e),a=0;a<r.length;a++){var n=r[a],i=e[n];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[n]})}return Object.create(Object.getPrototypeOf(t),e)}function zp(t,e){return e===void 0&&(e=!1),Bp(t)||Sa(t)||!Fr(t)||(Di(t)>1&&(t.set=t.add=t.clear=t.delete=P7),Object.freeze(t),e&&Cn(t,function(r,a){return zp(a,!0)},!0)),t}function P7(){Bs(2)}function Bp(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function hr(t){var e=ax[t];return e||Bs(18,t),e}function T7(t,e){ax[t]||(ax[t]=e)}function tx(){return so}function qm(t,e){e&&(hr("Patches"),t.u=[],t.s=[],t.v=e)}function Wd(t){sx(t),t.p.forEach(A7),t.p=null}function sx(t){t===so&&(so=t.l)}function gy(t){return so={p:[],l:so,h:t,m:!0,_:0}}function A7(t){var e=t[Ge];e.i===0||e.i===1?e.j():e.g=!0}function Ym(t,e){e._=e.p.length;var r=e.p[0],a=t!==void 0&&t!==r;return e.h.O||hr("ES5").S(e,t,a),a?(r[Ge].P&&(Wd(e),Bs(4)),Fr(t)&&(t=qd(e,t),e.l||Yd(e,t)),e.u&&hr("Patches").M(r[Ge].t,t,e.u,e.s)):t=qd(e,r,[]),Wd(e),e.u&&e.v(e.u,e.s),t!==H2?t:void 0}function qd(t,e,r){if(Bp(e))return e;var a=e[Ge];if(!a)return Cn(e,function(o,c){return fy(t,a,e,o,c,r)},!0),e;if(a.A!==t)return e;if(!a.P)return Yd(t,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=$p(a.k):a.o,i=n,l=!1;a.i===3&&(i=new Set(n),n.clear(),l=!0),Cn(i,function(o,c){return fy(t,a,n,o,c,r,l)}),Yd(t,n,!1),r&&t.u&&hr("Patches").N(a,r,t.u,t.s)}return a.o}function fy(t,e,r,a,n,i,l){if(Sa(n)){var o=qd(t,n,i&&e&&e.i!==3&&!ai(e.R,a)?i.concat(a):void 0);if(V2(r,a,o),!Sa(o))return;t.m=!1}else l&&r.add(n);if(Fr(n)&&!Bp(n)){if(!t.h.D&&t._<1)return;qd(t,n),e&&e.A.l||Yd(t,n)}}function Yd(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&zp(e,r)}function Km(t,e){var r=t[Ge];return(r?Va(r):t)[e]}function yy(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var a=Object.getOwnPropertyDescriptor(r,e);if(a)return a;r=Object.getPrototypeOf(r)}}function Qr(t){t.P||(t.P=!0,t.l&&Qr(t.l))}function Xm(t){t.o||(t.o=$p(t.t))}function rx(t,e,r){var a=Op(e)?hr("MapSet").F(e,r):Fp(e)?hr("MapSet").T(e,r):t.O?function(n,i){var l=Array.isArray(n),o={i:l?1:0,A:i?i.A:tx(),P:!1,I:!1,R:{},l:i,t:n,k:null,o:null,j:null,C:!1},c=o,d=ro;l&&(c=[o],d=Ji);var u=Proxy.revocable(c,d),m=u.revoke,h=u.proxy;return o.k=h,o.j=m,h}(e,r):hr("ES5").J(e,r);return(r?r.A:tx()).p.push(a),a}function D7(t){return Sa(t)||Bs(22,t),function e(r){if(!Fr(r))return r;var a,n=r[Ge],i=Di(r);if(n){if(!n.P&&(n.i<4||!hr("ES5").K(n)))return n.t;n.I=!0,a=by(r,i),n.I=!1}else a=by(r,i);return Cn(a,function(l,o){n&&_7(n.t,l)===o||V2(a,l,e(o))}),i===3?new Set(a):a}(t)}function by(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return $p(t)}function M7(){function t(i,l){var o=n[i];return o?o.enumerable=l:n[i]=o={configurable:!0,enumerable:l,get:function(){var c=this[Ge];return ro.get(c,i)},set:function(c){var d=this[Ge];ro.set(d,i,c)}},o}function e(i){for(var l=i.length-1;l>=0;l--){var o=i[l][Ge];if(!o.P)switch(o.i){case 5:a(o)&&Qr(o);break;case 4:r(o)&&Qr(o)}}}function r(i){for(var l=i.t,o=i.k,c=ni(o),d=c.length-1;d>=0;d--){var u=c[d];if(u!==Ge){var m=l[u];if(m===void 0&&!ai(l,u))return!0;var h=o[u],x=h&&h[Ge];if(x?x.t!==m:!U2(h,m))return!0}}var g=!!l[Ge];return c.length!==ni(l).length+(g?0:1)}function a(i){var l=i.k;if(l.length!==i.t.length)return!0;var o=Object.getOwnPropertyDescriptor(l,l.length-1);if(o&&!o.get)return!0;for(var c=0;c<l.length;c++)if(!l.hasOwnProperty(c))return!0;return!1}var n={};T7("ES5",{J:function(i,l){var o=Array.isArray(i),c=function(u,m){if(u){for(var h=Array(m.length),x=0;x<m.length;x++)Object.defineProperty(h,""+x,t(x,!0));return h}var g=W2(m);delete g[Ge];for(var f=ni(g),y=0;y<f.length;y++){var p=f[y];g[p]=t(p,u||!!g[p].enumerable)}return Object.create(Object.getPrototypeOf(m),g)}(o,i),d={i:o?5:4,A:l?l.A:tx(),P:!1,I:!1,R:{},l,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,Ge,{value:d,writable:!0}),c},S:function(i,l,o){o?Sa(l)&&l[Ge].A===i&&e(i.p):(i.u&&function c(d){if(d&&typeof d=="object"){var u=d[Ge];if(u){var m=u.t,h=u.k,x=u.R,g=u.i;if(g===4)Cn(h,function(v){v!==Ge&&(m[v]!==void 0||ai(m,v)?x[v]||c(h[v]):(x[v]=!0,Qr(u)))}),Cn(m,function(v){h[v]!==void 0||ai(h,v)||(x[v]=!1,Qr(u))});else if(g===5){if(a(u)&&(Qr(u),x.length=!0),h.length<m.length)for(var f=h.length;f<m.length;f++)x[f]=!1;else for(var y=m.length;y<h.length;y++)x[y]=!0;for(var p=Math.min(h.length,m.length),b=0;b<p;b++)h.hasOwnProperty(b)||(x[b]=!0),x[b]===void 0&&c(h[b])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var vy,so,Vp=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",E7=typeof Map<"u",I7=typeof Set<"u",jy=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H2=Vp?Symbol.for("immer-nothing"):((vy={})["immer-nothing"]=!0,vy),Ny=Vp?Symbol.for("immer-draftable"):"__$immer_draftable",Ge=Vp?Symbol.for("immer-state"):"__$immer_state",R7=""+Object.prototype.constructor,ni=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,W2=Object.getOwnPropertyDescriptors||function(t){var e={};return ni(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},ax={},ro={get:function(t,e){if(e===Ge)return t;var r=Va(t);if(!ai(r,e))return function(n,i,l){var o,c=yy(i,l);return c?"value"in c?c.value:(o=c.get)===null||o===void 0?void 0:o.call(n.k):void 0}(t,r,e);var a=r[e];return t.I||!Fr(a)?a:a===Km(t.t,e)?(Xm(t),t.o[e]=rx(t.A.h,a,t)):a},has:function(t,e){return e in Va(t)},ownKeys:function(t){return Reflect.ownKeys(Va(t))},set:function(t,e,r){var a=yy(Va(t),e);if(a!=null&&a.set)return a.set.call(t.k,r),!0;if(!t.P){var n=Km(Va(t),e),i=n==null?void 0:n[Ge];if(i&&i.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(U2(r,n)&&(r!==void 0||ai(t.t,e)))return!0;Xm(t),Qr(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Km(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Xm(t),Qr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=Va(t),a=Reflect.getOwnPropertyDescriptor(r,e);return a&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:a.enumerable,value:r[e]}},defineProperty:function(){Bs(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Bs(12)}},Ji={};Cn(ro,function(t,e){Ji[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ji.deleteProperty=function(t,e){return Ji.set.call(this,t,e,void 0)},Ji.set=function(t,e,r){return ro.set.call(this,t[0],e,r,t[0])};var L7=function(){function t(r){var a=this;this.O=jy,this.D=!0,this.produce=function(n,i,l){if(typeof n=="function"&&typeof i!="function"){var o=i;i=n;var c=a;return function(f){var y=this;f===void 0&&(f=o);for(var p=arguments.length,b=Array(p>1?p-1:0),v=1;v<p;v++)b[v-1]=arguments[v];return c.produce(f,function(w){var N;return(N=i).call.apply(N,[y,w].concat(b))})}}var d;if(typeof i!="function"&&Bs(6),l!==void 0&&typeof l!="function"&&Bs(7),Fr(n)){var u=gy(a),m=rx(a,n,void 0),h=!0;try{d=i(m),h=!1}finally{h?Wd(u):sx(u)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(f){return qm(u,l),Ym(f,u)},function(f){throw Wd(u),f}):(qm(u,l),Ym(d,u))}if(!n||typeof n!="object"){if((d=i(n))===void 0&&(d=n),d===H2&&(d=void 0),a.D&&zp(d,!0),l){var x=[],g=[];hr("Patches").M(n,d,x,g),l(x,g)}return d}Bs(21,n)},this.produceWithPatches=function(n,i){if(typeof n=="function")return function(d){for(var u=arguments.length,m=Array(u>1?u-1:0),h=1;h<u;h++)m[h-1]=arguments[h];return a.produceWithPatches(d,function(x){return n.apply(void 0,[x].concat(m))})};var l,o,c=a.produce(n,i,function(d,u){l=d,o=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(d){return[d,l,o]}):[c,l,o]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Fr(r)||Bs(8),Sa(r)&&(r=D7(r));var a=gy(this),n=rx(this,r,void 0);return n[Ge].C=!0,sx(a),n},e.finishDraft=function(r,a){var n=r&&r[Ge],i=n.A;return qm(i,a),Ym(void 0,i)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!jy&&Bs(20),this.O=r},e.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var i=a[n];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}n>-1&&(a=a.slice(n+1));var l=hr("Patches").$;return Sa(r)?l(r,a):this.produce(r,function(o){return l(o,a)})},t}(),js=new L7,q2=js.produce;js.produceWithPatches.bind(js);js.setAutoFreeze.bind(js);js.setUseProxies.bind(js);js.applyPatches.bind(js);js.createDraft.bind(js);js.finishDraft.bind(js);function ao(t){"@babel/helpers - typeof";return ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(t)}function O7(t,e){if(ao(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e||"default");if(ao(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F7(t){var e=O7(t,"string");return ao(e)=="symbol"?e:e+""}function $7(t,e,r){return(e=F7(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Sy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wy(Object(r),!0).forEach(function(a){$7(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wy(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Ft(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Cy=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Qm=function(){return Math.random().toString(36).substring(7).split("").join(".")},Kd={INIT:"@@redux/INIT"+Qm(),REPLACE:"@@redux/REPLACE"+Qm(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Qm()}};function z7(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Y2(t,e,r){var a;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ft(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ft(1));return r(Y2)(t,e)}if(typeof t!="function")throw new Error(Ft(2));var n=t,i=e,l=[],o=l,c=!1;function d(){o===l&&(o=l.slice())}function u(){if(c)throw new Error(Ft(3));return i}function m(f){if(typeof f!="function")throw new Error(Ft(4));if(c)throw new Error(Ft(5));var y=!0;return d(),o.push(f),function(){if(y){if(c)throw new Error(Ft(6));y=!1,d();var b=o.indexOf(f);o.splice(b,1),l=null}}}function h(f){if(!z7(f))throw new Error(Ft(7));if(typeof f.type>"u")throw new Error(Ft(8));if(c)throw new Error(Ft(9));try{c=!0,i=n(i,f)}finally{c=!1}for(var y=l=o,p=0;p<y.length;p++){var b=y[p];b()}return f}function x(f){if(typeof f!="function")throw new Error(Ft(10));n=f,h({type:Kd.REPLACE})}function g(){var f,y=m;return f={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ft(11));function v(){b.next&&b.next(u())}v();var w=y(v);return{unsubscribe:w}}},f[Cy]=function(){return this},f}return h({type:Kd.INIT}),a={dispatch:h,subscribe:m,getState:u,replaceReducer:x},a[Cy]=g,a}function B7(t){Object.keys(t).forEach(function(e){var r=t[e],a=r(void 0,{type:Kd.INIT});if(typeof a>"u")throw new Error(Ft(12));if(typeof r(void 0,{type:Kd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ft(13))})}function V7(t){for(var e=Object.keys(t),r={},a=0;a<e.length;a++){var n=e[a];typeof t[n]=="function"&&(r[n]=t[n])}var i=Object.keys(r),l;try{B7(r)}catch(o){l=o}return function(c,d){if(c===void 0&&(c={}),l)throw l;for(var u=!1,m={},h=0;h<i.length;h++){var x=i[h],g=r[x],f=c[x],y=g(f,d);if(typeof y>"u")throw d&&d.type,new Error(Ft(14));m[x]=y,u=u||y!==f}return u=u||i.length!==Object.keys(c).length,u?m:c}}function Xd(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(a){return a}:e.length===1?e[0]:e.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function U7(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),i=function(){throw new Error(Ft(15))},l={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=e.map(function(c){return c(l)});return i=Xd.apply(void 0,o)(n.dispatch),Sy(Sy({},n),{},{dispatch:i})}}}function K2(t){var e=function(a){var n=a.dispatch,i=a.getState;return function(l){return function(o){return typeof o=="function"?o(n,i,t):l(o)}}};return e}var X2=K2();X2.withExtraArgument=K2;const ky=X2;var Q2=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),H7=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(u){return c([d,u])}}function c(d){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(u){d=[6,u],n=0}finally{a=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ji=globalThis&&globalThis.__spreadArray||function(t,e){for(var r=0,a=e.length,n=t.length;r<a;r++,n++)t[n]=e[r];return t},W7=Object.defineProperty,q7=Object.defineProperties,Y7=Object.getOwnPropertyDescriptors,_y=Object.getOwnPropertySymbols,K7=Object.prototype.hasOwnProperty,X7=Object.prototype.propertyIsEnumerable,Py=function(t,e,r){return e in t?W7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},xa=function(t,e){for(var r in e||(e={}))K7.call(e,r)&&Py(t,r,e[r]);if(_y)for(var a=0,n=_y(e);a<n.length;a++){var r=n[a];X7.call(e,r)&&Py(t,r,e[r])}return t},Gm=function(t,e){return q7(t,Y7(e))},Q7=function(t,e,r){return new Promise(function(a,n){var i=function(c){try{o(r.next(c))}catch(d){n(d)}},l=function(c){try{o(r.throw(c))}catch(d){n(d)}},o=function(c){return c.done?a(c.value):Promise.resolve(c.value).then(i,l)};o((r=r.apply(t,e)).next())})},G7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Xd:Xd.apply(null,arguments)};function J7(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function pa(t,e){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(e){var i=e.apply(void 0,a);if(!i)throw new Error("prepareAction did not return an object");return xa(xa({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:a[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(a){return a.type===t},r}var Z7=function(t){Q2(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,ji([void 0],r[0].concat(this)))):new(e.bind.apply(e,ji([void 0],r.concat(this))))},e}(Array),e_=function(t){Q2(e,t);function e(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,ji([void 0],r[0].concat(this)))):new(e.bind.apply(e,ji([void 0],r.concat(this))))},e}(Array);function nx(t){return Fr(t)?q2(t,function(){}):t}function t_(t){return typeof t=="boolean"}function s_(){return function(e){return r_(e)}}function r_(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var a=new Z7;return r&&(t_(r)?a.push(ky):a.push(ky.withExtraArgument(r.extraArgument))),a}var a_=!0;function n_(t){var e=s_(),r=t||{},a=r.reducer,n=a===void 0?void 0:a,i=r.middleware,l=i===void 0?e():i,o=r.devTools,c=o===void 0?!0:o,d=r.preloadedState,u=d===void 0?void 0:d,m=r.enhancers,h=m===void 0?void 0:m,x;if(typeof n=="function")x=n;else if(J7(n))x=V7(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=l;typeof g=="function"&&(g=g(e));var f=U7.apply(void 0,g),y=Xd;c&&(y=G7(xa({trace:!a_},typeof c=="object"&&c)));var p=new e_(f),b=p;Array.isArray(h)?b=ji([f],h):typeof h=="function"&&(b=h(p));var v=y.apply(void 0,b);return Y2(x,u,v)}function G2(t){var e={},r=[],a,n={addCase:function(i,l){var o=typeof i=="string"?i:i.type;if(!o)throw new Error("`builder.addCase` cannot be called with an empty action type");if(o in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[o]=l,n},addMatcher:function(i,l){return r.push({matcher:i,reducer:l}),n},addDefaultCase:function(i){return a=i,n}};return t(n),[e,r,a]}function i_(t){return typeof t=="function"}function l_(t,e,r,a){r===void 0&&(r=[]);var n=typeof e=="function"?G2(e):[e,r,a],i=n[0],l=n[1],o=n[2],c;if(i_(t))c=function(){return nx(t())};else{var d=nx(t);c=function(){return d}}function u(m,h){m===void 0&&(m=c());var x=ji([i[h.type]],l.filter(function(g){var f=g.matcher;return f(h)}).map(function(g){var f=g.reducer;return f}));return x.filter(function(g){return!!g}).length===0&&(x=[o]),x.reduce(function(g,f){if(f)if(Sa(g)){var y=g,p=f(y,h);return p===void 0?g:p}else{if(Fr(g))return q2(g,function(b){return f(b,h)});var p=f(g,h);if(p===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}return g},m)}return u.getInitialState=c,u}function o_(t,e){return t+"/"+e}function wt(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof t.initialState=="function"?t.initialState:nx(t.initialState),a=t.reducers||{},n=Object.keys(a),i={},l={},o={};n.forEach(function(u){var m=a[u],h=o_(e,u),x,g;"reducer"in m?(x=m.reducer,g=m.prepare):x=m,i[u]=x,l[h]=x,o[u]=g?pa(h,g):pa(h)});function c(){var u=typeof t.extraReducers=="function"?G2(t.extraReducers):[t.extraReducers],m=u[0],h=m===void 0?{}:m,x=u[1],g=x===void 0?[]:x,f=u[2],y=f===void 0?void 0:f,p=xa(xa({},h),l);return l_(r,function(b){for(var v in p)b.addCase(v,p[v]);for(var w=0,N=g;w<N.length;w++){var S=N[w];b.addMatcher(S.matcher,S.reducer)}y&&b.addDefaultCase(y)})}var d;return{name:e,reducer:function(u,m){return d||(d=c()),d(u,m)},actions:o,caseReducers:i,getInitialState:function(){return d||(d=c()),d.getInitialState()}}}var c_="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",d_=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=c_[Math.random()*64|0];return e},u_=["name","message","stack","code"],Jm=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Ty=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),m_=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,a=u_;r<a.length;r++){var n=a[r];typeof t[n]=="string"&&(e[n]=t[n])}return e}return{message:String(t)}},q=function(){function t(e,r,a){var n=pa(e+"/fulfilled",function(d,u,m,h){return{payload:d,meta:Gm(xa({},h||{}),{arg:m,requestId:u,requestStatus:"fulfilled"})}}),i=pa(e+"/pending",function(d,u,m){return{payload:void 0,meta:Gm(xa({},m||{}),{arg:u,requestId:d,requestStatus:"pending"})}}),l=pa(e+"/rejected",function(d,u,m,h,x){return{payload:h,error:(a&&a.serializeError||m_)(d||"Rejected"),meta:Gm(xa({},x||{}),{arg:m,requestId:u,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}}),o=typeof AbortController<"u"?AbortController:function(){function d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return d.prototype.abort=function(){},d}();function c(d){return function(u,m,h){var x=a!=null&&a.idGenerator?a.idGenerator(d):d_(),g=new o,f;function y(b){f=b,g.abort()}var p=function(){return Q7(this,null,function(){var b,v,w,N,S,k,P;return H7(this,function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),N=(b=a==null?void 0:a.condition)==null?void 0:b.call(a,d,{getState:m,extra:h}),x_(N)?[4,N]:[3,2];case 1:N=_.sent(),_.label=2;case 2:if(N===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(L,T){return g.signal.addEventListener("abort",function(){return T({name:"AbortError",message:f||"Aborted"})})}),u(i(x,d,(v=a==null?void 0:a.getPendingMeta)==null?void 0:v.call(a,{requestId:x,arg:d},{getState:m,extra:h}))),[4,Promise.race([S,Promise.resolve(r(d,{dispatch:u,getState:m,extra:h,requestId:x,signal:g.signal,abort:y,rejectWithValue:function(L,T){return new Jm(L,T)},fulfillWithValue:function(L,T){return new Ty(L,T)}})).then(function(L){if(L instanceof Jm)throw L;return L instanceof Ty?n(L.payload,x,d,L.meta):n(L,x,d)})])];case 3:return w=_.sent(),[3,5];case 4:return k=_.sent(),w=k instanceof Jm?l(null,x,d,k.payload,k.meta):l(k,x,d),[3,5];case 5:return P=a&&!a.dispatchConditionRejection&&l.match(w)&&w.meta.condition,P||u(w),[2,w]}})})}();return Object.assign(p,{abort:y,requestId:x,arg:d,unwrap:function(){return p.then(h_)}})}}return Object.assign(c,{pending:i,rejected:l,fulfilled:n,typePrefix:e})}return t.withTypes=function(){return t},t}();function h_(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function x_(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Up="listenerMiddleware";pa(Up+"/add");pa(Up+"/removeAll");pa(Up+"/remove");var Ay;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);M7();class p_{async getAppointments(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([n,i])=>{if(i!=null){const l=n==="technicianId"?"technician":n;r.append(l,i.toString())}}),(await A.get(`/appointments?${r.toString()}`)).data}async getAppointment(e){return(await A.get(`/appointments/${e}`)).data}async createAppointment(e){return(await A.post("/appointments",e)).data}async updateAppointment(e,r){return(await A.put(`/appointments/${e}`,r)).data}async deleteAppointment(e){return(await A.delete(`/appointments/${e}`)).data}async updateStatus(e,r){return(await A.patch(`/appointments/${e}/status`,{status:r})).data}async getStats(e,r){const a=new URLSearchParams;return e&&a.append("startDate",e),r&&a.append("endDate",r),(await A.get(`/appointments/stats/overview?${a.toString()}`)).data}async getAppointmentsByDateRange(e,r){return(await A.get(`/appointments/date-range?startDate=${e}&endDate=${r}`)).data}async getTodayAppointments(){return(await A.get("/appointments/today")).data}async getUpcomingAppointments(e=7){return(await A.get(`/appointments/upcoming?days=${e}`)).data}async confirmAppointment(e){return(await A.post(`/appointments/${e}/confirm`)).data}async cancelAppointment(e,r){return(await A.post(`/appointments/${e}/cancel`,{reason:r})).data}async markAsNoShow(e){return(await A.post(`/appointments/${e}/no-show`)).data}async assignTechnician(e,r){return(await A.post(`/appointments/${e}/assign-technician`,{technicianId:r})).data}async getAvailableTimeSlots(e,r){const a=new URLSearchParams({date:e});return r&&a.append("serviceId",r),(await A.get(`/appointments/available-slots?${a.toString()}`)).data}}const Qd=new p_,g_={data:[{id:"apt1",customerId:"1",customerName:"John Smith",vehicleId:"v1",vehicleInfo:"2020 Toyota Camry",scheduledDate:"2025-08-05",scheduledTime:"09:00",estimatedDuration:30,serviceType:"Oil Change",description:"Regular oil change and filter replacement",status:"confirmed",technicianId:"t1",technicianName:"Mike Johnson",priority:"medium",createdDate:"2025-08-01",notes:"Customer prefers synthetic oil"},{id:"apt2",customerId:"2",customerName:"Lisa Brown",vehicleId:"v2",vehicleInfo:"2019 Ford Escape",scheduledDate:"2025-08-06",scheduledTime:"14:30",estimatedDuration:45,serviceType:"Tire Rotation",description:"Rotate all four tires and check pressure",status:"scheduled",technicianId:"t2",technicianName:"Tom Wilson",priority:"low",createdDate:"2025-08-02"},{id:"apt3",customerId:"1",customerName:"John Smith",vehicleId:"v1",vehicleInfo:"2020 Toyota Camry",scheduledDate:"2025-08-07",scheduledTime:"10:00",estimatedDuration:60,serviceType:"Brake Inspection",description:"Complete brake system inspection",status:"scheduled",priority:"high",createdDate:"2025-08-03",notes:"Customer reported squeaking noise"}],loading:!1,error:null,selectedAppointment:null},J2=wt({name:"appointments",initialState:g_,reducers:{addAppointment:(t,e)=>{t.data.push(e.payload)},removeAppointment:(t,e)=>{t.data=t.data.filter(r=>r.id!==e.payload)},updateAppointment:(t,e)=>{const r=t.data.findIndex(a=>a.id===e.payload.id);r!==-1&&(t.data[r]=e.payload)},setAppointments:(t,e)=>{t.data=e.payload,t.loading=!1,t.error=null},setSelectedAppointment:(t,e)=>{t.selectedAppointment=e.payload},updateAppointmentStatus:(t,e)=>{const r=t.data.findIndex(a=>a.id===e.payload.id);r!==-1&&(t.data[r].status=e.payload.status)},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload,t.loading=!1}}}),{addAppointment:ix,removeAppointment:Dy,updateAppointment:My,setAppointments:Z2,setSelectedAppointment:CI,updateAppointmentStatus:kI,setLoading:Ey,setError:_I}=J2.actions,f_=J2.reducer,Hp=q("appointments/deleteAppointment",async(t,{dispatch:e,rejectWithValue:r})=>{var a,n;try{if(t.startsWith("apt")&&!t.match(/^[0-9a-fA-F]{24}$/))return e(Dy(t)),C.success("Appointment deleted successfully!"),t;const i=await Qd.deleteAppointment(t);return i.success?(e(Dy(t)),C.success("Appointment deleted successfully!"),t):(C.error(i.message||"Failed to delete appointment"),r(i.message||"Failed to delete appointment"))}catch(i){const l=((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to delete appointment";return C.error(l),r(l)}});function y_({appointment:t,onEdit:e,onView:r,onDelete:a}){var u;const n=we(),[i,l]=j.useState(!1);console.log("AppointmentCard rendering with appointment:",{id:t.id,customerName:t.customerName,vehicleInfo:t.vehicleInfo,serviceType:t.serviceType,scheduledDate:t.scheduledDate,scheduledTime:t.scheduledTime,status:t.status,priority:t.priority});const o=async()=>{if(window.confirm("Are you sure you want to delete this appointment? This action cannot be undone.")){l(!0);try{await n(Hp(t.id)).unwrap()}catch(m){console.error("Failed to delete appointment:",m)}finally{l(!1)}}},c=m=>{switch(m){case"confirmed":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no-show":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=m=>{switch(m){case"urgent":return"border-l-red-500";case"high":return"border-l-orange-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-green-500";default:return"border-l-gray-400"}};try{return s.jsxs("div",{className:`bg-white rounded-lg shadow-md p-4 text-sm border-l-4 ${d(t.priority||"medium")} hover:shadow-lg transition-shadow`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:t.customerName||"Unknown Customer"}),s.jsx("p",{className:"text-gray-600 text-xs",children:t.vehicleInfo||"Unknown Vehicle"})]}),s.jsxs("div",{className:"flex gap-1",children:[r&&s.jsx("button",{onClick:()=>r(t),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"View details",children:s.jsx(Xs,{className:"w-4 h-4"})}),e&&s.jsx("button",{onClick:()=>e(t),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit appointment",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:a?()=>a(t):o,disabled:i,className:"p-1 text-gray-400 hover:text-red-600 transition-colors disabled:opacity-50",title:"Delete appointment",children:s.jsx(Le,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Date & Time:"}),s.jsxs("span",{className:"font-medium",children:[t.scheduledDate||"No date"," at ",t.scheduledTime||"No time"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Service:"}),s.jsx("span",{className:"font-medium",children:typeof t.serviceType=="string"?t.serviceType:((u=t.serviceType)==null?void 0:u.name)||"Unknown Service"})]}),t.technicianName&&t.technicianName.trim()&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Technician:"}),s.jsx("span",{className:"font-medium",children:t.technicianName})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Duration:"}),s.jsxs("span",{className:"font-medium",children:[t.estimatedDuration||0," min"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(t.status||"scheduled")}`,children:(t.status||"scheduled").replace("-"," ")})]}),t.notes&&t.notes.trim()&&s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"text-gray-600 text-xs",children:"Notes:"}),s.jsx("p",{className:"text-gray-800 text-xs mt-1",children:t.notes})]})]})]})}catch(m){return console.error("Error rendering AppointmentCard:",m,t),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-sm",children:[s.jsx("div",{className:"text-red-600 font-medium mb-2",children:"Error displaying appointment"}),s.jsxs("div",{className:"text-red-500 text-xs",children:[s.jsxs("div",{children:["ID: ",t.id||"Unknown"]}),s.jsxs("div",{children:["Customer: ",t.customerName||"Unknown"]}),s.jsxs("div",{children:["Error: ",m instanceof Error?m.message:"Unknown error"]})]})]})}}function Gd({onClose:t,onSave:e,isLoading:r=!1,appointment:a,isEditing:n=!1,selectedDate:i,selectedTime:l}){const[o,c]=j.useState([]),[d,u]=j.useState([]),[m,h]=j.useState({customer:"",email:"",phone:"",businessName:"",vehicle:"",vehicleId:"",vin:"",licensePlate:"",scheduledDate:i?i.toISOString().split("T")[0]:"",scheduledTime:l||"09:00",serviceType:"",serviceTypeId:"",notes:"",priority:"medium",estimatedDuration:60,status:"scheduled",technicianId:"",technicianName:"",customerType:"new",existingCustomerId:"",date:i?i.toISOString().split("T")[0]:"",time:l||"09:00"}),[x,g]=j.useState({}),[f,y]=j.useState(!1),[p,b]=j.useState([]),[v,w]=j.useState(!1),[N,S]=j.useState(!1),[k,P]=j.useState([]),_=we(),[L,T]=j.useState([]),[U,H]=j.useState(!1),[W,J]=j.useState([]),[V,G]=j.useState([]),[M,z]=j.useState("idle"),D=j.useRef(null);j.useEffect(()=>{var R,I,Z,ee,xe,Ae;if(n&&a){console.log("Editing appointment data:",a),console.log("Appointment scheduledDate:",a.scheduledDate),console.log("Appointment scheduledTime:",a.scheduledTime),console.log("Appointment date field:",a.date),console.log("Appointment time field:",a.time);let je,Ee="",Fe="";const Kt=a.scheduledDate||a.date,Br=a.scheduledTime||a.time;if(Kt&&Br){if(Fe=Br,Fe.includes(":")){const Ze=Fe.split(":");Ze.length>=2&&(Fe=`${Ze[0].padStart(2,"0")}:${Ze[1].padStart(2,"0")}`)}Ee=Kt,Ee.includes("T")&&(Ee=Ee.split("T")[0]),je=new Date(`${Ee}T${Fe}`),isNaN(je.getTime())&&(console.warn("Invalid appointment date, using fallback:",{scheduledDate:a.scheduledDate,scheduledTime:a.scheduledTime,processedDate:Ee,processedTime:Fe,combined:`${Ee}T${Fe}`}),je=new Date,je.setDate(je.getDate()+1),je.setHours(9,0,0,0))}else console.warn("Missing appointment date/time, using fallback"),je=new Date,je.setDate(je.getDate()+1),je.setHours(9,0,0,0);if(Fe=a.scheduledTime||"09:00",Fe.includes(":")){const Ze=Fe.split(":");Ze.length>=2&&(Fe=`${Ze[0].padStart(2,"0")}:${Ze[1].padStart(2,"0")}`)}console.log("Setting form with appointment data:",{originalDate:a.scheduledDate,originalTime:a.scheduledTime,alternativeDate:a.date,alternativeTime:a.time,processedDate:Ee||je.toISOString().split("T")[0],processedTime:Fe,technicianId:a.technicianId,technicianObject:a.technician,technicianIdFromObject:(R=a.technician)==null?void 0:R._id,technicianName:a.technicianName,technicianNameFromObject:(I=a.technician)==null?void 0:I.name,appointment:a});let Xt="",Zs="";typeof a.serviceType=="object"&&a.serviceType!==null?(Xt=a.serviceType.name||"",Zs=a.serviceType._id||""):typeof a.serviceType=="string"&&(Xt=a.serviceType),console.log("Service type processing:",{original:a.serviceType,extractedName:Xt,extractedId:Zs,isObject:typeof a.serviceType=="object"}),h({customer:a.customerName,email:"",phone:"",businessName:"",vehicle:a.vehicleInfo||"",vehicleId:a.vehicleId||"",vin:((Z=a.vehicle)==null?void 0:Z.vin)||"",licensePlate:((ee=a.vehicle)==null?void 0:ee.licensePlate)||"",scheduledDate:Ee||je.toISOString().split("T")[0],scheduledTime:Fe,serviceType:Xt,serviceTypeId:Zs,notes:a.notes||"",priority:a.priority,estimatedDuration:a.estimatedDuration,status:a.status,technicianId:a.technicianId||((xe=a.technician)==null?void 0:xe._id)||a.technician||"",technicianName:a.technicianName||((Ae=a.technician)==null?void 0:Ae.name)||a.technicianName||"",customerType:"existing",existingCustomerId:a.customerId,date:Ee||je.toISOString().split("T")[0],time:Fe}),H(!0)}else{let je;if(i){je=new Date(i);const[Ee,Fe]=(l||"09:00").split(":").map(Number);je.setHours(Ee,Fe,0,0)}else je=new Date,je.setDate(je.getDate()+1),je.setHours(9,0,0,0);h(Ee=>({...Ee,scheduledDate:je.toISOString().split("T")[0],scheduledTime:l||je.toTimeString().slice(0,5)}))}},[n,a,i,l]),j.useEffect(()=>{n&&console.log("Form state updated:",{technicianId:m.technicianId,technicianName:m.technicianName,techniciansCount:L.length,serviceType:m.serviceType,serviceTypeId:m.serviceTypeId})},[m.technicianId,m.technicianName,L.length,m.serviceType,m.serviceTypeId,n]),j.useEffect(()=>{if(n&&m.serviceType&&!m.serviceTypeId&&o.length>0){const R=o.find(I=>I.name===m.serviceType);R&&(console.log("Auto-setting serviceTypeId:",R._id||R.id),h(I=>({...I,serviceTypeId:R._id||R.id||""})))}},[m.serviceType,o,n]),j.useEffect(()=>{n&&a&&a.vehicleId&&pe(a.vehicleId),n&&a&&a.customerId&&(Te(a.customerId),fe(a.customerId))},[n,a]),j.useEffect(()=>{X(),F(),ie(),ye()},[]),j.useEffect(()=>{(async()=>{try{let I=[];if(n){const[Z,ee]=await Promise.all([fetch(`${nt.CUSTOMERS}/technicians?isActive=true`,{headers:gt()}),fetch(`${nt.CUSTOMERS}/technicians?isActive=false`,{headers:gt()})]);if(Z.ok){const xe=await Z.json();xe.success&&I.push(...xe.data.technicians||[])}if(ee.ok){const xe=await ee.json();xe.success&&I.push(...xe.data.technicians||[])}}else{const Z=await fetch(`${nt.CUSTOMERS}/technicians`,{headers:gt()});if(Z.ok){const ee=await Z.json();ee.success&&(I=ee.data.technicians||[])}}console.log("Loaded technicians:",I),T(I)}catch(I){console.error("Error loading technicians:",I),T([])}})()},[n,a]);const X=async()=>{try{const R=await fetch(`${nt.APPOINTMENTS}/vehicles`,{headers:gt()});if(R.ok){const I=await R.json();I.success&&P(I.data.vehicles||[])}}catch(R){console.warn("Failed to load vehicles:",R)}},F=async()=>{try{const R=await fetch(`${nt.APPOINTMENTS}/customers?limit=100`,{headers:gt()});if(R.ok){const I=await R.json();I.success&&J(I.data.customers||[])}}catch(R){console.warn("Failed to load customers:",R)}},ie=async()=>{try{const R=await fetch(`${nt.SERVICES}/types`,{headers:gt()});if(R.ok){const I=await R.json();if(I.success&&(console.log("Loaded service types:",I.data),c(I.data||[]),n&&m.serviceType&&!m.serviceTypeId)){const Z=I.data.find(ee=>ee.name===m.serviceType);Z&&(console.log("Found matching service for ID:",Z),h(ee=>({...ee,serviceTypeId:Z._id||Z.id||""})))}}else console.error("Failed to load service types:",R.status,R.statusText)}catch(R){console.warn("Failed to load service types:",R),c([])}},ye=async()=>{try{const R=await fetch(`${nt.SERVICES}/vehicle-makes`,{headers:gt()});if(R.ok){const I=await R.json();I.success&&u(I.data||[])}}catch(R){console.warn("Failed to load vehicle makes:",R),u([])}},fe=async R=>{try{const I=await fetch(`${nt.APPOINTMENTS}/vehicles?customer=${R}`,{headers:gt()});if(I.ok){const Z=await I.json();Z.success&&G(Z.data.vehicles||[])}}catch(I){console.warn("Failed to load customer vehicles:",I),G([])}},pe=async R=>{try{const I=await fetch(`${nt.APPOINTMENTS}/vehicles?limit=1000`,{headers:gt()});if(I.ok){const ee=await I.json();if(ee.success&&ee.data.vehicles){const xe=ee.data.vehicles.find(Ae=>Ae.id===R);if(xe){h(Ae=>({...Ae,vin:xe.vin||"",licensePlate:xe.licensePlate||""}));return}}}const Z=await fetch(`${nt.APPOINTMENTS}/vehicles?search=${R}`,{headers:gt()});if(Z.ok){const ee=await Z.json();if(ee.success&&ee.data.vehicles){const xe=ee.data.vehicles.find(Ae=>Ae.id===R);xe&&h(Ae=>({...Ae,vin:xe.vin||"",licensePlate:xe.licensePlate||""}))}}}catch(I){console.warn("Failed to load vehicle details:",I)}},Te=async R=>{try{const I=await fetch(`${nt.CUSTOMERS}/${R}`,{headers:gt()});if(I.ok){const Z=await I.json();if(Z.success&&Z.data.customer){const ee=Z.data.customer;h(xe=>({...xe,email:ee.email||"",phone:ee.phone||"",businessName:ee.businessName||""}))}}}catch(I){console.warn("Failed to load customer details:",I)}};j.useEffect(()=>{const R=I=>{I.key==="Escape"&&t()};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[t]),j.useEffect(()=>{if(m.vehicle&&!U){const R=m.vehicle.toLowerCase().trim(),I=d.filter(Ee=>Ee.toLowerCase().includes(R)),Z=R.match(/\b(19|20)\d{2}\b/),ee=new Date().getFullYear();Z?parseInt(Z[0]):Array.from({length:30},(Ee,Fe)=>ee-Fe);const xe=[];Z&&xe.push(...I.map(Ee=>`${Z[0]} ${Ee}`));const Ae=Array.from({length:10},(Ee,Fe)=>ee-Fe);xe.push(...I.flatMap(Ee=>Ae.map(Fe=>`${Fe} ${Ee}`)));const je=Array.from(new Set(xe)).slice(0,15);b(je),y(je.length>0)}else y(!1)},[m.vehicle,U,d]);const Oe=R=>{const{name:I,value:Z}=R.target;if(I==="date"&&R.target.type==="datetime-local"){const[ee,xe]=Z.split("T");h(Ae=>({...Ae,scheduledDate:ee,scheduledTime:xe||"09:00"}))}else if(I==="estimatedDuration"){const ee=parseInt(Z)||0;h(xe=>({...xe,[I]:ee}))}else h(ee=>({...ee,[I]:Z}));x[I]&&g(ee=>({...ee,[I]:void 0}))},Y=()=>{const R={};if(m.customer.trim()?m.customer.trim().length<2&&(R.customer="Customer name must be at least 2 characters"):R.customer="Customer name is required",m.customerType==="new"&&(m.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email.trim())?M==="exists"?R.email='This email is already registered. Please use a different email or select "Existing Customer" instead.':M==="checking"&&(R.email="Checking email availability..."):R.email="Please enter a valid email address":R.email="Email address is required"),!m.vehicle.trim())R.vehicle="Vehicle information is required";else if(m.customerType==="new"||!U){const Z=m.vehicle.trim().split(" ").filter(ee=>ee.length>0);if(Z.length<1)R.vehicle="Please enter at least a vehicle make (e.g., Toyota, Honda)";else if(Z.length!==1){const ee=Z[0];if(ee.match(/^(19|20)\d{2}$/)){const Ae=parseInt(ee);(Ae<1900||Ae>new Date().getFullYear()+1)&&(R.vehicle=`Invalid year: ${Ae}. Please enter a year between 1900 and ${new Date().getFullYear()+1}`)}}}return m.scheduledDate?new Date(`${m.scheduledDate}T${m.scheduledTime}`)<new Date&&(R.date="Please select a future date and time"):R.date="Appointment date and time is required",m.serviceType.trim()||(R.serviceType="Service type is required"),(m.estimatedDuration<15||m.estimatedDuration>480)&&(R.estimatedDuration="Estimated duration must be between 15 and 480 minutes"),m.phone.trim()&&!/^[\+]?[1-9][\d]{0,15}$/.test(m.phone.replace(/[\s\-\(\)]/g,""))&&(R.phone="Please enter a valid phone number"),m.vin.trim()&&(m.vin.trim().length<8||m.vin.trim().length>17)&&(R.vin="VIN must be between 8 and 17 characters long"),g(R),Object.keys(R).length===0},$=async R=>{try{if(!Ve.isAuthenticated())throw new Error("Please login to create appointments");try{if(!(await fetch("http://localhost:3001/api/health")).ok)throw new Error("Backend server is not accessible")}catch{throw new Error("Backend server is not running. Please start the server with: npm run server")}let I=null,Z=null,ee="";try{if(R.customerType==="existing"&&R.existingCustomerId)I=R.existingCustomerId;else{const Ze=Ve.getCurrentUserFromStorage(),At=await fetch(`${nt.AUTH}/check-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:R.email})});if(At.ok&&(await At.json()).exists)throw new Error(`A user with email ${R.email} already exists. Please use a different email or select "Existing Customer" instead.`);ee=(()=>{const K="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let he="";for(let Pe=0;Pe<12;Pe++)he+=K.charAt(Math.floor(Math.random()*K.length));return he})();const Qt=await fetch(`${nt.AUTH}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:R.customer,email:R.email,password:ee,role:"customer",phone:R.phone||"",businessName:R.businessName||""})});if(Qt.ok){const K=await Qt.json();K.success&&(Z=K.data.user._id||K.data.user.id)}else{const K=await Qt.json().catch(()=>({}));throw K.message&&K.message.includes("already exists")?new Error(`A user with email ${R.email} already exists. Please use a different email or select "Existing Customer" instead.`):new Error(K.message||`Failed to create user account (${Qt.status})`)}const er=await fetch(`${nt.CUSTOMERS}?email=${encodeURIComponent(R.email)}`,{headers:gt()});if(!er.ok)throw new Error(`Failed to fetch customer data after user registration (${er.status})`);const O=await er.json();if(!O.success)throw new Error(O.message||"Failed to fetch customer data after user registration");if(!O.data.customers||O.data.customers.length===0)throw new Error("Customer record was not found after user registration. Please try again or contact support.");if(I=O.data.customers[0]._id||O.data.customers[0].id,!I)throw new Error("Customer ID is missing from the customer record. Please try again or contact support.")}}catch(Ze){throw console.warn("Customer creation/finding failed:",Ze),new Error("Failed to create or find customer. Please try again.")}let xe=R.vehicleId;const Ae=!xe&&(R.customerType==="new"||!U);if(Ae){if(!R.vehicle.trim())throw new Error("Vehicle information is required when creating a new vehicle");const Ze=R.vehicle.trim();let At="",Cs="",Qt=new Date().getFullYear();const er=Ze.match(/\b(19|20)\d{2}\b/);if(er){Qt=parseInt(er[0]);const K=Ze.replace(/\b(19|20)\d{2}\b/,"").trim().split(" ").filter(he=>he.length>0);K.length>=2?(At=K[0],Cs=K.slice(1).join(" ")):K.length===1&&(At=K[0],Cs="")}else{const O=Ze.split(" ").filter(K=>K.length>0);O.length>=2?(At=O[0],Cs=O.slice(1).join(" ")):O.length===1&&(At=O[0],Cs="")}if(!At.trim())throw new Error("Please enter a vehicle make (e.g., Toyota, Honda, Ford)");if(!Cs.trim())throw new Error("Please enter a vehicle model (e.g., Camry, Civic, F-150)");if(Qt<1900||Qt>new Date().getFullYear()+1)throw new Error(`Invalid vehicle year: ${Qt}. Please enter a year between 1900 and ${new Date().getFullYear()+1}`);try{console.log("Creating new vehicle for customer:",I),console.log("Vehicle data:",{year:Qt,make:At.trim(),model:Cs.trim(),vin:R.vin.trim()||"",licensePlate:R.licensePlate.trim()||"",customer:I});const O=await fetch(`${nt.APPOINTMENTS}/vehicles`,{method:"POST",headers:gt(),body:JSON.stringify({year:Qt,make:At.trim(),model:Cs.trim(),vin:R.vin.trim()||"",licensePlate:R.licensePlate.trim()||"",color:"",mileage:0,status:"active",customer:I})}),K=await O.json();if(console.log("Vehicle response status:",O.status),console.log("Vehicle response data:",K),O.ok&&K.success)xe=K.data.vehicle._id||K.data.vehicle.id,console.log("Vehicle created successfully with ID:",xe);else throw console.error("Vehicle creation failed:",{status:O.status,ok:O.ok,success:K.success,message:K.message}),K.message&&K.message.includes("already exists")?new Error("Vehicle with this VIN already exists. Please use a different VIN or leave it blank to generate one automatically."):new Error(K.message||`Failed to create vehicle (${O.status})`)}catch(O){throw console.warn("Vehicle creation failed:",O),O instanceof Error?new Error(`Vehicle creation failed: ${O.message}. Appointment creation cancelled.`):new Error("Vehicle creation failed. Appointment creation cancelled.")}}const je=R.serviceTypeId;if(!je)throw new Error("Please select a valid service type");const Ee=Ve.getCurrentUserFromStorage(),Fe=(Ee==null?void 0:Ee.id)||null;if(!I)throw new Error("Failed to create or find customer. Please try again.");if(!xe)throw new Error("Failed to create or find vehicle. Please try again.");if(!Fe)throw new Error("User authentication required. Please login again.");const Kt={vehicle:xe,serviceType:je,serviceDescription:R.serviceType,scheduledDate:R.scheduledDate,scheduledTime:R.scheduledTime,estimatedDuration:R.estimatedDuration,assignedTo:Fe,priority:R.priority,status:R.status};(!n||!(a!=null&&a.id))&&(Kt.customer=I),R.technicianId&&R.technicianId.trim()&&(Kt.technician=R.technicianId),R.notes&&R.notes.trim()&&(Kt.notes=R.notes.trim(),Kt.customerNotes=R.notes.trim()),console.log("Sending appointment data:",Kt),console.log("Service type details:",{serviceType:Kt.serviceType,serviceDescription:Kt.serviceDescription,originalServiceType:R.serviceType,originalServiceTypeId:R.serviceTypeId});const Br=n&&(a!=null&&a.id)?`${nt.APPOINTMENTS}/${a.id}`:nt.APPOINTMENTS,Xt=await fetch(Br,{method:n&&(a!=null&&a.id)?"PUT":"POST",headers:gt(),body:JSON.stringify(Kt)});if(console.log("Response status:",Xt.status),console.log("Response headers:",Xt.headers),!Xt.ok){const Ze=await Xt.json().catch(()=>({}));throw console.error("Appointment creation failed:",Ze),new Error(Ze.message||`Failed to save appointment (${Xt.status})`)}const Zs=await Xt.json();return console.log("Appointment saved successfully:",Zs),n&&(a!=null&&a.id)?C.success("Appointment updated successfully!"):Ae?C.success("Appointment saved and new vehicle created successfully!"):C.success("Appointment saved to database successfully!"),R.customerType==="new"&&C.success(`New customer account created! Password: ${ee}`,{duration:8e3,icon:""}),Zs}catch(I){throw console.error("Error saving appointment to database:",I),I instanceof Error&&I.message.includes("Vehicle creation failed")?C.error(I.message):C.error(I instanceof Error?I.message:"Failed to save appointment to database"),I}},ke=async()=>{if(!(a!=null&&a.id)){C.error("No appointment to delete");return}if(window.confirm("Are you sure you want to delete this appointment? This action cannot be undone.")){S(!0);try{await _(Hp(a.id)).unwrap(),t()}catch(R){console.error("Failed to delete appointment:",R)}finally{S(!1)}}},E=async()=>{if(console.log("Form submission - current form state:",{serviceType:m.serviceType,serviceTypeId:m.serviceTypeId,isEditing:n,appointmentId:a==null?void 0:a.id}),!!Y())try{w(!0);try{const R=await $(m),I=n&&(a!=null&&a.id)?"Appointment updated and saved to database!":"Appointment created and saved to database!";C.success(I),console.log("Saving appointment data to parent:",R.data.appointment),e(R.data.appointment)}catch(R){if(console.warn("Database save failed:",R),R instanceof Error&&R.message.includes("Vehicle creation failed")){console.log("Vehicle creation failed - appointment creation cancelled");return}if(R instanceof Error&&R.message.includes("login")){C.error("Please login to save appointments to the database"),setTimeout(()=>{window.location.href="/admin/login"},2e3);return}else if(R instanceof Error&&R.message.includes("Backend server")){C.error("Backend server is not running. Please start the server and try again.");return}else C.error("Database unavailable. Appointment saved locally."),e(m)}}catch(R){console.error("Error in handleSubmit:",R),C.error("Failed to create appointment. Please try again.")}finally{w(!1)}},ue=R=>{var I;h(Z=>({...Z,vehicle:R})),y(!1),(I=D.current)==null||I.focus()},B=R=>{h(I=>({...I,customer:R.name,email:R.email,phone:R.phone||"",existingCustomerId:R.id,customerType:"existing"})),fe(R.id)},ne=R=>{const I=R.replace(/\D/g,"");return I.length<=3?I:I.length<=6?`(${I.slice(0,3)}) ${I.slice(3)}`:`(${I.slice(0,3)}) ${I.slice(3,6)}-${I.slice(6,10)}`},te=R=>{const I=ne(R.target.value);h(Z=>({...Z,phone:I})),x.phone&&g(Z=>({...Z,phone:void 0}))},ce=async R=>{if(!R||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R)){z("idle");return}z("checking");try{const I=await fetch(`${nt.AUTH}/check-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:R})});if(I.ok){const Z=await I.json();z(Z.exists?"exists":"available")}else z("idle")}catch(I){console.warn("Email check failed:",I),z("idle")}};return j.useEffect(()=>{if(m.customerType==="new"&&m.email){const R=setTimeout(()=>{ce(m.email)},500);return()=>clearTimeout(R)}else z("idle")},[m.email,m.customerType]),s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",onClick:t,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n?"Edit Appointment":"New Appointment"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n?"Update appointment details":"Schedule a new appointment for a customer"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Customer Information"}),s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"customerType",checked:m.customerType==="new",onChange:()=>{h(R=>({...R,customerType:"new",existingCustomerId:"",customer:"",email:"",phone:""})),H(!1),G([])},className:"mr-2"}),s.jsx("span",{className:"font-medium",children:"New Customer"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"customerType",checked:m.customerType==="existing",onChange:()=>{h(R=>({...R,customerType:"existing",customer:"",email:"",phone:""})),H(!1),G([])},className:"mr-2"}),s.jsx("span",{className:"font-medium",children:"Existing Customer"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:m.customerType==="existing"?"Select Customer *":"Customer Name *"}),m.customerType==="existing"?s.jsxs("select",{name:"customer",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.customer?"border-red-500":"border-gray-300"}`,onChange:R=>{const I=W.find(Z=>Z.id===R.target.value);I&&B(I)},value:m.existingCustomerId||"",disabled:r||v,children:[s.jsx("option",{value:"",children:"Select a customer"}),W.map(R=>s.jsxs("option",{value:R.id,children:[R.name," - ",R.email]},R.id))]}):s.jsx("input",{name:"customer",placeholder:"Enter customer name",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.customer?"border-red-500":"border-gray-300"}`,onChange:Oe,value:m.customer,disabled:r||v,required:!0}),x.customer&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.customer})]}),m.customerType==="new"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{name:"email",type:"email",placeholder:"customer@example.com",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.email?"border-red-500":M==="available"?"border-green-500":M==="exists"?"border-red-500":M==="checking"?"border-yellow-500":"border-gray-300"}`,onChange:Oe,value:m.email,disabled:r||v,required:!0}),M==="checking"&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})}),M==="available"&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsx("svg",{className:"h-4 w-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),M==="exists"&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsx("svg",{className:"h-4 w-4 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.email}),M==="available"&&!x.email&&s.jsx("p",{className:"text-green-600 text-sm mt-1",children:" Email is available"}),M==="exists"&&!x.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:" This email is already registered"})]}),m.customerType==="new"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name (Optional)"}),s.jsx("input",{name:"businessName",placeholder:"Company or business name",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onChange:Oe,value:m.businessName,disabled:r||v})]}),m.customerType==="new"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsx("input",{name:"phone",placeholder:"(555) 123-4567",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.phone?"border-red-500":"border-gray-300"}`,onChange:te,value:m.phone,disabled:r||v,maxLength:14,required:!0}),x.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.phone})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Vehicle Information"}),s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"vehicleType",checked:!U,onChange:()=>H(!1),className:"mr-2",disabled:m.customerType==="new"}),s.jsx("span",{className:`font-medium ${m.customerType==="new"?"text-gray-400":""}`,children:"New Vehicle"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"vehicleType",checked:U,onChange:()=>H(!0),className:"mr-2",disabled:m.customerType==="new"}),s.jsx("span",{className:`font-medium ${m.customerType==="new"?"text-gray-400":""}`,children:"Existing Vehicle"})]})]}),m.customerType==="new"&&s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:'New customers must have new vehicles. Select "Existing Customer" to use existing vehicles.'}),U?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Vehicle *"}),s.jsxs("select",{name:"vehicleId",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.vehicle?"border-red-500":"border-gray-300"}`,onChange:R=>{const I=V.find(Z=>Z.id===R.target.value);h(I?Z=>({...Z,vehicleId:I.id,vehicle:`${I.year} ${I.make} ${I.model}`,vin:I.vin,licensePlate:I.licensePlate}):Z=>({...Z,vehicleId:"",vehicle:"",vin:"",licensePlate:""}))},value:m.vehicleId,disabled:r||v||!m.existingCustomerId,children:[s.jsx("option",{value:"",children:m.existingCustomerId?"Select a vehicle":"Please select a customer first"}),V.map(R=>s.jsxs("option",{value:R.id,children:[R.year," ",R.make," ",R.model," - ",R.licensePlate]},R.id))]}),!m.existingCustomerId&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Please select a customer to see their vehicles."}),m.existingCustomerId&&V.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This customer has no vehicles. Please add a vehicle first."})]}):s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Description *"}),s.jsx("input",{ref:D,name:"vehicle",placeholder:"e.g., Toyota Camry 2020, 2020 Honda Civic, Ford F-150, BMW X5",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.vehicle?"border-red-500":"border-gray-300"}`,onChange:Oe,value:m.vehicle,disabled:r||v}),x.vehicle&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.vehicle}),f&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:p.map((R,I)=>s.jsx("button",{className:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>ue(R),children:R},I))})]}),!U&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VIN Number (Optional)"}),s.jsx("input",{name:"vin",placeholder:"8-17 character VIN (e.g., 1HGBH41JXMN109186)",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onChange:Oe,value:m.vin,disabled:r||v,maxLength:17}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vehicle Identification Number - found on dashboard, door jamb, or registration. Must be 8-17 characters. Leave blank to generate automatically if you don't have the VIN."}),x.vin&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.vin})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Plate (Optional)"}),s.jsx("input",{name:"licensePlate",placeholder:"e.g., ABC123, XYZ-789",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onChange:Oe,value:m.licensePlate,disabled:r||v,maxLength:10})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment Date & Time *"}),s.jsx("input",{type:"datetime-local",name:"date",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.date?"border-red-500":"border-gray-300"}`,onChange:Oe,value:`${m.scheduledDate}T${m.scheduledTime}`,min:new Date().toISOString().slice(0,16),disabled:r||v,required:!0}),n&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Debug: Date=",m.scheduledDate,", Time=",m.scheduledTime,", Combined=",`${m.scheduledDate}T${m.scheduledTime}`]}),x.date&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.date})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Type *"}),s.jsxs("select",{name:"serviceType",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.serviceType?"border-red-500":"border-gray-300"}`,onChange:R=>{const I=o.find(Z=>Z.name===R.target.value);console.log("Service type selected:",{value:R.target.value,selectedService:I,serviceTypeId:(I==null?void 0:I._id)||(I==null?void 0:I.id)||"",estimatedDuration:(I==null?void 0:I.estimatedDuration)||60}),h(Z=>({...Z,serviceType:R.target.value,serviceTypeId:(I==null?void 0:I._id)||(I==null?void 0:I.id)||"",estimatedDuration:(I==null?void 0:I.estimatedDuration)||60})),x.serviceType&&g(Z=>({...Z,serviceType:void 0}))},value:m.serviceType,disabled:r||v,required:!0,children:[s.jsx("option",{value:"",children:"Select a service type"}),o.length>0?o.map(R=>s.jsxs("option",{value:R.name,children:[R.name," - ",R.category]},R._id||R.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading service types..."})]}),x.serviceType&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.serviceType})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign Technician"}),s.jsxs("select",{name:"technicianId",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onChange:R=>{const I=L.find(Z=>Z._id===R.target.value);h(Z=>({...Z,technicianId:R.target.value,technicianName:(I==null?void 0:I.name)||""}))},value:m.technicianId,disabled:r||v,children:[n&&s.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:['Debug: form.technicianId = "',m.technicianId,'", technicians count = ',L.length,s.jsx("br",{}),"Available technician IDs: ",L.map(R=>R._id).join(", "),s.jsx("br",{}),"Match found: ",L.find(R=>R._id===m.technicianId)?"YES":"NO"]}),s.jsx("option",{value:"",children:"Select a technician (optional)"}),L.map(R=>{const I=R.specializations||[],Z=R.isActive?"":" (Inactive)";return s.jsxs("option",{value:R._id,children:[R.name,Z," - ",Array.isArray(I)?I.join(", "):I]},R._id)})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a technician to assign to this appointment"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority *"}),s.jsxs("select",{name:"priority",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onChange:Oe,value:m.priority,disabled:r||v,children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Duration (minutes) *"}),s.jsx("input",{type:"number",name:"estimatedDuration",min:"15",max:"480",placeholder:"60",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ${x.estimatedDuration?"border-red-500":"border-gray-300"}`,onChange:Oe,value:m.estimatedDuration,disabled:r||v}),x.estimatedDuration&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.estimatedDuration}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Duration between 15 minutes and 8 hours"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),s.jsxs("select",{name:"status",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onChange:Oe,value:m.status,disabled:r||v,children:[s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),s.jsx("textarea",{name:"notes",placeholder:"Any special instructions or notes",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",rows:3,onChange:Oe,value:m.notes,disabled:r||v})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[n&&s.jsx("button",{onClick:ke,disabled:r||v||N,className:"px-6 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Deleting...":"Delete Appointment"}),s.jsxs("div",{className:"flex gap-3 ml-auto",children:[s.jsx("button",{onClick:t,disabled:r||v||N,className:"px-6 py-2.5 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),s.jsx("button",{onClick:E,disabled:r||v||N,className:"px-6 py-2.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r||v?n?"Updating...":"Saving to Database...":n?"Update Appointment":"Create Appointment"})]})]})})]})})}function b_({appointments:t}){const e=we(),[r,a]=j.useState(new Date),[n,i]=j.useState("month"),[l,o]=j.useState(null),[c,d]=j.useState("09:00"),[u,m]=j.useState(!1),[h,x]=j.useState(!1),[g,f]=j.useState(null),[y,p]=j.useState(!1),[b,v]=j.useState(null),[w,N]=j.useState(!1),[S,k]=j.useState(null),P=j.useRef(null),_=ve(B=>B.appointments.data),L=t||_,T=async()=>{var B,ne,te;try{const ce=await Qd.getAppointments();if(ce.success){if(!ce.data.appointments||ce.data.appointments.length===0)return;const R=ce.data.appointments.map(I=>{const Z=I.customer||{_id:"",name:"Unknown Customer"},ee=I.vehicle||{make:"",model:"",year:"",vin:"",licensePlate:"",mileage:0},xe=I.technician||{_id:"",name:""},Ae=I.scheduledDate?new Date(I.scheduledDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];return{id:I._id||`apt-${Date.now()}`,customerId:Z._id||"",customerName:Z.name||"Unknown Customer",vehicleId:ee._id||ee.vin||"",vehicleInfo:ee.fullName||(ee.year&&ee.make&&ee.model?`${ee.year} ${ee.make} ${ee.model}`:"Vehicle info unavailable"),scheduledDate:Ae,scheduledTime:I.scheduledTime||"09:00",estimatedDuration:I.estimatedDuration||60,serviceType:I.serviceType||"General Service",description:I.serviceDescription||I.serviceType||"General Service",status:I.status||"scheduled",technicianId:xe._id||void 0,technicianName:xe.name||void 0,priority:I.priority||"medium",createdDate:I.createdAt?new Date(I.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],notes:I.notes||"",vehicle:{id:ee._id||ee.vin||"",year:ee.year?parseInt(ee.year.toString()):0,make:ee.make||"",model:ee.model||"",vin:ee.vin||"",licensePlate:ee.licensePlate||"",mileage:ee.mileage||0}}});e(Z2(R))}else C.error("Failed to load appointments")}catch(ce){console.error("Error loading appointments:",ce),((B=ce.response)==null?void 0:B.status)===401?C.error("Please log in to view appointments. Using local data."):((ne=ce.response)==null?void 0:ne.status)===403?C.error("You do not have permission to view appointments. Using local data."):ce.code==="NETWORK_ERROR"||(te=ce.message)!=null&&te.includes("fetch")?C.error("Cannot connect to server. Using local data."):C.error("Error loading appointments. Using local data.")}};j.useEffect(()=>{T()},[e]);const U=B=>{const ne=new Date(r);n==="month"?ne.setMonth(r.getMonth()+(B==="next"?1:-1)):n==="week"?ne.setDate(r.getDate()+(B==="next"?7:-7)):ne.setDate(r.getDate()+(B==="next"?1:-1)),a(ne)},H=B=>{const ne=B.toISOString().split("T")[0];return L.filter(ce=>ce.scheduledDate&&ce.scheduledDate===ne)},W=j.useMemo(()=>{const B=r.getFullYear(),ne=r.getMonth(),te=new Date(B,ne,1),ce=new Date(B,ne+1,0),R=new Date(te),I=new Date(ce);R.setDate(R.getDate()-R.getDay()),I.setDate(I.getDate()+(6-I.getDay()));const Z=[],ee=new Date(R);for(;ee<=I;)Z.push({date:new Date(ee),isCurrentMonth:ee.getMonth()===ne,isToday:ee.toDateString()===new Date().toDateString(),appointments:H(ee)}),ee.setDate(ee.getDate()+1);return Z},[r,L]),J=j.useMemo(()=>{const B=new Date(r);B.setDate(r.getDate()-r.getDay());const ne=[];for(let te=0;te<7;te++){const ce=new Date(B);ce.setDate(B.getDate()+te),ne.push({date:ce,isToday:ce.toDateString()===new Date().toDateString(),appointments:H(ce)})}return ne},[r,L]),V=B=>{switch(B){case"confirmed":return"bg-green-500";case"scheduled":return"bg-blue-500";case"in-progress":return"bg-yellow-500";case"completed":return"bg-gray-500";case"cancelled":return"bg-red-500";case"no-show":return"bg-red-400";default:return"bg-gray-400"}},G=B=>{switch(B){case"urgent":return"border-l-red-600";case"high":return"border-l-orange-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-green-500";default:return"border-l-gray-400"}},M=B=>{if(!B)return"--:-- --";const[ne,te]=B.split(":"),ce=parseInt(ne),R=ce>=12?"PM":"AM";return`${ce%12||12}:${te} ${R}`},z=B=>typeof B=="string"?B:B&&typeof B=="object"&&B.name?B.name:"Unknown Service",D=B=>{f(B),x(!0)},X=async(B,ne)=>{if(ne.stopPropagation(),window.confirm("Are you sure you want to delete this appointment? This action cannot be undone."))try{await e(Hp(B.id)).unwrap(),await T()}catch(te){console.error("Failed to delete appointment:",te)}},F=(B,ne)=>{o(B),d(ne||"09:00"),m(!0)},ie=async B=>{var ne,te,ce,R,I,Z;try{if(p(!0),B._id){const je={id:B._id,customerId:((ne=B.customer)==null?void 0:ne._id)||B.customer,customerName:((te=B.customer)==null?void 0:te.name)||B.customerName,vehicleId:((ce=B.vehicle)==null?void 0:ce._id)||B.vehicle,vehicleInfo:((R=B.vehicle)==null?void 0:R.fullName)||B.vehicleInfo,scheduledDate:new Date(B.scheduledDate).toISOString().split("T")[0],scheduledTime:B.scheduledTime,estimatedDuration:B.estimatedDuration,serviceType:B.serviceType,description:B.serviceDescription,status:B.status,priority:B.priority,createdDate:new Date(B.createdAt).toISOString().split("T")[0],notes:B.notes||"",technicianId:((I=B.technician)==null?void 0:I._id)||B.technicianId,technicianName:((Z=B.technician)==null?void 0:Z.name)||B.technicianName};e(ix(je)),m(!1),await T();return}if(!B.customer||!B.vehicle||!B.date||!B.serviceType){C.error("Please fill in all required fields");return}let ee,xe;ee=B.scheduledDate||B.date,xe=B.scheduledTime||B.time||c||"09:00";const Ae={id:`apt${Date.now()}`,customerId:`customer${Date.now()}`,customerName:B.customer,vehicleId:`vehicle${Date.now()}`,vehicleInfo:B.vehicle,scheduledDate:ee,scheduledTime:xe,estimatedDuration:B.estimatedDuration||60,serviceType:B.serviceType,description:B.serviceType,status:B.status||"scheduled",priority:B.priority||"medium",createdDate:new Date().toISOString().split("T")[0],notes:B.notes||"",technicianId:B.technicianId||void 0,technicianName:B.technicianName||void 0};await new Promise(je=>setTimeout(je,500)),e(ix(Ae)),m(!1),await T()}catch(ee){console.error("Error creating appointment:",ee),C.error("Failed to create appointment. Please try again.")}finally{p(!1)}},ye=async B=>{try{if(!g)return;const ne={...g,...B};await new Promise(te=>setTimeout(te,500)),e(My(ne)),C.success("Appointment updated successfully!"),x(!1),f(null),await T()}catch(ne){console.error("Error updating appointment:",ne),C.error("Failed to update appointment. Please try again.")}},fe=(B,ne)=>{B.dataTransfer.effectAllowed="move",B.dataTransfer.setData("text/plain",ne.id),v(ne),N(!0);const te=B.target;te.style.opacity="0.5",te.style.transform="rotate(5deg) scale(1.05)",te.style.transition="all 0.2s ease",P.current&&B.dataTransfer.setDragImage(P.current,0,0)},pe=()=>{N(!1),v(null),k(null),document.querySelectorAll('[draggable="true"]').forEach(ne=>{const te=ne;te.style.opacity="",te.style.transform="",te.style.transition=""})},Te=(B,ne)=>{B.preventDefault(),B.dataTransfer.dropEffect="move",k(ne);const te=B.currentTarget;te.classList.contains("drag-over")||(te.classList.add("drag-over"),te.style.backgroundColor="#dbeafe",te.style.borderColor="#3b82f6",te.style.transform="scale(1.02)",te.style.transition="all 0.2s ease")},Oe=B=>{const ne=B.currentTarget;ne.classList.remove("drag-over"),ne.style.backgroundColor="",ne.style.borderColor="",ne.style.transform="",ne.style.transition=""},Y=async(B,ne)=>{B.preventDefault();const te=B.currentTarget;if(te.classList.remove("drag-over"),te.style.backgroundColor="",te.style.borderColor="",te.style.transform="",te.style.transition="",!b)return;const ce=ne.toISOString().split("T")[0];if(b.scheduledDate===ce){k(null);return}try{const I={...b,scheduledDate:ce},Z={scheduledDate:new Date(ce).toISOString()};console.log("Sending update data:",Z);const xe=await(await fetch(`/api/appointments/${b.id}`,{method:"PUT",headers:gt(),body:JSON.stringify(Z)})).json();xe.success?(e(My(I)),C.success("Appointment moved successfully!"),await T()):C.error(xe.message||"Failed to move appointment")}catch(I){console.error("Error moving appointment:",I),C.error("Failed to move appointment. Please try again.")}k(null),document.querySelectorAll(".drag-over").forEach(I=>{const Z=I;Z.classList.remove("drag-over"),Z.style.backgroundColor="",Z.style.borderColor="",Z.style.transform="",Z.style.transition=""})},$=()=>{m(!1),x(!1),f(null)},ke=()=>s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(B=>s.jsx("div",{className:"p-2 text-center font-medium text-gray-500 text-sm",children:B},B)),W.map((B,ne)=>s.jsxs("div",{className:`min-h-24 p-1 border border-gray-200 cursor-pointer hover:bg-gray-50 ${B.isCurrentMonth?"bg-white":"bg-gray-50 text-gray-400"} ${B.isToday?"bg-blue-50 border-blue-200":""} ${S&&S.toDateString()===B.date.toDateString()?"bg-blue-100 border-blue-300":""}`,onClick:()=>F(B.date),onDragOver:te=>Te(te,B.date),onDragLeave:Oe,onDrop:te=>Y(te,B.date),children:[s.jsx("div",{className:`text-sm font-medium mb-1 ${B.isToday?"text-blue-600":""}`,children:B.date.getDate()}),s.jsxs("div",{className:"space-y-1",children:[B.appointments.filter(te=>te.customerName&&te.serviceType).slice(0,2).map(te=>s.jsxs("div",{className:`text-xs p-1 rounded border-l-2 ${G(te.priority)} bg-gray-100 truncate cursor-pointer hover:bg-gray-200 ${w&&(b==null?void 0:b.id)===te.id?"opacity-50":""}`,title:`${te.customerName} - ${z(te.serviceType)}`,draggable:!0,onDragStart:ce=>fe(ce,te),onDragEnd:pe,onClick:ce=>{ce.stopPropagation(),D(te)},children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${V(te.status)}`}),s.jsx("span",{className:"font-medium",children:M(te.scheduledTime)})]}),s.jsx("div",{className:"truncate",children:te.customerName})]},te.id)),(()=>{const te=B.appointments.filter(ce=>ce.customerName&&ce.serviceType);return te.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 font-medium",children:["+",te.length-2," more"]})})(),B.appointments.filter(te=>te.customerName&&te.serviceType).length===0&&B.isCurrentMonth&&s.jsx("div",{className:"text-xs text-gray-400 text-center mt-2 opacity-0 hover:opacity-100 transition-opacity",children:"Click to add appointment"})]})]},ne))]}),E=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[s.jsx("div",{className:"p-2 text-sm font-medium text-gray-500"}),J.map((B,ne)=>s.jsxs("div",{className:"p-2 text-center",children:[s.jsx("div",{className:`text-sm font-medium ${B.isToday?"text-blue-600":"text-gray-700"}`,children:B.date.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:`text-lg font-bold ${B.isToday?"text-blue-600":"text-gray-900"}`,children:B.date.getDate()})]},ne))]}),s.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[s.jsx("div",{className:"space-y-2",children:Array.from({length:12},(B,ne)=>ne+8).map(B=>s.jsx("div",{className:"h-16 text-xs text-gray-500 text-right pr-2 pt-1",children:M(`${B.toString().padStart(2,"0")}:00`)},B))}),J.map((B,ne)=>s.jsx("div",{className:"space-y-2",children:Array.from({length:12},(te,ce)=>ce+8).map(te=>{const ce=`${te.toString().padStart(2,"0")}:00`,R=B.appointments.filter(I=>I.scheduledTime&&I.scheduledTime.startsWith(te.toString().padStart(2,"0")));return s.jsxs("div",{className:`h-16 border border-gray-100 relative cursor-pointer hover:bg-gray-50 transition-colors ${S&&S.toDateString()===B.date.toDateString()?"bg-blue-100 border-blue-300":""}`,onClick:()=>F(B.date,ce),title:`Click to add appointment at ${M(ce)}`,onDragOver:I=>Te(I,B.date),onDragLeave:Oe,onDrop:I=>Y(I,B.date),children:[R.filter(I=>I.customerName&&I.serviceType).map((I,Z)=>s.jsxs("div",{className:`absolute inset-1 p-1 rounded text-xs cursor-pointer hover:bg-opacity-90 ${G(I.priority)} bg-blue-100 ${w&&(b==null?void 0:b.id)===I.id?"opacity-50":""}`,onClick:ee=>{ee.stopPropagation(),D(I)},title:`${I.customerName} - ${z(I.serviceType)}`,draggable:!0,onDragStart:ee=>fe(ee,I),onDragEnd:pe,children:[s.jsx("div",{className:"font-medium truncate",children:I.customerName}),s.jsx("div",{className:"text-gray-600 truncate",children:z(I.serviceType)})]},I.id)),R.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:s.jsx("div",{className:"text-xs text-gray-400",children:"+"})}),s.jsx("div",{ref:P,className:"fixed -top-1000 left-0 w-56 p-3 bg-white border-2 border-blue-400 rounded-lg shadow-xl pointer-events-none opacity-0",style:{zIndex:-1},children:b&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("div",{className:"font-semibold text-blue-700",children:b.customerName})]}),s.jsx("div",{className:"text-gray-700 font-medium",children:z(b.serviceType)}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:[" ",M(b.scheduledTime)]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[" ",b.scheduledDate]})]}),s.jsx("div",{className:"mt-2 text-xs text-blue-600 font-medium",children:"Drop to reschedule appointment"})]})})]},te)})},ne))]})]}),ue=()=>{const B=H(r),ne=Array.from({length:24},(te,ce)=>ce);return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-4",children:r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),s.jsx("div",{className:"space-y-1",children:ne.map(te=>{const ce=`${te.toString().padStart(2,"0")}:00`,R=B.filter(I=>I.scheduledTime&&I.scheduledTime.startsWith(te.toString().padStart(2,"0")));return s.jsxs("div",{className:"flex border-b border-gray-100",children:[s.jsx("div",{className:"w-20 p-2 text-sm text-gray-500 font-medium",children:M(ce)}),s.jsxs("div",{className:`flex-1 p-2 min-h-12 cursor-pointer hover:bg-gray-50 transition-colors ${S&&S.toDateString()===r.toDateString()?"bg-blue-100":""}`,onClick:()=>F(r,ce),title:`Click to add appointment at ${M(ce)}`,onDragOver:I=>Te(I,r),onDragLeave:Oe,onDrop:I=>Y(I,r),children:[R.filter(I=>I.customerName&&I.serviceType).map(I=>s.jsxs("div",{className:`p-3 mb-2 rounded-lg border-l-4 ${G(I.priority)} bg-white shadow-sm cursor-pointer hover:shadow-md transition-shadow ${w&&(b==null?void 0:b.id)===I.id?"opacity-50":""}`,onClick:Z=>{Z.stopPropagation(),D(I)},draggable:!0,onDragStart:Z=>fe(Z,I),onDragEnd:pe,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-800",children:I.customerName}),s.jsx("p",{className:"text-sm text-gray-600",children:z(I.serviceType)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.status==="confirmed"?"bg-green-100 text-green-800":I.status==="scheduled"?"bg-blue-100 text-blue-800":I.status==="in-progress"?"bg-yellow-100 text-yellow-800":I.status==="completed"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:I.status}),s.jsx("button",{onClick:Z=>X(I,Z),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete appointment",children:s.jsx(Le,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(lt,{className:"w-4 h-4"}),s.jsxs("span",{children:[M(I.scheduledTime)," (",I.estimatedDuration,"min)"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(to,{className:"w-4 h-4"}),s.jsx("span",{children:I.vehicleInfo})]}),I.technicianName&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(hs,{className:"w-4 h-4"}),s.jsx("span",{children:I.technicianName})]})]}),I.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:I.description})]},I.id)),R.length===0&&s.jsx("div",{className:"flex items-center justify-center h-12 text-gray-400 opacity-0 hover:opacity-100 transition-opacity",children:s.jsx("div",{className:"text-sm",children:"Click to add appointment"})})]})]},te)})})]})};return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(vt,{className:"w-6 h-6"}),"Appointment Calendar"]}),s.jsxs("div",{className:"text-lg font-medium text-gray-600",children:[n==="month"&&r.toLocaleDateString("en-US",{month:"long",year:"numeric"}),n==="week"&&`Week of ${r.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,n==="day"&&r.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["month","week","day"].map(B=>s.jsx("button",{onClick:()=>i(B),className:`px-3 py-1 rounded text-sm font-medium capitalize ${n===B?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:B},B))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>U("prev"),className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(h7,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>a(new Date),className:"px-3 py-1 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg",children:"Today"}),s.jsx("button",{onClick:()=>U("next"),className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(x7,{className:"w-5 h-5"})})]}),s.jsx("button",{onClick:()=>{m(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"+ New Appointment"})]})]}),s.jsxs("div",{className:"p-6",children:[t&&t.length!==(_==null?void 0:_.length)&&s.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800",children:[s.jsx(vt,{className:"w-4 h-4"}),s.jsxs("span",{children:["Showing ",s.jsx("strong",{children:t.length})," filtered appointments (of ",(_==null?void 0:_.length)||0," total)"]})]})}),t&&t.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No appointments found"}),s.jsx("p",{className:"text-gray-400",children:"Try adjusting your search terms or filters."})]}),(!t||t.length>0)&&s.jsxs(s.Fragment,{children:[n==="month"&&ke(),n==="week"&&E(),n==="day"&&ue()]})]}),s.jsx("div",{className:"border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),[{status:"scheduled",color:"bg-blue-500",label:"Scheduled"},{status:"confirmed",color:"bg-green-500",label:"Confirmed"},{status:"in-progress",color:"bg-yellow-500",label:"In Progress"},{status:"completed",color:"bg-gray-500",label:"Completed"}].map(({status:B,color:ne,label:te})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${ne}`}),s.jsx("span",{className:"text-gray-600",children:te})]},B))]})}),u&&s.jsx(Gd,{onClose:$,onSave:ie,isLoading:y,selectedDate:l||void 0,selectedTime:c}),h&&g&&s.jsx(Gd,{onClose:$,onSave:ye,isLoading:y,appointment:g,isEditing:!0}),s.jsx("div",{ref:P,className:"fixed -top-1000 left-0 w-48 p-2 bg-white border border-gray-300 rounded shadow-lg pointer-events-none opacity-0",style:{zIndex:-1},children:b&&s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium",children:b.customerName}),s.jsx("div",{className:"text-gray-600",children:z(b.serviceType)}),s.jsx("div",{className:"text-xs text-gray-500",children:M(b.scheduledTime)})]})})]})}function It({title:t,icon:e}){return s.jsxs("div",{className:"flex items-center mb-6",children:[e&&s.jsx(e,{className:"h-8 w-8 text-yellow-400 mr-3"}),s.jsx("h2",{className:"text-2xl font-bold text-yellow-400",children:t})]})}function v_(){var Oe,Y;const t=we(),[e,r]=j.useState("calendar"),[a,n]=j.useState("all"),[i,l]=j.useState("all"),[o,c]=j.useState(""),[d,u]=j.useState(!1),[m,h]=j.useState(!1),[x,g]=j.useState(!1),[f,y]=j.useState(!1),[p,b]=j.useState(null),[v,w]=j.useState(!1),[N,S]=j.useState(!0),[k,P]=j.useState(!1),_=ve($=>$.appointments.data),L=ve($=>$.appointments.loading),[T,U]=j.useState([]),H=async()=>{try{const $=await fetch(`${nt.CUSTOMERS}/technicians`,{headers:gt()});if($.ok){const ke=await $.json();ke.success&&U(ke.data.technicians||[])}}catch($){console.error("Error loading technicians:",$),U([])}};j.useEffect(()=>{W(),H()},[]);const W=async()=>{try{S(!0),t(Ey(!0));const $=await Qd.getAppointments({status:a!=="all"?a:void 0,technicianId:i!=="all"?i:void 0});if($.success){console.log("Appointments API response:",$.data);const ke=($.data.appointments||[]).map((E,ue)=>{var B,ne,te,ce,R;try{let I="Unknown Customer";E.customer?typeof E.customer=="string"?I=E.customer:E.customer.name?I=E.customer.name:(B=E.customer.contactPerson)!=null&&B.name?I=E.customer.contactPerson.name:E.customer.businessName&&(I=E.customer.businessName):E.customerName&&(I=E.customerName);let Z="Unknown Vehicle";E.vehicle?typeof E.vehicle=="string"?Z=E.vehicle:E.vehicle.year&&E.vehicle.make&&E.vehicle.model&&(Z=`${E.vehicle.year} ${E.vehicle.make} ${E.vehicle.model}`):E.vehicleInfo&&(Z=E.vehicleInfo);let ee="Unknown Service";return E.serviceType?typeof E.serviceType=="string"?ee=E.serviceType:E.serviceType.name?ee=E.serviceType.name:E.serviceType.category&&(ee=E.serviceType.category):E.serviceDescription?ee=E.serviceDescription:E.service&&(ee=E.service),{id:E._id||E.id||`apt_${Date.now()}_${Math.random()}`,customerId:((ne=E.customer)==null?void 0:ne._id)||E.customerId||"",customerName:I||"Unknown Customer",vehicleId:((te=E.vehicle)==null?void 0:te._id)||E.vehicleId||"",vehicleInfo:Z||"Unknown Vehicle",scheduledDate:E.scheduledDate?new Date(E.scheduledDate).toISOString().split("T")[0]:E.date||new Date().toISOString().split("T")[0],scheduledTime:E.scheduledTime||E.time||"09:00",estimatedDuration:E.estimatedDuration||60,serviceType:ee||"Unknown Service",description:E.serviceDescription||E.description||ee||"No description",status:E.status||"scheduled",technicianId:((ce=E.technician)==null?void 0:ce._id)||E.technicianId||"",technicianName:((R=E.technician)==null?void 0:R.name)||E.technicianName||"",priority:E.priority||"medium",createdDate:E.createdAt?new Date(E.createdAt).toISOString().split("T")[0]:E.createdDate||new Date().toISOString().split("T")[0],notes:E.notes||""}}catch(I){return console.error(`Error transforming appointment at index ${ue}:`,I,E),{id:`error_apt_${ue}_${Date.now()}`,customerId:"",customerName:"Error Loading Customer",vehicleId:"",vehicleInfo:"Error Loading Vehicle",scheduledDate:new Date().toISOString().split("T")[0],scheduledTime:"09:00",estimatedDuration:60,serviceType:"Error Loading Service",description:"Error loading appointment data",status:"scheduled",technicianId:"",technicianName:"",priority:"medium",createdDate:new Date().toISOString().split("T")[0],notes:"Error occurred while loading this appointment"}}});console.log("Transformed appointments:",ke),console.log("Sample appointment for search testing:",ke[0]),t(Z2(ke))}else console.error("Appointments API error:",$),C.error($.message||"Failed to fetch appointments")}catch($){console.error("Error fetching appointments:",$),C.error("Failed to load appointments")}finally{S(!1),t(Ey(!1))}};j.useEffect(()=>{W()},[a,i]);const J=(_&&Array.isArray(_)?_:[]).filter($=>{var ke,E,ue,B,ne,te,ce;try{if(a!=="all"&&$.status!==a||i!=="all"&&$.technicianId!==i)return!1;if(o&&o.trim()){const R=o.toLowerCase().trim(),I=((ke=$.customerName)==null?void 0:ke.toLowerCase().includes(R))||!1,Z=((E=$.vehicleInfo)==null?void 0:E.toLowerCase().includes(R))||!1,ee=(typeof $.serviceType=="string"?$.serviceType.toLowerCase().includes(R):((B=(ue=$.serviceType)==null?void 0:ue.name)==null?void 0:B.toLowerCase().includes(R))||!1)||!1,xe=((ne=$.technicianName)==null?void 0:ne.toLowerCase().includes(R))||!1,Ae=((te=$.notes)==null?void 0:te.toLowerCase().includes(R))||!1,je=((ce=$.description)==null?void 0:ce.toLowerCase().includes(R))||!1;if(o&&(I||Z||ee||xe||Ae||je)&&console.log("Search match found:",{searchTerm:o,appointmentId:$.id,customerName:$.customerName,vehicleInfo:$.vehicleInfo,serviceType:$.serviceType,technicianName:$.technicianName,matches:{customerNameMatch:I,vehicleInfoMatch:Z,serviceTypeMatch:ee,technicianNameMatch:xe,notesMatch:Ae,descriptionMatch:je}}),!I&&!Z&&!ee&&!xe&&!Ae&&!je)return!1}return!0}catch(R){return console.error("Error filtering appointment:",R,$),!0}});o&&o.trim()&&console.log("Search results:",{searchTerm:o.trim(),totalAppointments:(_==null?void 0:_.length)||0,filteredCount:J.length,searchFields:["customerName","vehicleInfo","serviceType","technicianName","notes","description"]}),i!=="all"&&console.log("Technician filter active:",{filterValue:i,totalAppointments:_.length,filteredCount:J.length,appointmentsWithTechnician:(_&&Array.isArray(_)?_:[]).filter($=>$.technicianId).map($=>({id:$.id,technicianId:$.technicianId,technicianName:$.technicianName}))});const V=Array.from(new Set((_&&Array.isArray(_)?_:[]).map($=>$.status))),G=async $=>{var ke,E;try{if(w(!0),!$.customer||!$.vehicle||!$.date||!$.serviceType){C.error("Please fill in all required fields");return}const ue={customerId:$.customerId,date:$.date.split("T")[0],time:((ke=$.date.split("T")[1])==null?void 0:ke.substring(0,5))||"09:00",service:$.serviceType,vehicleId:$.vehicleId,notes:$.notes||"",technicianId:$.technicianId||(T.length>0?T[0].id:void 0)},B=await Qd.createAppointment(ue);if(B.success){const ne={id:B.data.appointment._id||`apt${Date.now()}`,customerId:$.customerId,customerName:$.customer,vehicleId:$.vehicleId,vehicleInfo:$.vehicle,scheduledDate:$.date.split("T")[0],scheduledTime:((E=$.date.split("T")[1])==null?void 0:E.substring(0,5))||"09:00",estimatedDuration:60,serviceType:$.serviceType,description:$.serviceType,status:"scheduled",priority:"medium",createdDate:new Date().toISOString().split("T")[0],notes:$.notes||"",technicianId:$.technicianId||(T.length>0?T[0].id:void 0),technicianName:$.technicianName||(T.length>0?T[0].name:void 0)};t(ix(ne)),C.success("Appointment created successfully!"),u(!1),W()}else C.error(B.message||"Failed to create appointment")}catch(ue){console.error("Error creating appointment:",ue),C.error("Failed to create appointment. Please try again.")}finally{w(!1)}},M=()=>{u(!1)},z=$=>{console.log("Editing appointment:",$),console.log("Appointment ID:",$.id),b($),h(!0)},D=async $=>{var ke;try{w(!0),console.log("Update appointment data received:",$);let E={};if($.scheduledDate&&$.scheduledTime){let ne=$.serviceType;typeof $.serviceType=="object"&&$.serviceType!==null&&(ne=$.serviceType._id||$.serviceType.id),E={scheduledDate:$.scheduledDate,scheduledTime:$.scheduledTime,serviceType:ne,technicianId:$.technicianId||void 0,priority:$.priority||"medium",estimatedDuration:$.estimatedDuration||60},$.notes&&$.notes.trim()&&(E.notes=$.notes.trim())}else if($.date)E={scheduledDate:$.date.split("T")[0],scheduledTime:((ke=$.date.split("T")[1])==null?void 0:ke.substring(0,5))||"09:00",serviceType:$.serviceTypeId||$.serviceType,technicianId:$.technicianId||void 0,priority:$.priority||"medium",estimatedDuration:$.estimatedDuration||60},$.notes&&$.notes.trim()&&(E.notes=$.notes.trim());else{if(!$.scheduledDate||!$.scheduledTime){C.error("Date and time are required");return}let ne=$.serviceType;typeof $.serviceType=="object"&&$.serviceType!==null&&(ne=$.serviceType._id||$.serviceType.id),E={scheduledDate:$.scheduledDate,scheduledTime:$.scheduledTime,serviceType:ne,technicianId:$.technicianId||void 0,priority:$.priority||"medium",estimatedDuration:$.estimatedDuration||60},$.notes&&$.notes.trim()&&(E.notes=$.notes.trim())}console.log("Sending update payload:",E),console.log("Service type processing:",{original:$.serviceType,extractedId:E.serviceType,isObject:typeof $.serviceType=="object"}),console.log("Updating appointment ID:",p==null?void 0:p.id);const ue=await fetch(`${nt.APPOINTMENTS}/${p==null?void 0:p.id}`,{method:"PUT",headers:gt(),body:JSON.stringify(E)});console.log("Response status:",ue.status),console.log("Response headers:",ue.headers);const B=await ue.json();console.log("Response result:",B),B.success?(C.success("Appointment updated successfully!"),h(!1),b(null),W()):C.error(B.message||"Failed to update appointment")}catch(E){console.error("Error updating appointment:",E),C.error("Failed to update appointment. Please try again.")}finally{w(!1)}},X=$=>{b($),g(!0)},F=$=>{b($),y(!0)},ie=async()=>{if(!(p!=null&&p.id)){C.error("No appointment selected for deletion");return}try{P(!0);const ke=await(await fetch(`${nt.APPOINTMENTS}/${p.id}`,{method:"DELETE",headers:gt()})).json();ke.success?(C.success("Appointment deleted successfully!"),y(!1),b(null),W()):C.error(ke.message||"Failed to delete appointment")}catch($){console.error("Error deleting appointment:",$),C.error("Failed to delete appointment. Please try again.")}finally{P(!1)}},ye=()=>{h(!1),b(null)},fe=()=>{g(!1),b(null)},pe=()=>{y(!1),b(null)},Te=$=>{$.preventDefault()};return N?s.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Wm,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading appointments..."})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(It,{title:"Appointments"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("form",{onSubmit:Te,className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by customer, vehicle, service, technician, or notes...",value:o,onChange:$=>c($.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80",autoComplete:"off"}),o&&s.jsx("button",{type:"button",onClick:()=>c(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:""})]}),s.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Search"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o8,{className:"w-5 h-5 text-gray-500"}),s.jsxs("select",{value:a,onChange:$=>n($.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),(V&&Array.isArray(V)?V:[]).map($=>s.jsx("option",{value:$,className:"capitalize",children:$.replace("-"," ")},$))]}),s.jsxs("select",{value:i,onChange:$=>l($.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Technicians"}),(T&&Array.isArray(T)?T:[]).map($=>s.jsx("option",{value:$.id||$._id,children:$.name},$.id||$._id))]})]}),s.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[s.jsxs("button",{onClick:()=>r("calendar"),className:`flex items-center gap-2 px-3 py-2 rounded text-sm font-medium ${e==="calendar"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(ur,{className:"w-4 h-4"}),"Calendar"]}),s.jsxs("button",{onClick:()=>r("grid"),className:`flex items-center gap-2 px-3 py-2 rounded text-sm font-medium ${e==="grid"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(L2,{className:"w-4 h-4"}),"Grid"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Today's Appointments"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(_&&Array.isArray(_)?_:[]).filter($=>$.scheduledDate===new Date().toISOString().split("T")[0]).length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(ur,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Confirmed"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:(_&&Array.isArray(_)?_:[]).filter($=>$.status==="confirmed").length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx("div",{className:"w-6 h-6 bg-green-600 rounded-full"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:(_&&Array.isArray(_)?_:[]).filter($=>$.status==="in-progress").length})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:s.jsx("div",{className:"w-6 h-6 bg-yellow-600 rounded-full"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-gray-600",children:(_&&Array.isArray(_)?_:[]).filter($=>$.status==="completed").length})]}),s.jsx("div",{className:"bg-gray-100 p-3 rounded-full",children:s.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full"})})]})})]}),o&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bi,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{className:"text-sm text-blue-800",children:['Search results for "',s.jsx("strong",{children:o}),'":',s.jsx("strong",{className:"ml-1",children:J.length})," appointment",J.length!==1?"s":""," found",e==="calendar"&&s.jsx("span",{className:"ml-2 text-blue-600",children:"(Calendar view will show filtered results)"})]})]}),s.jsx("button",{onClick:()=>c(""),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear search"})]})}),e==="calendar"?s.jsx(b_,{appointments:J}):s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Appointments (",J.length,")"]}),s.jsxs("button",{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Jl,{className:"w-4 h-4"}),"New Appointment"]})]}),L?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(Wm,{className:"w-8 h-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}):J.length>0?s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map($=>s.jsx(y_,{appointment:$,onEdit:z,onView:X,onDelete:F},$.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ur,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No appointments found"}),s.jsx("p",{className:"text-gray-400",children:o||a!=="all"||i!=="all"?"Try adjusting your filters or search terms.":"Create a new appointment to get started."})]})]}),d&&s.jsx(Gd,{onClose:M,onSave:G,isLoading:v}),m&&p&&s.jsx(Gd,{appointment:p,isEditing:!0,onClose:ye,onSave:D,isLoading:v}),x&&p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Appointment Details"}),s.jsx("button",{onClick:fe,className:"text-gray-400 hover:text-gray-600",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Customer"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.customerName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vehicle"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.vehicleInfo})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date & Time"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[p.scheduledDate," at ",p.scheduledTime]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Service"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:typeof p.serviceType=="string"?p.serviceType:((Oe=p.serviceType)==null?void 0:Oe.name)||"Unknown Service"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:(Y=p.status)==null?void 0:Y.replace("-"," ")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:p.priority})]}),p.technicianName&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Technician"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.technicianName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duration"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[p.estimatedDuration," min"]})]})]}),p.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.notes})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{g(!1),z(p)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Edit Appointment"}),s.jsx("button",{onClick:fe,className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium",children:"Close"})]})]})}),f&&p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx(Le,{className:"h-6 w-6 text-red-600"})})}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Appointment"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete the appointment for"," ",s.jsx("span",{className:"font-medium text-gray-900",children:p.customerName}),"?"]}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"This action cannot be undone."})]}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx("button",{onClick:pe,disabled:k,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg text-sm font-medium disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:ie,disabled:k,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium disabled:opacity-50 flex items-center gap-2",children:k?s.jsxs(s.Fragment,{children:[s.jsx(Wm,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Appointment"})]})]})})]})}const dt={async getCustomers(t={}){const e=new URLSearchParams;Object.entries(t).forEach(([a,n])=>{n!==void 0&&n!==""&&e.append(a,n.toString())}),console.log("customerService.getCustomers: Making API call to /customers with params:",e.toString());const r=await ae(A.get(`/customers?${e.toString()}`));return console.log("customerService.getCustomers: API response:",r),r},async getCustomer(t){return await ae(A.get(`/customers/${t}`))},async createCustomer(t){return await ae(A.post("/customers",t))},async updateCustomer(t,e){return await ae(A.put(`/customers/${t}`,e))},async deleteCustomer(t){return await ae(A.delete(`/customers/${t}`))},async addVehicle(t,e){return await ae(A.post(`/customers/${t}/vehicles`,e))},async updateVehicle(t,e,r){return await ae(A.put(`/customers/${t}/vehicles/${e}`,r))},async deleteVehicle(t,e){return await ae(A.delete(`/customers/${t}/vehicles/${e}`))},async addServiceHistory(t,e){return await ae(A.post(`/customers/${t}/service-history`,e))},async addCommunicationLog(t,e){return await ae(A.post(`/customers/${t}/communication-log`,e))},async getCustomerStats(){return await ae(A.get("/customers/stats/overview"))},async searchCustomers(t){return await ae(A.get(`/customers/search?q=${encodeURIComponent(t)}`))},async getCustomerPayments(t,e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([n,i])=>{i!==void 0&&i!==""&&r.append(n,i.toString())}),await ae(A.get(`/customers/${t}/payments?${r.toString()}`))},async addPayment(t,e){return await ae(A.post(`/customers/${t}/payments`,e))},async updatePayment(t,e,r){return await ae(A.put(`/customers/${t}/payments/${e}`,r))},async deletePayment(t,e){return await ae(A.delete(`/customers/${t}/payments/${e}`))},async getCustomerArrangements(t,e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([n,i])=>{i!==void 0&&i!==""&&r.append(n,i.toString())}),await ae(A.get(`/customers/${t}/arrangements?${r.toString()}`))},async addArrangement(t,e){return await ae(A.post(`/customers/${t}/arrangements`,e))},async updateArrangement(t,e,r){return await ae(A.put(`/customers/${t}/arrangements/${e}`,r))},async deleteArrangement(t,e){return await ae(A.delete(`/customers/${t}/arrangements/${e}`))},async getCustomerTowing(t,e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([n,i])=>{i!==void 0&&i!==""&&r.append(n,i.toString())}),await ae(A.get(`/customers/${t}/towing?${r.toString()}`))},async addTowing(t,e){return await ae(A.post(`/customers/${t}/towing`,e))},async updateTowing(t,e,r){return await ae(A.put(`/customers/${t}/towing/${e}`,r))},async deleteTowing(t,e){return await ae(A.delete(`/customers/${t}/towing/${e}`))},async getCustomerCallLogs(t,e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([n,i])=>{i!==void 0&&i!==""&&r.append(n,i.toString())}),await ae(A.get(`/customers/${t}/call-logs?${r.toString()}`))},async addCallLog(t,e){return await ae(A.post(`/customers/${t}/call-logs`,e))},async updateCallLog(t,e,r){return await ae(A.put(`/customers/${t}/call-logs/${e}`,r))},async deleteCallLog(t,e){return await ae(A.delete(`/customers/${t}/call-logs/${e}`))}},Pt=q("customers/fetchCustomers",async(t={},{rejectWithValue:e})=>{var r,a;try{console.log("fetchCustomers: Calling customerService.getCustomers with filters:",t);const n=await dt.getCustomers(t);return console.log("fetchCustomers: Response from API:",n),n.data}catch(n){return console.error("fetchCustomers: Error:",n),e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch customers")}}),Vs=q("customers/fetchCustomer",async(t,{rejectWithValue:e})=>{var r,a;try{return(await dt.getCustomer(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch customer")}}),an=q("customers/createCustomer",async(t,{rejectWithValue:e})=>{var r,a;try{const n=await dt.createCustomer(t);return C.success("Customer created successfully!"),n.data.customer}catch(n){const i=((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create customer";return C.error(i),e(i)}}),nn=q("customers/updateCustomer",async({id:t,customerData:e},{rejectWithValue:r})=>{var a,n;try{const i=await dt.updateCustomer(t,e);return C.success("Customer updated successfully!"),i.data.customer}catch(i){const l=((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update customer";return C.error(l),r(l)}}),ga=q("customers/deleteCustomer",async(t,{rejectWithValue:e})=>{var r,a;try{return await dt.deleteCustomer(t),C.success("Customer deleted successfully!"),t}catch(n){const i=((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete customer";return C.error(i),e(i)}}),fa=q("customers/fetchStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await dt.getCustomerStats()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch customer stats")}}),ii=q("customers/searchCustomers",async(t,{rejectWithValue:e})=>{var r,a;try{return(await dt.searchCustomers(t)).data.customers}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to search customers")}}),j_={list:[],selectedCustomer:null,stats:null,loading:!1,error:null,pagination:null,searchResults:[],searchLoading:!1};wt({name:"customers",initialState:j_,reducers:{clearError:t=>{t.error=null},clearSelectedCustomer:t=>{t.selectedCustomer=null},clearSearchResults:t=>{t.searchResults=[]},setSelectedCustomer:(t,e)=>{t.selectedCustomer=e.payload}},extraReducers:t=>{t.addCase(Pt.pending,e=>{e.loading=!0,e.error=null}).addCase(Pt.fulfilled,(e,r)=>{e.loading=!1,e.list=r.payload.customers,e.pagination=r.payload.pagination}).addCase(Pt.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Vs.pending,e=>{e.loading=!0,e.error=null}).addCase(Vs.fulfilled,(e,r)=>{e.loading=!1,e.selectedCustomer=r.payload}).addCase(Vs.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(an.pending,e=>{e.loading=!0,e.error=null}).addCase(an.fulfilled,(e,r)=>{e.loading=!1,e.list.unshift(r.payload),e.pagination&&(e.pagination.totalCustomers+=1)}).addCase(an.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(nn.pending,e=>{e.loading=!0,e.error=null}).addCase(nn.fulfilled,(e,r)=>{var n;e.loading=!1;const a=e.list.findIndex(i=>i._id===r.payload._id);a!==-1&&(e.list[a]=r.payload),((n=e.selectedCustomer)==null?void 0:n._id)===r.payload._id&&(e.selectedCustomer=r.payload)}).addCase(nn.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(ga.pending,e=>{e.loading=!0,e.error=null}).addCase(ga.fulfilled,(e,r)=>{var a;e.loading=!1,e.list=e.list.filter(n=>n._id!==r.payload),e.pagination&&(e.pagination.totalCustomers-=1),((a=e.selectedCustomer)==null?void 0:a._id)===r.payload&&(e.selectedCustomer=null)}).addCase(ga.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(fa.pending,e=>{e.loading=!0,e.error=null}).addCase(fa.fulfilled,(e,r)=>{e.loading=!1,e.stats=r.payload}).addCase(fa.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(ii.pending,e=>{e.searchLoading=!0,e.error=null}).addCase(ii.fulfilled,(e,r)=>{e.searchLoading=!1,e.searchResults=r.payload}).addCase(ii.rejected,(e,r)=>{e.searchLoading=!1,e.error=r.payload})}});class N_{async getServiceCatalog(e={}){const r=new URLSearchParams;Object.entries(e).forEach(([n,i])=>{i!=null&&r.append(n,i.toString())});const a=await ae(A.get(`/services/catalog?${r.toString()}`));return console.log("getServiceCatalog API response:",a),a}async getServiceCatalogItem(e){return ae(A.get(`/services/catalog/${e}`))}async createServiceCatalogItem(e){return ae(A.post("/services/catalog",e))}async updateServiceCatalogItem(e,r){return ae(A.put(`/services/catalog/${e}`,r))}async deleteServiceCatalogItem(e){return ae(A.delete(`/services/catalog/${e}`))}async getServiceCatalogStats(){const e=await ae(A.get("/services/catalog/stats/overview"));return console.log("getServiceCatalogStats API response:",e),e}async getWorkOrders(e={}){const r=new URLSearchParams;Object.entries(e).forEach(([n,i])=>{i!=null&&r.append(n,i.toString())});const a=await ae(A.get(`/services/workorders?${r.toString()}`));return console.log("getWorkOrders API response:",a),a}async getWorkOrder(e){return ae(A.get(`/services/workorders/${e}`))}async createWorkOrder(e){return ae(A.post("/services/workorders",e))}async updateWorkOrder(e,r){return ae(A.put(`/services/workorders/${e}`,r))}async deleteWorkOrder(e){return ae(A.delete(`/services/workorders/${e}`))}async updateWorkOrderStatus(e,r){return ae(A.patch(`/services/workorders/${e}/status`,{status:r}))}async assignTechnician(e,r){return ae(A.post(`/services/workorders/${e}/assign-technician`,{technicianId:r}))}async getWorkOrderStats(e,r){const a=new URLSearchParams;e&&a.append("startDate",e),r&&a.append("endDate",r);const n=await ae(A.get(`/services/workorders/stats/overview?${a.toString()}`));return console.log("getWorkOrderStats API response:",n),n}async getTechnicians(e={}){const r=new URLSearchParams;Object.entries(e).forEach(([n,i])=>{i!=null&&r.append(n,i.toString())});const a=await ae(A.get(`/services/technicians?${r.toString()}`));return console.log("getTechnicians API response:",a),a}async getTechnician(e){return ae(A.get(`/services/technicians/${e}`))}async createTechnician(e){return ae(A.post("/services/technicians",e))}async updateTechnician(e,r){return ae(A.put(`/services/technicians/${e}`,r))}async deleteTechnician(e){return ae(A.delete(`/services/technicians/${e}`))}async getTechnicianStats(){const e=await ae(A.get("/services/technicians/stats/overview"));return console.log("getTechnicianStats API response:",e),e}async getAvailableTechnicians(e,r){const a=new URLSearchParams({date:e});r&&a.append("timeSlot",r);const n=await ae(A.get(`/services/technicians/available?${a.toString()}`));return console.log("getAvailableTechnicians API response:",n),n}async getServiceCategories(){const e=await ae(A.get("/services/categories"));return console.log("getServiceCategories API response:",e),e}async getSpecializations(){const e=await ae(A.get("/services/specializations"));return console.log("getSpecializations API response:",e),e}}const rt=new N_,ln=q("services/fetchServiceCatalog",async(t={},{rejectWithValue:e})=>{var r,a;try{return await rt.getServiceCatalog(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch service catalog")}}),w_=q("services/fetchServiceCatalogItem",async(t,{rejectWithValue:e})=>{var r,a;try{return await rt.getServiceCatalogItem(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch service item")}}),eN=q("services/createServiceCatalogItem",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await rt.createServiceCatalogItem(t);return C.success("Service created successfully"),l}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create service"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create service")}}),tN=q("services/updateServiceCatalogItem",async({id:t,data:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await rt.updateServiceCatalogItem(t,e);return C.success("Service updated successfully"),o}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update service"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update service")}}),sN=q("services/deleteServiceCatalogItem",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await rt.deleteServiceCatalogItem(t),C.success("Service deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete service"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete service")}}),lx=q("services/fetchServiceCatalogStats",async(t,{rejectWithValue:e})=>{var r,a;try{return await rt.getServiceCatalogStats()}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch service stats")}}),on=q("services/fetchWorkOrders",async(t={},{rejectWithValue:e})=>{var r,a;try{return await rt.getWorkOrders(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch work orders")}}),S_=q("services/fetchWorkOrder",async(t,{rejectWithValue:e})=>{var r,a;try{return await rt.getWorkOrder(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch work order")}}),rN=q("services/createWorkOrder",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await rt.createWorkOrder(t);return C.success("Work order created successfully"),l}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create work order"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create work order")}}),aN=q("services/updateWorkOrder",async({id:t,data:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await rt.updateWorkOrder(t,e);return C.success("Work order updated successfully"),o}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update work order"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update work order")}}),nN=q("services/deleteWorkOrder",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await rt.deleteWorkOrder(t),C.success("Work order deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete work order"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete work order")}}),C_=q("services/updateWorkOrderStatus",async({id:t,status:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await rt.updateWorkOrderStatus(t,e);return C.success("Work order status updated successfully"),o}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update work order status"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update work order status")}}),k_=q("services/assignTechnician",async({workOrderId:t,technicianId:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await rt.assignTechnician(t,e);return C.success("Technician assigned successfully"),o}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to assign technician"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to assign technician")}}),ox=q("services/fetchWorkOrderStats",async({startDate:t,endDate:e}={},{rejectWithValue:r})=>{var a,n;try{return await rt.getWorkOrderStats(t,e)}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch work order stats")}}),li=q("services/fetchTechnicians",async(t={},{rejectWithValue:e})=>{var r,a;try{return await rt.getTechnicians(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch technicians")}}),__=q("services/fetchTechnician",async(t,{rejectWithValue:e})=>{var r,a;try{return await rt.getTechnician(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch technician")}}),iN=q("services/createTechnician",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await rt.createTechnician(t);return C.success("Technician created successfully"),l}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create technician"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create technician")}}),lN=q("services/updateTechnician",async({id:t,data:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await rt.updateTechnician(t,e);return C.success("Technician updated successfully"),o}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update technician"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update technician")}}),oN=q("services/deleteTechnician",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await rt.deleteTechnician(t),C.success("Technician deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete technician"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete technician")}}),cx=q("services/fetchTechnicianStats",async(t,{rejectWithValue:e})=>{var r,a;try{return await rt.getTechnicianStats()}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch technician stats")}}),P_=q("services/fetchAvailableTechnicians",async({date:t,timeSlot:e},{rejectWithValue:r})=>{var a,n;try{return await rt.getAvailableTechnicians(t,e)}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch available technicians")}}),cN=q("services/fetchServiceCategories",async(t,{rejectWithValue:e})=>{var r,a;try{return await rt.getServiceCategories()}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch service categories")}}),dN=q("services/fetchSpecializations",async(t,{rejectWithValue:e})=>{var r,a;try{return await rt.getSpecializations()}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch specializations")}}),T_={catalog:[],catalogStats:null,catalogLoading:!1,catalogError:null,workOrders:[],workOrderStats:null,workOrdersLoading:!1,workOrdersError:null,technicians:[],technicianStats:null,techniciansLoading:!1,techniciansError:null,categories:[],specializations:[],generalLoading:!1,generalError:null},A_=wt({name:"services",initialState:T_,reducers:{clearServicesError:t=>{t.catalogError=null,t.workOrdersError=null,t.techniciansError=null,t.generalError=null},clearServiceCatalog:t=>{t.catalog=[],t.catalogStats=null},clearWorkOrders:t=>{t.workOrders=[],t.workOrderStats=null},clearTechnicians:t=>{t.technicians=[],t.technicianStats=null}},extraReducers:t=>{t.addCase(ln.pending,e=>{e.catalogLoading=!0,e.catalogError=null}).addCase(ln.fulfilled,(e,r)=>{var i;e.catalogLoading=!1;const a=r.payload;console.log("fetchServiceCatalog.fulfilled payload:",a);const n=Array.isArray(a)?a:Array.isArray((i=a==null?void 0:a.data)==null?void 0:i.services)?a.data.services:Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a==null?void 0:a.services)?a.services:[];console.log("fetchServiceCatalog.fulfilled normalized:",n),e.catalog=n}).addCase(ln.rejected,(e,r)=>{e.catalogLoading=!1,e.catalogError=r.payload}).addCase(w_.fulfilled,(e,r)=>{var l;const a=r.payload,n=((l=a==null?void 0:a.data)==null?void 0:l.service)||a,i=e.catalog.findIndex(o=>o._id===n._id);i!==-1?e.catalog[i]=n:e.catalog.push(n)}).addCase(eN.fulfilled,(e,r)=>{var i;const a=r.payload,n=((i=a==null?void 0:a.data)==null?void 0:i.service)||a;e.catalog.push(n)}).addCase(tN.fulfilled,(e,r)=>{var l;const a=r.payload,n=((l=a==null?void 0:a.data)==null?void 0:l.service)||a,i=e.catalog.findIndex(o=>o._id===n._id);i!==-1&&(e.catalog[i]=n)}).addCase(sN.fulfilled,(e,r)=>{e.catalog=e.catalog.filter(a=>a._id!==r.payload)}).addCase(lx.fulfilled,(e,r)=>{const a=r.payload;e.catalogStats=(a==null?void 0:a.data)||a}),t.addCase(on.pending,e=>{e.workOrdersLoading=!0,e.workOrdersError=null}).addCase(on.fulfilled,(e,r)=>{var i;e.workOrdersLoading=!1;const a=r.payload;console.log("fetchWorkOrders.fulfilled payload:",a);const n=Array.isArray(a)?a:Array.isArray((i=a==null?void 0:a.data)==null?void 0:i.workOrders)?a.data.workOrders:Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a==null?void 0:a.workOrders)?a.workOrders:[];console.log("fetchWorkOrders.fulfilled normalized:",n),e.workOrders=n}).addCase(on.rejected,(e,r)=>{e.workOrdersLoading=!1,e.workOrdersError=r.payload}).addCase(S_.fulfilled,(e,r)=>{var l;const a=r.payload,n=((l=a==null?void 0:a.data)==null?void 0:l.workOrder)||a,i=e.workOrders.findIndex(o=>o._id===n._id);i!==-1?e.workOrders[i]=n:e.workOrders.push(n)}).addCase(rN.fulfilled,(e,r)=>{var i;const a=r.payload,n=((i=a==null?void 0:a.data)==null?void 0:i.workOrder)||a;e.workOrders.push(n)}).addCase(aN.fulfilled,(e,r)=>{var l;const a=r.payload,n=((l=a==null?void 0:a.data)==null?void 0:l.workOrder)||a,i=e.workOrders.findIndex(o=>o._id===n._id);i!==-1&&(e.workOrders[i]=n)}).addCase(nN.fulfilled,(e,r)=>{e.workOrders=e.workOrders.filter(a=>a._id!==r.payload)}).addCase(C_.fulfilled,(e,r)=>{var l;const a=r.payload,n=((l=a==null?void 0:a.data)==null?void 0:l.workOrder)||a,i=e.workOrders.findIndex(o=>o._id===n._id);i!==-1&&(e.workOrders[i]=n)}).addCase(k_.fulfilled,(e,r)=>{var l;const a=r.payload,n=((l=a==null?void 0:a.data)==null?void 0:l.workOrder)||a,i=e.workOrders.findIndex(o=>o._id===n._id);i!==-1&&(e.workOrders[i]=n)}).addCase(ox.fulfilled,(e,r)=>{const a=r.payload;e.workOrderStats=(a==null?void 0:a.data)||a}),t.addCase(li.pending,e=>{e.techniciansLoading=!0,e.techniciansError=null}).addCase(li.fulfilled,(e,r)=>{var i;e.techniciansLoading=!1;const a=r.payload;console.log("fetchTechnicians.fulfilled payload:",a);const n=Array.isArray(a)?a:Array.isArray((i=a==null?void 0:a.data)==null?void 0:i.technicians)?a.data.technicians:Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a==null?void 0:a.technicians)?a.technicians:[];console.log("fetchTechnicians.fulfilled normalized:",n),e.technicians=n}).addCase(li.rejected,(e,r)=>{e.techniciansLoading=!1,e.techniciansError=r.payload}).addCase(__.fulfilled,(e,r)=>{var l;const a=r.payload,n=((l=a==null?void 0:a.data)==null?void 0:l.technician)||a,i=e.technicians.findIndex(o=>o._id===n._id);i!==-1?e.technicians[i]=n:e.technicians.push(n)}).addCase(iN.fulfilled,(e,r)=>{var i;const a=r.payload,n=((i=a==null?void 0:a.data)==null?void 0:i.technician)||a;e.technicians.push(n)}).addCase(lN.fulfilled,(e,r)=>{var l;const a=r.payload,n=((l=a==null?void 0:a.data)==null?void 0:l.technician)||a,i=e.technicians.findIndex(o=>o._id===n._id);i!==-1&&(e.technicians[i]=n)}).addCase(oN.fulfilled,(e,r)=>{e.technicians=e.technicians.filter(a=>a._id!==r.payload)}).addCase(cx.fulfilled,(e,r)=>{const a=r.payload;e.technicianStats=(a==null?void 0:a.data)||a}).addCase(P_.fulfilled,(e,r)=>{const a=r.payload,n=Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a)?a:[];console.log("Available technicians:",n)}),t.addCase(cN.fulfilled,(e,r)=>{const a=r.payload;e.categories=Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a)?a:[]}).addCase(dN.fulfilled,(e,r)=>{const a=r.payload;e.specializations=Array.isArray(a==null?void 0:a.data)?a.data:Array.isArray(a)?a:[]})}}),D_=A_.reducer;function M_({isOpen:t,onClose:e,onSave:r,task:a,isLoading:n=!1}){const i=we(),{list:l}=ve(f=>f.customers),{technicians:o}=ve(f=>f.services),[c,d]=j.useState({title:"",description:"",type:"follow_up",priority:"medium",assignedTo:"",customer:void 0,dueDate:""}),[u,m]=j.useState({});j.useEffect(()=>{t&&(i(Pt({limit:100})),i(li({limit:100})))},[t,i]),j.useEffect(()=>{var f;d(a?{title:a.title,description:a.description||"",type:a.type,priority:a.priority,assignedTo:typeof a.assignedTo=="string"?a.assignedTo:a.assignedTo._id,customer:typeof a.customer=="string"?a.customer:((f=a.customer)==null?void 0:f._id)||void 0,dueDate:a.dueDate.split("T")[0]}:{title:"",description:"",type:"follow_up",priority:"medium",assignedTo:"",customer:void 0,dueDate:""}),m({})},[a,t]);const h=()=>{const f={};return c.title.trim()||(f.title="Title is required"),c.assignedTo||(f.assignedTo="Assigned to is required"),c.dueDate||(f.dueDate="Due date is required"),m(f),Object.keys(f).length===0},x=f=>{if(f.preventDefault(),h()){const y={...c};(!y.customer||y.customer.trim()==="")&&delete y.customer,r(y)}},g=(f,y)=>{d(p=>({...p,[f]:y})),u[f]&&m(p=>({...p,[f]:""}))};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:a?"Edit Task":"Add New Task"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),s.jsx("input",{type:"text",value:c.title,onChange:f=>g("title",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter task title",required:!0}),u.title&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:c.description,onChange:f=>g("description",f.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter task description"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Type"}),s.jsxs("select",{value:c.type,onChange:f=>g("type",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"follow_up",children:"Follow Up"}),s.jsx("option",{value:"marketing",children:"Marketing"}),s.jsx("option",{value:"sales",children:"Sales"}),s.jsx("option",{value:"collections",children:"Collections"}),s.jsx("option",{value:"appointments",children:"Appointments"}),s.jsx("option",{value:"research",children:"Research"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:c.priority,onChange:f=>g("priority",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned To (Technician) *"}),s.jsxs("select",{value:c.assignedTo,onChange:f=>g("assignedTo",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.assignedTo?"border-red-500":"border-gray-300"}`,required:!0,children:[s.jsx("option",{value:"",children:"Select a technician"}),o==null?void 0:o.map(f=>s.jsxs("option",{value:f._id,children:[f.name," ",f.specializations&&f.specializations.length>0?`(${f.specializations.join(", ")})`:""]},f._id))]}),u.assignedTo&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.assignedTo})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),s.jsx("input",{type:"date",value:c.dueDate,onChange:f=>g("dueDate",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.dueDate?"border-red-500":"border-gray-300"}`,required:!0}),u.dueDate&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.dueDate})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer (Optional)"}),s.jsxs("select",{value:c.customer||"",onChange:f=>g("customer",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a customer (optional)"}),l==null?void 0:l.map(f=>s.jsxs("option",{value:f._id,children:[f.businessName||f.name," ",f.businessName&&`(${f.name})`]},f._id))]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:n,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):s.jsx(s.Fragment,{children:a?"Update Task":"Create Task"})})]})]})]})}):null}function E_({isOpen:t,onClose:e,onConfirm:r,taskTitle:a,isLoading:n=!1}){return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Delete Task"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:n,children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(ts,{className:"w-6 h-6 text-red-600"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure?"}),s.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone."})]})]}),s.jsxs("p",{className:"text-gray-700 mb-6",children:["You are about to delete the task: ",s.jsxs("strong",{children:['"',a,'"']})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:n,children:"Cancel"}),s.jsx("button",{type:"button",onClick:r,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})]})}):null}function I_({task:t,onStatusUpdate:e,isLoading:r=!1}){const[a,n]=j.useState(!1),i=c=>{switch(c){case"completed":return s.jsx(mr,{className:"w-4 h-4"});case"in_progress":return s.jsx(lt,{className:"w-4 h-4"});case"cancelled":return s.jsx(Re,{className:"w-4 h-4"});default:return s.jsx(lt,{className:"w-4 h-4"})}},l=c=>{switch(c){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=c=>{e(t._id,c),n(!1)};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>n(!a),disabled:r,className:`px-2 py-1 text-xs font-semibold rounded-full ${l(t.status)} hover:opacity-80 transition-opacity flex items-center gap-1`,children:[i(t.status),t.status.replace("_"," ")]}),a&&s.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[120px]",children:s.jsxs("div",{className:"py-1",children:[t.status!=="pending"&&s.jsxs("button",{onClick:()=>o("pending"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[s.jsx(lt,{className:"w-4 h-4"}),"Pending"]}),t.status!=="in_progress"&&s.jsxs("button",{onClick:()=>o("in_progress"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[s.jsx(lt,{className:"w-4 h-4"}),"In Progress"]}),t.status!=="completed"&&s.jsxs("button",{onClick:()=>o("completed"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[s.jsx(mr,{className:"w-4 h-4"}),"Completed"]}),t.status!=="cancelled"&&s.jsxs("button",{onClick:()=>o("cancelled"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[s.jsx(Re,{className:"w-4 h-4"}),"Cancelled"]})]})}),a&&s.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>n(!1)})]})}const Ls={async getTasks(t={}){const e=new URLSearchParams;return Object.entries(t).forEach(([a,n])=>{n!==void 0&&n!==""&&e.append(a,n.toString())}),await ae(A.get(`/tasks?${e.toString()}`))},async getTask(t){return await ae(A.get(`/tasks/${t}`))},async createTask(t){return await ae(A.post("/tasks",t))},async updateTask(t,e){return await ae(A.put(`/tasks/${t}`,e))},async deleteTask(t){return await ae(A.delete(`/tasks/${t}`))},async updateTaskStatus(t,e){return await ae(A.put(`/tasks/${t}`,{status:e}))},async updateTaskProgress(t,e){return await ae(A.put(`/tasks/${t}`,{progress:e}))},async addTaskNote(t,e){return await ae(A.post(`/tasks/${t}/notes`,{content:e}))},async getTaskStats(){return await ae(A.get("/tasks/stats/overview"))},async getDailyProgress(t){const e=t?`?date=${t}`:"";return await ae(A.get(`/tasks/daily-progress${e}`))},async getTasksByType(t){return await ae(A.get(`/tasks/type/${t}`))},async getOverdueTasks(){return await ae(A.get("/tasks/overdue"))},async getMyTasks(t={}){const e=new URLSearchParams;return Object.entries(t).forEach(([a,n])=>{n!==void 0&&n!==""&&e.append(a,n.toString())}),await ae(A.get(`/tasks/my-tasks?${e.toString()}`))},async bulkUpdateTasks(t,e){return await ae(A.put("/tasks/bulk-update",{taskIds:t,updates:e}))},async searchTasks(t){return await ae(A.get(`/tasks/search?q=${encodeURIComponent(t)}`))}},Gr=q("tasks/fetchTasks",async(t={},{rejectWithValue:e})=>{var r,a;try{return(await Ls.getTasks(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch tasks")}}),Zm=q("tasks/fetchTask",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Ls.getTask(t)).data.task}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch task")}}),Ec=q("tasks/createTask",async(t,{rejectWithValue:e})=>{var r,a;try{const n=await Ls.createTask(t);return C.success("Task created successfully!"),n.data.task}catch(n){const i=((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create task";return C.error(i),e(i)}}),hl=q("tasks/updateTask",async({id:t,taskData:e},{rejectWithValue:r})=>{var a,n;try{const i=await Ls.updateTask(t,e);return C.success("Task updated successfully!"),i.data.task}catch(i){const l=((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update task";return C.error(l),r(l)}}),Ic=q("tasks/deleteTask",async(t,{rejectWithValue:e})=>{var r,a;try{return await Ls.deleteTask(t),C.success("Task deleted successfully!"),t}catch(n){const i=((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete task";return C.error(i),e(i)}}),R_=q("tasks/updateStatus",async({id:t,status:e},{rejectWithValue:r})=>{var a,n;try{const i=await Ls.updateTaskStatus(t,e);return C.success("Task status updated!"),i.data.task}catch(i){const l=((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update task status";return C.error(l),r(l)}}),L_=q("tasks/updateProgress",async({id:t,progress:e},{rejectWithValue:r})=>{var a,n;try{return(await Ls.updateTaskProgress(t,e)).data.task}catch(i){const l=((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update task progress";return C.error(l),r(l)}}),O_=q("tasks/addNote",async({id:t,note:e},{rejectWithValue:r})=>{var a,n;try{const i=await Ls.addTaskNote(t,e);return C.success("Note added successfully!"),i.data.task}catch(i){const l=((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to add note";return C.error(l),r(l)}}),Qa=q("tasks/fetchStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Ls.getTaskStats()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch task stats")}}),eh=q("tasks/fetchDailyProgress",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Ls.getDailyProgress(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch daily progress")}}),th=q("tasks/fetchMyTasks",async(t={},{rejectWithValue:e})=>{var r,a;try{return(await Ls.getMyTasks(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch my tasks")}}),sh=q("tasks/searchTasks",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Ls.searchTasks(t)).data.tasks}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to search tasks")}}),F_={list:[],currentTask:null,stats:null,dailyProgress:null,myTasks:[],searchResults:[],loading:!1,error:null,pagination:null,searchLoading:!1},$_=wt({name:"tasks",initialState:F_,reducers:{clearError:t=>{t.error=null},clearCurrentTask:t=>{t.currentTask=null},clearSearchResults:t=>{t.searchResults=[]},setCurrentTask:(t,e)=>{t.currentTask=e.payload}},extraReducers:t=>{t.addCase(Gr.pending,e=>{e.loading=!0,e.error=null}).addCase(Gr.fulfilled,(e,r)=>{e.loading=!1,e.list=r.payload.tasks,e.pagination=r.payload.pagination}).addCase(Gr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Zm.pending,e=>{e.loading=!0,e.error=null}).addCase(Zm.fulfilled,(e,r)=>{e.loading=!1,e.currentTask=r.payload}).addCase(Zm.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Ec.pending,e=>{e.loading=!0,e.error=null}).addCase(Ec.fulfilled,(e,r)=>{e.loading=!1,e.list.unshift(r.payload),e.pagination&&(e.pagination.totalTasks+=1)}).addCase(Ec.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(hl.pending,e=>{e.loading=!0,e.error=null}).addCase(hl.fulfilled,(e,r)=>{var i;e.loading=!1;const a=e.list.findIndex(l=>l._id===r.payload._id);a!==-1&&(e.list[a]=r.payload),((i=e.currentTask)==null?void 0:i._id)===r.payload._id&&(e.currentTask=r.payload);const n=e.myTasks.findIndex(l=>l._id===r.payload._id);n!==-1&&(e.myTasks[n]=r.payload)}).addCase(hl.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Ic.pending,e=>{e.loading=!0,e.error=null}).addCase(Ic.fulfilled,(e,r)=>{var a;e.loading=!1,e.list=e.list.filter(n=>n._id!==r.payload),e.myTasks=e.myTasks.filter(n=>n._id!==r.payload),e.pagination&&(e.pagination.totalTasks-=1),((a=e.currentTask)==null?void 0:a._id)===r.payload&&(e.currentTask=null)}).addCase(Ic.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(R_.fulfilled,(e,r)=>{var i;const a=e.list.findIndex(l=>l._id===r.payload._id);a!==-1&&(e.list[a]=r.payload),((i=e.currentTask)==null?void 0:i._id)===r.payload._id&&(e.currentTask=r.payload);const n=e.myTasks.findIndex(l=>l._id===r.payload._id);n!==-1&&(e.myTasks[n]=r.payload)}),t.addCase(L_.fulfilled,(e,r)=>{var i;const a=e.list.findIndex(l=>l._id===r.payload._id);a!==-1&&(e.list[a]=r.payload),((i=e.currentTask)==null?void 0:i._id)===r.payload._id&&(e.currentTask=r.payload);const n=e.myTasks.findIndex(l=>l._id===r.payload._id);n!==-1&&(e.myTasks[n]=r.payload)}),t.addCase(O_.fulfilled,(e,r)=>{var i;const a=e.list.findIndex(l=>l._id===r.payload._id);a!==-1&&(e.list[a]=r.payload),((i=e.currentTask)==null?void 0:i._id)===r.payload._id&&(e.currentTask=r.payload);const n=e.myTasks.findIndex(l=>l._id===r.payload._id);n!==-1&&(e.myTasks[n]=r.payload)}),t.addCase(Qa.pending,e=>{e.loading=!0,e.error=null}).addCase(Qa.fulfilled,(e,r)=>{e.loading=!1,e.stats=r.payload}).addCase(Qa.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(eh.pending,e=>{e.loading=!0,e.error=null}).addCase(eh.fulfilled,(e,r)=>{e.loading=!1,e.dailyProgress=r.payload}).addCase(eh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(th.pending,e=>{e.loading=!0,e.error=null}).addCase(th.fulfilled,(e,r)=>{e.loading=!1,e.myTasks=r.payload.tasks,e.pagination=r.payload.pagination}).addCase(th.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(sh.pending,e=>{e.searchLoading=!0,e.error=null}).addCase(sh.fulfilled,(e,r)=>{e.searchLoading=!1,e.searchResults=r.payload}).addCase(sh.rejected,(e,r)=>{e.searchLoading=!1,e.error=r.payload})}}),z_=$_.reducer;function B_(){var W,J,V,G;const t=we(),[e,r]=j.useState("all"),[a,n]=j.useState("all"),[i,l]=j.useState(""),[o,c]=j.useState(!0),[d,u]=j.useState(!1),[m,h]=j.useState(!1),[x,g]=j.useState(null),[f,y]=j.useState(!1),{list:p,loading:b,stats:v}=ve(M=>M.tasks);j.useEffect(()=>{(async()=>{try{c(!0),await Promise.all([t(Gr({status:e!=="all"?e:void 0,priority:a!=="all"?a:void 0,search:i||void 0})),t(Qa())])}catch(z){console.error("Error loading tasks:",z),C.error("Failed to load tasks")}finally{c(!1)}})()},[t]),j.useEffect(()=>{o||t(Gr({status:e!=="all"?e:void 0,priority:a!=="all"?a:void 0,search:i||void 0}))},[e,a,i,t]);const w=p||[];j.useEffect(()=>{p&&p.length>0&&console.log("Tasks with customer data:",p.map(M=>({id:M._id,title:M.title,customer:M.customer,customerType:typeof M.customer})))},[p]);const N=async M=>{try{y(!0),x?(await t(hl({id:x._id,taskData:M})),C.success("Task updated successfully!")):(await t(Ec(M)),C.success("Task created successfully!")),u(!1),g(null),t(Gr({status:e!=="all"?e:void 0,priority:a!=="all"?a:void 0,search:i||void 0})),t(Qa())}catch(z){console.error("Error saving task:",z),C.error("Failed to save task")}finally{y(!1)}},S=async()=>{if(x)try{y(!0),await t(Ic(x._id)),C.success("Task deleted successfully!"),h(!1),g(null),t(Gr({status:e!=="all"?e:void 0,priority:a!=="all"?a:void 0,search:i||void 0})),t(Qa())}catch(M){console.error("Error deleting task:",M),C.error("Failed to delete task")}finally{y(!1)}},k=async(M,z)=>{try{await t(hl({id:M,taskData:{status:z}})),C.success("Task status updated successfully!"),t(Gr({status:e!=="all"?e:void 0,priority:a!=="all"?a:void 0,search:i||void 0})),t(Qa())}catch(D){console.error("Error updating task status:",D),C.error("Failed to update task status")}},P=M=>{g(M),u(!0)},_=M=>{g(M),h(!0)},L=()=>{g(null),u(!0)},T=M=>{switch(M){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},U=M=>{switch(M){case"maintenance":return s.jsx(lt,{className:"w-4 h-4"});case"repair":return s.jsx(ts,{className:"w-4 h-4"});case"inspection":return s.jsx(mr,{className:"w-4 h-4"});case"follow_up":return s.jsx(hs,{className:"w-4 h-4"});case"marketing":return s.jsx(vt,{className:"w-4 h-4"});case"sales":return s.jsx(vt,{className:"w-4 h-4"});case"collections":return s.jsx(vt,{className:"w-4 h-4"});case"appointments":return s.jsx(vt,{className:"w-4 h-4"});case"research":return s.jsx(ts,{className:"w-4 h-4"});case"other":return s.jsx(lt,{className:"w-4 h-4"});default:return s.jsx(vt,{className:"w-4 h-4"})}},H=M=>new Date(M).toLocaleDateString();return o?s.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600 border-2 border-blue-600 border-t-transparent rounded-full"}),s.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(It,{title:"Task Management"}),s.jsxs("button",{onClick:L,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Add Task"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((W=v==null?void 0:v.overview)==null?void 0:W.totalTasks)||(p==null?void 0:p.length)||0})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(vt,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:((J=v==null?void 0:v.overview)==null?void 0:J.pendingTasks)||w.filter(M=>M.status==="pending").length})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:s.jsx(lt,{className:"w-6 h-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:((V=v==null?void 0:v.overview)==null?void 0:V.inProgressTasks)||w.filter(M=>M.status==="in_progress").length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:((G=v==null?void 0:v.overview)==null?void 0:G.completedTasks)||w.filter(M=>M.status==="completed").length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(mr,{className:"w-6 h-6 text-green-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(wa,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:i,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("select",{value:e,onChange:M=>r(M.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]}),s.jsxs("select",{value:a,onChange:M=>n(M.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"p-6",children:[b?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"w-8 h-8 animate-spin text-blue-600 border-2 border-blue-600 border-t-transparent rounded-full"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading tasks..."})]}):s.jsx("div",{className:"space-y-4",children:w.map(M=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-1",children:U(M.type)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:M.title}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:M.description}),s.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[s.jsx(hs,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-500 text-sm",children:M.customer?typeof M.customer=="string"?`Customer ID: ${M.customer}`:`Customer: ${M.customer.businessName||M.customer.name||"Unknown"}`:"No customer assigned"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full border ${T(M.priority)}`,children:M.priority}),s.jsx(I_,{task:M,onStatusUpdate:k,isLoading:f})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{children:["Assigned to: ",s.jsx("strong",{children:typeof M.assignedTo=="string"?M.assignedTo:M.assignedTo.name})]}),s.jsxs("span",{className:"capitalize",children:["Type: ",s.jsx("strong",{children:M.type.replace("-"," ")})]}),M.progress!==void 0&&s.jsxs("span",{children:["Progress: ",s.jsxs("strong",{children:[M.progress,"%"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vt,{className:"w-4 h-4"}),s.jsxs("span",{children:["Due: ",H(M.dueDate)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>P(M),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit task",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>_(M),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete task",children:s.jsx(Le,{className:"w-4 h-4"})})]})]})]})]},M._id))}),!b&&w.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No tasks found"}),s.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters or create a new task."})]})]})}),s.jsx(M_,{isOpen:d,onClose:()=>{u(!1),g(null)},onSave:N,task:x,isLoading:f}),s.jsx(E_,{isOpen:m,onClose:()=>{h(!1),g(null)},onConfirm:S,taskTitle:(x==null?void 0:x.title)||"",isLoading:f})]})}function V_({isOpen:t,onClose:e,onSave:r,promotion:a,isLoading:n=!1}){const[i,l]=j.useState({title:"",description:"",type:"discount",discountValue:0,discountType:"percentage",startDate:"",endDate:"",status:"scheduled",targetAudience:"",maxUsage:void 0,conditions:""}),[o,c]=j.useState({});j.useEffect(()=>{l(a?{title:a.title,description:a.description,type:a.type,discountValue:a.discountValue,discountType:a.discountType,startDate:a.startDate.split("T")[0],endDate:a.endDate.split("T")[0],status:a.status,targetAudience:a.targetAudience,maxUsage:a.maxUsage,conditions:a.conditions||""}:{title:"",description:"",type:"discount",discountValue:0,discountType:"percentage",startDate:"",endDate:"",status:"scheduled",targetAudience:"",maxUsage:void 0,conditions:""}),c({})},[a,t]);const d=(h,x)=>{l(g=>({...g,[h]:x})),o[h]&&c(g=>({...g,[h]:""}))},u=()=>{const h={};return i.title.trim()||(h.title="Title is required"),i.description.trim()||(h.description="Description is required"),i.targetAudience.trim()||(h.targetAudience="Target audience is required"),i.startDate||(h.startDate="Start date is required"),i.endDate||(h.endDate="End date is required"),i.startDate&&i.endDate&&i.startDate>=i.endDate&&(h.endDate="End date must be after start date"),i.discountValue<0&&(h.discountValue="Discount value cannot be negative"),i.discountType==="percentage"&&i.discountValue>100&&(h.discountValue="Percentage cannot exceed 100%"),i.maxUsage!==void 0&&i.maxUsage<1&&(h.maxUsage="Max usage must be at least 1"),c(h),Object.keys(h).length===0},m=h=>{if(h.preventDefault(),!u())return;const x={...i,startDate:new Date(i.startDate).toISOString(),endDate:new Date(i.endDate).toISOString()};(!x.conditions||x.conditions.trim()==="")&&delete x.conditions,r(x)};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:a?"Edit Promotion":"Create New Promotion"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:""})]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),s.jsx("input",{type:"text",value:i.title,onChange:h=>d("title",h.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter promotion title"}),o.title&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),s.jsxs("select",{value:i.type,onChange:h=>d("type",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"discount",children:"Discount"}),s.jsx("option",{value:"service",children:"Service"}),s.jsx("option",{value:"referral",children:"Referral"}),s.jsx("option",{value:"seasonal",children:"Seasonal"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),s.jsx("textarea",{value:i.description,onChange:h=>d("description",h.target.value),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter promotion description"}),o.description&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.description})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type *"}),s.jsxs("select",{value:i.discountType,onChange:h=>d("discountType",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"percentage",children:"Percentage"}),s.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Value *"}),s.jsx("input",{type:"number",value:i.discountValue,onChange:h=>d("discountValue",parseFloat(h.target.value)||0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.discountValue?"border-red-500":"border-gray-300"}`,placeholder:i.discountType==="percentage"?"0-100":"0",min:"0",max:i.discountType==="percentage"?"100":void 0}),o.discountValue&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.discountValue})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),s.jsxs("select",{value:i.status,onChange:h=>d("status",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"paused",children:"Paused"}),s.jsx("option",{value:"ended",children:"Ended"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),s.jsx("input",{type:"date",value:i.startDate,onChange:h=>d("startDate",h.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.startDate?"border-red-500":"border-gray-300"}`}),o.startDate&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.startDate})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),s.jsx("input",{type:"date",value:i.endDate,onChange:h=>d("endDate",h.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.endDate?"border-red-500":"border-gray-300"}`}),o.endDate&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.endDate})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Audience *"}),s.jsx("input",{type:"text",value:i.targetAudience,onChange:h=>d("targetAudience",h.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.targetAudience?"border-red-500":"border-gray-300"}`,placeholder:"e.g., All Customers, Students, etc."}),o.targetAudience&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.targetAudience})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Usage (Optional)"}),s.jsx("input",{type:"number",value:i.maxUsage||"",onChange:h=>d("maxUsage",h.target.value?parseInt(h.target.value):0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.maxUsage?"border-red-500":"border-gray-300"}`,placeholder:"Leave empty for unlimited",min:"1"}),o.maxUsage&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.maxUsage})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conditions (Optional)"}),s.jsx("textarea",{value:i.conditions,onChange:h=>d("conditions",h.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter any special conditions or requirements"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:n,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:n,children:n?"Saving...":a?"Update Promotion":"Create Promotion"})]})]})]})}):null}function U_({isOpen:t,onClose:e,onConfirm:r,promotionTitle:a,isLoading:n=!1}){return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-full mr-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Promotion"}),s.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone."})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to delete the promotion ",s.jsxs("strong",{children:['"',a,'"']}),"?"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This will permanently remove the promotion from the system."})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:n,children:"Cancel"}),s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:n,children:n?"Deleting...":"Delete Promotion"})]})]})}):null}const Da={async getPromotions(t={}){const e=new URLSearchParams;return Object.entries(t).forEach(([a,n])=>{n!==void 0&&n!==""&&e.append(a,n.toString())}),await ae(A.get(`/promotions?${e.toString()}`))},async getPromotion(t){return await ae(A.get(`/promotions/${t}`))},async createPromotion(t){return await ae(A.post("/promotions",t))},async updatePromotion(t,e){return await ae(A.put(`/promotions/${t}`,e))},async deletePromotion(t){return await ae(A.delete(`/promotions/${t}`))},async updatePromotionStatus(t,e){return await ae(A.put(`/promotions/${t}/status`,{status:e}))},async getPromotionStats(){return await ae(A.get("/promotions/stats/overview"))},async getActivePromotions(){return await ae(A.get("/promotions/active"))},async searchPromotions(t){return await ae(A.get(`/promotions?search=${encodeURIComponent(t)}`))}},Jr=q("promotions/fetchPromotions",async(t={},{rejectWithValue:e})=>{var r,a;try{return(await Da.getPromotions(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch promotions")}}),rh=q("promotions/fetchPromotion",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Da.getPromotion(t)).data.promotion}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch promotion")}}),Rc=q("promotions/createPromotion",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Da.createPromotion(t)).data.promotion}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create promotion")}}),Lc=q("promotions/updatePromotion",async({id:t,promotionData:e},{rejectWithValue:r})=>{var a,n;try{return(await Da.updatePromotion(t,e)).data.promotion}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update promotion")}}),Oc=q("promotions/deletePromotion",async(t,{rejectWithValue:e})=>{var r,a;try{return await Da.deletePromotion(t),t}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete promotion")}}),Fc=q("promotions/updatePromotionStatus",async({id:t,status:e},{rejectWithValue:r})=>{var a,n;try{return(await Da.updatePromotionStatus(t,e)).data.promotion}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update promotion status")}}),Ga=q("promotions/fetchPromotionStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Da.getPromotionStats()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch promotion stats")}}),ah=q("promotions/fetchActivePromotions",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Da.getActivePromotions()).data.activePromotions}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch active promotions")}}),H_={list:[],current:null,active:[],stats:null,loading:!1,error:null,pagination:null},W_=wt({name:"promotions",initialState:H_,reducers:{clearError:t=>{t.error=null},clearCurrent:t=>{t.current=null},clearActive:t=>{t.active=[]}},extraReducers:t=>{t.addCase(Jr.pending,e=>{e.loading=!0,e.error=null}).addCase(Jr.fulfilled,(e,r)=>{e.loading=!1,e.list=r.payload.promotions,e.pagination=r.payload.pagination}).addCase(Jr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(rh.pending,e=>{e.loading=!0,e.error=null}).addCase(rh.fulfilled,(e,r)=>{e.loading=!1,e.current=r.payload}).addCase(rh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Rc.pending,e=>{e.loading=!0,e.error=null}).addCase(Rc.fulfilled,(e,r)=>{e.loading=!1,e.list.unshift(r.payload)}).addCase(Rc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Lc.pending,e=>{e.loading=!0,e.error=null}).addCase(Lc.fulfilled,(e,r)=>{var n;e.loading=!1;const a=e.list.findIndex(i=>i._id===r.payload._id);a!==-1&&(e.list[a]=r.payload),((n=e.current)==null?void 0:n._id)===r.payload._id&&(e.current=r.payload)}).addCase(Lc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Oc.pending,e=>{e.loading=!0,e.error=null}).addCase(Oc.fulfilled,(e,r)=>{var a;e.loading=!1,e.list=e.list.filter(n=>n._id!==r.payload),((a=e.current)==null?void 0:a._id)===r.payload&&(e.current=null)}).addCase(Oc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Fc.pending,e=>{e.loading=!0,e.error=null}).addCase(Fc.fulfilled,(e,r)=>{var n;e.loading=!1;const a=e.list.findIndex(i=>i._id===r.payload._id);a!==-1&&(e.list[a]=r.payload),((n=e.current)==null?void 0:n._id)===r.payload._id&&(e.current=r.payload)}).addCase(Fc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Ga.pending,e=>{e.loading=!0,e.error=null}).addCase(Ga.fulfilled,(e,r)=>{e.loading=!1,e.stats=r.payload}).addCase(Ga.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(ah.pending,e=>{e.loading=!0,e.error=null}).addCase(ah.fulfilled,(e,r)=>{e.loading=!1,e.active=r.payload}).addCase(ah.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),q_=W_.reducer;function Y_(){var J,V,G,M;const t=we(),[e,r]=j.useState("all"),[a,n]=j.useState("all"),[i,l]=j.useState(""),[o,c]=j.useState(!0),[d,u]=j.useState(!1),[m,h]=j.useState(!1),[x,g]=j.useState(null),[f,y]=j.useState(!1),{list:p,loading:b,stats:v}=ve(z=>z.promotions);j.useEffect(()=>{(async()=>{try{c(!0),await Promise.all([t(Jr({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0})),t(Ga())])}catch(D){console.error("Error loading promotions:",D),C.error("Failed to load promotions")}finally{c(!1)}})()},[t]),j.useEffect(()=>{o||t(Jr({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0}))},[e,a,i,t]);const w=p||[],N=async z=>{try{y(!0),x?(await t(Lc({id:x._id,promotionData:z})),C.success("Promotion updated successfully!")):(await t(Rc(z)),C.success("Promotion created successfully!")),u(!1),g(null),t(Jr({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0})),t(Ga())}catch(D){console.error("Error saving promotion:",D),C.error("Failed to save promotion")}finally{y(!1)}},S=async()=>{if(x)try{y(!0),await t(Oc(x._id)),C.success("Promotion deleted successfully!"),h(!1),g(null),t(Jr({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0})),t(Ga())}catch(z){console.error("Error deleting promotion:",z),C.error("Failed to delete promotion")}finally{y(!1)}},k=async(z,D)=>{try{await t(Fc({id:z,status:D})),C.success("Promotion status updated successfully!"),t(Jr({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0})),t(Ga())}catch(X){console.error("Error updating promotion status:",X),C.error("Failed to update promotion status")}},P=z=>{g(z),u(!0)},_=z=>{g(z),h(!0)},L=()=>{g(null),u(!0)},T=z=>{switch(z){case"active":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"ended":return"bg-gray-100 text-gray-800";case"paused":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},U=z=>{switch(z){case"discount":return"bg-purple-100 text-purple-800";case"service":return"bg-blue-100 text-blue-800";case"referral":return"bg-green-100 text-green-800";case"seasonal":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},H=(z,D)=>D?z/D*100:0,W=z=>new Date(z).toLocaleDateString();return o?s.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600 border-2 border-blue-600 border-t-transparent rounded-full"}),s.jsx("p",{className:"text-gray-600",children:"Loading promotions..."})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(It,{title:"Marketing & Promotions"}),s.jsxs("button",{onClick:L,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Create Promotion"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active Promotions"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:((J=v==null?void 0:v.overview)==null?void 0:J.activePromotions)||w.filter(z=>z.status==="active"&&z.isActive!==!1).length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(py,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Usage"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:((V=v==null?void 0:v.overview)==null?void 0:V.totalUsage)||w.filter(z=>z.isActive!==!1).reduce((z,D)=>z+D.usageCount,0)})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(Or,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Scheduled"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:((G=v==null?void 0:v.overview)==null?void 0:G.scheduledPromotions)||w.filter(z=>z.status==="scheduled"&&z.isActive!==!1).length})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:s.jsx(vt,{className:"w-6 h-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Savings"}),s.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["$",Math.round(((M=v==null?void 0:v.overview)==null?void 0:M.avgDiscountValue)||0)]})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:s.jsx(Na,{className:"w-6 h-6 text-yellow-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(wa,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search promotions...",value:i,onChange:z=>l(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("select",{value:e,onChange:z=>r(z.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"ended",children:"Ended"}),s.jsx("option",{value:"paused",children:"Paused"})]}),s.jsxs("select",{value:a,onChange:z=>n(z.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"discount",children:"Discount"}),s.jsx("option",{value:"service",children:"Service"}),s.jsx("option",{value:"referral",children:"Referral"}),s.jsx("option",{value:"seasonal",children:"Seasonal"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:w.map(z=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:z.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${U(z.type)}`,children:z.type}),s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${T(z.status)}`,children:z.status})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>P(z),className:"p-2 text-gray-400 hover:text-blue-600",title:"Edit promotion",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>_(z),className:"p-2 text-gray-400 hover:text-red-600",title:"Delete promotion",children:s.jsx(Le,{className:"w-4 h-4"})}),z.status==="active"?s.jsx("button",{onClick:()=>k(z._id,"paused"),className:"p-2 text-gray-400 hover:text-yellow-600",title:"Pause promotion",children:s.jsx(F2,{className:"w-4 h-4"})}):z.status==="paused"?s.jsx("button",{onClick:()=>k(z._id,"active"),className:"p-2 text-gray-400 hover:text-green-600",title:"Activate promotion",children:s.jsx($2,{className:"w-4 h-4"})}):null]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:z.description}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Discount"}),s.jsx("span",{className:"font-medium",children:z.discountType==="percentage"?`${z.discountValue}% off`:z.discountValue===0?"Free":`$${z.discountValue} off`})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Valid Period"}),s.jsxs("span",{className:"font-medium",children:[W(z.startDate)," - ",W(z.endDate)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Target"}),s.jsx("span",{className:"font-medium",children:z.targetAudience})]}),z.maxUsage&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Usage"}),s.jsxs("span",{className:"font-medium",children:[z.usageCount,"/",z.maxUsage]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${H(z.usageCount,z.maxUsage)}%`}})})]}),z.conditions&&s.jsxs("div",{className:"text-xs text-gray-500 bg-gray-50 p-2 rounded",children:[s.jsx("strong",{children:"Conditions:"})," ",z.conditions]})]})]},z._id))}),!b&&w.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(py,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No promotions found"}),s.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters or create a new promotion."})]}),s.jsx(V_,{isOpen:d,onClose:()=>{u(!1),g(null)},onSave:N,promotion:x,isLoading:f}),s.jsx(U_,{isOpen:m,onClose:()=>{h(!1),g(null)},onConfirm:S,promotionTitle:(x==null?void 0:x.title)||"",isLoading:f})]})}const ko="/api/communication-logs",Ja=q("communicationLogs/fetchAll",async(t={},{rejectWithValue:e})=>{try{const r=new URLSearchParams;return Object.entries(t).forEach(([n,i])=>{i!==void 0&&i!==""&&r.append(n,i.toString())}),await So(`${ko}?${r.toString()}`)}catch(r){return e(r.message||"Failed to fetch communication logs")}}),$c=q("communicationLogs/create",async(t,{rejectWithValue:e})=>{try{const r=await So(ko,{method:"POST",body:JSON.stringify(t)});return C.success("Communication log created successfully"),r}catch(r){return C.error(r.message||"Failed to create communication log"),e(r.message||"Failed to create communication log")}}),zc=q("communicationLogs/update",async({id:t,logData:e},{rejectWithValue:r})=>{try{const a=await So(`${ko}/${t}`,{method:"PUT",body:JSON.stringify(e)});return C.success("Communication log updated successfully"),a}catch(a){return C.error(a.message||"Failed to update communication log"),r(a.message||"Failed to update communication log")}}),Bc=q("communicationLogs/delete",async(t,{rejectWithValue:e})=>{try{return await So(`${ko}/${t}`,{method:"DELETE"}),C.success("Communication log deleted successfully"),t}catch(r){return C.error(r.message||"Failed to delete communication log"),e(r.message||"Failed to delete communication log")}}),Vc=q("communicationLogs/fetchStats",async(t,{rejectWithValue:e})=>{try{return await So(`${ko}/stats`)}catch(r){return e(r.message||"Failed to fetch communication statistics")}});function Yt({isOpen:t,onClose:e,children:r,title:a,submitText:n,onSubmit:i,submitColor:l="bg-blue-600",disableOutsideClose:o=!1,size:c="md"}){if(!t)return null;const d={sm:"max-w-sm",md:"max-w-xl",lg:"max-w-2xl",xl:"max-w-4xl"},u=m=>{m.target===m.currentTarget&&!o&&e()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:u,children:s.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full ${d[c]} max-h-[90vh] overflow-hidden flex flex-col animate-fadeIn`,children:[a&&s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:s.jsx(En,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:r}),n&&i&&s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-100",children:[s.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-200 font-medium",children:"Cancel"}),s.jsx("button",{onClick:i,className:`${l} text-white text-sm px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 font-medium`,children:n})]})]})})}function K_({onClose:t,onSave:e,isLoading:r=!1}){const[a,n]=j.useState({customerId:"",customerName:"",date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),type:"phone",direction:"outbound",subject:"",content:"",outcome:"resolved",employeeName:"",priority:"medium",relatedService:""}),{list:i=[]}=ve(u=>u.customers),l=we();j.useEffect(()=>{(!i||i.length===0)&&l(Pt({}))},[l,i]);const o=(u,m)=>{n(h=>({...h,[u]:m}))},c=u=>{const m=i.find(h=>h._id===u||h.id===u);n(h=>({...h,customerId:u,customerName:(m==null?void 0:m.name)||""}))},d=()=>{if(!a.customerId||!a.subject||!a.content||!a.employeeName){alert("Please fill in all required fields.");return}e(a)};return s.jsx(Yt,{title:"Log Communication",onClose:t,onSubmit:d,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer *"}),s.jsxs("select",{value:a.customerId,onChange:u=>c(u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,children:[s.jsx("option",{value:"",children:"Select a customer"}),i.map(u=>s.jsx("option",{value:u._id,children:u.name},u._id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),s.jsx("input",{type:"date",value:a.date,onChange:u=>o("date",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time *"}),s.jsx("input",{type:"time",value:a.time,onChange:u=>o("time",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),s.jsxs("select",{value:a.type,onChange:u=>o("type",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,children:[s.jsx("option",{value:"phone",children:"Phone"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"in-person",children:"In-Person"}),s.jsx("option",{value:"sms",children:"SMS"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direction *"}),s.jsxs("select",{value:a.direction,onChange:u=>o("direction",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,children:[s.jsx("option",{value:"inbound",children:"Inbound"}),s.jsx("option",{value:"outbound",children:"Outbound"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),s.jsx("input",{type:"text",value:a.subject,onChange:u=>o("subject",u.target.value),placeholder:"Brief description",className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),s.jsx("textarea",{value:a.content,onChange:u=>o("content",u.target.value),placeholder:"Detailed notes",rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outcome *"}),s.jsxs("select",{value:a.outcome,onChange:u=>o("outcome",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,children:[s.jsx("option",{value:"resolved",children:"Resolved"}),s.jsx("option",{value:"follow-up-needed",children:"Follow-up Needed"}),s.jsx("option",{value:"appointment-scheduled",children:"Appointment Scheduled"}),s.jsx("option",{value:"no-answer",children:"No Answer"}),s.jsx("option",{value:"callback-requested",children:"Callback Requested"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority *"}),s.jsxs("select",{value:a.priority,onChange:u=>o("priority",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Name *"}),s.jsx("input",{type:"text",value:a.employeeName,onChange:u=>o("employeeName",u.target.value),placeholder:"Who handled this",className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Related Service"}),s.jsx("input",{type:"text",value:a.relatedService,onChange:u=>o("relatedService",u.target.value),placeholder:"e.g., Oil Change",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]})})}function X_({onClose:t,onSave:e,isLoading:r=!1,log:a}){const n=()=>typeof a.customerId=="object"&&a.customerId!==null?a.customerId._id||a.customerId.id:a.customerId,i=()=>typeof a.customerId=="object"&&a.customerId!==null?a.customerId.name||"":a.customerName||"",[l,o]=j.useState({customerId:n(),customerName:i(),date:a.date,time:a.time||"09:00",type:a.type,direction:a.direction,subject:a.subject||"",content:a.content,outcome:a.outcome||"resolved",employeeName:a.employeeName,priority:a.priority||"medium",relatedService:a.relatedService||""}),{list:c=[]}=ve(x=>x.customers),d=we();j.useEffect(()=>{(!c||c.length===0)&&d(Pt({}))},[d,c]),j.useEffect(()=>{o({customerId:n(),customerName:i(),date:a.date,time:a.time||"09:00",type:a.type,direction:a.direction,subject:a.subject||"",content:a.content,outcome:a.outcome||"resolved",employeeName:a.employeeName,priority:a.priority||"medium",relatedService:a.relatedService||""})},[a]);const u=(x,g)=>{o(f=>({...f,[x]:g}))},m=x=>{const g=c.find(f=>f._id===x||f.id===x);o(f=>({...f,customerId:x,customerName:(g==null?void 0:g.name)||""}))},h=()=>{if(!l.customerId||!l.date||!l.content||!l.employeeName){alert("Please fill in all required fields.");return}e(l)};return s.jsx(Yt,{onClose:t,title:"Edit Communication Log",onSubmit:h,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer *"}),s.jsxs("select",{value:l.customerId,onChange:x=>m(x.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Select a customer"}),c.map(x=>s.jsx("option",{value:x._id,children:x.name},x._id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),s.jsx("input",{type:"date",value:l.date,onChange:x=>u("date",x.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),s.jsx("input",{type:"time",value:l.time,onChange:x=>u("time",x.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),s.jsxs("select",{value:l.type,onChange:x=>u("type",x.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"phone",children:"Phone"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"in-person",children:"In-Person"}),s.jsx("option",{value:"sms",children:"SMS"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direction *"}),s.jsxs("select",{value:l.direction,onChange:x=>u("direction",x.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"inbound",children:"Inbound"}),s.jsx("option",{value:"outbound",children:"Outbound"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),s.jsx("input",{type:"text",value:l.subject,onChange:x=>u("subject",x.target.value),placeholder:"Enter subject",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),s.jsx("textarea",{value:l.content,onChange:x=>u("content",x.target.value),placeholder:"Enter communication content",rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outcome"}),s.jsxs("select",{value:l.outcome,onChange:x=>u("outcome",x.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"resolved",children:"Resolved"}),s.jsx("option",{value:"follow-up-needed",children:"Follow-up Needed"}),s.jsx("option",{value:"appointment-scheduled",children:"Appointment Scheduled"}),s.jsx("option",{value:"no-answer",children:"No Answer"}),s.jsx("option",{value:"callback-requested",children:"Callback Requested"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:l.priority,onChange:x=>u("priority",x.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Name *"}),s.jsx("input",{type:"text",value:l.employeeName,onChange:x=>u("employeeName",x.target.value),placeholder:"Enter employee name",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Related Service"}),s.jsx("input",{type:"text",value:l.relatedService,onChange:x=>u("relatedService",x.target.value),placeholder:"Enter related service",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})})}function Q_(){const[t,e]=j.useState("all"),[r,a]=j.useState(""),[n,i]=j.useState(null),[l,o]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(null),[h,x]=j.useState(null),g=we(),{logs:f,stats:y,loading:p}=ve(T=>T.communicationLogs),b=ve(T=>T.customers.list);j.useEffect(()=>{g(Ja({})),g(Vc()),g(Pt({}))},[g]);const v=f.filter(T=>{const U=t==="all"||T.type===t,H=T.content.toLowerCase().includes(r.toLowerCase())||(T.subject||"").toLowerCase().includes(r.toLowerCase());return U&&H}),w=T=>{switch(T){case"phone":return s.jsx(Ut,{className:"w-4 h-4"});case"email":return s.jsx(mt,{className:"w-4 h-4"});case"in-person":return s.jsx(hs,{className:"w-4 h-4"});case"sms":return s.jsx(Go,{className:"w-4 h-4"});default:return s.jsx(Go,{className:"w-4 h-4"})}},N=T=>{switch(T){case"phone":return"bg-green-100 text-green-800";case"email":return"bg-blue-100 text-blue-800";case"in-person":return"bg-purple-100 text-purple-800";case"sms":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},S=T=>{g($c(T)).then(U=>{U.meta.requestStatus==="fulfilled"&&(o(!1),g(Ja({})))})},k=T=>{m(T),d(!0)},P=T=>{if(!u)return;const U=u.id||u._id;g(zc({id:U,logData:T})).then(H=>{H.meta.requestStatus==="fulfilled"&&(d(!1),m(null),g(Ja({})))})},_=T=>{g(Bc(T)).then(U=>{U.meta.requestStatus==="fulfilled"&&(x(null),g(Ja({})))})},L=T=>{if(console.log("=== getCustomerName Debug ==="),console.log("Looking for customer with ID/Object:",T),console.log("Type of customerId:",typeof T),typeof T=="object"&&T!==null&&T.name)return console.log(" CustomerId is a customer object, returning name:",T.name),T.name;if(typeof T=="string"){if(console.log("CustomerId is string, searching in customer list..."),console.log("Available customers count:",b.length),b.length===0)return console.log(" No customers loaded yet!"),"Loading...";const U=b.find(H=>H.id===T||H._id===T);return U?console.log(" Found customer:",U):(console.log(" Customer not found for ID:",T),console.log("Available customer IDs:",b.map(H=>H.id||H._id))),(U==null?void 0:U.name)||"Unknown Customer"}return console.log(" CustomerId is neither string nor valid object:",T),"Unknown Customer"};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(It,{title:"Customer Communication Logs"}),s.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Log Communication"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Contacts"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(Go,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Phone Calls"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.filter(T=>T.type==="phone").length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(Ut,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Emails"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.filter(T=>T.type==="email").length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(mt,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"In-Person"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:f.filter(T=>T.type==="in-person").length})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:s.jsx(hs,{className:"w-6 h-6 text-purple-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(wa,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search communications...",value:r,onChange:T=>a(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("select",{value:t,onChange:T=>e(T.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"phone",children:"Phone"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"in-person",children:"In-Person"}),s.jsx("option",{value:"sms",children:"SMS"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsx("div",{className:"p-6",children:p?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-500",children:"Loading communication logs..."})]}):s.jsxs("div",{className:"space-y-4",children:[v.map(T=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`p-2 rounded-full ${N(T.type)}`,children:w(T.type)}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:T.subject||"No Subject"}),s.jsxs("div",{className:"flex items-center gap-1",children:[T.direction==="inbound"?s.jsx(u7,{className:"w-4 h-4 text-green-600"}):s.jsx(m7,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-xs text-gray-500 capitalize",children:T.direction})]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:T.content}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{children:["Customer: ",s.jsx("strong",{children:L(T.customerId)})]}),s.jsxs("span",{children:["Employee: ",s.jsx("strong",{children:T.employeeName})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>k(T),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{onClick:()=>x(T.id||T._id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 pt-2 border-t border-gray-100",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vt,{className:"w-4 h-4"}),s.jsx("span",{children:T.date})]})}),s.jsxs("button",{onClick:()=>i(T),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[s.jsx(Xs,{className:"w-4 h-4"}),"View Details"]})]})]},T.id)),v.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Go,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No communication logs found"}),s.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters or log a new communication."})]})]})})}),n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Communication Details"}),s.jsx("button",{onClick:()=>i(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Customer"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:L(n.customerId)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employee"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.employeeName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.date})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w(n.type),s.jsx("span",{className:"text-sm text-gray-900 capitalize",children:n.type})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subject"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:n.subject||"No Subject"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded",children:n.content})]})]})]})}),l&&s.jsx(K_,{onClose:()=>o(!1),onSave:S,isLoading:p}),c&&u&&s.jsx(X_,{onClose:()=>{d(!1),m(null)},onSave:P,isLoading:p,log:u}),h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Delete"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this communication log? This action cannot be undone."}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>_(h),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})}function G_(){const[t,e]=j.useState([]),[r,a]=j.useState(!0),[n,i]=j.useState(!1),[l,o]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(null),[h,x]=j.useState(!1),[g,f]=j.useState({name:"",subject:"",type:"regular",content:{html:"",plainText:""},settings:{fromName:"",fromEmail:"",replyTo:""},recipients:{listId:"",listName:"",recipientCount:0}});j.useEffect(()=>{y()},[]);const y=async()=>{try{a(!0);const T=await A.get("/mailchimp/campaigns");T.data.success&&e(T.data.data.campaigns)}catch(T){console.error("Error fetching campaigns:",T),C.error("Failed to fetch campaigns")}finally{a(!1)}},p=async T=>{var U,H;T.preventDefault(),x(!0);try{(await A.post("/mailchimp/campaigns",g)).data.success&&(C.success("Campaign created successfully"),i(!1),P(),y())}catch(W){console.error("Error creating campaign:",W),C.error(((H=(U=W.response)==null?void 0:U.data)==null?void 0:H.message)||"Failed to create campaign")}finally{x(!1)}},b=async T=>{var U,H;if(T.preventDefault(),!!u){x(!0);try{(await A.put(`/mailchimp/campaigns/${u._id}`,g)).data.success&&(C.success("Campaign updated successfully"),o(!1),P(),y())}catch(W){console.error("Error updating campaign:",W),C.error(((H=(U=W.response)==null?void 0:U.data)==null?void 0:H.message)||"Failed to update campaign")}finally{x(!1)}}},v=async()=>{var T,U;if(u){x(!0);try{(await A.delete(`/mailchimp/campaigns/${u._id}`)).data.success&&(C.success("Campaign deleted successfully"),d(!1),m(null),y())}catch(H){console.error("Error deleting campaign:",H),C.error(((U=(T=H.response)==null?void 0:T.data)==null?void 0:U.message)||"Failed to delete campaign")}finally{x(!1)}}},w=async T=>{try{(await A.post(`/mailchimp/campaigns/${T}/send`)).data.success&&(C.success("Campaign sent successfully"),y())}catch{C.error("Failed to send campaign")}},N=()=>{P(),i(!0)},S=T=>{m(T),f({name:T.name,subject:T.subject,type:T.type,content:T.content,settings:T.settings,recipients:T.recipients}),o(!0)},k=T=>{m(T),d(!0)},P=()=>{f({name:"",subject:"",type:"regular",content:{html:"",plainText:""},settings:{fromName:"",fromEmail:"",replyTo:""},recipients:{listId:"",listName:"",recipientCount:0}})},_=(T,U)=>{if(T.includes(".")){const[H,W]=T.split(".");f(J=>({...J,[H]:{...J[H],[W]:U}}))}else f(H=>({...H,[T]:U}))},L=T=>{switch(T){case"sent":return"bg-green-100 text-green-800";case"sending":return"bg-blue-100 text-blue-800";case"save":return"bg-gray-100 text-gray-800";case"schedule":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(It,{title:"MailChimp Integration",icon:mt}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Marketing Campaigns"}),s.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(_t,{className:"h-5 w-5 mr-2"}),"Create Campaign"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campaign"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Recipients"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Performance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading campaigns..."})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No campaigns found"})}):t.map(T=>{var U,H,W;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.name}),s.jsx("div",{className:"text-sm text-gray-500",children:T.subject})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L(T.status)}`,children:T.status})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:T.recipients.recipientCount.toLocaleString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsxs("div",{children:["Opens: ",((H=(U=T.analytics)==null?void 0:U.opens)==null?void 0:H.toLocaleString())||"0"]}),s.jsxs("div",{children:["Rate: ",(W=T.analytics)!=null&&W.openRate?`${T.analytics.openRate.toFixed(1)}%`:"N/A"]})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(T.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:s.jsx(Xs,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>S(T),className:"text-gray-600 hover:text-gray-900",children:s.jsx(kt,{className:"h-5 w-5"})}),T.status==="save"&&s.jsx("button",{onClick:()=>w(T._id),className:"text-green-600 hover:text-green-900",children:s.jsx(rm,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>k(T),className:"text-red-600 hover:text-red-900",children:s.jsx(Le,{className:"h-5 w-5"})})]})})]},T._id)})})]})})]}),n&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create New Campaign"}),s.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),s.jsx("input",{type:"text",value:g.name,onChange:T=>_("name",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Line *"}),s.jsx("input",{type:"text",value:g.subject,onChange:T=>_("subject",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Name *"}),s.jsx("input",{type:"text",value:g.settings.fromName,onChange:T=>_("settings.fromName",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Email *"}),s.jsx("input",{type:"email",value:g.settings.fromEmail,onChange:T=>_("settings.fromEmail",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reply To"}),s.jsx("input",{type:"email",value:g.settings.replyTo,onChange:T=>_("settings.replyTo",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HTML Content"}),s.jsx("textarea",{value:g.content.html,onChange:T=>_("content.html",T.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"<h1>Hello World</h1>"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plain Text Content"}),s.jsx("textarea",{value:g.content.plainText,onChange:T=>_("content.plainText",T.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Hello World"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"List ID *"}),s.jsx("input",{type:"text",value:g.recipients.listId,onChange:T=>_("recipients.listId",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., list123456",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"List Name"}),s.jsx("input",{type:"text",value:g.recipients.listName,onChange:T=>_("recipients.listName",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Newsletter Subscribers"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Creating...":"Create Campaign"})]})]})]})}),l&&u&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Campaign"}),s.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),s.jsx("input",{type:"text",value:g.name,onChange:T=>_("name",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Line *"}),s.jsx("input",{type:"text",value:g.subject,onChange:T=>_("subject",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Name *"}),s.jsx("input",{type:"text",value:g.settings.fromName,onChange:T=>_("settings.fromName",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Email *"}),s.jsx("input",{type:"email",value:g.settings.fromEmail,onChange:T=>_("settings.fromEmail",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reply To"}),s.jsx("input",{type:"email",value:g.settings.replyTo,onChange:T=>_("settings.replyTo",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HTML Content"}),s.jsx("textarea",{value:g.content.html,onChange:T=>_("content.html",T.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plain Text Content"}),s.jsx("textarea",{value:g.content.plainText,onChange:T=>_("content.plainText",T.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Hello World"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"List ID *"}),s.jsx("input",{type:"text",value:g.recipients.listId,onChange:T=>_("recipients.listId",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., list123456",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"List Name"}),s.jsx("input",{type:"text",value:g.recipients.listName,onChange:T=>_("recipients.listName",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Newsletter Subscribers"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Updating...":"Update Campaign"})]})]})]})}),c&&u&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Campaign"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete the campaign ",s.jsxs("strong",{children:['"',u.name,'"']}),"?"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This action cannot be undone."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{onClick:v,disabled:h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:h?"Deleting...":"Delete Campaign"})]})]})})]})}const _o={async getCampaigns(t={}){const e=new URLSearchParams;return Object.entries(t).forEach(([a,n])=>{n!==void 0&&n!==""&&e.append(a,n.toString())}),await ae(A.get(`/marketing/campaigns?${e.toString()}`))},async createCampaign(t){return await ae(A.post("/marketing/campaigns",t))},async deleteCampaign(t){return await ae(A.delete(`/marketing/campaigns/${t}`))},async updateCampaignStatus(t,e){return await ae(A.put(`/marketing/campaigns/${t}/status`,{status:e}))},async getCampaignStats(){return await ae(A.get("/marketing/campaigns/stats/overview"))}},Za=q("marketing/fetchCampaigns",async(t={},{rejectWithValue:e})=>{var r,a;try{return(await _o.getCampaigns(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch campaigns")}}),Uc=q("marketing/createCampaign",async(t,{rejectWithValue:e})=>{var r,a;try{return(await _o.createCampaign(t)).data.campaign}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create campaign")}}),Hc=q("marketing/deleteCampaign",async(t,{rejectWithValue:e})=>{var r,a;try{return await _o.deleteCampaign(t),t}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete campaign")}}),Wc=q("marketing/updateCampaignStatus",async({id:t,status:e},{rejectWithValue:r})=>{var a,n;try{return(await _o.updateCampaignStatus(t,e)).data.campaign}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update campaign status")}}),en=q("marketing/fetchCampaignStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await _o.getCampaignStats()).data.overview}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch campaign stats")}}),J_={campaigns:[],stats:null,loading:!1,error:null,pagination:null},Z_=wt({name:"marketing",initialState:J_,reducers:{clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Za.pending,e=>{e.loading=!0,e.error=null}).addCase(Za.fulfilled,(e,r)=>{e.loading=!1,e.campaigns=r.payload.campaigns,e.pagination=r.payload.pagination}).addCase(Za.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Uc.pending,e=>{e.loading=!0,e.error=null}).addCase(Uc.fulfilled,(e,r)=>{e.loading=!1,e.campaigns.unshift(r.payload)}).addCase(Uc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Hc.pending,e=>{e.loading=!0,e.error=null}).addCase(Hc.fulfilled,(e,r)=>{e.loading=!1,e.campaigns=e.campaigns.filter(a=>a._id!==r.payload)}).addCase(Hc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Wc.pending,e=>{e.loading=!0,e.error=null}).addCase(Wc.fulfilled,(e,r)=>{e.loading=!1;const a=e.campaigns.findIndex(n=>n._id===r.payload._id);a!==-1&&(e.campaigns[a]=r.payload)}).addCase(Wc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(en.pending,e=>{e.loading=!0,e.error=null}).addCase(en.fulfilled,(e,r)=>{e.loading=!1,e.stats=r.payload}).addCase(en.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),eP=Z_.reducer;function tP({isOpen:t,onClose:e,onSave:r,isLoading:a=!1}){const[n,i]=j.useState({name:"",type:"email",subject:"",content:"",recipients:[]}),[l,o]=j.useState({}),c=(m,h)=>{i(x=>({...x,[m]:h})),l[m]&&o(x=>({...x,[m]:""}))},d=()=>{var h;const m={};return n.name.trim()||(m.name="Campaign name is required"),n.content.trim()||(m.content="Content is required"),n.type==="email"&&!((h=n.subject)!=null&&h.trim())&&(m.subject="Subject is required for email campaigns"),o(m),Object.keys(m).length===0},u=m=>{var x;if(m.preventDefault(),!d())return;const h={...n};(h.type!=="email"||!((x=h.subject)!=null&&x.trim()))&&delete h.subject,r(h)};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Create New Campaign"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:a,children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),s.jsx("input",{type:"text",value:n.name,onChange:m=>c("name",m.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter campaign name"}),l.name&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Type *"}),s.jsxs("select",{value:n.type,onChange:m=>c("type",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"email",children:"Email Campaign"}),s.jsx("option",{value:"sms",children:"SMS Campaign"}),s.jsx("option",{value:"mailchimp",children:"MailChimp Campaign"})]})]})]}),n.type==="email"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),s.jsx("input",{type:"text",value:n.subject||"",onChange:m=>c("subject",m.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.subject?"border-red-500":"border-gray-300"}`,placeholder:"Enter email subject"}),l.subject&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.subject})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),s.jsx("textarea",{value:n.content,onChange:m=>c("content",m.target.value),rows:6,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.content?"border-red-500":"border-gray-300"}`,placeholder:`Enter your ${n.type} content here...`}),l.content&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.content})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:a,children:a?"Creating...":"Create Campaign"})]})]})]})}):null}function sP({isOpen:t,onClose:e,onConfirm:r,campaignName:a="this campaign",isLoading:n=!1}){return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Delete Campaign"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ts,{className:"w-8 h-8 text-red-500"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure?"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["This action cannot be undone. This will permanently delete"," ",s.jsxs("span",{className:"font-medium text-gray-900",children:['"',a,'"']}),"."]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:n,children:"Cancel"}),s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:n,children:n?"Deleting...":"Delete Campaign"})]})]})}):null}function rP(){const t=we(),[e,r]=j.useState("all"),[a,n]=j.useState("all"),[i,l]=j.useState(""),[o,c]=j.useState(!1),[d,u]=j.useState(!1),[m,h]=j.useState(null),[x,g]=j.useState(!1),{campaigns:f,stats:y,loading:p}=ve(_=>_.marketing);j.useEffect(()=>{(async()=>{try{await Promise.all([t(Za({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0})),t(en())])}catch(L){console.error("Error loading marketing data:",L),C.error("Failed to load marketing data")}})()},[t]),j.useEffect(()=>{p||t(Za({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0}))},[e,a,i,t]);const b=async _=>{try{g(!0),await t(Uc(_)),C.success("Campaign created successfully!"),c(!1),t(Za({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0})),t(en())}catch(L){console.error("Error creating campaign:",L),C.error("Failed to create campaign")}finally{g(!1)}},v=_=>{h(_),u(!0)},w=async()=>{if(m)try{g(!0),await t(Hc(m._id)),C.success("Campaign deleted successfully!"),u(!1),h(null),t(Za({status:e!=="all"?e:void 0,type:a!=="all"?a:void 0,search:i||void 0})),t(en())}catch(_){console.error("Error deleting campaign:",_),C.error("Failed to delete campaign")}finally{g(!1)}},N=async(_,L)=>{try{await t(Wc({id:_,status:L})),C.success("Campaign status updated successfully!"),t(en())}catch(T){console.error("Error updating campaign status:",T),C.error("Failed to update campaign status")}},S=_=>{switch(_){case"sent":return s.jsx(eo,{className:"w-5 h-5 text-green-500"});case"scheduled":return s.jsx(lt,{className:"w-5 h-5 text-blue-500"});case"draft":return s.jsx(kt,{className:"w-5 h-5 text-gray-500"});case"failed":return s.jsx(vi,{className:"w-5 h-5 text-red-500"});default:return s.jsx(ts,{className:"w-5 h-5 text-yellow-500"})}},k=_=>{switch(_){case"sent":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"draft":return"bg-gray-100 text-gray-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},P=_=>{switch(_){case"email":return s.jsx(mt,{className:"w-5 h-5 text-blue-500"});case"sms":return s.jsx(Ut,{className:"w-5 h-5 text-green-500"});case"mailchimp":return s.jsx(Or,{className:"w-5 h-5 text-purple-500"});default:return s.jsx(mt,{className:"w-5 h-5 text-gray-500"})}};return p?s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[s.jsx(It,{title:"Marketing Dashboard"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(mt,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Campaigns"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(y==null?void 0:y.totalCampaigns)||0})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Or,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Recipients"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((y==null?void 0:y.totalRecipients)||0).toLocaleString()})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Ud,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delivery Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[y!=null&&y.totalRecipients&&y.totalRecipients>0?(y.totalSent/y.totalRecipients*100).toFixed(1):"0.0","%"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(Xs,{className:"w-6 h-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Open Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[y!=null&&y.totalSent&&y.totalSent>0?(y.totalOpened/y.totalSent*100).toFixed(1):"0.0","%"]})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:e,onChange:_=>r(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"failed",children:"Failed"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),s.jsxs("select",{value:a,onChange:_=>n(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"sms",children:"SMS"}),s.jsx("option",{value:"mailchimp",children:"MailChimp"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),s.jsx("input",{type:"text",value:i,onChange:_=>l(_.target.value),placeholder:"Search campaigns...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{r("all"),n("all"),l("")},className:"w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear Filters"})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[s.jsx(mt,{className:"w-6 h-6 text-blue-600 mr-3"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Create Email Campaign"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Send to your customer list"})]})]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors",children:[s.jsx(Ut,{className:"w-6 h-6 text-green-600 mr-3"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Send SMS"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Quick text message"})]})]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-colors",children:[s.jsx(am,{className:"w-6 h-6 text-purple-600 mr-3"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Create Template"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Design reusable templates"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Campaigns"}),s.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(_t,{className:"h-5 w-5 mr-2"}),"Create Campaign"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campaign"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Recipients"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Performance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No campaigns found. Create your first campaign to get started."})}):f.map(_=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name}),s.jsx("div",{className:"text-sm text-gray-500",children:_.type})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[P(_.type),s.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:_.type})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[S(_.status),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(_.status)}`,children:_.status})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.recipientCount.toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[_.sentCount," sent",_.openedCount>0&&`  ${_.openedCount} opened`,_.clickedCount>0&&`  ${_.clickedCount} clicked`]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:()=>N(_._id,"sent"),disabled:_.status==="sent",className:"text-blue-600 hover:text-blue-900 disabled:text-gray-400",children:s.jsx(rm,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{C.success("View campaign details - Coming soon!")},className:"text-gray-600 hover:text-gray-900",title:"View Details",children:s.jsx(Xs,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{C.success("Edit campaign - Coming soon!")},className:"text-gray-600 hover:text-gray-900",title:"Edit Campaign",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>v(_),className:"text-red-600 hover:text-red-900",children:s.jsx(Le,{className:"w-4 h-4"})})]})})]},_._id))})]})})]}),s.jsx(tP,{isOpen:o,onClose:()=>c(!1),onSave:b,isLoading:x}),s.jsx(sP,{isOpen:d,onClose:()=>{u(!1),h(null)},onConfirm:w,campaignName:m==null?void 0:m.name,isLoading:x})]})}class aP{async sendSMS(e){return(await A.post("/sms/send",e)).data}async sendBulkSMS(e){return(await A.post("/sms/bulk",e)).data}async getHistory(e={},r=1,a=20){const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.to&&n.append("to",e.to),n.append("page",r.toString()),n.append("limit",a.toString()),(await A.get(`/sms/history?${n.toString()}`)).data}async getAnalytics(){return(await A.get("/sms/analytics")).data}async getTemplates(e={}){const r=new URLSearchParams;return e.category&&r.append("category",e.category),(await A.get(`/sms/templates?${r.toString()}`)).data}async createTemplate(e){return(await A.post("/sms/templates",e)).data}async useTemplate(e,r){return(await A.post(`/sms/templates/${e}/use`,r)).data}}const Bi=new aP;function nP(){const[t,e]=j.useState([]),[r,a]=j.useState([]),[n,i]=j.useState({totalSent:0,delivered:0,failed:0,pending:0,deliveryRate:0,totalCost:0}),[l,o]=j.useState(!0),[c,d]=j.useState("send"),[u,m]=j.useState({to:"",message:"",scheduledAt:"",priority:"normal"}),[h,x]=j.useState({recipients:"",message:"",scheduledAt:"",priority:"normal"});j.useEffect(()=>{g()},[]);const g=async()=>{var w;try{o(!0);const[N,S,k]=await Promise.all([Bi.getTemplates().catch(()=>({success:!0,data:[]})),Bi.getAnalytics().catch(()=>({success:!0,data:{overview:n}})),Bi.getHistory().catch(()=>({data:[],pagination:{currentPage:1,totalPages:1,totalRecords:0,hasNext:!1,hasPrev:!1}}))]);e(N.data||[]),a(k.data||[]),(w=S.data)!=null&&w.overview&&i(S.data.overview)}catch(N){console.error("Error loading SMS data:",N),C.error("Failed to load SMS data")}finally{o(!1)}},f=async w=>{if(w.preventDefault(),!u.to||!u.message){C.error("Please fill in all required fields");return}try{(await Bi.sendSMS({to:u.to,message:u.message,scheduledAt:u.scheduledAt||void 0,priority:u.priority})).success&&(C.success("SMS sent successfully"),m({to:"",message:"",scheduledAt:"",priority:"normal"}),g())}catch(N){console.error("Error sending SMS:",N),C.error("Failed to send SMS")}},y=async w=>{if(w.preventDefault(),!h.recipients||!h.message){C.error("Please fill in all required fields");return}const N=h.recipients.split(",").map(S=>S.trim()).filter(S=>S);if(N.length===0){C.error("Please enter at least one valid phone number");return}try{(await Bi.sendBulkSMS({recipients:N.map(k=>({phone:k})),message:h.message,scheduledAt:h.scheduledAt||void 0,priority:h.priority})).success&&(C.success(`Bulk SMS sent to ${N.length} recipients`),x({recipients:"",message:"",scheduledAt:"",priority:"normal"}),g())}catch(S){console.error("Error sending bulk SMS:",S),C.error("Failed to send bulk SMS")}},p=w=>{m(N=>({...N,message:w.message}))},b=w=>{switch(w){case"delivered":return s.jsx(eo,{className:"w-5 h-5 text-green-500"});case"sent":return s.jsx(lt,{className:"w-5 h-5 text-blue-500"});case"failed":return s.jsx(vi,{className:"w-5 h-5 text-red-500"});default:return s.jsx(ts,{className:"w-5 h-5 text-yellow-500"})}},v=w=>{switch(w){case"delivered":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return l?s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[s.jsx(It,{title:"SMS Messaging"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Ut,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sent"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalSent})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(eo,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delivered"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.delivered})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx(vi,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.failed})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Ud,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delivery Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[n.deliveryRate.toFixed(1),"%"]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:[{id:"send",label:"Send SMS",icon:Ut},{id:"templates",label:"Templates",icon:am},{id:"history",label:"History",icon:lt},{id:"analytics",label:"Analytics",icon:Ud}].map(w=>s.jsxs("button",{onClick:()=>d(w.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center ${c===w.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(w.icon,{className:"w-5 h-5 mr-2"}),w.label]},w.id))})}),s.jsxs("div",{className:"p-6",children:[c==="send"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Send Single SMS"}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx("input",{type:"tel",value:u.to,onChange:w=>m(N=>({...N,to:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+1234567890",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message *"}),s.jsx("textarea",{value:u.message,onChange:w=>m(N=>({...N,message:w.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your message...",maxLength:1600,required:!0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u.message.length,"/1600 characters"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Schedule (Optional)"}),s.jsx("input",{type:"datetime-local",value:u.scheduledAt,onChange:w=>m(N=>({...N,scheduledAt:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:u.priority,onChange:w=>m(N=>({...N,priority:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"high",children:"High"})]})]})]}),s.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 flex items-center justify-center",children:[s.jsx(rm,{className:"w-5 h-5 mr-2"}),"Send SMS"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Send Bulk SMS"}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Numbers *"}),s.jsx("textarea",{value:h.recipients,onChange:w=>x(N=>({...N,recipients:w.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+1234567890, +1234567891, +1234567892",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple phone numbers with commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message *"}),s.jsx("textarea",{value:h.message,onChange:w=>x(N=>({...N,message:w.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your message...",maxLength:1600,required:!0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[h.message.length,"/1600 characters"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Schedule (Optional)"}),s.jsx("input",{type:"datetime-local",value:h.scheduledAt,onChange:w=>x(N=>({...N,scheduledAt:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:h.priority,onChange:w=>x(N=>({...N,priority:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"high",children:"High"})]})]})]}),s.jsxs("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 flex items-center justify-center",children:[s.jsx(Or,{className:"w-5 h-5 mr-2"}),"Send Bulk SMS"]})]})]})]}),c==="templates"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SMS Templates"}),s.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(_t,{className:"h-5 w-5 mr-2"}),"Create Template"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(w=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:w.name}),s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:w.category})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",children:w.message}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:()=>p(w),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Use Template"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:s.jsx(Xs,{className:"w-4 h-4"})}),s.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-800",children:s.jsx(Le,{className:"w-4 h-4"})})]})]})]},w._id))})]}),c==="history"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"SMS History"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Message"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sent At"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Delivered At"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(w=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.to}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:w.message}),w.errorMessage&&s.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Error: ",w.errorMessage]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[b(w.status),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(w.status)}`,children:w.status})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.sentAt?new Date(w.sentAt).toLocaleString():"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.deliveredAt?new Date(w.deliveredAt).toLocaleString():"-"})]},w._id))})]})})]}),c==="analytics"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"SMS Analytics"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Metrics"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total Sent"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.totalSent})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Delivered"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.delivered})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Failed"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.failed})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Delivery Rate"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[n.deliveryRate.toFixed(1),"%"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),s.jsx("div",{className:"space-y-3",children:r.slice(0,5).map(w=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:w.to}),s.jsxs("p",{className:"text-xs text-gray-500",children:[w.message.substring(0,50),"..."]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"flex items-center",children:[b(w.status),s.jsx("span",{className:`ml-1 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(w.status)}`,children:w.status})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(w.sentAt).toLocaleDateString()})]})]},w.id))})]})]})]})]})]})]})}function iP(){const t=Dn(),[e,r]=j.useState([]),[a,n]=j.useState(null),[i,l]=j.useState(!0),[o,c]=j.useState(!1),[d,u]=j.useState(""),[m,h]=j.useState(null),[x,g]=j.useState({status:"",category:"",priority:"",search:"",page:1,limit:20}),[f,y]=j.useState({currentPage:1,totalPages:1,totalChats:0,hasNextPage:!1,hasPrevPage:!1});j.useEffect(()=>{p()},[]),j.useEffect(()=>{m&&b()},[x,m]);const p=()=>{if(!Ve.isAuthenticated()){C.error("Please login to access chat management"),t("/auth/login");return}const W=Ve.getCurrentUserFromStorage();if(!W){C.error("User information not found"),t("/auth/login");return}if(W.role!=="super_admin"&&W.role!=="admin"){C.error("Access denied. Admin privileges required."),t("/auth/login");return}h(W)},b=async()=>{var W,J,V,G;try{l(!0);const M=new URLSearchParams;Object.entries(x).forEach(([D,X])=>{X&&X!==""&&M.append(D,X.toString())});const z=await A.get(`/chat?${M}`);z.data.success&&(r(z.data.data.chats),y(z.data.data.pagination))}catch(M){console.error("Error fetching chats:",M),((W=M.response)==null?void 0:W.status)===401?(C.error("Session expired. Please login again."),t("/auth/login")):((J=M.response)==null?void 0:J.status)===403?C.error("Access denied. You don't have permission to view chats."):C.error(((G=(V=M.response)==null?void 0:V.data)==null?void 0:G.message)||"Failed to fetch chats")}finally{l(!1)}},v=async W=>{try{if(!(m!=null&&m.id)){C.error("User not authenticated");return}const J=await A.put(`/chat/${W}/assign`,{assignedTo:m.id,reason:"Manual assignment"});J.data.success&&(C.success("Chat assigned successfully"),b(),(a==null?void 0:a._id)===W&&n(J.data.data.chat))}catch(J){console.error("Error assigning chat:",J),C.error("Failed to assign chat")}},w=async W=>{try{const J=await A.put(`/chat/${W}/resolve`,{notes:"Chat resolved by admin"});J.data.success&&(C.success("Chat resolved successfully"),b(),(a==null?void 0:a._id)===W&&n(J.data.data.chat))}catch(J){console.error("Error resolving chat:",J),C.error("Failed to resolve chat")}},N=async W=>{try{const J=await A.put(`/chat/${W}/close`);J.data.success&&(C.success("Chat closed successfully"),b(),(a==null?void 0:a._id)===W&&n(J.data.data.chat))}catch(J){console.error("Error closing chat:",J),C.error("Failed to close chat")}},S=async()=>{if(!(!a||!d.trim()))try{c(!0);const W=await A.post(`/chat/${a._id}/messages`,{content:d.trim(),messageType:"text"});W.data.success&&(u(""),a&&n({...a,messages:[...a.messages,W.data.data.message],lastActivity:new Date().toISOString()}),C.success("Message sent successfully"))}catch(W){console.error("Error sending message:",W),C.error("Failed to send message")}finally{c(!1)}},k=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),S())},P=W=>{switch(W){case"waiting":return"bg-yellow-100 text-yellow-800";case"active":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},_=W=>{switch(W){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},L=W=>{switch(W){case"service":return"bg-purple-100 text-purple-800";case"billing":return"bg-indigo-100 text-indigo-800";case"technical":return"bg-blue-100 text-blue-800";case"complaint":return"bg-red-100 text-red-800";case"other":return"bg-gray-100 text-gray-800";default:return"bg-green-100 text-green-800"}},T=W=>{const J=new Date(W);return(new Date().getTime()-J.getTime())/(1e3*60*60)<24?J.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):J.toLocaleDateString()},U=W=>W.messages.filter(J=>!J.isRead&&J.sender.name!=="Customer").length,H=()=>{Ve.logout()};return m?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(It,{title:"Live Chat Support",icon:uy}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Welcome, ",s.jsx("span",{className:"font-medium",children:m.name}),s.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:m.role==="super_admin"?"Super Admin":"Admin"})]}),s.jsx("button",{onClick:H,className:"px-3 py-1 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded",children:"Logout"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Active Chats"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:e.filter(W=>W.status==="active"||W.status==="waiting").length}),s.jsx("button",{onClick:b,disabled:i,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50",children:s.jsx(Co,{className:`h-4 w-4 ${i?"animate-spin":""}`})})]})]}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("select",{value:x.status,onChange:W=>g({...x,status:W.target.value,page:1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"waiting",children:"Waiting"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"resolved",children:"Resolved"}),s.jsx("option",{value:"closed",children:"Closed"})]}),s.jsxs("select",{value:x.category,onChange:W=>g({...x,category:W.target.value,page:1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Categories"}),s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"service",children:"Service"}),s.jsx("option",{value:"billing",children:"Billing"}),s.jsx("option",{value:"technical",children:"Technical"}),s.jsx("option",{value:"complaint",children:"Complaint"}),s.jsx("option",{value:"other",children:"Other"})]}),s.jsxs("select",{value:x.priority,onChange:W=>g({...x,priority:W.target.value,page:1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Priorities"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]}),s.jsx("input",{type:"text",placeholder:"Search chats...",value:x.search,onChange:W=>g({...x,search:W.target.value,page:1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:i?s.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading chats..."}):e.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500",children:"No chats found"}):e.map(W=>{const J=U(W);return s.jsx("div",{onClick:()=>n(W),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${(a==null?void 0:a._id)===W._id?"bg-blue-50 border-blue-200":""} ${J>0?"bg-yellow-50":""}`,children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(W.status)}`,children:W.status}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(W.priority)}`,children:W.priority}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L(W.category)}`,children:W.category})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:W.customer.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:W.subject||"No subject"}),W.assignedTo&&s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Assigned to: ",W.assignedTo.name]}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:"text-xs text-gray-400",children:T(W.lastActivity)}),J>0&&s.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-0.5 rounded-full",children:J})]})]})})},W._id)})}),f.totalPages>1&&s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>g({...x,page:x.page-1}),disabled:!f.hasPrevPage,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",f.currentPage," of ",f.totalPages]}),s.jsx("button",{onClick:()=>g({...x,page:x.page+1}),disabled:!f.hasNextPage,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]})}),s.jsx("div",{className:"lg:col-span-2",children:a?s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a.customer.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[a.customer.email&&`${a.customer.email}  `,a.customer.phone&&`${a.customer.phone}  `,"Session: ",a.customer.sessionId.slice(-8)]}),a.assignedTo&&s.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Assigned to: ",a.assignedTo.name]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(a.status)}`,children:a.status}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(a.priority)}`,children:a.priority}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L(a.category)}`,children:a.category})]})]})}),s.jsx("div",{className:"h-96 overflow-y-auto p-4 space-y-4",children:a.messages.map((W,J)=>s.jsx("div",{className:`flex ${W.sender.name==="Customer"?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${W.sender.name==="Customer"?"bg-gray-100 text-gray-900":W.messageType==="system"?"bg-yellow-100 text-yellow-800":"bg-blue-600 text-white"}`,children:[s.jsx("div",{className:"text-sm font-medium mb-1",children:W.sender.name}),s.jsx("div",{className:"text-sm whitespace-pre-wrap",children:W.content}),W.attachments&&W.attachments.length>0&&s.jsx("div",{className:"mt-2 space-y-1",children:W.attachments.map((V,G)=>s.jsxs("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 hover:underline",children:[" ",V.filename]},G))}),s.jsx("div",{className:`text-xs mt-1 ${W.sender.name==="Customer"?"text-gray-500":"text-blue-100"}`,children:T(W.createdAt)})]})},W._id||J))}),a.status!=="closed"&&a.status!=="resolved"&&s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("textarea",{value:d,onChange:W=>u(W.target.value),onKeyPress:k,placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500 resize-none",rows:2}),s.jsx("button",{onClick:S,disabled:!d.trim()||o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:s.jsx(rm,{className:"h-4 w-4"})})]})}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[a.status==="waiting"&&s.jsxs("button",{onClick:()=>v(a._id),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[s.jsx(B2,{className:"h-4 w-4 mr-1"}),"Assign to Me"]}),a.status==="active"&&s.jsxs("button",{onClick:()=>w(a._id),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:[s.jsx(eo,{className:"h-4 w-4 mr-1"}),"Resolve"]}),a.status!=="closed"&&s.jsxs("button",{onClick:()=>N(a._id),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(vi,{className:"h-4 w-4 mr-1"}),"Close"]})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Started ",new Date(a.createdAt).toLocaleDateString(),a.rating&&s.jsxs("span",{className:"ml-2",children:[" Rating: ",a.rating.score,"/5"]})]})]})})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[s.jsx(uy,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Chat"}),s.jsx("p",{className:"text-gray-500",children:"Choose a chat from the list to view the conversation"})]})})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}function lP(){const t=Dn(),[e,r]=j.useState([]),[a,n]=j.useState(!0),[i,l]=j.useState(null),[o,c]=j.useState({keywords:"",location:"",radius:25,category:""}),[d,u]=j.useState({status:"",priority:"",assignedTo:"",search:""}),[m,h]=j.useState({currentPage:1,totalPages:1,totalRecords:0,hasNextPage:!1,hasPrevPage:!1}),[x,g]=j.useState(!1),[f,y]=j.useState(!1),[p,b]=j.useState(!1),[v,w]=j.useState(null),[N,S]=j.useState({method:"phone",outcome:"no_answer",notes:""}),[k,P]=j.useState({status:"new",priority:"medium",notes:""});j.useEffect(()=>{_()},[]),j.useEffect(()=>{i&&L()},[d,m.currentPage,i]);const _=()=>{if(!Ve.isAuthenticated()){C.error("Please login to access YellowPages management"),t("/auth/login");return}const F=Ve.getCurrentUserFromStorage();if(!F){C.error("User information not found"),t("/auth/login");return}if(F.role!=="super_admin"&&F.role!=="admin"){C.error("Access denied. Admin privileges required."),t("/auth/login");return}l(F)},L=async()=>{var F,ie,ye,fe;try{n(!0);const pe=new URLSearchParams({...d,page:m.currentPage.toString(),limit:"10"}),Te=await A.get(`/yellowpages?${pe}`);Te.data.success&&(r(Te.data.data.yellowPagesData),h(Te.data.data.pagination))}catch(pe){console.error("Error fetching YellowPages records:",pe),((F=pe.response)==null?void 0:F.status)===401?(C.error("Session expired. Please login again."),t("/auth/login")):((ie=pe.response)==null?void 0:ie.status)===403?C.error("Access denied. You don't have permission to view YellowPages data."):C.error(((fe=(ye=pe.response)==null?void 0:ye.data)==null?void 0:fe.message)||"Failed to fetch records")}finally{n(!1)}},T=async()=>{var F;try{n(!0);const ie=await A.post("/yellowpages/search",o);ie.data.success&&(r(ie.data.data.results),C.success(`Found ${ie.data.data.results.length} businesses`))}catch(ie){console.error("Error searching YellowPages:",ie),((F=ie.response)==null?void 0:F.status)===401?(C.error("Session expired. Please login again."),t("/auth/login")):C.error("Failed to search YellowPages")}finally{n(!1)}},U=async()=>{var F;if(v)try{(await A.put(`/yellowpages/${v._id}/lead`,k)).data.success&&(C.success("Lead information updated successfully"),y(!1),L())}catch(ie){console.error("Error updating lead:",ie),((F=ie.response)==null?void 0:F.status)===401?(C.error("Session expired. Please login again."),t("/auth/login")):C.error("Failed to update lead information")}},H=async()=>{var F;if(v)try{(await A.post(`/yellowpages/${v._id}/contact-attempt`,N)).data.success&&(C.success("Contact attempt added successfully"),b(!1),S({method:"phone",outcome:"no_answer",notes:""}),L())}catch(ie){console.error("Error adding contact attempt:",ie),((F=ie.response)==null?void 0:F.status)===401?(C.error("Session expired. Please login again."),t("/auth/login")):C.error("Failed to add contact attempt")}},W=F=>{w(F),g(!0)},J=F=>{w(F),P({status:F.leadInfo.status,priority:F.leadInfo.priority,notes:F.leadInfo.notes||""}),y(!0)},V=F=>{w(F),b(!0)},G=F=>{switch(F){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"interested":return"bg-green-100 text-green-800";case"not_interested":return"bg-red-100 text-red-800";case"converted":return"bg-purple-100 text-purple-800";case"lost":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},M=F=>{switch(F){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},z=F=>{switch(F){case"phone":return"bg-blue-100 text-blue-800";case"email":return"bg-green-100 text-green-800";case"in_person":return"bg-purple-100 text-purple-800";case"social_media":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},D=F=>{switch(F){case"converted":return"bg-green-100 text-green-800";case"interested":return"bg-blue-100 text-blue-800";case"follow_up_needed":return"bg-yellow-100 text-yellow-800";case"not_interested":return"bg-red-100 text-red-800";case"spoke_to_decision_maker":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},X=F=>new Date(F).toLocaleDateString();return i?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(It,{title:"YellowPages Integration",icon:wa}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Welcome, ",s.jsx("span",{className:"font-medium",children:i.name}),s.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:i.role==="super_admin"?"Super Admin":"Admin"})]}),s.jsx("button",{onClick:()=>Ve.logout(),className:"px-3 py-1 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded",children:"Logout"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Search YellowPages"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keywords"}),s.jsx("input",{type:"text",value:o.keywords,onChange:F=>c({...o,keywords:F.target.value}),placeholder:"e.g., auto repair, mechanic",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:o.location,onChange:F=>c({...o,location:F.target.value}),placeholder:"e.g., New York, NY",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Radius (miles)"}),s.jsxs("select",{value:o.radius,onChange:F=>c({...o,radius:parseInt(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:5,children:"5 miles"}),s.jsx("option",{value:10,children:"10 miles"}),s.jsx("option",{value:25,children:"25 miles"}),s.jsx("option",{value:50,children:"50 miles"}),s.jsx("option",{value:100,children:"100 miles"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),s.jsx("input",{type:"text",value:o.category,onChange:F=>c({...o,category:F.target.value}),placeholder:"e.g., Automotive",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"mt-4 flex space-x-2",children:[s.jsxs("button",{onClick:T,disabled:a,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(wa,{className:"h-5 w-5 mr-2"}),"Search YellowPages"]}),s.jsxs("button",{onClick:()=>{c({keywords:"",location:"",radius:25,category:""}),u({status:"",priority:"",assignedTo:"",search:""}),h({...m,currentPage:1})},className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[s.jsx(Co,{className:"h-5 w-5 mr-2"}),"Clear All"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("select",{value:d.status,onChange:F=>u({...d,status:F.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"new",children:"New"}),s.jsx("option",{value:"contacted",children:"Contacted"}),s.jsx("option",{value:"interested",children:"Interested"}),s.jsx("option",{value:"not_interested",children:"Not Interested"}),s.jsx("option",{value:"converted",children:"Converted"}),s.jsx("option",{value:"lost",children:"Lost"})]}),s.jsxs("select",{value:d.priority,onChange:F=>u({...d,priority:F.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Priorities"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]}),s.jsx("input",{type:"text",placeholder:"Search businesses...",value:d.search,onChange:F=>u({...d,search:F.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("span",{className:"text-sm text-gray-600",children:["Total: ",m.totalRecords]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Business"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Location"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Lead Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quality Score"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2",children:"Loading records..."})]})})}):e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No records found"})}):e.map(F=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.businessName}),s.jsx("div",{className:"text-sm text-gray-500",children:F.category}),F.businessInfo.yearsInBusiness&&s.jsxs("div",{className:"text-xs text-gray-400",children:[F.businessInfo.yearsInBusiness," years in business"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[F.contact.phone&&s.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[s.jsx(Ut,{className:"h-4 w-4 mr-1"}),F.contact.phone]}),F.contact.email&&s.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[s.jsx(mt,{className:"h-4 w-4 mr-1"}),F.contact.email]}),F.contact.website&&s.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[s.jsx(xy,{className:"h-4 w-4 mr-1"}),F.contact.website]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[s.jsx(O2,{className:"h-4 w-4 mr-1"}),F.address.city,", ",F.address.state]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G(F.leadInfo.status)}`,children:F.leadInfo.status}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M(F.leadInfo.priority)}`,children:F.leadInfo.priority})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(f7,{className:"h-4 w-4 text-yellow-400 mr-1"}),s.jsxs("span",{className:"text-sm text-gray-900",children:[F.leadQualityScore,"/10"]})]})}),s.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>W(F),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:s.jsx(Xs,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>J(F),className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50",title:"Edit Lead",children:s.jsx(kt,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>V(F),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Add Contact Attempt",children:s.jsx(B2,{className:"h-5 w-5"})})]})})]},F._id))})]})}),m.totalPages>1&&s.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>h({...m,currentPage:m.currentPage-1}),disabled:!m.hasPrevPage,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",m.currentPage," of ",m.totalPages]}),s.jsx("button",{onClick:()=>h({...m,currentPage:m.currentPage+1}),disabled:!m.hasNextPage,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(m.currentPage-1)*10+1," to ",Math.min(m.currentPage*10,m.totalRecords)," of ",m.totalRecords," records"]})]})})]}),x&&v&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Business Details"}),s.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:v.businessName}),s.jsx("p",{className:"text-sm text-gray-600",children:v.category})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Contact Information"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[v.contact.phone&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ut,{className:"h-4 w-4 mr-2"}),v.contact.phone]}),v.contact.email&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(mt,{className:"h-4 w-4 mr-2"}),v.contact.email]}),v.contact.website&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(xy,{className:"h-4 w-4 mr-2"}),s.jsx("a",{href:v.contact.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:v.contact.website})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Address"}),s.jsxs("div",{className:"text-sm text-gray-600",children:[v.address.street&&s.jsx("div",{children:v.address.street}),s.jsxs("div",{children:[v.address.city,", ",v.address.state," ",v.address.zipCode]})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Lead Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G(v.leadInfo.status)}`,children:v.leadInfo.status})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Priority:"}),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M(v.leadInfo.priority)}`,children:v.leadInfo.priority})]}),v.leadInfo.assignedTo&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-600",children:"Assigned to:"}),s.jsx("span",{className:"ml-2",children:v.leadInfo.assignedTo.name})]}),v.leadInfo.notes&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-600",children:"Notes:"}),s.jsx("p",{className:"mt-1 text-sm",children:v.leadInfo.notes})]})]})]}),v.leadInfo.contactAttempts.length>0&&s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Contact Attempts"}),s.jsx("div",{className:"space-y-2",children:v.leadInfo.contactAttempts.map((F,ie)=>s.jsxs("div",{className:"border rounded p-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z(F.method)}`,children:F.method}),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D(F.outcome)}`,children:F.outcome})]}),s.jsx("span",{className:"text-gray-500",children:X(F.date)})]}),F.notes&&s.jsx("p",{className:"mt-2 text-gray-600",children:F.notes})]},ie))})]})]}),s.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:s.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Close"})})]})}),f&&v&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Lead Information"}),s.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:k.status,onChange:F=>P({...k,status:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"new",children:"New"}),s.jsx("option",{value:"contacted",children:"Contacted"}),s.jsx("option",{value:"interested",children:"Interested"}),s.jsx("option",{value:"not_interested",children:"Not Interested"}),s.jsx("option",{value:"converted",children:"Converted"}),s.jsx("option",{value:"lost",children:"Lost"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:k.priority,onChange:F=>P({...k,priority:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:k.notes,onChange:F=>P({...k,notes:F.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Add notes about this lead..."})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"}),s.jsx("button",{onClick:U,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Lead"})]})]})}),p&&v&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add Contact Attempt"}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Method"}),s.jsxs("select",{value:N.method,onChange:F=>S({...N,method:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"phone",children:"Phone"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"in_person",children:"In Person"}),s.jsx("option",{value:"social_media",children:"Social Media"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outcome"}),s.jsxs("select",{value:N.outcome,onChange:F=>S({...N,outcome:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"no_answer",children:"No Answer"}),s.jsx("option",{value:"left_message",children:"Left Message"}),s.jsx("option",{value:"spoke_to_decision_maker",children:"Spoke to Decision Maker"}),s.jsx("option",{value:"not_interested",children:"Not Interested"}),s.jsx("option",{value:"interested",children:"Interested"}),s.jsx("option",{value:"follow_up_needed",children:"Follow Up Needed"}),s.jsx("option",{value:"converted",children:"Converted"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:N.notes,onChange:F=>S({...N,notes:F.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Add notes about this contact attempt..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Follow Up (Optional)"}),s.jsx("input",{type:"date",value:N.nextFollowUp,onChange:F=>S({...N,nextFollowUp:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"}),s.jsx("button",{onClick:H,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Add Contact Attempt"})]})]})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}function oP(){const t=we(),{list:e,loading:r,pagination:a,stats:n}=ve(v=>v.customers),[i,l]=j.useState("grid"),[o,c]=j.useState(1),[d,u]=j.useState(""),[m,h]=j.useState({status:"",city:"",state:"",sortBy:"createdAt",sortOrder:"desc"});j.useEffect(()=>{t(Pt({page:o,limit:8,...m})),t(fa())},[t,o,m]);const x=()=>{t(Pt({page:1,limit:8,search:d,...m})),c(1)},g=(v,w)=>{h(N=>({...N,[v]:w})),c(1)},f=v=>{c(v)},y=async(v,w)=>{if(window.confirm(`Are you sure you want to delete ${w}? This action cannot be undone.`))try{await t(ga(v)).unwrap(),C.success("Customer deleted successfully"),t(Pt({page:o,limit:8,...m})),t(fa())}catch{C.error("Failed to delete customer")}},p=v=>{if(!v)return"N/A";const w=[];return v.street&&w.push(v.street),v.city&&w.push(v.city),v.state&&w.push(v.state),v.zipCode&&w.push(v.zipCode),w.length>0?w.join(", "):"N/A"},b=(e&&Array.isArray(e)?e:[]).filter(v=>{var S,k,P;const w=d.toLowerCase(),N=p(v.address).toLowerCase();return(((S=v.businessName)==null?void 0:S.toLowerCase())||((k=v.name)==null?void 0:k.toLowerCase())||"").includes(w)||(v.phone||"").includes(d)||(((P=v.email)==null?void 0:P.toLowerCase())||"").includes(w)||N.includes(w)});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(It,{title:"Customers"}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(bi,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",placeholder:"Search customers...",value:d,onChange:v=>u(v.target.value),onKeyPress:v=>v.key==="Enter"&&x(),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"})]}),s.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[s.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded-lg transition-all duration-200 ${i==="grid"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:s.jsx(L2,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded-lg transition-all duration-200 ${i==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:s.jsx(v8,{className:"w-5 h-5"})})]})]}),s.jsxs(me,{to:"/admin/dashboard/customers/new",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[s.jsx(Jl,{className:"w-5 h-5"}),"Add Customer"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(n==null?void 0:n.total)||0})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:s.jsx(bi,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Customers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(n==null?void 0:n.active)||0})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:s.jsx($d,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(n==null?void 0:n.thisMonth)||0})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:s.jsx(ur,{className:"w-6 h-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vehicles"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(n==null?void 0:n.vehicles)||0})]}),s.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:s.jsx($d,{className:"w-6 h-6 text-orange-600"})})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:m.status,onChange:v=>g("status",v.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"prospect",children:"Prospect"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),s.jsx("input",{type:"text",placeholder:"Filter by city",value:m.city,onChange:v=>g("city",v.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),s.jsx("input",{type:"text",placeholder:"Filter by state",value:m.state,onChange:v=>g("state",v.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),s.jsxs("select",{value:m.sortBy,onChange:v=>g("sortBy",v.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",children:[s.jsx("option",{value:"createdAt",children:"Date Created"}),s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"businessName",children:"Business Name"}),s.jsx("option",{value:"email",children:"Email"})]})]})]})]}),r?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[i==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:b.map(v=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:v.name}),v.businessName&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:v.businessName}),s.jsx("p",{className:"text-sm text-gray-500",children:v.email})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(me,{to:`/admin/dashboard/customers/${v._id}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",children:s.jsx(Vd,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>y(v._id,v.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",children:s.jsx(Is,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("p",{children:v.phone||"No phone"}),s.jsx("p",{children:p(v.address)}),s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${v.status==="active"?"bg-green-100 text-green-800":v.status==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:v.status})]})]},v._id))}):s.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(v=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.name}),v.businessName&&s.jsx("div",{className:"text-sm text-gray-500",children:v.businessName})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:v.email}),s.jsx("div",{className:"text-sm text-gray-500",children:v.phone||"No phone"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:p(v.address)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${v.status==="active"?"bg-green-100 text-green-800":v.status==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:v.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(me,{to:`/admin/dashboard/customers/${v._id}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",children:s.jsx(Vd,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>y(v._id,v.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",children:s.jsx(Is,{className:"w-4 h-4"})})]})})]},v._id))})]})})}),a&&a.totalPages>1&&s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>f(o-1),disabled:o===1,className:"px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Previous"}),Array.from({length:a.totalPages},(v,w)=>w+1).map(v=>s.jsx("button",{onClick:()=>f(v),className:`px-4 py-2 rounded-xl transition-all duration-200 ${v===o?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-200 hover:bg-gray-50"}`,children:v},v)),s.jsx("button",{onClick:()=>f(o+1),disabled:o===a.totalPages,className:"px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Next"})]})})]}),s.jsx("div",{className:"md:hidden fixed bottom-6 right-6",children:s.jsx(me,{to:"/admin/dashboard/customers/new",className:"inline-flex items-center justify-center w-14 h-14 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200",children:s.jsx(Jl,{className:"w-6 h-6"})})})]})}function cP({customer:t,onEditVehicle:e,onDeleteVehicle:r}){var a,n,i,l,o,c,d,u,m,h,x,g,f,y;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 text-sm text-gray-700",children:[s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-3",children:"Contact Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Phone"}),s.jsx("p",{className:"font-medium",children:t.phone})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Email"}),s.jsx("p",{className:"font-medium",children:t.email})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Address"}),s.jsx("p",{className:"font-medium",children:(a=t.address)!=null&&a.street||(n=t.address)!=null&&n.city||(i=t.address)!=null&&i.state?`${((l=t.address)==null?void 0:l.street)||""}${(o=t.address)!=null&&o.street&&((c=t.address)!=null&&c.city||(d=t.address)!=null&&d.state)?", ":""}${((u=t.address)==null?void 0:u.city)||""}${(m=t.address)!=null&&m.city&&((h=t.address)!=null&&h.state)?", ":""}${((x=t.address)==null?void 0:x.state)||""}${(g=t.address)!=null&&g.zipCode?` ${t.address.zipCode}`:""}`:"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Business Name"}),s.jsx("p",{className:"font-medium",children:t.businessName||"N/A"})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-3",children:"Account Details"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Customer Since"}),s.jsx("p",{className:"font-medium",children:new Date(t.createdAt).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"font-medium",children:new Date(t.updatedAt).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Total Vehicles"}),s.jsx("p",{className:"font-medium",children:((f=t.vehicles)==null?void 0:f.length)||0})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Service Records"}),s.jsx("p",{className:"font-medium",children:((y=t.serviceHistory)==null?void 0:y.length)||0})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-3",children:"Status"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Account Status"}),s.jsx("p",{className:"font-medium",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.status==="active"?"bg-green-100 text-green-800":t.status==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Customer ID"}),s.jsx("p",{className:"font-medium text-xs font-mono",children:t._id})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Vehicles"}),s.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Vehicle"})]}),t.vehicles&&t.vehicles.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.vehicles.map(p=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-medium text-gray-800",children:[p.year," ",p.make," ",p.model]}),s.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:p.color})]}),s.jsxs("div",{className:"flex gap-2 ml-2",children:[e&&s.jsx("button",{onClick:()=>e(p),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit Vehicle",children:s.jsx(Vd,{className:"w-4 h-4"})}),r&&s.jsx("button",{onClick:()=>r(p),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete Vehicle",children:s.jsx(Is,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"VIN:"})," ",p.vin]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"License:"})," ",p.licensePlate]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Mileage:"})," ",p.mileage.toLocaleString()," miles"]}),p.status&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${p.status==="active"?"bg-green-100 text-green-800":p.status==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:p.status})]})]})]},p._id))}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:s.jsx("p",{children:"No vehicles registered for this customer."})})]}),s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Recent Service History"}),s.jsx("button",{className:"px-4 py-2 text-blue-600 hover:text-blue-700 text-sm font-medium hover:bg-blue-50 rounded-lg transition-all duration-200",children:"View All"})]}),t.serviceHistory&&t.serviceHistory.length>0?s.jsx("div",{className:"space-y-3",children:t.serviceHistory.slice(0,3).map(p=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-800",children:p.serviceType}),s.jsx("p",{className:"text-sm text-gray-600",children:p.description})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["$",p.cost.toFixed(2)]}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(p.date).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[s.jsxs("span",{children:["Technician: ",p.technician]}),s.jsxs("span",{children:["Vehicle: ",p.vehicleId]})]})]},p._id))}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:s.jsx("p",{children:"No service history available."})})]}),t.notes&&s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Notes"}),s.jsx("p",{className:"text-gray-600",children:t.notes})]})]})}function Po({currentPage:t,totalPages:e,setCurrentPage:r}){return s.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[s.jsx("button",{onClick:()=>r(t-1),disabled:t===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50 hover:bg-gray-300",children:"Prev"}),[...Array(e)].map((a,n)=>s.jsx("button",{onClick:()=>r(n+1),className:`px-3 py-1 rounded transition ${t===n+1?"bg-blue-600 text-white":"bg-white border hover:bg-blue-100"}`,children:n+1},n)),s.jsx("button",{onClick:()=>r(t+1),disabled:t===e,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50 hover:bg-gray-300",children:"Next"})]})}function dP({customerId:t,onClose:e,onSuccess:r}){const[a,n]=j.useState(""),[i,l]=j.useState(new Date().toISOString().split("T")[0]),[o,c]=j.useState(""),[d,u]=j.useState(""),[m,h]=j.useState(!1),x=async()=>{var g,f;if(!a||!o){C.error("Please fill all required fields");return}h(!0);try{await dt.addPayment(t,{amount:parseFloat(a),date:i||new Date().toISOString(),method:o,notes:d||void 0}),C.success("Payment added successfully!"),r(),e()}catch(y){const p=((f=(g=y.response)==null?void 0:g.data)==null?void 0:f.message)||"Failed to add payment";C.error(p)}finally{h(!1)}};return s.jsx(Yt,{title:"Post New Payment",icon:s.jsx(R2,{className:"text-blue-600 w-5 h-5"}),submitLabel:m?"Saving...":"Save Payment",submitColor:"bg-gradient-to-r from-blue-600 to-indigo-600",onClose:e,onSubmit:x,disabled:m,children:s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Amount ($) *"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:bg-white",value:a,onChange:g=>n(g.target.value),required:!0})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date"}),s.jsx("input",{type:"date",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:bg-white",value:i,onChange:g=>l(g.target.value)})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Payment Method *"}),s.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:bg-white",value:o,onChange:g=>c(g.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Select Method"}),s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"card",children:"Card"}),s.jsx("option",{value:"check",children:"Check"}),s.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),s.jsx("option",{value:"online",children:"Online"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),s.jsx("textarea",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:bg-white resize-none",rows:3,value:d,onChange:g=>u(g.target.value)})]})]})})}function uP({customer:t}){const[e,r]=j.useState([]),[a,n]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState(1),[d,u]=j.useState({currentPage:1,totalPages:1,totalPayments:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{n(!0);try{const b=await dt.getCustomerPayments(t._id,{page:o,limit:m,sortBy:"date",sortOrder:"desc"});r(b.data.payments),u(b.data.pagination)}catch(b){C.error("Failed to fetch payments"),console.error("Error fetching payments:",b)}finally{n(!1)}};j.useEffect(()=>{h()},[t._id,o]);const x=b=>{c(b)},g=()=>{h()},f=async b=>{if(window.confirm("Are you sure you want to delete this payment?"))try{await dt.deletePayment(t._id,b),C.success("Payment deleted successfully"),h()}catch(v){C.error("Failed to delete payment"),console.error("Error deleting payment:",v)}},y=b=>({cash:"Cash",card:"Card",check:"Check",bank_transfer:"Bank Transfer",online:"Online",other:"Other"})[b]||b,p=b=>{switch(b){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{children:[i&&s.jsx(dP,{customerId:t._id,onClose:()=>l(!1),onSuccess:g}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(zd,{className:"text-green-600 w-5 h-5"})}),"Payment History",d.totalPayments>0&&s.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalPayments," payments)"]})]}),s.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Payment"})]}),a?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:e.map(b=>s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("span",{className:"font-bold text-green-700 text-xl",children:["$",b.amount.toFixed(2)]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("span",{className:"text-xs bg-gray-100 px-3 py-1.5 rounded-lg",children:y(b.method)}),s.jsx("span",{className:`text-xs px-3 py-1.5 rounded-lg ${p(b.status)}`,children:b.status})]})]}),s.jsx("button",{onClick:()=>f(b._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Payment",children:s.jsx(Is,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date(b.date).toLocaleDateString()]}),b.reference&&s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Ref: ",b.reference]}),b.notes&&s.jsx("p",{className:"text-sm italic text-gray-500",children:b.notes})]},b._id))}),d.totalPages>1&&s.jsx(Po,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:x})]}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:""}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No payments found"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't made any payments yet."}),s.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[s.jsx(zd,{className:"w-5 h-5"}),"Add First Payment"]})]})]})}function mP({customerId:t,onClose:e,onSuccess:r}){const[a,n]=j.useState(""),[i,l]=j.useState(""),[o,c]=j.useState("pending"),[d,u]=j.useState("installment"),[m,h]=j.useState(""),[x,g]=j.useState(!1),f=async()=>{var y,p;if(!a||!i){C.error("Please fill all required fields");return}g(!0);try{await dt.addArrangement(t,{amount:parseFloat(a),dueDate:i,status:o,type:d,notes:m||void 0}),C.success("Arrangement added successfully!"),r(),e()}catch(b){const v=((p=(y=b.response)==null?void 0:y.data)==null?void 0:p.message)||"Failed to add arrangement";C.error(v)}finally{g(!1)}};return s.jsx(Yt,{title:"Create New Payment Arrangement",icon:s.jsx(Ql,{className:"text-purple-600 w-5 h-5"}),submitLabel:x?"Saving...":"Save Arrangement",submitColor:"bg-gradient-to-r from-purple-600 to-violet-600",onClose:e,onSubmit:f,disabled:x,children:s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Amount ($) *"}),s.jsx("input",{type:"number",value:a,onChange:y=>n(y.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white",required:!0})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Due Date *"}),s.jsx("input",{type:"date",value:i,onChange:y=>l(y.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Type"}),s.jsxs("select",{value:d,onChange:y=>u(y.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white",children:[s.jsx("option",{value:"installment",children:"Installment"}),s.jsx("option",{value:"payment_plan",children:"Payment Plan"}),s.jsx("option",{value:"deferred",children:"Deferred"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),s.jsxs("select",{value:o,onChange:y=>c(y.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white",children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),s.jsx("textarea",{rows:3,value:m,onChange:y=>h(y.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white resize-none"})]})]})})}function hP({customer:t}){const[e,r]=j.useState([]),[a,n]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState(1),[d,u]=j.useState({currentPage:1,totalPages:1,totalArrangements:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{n(!0);try{const b=await dt.getCustomerArrangements(t._id,{page:o,limit:m,sortBy:"date",sortOrder:"desc"});r(b.data.arrangements),u(b.data.pagination)}catch(b){C.error("Failed to fetch arrangements"),console.error("Error fetching arrangements:",b)}finally{n(!1)}};j.useEffect(()=>{h()},[t._id,o]);const x=b=>{c(b)},g=()=>{h()},f=async b=>{if(window.confirm("Are you sure you want to delete this arrangement?"))try{await dt.deleteArrangement(t._id,b),C.success("Arrangement deleted successfully"),h()}catch(v){C.error("Failed to delete arrangement"),console.error("Error deleting arrangement:",v)}},y=b=>({installment:"Installment",payment_plan:"Payment Plan",deferred:"Deferred",other:"Other"})[b]||b,p=b=>{switch(b){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{children:[i&&s.jsx(mP,{customerId:t._id,onClose:()=>l(!1),onSuccess:g}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Ql,{className:"text-purple-600 w-5 h-5"})}),"Payment Arrangements",d.totalArrangements>0&&s.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalArrangements," arrangements)"]})]}),s.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Arrangement"})]}),a?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:e.map(b=>s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("span",{className:"font-bold text-green-700 text-xl",children:["$",b.amount.toFixed(2)]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("span",{className:"text-xs bg-gray-100 px-3 py-1.5 rounded-lg",children:y(b.type)}),s.jsx("span",{className:`text-xs px-3 py-1.5 rounded-lg ${p(b.status)}`,children:b.status})]})]}),s.jsx("button",{onClick:()=>f(b._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Arrangement",children:s.jsx(Is,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date(b.date).toLocaleDateString()]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Due: ",new Date(b.dueDate).toLocaleDateString()]}),b.notes&&s.jsx("p",{className:"text-sm italic text-gray-500",children:b.notes})]},b._id))}),d.totalPages>1&&s.jsx(Po,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:x})]}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:""}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No arrangements found"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't made any payment arrangements yet."}),s.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[s.jsx(Ql,{className:"w-5 h-5"}),"Add First Arrangement"]})]})]})}function xP({onClose:t}){const[e,r]=j.useState(""),[a,n]=j.useState(""),[i,l]=j.useState(""),[o,c]=j.useState(""),[d,u]=j.useState("60"),[m,h]=j.useState("medium"),[x,g]=j.useState("scheduled"),[f,y]=j.useState(""),[p,b]=j.useState(""),[v,w]=j.useState([]);j.useEffect(()=>{(async()=>{try{const k=await fetch(`${nt.CUSTOMERS}/technicians`,{headers:gt()});if(k.ok){const P=await k.json();P.success&&w(P.data.technicians||[])}}catch(k){console.error("Error loading technicians:",k),w([])}})()},[]);const N=()=>{if(!e||!a||!i||!o){alert("Please complete all required fields.");return}console.log({date:e,time:a,serviceType:i,vehicle:o,estimatedDuration:d,priority:m,status:x,notes:f,technicianId:p}),t()};return s.jsx(Yt,{title:"Schedule New Appointment",icon:s.jsx(ur,{className:"text-indigo-500 w-5 h-5"}),submitLabel:"Schedule",submitColor:"bg-gradient-to-r from-indigo-600 to-purple-600",onClose:t,onSubmit:N,children:s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 block flex items-center gap-2",children:[s.jsx(ur,{className:"w-4 h-4 text-indigo-600"}),"Date *"]}),s.jsx("input",{type:"date",value:e,onChange:S=>r(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",required:!0})]}),s.jsxs("label",{className:"block",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 block flex items-center gap-2",children:[s.jsx(ex,{className:"w-4 h-4 text-indigo-600"}),"Time *"]}),s.jsx("input",{type:"time",value:a,onChange:S=>n(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",required:!0})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Service Type *"}),s.jsxs("select",{value:i,onChange:S=>l(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",required:!0,children:[s.jsx("option",{value:"",children:"Select Service"}),s.jsx("option",{value:"oil_change",children:"Oil Change"}),s.jsx("option",{value:"brake_service",children:"Brake Service"}),s.jsx("option",{value:"tire_rotation",children:"Tire Rotation"}),s.jsx("option",{value:"transmission_service",children:"Transmission Service"}),s.jsx("option",{value:"engine_repair",children:"Engine Repair"}),s.jsx("option",{value:"electrical_repair",children:"Electrical Repair"}),s.jsx("option",{value:"diagnostic",children:"Diagnostic"}),s.jsx("option",{value:"inspection",children:"Inspection"}),s.jsx("option",{value:"maintenance",children:"Maintenance"}),s.jsx("option",{value:"emergency_repair",children:"Emergency Repair"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("label",{className:"block",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 block flex items-center gap-2",children:[s.jsx(wn,{className:"w-4 h-4 text-indigo-600"}),"Assign Technician"]}),s.jsxs("select",{value:p,onChange:S=>b(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",children:[s.jsx("option",{value:"",children:"Select a technician (optional)"}),v.filter(S=>S.isActive).map(S=>s.jsxs("option",{value:S.id||S._id,children:[S.name," - ",Array.isArray(S.specializations)?S.specializations.join(", "):S.specializations]},S.id||S._id))]})]}),s.jsxs("label",{className:"block",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 block flex items-center gap-2",children:[s.jsx(Zl,{className:"w-4 h-4 text-indigo-600"}),"Vehicle *"]}),s.jsx("input",{type:"text",placeholder:"e.g., 2020 Toyota Camry",value:o,onChange:S=>c(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Duration (minutes)"}),s.jsx("input",{type:"number",min:"15",max:"480",value:d,onChange:S=>u(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Priority"}),s.jsxs("select",{value:m,onChange:S=>h(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),s.jsxs("select",{value:x,onChange:S=>g(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",children:[s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),s.jsx("textarea",{rows:3,value:f,onChange:S=>y(S.target.value),placeholder:"Any special instructions or notes...",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white resize-none"})]})]})})}function pP({customer:t}){const[e,r]=j.useState([]),[a,n]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState(1),[d,u]=j.useState({currentPage:1,totalPages:1,totalAppointments:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{n(!0);try{const b=await ae(A.get(`/appointments?customer=${t._id}&page=${o}&limit=${m}&sortBy=date&sortOrder=desc`));r(b.data.appointments),u(b.data.pagination)}catch(b){C.error("Failed to fetch appointments"),console.error("Error fetching appointments:",b)}finally{n(!1)}};j.useEffect(()=>{h()},[t._id,o]);const x=b=>{c(b)},g=()=>{h()},f=async b=>{if(window.confirm("Are you sure you want to delete this appointment?"))try{await ae(A.delete(`/appointments/${b}`)),C.success("Appointment deleted successfully"),h()}catch(v){C.error("Failed to delete appointment"),console.error("Error deleting appointment:",v)}},y=b=>{switch(b){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},p=(b,v)=>{try{const w=new Date(b);return isNaN(w.getTime())?{date:"Invalid Date",time:v||"TBD"}:{date:w.toLocaleDateString(),time:v||"TBD"}}catch(w){return console.error("Error formatting date/time:",w),{date:"Invalid Date",time:v||"TBD"}}};return s.jsxs("div",{children:[i&&s.jsx(xP,{customerId:t._id,onClose:()=>l(!1),onSuccess:g}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:s.jsx(ur,{className:"text-indigo-600 w-5 h-5"})}),"Appointments",d.totalAppointments>0&&s.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalAppointments," appointments)"]})]}),s.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Appointment"})]}),a?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:e.map(b=>{var v;try{const{date:w,time:N}=p(b.scheduledDate,b.scheduledTime);return s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium ${y(b.status||"scheduled")}`,children:b.status||"scheduled"}),b.serviceType&&s.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded-lg",children:typeof b.serviceType=="string"?b.serviceType:((v=b.serviceType)==null?void 0:v.name)||"Unknown Service"})]})}),s.jsx("button",{onClick:()=>f(b._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Appointment",children:s.jsx(Is,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",w,"  ",N]}),b.vehicle&&s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",b.vehicle.year||"N/A"," ",b.vehicle.make||"Unknown"," ",b.vehicle.model||"Unknown"]}),b.technician&&b.technician.name&&s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",b.technician.name]}),b.notes&&b.notes.trim()&&s.jsx("p",{className:"text-sm italic text-gray-500",children:b.notes})]},b._id)}catch(w){return console.error("Error rendering appointment:",w,b),s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg",children:[s.jsx("p",{className:"text-sm text-red-600",children:"Error displaying appointment"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",b._id]})]},b._id)}})}),d.totalPages>1&&s.jsx(Po,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:x})]}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:""}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No appointments found"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't scheduled any appointments yet."}),s.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[s.jsx(ur,{className:"w-5 h-5"}),"Schedule First Appointment"]})]})]})}function gP({customerId:t,onClose:e,onSuccess:r}){const[a,n]=j.useState(new Date().toISOString().split("T")[0]),[i,l]=j.useState("scheduled"),[o,c]=j.useState(""),[d,u]=j.useState(""),[m,h]=j.useState(""),[x,g]=j.useState(""),[f,y]=j.useState(""),[p,b]=j.useState(!1),v=async()=>{var w,N;if(!o){C.error("Please fill all required fields");return}b(!0);try{await dt.addTowing(t,{date:a||new Date().toISOString(),location:o,destination:d||void 0,status:i,cost:m?parseFloat(m):0,vehicle:x||void 0,notes:f||void 0}),C.success("Towing record added successfully!"),r(),e()}catch(S){const k=((N=(w=S.response)==null?void 0:w.data)==null?void 0:N.message)||"Failed to add towing record";C.error(k)}finally{b(!1)}};return s.jsx(Yt,{title:"Record New Towing Service",icon:s.jsx(Zl,{className:"text-orange-500 w-5 h-5"}),submitLabel:p?"Saving...":"Save Tow",submitColor:"bg-gradient-to-r from-orange-600 to-red-600",onClose:e,onSubmit:v,disabled:p,children:s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date"}),s.jsx("input",{type:"date",value:a,onChange:w=>n(w.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),s.jsxs("select",{value:i,onChange:w=>l(w.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white",children:[s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Cost ($)"}),s.jsx("input",{type:"number",value:m,onChange:w=>h(w.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white",min:"0",step:"0.01"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Location *"}),s.jsx("input",{type:"text",value:o,onChange:w=>c(w.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white",required:!0})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Destination"}),s.jsx("input",{type:"text",value:d,onChange:w=>u(w.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Vehicle"}),s.jsx("input",{type:"text",value:x,onChange:w=>g(w.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),s.jsx("textarea",{rows:3,value:f,onChange:w=>y(w.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white resize-none"})]})]})})}function fP({customer:t}){const[e,r]=j.useState([]),[a,n]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState(1),[d,u]=j.useState({currentPage:1,totalPages:1,totalTowingRecords:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{n(!0);try{const p=await dt.getCustomerTowing(t._id,{page:o,limit:m,sortBy:"date",sortOrder:"desc"});r(p.data.towingRecords),u(p.data.pagination)}catch(p){C.error("Failed to fetch towing records"),console.error("Error fetching towing records:",p)}finally{n(!1)}};j.useEffect(()=>{h()},[t._id,o]);const x=p=>{c(p)},g=()=>{h()},f=async p=>{if(window.confirm("Are you sure you want to delete this towing record?"))try{await dt.deleteTowing(t._id,p),C.success("Towing record deleted successfully"),h()}catch(b){C.error("Failed to delete towing record"),console.error("Error deleting towing record:",b)}},y=p=>{switch(p){case"completed":return"bg-green-100 text-green-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{children:[i&&s.jsx(gP,{customerId:t._id,onClose:()=>l(!1),onSuccess:g}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(Zl,{className:"text-orange-600 w-5 h-5"})}),"Towing Records",d.totalTowingRecords>0&&s.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalTowingRecords," records)"]})]}),s.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Tow"})]}),a?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):e.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:e.map(p=>s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:p.location}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium ${y(p.status)}`,children:p.status}),p.cost>0&&s.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-3 py-1.5 rounded-lg",children:["$",p.cost.toFixed(2)]})]})]}),s.jsx("button",{onClick:()=>f(p._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Towing Record",children:s.jsx(Is,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date(p.date).toLocaleDateString()]}),p.destination&&s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["To: ",p.destination]}),p.vehicle&&s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Vehicle: ",p.vehicle]}),p.notes&&s.jsx("p",{className:"text-sm italic text-gray-500",children:p.notes})]},p._id))}),d.totalPages>1&&s.jsx(Po,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:x})]}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:""}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No towing records found"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't had any towing services yet."}),s.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[s.jsx(Zl,{className:"w-5 h-5"}),"Add First Towing Record"]})]})]})}function yP({customerId:t,onClose:e,onSuccess:r}){const[a,n]=j.useState(new Date().toISOString().split("T")[0]),[i,l]=j.useState("inbound"),[o,c]=j.useState(""),[d,u]=j.useState(""),[m,h]=j.useState(""),[x,g]=j.useState(""),[f,y]=j.useState(!1),[p,b]=j.useState(""),[v,w]=j.useState(!1),N=async()=>{var S,k;if(!i){C.error("Please fill all required fields");return}w(!0);try{let P=0;if(o){const _=o.split(":");_.length===2?P=parseInt(_[0])*60+parseInt(_[1]):P=parseInt(o)*60}await dt.addCallLog(t,{date:a||new Date().toISOString(),type:i,duration:P,phoneNumber:d||void 0,summary:m||void 0,notes:x||void 0,followUpRequired:f,followUpDate:p||void 0}),C.success("Call log added successfully!"),r(),e()}catch(P){const _=((k=(S=P.response)==null?void 0:S.data)==null?void 0:k.message)||"Failed to add call log";C.error(_)}finally{w(!1)}};return s.jsx(Yt,{title:"Log a Call",icon:s.jsx(Gl,{className:"text-teal-600 w-5 h-5"}),submitLabel:v?"Saving...":"Save Log",submitColor:"bg-gradient-to-r from-teal-600 to-cyan-600",onClose:e,onSubmit:N,disabled:v,children:s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date"}),s.jsx("input",{type:"date",value:a,onChange:S=>n(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Call Type *"}),s.jsxs("select",{value:i,onChange:S=>l(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",required:!0,children:[s.jsx("option",{value:"inbound",children:"Inbound"}),s.jsx("option",{value:"outbound",children:"Outbound"}),s.jsx("option",{value:"missed",children:"Missed"}),s.jsx("option",{value:"voicemail",children:"Voicemail"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Duration (MM:SS)"}),s.jsx("input",{type:"text",value:o,onChange:S=>c(S.target.value),placeholder:"e.g. 05:30",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Phone Number"}),s.jsx("input",{type:"text",value:d,onChange:S=>u(S.target.value),placeholder:"e.g. (555) 123-4567",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Summary"}),s.jsx("input",{type:"text",value:m,onChange:S=>h(S.target.value),placeholder:"Brief summary of the call",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Follow-up Required"}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:S=>y(S.target.checked),className:"mr-3 w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500 focus:ring-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Mark for follow-up"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Follow-up Date"}),s.jsx("input",{type:"date",value:p,onChange:S=>b(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed",disabled:!f})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),s.jsx("textarea",{value:x,onChange:S=>g(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white resize-none",rows:3,placeholder:"Detailed notes about the call..."})]})]})})}function bP({customer:t}){const[e,r]=j.useState([]),[a,n]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState(1),[d,u]=j.useState({currentPage:1,totalPages:1,totalCallLogs:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{n(!0);try{const v=await dt.getCustomerCallLogs(t._id,{page:o,limit:m,sortBy:"date",sortOrder:"desc"});r(v.data.callLogs),u(v.data.pagination)}catch(v){C.error("Failed to fetch call logs"),console.error("Error fetching call logs:",v)}finally{n(!1)}};j.useEffect(()=>{h()},[t._id,o]);const x=v=>{c(v)},g=()=>{h()},f=async v=>{if(window.confirm("Are you sure you want to delete this call log?"))try{await dt.deleteCallLog(t._id,v),C.success("Call log deleted successfully"),h()}catch(w){C.error("Failed to delete call log"),console.error("Error deleting call log:",w)}},y=v=>({inbound:"Inbound",outbound:"Outbound",missed:"Missed",voicemail:"Voicemail"})[v]||v,p=v=>{const w=Math.floor(v/60),N=v%60;return`${w}:${N.toString().padStart(2,"0")}`},b=v=>{switch(v){case"inbound":return"bg-green-100 text-green-700";case"outbound":return"bg-blue-100 text-blue-700";case"missed":return"bg-red-100 text-red-700";case"voicemail":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return s.jsxs("div",{children:[i&&s.jsx(yP,{customerId:t._id,onClose:()=>l(!1),onSuccess:g}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-teal-100 rounded-lg",children:s.jsx(Gl,{className:"text-teal-600 w-5 h-5"})}),"Call Logs",d.totalCallLogs>0&&s.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalCallLogs," calls)"]})]}),s.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Call"})]}),a?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})}):e.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:e.map(v=>s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium ${b(v.type)}`,children:y(v.type)}),s.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-3 py-1.5 rounded-lg",children:p(v.duration)})]}),v.followUpRequired&&s.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-3 py-1.5 rounded-lg",children:"Follow-up Required"})]}),s.jsx("button",{onClick:()=>f(v._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Call Log",children:s.jsx(Is,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date(v.date).toLocaleDateString()]}),v.phoneNumber&&s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",v.phoneNumber]}),v.summary&&s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:v.summary}),v.notes&&s.jsx("p",{className:"text-sm italic text-gray-500",children:v.notes}),v.followUpDate&&s.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:[" Follow-up: ",new Date(v.followUpDate).toLocaleDateString()]})]},v._id))}),d.totalPages>1&&s.jsx(Po,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:x})]}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:""}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No call logs found"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't had any calls logged yet."}),s.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[s.jsx(Gl,{className:"w-5 h-5"}),"Add First Call Log"]})]})]})}function vP({customer:t,isOpen:e,onClose:r,onSuccess:a}){var x,g,f,y,p,b,v,w;const n=we(),[i,l]=j.useState(!1),[o,c]=j.useState({name:t.name||"",email:t.email||"",phone:t.phone||"",businessName:t.businessName||"",address:{street:((x=t.address)==null?void 0:x.street)||"",city:((g=t.address)==null?void 0:g.city)||"",state:((f=t.address)==null?void 0:f.state)||"",zipCode:((y=t.address)==null?void 0:y.zipCode)||""},status:t.status||"active"});j.useEffect(()=>{var N,S,k,P;t&&c({name:t.name||"",email:t.email||"",phone:t.phone||"",businessName:t.businessName||"",address:{street:((N=t.address)==null?void 0:N.street)||"",city:((S=t.address)==null?void 0:S.city)||"",state:((k=t.address)==null?void 0:k.state)||"",zipCode:((P=t.address)==null?void 0:P.zipCode)||""},status:t.status||"active"})},[t]);const d=N=>{const S=N.replace(/\D/g,"");return S.length<=3?S:S.length<=6?`(${S.slice(0,3)}) ${S.slice(3)}`:`(${S.slice(0,3)}) ${S.slice(3,6)}-${S.slice(6,10)}`},u=(N,S)=>{if(N.includes(".")){const[k,P]=N.split(".");k==="address"&&c(_=>({..._,address:{..._.address,[P]:S}}))}else c(k=>({...k,[N]:S}))},m=N=>{const S=d(N.target.value);u("phone",S)},h=async N=>{N.preventDefault(),l(!0);try{const S={...o,phone:o.phone?o.phone.replace(/\D/g,""):""};await n(nn({id:t._id,customerData:S})).unwrap(),C.success("Customer updated successfully!"),a==null||a(),r()}catch(S){console.error("Update customer error:",S),C.error("Failed to update customer. Please try again.")}finally{l(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(wn,{className:"w-6 h-6 text-blue-600"})}),"Edit Customer"]}),s.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:s.jsx(En,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:h,className:"p-6 space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-100 pb-2",children:"Contact Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(wn,{className:"w-4 h-4"})}),s.jsx("input",{type:"text",value:o.name,onChange:N=>u("name",N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter contact name",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(I2,{className:"w-4 h-4"})}),s.jsx("input",{type:"text",value:o.businessName,onChange:N=>u("businessName",N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter business name",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(Bd,{className:"w-4 h-4"})}),s.jsx("input",{type:"email",value:o.email,onChange:N=>u("email",N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter email address",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(Gl,{className:"w-4 h-4"})}),s.jsx("input",{type:"tel",value:o.phone,onChange:m,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"(555) 123-4567",maxLength:14,required:!0})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-100 pb-2 flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg",children:s.jsx(Ip,{className:"w-4 h-4 text-green-600"})}),"Address Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),s.jsx("input",{type:"text",value:((p=o.address)==null?void 0:p.street)||"",onChange:N=>u("address.street",N.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter street address",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),s.jsx("input",{type:"text",value:((b=o.address)==null?void 0:b.city)||"",onChange:N=>u("address.city",N.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter city",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),s.jsx("input",{type:"text",value:((v=o.address)==null?void 0:v.state)||"",onChange:N=>u("address.state",N.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter state",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code *"}),s.jsx("input",{type:"text",value:((w=o.address)==null?void 0:w.zipCode)||"",onChange:N=>u("address.zipCode",N.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter ZIP code",required:!0})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Customer Status"}),s.jsxs("select",{value:o.status,onChange:N=>u("status",N.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"prospect",children:"Prospect"})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-100",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-200 font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:[s.jsx(Rp,{className:"w-4 h-4"}),i?"Saving...":"Save Changes"]})]})]})]})}):null}function jP({customer:t,isOpen:e,onClose:r}){const a=we(),n=Dn(),[i,l]=j.useState(!1),[o,c]=j.useState(""),d=async()=>{if(o!==t.name){C.error("Please type the customer name exactly to confirm deletion");return}l(!0);try{await a(ga(t._id)).unwrap(),C.success("Customer deleted successfully!"),r(),n("/admin/dashboard/customers")}catch(u){console.error("Delete customer error:",u)}finally{l(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gradient-to-r from-red-50 to-pink-50",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx(Is,{className:"w-5 h-5 text-red-600"})}),"Delete Customer"]}),s.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:s.jsx(En,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:s.jsx(Mc,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Are you sure you want to delete this customer?"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"This action cannot be undone. This will permanently delete the customer and all associated data including:"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 mb-4",children:[s.jsx("li",{children:" Customer profile and contact information"}),s.jsx("li",{children:" Vehicle records"}),s.jsx("li",{children:" Service history"}),s.jsx("li",{children:" Appointment records"}),s.jsx("li",{children:" Payment history"})]})]})]}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-xl mb-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(wn,{className:"text-blue-600 w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:t.name}),s.jsx("p",{className:"text-sm text-gray-600",children:t.email}),t.businessName&&s.jsx("p",{className:"text-sm text-gray-600",children:t.businessName})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Type ",s.jsx("span",{className:"font-bold text-red-600",children:t.name})," to confirm deletion:"]}),s.jsx("input",{type:"text",value:o,onChange:u=>c(u.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter customer name to confirm"})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-200 font-medium",children:"Cancel"}),s.jsxs("button",{onClick:d,disabled:i||o!==t.name,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white rounded-xl flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:[s.jsx(Is,{className:"w-4 h-4"}),i?"Deleting...":"Delete Customer"]})]})]})]})}):null}function NP({customer:t,isOpen:e,onClose:r,onSuccess:a}){we();const[n,i]=j.useState(!1),[l,o]=j.useState({make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",mileage:0,color:""}),c=(u,m)=>{o(h=>({...h,[u]:m}))},d=async u=>{u.preventDefault(),i(!0);try{const m=await dt.addVehicle(t._id,l);if(m.success)C.success("Vehicle added successfully!"),a==null||a(),r(),o({make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",mileage:0,color:""});else throw new Error(m.message||"Failed to add vehicle")}catch(m){console.error("Add vehicle error:",m),C.error(m.message||"Failed to add vehicle")}finally{i(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx($d,{className:"w-6 h-6 text-blue-600"})}),"Add Vehicle to ",t.name]}),s.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:s.jsx(En,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Make *"}),s.jsx("input",{type:"text",value:l.make,onChange:u=>c("make",u.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",required:!0,placeholder:"e.g., Toyota"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model *"}),s.jsx("input",{type:"text",value:l.model,onChange:u=>c("model",u.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"e.g., Camry"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(ur,{className:"w-4 h-4"})}),s.jsx("input",{type:"number",value:l.year,onChange:u=>c("year",parseInt(u.target.value)),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,min:"1900",max:new Date().getFullYear()+1})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(M8,{className:"w-4 h-4"})}),s.jsx("input",{type:"text",value:l.color,onChange:u=>c("color",u.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Red",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VIN (Vehicle Identification Number) *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(p8,{className:"w-4 h-4"})}),s.jsx("input",{type:"text",value:l.vin,onChange:u=>c("vin",u.target.value.toUpperCase()),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"17-character VIN",maxLength:17,required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Plate *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(q8,{className:"w-4 h-4"})}),s.jsx("input",{type:"text",value:l.licensePlate,onChange:u=>c("licensePlate",u.target.value.toUpperCase()),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"License plate number",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Mileage *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(d8,{className:"w-4 h-4"})}),s.jsx("input",{type:"number",value:l.mileage,onChange:u=>c("mileage",parseInt(u.target.value)),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",placeholder:"0",required:!0})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-100",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-200 font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:[s.jsx(Rp,{className:"w-4 h-4"}),n?"Adding...":"Add Vehicle"]})]})]})]})}):null}function wP({customer:t,vehicle:e,isOpen:r,onClose:a,onSuccess:n}){const[i,l]=j.useState({make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",mileage:0,color:"",status:"active"}),[o,c]=j.useState(!1);j.useEffect(()=>{e&&l({make:e.make||"",model:e.model||"",year:e.year||new Date().getFullYear(),vin:e.vin||"",licensePlate:e.licensePlate||"",mileage:e.mileage||0,color:e.color||"",status:e.status||"active"})},[e]);const d=m=>{const{name:h,value:x}=m.target;l(g=>({...g,[h]:h==="year"||h==="mileage"?parseInt(x)||0:x}))},u=async m=>{var h,x;m.preventDefault(),c(!0);try{await dt.updateVehicle(t._id,e._id,i),C.success("Vehicle updated successfully!"),n(),a()}catch(g){const f=((x=(h=g.response)==null?void 0:h.data)==null?void 0:x.message)||"Failed to update vehicle";C.error(f)}finally{c(!1)}};return r?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Vehicle"}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year *"}),s.jsx("input",{type:"number",name:"year",value:i.year,onChange:d,min:"1900",max:new Date().getFullYear()+1,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{name:"status",value:i.status,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Make *"}),s.jsx("input",{type:"text",name:"make",value:i.make,onChange:d,required:!0,maxLength:50,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model *"}),s.jsx("input",{type:"text",name:"model",value:i.model,onChange:d,required:!0,maxLength:50,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VIN *"}),s.jsx("input",{type:"text",name:"vin",value:i.vin,onChange:d,required:!0,minLength:8,maxLength:17,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 uppercase"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Plate *"}),s.jsx("input",{type:"text",name:"licensePlate",value:i.licensePlate,onChange:d,required:!0,maxLength:20,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 uppercase"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color *"}),s.jsx("input",{type:"text",name:"color",value:i.color,onChange:d,required:!0,maxLength:30,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mileage *"}),s.jsx("input",{type:"number",name:"mileage",value:i.mileage,onChange:d,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md font-medium",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium disabled:opacity-50",children:o?"Updating...":"Update Vehicle"})]})]})]})})}):null}function SP({customer:t,vehicle:e,isOpen:r,onClose:a,onSuccess:n}){const[i,l]=j.useState(!1),[o,c]=j.useState(""),d=async()=>{var m,h;if(o!==`${e.year} ${e.make} ${e.model}`){C.error("Please type the vehicle name exactly to confirm deletion");return}l(!0);try{await dt.deleteVehicle(t._id,e._id),C.success("Vehicle deleted successfully!"),n(),a()}catch(x){const g=((h=(m=x.response)==null?void 0:m.data)==null?void 0:h.message)||"Failed to delete vehicle";C.error(g)}finally{l(!1)}};if(!r)return null;const u=`${e.year} ${e.make} ${e.model}`;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Vehicle"}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"This action cannot be undone"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsxs("p",{children:["This will permanently delete the vehicle ",s.jsx("strong",{children:u})," and remove it from all associated records."]})})]})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["To confirm deletion, please type: ",s.jsx("strong",{children:u})]}),s.jsx("input",{type:"text",value:o,onChange:m=>c(m.target.value),placeholder:`${e.year} ${e.make} ${e.model}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md font-medium",children:"Cancel"}),s.jsx("button",{type:"button",onClick:d,disabled:i||o!==u,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Deleting...":"Delete Vehicle"})]})]})})})}const CP=[{key:"Overview",label:"Overview",icon:wn},{key:"Payments",label:"Payments",icon:zd},{key:"Arrangements",label:"Arrangements",icon:Ql},{key:"Appointments",label:"Appointments",icon:ur},{key:"Towing",label:"Towing",icon:Zl},{key:"Call Logs",label:"Call Logs",icon:Gl}];function kP(){const{id:t}=y3(),e=we(),[r,a]=j.useState("Overview"),[n,i]=j.useState(!1),[l,o]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,x]=j.useState(!1),[g,f]=j.useState(null),{selectedCustomer:y,loading:p,error:b}=ve(v=>v.customers);return j.useEffect(()=>{t&&e(Vs(t))},[e,t]),p?s.jsx("div",{className:"p-6 bg-gray-100 min-h-screen",children:s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):b?s.jsx("div",{className:"p-6 bg-gray-100 min-h-screen",children:s.jsxs("div",{className:"p-8 text-center text-red-600 font-medium",children:["Error loading customer: ",b]})}):y?s.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[s.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-8 mb-8 flex flex-col md:flex-row justify-between items-start md:items-center border border-gray-100",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:y.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Customer ID: ",y._id]})]}),s.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[s.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white rounded-xl shadow-lg hover:shadow-xl flex items-center gap-2 transition-all duration-200 font-medium",children:[s.jsx(Vd,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-xl shadow-lg hover:shadow-xl flex items-center gap-2 transition-all duration-200 font-medium",children:[s.jsx($d,{className:"w-4 h-4"}),"Add Vehicle"]}),s.jsxs("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white rounded-xl shadow-lg hover:shadow-xl flex items-center gap-2 transition-all duration-200 font-medium",children:[s.jsx(Is,{className:"w-4 h-4"}),"Delete"]})]})]}),s.jsx("div",{className:"bg-white shadow-lg rounded-2xl px-6 py-4 mb-8 overflow-x-auto border border-gray-100",children:s.jsx("nav",{className:"flex gap-6 whitespace-nowrap",children:CP.map(({key:v,label:w,icon:N})=>s.jsxs("button",{onClick:()=>a(v),className:`flex items-center gap-3 text-sm font-medium px-4 py-3 border-b-2 transition-all duration-200 ${r===v?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-blue-500 hover:border-blue-200"}`,children:[s.jsx(N,{className:"w-5 h-5"}),s.jsx("span",{children:w})]},v))})}),s.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-8",children:[r==="Overview"&&s.jsx(cP,{customer:y,onEditVehicle:v=>{f(v),m(!0)},onDeleteVehicle:v=>{f(v),x(!0)}}),r==="Payments"&&s.jsx(uP,{customer:y}),r==="Arrangements"&&s.jsx(hP,{customer:y}),r==="Appointments"&&s.jsx(pP,{customer:y}),r==="Towing"&&s.jsx(fP,{customer:y}),r==="Call Logs"&&s.jsx(bP,{customer:y})]}),y&&s.jsxs(s.Fragment,{children:[s.jsx(vP,{customer:y,isOpen:n,onClose:()=>i(!1),onSuccess:()=>{t&&e(Vs(t))}}),s.jsx(jP,{customer:y,isOpen:l,onClose:()=>o(!1)}),s.jsx(NP,{customer:y,isOpen:c,onClose:()=>d(!1),onSuccess:()=>{t&&e(Vs(t))}}),g&&s.jsxs(s.Fragment,{children:[s.jsx(wP,{customer:y,vehicle:g,isOpen:u,onClose:()=>{m(!1),f(null)},onSuccess:()=>{t&&e(Vs(t))}}),s.jsx(SP,{customer:y,vehicle:g,isOpen:h,onClose:()=>{x(!1),f(null)},onSuccess:()=>{t&&e(Vs(t))}})]})]})]}):s.jsx("div",{className:"p-6 bg-gray-100 min-h-screen",children:s.jsx("div",{className:"p-8 text-center text-red-600 font-medium",children:"Customer not found."})})}function _P(){const t=Dn(),e=we(),[r,a]=j.useState(!1),[n,i]=j.useState({name:"",email:"",phone:"",businessName:"",address:{street:"",city:"",state:"",zipCode:""},status:"active",notes:""}),l=c=>{const{name:d,value:u}=c.target;if(d.startsWith("address.")){const m=d.split(".")[1];i(h=>({...h,address:{...h.address,[m]:u}}))}else i(m=>({...m,[d]:u}))},o=async c=>{if(c.preventDefault(),!n.name||!n.email||!n.phone){C.error("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){C.error("Please enter a valid email address");return}if(n.phone.length<10){C.error("Please enter a valid phone number");return}a(!0);try{await e(an({name:n.name,email:n.email,phone:n.phone,businessName:n.businessName,address:n.address,status:n.status,notes:n.notes})).unwrap(),C.success("Customer created successfully!"),t("/admin/dashboard/customers")}catch(u){C.error(u.message||"Failed to create customer")}finally{a(!1)}};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>t("/admin/dashboard/customers"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(Fk,{className:"w-4 h-4"}),"Back to Customers"]}),s.jsx(It,{title:"Add New Customer"})]}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:s.jsxs("form",{onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-3 border-b border-gray-100 pb-2",children:[s.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:s.jsx(wn,{className:"w-5 h-5 text-blue-600"})}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx("input",{type:"text",name:"name",value:n.name,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter customer's full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),s.jsx("input",{type:"text",name:"businessName",value:n.businessName,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter business name (optional)"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-3 border-b border-gray-100 pb-2",children:[s.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg",children:s.jsx(Bd,{className:"w-5 h-5 text-green-600"})}),"Contact Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx("input",{type:"email",name:"email",value:n.email,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter phone number"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-3 border-b border-gray-100 pb-2",children:[s.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg",children:s.jsx(Ip,{className:"w-5 h-5 text-red-600"})}),"Address Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address"}),s.jsx("input",{type:"text",name:"address.street",value:n.address.street,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter street address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),s.jsx("input",{type:"text",name:"address.city",value:n.address.city,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter city"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),s.jsx("input",{type:"text",name:"address.state",value:n.address.state,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter state"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),s.jsx("input",{type:"text",name:"address.zipCode",value:n.address.zipCode,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter ZIP code"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-3 border-b border-gray-100 pb-2",children:[s.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:s.jsx(I2,{className:"w-5 h-5 text-purple-600"})}),"Additional Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{name:"status",value:n.status,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"prospect",children:"Prospect"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{name:"notes",value:n.notes,onChange:l,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter any additional notes about this customer"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-8 border-t border-gray-100",children:[s.jsx("button",{type:"button",onClick:()=>t("/admin/dashboard/customers"),className:"px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-200 font-medium",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:r,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl flex items-center gap-2 transition-all duration-200 font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Rp,{className:"w-4 h-4"}),"Create Customer"]})})]})]})})})]})}class PP{async getBusinessClients(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([n,i])=>{i!=null&&r.append(n,i.toString())}),(await A.get(`/business-clients?${r.toString()}`)).data.data}async getBusinessClient(e){return(await A.get(`/business-clients/${e}`)).data.data.businessClient}async createBusinessClient(e){return(await A.post("/business-clients",e)).data.data.businessClient}async updateBusinessClient(e,r){return(await A.put(`/business-clients/${e}`,r)).data.data.businessClient}async deleteBusinessClient(e){await A.delete(`/business-clients/${e}`)}async activateBusinessClient(e,r){return(await A.post(`/business-clients/${e}/activate`,r)).data.data.businessClient}async suspendBusinessClient(e){return(await A.post(`/business-clients/${e}/suspend`)).data.data.businessClient}async getBusinessClientStats(){return(await A.get("/business-clients/stats/overview")).data.data}getSubscriptionDaysRemaining(e){if(!e.subscription.endDate)return null;const r=new Date,n=new Date(e.subscription.endDate).getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))}isSubscriptionExpired(e){return e.subscription.endDate?new Date>new Date(e.subscription.endDate):!1}isSubscriptionActive(e){return["active","trial"].includes(e.subscription.status)}getSubscriptionStatusColor(e){switch(e){case"active":return"text-green-600 bg-green-100";case"trial":return"text-blue-600 bg-blue-100";case"suspended":return"text-red-600 bg-red-100";case"cancelled":return"text-gray-600 bg-gray-100";case"expired":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}}getBusinessTypeLabel(e){return{auto_repair:"Auto Repair",tire_shop:"Tire Shop",oil_change:"Oil Change",brake_shop:"Brake Shop",general_repair:"General Repair",dealership:"Dealership",specialty_shop:"Specialty Shop",other:"Other"}[e]||e}getPlanLabel(e){return{basic:"Basic",professional:"Professional",enterprise:"Enterprise",custom:"Custom"}[e]||e}formatCurrency(e,r="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:r}).format(e)}formatDate(e,r="MM/DD/YYYY"){const a=new Date(e),n=(a.getMonth()+1).toString().padStart(2,"0"),i=a.getDate().toString().padStart(2,"0"),l=a.getFullYear();return r.replace("MM",n).replace("DD",i).replace("YYYY",l.toString())}}const ps=new PP;function TP({isOpen:t,onClose:e,onSuccess:r}){var m,h,x,g,f;const[a,n]=j.useState(!1),[i,l]=j.useState({businessName:"",businessType:"auto_repair",contactPerson:{name:"",title:"",email:"",phone:""},address:{street:"",city:"",state:"",zipCode:"",country:"USA"},businessInfo:{yearsInBusiness:void 0,employeeCount:void 0,website:"",hours:"",services:[],specialties:[],certifications:[]},subscription:{plan:"basic",billingCycle:"monthly",monthlyFee:0,features:[]},branding:{primaryColor:"#3B82F6",secondaryColor:"#1F2937",companyName:"",tagline:"",customDomain:""},settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/DD/YYYY",timeFormat:"12h",notifications:{email:!0,sms:!0,push:!0}},status:"pending",source:"direct",notes:""}),o=(y,p)=>{l(b=>({...b,[y]:p}))},c=(y,p)=>{l(b=>({...b,contactPerson:{...b.contactPerson,[y]:p}}))},d=(y,p)=>{l(b=>({...b,address:{...b.address,[y]:p}}))},u=async y=>{var b,v,w,N,S;if(y.preventDefault(),!i.businessName||!i.contactPerson.name||!i.contactPerson.email){C.error("Please fill in all required fields");return}const p={...i,businessInfo:{...i.businessInfo,website:((b=i.businessInfo)==null?void 0:b.website)||void 0,hours:((v=i.businessInfo)==null?void 0:v.hours)||void 0},branding:{...i.branding,companyName:((w=i.branding)==null?void 0:w.companyName)||void 0,tagline:((N=i.branding)==null?void 0:N.tagline)||void 0,customDomain:((S=i.branding)==null?void 0:S.customDomain)||void 0},notes:i.notes||void 0};try{n(!0),await ps.createBusinessClient(p),C.success("Business client created successfully"),r(),e(),l({businessName:"",businessType:"auto_repair",contactPerson:{name:"",title:"",email:"",phone:""},address:{street:"",city:"",state:"",zipCode:"",country:"USA"},businessInfo:{yearsInBusiness:void 0,employeeCount:void 0,website:"",hours:"",services:[],specialties:[],certifications:[]},subscription:{plan:"basic",billingCycle:"monthly",monthlyFee:0,features:[]},branding:{primaryColor:"#3B82F6",secondaryColor:"#1F2937",companyName:"",tagline:"",customDomain:""},settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/DD/YYYY",timeFormat:"12h",notifications:{email:!0,sms:!0,push:!0}},status:"pending",source:"direct",notes:""})}catch(k){console.error("Error creating business client:",k),C.error("Failed to create business client")}finally{n(!1)}};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[s.jsx(Nn,{className:"w-5 h-5 mr-2"}),"Add New Business Client"]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(En,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:u,className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Business Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),s.jsx("input",{type:"text",value:i.businessName,onChange:y=>o("businessName",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),s.jsxs("select",{value:i.businessType,onChange:y=>o("businessType",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"auto_repair",children:"Auto Repair"}),s.jsx("option",{value:"tire_shop",children:"Tire Shop"}),s.jsx("option",{value:"oil_change",children:"Oil Change"}),s.jsx("option",{value:"brake_shop",children:"Brake Shop"}),s.jsx("option",{value:"general_repair",children:"General Repair"}),s.jsx("option",{value:"dealership",children:"Dealership"}),s.jsx("option",{value:"specialty_shop",children:"Specialty Shop"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),s.jsx("input",{type:"url",value:((m=i.businessInfo)==null?void 0:m.website)||"",onChange:y=>o("businessInfo",{...i.businessInfo,website:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Hours"}),s.jsx("input",{type:"text",value:((h=i.businessInfo)==null?void 0:h.hours)||"",onChange:y=>o("businessInfo",{...i.businessInfo,hours:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Mon-Fri 8AM-6PM, Sat 9AM-4PM"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(wn,{className:"w-4 h-4 mr-2"}),"Contact Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name *"}),s.jsx("input",{type:"text",value:i.contactPerson.name,onChange:y=>c("name",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:i.contactPerson.title,onChange:y=>c("title",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Manager, Owner, etc."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",value:i.contactPerson.email,onChange:y=>c("email",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),s.jsx("input",{type:"tel",value:i.contactPerson.phone,onChange:y=>c("phone",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(Ip,{className:"w-4 h-4 mr-2"}),"Address Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),s.jsx("input",{type:"text",value:i.address.street,onChange:y=>d("street",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),s.jsx("input",{type:"text",value:i.address.city,onChange:y=>d("city",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),s.jsx("input",{type:"text",value:i.address.state,onChange:y=>d("state",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),s.jsx("input",{type:"text",value:i.address.zipCode,onChange:y=>d("zipCode",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),s.jsx("input",{type:"text",value:i.address.country,onChange:y=>d("country",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(R2,{className:"w-4 h-4 mr-2"}),"Subscription Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan"}),s.jsxs("select",{value:(x=i.subscription)==null?void 0:x.plan,onChange:y=>o("subscription",{...i.subscription,plan:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"basic",children:"Basic"}),s.jsx("option",{value:"professional",children:"Professional"}),s.jsx("option",{value:"enterprise",children:"Enterprise"}),s.jsx("option",{value:"custom",children:"Custom"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Billing Cycle"}),s.jsxs("select",{value:(g=i.subscription)==null?void 0:g.billingCycle,onChange:y=>o("subscription",{...i.subscription,billingCycle:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"monthly",children:"Monthly"}),s.jsx("option",{value:"quarterly",children:"Quarterly"}),s.jsx("option",{value:"annually",children:"Annually"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Fee ($)"}),s.jsx("input",{type:"number",value:((f=i.subscription)==null?void 0:f.monthlyFee)||0,onChange:y=>o("subscription",{...i.subscription,monthlyFee:parseFloat(y.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:i.notes,onChange:y=>o("notes",y.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes about this business client..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creating...":"Create Business Client"})]})]})]})}):null}function AP({isOpen:t,onClose:e,businessClient:r}){var a,n,i,l,o,c,d;return!t||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[s.jsx(Nn,{className:"w-5 h-5 mr-2"}),"Business Client Details"]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(En,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name"}),s.jsx("p",{className:"text-gray-900 font-medium",children:r.businessName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Person"}),s.jsx("p",{className:"text-gray-900",children:(a=r.contactPerson)==null?void 0:a.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("p",{className:"text-gray-900",children:(n=r.contactPerson)==null?void 0:n.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),s.jsx("p",{className:"text-gray-900",children:(i=r.contactPerson)==null?void 0:i.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),s.jsxs("p",{className:"text-gray-900",children:[(l=r.address)==null?void 0:l.street,", ",(o=r.address)==null?void 0:o.city,", ",(c=r.address)==null?void 0:c.state," ",(d=r.address)==null?void 0:d.zipCode]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r.status==="active"?"bg-green-100 text-green-800":r.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:r.status})]}),s.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})]})})}function DP({isOpen:t,onClose:e,onSuccess:r,businessClient:a}){var h,x,g,f,y,p,b;const[n,i]=j.useState(!1),[l,o]=j.useState({businessName:"",businessType:"auto_repair",contactPerson:{name:"",title:"",email:"",phone:""},address:{street:"",city:"",state:"",zipCode:"",country:"USA"},businessInfo:{website:"",hours:""},subscription:{plan:"basic",billingCycle:"monthly",monthlyFee:0},branding:{primaryColor:"#3B82F6",secondaryColor:"#1F2937",companyName:"",tagline:""},settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/DD/YYYY",timeFormat:"12h"},status:"pending",notes:""});j.useEffect(()=>{var v,w,N,S,k,P,_,L,T,U,H,W,J,V,G,M,z,D,X,F,ie,ye;a&&o({businessName:a.businessName||"",businessType:a.businessType||"auto_repair",contactPerson:{name:((v=a.contactPerson)==null?void 0:v.name)||"",title:((w=a.contactPerson)==null?void 0:w.title)||"",email:((N=a.contactPerson)==null?void 0:N.email)||"",phone:((S=a.contactPerson)==null?void 0:S.phone)||""},address:{street:((k=a.address)==null?void 0:k.street)||"",city:((P=a.address)==null?void 0:P.city)||"",state:((_=a.address)==null?void 0:_.state)||"",zipCode:((L=a.address)==null?void 0:L.zipCode)||"",country:((T=a.address)==null?void 0:T.country)||"USA"},businessInfo:{website:((U=a.businessInfo)==null?void 0:U.website)||"",hours:((H=a.businessInfo)==null?void 0:H.hours)||""},subscription:{plan:((W=a.subscription)==null?void 0:W.plan)||"basic",billingCycle:((J=a.subscription)==null?void 0:J.billingCycle)||"monthly",monthlyFee:((V=a.subscription)==null?void 0:V.monthlyFee)||0},branding:{primaryColor:((G=a.branding)==null?void 0:G.primaryColor)||"#3B82F6",secondaryColor:((M=a.branding)==null?void 0:M.secondaryColor)||"#1F2937",companyName:((z=a.branding)==null?void 0:z.companyName)||"",tagline:((D=a.branding)==null?void 0:D.tagline)||""},settings:{timezone:((X=a.settings)==null?void 0:X.timezone)||"America/New_York",currency:((F=a.settings)==null?void 0:F.currency)||"USD",dateFormat:((ie=a.settings)==null?void 0:ie.dateFormat)||"MM/DD/YYYY",timeFormat:((ye=a.settings)==null?void 0:ye.timeFormat)||"12h"},status:a.status||"pending",notes:a.notes||""})},[a]);const c=(v,w)=>{o(N=>({...N,[v]:w}))},d=(v,w)=>{o(N=>({...N,contactPerson:{...N.contactPerson,[v]:w}}))},u=(v,w)=>{o(N=>({...N,address:{...N.address,[v]:w}}))},m=async v=>{if(v.preventDefault(),!l.businessName||!l.contactPerson.name||!l.contactPerson.email){C.error("Please fill in all required fields");return}if(!(a!=null&&a._id)){C.error("Business client ID is missing");return}try{i(!0),await ps.updateBusinessClient(a._id,l),C.success("Business client updated successfully"),r(),e()}catch(w){console.error("Error updating business client:",w),C.error("Failed to update business client")}finally{i(!1)}};return!t||!a?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[s.jsx(Nn,{className:"w-5 h-5 mr-2"}),"Edit Business Client"]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(En,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),s.jsx("input",{type:"text",value:l.businessName,onChange:v=>c("businessName",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name *"}),s.jsx("input",{type:"text",value:((h=l.contactPerson)==null?void 0:h.name)||"",onChange:v=>d("name",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",value:((x=l.contactPerson)==null?void 0:x.email)||"",onChange:v=>d("email",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),s.jsx("input",{type:"tel",value:((g=l.contactPerson)==null?void 0:g.phone)||"",onChange:v=>d("phone",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),s.jsx("input",{type:"text",value:((f=l.address)==null?void 0:f.street)||"",onChange:v=>u("street",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),s.jsx("input",{type:"text",value:((y=l.address)==null?void 0:y.city)||"",onChange:v=>u("city",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),s.jsx("input",{type:"text",value:((p=l.address)==null?void 0:p.state)||"",onChange:v=>u("state",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),s.jsx("input",{type:"text",value:((b=l.address)==null?void 0:b.zipCode)||"",onChange:v=>u("zipCode",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:l.status,onChange:v=>c("status",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"suspended",children:"Suspended"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Updating...":"Update Business Client"})]})]})]})})}function MP(){const[t,e]=j.useState([]),[r,a]=j.useState({totalClients:0,activeClients:0,trialClients:0,suspendedClients:0,newThisMonth:0,expiringThisMonth:0,monthlyRecurringRevenue:0}),[n,i]=j.useState(!0),[l,o]=j.useState(null),[c,d]=j.useState({page:1,limit:10,sortBy:"createdAt",sortOrder:"desc"}),[u,m]=j.useState({currentPage:1,totalPages:1,totalItems:0,hasNextPage:!1,hasPrevPage:!1,limit:10}),[h,x]=j.useState({isOpen:!1,title:"",message:"",type:"danger",onConfirm:()=>{}}),[g,f]=j.useState(!1),[y,p]=j.useState(!1),[b,v]=j.useState(!1),[w,N]=j.useState(null);j.useEffect(()=>{S(),k()},[c]);const S=async()=>{try{i(!0),o(null);const D=await ps.getBusinessClients(c);e(D.businessClients),m(D.pagination)}catch(D){console.error("Error loading business clients:",D),o("Failed to load business clients"),C.error("Failed to load business clients")}finally{i(!1)}},k=async()=>{try{const D=await ps.getBusinessClientStats();a(D)}catch(D){console.error("Error loading stats:",D)}},P=(D,X)=>{d(F=>({...F,[D]:X,page:1}))},_=D=>{d(X=>({...X,page:D}))},L=async D=>{try{await ps.activateBusinessClient(D,{}),C.success("Business client activated successfully"),S(),k()}catch(X){console.error("Error activating business client:",X),C.error("Failed to activate business client")}},T=async D=>{try{await ps.suspendBusinessClient(D),C.success("Business client suspended successfully"),S(),k()}catch(X){console.error("Error suspending business client:",X),C.error("Failed to suspend business client")}},U=async D=>{try{await ps.deleteBusinessClient(D),C.success("Business client deleted successfully"),S(),k()}catch(X){console.error("Error deleting business client:",X),C.error("Failed to delete business client")}},H=D=>{const X=t.find(F=>F._id===D);X&&(N(X),p(!0))},W=D=>{const X=t.find(F=>F._id===D);X&&(N(X),v(!0))},J=()=>{f(!0)},V=(D,X,F,ie)=>{x({isOpen:!0,title:D,message:X,type:F,onConfirm:ie})},G=D=>{switch(D){case"active":return s.jsx(Hm,{className:"w-5 h-5 text-green-500"});case"pending":return s.jsx(ex,{className:"w-5 h-5 text-yellow-500"});case"suspended":return s.jsx(ly,{className:"w-5 h-5 text-red-500"});case"inactive":return s.jsx(Mc,{className:"w-5 h-5 text-gray-500"});default:return s.jsx(Mc,{className:"w-5 h-5 text-gray-500"})}},M=D=>{switch(D){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},z=D=>ps.getSubscriptionStatusColor(D);return n&&t.length===0?s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[s.jsx(It,{title:"Business Clients"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Nn,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Clients"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.totalClients})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Hm,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Clients"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.activeClients})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(ex,{className:"w-6 h-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Trial Clients"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.trialClients})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(zd,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Revenue"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ps.formatCurrency(r.monthlyRecurringRevenue)})]})]})})]}),l&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(Mc,{className:"w-5 h-5 text-red-400 mt-0.5"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm text-red-800",children:l}),s.jsx("button",{onClick:()=>{o(null),S()},className:"mt-2 text-sm text-red-600 hover:text-red-500 underline",children:"Try again"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search business clients...",value:c.search||"",onChange:D=>P("search",D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("select",{value:c.status||"",onChange:D=>P("status",D.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"suspended",children:"Suspended"}),s.jsx("option",{value:"inactive",children:"Inactive"})]}),s.jsxs("select",{value:c.businessType||"",onChange:D=>P("businessType",D.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"auto_repair",children:"Auto Repair"}),s.jsx("option",{value:"tire_shop",children:"Tire Shop"}),s.jsx("option",{value:"oil_change",children:"Oil Change"}),s.jsx("option",{value:"brake_shop",children:"Brake Shop"}),s.jsx("option",{value:"general_repair",children:"General Repair"}),s.jsx("option",{value:"dealership",children:"Dealership"}),s.jsx("option",{value:"specialty_shop",children:"Specialty Shop"}),s.jsx("option",{value:"other",children:"Other"})]}),s.jsxs("select",{value:c.subscriptionStatus||"",onChange:D=>P("subscriptionStatus",D.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Subscriptions"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"trial",children:"Trial"}),s.jsx("option",{value:"suspended",children:"Suspended"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"expired",children:"Expired"})]})]}),s.jsxs("button",{onClick:J,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Jl,{className:"h-5 w-5 mr-2"}),"Add Business Client"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Business"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subscription"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Location"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:n?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-2"}),"Loading business clients..."]}):s.jsxs("div",{children:[s.jsx(Nn,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No business clients found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first business client."}),s.jsxs("button",{onClick:J,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Jl,{className:"h-5 w-5 mr-2"}),"Add Business Client"]})]})})}):t.map(D=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.businessName}),s.jsx("div",{className:"text-sm text-gray-500",children:ps.getBusinessTypeLabel(D.businessType)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.contactPerson.name}),s.jsx("div",{className:"text-sm text-gray-500",children:D.contactPerson.email}),s.jsx("div",{className:"text-sm text-gray-500",children:D.contactPerson.phone})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[G(D.status),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M(D.status)}`,children:D.status})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:ps.getPlanLabel(D.subscription.plan)}),s.jsx("div",{className:"text-sm text-gray-500",children:ps.formatCurrency(D.subscription.monthlyFee)}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z(D.subscription.status)}`,children:D.subscription.status})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsxs("div",{children:[D.address.city,", ",D.address.state]}),s.jsx("div",{className:"text-gray-500",children:D.address.zipCode})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ps.formatDate(D.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:()=>H(D._id),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"View details",children:s.jsx(n8,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>W(D._id),className:"text-gray-600 hover:text-gray-900 transition-colors",title:"Edit client",children:s.jsx(I8,{className:"w-4 h-4"})}),D.subscription.status==="trial"&&s.jsx("button",{onClick:()=>V("Activate Client",`Are you sure you want to activate ${D.businessName}?`,"success",()=>L(D._id)),className:"text-green-600 hover:text-green-900 transition-colors",title:"Activate client",children:s.jsx(Hm,{className:"w-4 h-4"})}),D.subscription.status==="active"&&s.jsx("button",{onClick:()=>V("Suspend Client",`Are you sure you want to suspend ${D.businessName}?`,"warning",()=>T(D._id)),className:"text-yellow-600 hover:text-yellow-900 transition-colors",title:"Suspend client",children:s.jsx(ly,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>V("Delete Client",`Are you sure you want to delete ${D.businessName}? This action cannot be undone.`,"danger",()=>U(D._id)),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete client",children:s.jsx(Is,{className:"w-4 h-4"})})]})})]},D._id))})]})}),u.totalPages>1&&s.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(u.currentPage-1)*u.limit+1," to"," ",Math.min(u.currentPage*u.limit,u.totalItems)," of"," ",u.totalItems," results"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>_(u.currentPage-1),disabled:!u.hasPrevPage,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),s.jsxs("span",{className:"px-3 py-1 text-sm text-gray-700",children:["Page ",u.currentPage," of ",u.totalPages]}),s.jsx("button",{onClick:()=>_(u.currentPage+1),disabled:!u.hasNextPage,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})]}),s.jsx(tm,{isOpen:h.isOpen,title:h.title,message:h.message,type:h.type,onConfirm:()=>{h.onConfirm(),x(D=>({...D,isOpen:!1}))},onCancel:()=>x(D=>({...D,isOpen:!1}))}),s.jsx(TP,{isOpen:g,onClose:()=>f(!1),onSuccess:()=>{S(),k()}}),s.jsx(AP,{isOpen:y,onClose:()=>{p(!1),N(null)},businessClient:w}),s.jsx(DP,{isOpen:b,onClose:()=>{v(!1),N(null)},onSuccess:()=>{v(!1),N(null),S(),k()},businessClient:w})]})}function EP({onClose:t,onSuccess:e}){const r=we(),[a,n]=j.useState(!1),[i,l]=j.useState({name:"",description:"",category:"maintenance",estimatedDuration:60,laborRate:120,parts:[],isActive:!0}),o=(d,u)=>{l(m=>({...m,[d]:u}))},c=async()=>{if(!i.name||!i.description){C.error("Please fill in all required fields");return}n(!0);try{await r(eN(i)).unwrap(),C.success("Service created successfully"),e(),t()}catch(d){console.error("Failed to create service:",d),C.error(d.message||"Failed to create service")}finally{n(!1)}};return s.jsx(Yt,{title:"Add New Service",icon:s.jsx(Sn,{className:"w-5 h-5"}),onClose:t,onSubmit:c,submitLabel:a?"Creating...":"Create Service",submitColor:"bg-blue-600",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name *"}),s.jsx("input",{type:"text",value:i.name,onChange:d=>o("name",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Oil Change, Brake Inspection",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),s.jsx("textarea",{value:i.description,onChange:d=>o("description",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Describe the service in detail",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),s.jsxs("select",{value:i.category,onChange:d=>o("category",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"maintenance",children:"Maintenance"}),s.jsx("option",{value:"repair",children:"Repair"}),s.jsx("option",{value:"diagnostic",children:"Diagnostic"}),s.jsx("option",{value:"inspection",children:"Inspection"}),s.jsx("option",{value:"emergency",children:"Emergency"}),s.jsx("option",{value:"preventive",children:"Preventive"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Duration (minutes) *"}),s.jsx("input",{type:"number",value:i.estimatedDuration,onChange:d=>o("estimatedDuration",parseInt(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"15",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labor Rate ($/hour) *"}),s.jsx("input",{type:"number",value:i.laborRate,onChange:d=>o("laborRate",parseFloat(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01",required:!0})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isActive",checked:i.isActive,onChange:d=>o("isActive",d.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Service is active and available"})]})]})})}function IP({service:t,onClose:e,onSuccess:r}){const a=we(),[n,i]=j.useState(!1),[l,o]=j.useState({name:"",description:"",category:"maintenance",estimatedDuration:60,laborRate:120,isActive:!0});j.useEffect(()=>{t&&o({name:t.name,description:t.description,category:t.category,estimatedDuration:t.estimatedDuration,laborRate:t.laborRate,isActive:t.isActive})},[t]);const c=(u,m)=>{o(h=>({...h,[u]:m}))},d=async()=>{if(!(t!=null&&t._id)){C.error("Service ID is missing");return}if(!l.name||!l.description){C.error("Please fill in all required fields");return}i(!0);try{await a(tN({id:t._id,data:l})).unwrap(),C.success("Service updated successfully"),r(),e()}catch(u){console.error("Failed to update service:",u),C.error(u.message||"Failed to update service")}finally{i(!1)}};return t?s.jsx(Yt,{title:"Edit Service",icon:s.jsx(kt,{className:"w-5 h-5"}),onClose:e,onSubmit:d,submitLabel:n?"Updating...":"Update Service",submitColor:"bg-blue-600",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name *"}),s.jsx("input",{type:"text",value:l.name,onChange:u=>c("name",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Oil Change, Brake Inspection",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),s.jsx("textarea",{value:l.description,onChange:u=>c("description",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Describe the service in detail",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),s.jsxs("select",{value:l.category,onChange:u=>c("category",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"maintenance",children:"Maintenance"}),s.jsx("option",{value:"repair",children:"Repair"}),s.jsx("option",{value:"diagnostic",children:"Diagnostic"}),s.jsx("option",{value:"inspection",children:"Inspection"}),s.jsx("option",{value:"emergency",children:"Emergency"}),s.jsx("option",{value:"preventive",children:"Preventive"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Duration (minutes) *"}),s.jsx("input",{type:"number",value:l.estimatedDuration,onChange:u=>c("estimatedDuration",parseInt(u.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"15",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labor Rate ($/hour) *"}),s.jsx("input",{type:"number",value:l.laborRate,onChange:u=>c("laborRate",parseFloat(u.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01",required:!0})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isActive",checked:l.isActive,onChange:u=>c("isActive",u.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Service is active and available"})]})]})}):null}function RP({service:t,onClose:e,onSuccess:r}){const a=we(),[n,i]=j.useState(!1),[l,o]=j.useState(""),c=async()=>{if(!(t!=null&&t._id)){C.error("Service ID is missing");return}if(l!==t.name){C.error("Please type the service name exactly to confirm deletion");return}i(!0);try{await a(sN(t._id)).unwrap(),C.success("Service deleted successfully"),r(),e()}catch(d){console.error("Failed to delete service:",d),C.error(d.message||"Failed to delete service")}finally{i(!1)}};return t?s.jsx(Yt,{title:"Delete Service",icon:s.jsx(Le,{className:"w-5 h-5"}),onClose:e,onSubmit:c,submitLabel:n?"Deleting...":"Delete Service",submitColor:"bg-red-600",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(Le,{className:"w-5 h-5 text-red-400 mt-0.5"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Are you sure you want to delete this service?"}),s.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[s.jsx("p",{children:"This action cannot be undone. This will permanently delete the service:"}),s.jsx("p",{className:"font-semibold mt-1",children:t.name})]})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Details"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",t.name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Category:"})," ",t.category]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Duration:"})," ",t.estimatedDuration," minutes"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Labor Rate:"})," $",t.laborRate,"/hour"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type the service name to confirm deletion"}),s.jsx("input",{type:"text",value:l,onChange:d=>o(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:`Type "${t.name}" to confirm`,required:!0})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("p",{children:" This action will:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsx("li",{children:"Permanently delete the service from the catalog"}),s.jsx("li",{children:"Remove it from all future work orders"}),s.jsx("li",{children:"Cannot be undone"})]})]})]})}):null}function LP({onClose:t,onSuccess:e}){const r=we(),{catalog:a,technicians:n}=ve(f=>f.services),{list:i,loading:l}=ve(f=>f.customers),[o,c]=j.useState(!1),[d,u]=j.useState({customerId:"",serviceId:"",vehicleId:"",technicianId:"",priority:"medium",estimatedStartDate:"",estimatedEndDate:"",laborHours:1,laborRate:120,partsCost:0,notes:""});j.useEffect(()=>{console.log("AddWorkOrderModal: customers.length =",i.length),console.log("AddWorkOrderModal: customersLoading =",l),i.length===0&&(console.log("AddWorkOrderModal: Dispatching fetchCustomers"),r(Pt({limit:100})))},[r,i.length]),j.useEffect(()=>{if(l){const f=setTimeout(()=>{i.length===0&&console.error("AddWorkOrderModal: Customers failed to load after timeout")},5e3);return()=>clearTimeout(f)}},[l,i.length]);const m=i==null?void 0:i.find(f=>f._id===d.customerId),h=(m==null?void 0:m.vehicles)||[],x=(f,y)=>{u(p=>({...p,[f]:y,...f==="customerId"&&{vehicleId:""}}))},g=async()=>{var b;if(!d.customerId||!d.serviceId||!d.vehicleId){C.error("Please fill in all required fields");return}const f=i==null?void 0:i.find(v=>v._id===d.customerId),y=a==null?void 0:a.find(v=>v._id===d.serviceId),p=(b=f==null?void 0:f.vehicles)==null?void 0:b.find(v=>v._id===d.vehicleId);if(!f||!y||!p){C.error("Invalid selection. Please try again.");return}c(!0);try{const v={customer:d.customerId,vehicle:{make:p.make,model:p.model,year:p.year,vin:p.vin,licensePlate:p.licensePlate,mileage:p.mileage},services:[{service:d.serviceId,description:y.description,laborHours:d.laborHours,laborRate:d.laborRate,parts:[],totalCost:d.laborHours*d.laborRate+(d.partsCost||0)}],technician:d.technicianId||void 0,priority:d.priority,estimatedStartDate:d.estimatedStartDate,estimatedCompletionDate:d.estimatedEndDate,notes:d.notes};await r(rN(v)).unwrap(),C.success("Work order created successfully"),e(),t()}catch(v){console.error("Failed to create work order:",v),C.error(v.message||"Failed to create work order")}finally{c(!1)}};return s.jsx(Yt,{title:"Create New Work Order",icon:s.jsx(Hd,{className:"w-5 h-5"}),onClose:t,onSubmit:g,submitLabel:o?"Creating...":"Create Work Order",submitColor:"bg-blue-600",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer *"}),s.jsxs("select",{value:d.customerId,onChange:f=>x("customerId",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:l,children:[s.jsx("option",{value:"",children:l?"Loading customers...":"Select Customer"}),i==null?void 0:i.map(f=>s.jsxs("option",{value:f._id,children:[f.name," - ",f.email]},f._id))]}),l&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Loading customers..."}),!l&&i.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No customers found. Please add customers first."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service *"}),s.jsxs("select",{value:d.serviceId,onChange:f=>x("serviceId",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Select Service"}),a==null?void 0:a.filter(f=>f.isActive).map(f=>s.jsxs("option",{value:f._id,children:[f.name," - $",f.laborRate,"/hr"]},f._id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle *"}),s.jsxs("select",{value:d.vehicleId,onChange:f=>x("vehicleId",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:!d.customerId,children:[s.jsx("option",{value:"",children:d.customerId?"Select Vehicle":"Select Customer First"}),h.map(f=>s.jsxs("option",{value:f._id,children:[f.year," ",f.make," ",f.model," - ",f.licensePlate]},f._id))]}),d.customerId&&h.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No vehicles found for this customer. Please add vehicles to the customer profile first."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technician"}),s.jsxs("select",{value:d.technicianId,onChange:f=>x("technicianId",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select Technician (Optional)"}),n==null?void 0:n.filter(f=>f.isActive).map(f=>s.jsxs("option",{value:f._id,children:[f.name," - $",f.hourlyRate,"/hr"]},f._id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:d.priority,onChange:f=>x("priority",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Start Date *"}),s.jsx("input",{type:"datetime-local",value:d.estimatedStartDate,onChange:f=>x("estimatedStartDate",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated End Date *"}),s.jsx("input",{type:"datetime-local",value:d.estimatedEndDate,onChange:f=>x("estimatedEndDate",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labor Hours"}),s.jsx("input",{type:"number",value:d.laborHours,onChange:f=>x("laborHours",parseFloat(f.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0.5",step:"0.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labor Rate ($/hr)"}),s.jsx("input",{type:"number",value:d.laborRate,onChange:f=>x("laborRate",parseFloat(f.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parts Cost ($)"}),s.jsx("input",{type:"number",value:d.partsCost,onChange:f=>x("partsCost",parseFloat(f.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:d.notes,onChange:f=>x("notes",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Additional notes about the work order"})]})]})})}function OP({workOrder:t,onClose:e,onSuccess:r}){var f;const a=we(),{catalog:n,technicians:i}=ve(y=>y.services);ve(y=>y.customers);const[l,o]=j.useState(!1),[c,d]=j.useState({services:[],technicianId:"",priority:"medium",estimatedStartDate:"",estimatedCompletionDate:"",actualStartDate:"",actualCompletionDate:"",notes:"",customerNotes:""});j.useEffect(()=>{var y;t&&d({services:t.services.map(p=>({service:p.service._id,description:p.description||"",laborHours:p.laborHours,laborRate:p.laborRate,parts:p.parts||[],totalCost:p.totalCost})),technicianId:((y=t.technician)==null?void 0:y._id)||"",priority:t.priority,estimatedStartDate:t.estimatedStartDate||"",estimatedCompletionDate:t.estimatedCompletionDate||"",actualStartDate:t.actualStartDate||"",actualCompletionDate:t.actualCompletionDate||"",notes:t.notes||"",customerNotes:t.customerNotes||""})},[t]);const u=(y,p)=>{d(b=>({...b,[y]:p}))},m=(y,p,b)=>{d(v=>{var w;return{...v,services:((w=v.services)==null?void 0:w.map((N,S)=>S===y?{...N,[p]:b}:N))||[]}})},h=()=>{d(y=>({...y,services:[...y.services||[],{service:"",description:"",laborHours:1,laborRate:120,parts:[],totalCost:0}]}))},x=y=>{d(p=>{var b;return{...p,services:((b=p.services)==null?void 0:b.filter((v,w)=>w!==y))||[]}})},g=async()=>{if(!(t!=null&&t._id)){C.error("Work order ID is missing");return}if(!c.services||c.services.length===0){C.error("Please add at least one service");return}o(!0);try{await a(aN({id:t._id,data:c})).unwrap(),C.success("Work order updated successfully"),r(),e()}catch(y){console.error("Failed to update work order:",y),C.error(y.message||"Failed to update work order")}finally{o(!1)}};return t?s.jsx(Yt,{title:"Edit Work Order",icon:s.jsx(kt,{className:"w-5 h-5"}),onClose:e,onSubmit:g,submitLabel:l?"Updating...":"Update Work Order",submitColor:"bg-blue-600",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),s.jsxs("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm",children:[t.customer.name," - ",t.customer.email]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle"}),s.jsxs("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm",children:[t.vehicle.make," ",t.vehicle.model," (",t.vehicle.year,")"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Services *"}),(f=c.services)==null?void 0:f.map((y,p)=>s.jsxs("div",{className:"border border-gray-300 rounded-lg p-3 mb-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Service ",p+1]}),s.jsx("button",{type:"button",onClick:()=>x(p),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Service"}),s.jsxs("select",{value:y.service,onChange:b=>m(p,"service",b.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",required:!0,children:[s.jsx("option",{value:"",children:"Select Service"}),n==null?void 0:n.filter(b=>b.isActive).map(b=>s.jsxs("option",{value:b._id,children:[b.name," - $",b.laborRate,"/hr"]},b._id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Labor Hours"}),s.jsx("input",{type:"number",value:y.laborHours,onChange:b=>m(p,"laborHours",parseFloat(b.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",min:"0",step:"0.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Labor Rate ($/hr)"}),s.jsx("input",{type:"number",value:y.laborRate,onChange:b=>m(p,"laborRate",parseFloat(b.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",min:"0",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Total Cost"}),s.jsx("input",{type:"number",value:y.totalCost,onChange:b=>m(p,"totalCost",parseFloat(b.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",min:"0",step:"0.01"})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),s.jsx("textarea",{value:y.description,onChange:b=>m(p,"description",b.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",rows:2})]})]},p)),s.jsx("button",{type:"button",onClick:h,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-800",children:"+ Add Service"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technician"}),s.jsxs("select",{value:c.technicianId,onChange:y=>u("technicianId",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select Technician"}),i==null?void 0:i.filter(y=>y.isActive).map(y=>s.jsxs("option",{value:y._id,children:[y.name," - $",y.hourlyRate,"/hr"]},y._id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:c.priority,onChange:y=>u("priority",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Start Date"}),s.jsx("input",{type:"datetime-local",value:c.estimatedStartDate,onChange:y=>u("estimatedStartDate",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Completion Date"}),s.jsx("input",{type:"datetime-local",value:c.estimatedCompletionDate,onChange:y=>u("estimatedCompletionDate",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:c.notes,onChange:y=>u("notes",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Notes"}),s.jsx("textarea",{value:c.customerNotes,onChange:y=>u("customerNotes",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]})]})}):null}function FP({workOrder:t,onClose:e,onSuccess:r}){const a=we(),[n,i]=j.useState(!1),[l,o]=j.useState(""),c=async()=>{if(!(t!=null&&t._id)){C.error("Work order ID is missing");return}if(l!=="DELETE"){C.error('Please type "DELETE" to confirm deletion');return}i(!0);try{await a(nN(t._id)).unwrap(),C.success("Work order deleted successfully"),r(),e()}catch(d){console.error("Failed to delete work order:",d),C.error(d.message||"Failed to delete work order")}finally{i(!1)}};return t?s.jsx(Yt,{title:"Delete Work Order",icon:s.jsx(Le,{className:"w-5 h-5"}),onClose:e,onSubmit:c,submitLabel:n?"Deleting...":"Delete Work Order",submitColor:"bg-red-600",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(Le,{className:"w-5 h-5 text-red-400 mt-0.5"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Are you sure you want to delete this work order?"}),s.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[s.jsx("p",{children:"This action cannot be undone. This will permanently delete the work order:"}),s.jsxs("p",{className:"font-semibold mt-1",children:["#",t._id]})]})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Order Details"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Customer:"})," ",t.customer.name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Service:"})," ",t.service.name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Vehicle:"})," ",t.vehicle.make," ",t.vehicle.model]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Status:"})," ",t.status.replace("_"," ")]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Total Cost:"})," $",t.totalCost.toFixed(2)]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(t.createdAt).toLocaleDateString()]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:'Type "DELETE" to confirm deletion'}),s.jsx("input",{type:"text",value:l,onChange:d=>o(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Type DELETE to confirm",required:!0})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("p",{children:" This action will:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsx("li",{children:"Permanently delete the work order"}),s.jsx("li",{children:"Remove all associated data and history"}),s.jsx("li",{children:"Cannot be undone"}),s.jsx("li",{children:"May affect customer records and billing"})]})]})]})}):null}function $P({onClose:t,onSuccess:e}){const r=we(),[a,n]=j.useState(!1),[i,l]=j.useState(""),[o,c]=j.useState({name:"",email:"",phone:"",hourlyRate:0,specializations:[],certifications:[],isActive:!0}),[d,u]=j.useState(""),[m,h]=j.useState({name:"",issuingAuthority:"",issueDate:"",expiryDate:""}),x=(v,w)=>{c(N=>({...N,[v]:w}))},g=()=>{d.trim()&&!o.specializations.includes(d.trim())&&(c(v=>({...v,specializations:[...v.specializations,d.trim()]})),u(""))},f=v=>{c(w=>({...w,specializations:w.specializations.filter((N,S)=>S!==v)}))},y=()=>{m.name.trim()&&(c(v=>({...v,certifications:[...v.certifications,{name:m.name.trim(),issuingAuthority:m.issuingAuthority.trim(),issueDate:m.issueDate||void 0,expiryDate:m.expiryDate||void 0}]})),h({name:"",issuingAuthority:"",issueDate:"",expiryDate:""}))},p=v=>{c(w=>({...w,certifications:w.certifications.filter((N,S)=>S!==v)}))},b=async v=>{v.preventDefault(),n(!0),l("");try{await r(iN(o)).unwrap(),e(),t()}catch(w){l(w.message||"Failed to create technician")}finally{n(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(hs,{className:"w-5 h-5"}),"Add New Technician"]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[i&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800 text-sm",children:i})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),s.jsx("input",{type:"text",required:!0,value:o.name,onChange:v=>x("name",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter technician name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",required:!0,value:o.email,onChange:v=>x("email",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:o.phone,onChange:v=>x("phone",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hourly Rate *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:o.hourlyRate,onChange:v=>x("hourlyRate",parseFloat(v.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(Na,{className:"h-5 w-5 text-gray-400"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specializations"}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("input",{type:"text",value:d,onChange:v=>u(v.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add specialization",onKeyPress:v=>v.key==="Enter"&&(v.preventDefault(),g())}),s.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add"})]}),o.specializations.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:o.specializations.map((v,w)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[v,s.jsx("button",{type:"button",onClick:()=>f(w),className:"text-blue-600 hover:text-blue-800",children:s.jsx(Re,{className:"w-3 h-3"})})]},w))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Certifications"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-3",children:[s.jsx("input",{type:"text",value:m.name,onChange:v=>h(w=>({...w,name:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Certification name"}),s.jsx("input",{type:"text",value:m.issuingAuthority,onChange:v=>h(w=>({...w,issuingAuthority:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Issuing authority"}),s.jsx("input",{type:"date",value:m.issueDate,onChange:v=>h(w=>({...w,issueDate:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Issue date"}),s.jsx("input",{type:"date",value:m.expiryDate,onChange:v=>h(w=>({...w,expiryDate:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Expiry date"})]}),s.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Add Certification"}),o.certifications.length>0&&s.jsx("div",{className:"mt-3 space-y-2",children:o.certifications.map((v,w)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:v.name}),s.jsx("p",{className:"text-sm text-gray-600",children:v.issuingAuthority}),v.issueDate&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Issued: ",new Date(v.issueDate).toLocaleDateString()]})]}),s.jsx("button",{type:"button",onClick:()=>p(w),className:"text-red-600 hover:text-red-800",children:s.jsx(Re,{className:"w-4 h-4"})})]},w))})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:o.isActive,onChange:v=>x("isActive",v.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active technician"})]})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(mr,{className:"w-4 h-4"}),"Create Technician"]})})]})]})]})})}function zP({technician:t,onClose:e,onSuccess:r}){const a=we(),[n,i]=j.useState(!1),[l,o]=j.useState(""),[c,d]=j.useState({name:"",email:"",phone:"",hourlyRate:0,specializations:[],certifications:[],isActive:!0}),[u,m]=j.useState(""),[h,x]=j.useState({name:"",issuingAuthority:"",issueDate:"",expiryDate:""});j.useEffect(()=>{t&&d({name:t.name||"",email:t.email||"",phone:t.phone||"",hourlyRate:t.hourlyRate||0,specializations:t.specialization||[],certifications:t.certifications||[],isActive:t.isActive??!0})},[t]);const g=(w,N)=>{d(S=>({...S,[w]:N}))},f=()=>{u.trim()&&!c.specializations.includes(u.trim())&&(d(w=>({...w,specializations:[...w.specializations,u.trim()]})),m(""))},y=w=>{d(N=>({...N,specializations:N.specializations.filter((S,k)=>k!==w)}))},p=()=>{h.name.trim()&&(d(w=>({...w,certifications:[...w.certifications,{name:h.name.trim(),issuingAuthority:h.issuingAuthority.trim(),issueDate:h.issueDate||void 0,expiryDate:h.expiryDate||void 0}]})),x({name:"",issuingAuthority:"",issueDate:"",expiryDate:""}))},b=w=>{d(N=>({...N,certifications:N.certifications.filter((S,k)=>k!==w)}))},v=async w=>{if(w.preventDefault(),!!t){i(!0),o("");try{await a(lN({id:t._id,data:c})).unwrap(),r(),e()}catch(N){o(N.message||"Failed to update technician")}finally{i(!1)}}};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(hs,{className:"w-5 h-5"}),"Edit Technician"]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800 text-sm",children:l})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),s.jsx("input",{type:"text",required:!0,value:c.name,onChange:w=>g("name",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter technician name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",required:!0,value:c.email,onChange:w=>g("email",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:c.phone,onChange:w=>g("phone",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hourly Rate *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:c.hourlyRate,onChange:w=>g("hourlyRate",parseFloat(w.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(Na,{className:"h-5 w-5 text-gray-400"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specializations"}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("input",{type:"text",value:u,onChange:w=>m(w.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add specialization",onKeyPress:w=>w.key==="Enter"&&(w.preventDefault(),f())}),s.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add"})]}),c.specializations.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:c.specializations.map((w,N)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[w,s.jsx("button",{type:"button",onClick:()=>y(N),className:"text-blue-600 hover:text-blue-800",children:s.jsx(Re,{className:"w-3 h-3"})})]},N))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Certifications"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-3",children:[s.jsx("input",{type:"text",value:h.name,onChange:w=>x(N=>({...N,name:w.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Certification name"}),s.jsx("input",{type:"text",value:h.issuingAuthority,onChange:w=>x(N=>({...N,issuingAuthority:w.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Issuing authority"}),s.jsx("input",{type:"date",value:h.issueDate,onChange:w=>x(N=>({...N,issueDate:w.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Issue date"}),s.jsx("input",{type:"date",value:h.expiryDate,onChange:w=>x(N=>({...N,expiryDate:w.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Expiry date"})]}),s.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Add Certification"}),c.certifications.length>0&&s.jsx("div",{className:"mt-3 space-y-2",children:c.certifications.map((w,N)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:w.name}),s.jsx("p",{className:"text-sm text-gray-600",children:w.issuingAuthority}),w.issueDate&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Issued: ",new Date(w.issueDate).toLocaleDateString()]})]}),s.jsx("button",{type:"button",onClick:()=>b(N),className:"text-red-600 hover:text-red-800",children:s.jsx(Re,{className:"w-4 h-4"})})]},N))})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:c.isActive,onChange:w=>g("isActive",w.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active technician"})]})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(mr,{className:"w-4 h-4"}),"Update Technician"]})})]})]})]})}):null}function BP({technician:t,onClose:e,onSuccess:r}){const a=we(),[n,i]=j.useState(!1),[l,o]=j.useState(""),c=async()=>{if(t){i(!0),o("");try{await a(oN(t._id)).unwrap(),r(),e()}catch(d){o(d.message||"Failed to delete technician")}finally{i(!1)}}};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(ts,{className:"w-5 h-5 text-red-500"}),"Delete Technician"]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:s.jsx("p",{className:"text-red-800 text-sm",children:l})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:s.jsx(Le,{className:"h-6 w-6 text-red-600"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Technician"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Are you sure you want to delete ",s.jsx("strong",{children:t.name}),"? This action cannot be undone and will remove all associated data."]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Technician Details:"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Name:"})," ",t.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",t.email]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",t.phone||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Hourly Rate:"})," $",t.hourlyRate,"/hr"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Specializations:"})," ",(t.specialization||[]).length," areas"]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{type:"button",onClick:c,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Le,{className:"w-4 h-4"}),"Delete Technician"]})})]})]})]})}):null}function VP(){const[t,e]=j.useState("catalog"),[r,a]=j.useState(""),[n,i]=j.useState("all"),[l,o]=j.useState("all"),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,x]=j.useState(!1),[g,f]=j.useState(!1),[y,p]=j.useState(null),[b,v]=j.useState(!1),[w,N]=j.useState(!1),[S,k]=j.useState(!1),[P,_]=j.useState(null),[L,T]=j.useState(!1),[U,H]=j.useState(!1),[W,J]=j.useState(!1),[V,G]=j.useState(null),{catalog:M,workOrders:z,technicians:D,catalogLoading:X,workOrdersLoading:F,techniciansLoading:ie,catalogStats:ye,workOrderStats:fe,technicianStats:pe,categories:Te,specializations:Oe,catalogError:Y,workOrdersError:$,techniciansError:ke}=ve(K=>K.services);j.useEffect(()=>{console.log("Services state:",{catalog:(M==null?void 0:M.length)||0,workOrders:(z==null?void 0:z.length)||0,technicians:(D==null?void 0:D.length)||0,catalogLoading:X,workOrdersLoading:F,techniciansLoading:ie,catalogError:Y,workOrdersError:$,techniciansError:ke,workOrdersType:typeof z,workOrdersIsArray:Array.isArray(z),workOrdersValue:z,catalogValue:M,techniciansValue:D})},[M,z,D,X,F,ie,Y,$,ke]);const E=we();j.useEffect(()=>{console.log("Loading services data..."),E(ln({})),E(on({})),E(li({})),E(lx()),E(ox({})),E(cx()),E(cN()),E(dN())},[E]);const ue=(Array.isArray(M)?M:[]).filter(K=>{const he=(K.name||"").toLowerCase().includes(r.toLowerCase())||(K.description||"").toLowerCase().includes(r.toLowerCase()),Pe=n==="all"||K.category===n;return he&&Pe&&K.isActive}),B=(Array.isArray(z)?z:[]).filter(K=>l==="all"||K.status===l),ne=(()=>{if(Array.isArray(Te)&&Te.length>0)return Te;if(Array.isArray(M)&&M.length>0){const K=new Set(M.map(he=>he.category).filter(Boolean));return Array.from(K)}return[]})(),te=Array.isArray(ne)?ne:[],ce=()=>{m(!0)},R=K=>{p(K),x(!0)},I=K=>{p(K),f(!0)},Z=()=>{E(ln({})),E(lx())},ee=()=>{v(!0)},xe=K=>{_(K),N(!0)},Ae=K=>{_(K),k(!0)},je=()=>{E(on({})),E(ox({}))},Ee=()=>{E(li({})),E(cx())},Fe=Array.isArray(M)?M.length:0,Kt=Array.isArray(M)?M.filter(K=>K&&K.isActive).length:0,Br=Array.isArray(z)?z.length:0,Xt=Array.isArray(z)?z.filter(K=>K&&K.status==="completed").length:0,Zs=Array.isArray(D)?D.length:0,Ze=Array.isArray(D)?D.filter(K=>K&&K.isActive).length:0,At=Array.isArray(D)?D.filter(K=>K&&!K.isActive).length:0,Cs=()=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Service Catalog"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Fe}),s.jsxs("p",{className:"text-sm text-green-600",children:[Kt," active"]})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:s.jsx(Sn,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Work Orders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Br}),s.jsxs("p",{className:"text-sm text-green-600",children:[Xt," completed"]})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:s.jsx(Hd,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Technicians"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Zs}),s.jsxs("p",{className:"text-sm text-green-600",children:[Ze," active"]}),At>0&&s.jsxs("p",{className:"text-sm text-gray-500",children:[At," inactive"]})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:s.jsx(Or,{className:"w-6 h-6 text-purple-600"})})]})})]}),Qt=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Service Catalog"}),s.jsx("p",{className:"text-gray-600",children:"Manage your service offerings and pricing"})]}),s.jsxs("button",{onClick:ce,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Add Service"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(wa,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search services...",value:r,onChange:K=>a(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("select",{value:n,onChange:K=>i(K.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Categories"}),te.map(K=>s.jsx("option",{value:K,children:K},K))]})]})}),X?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):ue.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ts,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No services found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:r||n!=="all"?"Try adjusting your search or filter criteria":"Get started by adding your first service"}),!r&&n==="all"&&s.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Add First Service"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ue.map(K=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:K.name}),s.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mt-1",children:K.category})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>R(K),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit service",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>I(K),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete service",children:s.jsx(Le,{className:"w-4 h-4"})})]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:K.description}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx(lt,{className:"w-4 h-4"}),"Duration"]}),s.jsxs("span",{className:"font-medium",children:[K.estimatedDuration," min"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx(Na,{className:"w-4 h-4"}),"Labor Rate"]}),s.jsxs("span",{className:"font-medium",children:["$",K.laborRate,"/hr"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Parts"}),s.jsxs("span",{className:"font-medium",children:[(K.parts||[]).length," items"]})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-lg font-semibold text-gray-800",children:["$",(K.estimatedDuration/60*K.laborRate+(K.parts||[]).reduce((he,Pe)=>he+Pe.totalPrice,0)).toFixed(2)]}),s.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm transition-colors",children:"View Details"})]})})]},K._id))})]}),er=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Work Orders"}),s.jsx("p",{className:"text-gray-600",children:"Track and manage ongoing service work"})]}),s.jsxs("button",{onClick:ee,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Create Work Order"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(g7,{className:"w-5 h-5 text-gray-500"}),s.jsxs("select",{value:l,onChange:K=>o(K.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"on_hold",children:"On Hold"})]})]})}),F?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):B.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Hd,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No work orders found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:l!=="all"?"No work orders match the selected status":"Get started by creating your first work order"}),l==="all"&&s.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Create First Work Order"})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Work Order"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Technician"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(K=>{var he,Pe,Gt,le;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",K._id]}),s.jsx("div",{className:"text-sm text-gray-500",children:new Date(K.createdAt).toLocaleDateString()})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:((he=K.customer)==null?void 0:he.name)||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[(Pe=K.vehicle)==null?void 0:Pe.make," ",(Gt=K.vehicle)==null?void 0:Gt.model]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:((le=K.technician)==null?void 0:le.name)||"Unassigned"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${K.status==="completed"?"bg-green-100 text-green-800":K.status==="in_progress"?"bg-yellow-100 text-yellow-800":K.status==="on_hold"?"bg-orange-100 text-orange-800":K.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[K.status==="completed"&&s.jsx(eo,{className:"w-3 h-3 mr-1"}),K.status==="cancelled"&&s.jsx(vi,{className:"w-3 h-3 mr-1"}),K.status.replace("_"," ")]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",K.totalCost.toFixed(2)]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{onClick:()=>xe(K),className:"text-blue-600 hover:text-blue-900 mr-3 transition-colors",title:"Edit work order",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ae(K),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete work order",children:s.jsx(Le,{className:"w-4 h-4"})})]})]},K._id)})})]})})})]}),O=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Technicians"}),s.jsx("p",{className:"text-gray-600",children:"Manage your service technicians"})]}),s.jsxs("button",{onClick:()=>T(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Add Technician"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:K=>d(K.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Show inactive technicians"})]}),At>0&&s.jsxs("span",{className:"text-sm text-gray-500",children:["(",At," inactive)"]})]})})}),ie?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(()=>{const K=(D||[]).filter(he=>he&&(c?!0:he.isActive));return K.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Or,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c?"No technicians found":"No active technicians found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:c?"Get started by adding your first technician":"All technicians are currently inactive"}),s.jsx("button",{onClick:()=>T(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Add First Technician"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(he=>s.jsxs("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow ${he.isActive?"":"opacity-60"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(hs,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:he.name||"Unknown"}),s.jsx("p",{className:"text-gray-600 text-sm",children:he.email||"No email"}),!he.isActive&&s.jsx("span",{className:"inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full mt-1",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{G(he),H(!0)},className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit technician",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{G(he),J(!0)},className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete technician",children:s.jsx(Le,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Phone"}),s.jsx("span",{className:"font-medium",children:he.phone||"N/A"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Hourly Rate"}),s.jsxs("span",{className:"font-medium",children:["$",he.hourlyRate||0,"/hr"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Specializations"}),s.jsxs("span",{className:"font-medium",children:[(he.specialization||[]).length," areas"]})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(he.specialization||[]).slice(0,3).map(Pe=>s.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded",children:Pe},Pe)),(he.specialization||[]).length>3&&s.jsxs("span",{className:"inline-block text-gray-500 text-xs px-2 py-1",children:["+",(he.specialization||[]).length-3," more"]})]})})]},he._id))})})()]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(It,{title:"Service Management"}),(Y||$||ke)&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(vi,{className:"h-5 w-5 text-red-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"API Errors"}),s.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[Y&&s.jsxs("p",{children:["Service Catalog: ",Y]}),$&&s.jsxs("p",{children:["Work Orders: ",$]}),ke&&s.jsxs("p",{children:["Technicians: ",ke]})]})]})]})}),Cs(),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"catalog",label:"Service Catalog",count:(M||[]).filter(K=>K&&K.isActive).length},{key:"workorders",label:"Work Orders",count:(z||[]).length},{key:"technicians",label:"Technicians",count:(D||[]).filter(K=>K&&K.isActive).length}].map(K=>s.jsxs("button",{onClick:()=>e(K.key),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t===K.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[K.label," (",K.count,")"]},K.key))})}),s.jsxs("div",{className:"p-6",children:[t==="catalog"&&Qt(),t==="workorders"&&er(),t==="technicians"&&O()]})]}),u&&s.jsx(EP,{onClose:()=>m(!1),onSuccess:Z}),h&&s.jsx(IP,{service:y,onClose:()=>{x(!1),p(null)},onSuccess:Z}),g&&s.jsx(RP,{service:y,onClose:()=>{f(!1),p(null)},onSuccess:Z}),b&&s.jsx(LP,{onClose:()=>v(!1),onSuccess:je}),w&&s.jsx(OP,{workOrder:P,onClose:()=>{N(!1),_(null)},onSuccess:je}),S&&s.jsx(FP,{workOrder:P,onClose:()=>{k(!1),_(null)},onSuccess:je}),L&&s.jsx($P,{onClose:()=>T(!1),onSuccess:Ee}),U&&s.jsx(zP,{technician:V,onClose:()=>{H(!1),G(null)},onSuccess:Ee}),W&&s.jsx(BP,{technician:V,onClose:()=>{J(!1),G(null)},onSuccess:Ee})]})}const UP=async()=>(await A.get("/system-admin/health")).data,HP=async()=>(await A.get("/system-admin/system/info")).data,WP=async()=>(await A.get("/system-admin/system/database")).data,Iy=t=>{if(t===0)return"0 B";const e=1024,r=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,a)).toFixed(2))} ${r[a]}`},qP=t=>{const e=Math.floor(t/86400),r=Math.floor(t%86400/3600),a=Math.floor(t%3600/60);return e>0?`${e}d ${r}h ${a}m`:r>0?`${r}h ${a}m`:`${a}m`},Ry=t=>{switch(t){case"healthy":case"completed":case"running":return"text-green-600";case"warning":case"in_progress":return"text-yellow-600";case"critical":case"failed":case"error":case"stopped":return"text-red-600";case"pending":return"text-blue-600";default:return"text-gray-600"}},YP=t=>{switch(t){case"healthy":case"completed":case"running":return"bg-green-100";case"warning":case"in_progress":return"bg-yellow-100";case"critical":case"failed":case"error":case"stopped":return"bg-red-100";case"pending":return"bg-blue-100";default:return"bg-gray-100"}},KP=()=>{const[t,e]=j.useState("overview"),[r,a]=j.useState(!1),[n,i]=j.useState(null),[l,o]=j.useState(null),[c,d]=j.useState(null);j.useEffect(()=>{u()},[]);const u=async()=>{a(!0);try{const[g,f,y]=await Promise.all([UP(),HP(),WP()]);i(g.data.current),o(f.data),d(y.data)}catch(g){console.error("Error loading system data:",g),C.error("Failed to load system data")}finally{a(!1)}},m=[{id:"overview",label:"Overview",icon:s.jsx(iy,{size:20})},{id:"system",label:"System Info",icon:s.jsx(B8,{size:20})}],h=()=>{var g,f,y,p,b,v,w,N,S;return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Status"}),s.jsx("p",{className:`text-2xl font-bold ${Ry((n==null?void 0:n.status)||"unknown")}`,children:(n==null?void 0:n.status)||"Unknown"})]}),s.jsx("div",{className:`p-3 rounded-full ${YP((n==null?void 0:n.status)||"unknown")}`,children:s.jsx(iy,{size:24,className:Ry((n==null?void 0:n.status)||"unknown")})})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CPU Usage"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((y=(f=(g=n==null?void 0:n.metrics)==null?void 0:g.cpu)==null?void 0:f.usage)==null?void 0:y.toFixed(1))||"0","%"]})]}),s.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:s.jsx(P8,{size:24,className:"text-blue-600"})})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Memory Usage"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((v=(b=(p=n==null?void 0:n.metrics)==null?void 0:p.memory)==null?void 0:b.usage)==null?void 0:v.toFixed(1))||"0","%"]})]}),s.jsx("div",{className:"p-3 rounded-full bg-green-100",children:s.jsx(s8,{size:24,className:"text-green-600"})})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disk Usage"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((S=(N=(w=n==null?void 0:n.metrics)==null?void 0:w.disk)==null?void 0:N.usage)==null?void 0:S.toFixed(1))||"0","%"]})]}),s.jsx("div",{className:"p-3 rounded-full bg-purple-100",children:s.jsx(h8,{size:24,className:"text-purple-600"})})]})})]})})},x=()=>{var g,f,y,p,b,v;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),l&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Platform"}),s.jsx("span",{className:"text-sm font-medium",children:l.platform})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Architecture"}),s.jsx("span",{className:"text-sm font-medium",children:l.arch})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Release"}),s.jsx("span",{className:"text-sm font-medium",children:l.release})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Hostname"}),s.jsx("span",{className:"text-sm font-medium",children:l.hostname})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Uptime"}),s.jsx("span",{className:"text-sm font-medium",children:qP(l.uptime)})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total Memory"}),s.jsx("span",{className:"text-sm font-medium",children:Iy(l.totalMemory)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Free Memory"}),s.jsx("span",{className:"text-sm font-medium",children:Iy(l.freeMemory)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"CPU Cores"}),s.jsx("span",{className:"text-sm font-medium",children:l.cpus})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Node Version"}),s.jsx("span",{className:"text-sm font-medium",children:l.nodeVersion})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Environment"}),s.jsx("span",{className:"text-sm font-medium",children:l.environment})]})]})]})]}),c&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Database Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Database Name"}),s.jsx("span",{className:"text-sm font-medium",children:c.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Version"}),s.jsx("span",{className:"text-sm font-medium",children:c.version})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Collections"}),s.jsx("span",{className:"text-sm font-medium",children:((g=c.storage)==null?void 0:g.collections)||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Documents"}),s.jsx("span",{className:"text-sm font-medium",children:(((f=c.storage)==null?void 0:f.objects)||0).toLocaleString()})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Current Connections"}),s.jsx("span",{className:"text-sm font-medium",children:((y=c.connections)==null?void 0:y.current)||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Available Connections"}),s.jsx("span",{className:"text-sm font-medium",children:((p=c.connections)==null?void 0:p.available)||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total Queries"}),s.jsx("span",{className:"text-sm font-medium",children:(((b=c.operations)==null?void 0:b.query)||0).toLocaleString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total Updates"}),s.jsx("span",{className:"text-sm font-medium",children:(((v=c.operations)==null?void 0:v.update)||0).toLocaleString()})]})]})]})]})]})};return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Administration"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Monitor system health and view system information"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:m.map(g=>s.jsxs("button",{onClick:()=>e(g.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t===g.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[g.icon,s.jsx("span",{children:g.label})]},g.id))})})}),s.jsx("div",{className:"min-h-96",children:r?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):s.jsxs(s.Fragment,{children:[t==="overview"&&h(),t==="system"&&x()]})})]})})};class XP{async getReminders(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/reminders?${r.toString()}`)}async getReminder(e){return A.get(`/reminders/${e}`)}async createReminder(e){return A.post("/reminders",e)}async updateReminder(e,r){return A.put(`/reminders/${e}`,r)}async deleteReminder(e){return A.delete(`/reminders/${e}`)}async markAsSent(e){return A.post(`/reminders/${e}/mark-sent`)}async acknowledgeReminder(e,r){return A.post(`/reminders/${e}/acknowledge`,{notes:r})}async completeReminder(e,r){return A.post(`/reminders/${e}/complete`,{notes:r})}async cancelReminder(e,r){return A.post(`/reminders/${e}/cancel`,{reason:r})}async getUpcomingReminders(e=7,r){const a=new URLSearchParams({days:e.toString()});return r&&a.append("assignedTo",r),A.get(`/reminders/upcoming/list?${a.toString()}`)}async getOverdueReminders(e){const r=new URLSearchParams;return e&&r.append("assignedTo",e),A.get(`/reminders/overdue/list?${r.toString()}`)}async getReminderStats(e,r){const a=new URLSearchParams;return e&&a.append("startDate",e),r&&a.append("endDate",r),A.get(`/reminders/stats/overview?${a.toString()}`)}async createBulkReminders(e){return A.post("/reminders/bulk",{reminders:e})}async getTemplates(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/reminders/templates?${r.toString()}`)}async getTemplate(e){return A.get(`/reminders/templates/${e}`)}async createTemplate(e){return A.post("/reminders/templates",e)}async updateTemplate(e,r){return A.put(`/reminders/templates/${e}`,r)}async deleteTemplate(e){return A.delete(`/reminders/templates/${e}`)}async toggleTemplate(e){return A.patch(`/reminders/templates/${e}/toggle`)}async getNotificationSettings(){return A.get("/reminders/notification-settings")}async updateNotificationSettings(e){return A.put("/reminders/notification-settings",e)}async generateFromTemplate(e,r){return A.post(`/reminders/generate-from-template/${e}`,r)}async generateServiceDueReminders(e,r,a){return A.post("/reminders/generate-service-due",{customerId:e,serviceType:r,dueDate:a})}async generateFollowUpReminders(e,r,a){return A.post("/reminders/generate-follow-up",{customerId:e,appointmentId:r,followUpDate:a})}async generatePaymentReminders(e,r){return A.post("/reminders/generate-payment",{invoiceId:e,dueDate:r})}async scheduleReminder(e,r){return A.post(`/reminders/${e}/schedule`,{scheduleDate:r})}async rescheduleReminder(e,r){return A.post(`/reminders/${e}/reschedule`,{newDate:r})}async sendReminderNotification(e,r){return A.post(`/reminders/${e}/send-notification`,{method:r})}async sendBulkNotifications(e,r){return A.post("/reminders/bulk/send-notifications",{reminderIds:e,method:r})}async getReminderAnalytics(e,r){const a=new URLSearchParams;return e&&a.append("startDate",e),r&&a.append("endDate",r),A.get(`/reminders/analytics?${a.toString()}`)}async getCustomerReminderHistory(e){return A.get(`/reminders/customer/${e}/history`)}async searchReminders(e,r){const a=new URLSearchParams({query:e});return r&&Object.entries(r).forEach(([n,i])=>{i!=null&&a.append(n,i.toString())}),A.get(`/reminders/search?${a.toString()}`)}async duplicateReminder(e){return A.post(`/reminders/${e}/duplicate`)}async archiveReminder(e){return A.post(`/reminders/${e}/archive`)}async unarchiveReminder(e){return A.post(`/reminders/${e}/unarchive`)}async getArchivedReminders(e){const r=new URLSearchParams;return e&&Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/reminders/archived?${r.toString()}`)}}const Rt=new XP,lr=q("reminders/fetchReminders",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Rt.getReminders()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch reminders")}}),xl=q("reminders/createReminder",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await Rt.createReminder(t);return C.success("Reminder created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create reminder"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create reminder")}}),oi=q("reminders/updateReminder",async({id:t,reminderData:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await Rt.updateReminder(t,e);return C.success("Reminder updated successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update reminder"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update reminder")}}),pl=q("reminders/deleteReminder",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await Rt.deleteReminder(t),C.success("Reminder deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete reminder"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete reminder")}}),QP=q("reminders/markSent",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await Rt.markReminderSent(t);return C.success("Reminder marked as sent"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to mark reminder as sent"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to mark reminder as sent")}}),GP=q("reminders/markAcknowledged",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await Rt.markReminderAcknowledged(t);return C.success("Reminder acknowledged"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to acknowledge reminder"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to acknowledge reminder")}}),JP=q("reminders/markCompleted",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await Rt.markReminderCompleted(t);return C.success("Reminder marked as completed"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to mark reminder as completed"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to mark reminder as completed")}}),ZP=q("reminders/cancelReminder",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await Rt.cancelReminder(t);return C.success("Reminder cancelled"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to cancel reminder"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to cancel reminder")}}),nh=q("reminders/fetchStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Rt.getReminderStats()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch reminder stats")}}),e9=q("reminders/fetchUpcoming",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Rt.getUpcomingReminders()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch upcoming reminders")}}),t9=q("reminders/fetchOverdue",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Rt.getOverdueReminders()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch overdue reminders")}}),Us=q("reminders/fetchTemplates",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Rt.getTemplates()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch reminder templates")}}),gl=q("reminders/createTemplate",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await Rt.createTemplate(t);return C.success("Reminder template created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create reminder template"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create reminder template")}}),ci=q("reminders/updateTemplate",async({id:t,templateData:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await Rt.updateTemplate(t,e);return C.success("Reminder template updated successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update reminder template"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update reminder template")}}),fl=q("reminders/deleteTemplate",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await Rt.deleteTemplate(t),C.success("Reminder template deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete reminder template"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete reminder template")}}),cn=q("reminders/fetchNotificationSettings",async(t,{rejectWithValue:e})=>{var r,a;try{return(await Rt.getNotificationSettings()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch notification settings")}}),uN=q("reminders/updateNotificationSettings",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await Rt.updateNotificationSettings(t);return C.success("Notification settings updated successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update notification settings"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to update notification settings")}}),s9={reminders:[],templates:[],notificationSettings:null,upcomingReminders:[],overdueReminders:[],stats:null,remindersLoading:!1,templatesLoading:!1,settingsLoading:!1,statsLoading:!1,error:null};wt({name:"reminders",initialState:s9,reducers:{clearRemindersError:t=>{t.error=null},clearReminders:t=>{t.reminders=[]},clearTemplates:t=>{t.templates=[]}},extraReducers:t=>{t.addCase(lr.pending,e=>{e.remindersLoading=!0,e.error=null}).addCase(lr.fulfilled,(e,r)=>{e.remindersLoading=!1,e.reminders=r.payload}).addCase(lr.rejected,(e,r)=>{e.remindersLoading=!1,e.error=r.payload}).addCase(xl.fulfilled,(e,r)=>{e.reminders.push(r.payload)}).addCase(oi.fulfilled,(e,r)=>{const a=e.reminders.findIndex(n=>n.id===r.payload.id);a!==-1&&(e.reminders[a]=r.payload)}).addCase(pl.fulfilled,(e,r)=>{e.reminders=e.reminders.filter(a=>a.id!==r.payload)}).addCase(QP.fulfilled,(e,r)=>{const a=e.reminders.findIndex(n=>n.id===r.payload.id);a!==-1&&(e.reminders[a]=r.payload)}).addCase(GP.fulfilled,(e,r)=>{const a=e.reminders.findIndex(n=>n.id===r.payload.id);a!==-1&&(e.reminders[a]=r.payload)}).addCase(JP.fulfilled,(e,r)=>{const a=e.reminders.findIndex(n=>n.id===r.payload.id);a!==-1&&(e.reminders[a]=r.payload)}).addCase(ZP.fulfilled,(e,r)=>{const a=e.reminders.findIndex(n=>n.id===r.payload.id);a!==-1&&(e.reminders[a]=r.payload)}),t.addCase(Us.pending,e=>{e.templatesLoading=!0,e.error=null}).addCase(Us.fulfilled,(e,r)=>{e.templatesLoading=!1,e.templates=r.payload}).addCase(Us.rejected,(e,r)=>{e.templatesLoading=!1,e.error=r.payload}).addCase(gl.fulfilled,(e,r)=>{e.templates.push(r.payload)}).addCase(ci.fulfilled,(e,r)=>{const a=e.templates.findIndex(n=>n.id===r.payload.id);a!==-1&&(e.templates[a]=r.payload)}).addCase(fl.fulfilled,(e,r)=>{e.templates=e.templates.filter(a=>a.id!==r.payload)}),t.addCase(cn.pending,e=>{e.settingsLoading=!0,e.error=null}).addCase(cn.fulfilled,(e,r)=>{e.settingsLoading=!1,e.notificationSettings=r.payload}).addCase(cn.rejected,(e,r)=>{e.settingsLoading=!1,e.error=r.payload}).addCase(uN.fulfilled,(e,r)=>{e.notificationSettings=r.payload}),t.addCase(e9.fulfilled,(e,r)=>{e.upcomingReminders=r.payload}).addCase(t9.fulfilled,(e,r)=>{e.overdueReminders=r.payload}),t.addCase(nh.pending,e=>{e.statsLoading=!0}).addCase(nh.fulfilled,(e,r)=>{e.statsLoading=!1,e.stats=r.payload}).addCase(nh.rejected,e=>{e.statsLoading=!1})}});function r9({onClose:t,onSave:e,isLoading:r=!1}){const[a,n]=j.useState({title:"",description:"",type:"appointment",priority:"medium",dueDate:"",reminderDate:"",customerId:"",notificationMethods:["email"],notes:""}),{list:i=[]}=ve(u=>u.customers),l=we();j.useEffect(()=>{(!i||i.length===0)&&l(Pt({}))},[l,i]);const o=(u,m)=>{n(h=>({...h,[u]:m}))},c=u=>{n(m=>({...m,customerId:u}))},d=()=>{if(!a.title||!a.dueDate||!a.reminderDate||!a.customerId){alert("Please fill in all required fields including customer selection.");return}e(a)};return s.jsx(Yt,{onClose:t,onSubmit:d,title:"Create New Reminder",icon:s.jsx(lt,{className:"w-5 h-5"}),submitLabel:r?"Creating...":"Create Reminder",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer *"}),s.jsxs("select",{value:a.customerId,onChange:u=>c(u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select a customer"}),i&&i.length>0?i.map(u=>s.jsxs("option",{value:u._id,children:[u.name," - ",u.email]},u._id)):s.jsx("option",{value:"",disabled:!0,children:"No customers available"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Type *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"appointment",label:"Appointment",icon:s.jsx(vt,{className:"w-4 h-4"})},{value:"service_due",label:"Service Due",icon:s.jsx(lt,{className:"w-4 h-4"})},{value:"follow_up",label:"Follow-up",icon:s.jsx(hs,{className:"w-4 h-4"})},{value:"payment",label:"Payment Due",icon:s.jsx(mt,{className:"w-4 h-4"})}].map(u=>s.jsxs("button",{type:"button",onClick:()=>o("type",u.value),className:`p-3 border rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${a.type===u.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[u.icon,u.label]},u.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),s.jsx("input",{type:"text",value:a.title,onChange:u=>o("title",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter reminder title..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:a.description||"",onChange:u=>o("description",u.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter reminder description..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),s.jsx("input",{type:"date",value:a.dueDate,onChange:u=>o("dueDate",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Date *"}),s.jsx("input",{type:"date",value:a.reminderDate,onChange:u=>o("reminderDate",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Methods *"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>{const u=a.notificationMethods.includes("email")?a.notificationMethods.filter(m=>m!=="email"):[...a.notificationMethods,"email"];o("notificationMethods",u)},className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${a.notificationMethods.includes("email")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[s.jsx(mt,{className:"w-4 h-4"}),"Email"]}),s.jsxs("button",{type:"button",onClick:()=>{const u=a.notificationMethods.includes("sms")?a.notificationMethods.filter(m=>m!=="sms"):[...a.notificationMethods,"sms"];o("notificationMethods",u)},className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${a.notificationMethods.includes("sms")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[s.jsx(Ut,{className:"w-4 h-4"}),"SMS"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:a.priority,onChange:u=>o("priority",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:a.notes,onChange:u=>o("notes",u.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes..."})]})]})})}function a9({onClose:t,onSave:e,isLoading:r=!1,reminder:a}){var m;const[n,i]=j.useState({title:a.title||a.message||"",description:a.description||"",type:a.type==="service-due"?"service_due":a.type==="follow-up"?"follow_up":a.type==="payment-due"?"payment":a.type==="service_due"?"service_due":a.type==="follow_up"?"follow_up":a.type==="payment"?"payment":"appointment",priority:a.priority||"medium",dueDate:a.dueDate?a.dueDate.split("T")[0]:a.scheduledDate?a.scheduledDate.split("T")[0]:"",reminderDate:a.reminderDate?a.reminderDate.split("T")[0]:a.scheduledDate?a.scheduledDate.split("T")[0]:"",customerId:((m=a.customer)==null?void 0:m._id)||a.customerId||a.customerId||"",notificationMethods:a.notificationMethods||(a.method==="phone"?["sms"]:a.method==="email"?["email"]:a.method==="sms"?["sms"]:["email"]),notes:a.notes||""}),{list:l=[]}=ve(h=>h.customers),o=we();j.useEffect(()=>{(!l||l.length===0)&&o(Pt({}))},[o,l]),j.useEffect(()=>{console.log("EditReminderModal - Available customers:",l),console.log("EditReminderModal - Current form data:",n)},[l,n]),j.useEffect(()=>{var h,x;console.log("EditReminderModal - Reminder data:",a),console.log("EditReminderModal - Customer data:",a.customer),console.log("EditReminderModal - Customer ID:",((h=a.customer)==null?void 0:h._id)||a.customerId||a.customerId),i({title:a.title||a.message||"",description:a.description||"",type:a.type==="service-due"?"service_due":a.type==="follow-up"?"follow_up":a.type==="payment-due"?"payment":a.type==="service_due"?"service_due":a.type==="follow_up"?"follow_up":a.type==="payment"?"payment":"appointment",priority:a.priority||"medium",dueDate:a.dueDate?a.dueDate.split("T")[0]:a.scheduledDate?a.scheduledDate.split("T")[0]:"",reminderDate:a.reminderDate?a.reminderDate.split("T")[0]:a.scheduledDate?a.scheduledDate.split("T")[0]:"",customerId:((x=a.customer)==null?void 0:x._id)||a.customerId||a.customerId||"",notificationMethods:a.notificationMethods||(a.method==="phone"?["sms"]:a.method==="email"?["email"]:a.method==="sms"?["sms"]:["email"]),notes:a.notes||""})},[a]);const c=(h,x)=>{i(g=>({...g,[h]:x}))},d=h=>{i(x=>({...x,customerId:h}))},u=()=>{if(!n.title||!n.dueDate||!n.reminderDate||!n.customerId){alert("Please fill in all required fields including customer selection.");return}e(n)};return s.jsx(Yt,{onClose:t,onSubmit:u,title:"Edit Reminder",icon:s.jsx(lt,{className:"w-5 h-5"}),submitLabel:r?"Updating...":"Update Reminder",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer *"}),s.jsxs("select",{value:n.customerId,onChange:h=>d(h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select a customer"}),l&&l.length>0?l.map(h=>s.jsxs("option",{value:h._id,children:[h.name," - ",h.email]},h._id)):s.jsx("option",{value:"",disabled:!0,children:"No customers available"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Type *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"appointment",label:"Appointment",icon:s.jsx(vt,{className:"w-4 h-4"})},{value:"service_due",label:"Service Due",icon:s.jsx(lt,{className:"w-4 h-4"})},{value:"follow_up",label:"Follow-up",icon:s.jsx(hs,{className:"w-4 h-4"})},{value:"payment",label:"Payment Due",icon:s.jsx(mt,{className:"w-4 h-4"})}].map(h=>s.jsxs("button",{type:"button",onClick:()=>c("type",h.value),className:`p-3 border rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${n.type===h.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[h.icon,h.label]},h.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),s.jsx("input",{type:"text",value:n.title,onChange:h=>c("title",h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter reminder title..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:n.description||"",onChange:h=>c("description",h.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter reminder description..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),s.jsx("input",{type:"date",value:n.dueDate,onChange:h=>c("dueDate",h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Date *"}),s.jsx("input",{type:"date",value:n.reminderDate,onChange:h=>c("reminderDate",h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Methods *"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>{const h=n.notificationMethods.includes("email")?n.notificationMethods.filter(x=>x!=="email"):[...n.notificationMethods,"email"];c("notificationMethods",h)},className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${n.notificationMethods.includes("email")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[s.jsx(mt,{className:"w-4 h-4"}),"Email"]}),s.jsxs("button",{type:"button",onClick:()=>{const h=n.notificationMethods.includes("sms")?n.notificationMethods.filter(x=>x!=="sms"):[...n.notificationMethods,"sms"];c("notificationMethods",h)},className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${n.notificationMethods.includes("sms")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[s.jsx(Ut,{className:"w-4 h-4"}),"SMS"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:n.priority,onChange:h=>c("priority",h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:n.notes,onChange:h=>c("notes",h.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes..."})]})]})})}function n9({onClose:t,onSave:e,isLoading:r=!1,template:a,isEditing:n=!1}){const[i,l]=j.useState({name:"",type:"appointment",subject:"",message:"",timing:{value:24,unit:"hours",when:"before"},methods:["email"],isActive:!0});j.useEffect(()=>{a&&n&&l({name:a.name,type:a.type,subject:a.subject,message:a.message,timing:a.timing,methods:a.methods,isActive:a.isActive})},[a,n]);const o=(m,h)=>{l(x=>({...x,[m]:h}))},c=(m,h)=>{l(x=>({...x,timing:{...x.timing,[m]:h}}))},d=m=>{l(h=>({...h,methods:h.methods.includes(m)?h.methods.filter(x=>x!==m):[...h.methods,m]}))},u=()=>{if(!i.name||!i.subject||!i.message){alert("Please fill in all required fields.");return}if(i.methods.length===0){alert("Please select at least one notification method.");return}e(i)};return s.jsx(Yt,{onClose:t,onSubmit:u,title:n?"Edit Template":"Create New Template",icon:s.jsx(am,{className:"w-5 h-5"}),submitLabel:r?n?"Updating...":"Creating...":n?"Update Template":"Create Template",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),s.jsx("input",{type:"text",value:i.name,onChange:m=>o("name",m.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Appointment Reminder - 24 Hours"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Type *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"appointment",label:"Appointment",icon:s.jsx(vt,{className:"w-4 h-4"})},{value:"service-due",label:"Service Due",icon:s.jsx(lt,{className:"w-4 h-4"})},{value:"follow-up",label:"Follow-up",icon:s.jsx(hs,{className:"w-4 h-4"})},{value:"payment-due",label:"Payment Due",icon:s.jsx(mt,{className:"w-4 h-4"})}].map(m=>s.jsxs("button",{type:"button",onClick:()=>o("type",m.value),className:`p-3 border rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${i.type===m.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[m.icon,m.label]},m.value))})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Timing Configuration"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Value"}),s.jsx("input",{type:"number",value:i.timing.value,onChange:m=>c("value",parseInt(m.target.value)),min:"1",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit"}),s.jsxs("select",{value:i.timing.unit,onChange:m=>c("unit",m.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"minutes",children:"Minutes"}),s.jsx("option",{value:"hours",children:"Hours"}),s.jsx("option",{value:"days",children:"Days"}),s.jsx("option",{value:"weeks",children:"Weeks"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"When"}),s.jsxs("select",{value:i.timing.when,onChange:m=>c("when",m.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"before",children:"Before"}),s.jsx("option",{value:"after",children:"After"})]})]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Example: ",i.timing.value," ",i.timing.unit," ",i.timing.when," the event"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Methods *"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>d("email"),className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${i.methods.includes("email")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[s.jsx(mt,{className:"w-4 h-4"}),"Email"]}),s.jsxs("button",{type:"button",onClick:()=>d("sms"),className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${i.methods.includes("sms")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[s.jsx(Ut,{className:"w-4 h-4"}),"SMS"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),s.jsx("input",{type:"text",value:i.subject,onChange:m=>o("subject",m.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Appointment Reminder - {'{{businessName}}'}"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Template *"}),s.jsx("textarea",{value:i.message,onChange:m=>o("message",m.target.value),rows:8,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter the message template with placeholders like {'{{customerName}}'}, {'{{appointmentDate}}'}, etc."}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[s.jsx("p",{className:"font-medium mb-1",children:"Available placeholders:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[s.jsxs("span",{children:[" ","{{customerName}}"," - Customer's full name"]}),s.jsxs("span",{children:[" ","{{businessName}}"," - Your business name"]}),s.jsxs("span",{children:[" ","{{appointmentDate}}"," - Appointment date"]}),s.jsxs("span",{children:[" ","{{appointmentTime}}"," - Appointment time"]}),s.jsxs("span",{children:[" ","{{serviceType}}"," - Type of service"]}),s.jsxs("span",{children:[" ","{{businessPhone}}"," - Business phone"]}),s.jsxs("span",{children:[" ","{{vehicleInfo}}"," - Vehicle details"]}),s.jsxs("span",{children:[" ","{{technicianName}}"," - Technician name"]})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active Status"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enable this template for automatic reminders"})]}),s.jsx("button",{onClick:()=>o("isActive",!i.isActive),className:`relative inline-flex h-6 w-11 items-center rounded-full ${i.isActive?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${i.isActive?"translate-x-6":"translate-x-1"}`})})]})]})})}function i9({onClose:t,onConfirm:e,title:r,message:a,itemName:n,isLoading:i=!1}){j.useEffect(()=>{const o=c=>{c.key==="Escape"&&t()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t]);const l=o=>{o.target===o.currentTarget&&t()};return s.jsx("div",{onClick:l,className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center px-4",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-lg shadow-lg p-6 animate-fadeIn",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(ts,{className:"w-6 h-6 text-red-600"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),s.jsx("p",{className:"text-sm text-gray-500",children:a})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition","aria-label":"Close modal",children:s.jsx(Re,{className:"w-5 h-5"})})]}),n&&s.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Item to delete:"})," ",n]})}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Warning:"})," This action cannot be undone. The item will be permanently deleted."]})}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:t,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),s.jsxs("button",{onClick:e,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[s.jsx(Le,{className:"w-4 h-4"}),i?"Deleting...":"Delete"]})]})]})})}function l9(){const[t,e]=j.useState("reminders"),[r,a]=j.useState("all"),[n,i]=j.useState("all"),[l,o]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,x]=j.useState(!1),[g,f]=j.useState(null),[y,p]=j.useState(null),[b,v]=j.useState(null),[w,N]=j.useState({emailEnabled:!1,smsEnabled:!1,emailProvider:{smtp:"",port:"",username:"",password:""},smsProvider:{apiKey:""},businessInfo:{name:"",phone:"",email:"",website:"",address:""}}),{reminders:S,templates:k,settings:P={emailEnabled:!1,smsEnabled:!1,emailProvider:{smtp:"",port:587,username:"",password:""},smsProvider:{apiKey:"",serviceName:"twilio"},businessInfo:{name:"",phone:"",email:"",address:"",website:""}},loading:_}=ve(E=>E.reminders),L=we();j.useEffect(()=>{L(lr()),L(Us()),L(cn())},[L]),j.useEffect(()=>{var E,ue,B,ne,te,ce,R,I,Z,ee,xe;P&&N({emailEnabled:P.emailEnabled||!1,smsEnabled:P.smsEnabled||!1,emailProvider:{smtp:((E=P.emailProvider)==null?void 0:E.smtp)||"",port:((B=(ue=P.emailProvider)==null?void 0:ue.port)==null?void 0:B.toString())||"587",username:((ne=P.emailProvider)==null?void 0:ne.username)||"",password:((te=P.emailProvider)==null?void 0:te.password)||""},smsProvider:{apiKey:((ce=P.smsProvider)==null?void 0:ce.apiKey)||""},businessInfo:{name:((R=P.businessInfo)==null?void 0:R.name)||"",phone:((I=P.businessInfo)==null?void 0:I.phone)||"",email:((Z=P.businessInfo)==null?void 0:Z.email)||"",website:((ee=P.businessInfo)==null?void 0:ee.website)||"",address:((xe=P.businessInfo)==null?void 0:xe.address)||""}})},[P]);const T=S.filter(E=>!(r!=="all"&&E.status!==r||n!=="all"&&E.type!==n));j.useEffect(()=>{console.log("Current reminders state:",S),console.log("Filtered reminders:",T)},[S,T]);const U=(E,ue)=>{L(oi({id:E,reminderData:{status:ue}}))},H=(E,ue)=>{v({type:"reminder",id:E,name:ue}),x(!0)},W=(E,ue)=>{v({type:"template",id:E,name:ue}),x(!0)},J=E=>{p(E),d(!0)},V=E=>{f(E),m(!0)},G=E=>{const ue={title:E.title,description:E.description,type:E.type,priority:E.priority,dueDate:E.dueDate,reminderDate:E.reminderDate,customerId:E.customerId,notificationMethods:E.notificationMethods,notes:E.notes||""};console.log("Creating reminder with data:",ue),L(xl(ue)).then(B=>{console.log("Create reminder result:",B),B.meta.requestStatus==="fulfilled"&&(console.log("Reminder created successfully, refreshing list..."),L(lr()))}),o(!1)},M=E=>{if(!y)return;const ue={title:E.title,description:E.description,type:E.type,priority:E.priority,dueDate:E.dueDate,reminderDate:E.reminderDate,customerId:E.customerId,notificationMethods:E.notificationMethods,notes:E.notes||""};console.log("Updating reminder with data:",ue),L(oi({id:y._id||y.id,reminderData:ue})).then(B=>{console.log("Update reminder result:",B),B.meta.requestStatus==="fulfilled"&&(console.log("Reminder updated successfully, refreshing list..."),L(lr()))}),d(!1),p(null)},z=E=>{g?(console.log("Updating template with data:",E),L(ci({id:g.id,templateData:E})).then(ue=>{console.log("Update template result:",ue),ue.meta.requestStatus==="fulfilled"&&(console.log("Template updated successfully, refreshing list..."),L(Us()))}),f(null)):(console.log("Creating template with data:",E),L(gl(E)).then(ue=>{console.log("Create template result:",ue),ue.meta.requestStatus==="fulfilled"&&(console.log("Template created successfully, refreshing list..."),L(Us()))})),m(!1)},D=()=>{b&&(b.type==="reminder"?(console.log("Deleting reminder:",b.id),L(pl(b.id)).then(E=>{console.log("Delete reminder result:",E),E.meta.requestStatus==="fulfilled"&&(console.log("Reminder deleted successfully, refreshing list..."),L(lr()))})):(console.log("Deleting template:",b.id),L(fl(b.id)).then(E=>{console.log("Delete template result:",E),E.meta.requestStatus==="fulfilled"&&(console.log("Template deleted successfully, refreshing list..."),L(Us()))})),v(null),x(!1))},X=E=>{const ue=k.find(B=>B.id===E);ue&&(console.log("Toggling template:",E,"isActive:",!ue.isActive),L(ci({id:E,templateData:{isActive:!ue.isActive}})).then(B=>{console.log("Toggle template result:",B),B.meta.requestStatus==="fulfilled"&&(console.log("Template toggled successfully, refreshing list..."),L(Us()))}))},F=(E,ue)=>{N(B=>({...B,[E]:ue}))},ie=(E,ue)=>{N(B=>({...B,emailProvider:{...B.emailProvider,[E]:ue}}))},ye=(E,ue)=>{N(B=>({...B,smsProvider:{...B.smsProvider,[E]:ue}}))},fe=(E,ue)=>{N(B=>({...B,businessInfo:{...B.businessInfo,[E]:ue}}))},pe=()=>{const E={emailNotifications:{enabled:w.emailEnabled,types:["appointment","service-due","follow-up","payment-due"],frequency:"immediate"},smsNotifications:{enabled:w.smsEnabled,types:["appointment","service-due","follow-up","payment-due"],phoneNumber:w.businessInfo.phone},pushNotifications:{enabled:!1,types:["appointment","service-due"]},inAppNotifications:{enabled:!0,types:["appointment","service-due","follow-up","payment-due"]},quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00",timezone:"UTC"}};L(uN(E))},Te=E=>{switch(E){case"pending":return"bg-yellow-100 text-yellow-800";case"sent":return"bg-green-100 text-green-800";case"acknowledged":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"delivered":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Oe=E=>{switch(E){case"appointment":return s.jsx(lt,{className:"w-4 h-4"});case"service-due":return s.jsx(Sn,{className:"w-4 h-4"});case"follow-up":return s.jsx(mr,{className:"w-4 h-4"});case"payment-due":return s.jsx(dy,{className:"w-4 h-4"});default:return s.jsx(dy,{className:"w-4 h-4"})}},Y=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Active Reminders"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track customer notifications"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Co,{className:"w-4 h-4"}),"Process Queue"]}),s.jsxs("button",{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Create Reminder"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("select",{value:r,onChange:E=>a(E.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"delivered",children:"Delivered"}),s.jsx("option",{value:"failed",children:"Failed"})]}),s.jsxs("select",{value:n,onChange:E=>i(E.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"appointment",children:"Appointment"}),s.jsx("option",{value:"service-due",children:"Service Due"}),s.jsx("option",{value:"follow-up",children:"Follow-up"}),s.jsx("option",{value:"payment-due",children:"Payment Due"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:S.filter(E=>E.status==="pending").length})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:s.jsx(lt,{className:"w-6 h-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Sent Today"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.filter(E=>E.status==="sent").length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(mr,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Failed"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.filter(E=>E.status==="failed").length})]}),s.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:s.jsx(Re,{className:"w-6 h-6 text-red-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active Templates"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:k.filter(E=>E.isActive).length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(am,{className:"w-6 h-6 text-blue-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type & Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Message"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scheduled"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(E=>{var ue;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-3",children:[Oe(E.type),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((ue=E.customer)==null?void 0:ue.name)||E.customerName||"Unknown Customer"}),s.jsx("div",{className:"text-sm text-gray-500 capitalize",children:(E.type||"").replace("-"," ")})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:E.title||E.message||"No title"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(E.dueDate||E.scheduledDate).toLocaleDateString()}),s.jsx("div",{className:"text-sm text-gray-500",children:new Date(E.dueDate||E.scheduledDate).toLocaleTimeString()})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center gap-2",children:(()=>{const B=E.notificationMethods||[E.method],ne=B.includes("email"),te=B.includes("sms");if(ne&&te)return s.jsxs(s.Fragment,{children:[s.jsx(mt,{className:"w-4 h-4 text-blue-500"}),s.jsx(Ut,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-sm text-gray-900",children:"Email, SMS"})]});if(ne)return s.jsxs(s.Fragment,{children:[s.jsx(mt,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-sm text-gray-900",children:"Email"})]});if(te)return s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-sm text-gray-900",children:"SMS"})]});{const ce=E.method||"email";return s.jsxs(s.Fragment,{children:[ce==="email"?s.jsx(mt,{className:"w-4 h-4 text-blue-500"}):s.jsx(Ut,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-sm text-gray-900 capitalize",children:ce})]})}})()})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Te(E.status)}`,children:E.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900",title:"View details",children:s.jsx(Xs,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>J(E),className:"text-yellow-600 hover:text-yellow-900",title:"Edit reminder",children:s.jsx(kt,{className:"w-4 h-4"})}),E.status==="pending"&&s.jsx("button",{onClick:()=>U(E._id||E.id,"sent"),className:"text-green-600 hover:text-green-900",title:"Mark as sent",children:s.jsx(mr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{var B;return H(E._id||E.id,((B=E.customer)==null?void 0:B.name)||E.customerName||"Unknown Customer")},className:"text-red-600 hover:text-red-900",title:"Delete reminder",children:s.jsx(Le,{className:"w-4 h-4"})})]})})]},E._id||E.id)})})]})})})]}),$=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Reminder Templates"}),s.jsx("p",{className:"text-gray-600",children:"Manage automated reminder templates"})]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Create Template"]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:k.map(E=>{var ue,B,ne;return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[Oe(E.type),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:E.name}),s.jsxs("span",{className:"text-sm text-gray-500 capitalize",children:[(E.type||"").replace("-"," ")," reminder"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>X(E.id),className:`p-2 rounded-lg ${E.isActive?"text-green-600 bg-green-100 hover:bg-green-200":"text-gray-400 bg-gray-100 hover:bg-gray-200"}`,title:E.isActive?"Disable template":"Enable template",children:E.isActive?s.jsx($2,{className:"w-4 h-4"}):s.jsx(F2,{className:"w-4 h-4"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",children:s.jsx(Sn,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Timing"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[((ue=E.timing)==null?void 0:ue.value)||0," ",((B=E.timing)==null?void 0:B.unit)||"hours"," ",((ne=E.timing)==null?void 0:ne.when)||"before"," event"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Methods"}),s.jsx("div",{className:"flex gap-2 mt-1",children:(E.methods||[]).map(te=>s.jsxs("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:[te==="email"?s.jsx(mt,{className:"w-3 h-3"}):s.jsx(Ut,{className:"w-3 h-3"}),te]},te))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Subject"}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:E.subject||"No subject"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Message Preview"}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:E.message||"No message"})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex justify-between items-center",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.isActive?"Active":"Inactive"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>V(E),className:"text-blue-600 hover:text-blue-900 text-sm flex items-center gap-1",children:[s.jsx(kt,{className:"w-3 h-3"}),"Edit"]}),s.jsxs("button",{onClick:()=>W(E.id,E.name||"Unknown Template"),className:"text-red-600 hover:text-red-900 text-sm flex items-center gap-1",children:[s.jsx(Le,{className:"w-3 h-3"}),"Delete"]})]})]})]},E.id)})})]}),ke=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Notification Settings"}),s.jsx("p",{className:"text-gray-600",children:"Configure email and SMS notification providers"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(mt,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Email Configuration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"SMTP settings for email notifications"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable Email"}),s.jsx("button",{onClick:()=>F("emailEnabled",!w.emailEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full ${w.emailEnabled?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${w.emailEnabled?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Server"}),s.jsx("input",{type:"text",value:w.emailProvider.smtp,onChange:E=>ie("smtp",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"smtp.gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),s.jsx("input",{type:"number",value:w.emailProvider.port,onChange:E=>ie("port",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"587"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),s.jsx("input",{type:"email",value:w.emailProvider.username,onChange:E=>ie("username",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"your-email@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",value:w.emailProvider.password,onChange:E=>ie("password",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:""})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Ut,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"SMS Configuration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"SMS provider settings"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable SMS"}),s.jsx("button",{onClick:()=>F("smsEnabled",!w.smsEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full ${w.smsEnabled?"bg-green-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${w.smsEnabled?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Provider"}),s.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"twilio",children:"Twilio"}),s.jsx("option",{value:"nexmo",children:"Nexmo"}),s.jsx("option",{value:"aws-sns",children:"AWS SNS"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),s.jsx("input",{type:"password",value:w.smsProvider.apiKey,onChange:E=>ye("apiKey",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:""})]}),s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"})," SMS notifications require a valid API key from your chosen provider. Charges may apply based on your provider's pricing."]})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Business Information"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This information will be used in reminder templates"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),s.jsx("input",{type:"text",value:w.businessInfo.name,onChange:E=>fe("name",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsx("input",{type:"tel",value:w.businessInfo.phone,onChange:E=>fe("phone",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsx("input",{type:"email",value:w.businessInfo.email,onChange:E=>fe("email",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website (Optional)"}),s.jsx("input",{type:"url",value:w.businessInfo.website||"",onChange:E=>fe("website",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),s.jsx("textarea",{value:w.businessInfo.address,onChange:E=>fe("address",E.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",rows:2})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:pe,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg text-sm font-medium",children:"Save Settings"})})]})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(It,{title:"Reminders & Notifications"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"reminders",label:"Active Reminders",count:S.length},{key:"templates",label:"Templates",count:k.length},{key:"settings",label:"Settings",count:0}].map(E=>s.jsxs("button",{onClick:()=>e(E.key),className:`py-4 px-1 border-b-2 font-medium text-sm ${t===E.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[E.label," ",E.count>0&&`(${E.count})`]},E.key))})}),s.jsxs("div",{className:"p-6",children:[t==="reminders"&&Y(),t==="templates"&&$(),t==="settings"&&ke()]})]}),l&&s.jsx(r9,{onClose:()=>o(!1),onSave:G,isLoading:_}),c&&y&&s.jsx(a9,{onClose:()=>{d(!1),p(null)},onSave:M,isLoading:_,reminder:y}),u&&s.jsx(n9,{onClose:()=>{m(!1),f(null)},onSave:z,isLoading:_,template:g||void 0,isEditing:!!g}),h&&b&&s.jsx(i9,{onClose:()=>{x(!1),v(null)},onConfirm:D,title:`Delete ${b.type==="reminder"?"Reminder":"Template"}`,message:`Are you sure you want to delete this ${b.type}? This action cannot be undone.`,itemName:b.name,isLoading:_})]})}class o9{async getInventoryItems(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/inventory/items?${r.toString()}`)}async getInventoryItem(e){return A.get(`/inventory/items/${e}`)}async createInventoryItem(e){return A.post("/inventory/items",e)}async updateInventoryItem(e,r){return A.put(`/inventory/items/${e}`,r)}async deleteInventoryItem(e){return A.delete(`/inventory/items/${e}`)}async adjustStock(e,r,a,n){return A.post(`/inventory/items/${e}/adjust-stock`,{quantity:r,reason:a,notes:n})}async getLowStockItems(){return A.get("/inventory/items/low-stock")}async getOutOfStockItems(){return A.get("/inventory/items/out-of-stock")}async getInventoryStats(){return A.get("/inventory/items/stats/overview")}async getTransactions(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/inventory/transactions?${r.toString()}`)}async getTransaction(e){return A.get(`/inventory/transactions/${e}`)}async createTransaction(e){return A.post("/inventory/transactions",e)}async getTransactionStats(e,r){const a=new URLSearchParams;return e&&a.append("startDate",e),r&&a.append("endDate",r),A.get(`/inventory/transactions/stats/overview?${a.toString()}`)}async getPurchaseOrders(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/inventory/purchase-orders?${r.toString()}`)}async getPurchaseOrder(e){return A.get(`/inventory/purchase-orders/${e}`)}async createPurchaseOrder(e){return A.post("/inventory/purchase-orders",e)}async updatePurchaseOrder(e,r){return A.put(`/inventory/purchase-orders/${e}`,r)}async deletePurchaseOrder(e){return A.delete(`/inventory/purchase-orders/${e}`)}async updatePurchaseOrderStatus(e,r){return A.patch(`/inventory/purchase-orders/${e}/status`,{status:r})}async receivePurchaseOrder(e,r){return A.post(`/inventory/purchase-orders/${e}/receive`,{receivedItems:r})}async getPurchaseOrderStats(e,r){const a=new URLSearchParams;return e&&a.append("startDate",e),r&&a.append("endDate",r),A.get(`/inventory/purchase-orders/stats/overview?${a.toString()}`)}async getSuppliers(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/inventory/suppliers?${r.toString()}`)}async getSupplier(e){return A.get(`/inventory/suppliers/${e}`)}async createSupplier(e){return A.post("/inventory/suppliers",e)}async updateSupplier(e,r){return A.put(`/inventory/suppliers/${e}`,r)}async deleteSupplier(e){return A.delete(`/inventory/suppliers/${e}`)}async getCategories(){return A.get("/inventory/categories")}async getLocations(){return A.get("/inventory/locations")}async exportInventory(e="csv"){return A.get(`/inventory/export?format=${e}`)}async importInventory(e){const r=new FormData;return r.append("file",e),A.post("/inventory/import",r,{headers:{"Content-Type":"multipart/form-data"}})}}const pt=new o9,dn=q("inventory/fetchItems",async(t={},{rejectWithValue:e})=>{var r,a;try{return(await pt.getInventoryItems(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch inventory items")}}),Wp=q("inventory/createItem",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await pt.createInventoryItem(t);return C.success("Inventory item created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create inventory item"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create inventory item")}}),qp=q("inventory/updateItem",async({id:t,itemData:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await pt.updateInventoryItem(t,e);return C.success("Inventory item updated successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update inventory item"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update inventory item")}}),Yp=q("inventory/deleteItem",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await pt.deleteInventoryItem(t),C.success("Inventory item deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete inventory item"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete inventory item")}}),c9=q("inventory/adjustStock",async({itemId:t,quantity:e,reason:r,notes:a},{rejectWithValue:n})=>{var i,l,o,c;try{const d=await pt.adjustStock(t,e,r,a);return C.success("Stock adjusted successfully"),d.data}catch(d){return C.error(((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to adjust stock"),n(((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to adjust stock")}}),qc=q("inventory/fetchStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await pt.getInventoryStats()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch inventory stats")}}),un=q("inventory/fetchTransactions",async(t={},{rejectWithValue:e})=>{var r,a;try{return(await pt.getTransactions(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch transactions")}}),d9=q("inventory/createTransaction",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await pt.createTransaction(t);return C.success("Transaction created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create transaction"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create transaction")}}),mN=q("inventory/fetchTransactionStats",async({startDate:t,endDate:e}={},{rejectWithValue:r})=>{var a,n;try{return(await pt.getTransactionStats(t,e)).data}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch transaction stats")}}),Dr=q("inventory/fetchPurchaseOrders",async(t={},{rejectWithValue:e})=>{var r,a;try{return(await pt.getPurchaseOrders(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch purchase orders")}}),Kp=q("inventory/createPurchaseOrder",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await pt.createPurchaseOrder(t);return C.success("Purchase order created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create purchase order"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create purchase order")}}),Xp=q("inventory/updatePurchaseOrder",async({id:t,purchaseOrderData:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await pt.updatePurchaseOrder(t,e);return C.success("Purchase order updated successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update purchase order"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update purchase order")}}),Qp=q("inventory/deletePurchaseOrder",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await pt.deletePurchaseOrder(t),C.success("Purchase order deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete purchase order"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete purchase order")}}),u9=q("inventory/receivePurchaseOrder",async({id:t,receivedItems:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await pt.receivePurchaseOrder(t,e);return C.success("Purchase order received successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to receive purchase order"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to receive purchase order")}}),hN=q("inventory/fetchPurchaseOrderStats",async({startDate:t,endDate:e}={},{rejectWithValue:r})=>{var a,n;try{return(await pt.getPurchaseOrderStats(t,e)).data}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch purchase order stats")}}),mn=q("inventory/fetchSuppliers",async(t={},{rejectWithValue:e})=>{var r,a;try{return(await pt.getSuppliers(t)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch suppliers")}}),Gp=q("inventory/createSupplier",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await pt.createSupplier(t);return C.success("Supplier created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create supplier"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create supplier")}}),Jp=q("inventory/updateSupplier",async({id:t,supplierData:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await pt.updateSupplier(t,e);return C.success("Supplier updated successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update supplier"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update supplier")}}),Zp=q("inventory/deleteSupplier",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await pt.deleteSupplier(t),C.success("Supplier deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete supplier"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete supplier")}}),yl=q("inventory/fetchCategories",async(t,{rejectWithValue:e})=>{var r,a;try{return(await pt.getCategories()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch categories")}}),bl=q("inventory/fetchLocations",async(t,{rejectWithValue:e})=>{var r,a;try{return(await pt.getLocations()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch locations")}}),m9={items:[],transactions:[],suppliers:[],purchaseOrders:[],categories:[],locations:[],stats:null,transactionStats:null,purchaseOrderStats:null,itemsLoading:!1,transactionsLoading:!1,suppliersLoading:!1,purchaseOrdersLoading:!1,statsLoading:!1,error:null};wt({name:"inventory",initialState:m9,reducers:{clearInventoryError:t=>{t.error=null},clearInventoryItems:t=>{t.items=[]},clearInventoryTransactions:t=>{t.transactions=[]},clearSuppliers:t=>{t.suppliers=[]},clearPurchaseOrders:t=>{t.purchaseOrders=[]}},extraReducers:t=>{t.addCase(dn.pending,e=>{e.itemsLoading=!0,e.error=null}).addCase(dn.fulfilled,(e,r)=>{e.itemsLoading=!1,e.items=r.payload.data||r.payload}).addCase(dn.rejected,(e,r)=>{e.itemsLoading=!1,e.error=r.payload}).addCase(Wp.fulfilled,(e,r)=>{e.items.push(r.payload)}).addCase(qp.fulfilled,(e,r)=>{const a=e.items.findIndex(n=>n._id===r.payload._id);a!==-1&&(e.items[a]=r.payload)}).addCase(Yp.fulfilled,(e,r)=>{e.items=e.items.filter(a=>a._id!==r.payload)}).addCase(c9.fulfilled,(e,r)=>{const a=e.items.findIndex(n=>n._id===r.payload._id);a!==-1&&(e.items[a]=r.payload)}),t.addCase(un.pending,e=>{e.transactionsLoading=!0,e.error=null}).addCase(un.fulfilled,(e,r)=>{e.transactionsLoading=!1,e.transactions=r.payload.data||r.payload}).addCase(un.rejected,(e,r)=>{e.transactionsLoading=!1,e.error=r.payload}).addCase(d9.fulfilled,(e,r)=>{e.transactions.unshift(r.payload)}),t.addCase(Dr.pending,e=>{e.purchaseOrdersLoading=!0,e.error=null}).addCase(Dr.fulfilled,(e,r)=>{e.purchaseOrdersLoading=!1,e.purchaseOrders=r.payload.data||r.payload}).addCase(Dr.rejected,(e,r)=>{e.purchaseOrdersLoading=!1,e.error=r.payload}).addCase(Kp.fulfilled,(e,r)=>{e.purchaseOrders.push(r.payload)}).addCase(Xp.fulfilled,(e,r)=>{const a=e.purchaseOrders.findIndex(n=>n._id===r.payload._id);a!==-1&&(e.purchaseOrders[a]=r.payload)}).addCase(Qp.fulfilled,(e,r)=>{e.purchaseOrders=e.purchaseOrders.filter(a=>a._id!==r.payload)}).addCase(u9.fulfilled,(e,r)=>{const a=e.purchaseOrders.findIndex(n=>n._id===r.payload._id);a!==-1&&(e.purchaseOrders[a]=r.payload)}),t.addCase(mn.pending,e=>{e.suppliersLoading=!0,e.error=null}).addCase(mn.fulfilled,(e,r)=>{e.suppliersLoading=!1,e.suppliers=r.payload.data||r.payload}).addCase(mn.rejected,(e,r)=>{e.suppliersLoading=!1,e.error=r.payload}).addCase(Gp.fulfilled,(e,r)=>{e.suppliers.push(r.payload)}).addCase(Jp.fulfilled,(e,r)=>{const a=e.suppliers.findIndex(n=>n._id===r.payload._id);a!==-1&&(e.suppliers[a]=r.payload)}).addCase(Zp.fulfilled,(e,r)=>{e.suppliers=e.suppliers.filter(a=>a._id!==r.payload)}),t.addCase(qc.pending,e=>{e.statsLoading=!0}).addCase(qc.fulfilled,(e,r)=>{e.statsLoading=!1,e.stats=r.payload}).addCase(qc.rejected,e=>{e.statsLoading=!1}).addCase(mN.fulfilled,(e,r)=>{e.transactionStats=r.payload}).addCase(hN.fulfilled,(e,r)=>{e.purchaseOrderStats=r.payload}),t.addCase(yl.fulfilled,(e,r)=>{e.categories=r.payload}).addCase(bl.fulfilled,(e,r)=>{e.locations=r.payload})}});function h9({isOpen:t,onClose:e,item:r,mode:a}){const n=we(),{suppliers:i,categories:l,locations:o}=ve(p=>p.inventory),[c,d]=j.useState({name:"",description:"",partNumber:"",category:"",subcategory:"",brand:"",model:"",year:"",location:"",currentStock:0,minimumStock:0,maximumStock:0,reorderPoint:0,costPrice:0,sellingPrice:0,supplierId:"",isActive:!0}),[u,m]=j.useState({}),[h,x]=j.useState(!1);j.useEffect(()=>{d(r&&a==="edit"?{name:r.name,description:r.description,partNumber:r.partNumber,category:r.category,subcategory:r.subcategory||"",brand:r.brand||"",model:r.model||"",year:r.year||"",location:typeof r.location=="object"&&r.location?`${r.location.warehouse||""} ${r.location.shelf||""} ${r.location.bin||""}`.trim():r.location,currentStock:r.currentStock,minimumStock:r.minimumStock,maximumStock:r.maximumStock,reorderPoint:r.reorderPoint||0,costPrice:r.costPrice,sellingPrice:r.sellingPrice,supplierId:typeof r.supplier=="object"&&r.supplier?r.supplier._id||r.supplier.id:r.supplier,isActive:r.isActive}:{name:"",description:"",partNumber:"",category:"",subcategory:"",brand:"",model:"",year:"",location:"",currentStock:0,minimumStock:0,maximumStock:0,reorderPoint:0,costPrice:0,sellingPrice:0,supplierId:"",isActive:!0}),m({})},[r,a,t]);const g=()=>{const p={};return c.name.trim()||(p.name="Name is required"),c.partNumber.trim()||(p.partNumber="Part number is required"),c.category||(p.category="Category is required"),c.location||(p.location="Location is required"),c.supplierId||(p.supplierId="Supplier is required"),c.costPrice<0&&(p.costPrice="Cost price must be positive"),c.sellingPrice<0&&(p.sellingPrice="Selling price must be positive"),c.currentStock<0&&(p.currentStock="Quantity must be positive"),c.minimumStock<0&&(p.minimumStock="Minimum stock level must be positive"),c.maximumStock<c.minimumStock&&(p.maximumStock="Maximum stock level must be greater than minimum"),m(p),Object.keys(p).length===0},f=async p=>{if(p.preventDefault(),!!g()){x(!0);try{if(a==="add")await n(Wp(c)).unwrap();else if(r){const b={...c};await n(qp({id:r._id||r.id,itemData:b})).unwrap()}e()}catch(b){console.error("Error saving inventory item:",b)}finally{x(!1)}}},y=(p,b)=>{d(v=>({...v,[p]:b})),u[p]&&m(v=>({...v,[p]:""}))};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a==="add"?"Add New Inventory Item":"Edit Inventory Item"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),s.jsx("input",{type:"text",value:c.name,onChange:p=>y("name",p.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter item name"}),u.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Number *"}),s.jsx("input",{type:"text",value:c.partNumber,onChange:p=>y("partNumber",p.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.partNumber?"border-red-500":"border-gray-300"}`,placeholder:"Enter part number"}),u.partNumber&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.partNumber})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:c.description,onChange:p=>y("description",p.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter item description"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),s.jsxs("select",{value:c.category,onChange:p=>y("category",p.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.category?"border-red-500":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Select category"}),(l&&Array.isArray(l)?l:[]).map(p=>s.jsx("option",{value:p,children:p},p))]}),u.category&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.category})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory"}),s.jsx("input",{type:"text",value:c.subcategory,onChange:p=>y("subcategory",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter subcategory"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),s.jsx("input",{type:"text",value:c.brand,onChange:p=>y("brand",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter brand"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),s.jsx("input",{type:"text",value:c.model,onChange:p=>y("model",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter model"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),s.jsx("input",{type:"text",value:c.year,onChange:p=>y("year",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter year"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),s.jsxs("select",{value:c.location,onChange:p=>y("location",p.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.location?"border-red-500":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Select location"}),(o&&Array.isArray(o)?o:[]).map(p=>s.jsx("option",{value:p,children:p},p))]}),u.location&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.location})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier *"}),s.jsxs("select",{value:c.supplierId,onChange:p=>y("supplierId",p.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.supplierId?"border-red-500":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Select supplier"}),(i&&Array.isArray(i)?i:[]).map(p=>s.jsx("option",{value:p._id,children:p.name},p._id))]}),u.supplierId&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.supplierId})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity On Hand *"}),s.jsx("input",{type:"number",value:c.currentStock,onChange:p=>y("currentStock",parseInt(p.target.value)||0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.currentStock?"border-red-500":"border-gray-300"}`,min:"0"}),u.currentStock&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.currentStock})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Stock Level *"}),s.jsx("input",{type:"number",value:c.minStockLevel,onChange:p=>y("minStockLevel",parseInt(p.target.value)||0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.minStockLevel?"border-red-500":"border-gray-300"}`,min:"0"}),u.minStockLevel&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.minStockLevel})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Stock Level *"}),s.jsx("input",{type:"number",value:c.maxStockLevel,onChange:p=>y("maxStockLevel",parseInt(p.target.value)||0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.maxStockLevel?"border-red-500":"border-gray-300"}`,min:"0"}),u.maxStockLevel&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.maxStockLevel})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder Point"}),s.jsx("input",{type:"number",value:c.reorderPoint,onChange:p=>y("reorderPoint",parseInt(p.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Price *"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),s.jsx("input",{type:"number",value:c.costPrice,onChange:p=>y("costPrice",parseFloat(p.target.value)||0),className:`w-full pl-8 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.costPrice?"border-red-500":"border-gray-300"}`,min:"0",step:"0.01"})]}),u.costPrice&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.costPrice})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Price *"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),s.jsx("input",{type:"number",value:c.sellingPrice,onChange:p=>y("sellingPrice",parseFloat(p.target.value)||0),className:`w-full pl-8 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.sellingPrice?"border-red-500":"border-gray-300"}`,min:"0",step:"0.01"})]}),u.sellingPrice&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.sellingPrice})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:c.isActive,onChange:p=>y("isActive",p.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Saving..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Lp,{className:"w-4 h-4"}),s.jsx("span",{children:a==="add"?"Add Item":"Save Changes"})]})})]})]})]})}):null}function x9({isOpen:t,onClose:e,item:r}){const a=we(),[n,i]=j.useState(!1),l=async()=>{if(r){i(!0);try{await a(Yp(r._id||r.id)).unwrap(),e()}catch(o){console.error("Error deleting inventory item:",o)}finally{i(!1)}}};return!t||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Inventory Item"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ts,{className:"h-6 w-6 text-red-600"})}),s.jsx("div",{className:"ml-3",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure?"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["You are about to delete the inventory item ",s.jsxs("strong",{children:['"',r.name,'"']})," (Part #: ",r.partNumber,")."]}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This action cannot be undone. All associated data will be permanently removed."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Item Details:"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Name:"})," ",r.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Part Number:"})," ",r.partNumber]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Category:"})," ",r.category]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Current Stock:"})," ",r.currentStock]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," ",typeof r.location=="object"&&r.location?`${r.location.warehouse||""} ${r.location.shelf||""} ${r.location.bin||""}`.trim():r.location||"N/A"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:e,disabled:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{type:"button",onClick:l,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Deleting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete Item"})]})})]})]})]})})}function p9({isOpen:t,onClose:e,supplier:r,mode:a}){const n=we(),[i,l]=j.useState({name:"",contactPerson:"",email:"",phone:"",address:{street:"",city:"",state:"",zipCode:"",country:"USA"},website:"",paymentTerms:"",rating:0,notes:"",isActive:!0}),[o,c]=j.useState({}),[d,u]=j.useState(!1);j.useEffect(()=>{var g;l(r&&a==="edit"?{name:r.name,contactPerson:((g=r.contactPerson)==null?void 0:g.name)||"",email:r.email,phone:r.phone,address:r.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},website:r.website||"",paymentTerms:r.paymentTerms,rating:r.rating,notes:r.notes||"",isActive:r.isActive}:{name:"",contactPerson:"",email:"",phone:"",address:{street:"",city:"",state:"",zipCode:"",country:"USA"},website:"",paymentTerms:"",rating:0,notes:"",isActive:!0}),c({})},[r,a,t]);const m=()=>{var f;const g={};return i.name.trim()||(g.name="Name is required"),i.contactPerson.trim()||(g.contactPerson="Contact person is required"),i.email.trim()||(g.email="Email is required"),i.phone.trim()||(g.phone="Phone is required"),(f=i.address.street)!=null&&f.trim()||(g.address="Street address is required"),i.paymentTerms.trim()||(g.paymentTerms="Payment terms is required"),(i.rating<0||i.rating>5)&&(g.rating="Rating must be between 0 and 5"),c(g),Object.keys(g).length===0},h=async g=>{if(g.preventDefault(),!!m()){u(!0);try{if(a==="add")await n(Gp(i)).unwrap();else if(r){const f={...i};await n(Jp({id:r._id||r.id,supplierData:f})).unwrap()}e()}catch(f){console.error("Error saving supplier:",f)}finally{u(!1)}}},x=(g,f)=>{l(y=>({...y,[g]:f})),o[g]&&c(y=>({...y,[g]:""}))};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a==="add"?"Add New Supplier":"Edit Supplier"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),s.jsx("input",{type:"text",value:i.name,onChange:g=>x("name",g.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter supplier name"}),o.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating (0-5)"}),s.jsx("input",{type:"number",value:i.rating,onChange:g=>x("rating",parseInt(g.target.value)||0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.rating?"border-red-500":"border-gray-300"}`,min:"0",max:"5"}),o.rating&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.rating})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),s.jsx("input",{type:"text",value:i.contactPerson,onChange:g=>x("contactPerson",g.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.contactPerson?"border-red-500":"border-gray-300"}`,placeholder:"Enter contact person name"}),o.contactPerson&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.contactPerson})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Email *"}),s.jsx("input",{type:"email",value:i.email,onChange:g=>x("email",g.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter company email"}),o.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Phone *"}),s.jsx("input",{type:"tel",value:i.phone,onChange:g=>x("phone",g.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter company phone"}),o.phone&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.phone})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Address Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),s.jsx("input",{type:"text",value:i.address.street,onChange:g=>x("address",{...i.address,street:g.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.address?"border-red-500":"border-gray-300"}`,placeholder:"Enter street address"}),o.address&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),s.jsx("input",{type:"text",value:i.address.city,onChange:g=>x("address",{...i.address,city:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter city"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),s.jsx("input",{type:"text",value:i.address.state,onChange:g=>x("address",{...i.address,state:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter state"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code *"}),s.jsx("input",{type:"text",value:i.address.zipCode,onChange:g=>x("address",{...i.address,zipCode:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter ZIP code"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),s.jsx("input",{type:"text",value:i.address.country,onChange:g=>x("address",{...i.address,country:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter country"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),s.jsx("input",{type:"url",value:i.website,onChange:g=>x("website",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter company website"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms *"}),s.jsx("input",{type:"text",value:i.paymentTerms,onChange:g=>x("paymentTerms",g.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.paymentTerms?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Net 30, COD, etc."}),o.paymentTerms&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.paymentTerms})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:i.notes,onChange:g=>x("notes",g.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter any additional notes"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:i.isActive,onChange:g=>x("isActive",g.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Saving..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Lp,{className:"w-4 h-4"}),s.jsx("span",{children:a==="add"?"Add Supplier":"Save Changes"})]})})]})]})]})}):null}function g9({isOpen:t,onClose:e,supplier:r}){var o;const a=we(),[n,i]=j.useState(!1),l=async()=>{if(r){i(!0);try{await a(Zp(r._id||r.id)).unwrap(),e()}catch(c){console.error("Error deleting supplier:",c)}finally{i(!1)}}};return!t||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Supplier"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ts,{className:"h-6 w-6 text-red-600"})}),s.jsx("div",{className:"ml-3",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure?"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["You are about to delete the supplier ",s.jsxs("strong",{children:['"',r.name,'"']}),"."]}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This action cannot be undone. All associated data will be permanently removed."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Supplier Details:"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Name:"})," ",r.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Contact:"})," ",((o=r.contactPerson)==null?void 0:o.name)||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",r.email]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",r.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rating:"})," ",r.rating,"/5"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:e,disabled:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{type:"button",onClick:l,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Deleting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete Supplier"})]})})]})]})]})})}function f9({isOpen:t,onClose:e,purchaseOrder:r,mode:a}){const n=we(),{suppliers:i,items:l}=ve(N=>N.inventory),[o,c]=j.useState({poNumber:"",supplierId:"",items:[],expectedDeliveryDate:new Date().toISOString().split("T")[0],tax:0,shipping:0,notes:""}),[d,u]=j.useState({}),[m,h]=j.useState(!1);j.useEffect(()=>{if(r&&a==="edit"){console.log("Editing purchase order:",r);const N=(r.items||[]).map(k=>{console.log("Processing item:",k);let P="";return typeof k=="object"?k.item?P=typeof k.item=="object"?k.item._id||k.item.id:k.item:k._id&&(P=k._id):typeof k=="string"&&(P=k),{itemId:P,quantity:typeof k=="object"&&k.quantity||1,unitPrice:typeof k=="object"&&k.unitPrice||0}});let S="";typeof r.supplier=="object"&&r.supplier?S=r.supplier._id||r.supplier.id:S=r.supplier||"",c({poNumber:r.poNumber||"",supplierId:S,items:N,expectedDeliveryDate:r.expectedDate?r.expectedDate.split("T")[0]:new Date().toISOString().split("T")[0],tax:r.tax||0,shipping:r.shipping||0,notes:r.notes||""})}else c({poNumber:"",supplierId:"",items:[],expectedDeliveryDate:new Date().toISOString().split("T")[0],tax:0,shipping:0,notes:""});u({})},[r,a,t]);const x=()=>{const N={};return o.supplierId.trim()||(N.supplierName="Supplier is required"),o.items.length===0&&(N.items="At least one item is required"),u(N),Object.keys(N).length===0},g=async N=>{if(N.preventDefault(),!!x()){h(!0);try{if(a==="add"){const S={...o};(!S.poNumber||S.poNumber.trim()==="")&&delete S.poNumber,await n(Kp(S)).unwrap(),n(Dr({}))}else if(r){const S={...o};console.log("Sending update data:",S),await n(Xp({id:r.id,purchaseOrderData:S})).unwrap(),n(Dr({}))}e()}catch(S){console.error("Error saving purchase order:",S)}finally{h(!1)}}},f=(N,S)=>{c(k=>({...k,[N]:S})),d[N]&&u(k=>({...k,[N]:""}))},y=()=>{const N={itemId:"",quantity:1,unitPrice:0};c(S=>({...S,items:[...S.items,N]}))},p=N=>{c(S=>({...S,items:S.items.filter((k,P)=>P!==N)}))},b=(N,S,k)=>{c(P=>{const _=[...P.items];return _[N]={..._[N],[S]:k},{...P,items:_}})},v=(N,S)=>{const k=(l&&Array.isArray(l)?l:[]).find(P=>(P._id||P.id)===S);k&&(b(N,"itemId",S),b(N,"unitPrice",k.costPrice||0))},w=()=>{console.log("Current form data:",o),console.log("Available suppliers:",i),console.log("Available items:",l)};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a==="add"?"Create Purchase Order":"Edit Purchase Order"}),s.jsxs("div",{className:"flex items-center gap-2",children:[a==="edit"&&s.jsx("button",{type:"button",onClick:w,className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded",children:"Debug"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]})]}),s.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PO Number"}),s.jsx("input",{type:"text",value:o.poNumber,onChange:N=>f("poNumber",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:a==="add"?"Leave empty to auto-generate":"PO Number",disabled:a==="edit"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier *"}),s.jsxs("select",{value:o.supplierId,onChange:N=>{c(S=>({...S,supplierId:N.target.value})),d.supplierName&&u(S=>({...S,supplierName:""}))},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d.supplierName?"border-red-500":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Select supplier"}),(i&&Array.isArray(i)?i:[]).map(N=>{const S=N._id||N.id;return s.jsx("option",{value:S,children:N.name},S)})]}),d.supplierName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.supplierName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date"}),s.jsx("input",{type:"date",value:o.expectedDeliveryDate,onChange:N=>f("expectedDeliveryDate",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Amount"}),s.jsx("input",{type:"number",step:"0.01",value:o.tax,onChange:N=>f("tax",parseFloat(N.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Cost"}),s.jsx("input",{type:"number",step:"0.01",value:o.shipping,onChange:N=>f("shipping",parseFloat(N.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),s.jsx("input",{type:"text",value:o.notes,onChange:N=>f("notes",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Items"}),s.jsxs("button",{type:"button",onClick:y,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[s.jsx(_t,{className:"w-4 h-4"}),"Add Item"]})]}),d.items&&s.jsx("p",{className:"text-sm text-red-600",children:d.items}),o.items.map((N,S)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h4",{className:"font-medium text-gray-900",children:["Item ",S+1]}),s.jsx("button",{type:"button",onClick:()=>p(S),className:"text-red-600 hover:text-red-800",children:s.jsx(Le,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item *"}),s.jsxs("select",{value:N.itemId,onChange:k=>v(S,k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select item"}),(l&&Array.isArray(l)?l:[]).map(k=>{const P=k._id||k.id;return s.jsxs("option",{value:P,children:[k.name," - ",k.partNumber]},P)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),s.jsx("input",{type:"number",value:N.quantity,onChange:k=>b(S,"quantity",parseInt(k.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price *"}),s.jsx("input",{type:"number",value:N.unitPrice,onChange:k=>b(S,"unitPrice",parseFloat(k.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Price"}),s.jsx("input",{type:"number",value:N.quantity*N.unitPrice,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]})]},S))]}),s.jsx("div",{className:"border-t pt-4",children:s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["Total: $",(o.items.reduce((N,S)=>N+S.quantity*S.unitPrice,0)+(o.tax||0)+(o.shipping||0)).toFixed(2)]})})})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Saving..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Lp,{className:"w-4 h-4"}),s.jsx("span",{children:a==="add"?"Create PO":"Save Changes"})]})})]})]})]})}):null}function y9({isOpen:t,onClose:e,purchaseOrder:r}){const a=we(),[n,i]=j.useState(!1),l=async()=>{if(r){i(!0);try{await a(Qp(r._id||r.id)).unwrap(),e()}catch(o){console.error("Error deleting purchase order:",o)}finally{i(!1)}}};return!t||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Purchase Order"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ts,{className:"h-6 w-6 text-red-600"})}),s.jsx("div",{className:"ml-3",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure?"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["You are about to delete the purchase order ",s.jsxs("strong",{children:["#",r.id]}),"."]}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This action cannot be undone. All associated data will be permanently removed."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Purchase Order Details:"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"PO Number:"})," #",r.id]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Supplier:"})," ",r.supplierName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Order Date:"})," ",new Date(r.orderDate).toLocaleDateString()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",r.status]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total:"})," $",(r.total||0).toFixed(2)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Items:"})," ",(r.items&&Array.isArray(r.items)?r.items:[]).length," items"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:e,disabled:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{type:"button",onClick:l,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Deleting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete PO"})]})})]})]})]})})}const Jo=(t,e)=>[e.join(","),...t.map(a=>e.map(n=>{const i=a[n]||a[n.toLowerCase()]||"";return typeof i=="string"&&(i.includes(",")||i.includes('"'))?`"${i.replace(/"/g,'""')}"`:i}).join(","))].join(`
`),Zo=(t,e)=>{const r=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),n=URL.createObjectURL(r);a.setAttribute("href",n),a.setAttribute("download",e),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)};function b9(){const[t,e]=j.useState("inventory"),[r,a]=j.useState(""),[n,i]=j.useState("all"),[l,o]=j.useState("all"),[c,d]=j.useState("all"),[u,m]=j.useState(!1),[h,x]=j.useState(!1),[g,f]=j.useState(null),[y,p]=j.useState("add"),[b,v]=j.useState(!1),[w,N]=j.useState(!1),[S,k]=j.useState(null),[P,_]=j.useState("add"),[L,T]=j.useState(!1),[U,H]=j.useState(!1),[W,J]=j.useState(null),[V,G]=j.useState("add"),{items:M,transactions:z,suppliers:D,purchaseOrders:X,categories:F,locations:ie,loading:ye,error:fe}=ve(O=>O.inventory),pe=we();j.useEffect(()=>{pe(dn({})),pe(un({})),pe(mn({})),pe(Dr({})),pe(qc()),pe(mN({})),pe(hN({})),pe(yl()),pe(bl())},[pe]);const Te=()=>{const O=new Date().toISOString().split("T")[0];switch(t){case"inventory":Oe(O);break;case"transactions":Y(O);break;case"suppliers":$(O);break;case"purchase-orders":ke(O);break}},Oe=O=>{const K=(M&&Array.isArray(M)?M:[]).filter(le=>le.isActive),he=["Name","Part Number","Description","Category","Location","Supplier","Quantity On Hand","Min Stock Level","Max Stock Level","Cost Price","Selling Price","Total Value","Status"],Pe=K.map(le=>({Name:le.name||"","Part Number":le.partNumber||"",Description:le.description||"",Category:le.category||"",Location:typeof le.location=="object"&&le.location?`${le.location.warehouse||""} ${le.location.shelf||""} ${le.location.bin||""}`.trim():le.location||"",Supplier:typeof le.supplier=="object"&&le.supplier?le.supplier.name:le.supplier||"","Quantity On Hand":le.currentStock||0,"Min Stock Level":le.minimumStock||0,"Max Stock Level":le.maximumStock||0,"Cost Price":le.costPrice||0,"Selling Price":le.sellingPrice||0,"Total Value":((le.currentStock||0)*(le.costPrice||0)).toFixed(2),Status:te(le).status})),Gt=Jo(Pe,he);Zo(Gt,`inventory-items-${O}.csv`)},Y=O=>{const K=(z&&Array.isArray(z)?z:[]).slice(0,1e3),he=["Date","Time","Item Name","Part Number","Type","Quantity","Unit Cost","Total Cost","Reference","Notes","Employee"],Pe=K.map(le=>{const fr=(M&&Array.isArray(M)?M:[]).find(fg=>(fg._id||fg.id)===le.itemId),Ea=new Date(le.date);return{Date:Ea.toLocaleDateString(),Time:Ea.toLocaleTimeString(),"Item Name":(fr==null?void 0:fr.name)||"Unknown Item","Part Number":(fr==null?void 0:fr.partNumber)||"N/A",Type:le.type,Quantity:le.quantity,"Unit Cost":le.unitCost||0,"Total Cost":le.totalCost||0,Reference:le.reference,Notes:le.notes||"",Employee:le.employeeName}}),Gt=Jo(Pe,he);Zo(Gt,`inventory-transactions-${O}.csv`)},$=O=>{const K=(D&&Array.isArray(D)?D:[]).filter(le=>le.isActive),he=["Name","Contact Person","Email","Phone","Address","Website","Payment Terms","Rating","Notes","Item Count"],Pe=K.map(le=>{var fr;return{Name:le.name,"Contact Person":((fr=le.contactPerson)==null?void 0:fr.name)||"",Email:le.email,Phone:le.phone,Address:typeof le.address=="object"&&le.address?`${le.address.street||""}, ${le.address.city||""}, ${le.address.state||""} ${le.address.zipCode||""}`:le.address||"",Website:le.website||"","Payment Terms":le.paymentTerms,Rating:le.rating,Notes:le.notes||"","Item Count":(M&&Array.isArray(M)?M:[]).filter(Ea=>typeof Ea.supplier=="object"&&Ea.supplier?Ea.supplier.name===le.name:Ea.supplier===le.name).length}}),Gt=Jo(Pe,he);Zo(Gt,`suppliers-${O}.csv`)},ke=O=>{const K=X&&Array.isArray(X)?X:[],he=["PO Number","Supplier","Order Date","Expected Date","Items Count","Subtotal","Tax","Shipping","Total","Status","Notes"],Pe=K.map(le=>({"PO Number":le.poNumber||le.id,Supplier:le.supplierName||"","Order Date":new Date(le.orderDate).toLocaleDateString(),"Expected Date":le.expectedDate?new Date(le.expectedDate).toLocaleDateString():"","Items Count":(le.items&&Array.isArray(le.items)?le.items:[]).length,Subtotal:le.subtotal||0,Tax:le.tax||0,Shipping:le.shipping||0,Total:le.total||0,Status:le.status,Notes:le.notes||""})),Gt=Jo(Pe,he);Zo(Gt,`purchase-orders-${O}.csv`)},E=(M&&Array.isArray(M)?M:[]).filter(O=>{const K=(O.name||"").toLowerCase().includes(r.toLowerCase())||(O.partNumber||"").toLowerCase().includes(r.toLowerCase()),he=n==="all"||O.category===n,Pe=l==="all"||(typeof O.location=="object"&&O.location?`${O.location.warehouse||""} ${O.location.shelf||""} ${O.location.bin||""}`.trim()===l:O.location===l),Gt=c==="all"||c==="low"&&(O.currentStock||0)<=(O.minimumStock||0)||c==="out"&&(O.currentStock||0)===0||c==="overstock"&&(O.currentStock||0)>(O.maximumStock||0);return K&&he&&Pe&&Gt&&O.isActive}),ue=(M&&Array.isArray(M)?M:[]).filter(O=>(O.currentStock||0)<=(O.minimumStock||0)&&O.isActive),B=(M&&Array.isArray(M)?M:[]).filter(O=>(O.currentStock||0)===0&&O.isActive),ne=(M&&Array.isArray(M)?M:[]).reduce((O,K)=>{const he=K.currentStock||0,Pe=K.costPrice||0;return O+he*Pe},0);(X&&Array.isArray(X)?X:[]).filter(O=>O.status==="sent"||O.status==="confirmed");const te=O=>{const K=O.currentStock||0,he=O.minimumStock||0,Pe=O.maximumStock||0;return K===0?{status:"Out of Stock",color:"text-red-600 bg-red-100"}:K<=he?{status:"Low Stock",color:"text-yellow-600 bg-yellow-100"}:K>Pe?{status:"Overstock",color:"text-purple-600 bg-purple-100"}:{status:"In Stock",color:"text-green-600 bg-green-100"}},ce=()=>{p("add"),f(null),m(!0)},R=O=>{p("edit"),f(O),m(!0)},I=O=>{f(O),x(!0)},Z=()=>{m(!1),f(null)},ee=()=>{x(!1),f(null)},xe=()=>{_("add"),k(null),v(!0)},Ae=O=>{_("edit"),k(O),v(!0)},je=O=>{k(O),N(!0)},Ee=()=>{v(!1),k(null)},Fe=()=>{N(!1),k(null)},Kt=()=>{G("add"),J(null),T(!0)},Br=O=>{G("edit"),J(O),T(!0)},Xt=O=>{J(O),H(!0)},Zs=()=>{T(!1),J(null)},Ze=()=>{H(!1),J(null)},At=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Inventory Management"}),s.jsx("p",{className:"text-gray-600",children:"Track parts, supplies, and stock levels"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:Te,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Qn,{className:"w-4 h-4"}),"Export"]}),s.jsxs("button",{onClick:ce,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Add Item"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(M&&Array.isArray(M)?M:[]).filter(O=>O.isActive).length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(my,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock Items"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:ue.length})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:s.jsx(ts,{className:"w-6 h-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Out of Stock"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:B.length})]}),s.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:s.jsx(b7,{className:"w-6 h-6 text-red-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",ne.toLocaleString()]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(z2,{className:"w-6 h-6 text-green-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(wa,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search parts...",value:r,onChange:O=>a(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})}),s.jsx("div",{children:s.jsxs("select",{value:n,onChange:O=>i(O.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Categories"}),F&&Array.isArray(F)&&F.map(O=>s.jsx("option",{value:O,children:O},O))]})}),s.jsx("div",{children:s.jsxs("select",{value:l,onChange:O=>o(O.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Locations"}),ie&&Array.isArray(ie)&&ie.map(O=>s.jsx("option",{value:O,children:O},O))]})}),s.jsx("div",{children:s.jsxs("select",{value:c,onChange:O=>d(O.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Stock Levels"}),s.jsx("option",{value:"low",children:"Low Stock"}),s.jsx("option",{value:"out",children:"Out of Stock"}),s.jsx("option",{value:"overstock",children:"Overstock"})]})}),s.jsx("div",{children:s.jsxs("button",{onClick:()=>{a(""),i("all"),o("all"),d("all")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg flex items-center justify-center gap-2",children:[s.jsx(Co,{className:"w-4 h-4"}),"Reset"]})})]})}),ye?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Part Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Location"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Levels"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pricing"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map((O,K)=>{const he=te(O);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.name||"N/A"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["#",O.partNumber||"N/A"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:O.description||""})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[s.jsx(y7,{className:"w-3 h-3"}),O.category||"N/A"]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[s.jsx(O2,{className:"w-3 h-3"}),typeof O.location=="object"&&O.location?`${O.location.warehouse||""} ${O.location.shelf||""} ${O.location.bin||""}`.trim():O.location||"N/A"]}),s.jsx("div",{className:"text-xs text-gray-400",children:typeof O.supplier=="object"&&O.supplier?O.supplier.name:O.supplier||"N/A"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["On Hand: ",O.currentStock||0]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",O.minimumStock||0," | Max: ",O.maximumStock||0]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${(O.currentStock||0)<=(O.minimumStock||0)?"bg-red-500":(O.currentStock||0)>(O.maximumStock||0)?"bg-purple-500":"bg-green-500"}`,style:{width:`${Math.min((O.currentStock||0)/(O.maximumStock||1)*100,100)}%`}})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:["Cost: $",(O.costPrice||0).toFixed(2)]}),s.jsxs("div",{className:"text-sm text-gray-900",children:["Sell: $",(O.sellingPrice||0).toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Value: $",((O.currentStock||0)*(O.costPrice||0)).toFixed(2)]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${he.color}`,children:he.status})}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900",title:"View details",children:s.jsx(Xs,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>R(O),className:"text-gray-600 hover:text-gray-900",title:"Edit",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>I(O),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx(Le,{className:"w-4 h-4"})})]})})]},O._id||O.id||`item-${K}`)})})]})})})]}),Cs=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Inventory Transactions"}),s.jsx("p",{className:"text-gray-600",children:"Track all inventory movements and adjustments"})]}),s.jsxs("button",{onClick:Te,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Qn,{className:"w-4 h-4"}),"Export"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(z&&Array.isArray(z)?z:[]).slice(0,50).map((O,K)=>{const he=(M&&Array.isArray(M)?M:[]).find(Pe=>(Pe._id||Pe.id)===O.itemId);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(O.date).toLocaleDateString()}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(O.date).toLocaleTimeString()})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:(he==null?void 0:he.name)||"Unknown Item"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["#",(he==null?void 0:he.partNumber)||"N/A"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O.type==="purchase"?"bg-green-100 text-green-800":O.type==="usage"?"bg-red-100 text-red-800":O.type==="adjustment"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:O.type})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`text-sm font-medium ${O.quantity>0?"text-green-600":"text-red-600"}`,children:[O.quantity>0?"+":"",O.quantity]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:O.totalCost?`$${(O.totalCost||0).toFixed(2)}`:O.unitCost?`$${(O.unitCost||0).toFixed(2)} ea`:"-"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:O.reference}),O.notes&&s.jsx("div",{className:"text-xs text-gray-500",children:O.notes})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:O.employeeName})})]},O.id||`transaction-${K}`)})})]})})})]}),Qt=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Suppliers"}),s.jsx("p",{className:"text-gray-600",children:"Manage your parts suppliers and vendors"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:Te,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Qn,{className:"w-4 h-4"}),"Export"]}),s.jsxs("button",{onClick:xe,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Add Supplier"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(D&&Array.isArray(D)?D:[]).filter(O=>O.isActive).map((O,K)=>{var he;return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:O.name}),s.jsx("p",{className:"text-sm text-gray-600",children:((he=O.contactPerson)==null?void 0:he.name)||"N/A"})]}),s.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((Pe,Gt)=>s.jsx("div",{className:`w-3 h-3 rounded-full ${Gt<O.rating?"bg-yellow-400":"bg-gray-200"}`},Gt))})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4",children:""}),s.jsx("span",{className:"text-gray-600",children:O.email})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4",children:""}),s.jsx("span",{className:"text-gray-600",children:O.phone})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4",children:""}),s.jsx("span",{className:"text-gray-600",children:O.paymentTerms})]})]}),O.notes&&s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-600",children:O.notes})}),s.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:[(M&&Array.isArray(M)?M:[]).filter(Pe=>typeof Pe.supplier=="object"&&Pe.supplier?Pe.supplier.name===O.name:Pe.supplier===O.name).length," items"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Ae(O),className:"text-blue-600 hover:text-blue-900 text-sm",children:"Edit"}),s.jsx("button",{onClick:()=>je(O),className:"text-red-600 hover:text-red-900 text-sm",children:"Delete"})]})]})]},O.id||`supplier-${K}`)})})]}),er=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Purchase Orders"}),s.jsx("p",{className:"text-gray-600",children:"Track and manage purchase orders"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:Te,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Qn,{className:"w-4 h-4"}),"Export"]}),s.jsxs("button",{onClick:Kt,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Create PO"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PO Number"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expected Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(X&&Array.isArray(X)?X:[]).map((O,K)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",O.poNumber||O.id]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:typeof O.supplier=="object"&&O.supplier?O.supplier.name:O.supplierName||O.supplier||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:new Date(O.orderDate).toLocaleDateString()})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:O.expectedDate?new Date(O.expectedDate).toLocaleDateString():"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[(O.items&&Array.isArray(O.items)?O.items:[]).length," items"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",(O.total||0).toFixed(2)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O.status==="draft"?"bg-gray-100 text-gray-800":O.status==="sent"?"bg-blue-100 text-blue-800":O.status==="confirmed"?"bg-yellow-100 text-yellow-800":O.status==="received"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:O.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>Br(O),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Xt(O),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx(Le,{className:"w-4 h-4"})})]})})]},O.id||`po-${K}`))})]})})})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(It,{title:"Inventory Management"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"inventory",label:"Inventory",count:(M&&Array.isArray(M)?M:[]).filter(O=>O.isActive).length,icon:my},{key:"transactions",label:"Transactions",count:(z&&Array.isArray(z)?z:[]).length,icon:Hd},{key:"suppliers",label:"Suppliers",count:(D&&Array.isArray(D)?D:[]).filter(O=>O.isActive).length,icon:Or},{key:"purchase-orders",label:"Purchase Orders",count:(X&&Array.isArray(X)?X:[]).length,icon:to}].map(O=>s.jsxs("button",{onClick:()=>e(O.key),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${t===O.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(O.icon,{className:"w-4 h-4"}),O.label," (",O.count,")"]},O.key))})}),s.jsxs("div",{className:"p-6",children:[t==="inventory"&&At(),t==="transactions"&&Cs(),t==="suppliers"&&Qt(),t==="purchase-orders"&&er()]})]}),s.jsx(h9,{isOpen:u,onClose:Z,item:g,mode:y}),s.jsx(x9,{isOpen:h,onClose:ee,item:g}),s.jsx(p9,{isOpen:b,onClose:Ee,supplier:S,mode:P}),s.jsx(g9,{isOpen:w,onClose:Fe,supplier:S}),s.jsx(f9,{isOpen:L,onClose:Zs,purchaseOrder:W,mode:V}),s.jsx(y9,{isOpen:U,onClose:Ze,purchaseOrder:W})]})}class v9{async getInvoices(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/invoices?${r.toString()}`)}async getInvoice(e){return A.get(`/invoices/${e}`)}async createInvoice(e){return A.post("/invoices",e)}async updateInvoice(e,r){return A.put(`/invoices/${e}`,r)}async deleteInvoice(e){return A.delete(`/invoices/${e}`)}async sendInvoice(e){return A.post(`/invoices/${e}/send`)}async downloadInvoicePDF(e){return A.get(`/invoices/${e}/pdf`,{responseType:"arraybuffer"})}async sendInvoiceEmail(e){return A.post(`/invoices/${e}/send-email`)}async addPayment(e,r){return A.post(`/invoices/${e}/payments`,r)}async getInvoiceStats(e,r){const a=new URLSearchParams;return e&&a.append("startDate",e),r&&a.append("endDate",r),A.get(`/invoices/stats/overview?${a.toString()}`)}async generateInvoiceFromWorkOrder(e){return A.post("/invoices/generate-from-workorder",{workOrderId:e})}async generateInvoiceFromAppointment(e){return A.post("/invoices/generate-from-appointment",{appointmentId:e})}async getInvoiceTemplates(){return A.get("/invoices/templates")}async createInvoiceTemplate(e){return A.post("/invoices/templates",e)}async updateInvoiceTemplate(e,r){return A.put(`/invoices/templates/${e}`,r)}async deleteInvoiceTemplate(e){return A.delete(`/invoices/templates/${e}`)}async exportInvoice(e,r="pdf"){return A.get(`/invoices/${e}/export?format=${r}`)}async printInvoice(e){return A.get(`/invoices/${e}/print`)}async sendBulkInvoices(e){return A.post("/invoices/bulk/send",{invoiceIds:e})}async exportBulkInvoices(e,r="pdf"){return A.post("/invoices/bulk/export",{invoiceIds:e,format:r})}async sendPaymentReminder(e){return A.post(`/invoices/${e}/send-reminder`)}async sendBulkReminders(e){return A.post("/invoices/bulk/send-reminders",{invoiceIds:e})}async getPaymentAnalytics(e,r){const a=new URLSearchParams;return e&&a.append("startDate",e),r&&a.append("endDate",r),A.get(`/invoices/analytics/payments?${a.toString()}`)}async getCustomerPaymentHistory(e){return A.get(`/invoices/customer/${e}/payment-history`)}async getInvoiceSettings(){return A.get("/invoices/settings")}async updateInvoiceSettings(e){return A.put("/invoices/settings",e)}async generateInvoiceNumber(){return A.get("/invoices/generate-number")}async validateInvoiceNumber(e){return A.post("/invoices/validate-number",{invoiceNumber:e})}async searchInvoices(e,r){const a=new URLSearchParams({query:e});return r&&Object.entries(r).forEach(([n,i])=>{i!=null&&a.append(n,i.toString())}),A.get(`/invoices/search?${a.toString()}`)}async duplicateInvoice(e){return A.post(`/invoices/${e}/duplicate`)}async archiveInvoice(e){return A.post(`/invoices/${e}/archive`)}async unarchiveInvoice(e){return A.post(`/invoices/${e}/unarchive`)}async getArchivedInvoices(e){const r=new URLSearchParams;return e&&Object.entries(e).forEach(([a,n])=>{n!=null&&r.append(a,n.toString())}),A.get(`/invoices/archived?${r.toString()}`)}async markAsOverdue(){return A.post("/invoices/mark-overdue")}}const as=new v9,vl=q("invoices/fetchInvoices",async(t,{rejectWithValue:e})=>{var r,a;try{return(await as.getInvoices()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch invoices")}}),Yc=q("invoices/createInvoice",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await as.createInvoice(t);return C.success("Invoice created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create invoice"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create invoice")}}),Kc=q("invoices/updateInvoice",async({id:t,invoiceData:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await as.updateInvoice(t,e);return C.success("Invoice updated successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update invoice"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update invoice")}}),Xc=q("invoices/deleteInvoice",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await as.deleteInvoice(t),C.success("Invoice deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete invoice"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete invoice")}}),ih=q("invoices/sendInvoice",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await as.sendInvoice(t);return C.success("Invoice sent successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to send invoice"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to send invoice")}}),Qc=q("invoices/addPayment",async({invoiceId:t,paymentData:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await as.addPayment(t,e);return C.success("Payment added successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to add payment"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to add payment")}}),jl=q("invoices/fetchStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await as.getInvoiceStats()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch invoice stats")}}),Gc=q("invoices/fetchPaymentStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await as.getPaymentAnalytics()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch payment stats")}}),Jc=q("invoices/fetchTemplates",async(t,{rejectWithValue:e})=>{var r,a;try{return(await as.getInvoiceTemplates()).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch invoice templates")}}),Zc=q("invoices/markAsOverdue",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await as.markAsOverdue();return C.success("Overdue invoices updated successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update overdue invoices"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to update overdue invoices")}}),j9=q("invoices/downloadPDF",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await as.downloadInvoicePDF(t),o=new Blob([l.data],{type:"application/pdf"}),c=window.URL.createObjectURL(o),d=document.createElement("a");return d.href=c,d.download=`invoice-${t}.pdf`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c),C.success("PDF downloaded successfully"),{success:!0}}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to download PDF"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to download PDF")}}),N9=q("invoices/sendEmail",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await as.sendInvoiceEmail(t);return C.success("Invoice sent successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to send invoice"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to send invoice")}});q("invoices/createTemplate",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await as.createInvoiceTemplate(t);return C.success("Invoice template created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create invoice template"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create invoice template")}});q("invoices/updateTemplate",async({id:t,templateData:e},{rejectWithValue:r})=>{var a,n,i,l;try{const o=await as.updateInvoiceTemplate(t,e);return C.success("Invoice template updated successfully"),o.data}catch(o){return C.error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update invoice template"),r(((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update invoice template")}});q("invoices/deleteTemplate",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{return await as.deleteInvoiceTemplate(t),C.success("Invoice template deleted successfully"),t}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete invoice template"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete invoice template")}});const eg={async getVehicles(t={}){const e=new URLSearchParams;return Object.entries(t).forEach(([a,n])=>{n!==void 0&&n!==""&&e.append(a,n.toString())}),await ae(A.get(`/customers/vehicles/all?${e.toString()}`))},async getVehicle(t){return await ae(A.get(`/customers/vehicles/${t}`))},async getCustomerVehicles(t){return await ae(A.get(`/customers/${t}/vehicles`))}},Nl=q("vehicles/fetchVehicles",async(t={},{rejectWithValue:e})=>{var r,a;try{return await eg.getVehicles(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch vehicles")}}),w9=q("vehicles/fetchVehicle",async(t,{rejectWithValue:e})=>{var r,a;try{return await eg.getVehicle(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch vehicle")}}),S9=q("vehicles/fetchCustomerVehicles",async(t,{rejectWithValue:e})=>{var r,a;try{return await eg.getCustomerVehicles(t)}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch customer vehicles")}}),C9={list:[],selectedVehicle:null,loading:!1,error:null,pagination:null},k9=wt({name:"vehicles",initialState:C9,reducers:{clearVehicles:t=>{t.list=[],t.selectedVehicle=null,t.pagination=null},setSelectedVehicle:(t,e)=>{t.selectedVehicle=e.payload}},extraReducers:t=>{t.addCase(Nl.pending,e=>{e.loading=!0,e.error=null}).addCase(Nl.fulfilled,(e,r)=>{var i,l;e.loading=!1;const a=r.payload,n=((i=a==null?void 0:a.data)==null?void 0:i.vehicles)||(a==null?void 0:a.vehicles)||[];e.list=n,e.pagination=((l=a==null?void 0:a.data)==null?void 0:l.pagination)||(a==null?void 0:a.pagination)||null}).addCase(Nl.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(w9.fulfilled,(e,r)=>{var i;const a=r.payload,n=((i=a==null?void 0:a.data)==null?void 0:i.vehicle)||(a==null?void 0:a.vehicle);if(n){const l=e.list.findIndex(o=>o._id===n._id);l!==-1?e.list[l]=n:e.list.push(n)}}).addCase(S9.fulfilled,(e,r)=>{var i;const a=r.payload;(((i=a==null?void 0:a.data)==null?void 0:i.vehicles)||(a==null?void 0:a.vehicles)||[]).forEach(l=>{const o=e.list.findIndex(c=>c._id===l._id);o!==-1?e.list[o]=l:e.list.push(l)})})}}),_9=k9.reducer;function P9({onClose:t,onSuccess:e}){const r=we(),[a,n]=j.useState(!1),[i,l]=j.useState(""),o=ve(N=>N.customers.list);ve(N=>N.services.workOrders);const c=ve(N=>N.services.catalog),d=ve(N=>N.services.catalogLoading),u=ve(N=>N.vehicles.list),m=ve(N=>N.vehicles.loading),[h,x]=j.useState({customerId:"",invoiceNumber:"",dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],vehicleId:"",serviceType:"",items:[{description:"",quantity:1,unitPrice:0,total:0}],subtotal:0,tax:0,total:0,notes:""}),g=u.filter(N=>{var S;return((S=N.customer)==null?void 0:S._id)===h.customerId});j.useEffect(()=>{r(Pt()),r(on({})),r(ln({})),r(Nl({}))},[r]);const f=(N,S)=>{x(k=>({...k,[N]:S}))},y=(N,S,k)=>{const P=[...h.items];if(P[N]={...P[N],[S]:k},S==="quantity"||S==="unitPrice"){const _=P[N];P[N]={..._,total:_.quantity*_.unitPrice}}x(_=>({..._,items:P,subtotal:P.reduce((L,T)=>L+T.total,0),total:P.reduce((L,T)=>L+T.total,0)+h.tax}))},p=()=>{x(N=>({...N,items:[...N.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},b=N=>{if(h.items.length>1){const S=h.items.filter((k,P)=>P!==N);x(k=>({...k,items:S,subtotal:S.reduce((P,_)=>P+_.total,0),total:S.reduce((P,_)=>P+_.total,0)+h.tax}))}},v=N=>{x(S=>({...S,customerId:N,vehicleId:""}))},w=async N=>{if(N.preventDefault(),!h.customerId){l("Please select a customer");return}if(h.items.some(S=>!S.description||S.unitPrice<=0)){l("Please fill in all item details");return}if(!h.serviceType){l("Please enter a service type");return}if(!h.vehicleId){l("Please select a vehicle");return}n(!0),l("");try{await r(Yc(h)).unwrap(),e(),t()}catch(S){l(S.message||"Failed to create invoice")}finally{n(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Create New Invoice"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[i&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(hs,{className:"w-4 h-4 inline mr-2"}),"Customer"]}),s.jsxs("select",{value:h.customerId,onChange:N=>v(N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,children:[s.jsx("option",{value:"",children:"Select Customer"}),(o&&Array.isArray(o)?o:[]).map(N=>s.jsx("option",{value:N._id,children:N.name},N._id))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(sm,{className:"w-4 h-4 inline mr-2"}),"Invoice Number"]}),s.jsx("input",{type:"text",value:h.invoiceNumber,onChange:N=>f("invoiceNumber",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"INV-001",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type"}),s.jsxs("select",{value:h.serviceType,onChange:N=>f("serviceType",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,disabled:d,children:[s.jsx("option",{value:"",children:d?"Loading services...":"Select Service Type"}),(c&&Array.isArray(c)?c:[]).map(N=>s.jsx("option",{value:N.name,children:N.name},N._id)),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle"}),s.jsxs("select",{value:h.vehicleId,onChange:N=>f("vehicleId",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,disabled:m||!h.customerId,children:[s.jsx("option",{value:"",children:m?"Loading vehicles...":h.customerId?g.length===0?"No vehicles found for this customer":"Select Vehicle":"Select a customer first"}),(g&&Array.isArray(g)?g:[]).map(N=>s.jsxs("option",{value:N._id,children:[N.year," ",N.make," ",N.model," - ",N.licensePlate]},N._id))]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h4",{className:"text-md font-medium",children:"Invoice Items"}),s.jsxs("button",{type:"button",onClick:p,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm flex items-center gap-1",children:[s.jsx(_t,{className:"w-4 h-4"}),"Add Item"]})]}),s.jsx("div",{className:"space-y-3",children:h.items.map((N,S)=>s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[s.jsx("div",{className:"col-span-5",children:s.jsx("input",{type:"text",placeholder:"Description",value:N.description,onChange:k=>y(S,"description",k.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",required:!0})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",placeholder:"Qty",value:N.quantity,onChange:k=>y(S,"quantity",parseInt(k.target.value)||0),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",min:"1",required:!0})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",placeholder:"Price",value:N.unitPrice,onChange:k=>y(S,"unitPrice",parseFloat(k.target.value)||0),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",step:"0.01",min:"0",required:!0})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",value:(N.quantity*N.unitPrice).toFixed(2),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm bg-gray-50",readOnly:!0})}),s.jsx("div",{className:"col-span-1",children:h.items.length>1&&s.jsx("button",{type:"button",onClick:()=>b(S),className:"text-red-600 hover:text-red-800",children:s.jsx(Le,{className:"w-4 h-4"})})})]},S))})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsx("div",{className:"flex justify-end space-y-2",children:s.jsxs("div",{className:"w-64 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"text-sm font-medium",children:["$",h.subtotal.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Tax:"}),s.jsx("input",{type:"number",value:h.tax,onChange:N=>{const S=parseFloat(N.target.value)||0;f("tax",S),f("total",h.subtotal+S)},className:"w-20 border border-gray-300 rounded px-2 py-1 text-sm",step:"0.01",min:"0"})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total:"}),s.jsxs("span",{className:"text-sm font-bold",children:["$",h.total.toFixed(2)]})]})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(vt,{className:"w-4 h-4 inline mr-2"}),"Due Date"]}),s.jsx("input",{type:"date",value:h.dueDate,onChange:N=>f("dueDate",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:h.notes,onChange:N=>f("notes",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:3,placeholder:"Additional notes..."})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:a?"Creating...":"Create Invoice"})]})]})]})})}function T9({invoice:t,onClose:e,onSuccess:r}){const a=we(),[n,i]=j.useState(!1),[l,o]=j.useState(""),c=ve(N=>N.customers.list);ve(N=>N.services.workOrders);const d=ve(N=>N.services.catalog),u=ve(N=>N.services.catalogLoading),m=ve(N=>N.vehicles.list),h=ve(N=>N.vehicles.loading),[x,g]=j.useState({customerId:"",invoiceNumber:"",dueDate:"",vehicleId:"",serviceType:"",items:[],subtotal:0,tax:0,total:0,status:"draft",notes:""});j.useEffect(()=>{a(Pt()),a(on({})),a(ln({})),a(Nl({}))},[a]),j.useEffect(()=>{var N;t&&g({customerId:((N=t.customer)==null?void 0:N._id)||"",invoiceNumber:t.invoiceNumber||"",dueDate:t.dueDate?new Date(t.dueDate).toISOString().split("T")[0]:"",vehicleId:t.vehicleId||"",serviceType:t.serviceType||"",items:t.items||[],subtotal:t.subtotal||0,tax:t.tax||0,total:t.total||0,status:t.status,notes:t.notes||""})},[t]);const f=(N,S)=>{g(k=>({...k,[N]:S}))},y=(N,S,k)=>{const P=[...x.items];if(P[N]={...P[N],[S]:k},S==="quantity"||S==="unitPrice"){const _=P[N];P[N]={..._,total:_.quantity*_.unitPrice}}g(_=>({..._,items:P,subtotal:P.reduce((L,T)=>L+T.total,0),total:P.reduce((L,T)=>L+T.total,0)+x.tax}))},p=()=>{g(N=>({...N,items:[...N.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},b=N=>{if(x.items.length>1){const S=x.items.filter((k,P)=>P!==N);g(k=>({...k,items:S,subtotal:S.reduce((P,_)=>P+_.total,0),total:S.reduce((P,_)=>P+_.total,0)+x.tax}))}},v=N=>{g(S=>({...S,customerId:N}))},w=async N=>{if(N.preventDefault(),!!t){if(!x.customerId){o("Please select a customer");return}if(x.items.some(S=>!S.description||S.unitPrice<=0)){o("Please fill in all item details");return}if(!x.serviceType){o("Please enter a service type");return}if(!x.vehicleId){o("Please select a vehicle");return}i(!0),o("");try{await a(Kc({id:t._id,invoiceData:x})).unwrap(),r(),e()}catch(S){o(S.message||"Failed to update invoice")}finally{i(!1)}}};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Edit Invoice #",t.invoiceNumber]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[l&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(hs,{className:"w-4 h-4 inline mr-2"}),"Customer"]}),s.jsxs("select",{value:x.customerId,onChange:N=>v(N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,children:[s.jsx("option",{value:"",children:"Select Customer"}),c.map(N=>s.jsx("option",{value:N._id,children:N.name},N._id))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(sm,{className:"w-4 h-4 inline mr-2"}),"Invoice Number"]}),s.jsx("input",{type:"text",value:x.invoiceNumber,onChange:N=>f("invoiceNumber",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"INV-001",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type"}),s.jsxs("select",{value:x.serviceType,onChange:N=>f("serviceType",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,disabled:u,children:[s.jsx("option",{value:"",children:u?"Loading services...":"Select Service Type"}),d.map(N=>s.jsx("option",{value:N.name,children:N.name},N._id)),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle"}),s.jsxs("select",{value:x.vehicleId,onChange:N=>f("vehicleId",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,disabled:h,children:[s.jsx("option",{value:"",children:h?"Loading vehicles...":"Select Vehicle"}),m.map(N=>s.jsxs("option",{value:N._id,children:[N.year," ",N.make," ",N.model," - ",N.licensePlate]},N._id))]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h4",{className:"text-md font-medium",children:"Invoice Items"}),s.jsxs("button",{type:"button",onClick:p,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm flex items-center gap-1",children:[s.jsx(_t,{className:"w-4 h-4"}),"Add Item"]})]}),s.jsx("div",{className:"space-y-3",children:x.items.map((N,S)=>s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[s.jsx("div",{className:"col-span-5",children:s.jsx("input",{type:"text",placeholder:"Description",value:N.description,onChange:k=>y(S,"description",k.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",required:!0})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",placeholder:"Qty",value:N.quantity,onChange:k=>y(S,"quantity",parseInt(k.target.value)||0),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",min:"1",required:!0})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",placeholder:"Price",value:N.unitPrice,onChange:k=>y(S,"unitPrice",parseFloat(k.target.value)||0),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",step:"0.01",min:"0",required:!0})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",value:(N.quantity*N.unitPrice).toFixed(2),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm bg-gray-50",readOnly:!0})}),s.jsx("div",{className:"col-span-1",children:x.items.length>1&&s.jsx("button",{type:"button",onClick:()=>b(S),className:"text-red-600 hover:text-red-800",children:s.jsx(Le,{className:"w-4 h-4"})})})]},S))})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsx("div",{className:"flex justify-end space-y-2",children:s.jsxs("div",{className:"w-64 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"text-sm font-medium",children:["$",x.subtotal.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Tax:"}),s.jsx("input",{type:"number",value:x.tax,onChange:N=>{const S=parseFloat(N.target.value)||0;f("tax",S),f("total",x.subtotal+S)},className:"w-20 border border-gray-300 rounded px-2 py-1 text-sm",step:"0.01",min:"0"})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total:"}),s.jsxs("span",{className:"text-sm font-bold",children:["$",x.total.toFixed(2)]})]})]})})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:x.status,onChange:N=>f("status",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"overdue",children:"Overdue"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(vt,{className:"w-4 h-4 inline mr-2"}),"Due Date"]}),s.jsx("input",{type:"date",value:x.dueDate,onChange:N=>f("dueDate",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:x.notes,onChange:N=>f("notes",N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:3,placeholder:"Additional notes..."})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:n?"Updating...":"Update Invoice"})]})]})]})}):null}function A9({invoice:t,onClose:e,onSuccess:r}){var d;const a=we(),[n,i]=j.useState(!1),[l,o]=j.useState(""),c=async()=>{if(t){i(!0),o("");try{await a(Xc(t._id)).unwrap(),r(),e()}catch(u){o(u.message||"Failed to delete invoice")}finally{i(!1)}}};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Delete Invoice"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[l&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:s.jsx(ts,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Are you sure?"}),s.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. This will permanently delete the invoice."})]})]}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Invoice Number:"}),s.jsxs("span",{className:"text-sm font-medium",children:["#",t.invoiceNumber]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Customer:"}),s.jsx("span",{className:"text-sm font-medium",children:(d=t.customer)==null?void 0:d.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Amount:"}),s.jsxs("span",{className:"text-sm font-medium",children:["$",t.total.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),s.jsx("span",{className:"text-sm font-medium capitalize",children:t.status})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:e,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg",children:"Cancel"}),s.jsxs("button",{onClick:c,disabled:n,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(Le,{className:"w-4 h-4"}),n?"Deleting...":"Delete Invoice"]})]})]})]})}):null}function D9(){var Oe;const[t,e]=j.useState("invoices"),[r,a]=j.useState("all"),[n,i]=j.useState(""),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(""),[h,x]=j.useState("cash"),[g,f]=j.useState(!1),[y,p]=j.useState(!1),[b,v]=j.useState(!1),{invoices:w,templates:N,stats:S,paymentStats:k,loading:P,settings:_}=ve(Y=>Y.invoices);ve(Y=>Y.customers.list),ve(Y=>Y.services.workOrders);const L=we();j.useEffect(()=>{L(vl()),L(jl()),L(Gc()),L(Jc())},[L]);const T=(w||[]).filter(Y=>{var E;const $=(((E=Y.customer)==null?void 0:E.name)||"").toLowerCase().includes(n.toLowerCase())||(Y.invoiceNumber||"").toLowerCase().includes(n.toLowerCase()),ke=r==="all"||Y.status===r;return $&&ke}),U=(w||[]).length,H=(w||[]).filter(Y=>Y.status==="paid").length,W=(w||[]).filter(Y=>Y.status==="overdue").length,J=(w||[]).filter(Y=>Y.status==="paid").reduce((Y,$)=>Y+($.total||0),0),V=(w||[]).filter(Y=>Y.status!=="paid"&&Y.status!=="cancelled").reduce((Y,$)=>Y+(($.total||0)-($.paidAmount||0)),0),G=Y=>{switch(Y){case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},M=Y=>{if(!u||parseFloat(u)<=0){C.error("Please enter a valid payment amount");return}L(Qc({invoiceId:Y,paymentData:{amount:parseFloat(u),paymentMethod:h,date:new Date().toISOString()}})),d(!1),o(null),m(""),x("cash")},z=Y=>{const $=w.find(ke=>ke._id===Y);$&&(o($),v(!0))},D=Y=>{o(Y),d(!0),m(""),x("cash")},X=()=>{d(!1),o(null),m(""),x("cash")},F=Y=>{L(j9(Y))},ie=Y=>{L(N9(Y))},ye=()=>{L(vl()),L(jl())},fe=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Invoices"}),s.jsx("p",{className:"text-gray-600",children:"Manage customer invoices and payments"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>L(Zc()),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Co,{className:"w-4 h-4"}),"Update Overdue"]}),s.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Create Invoice"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoices"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(sm,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Paid"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:H})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(mr,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:W})]}),s.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:s.jsx(ts,{className:"w-6 h-6 text-red-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",J.toLocaleString()]})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(Na,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Outstanding"}),s.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["$",V.toLocaleString()]})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:s.jsx(lt,{className:"w-6 h-6 text-yellow-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(wa,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search invoices...",value:n,onChange:Y=>i(Y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("select",{value:r,onChange:Y=>a(Y.target.value),className:"border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"overdue",children:"Overdue"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer & Vehicle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(Y=>{var $;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",Y.invoiceNumber]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["WO: ",Y.workOrder||"N/A"]}),Y.notes&&s.jsx("div",{className:"text-xs text-gray-400 mt-1 max-w-xs truncate",children:Y.notes})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:($=Y.customer)==null?void 0:$.name}),s.jsx("div",{className:"text-sm text-gray-500",children:Y.vehicle?`${Y.vehicle.year} ${Y.vehicle.make} ${Y.vehicle.model}`:"Vehicle info not available"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm text-gray-900",children:["Created: ",new Date(Y.issueDate).toLocaleDateString()]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Due: ",new Date(Y.dueDate).toLocaleDateString()]}),Y.paidDate&&s.jsxs("div",{className:"text-sm text-green-600",children:["Paid: ",new Date(Y.paidDate).toLocaleDateString()]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",Y.total.toFixed(2)]}),Y.paidAmount>0&&Y.paidAmount<Y.total&&s.jsxs("div",{className:"text-sm text-blue-600",children:["Paid: $",Y.paidAmount.toFixed(2)]}),Y.status==="paid"&&s.jsx("div",{className:"text-xs text-green-600 font-medium",children:Y.paymentMethod})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G(Y.status)}`,children:Y.status})}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900",title:"View invoice",children:s.jsx(Xs,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>F(Y._id),className:"text-green-600 hover:text-green-900",title:"Download PDF",children:s.jsx(Qn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>ie(Y._id),className:"text-purple-600 hover:text-purple-900",title:"Send email",children:s.jsx(mt,{className:"w-4 h-4"})}),Y.status!=="paid"&&s.jsx("button",{onClick:()=>D(Y),className:"text-yellow-600 hover:text-yellow-900",title:"Record payment",children:s.jsx(Na,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{o(Y),p(!0)},className:"text-gray-600 hover:text-gray-900",title:"Edit",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>z(Y._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx(Le,{className:"w-4 h-4"})})]})})]},Y._id)})})]})})})]}),pe=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Payment History"}),s.jsx("p",{className:"text-gray-600",children:"Track all payments received"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(w||[]).filter(Y=>Y.status==="paid"&&Y.paidDate).sort((Y,$)=>new Date($.paidDate).getTime()-new Date(Y.paidDate).getTime()).map(Y=>{var $;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(Y.paidDate).toLocaleDateString()}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(Y.paidDate).toLocaleTimeString()})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",Y.invoiceNumber]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:($=Y.customer)==null?void 0:$.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm font-medium text-green-600",children:["$",Y.paidAmount.toFixed(2)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 capitalize",children:Y.paymentMethod})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:s.jsx(Xs,{className:"w-4 h-4"})})})]},Y._id)})})]})})})]}),Te=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Invoice Settings"}),s.jsx("p",{className:"text-gray-600",children:"Configure invoice templates and defaults"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Company Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),s.jsx("input",{type:"text",value:_.companyInfo.name,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),s.jsx("textarea",{value:_.companyInfo.address,className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:_.companyInfo.phone,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:_.companyInfo.email,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax ID"}),s.jsx("input",{type:"text",value:_.companyInfo.taxId||"",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License #"}),s.jsx("input",{type:"text",value:_.companyInfo.license||"",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Invoice Defaults"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Rate (%)"}),s.jsx("input",{type:"number",step:"0.01",value:_.invoiceDefaults.taxRate,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Terms"}),s.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"Net 30",children:"Net 30"}),s.jsx("option",{value:"Net 15",children:"Net 15"}),s.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"}),s.jsx("option",{value:"Net 60",children:"Net 60"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Prefix"}),s.jsx("input",{type:"text",value:_.invoiceDefaults.invoicePrefix,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Invoice #"}),s.jsx("input",{type:"number",value:_.invoiceDefaults.nextInvoiceNumber,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Late Fee Penalty (%)"}),s.jsx("input",{type:"number",step:"0.1",value:_.invoiceDefaults.lateFeePenalty,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Accepted Payment Methods"}),s.jsx("div",{className:"space-y-3",children:Object.entries(_.paymentMethods).map(([Y,$])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:Y.replace(/([A-Z])/g," $1").trim()}),s.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full ${$?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${$?"translate-x-6":"translate-x-1"}`})})]},Y))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Template Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:_.template.primaryColor,className:"w-12 h-10 border border-gray-300 rounded"}),s.jsx("input",{type:"text",value:_.template.primaryColor,className:"flex-1 border border-gray-300 rounded-lg px-3 py-2"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Company Logo"}),s.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full ${_.template.showCompanyLogo?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${_.template.showCompanyLogo?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Tax Breakdown"}),s.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full ${_.template.showTaxBreakdown?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${_.template.showTaxBreakdown?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Labor Details"}),s.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full ${_.template.showLaborDetails?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${_.template.showLaborDetails?"translate-x-6":"translate-x-1"}`})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Footer Text"}),s.jsx("textarea",{value:_.template.footerText,className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:3})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg text-sm font-medium",children:"Save Settings"})})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(It,{title:"Invoices & Billing"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"invoices",label:"Invoices",count:(w||[]).length},{key:"payments",label:"Payments",count:(w||[]).filter(Y=>Y.status==="paid").length},{key:"settings",label:"Settings",count:0}].map(Y=>s.jsxs("button",{onClick:()=>e(Y.key),className:`py-4 px-1 border-b-2 font-medium text-sm ${t===Y.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[Y.label," ",Y.count>0&&`(${Y.count})`]},Y.key))})}),s.jsxs("div",{className:"p-6",children:[t==="invoices"&&fe(),t==="payments"&&pe(),t==="settings"&&Te()]})]}),c&&l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Record Payment"}),s.jsx("button",{onClick:X,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Re,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Invoice: #",l.invoiceNumber]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Customer: ",(Oe=l.customer)==null?void 0:Oe.name]}),s.jsxs("p",{className:"text-sm font-medium",children:["Amount Due: $",(l.total-(l.paidAmount||0)).toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Amount"}),s.jsx("input",{type:"number",step:"0.01",value:u,onChange:Y=>m(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),s.jsxs("select",{value:h,onChange:Y=>x(Y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"check",children:"Check"}),s.jsx("option",{value:"credit_card",children:"Credit Card"}),s.jsx("option",{value:"debit_card",children:"Debit Card"}),s.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:X,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg",children:"Cancel"}),s.jsx("button",{onClick:()=>M(l._id),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:"Record Payment"})]})]})]})}),g&&s.jsx(P9,{onClose:()=>f(!1),onSuccess:ye}),y&&s.jsx(T9,{invoice:l,onClose:()=>{p(!1),o(null)},onSuccess:ye}),b&&s.jsx(A9,{invoice:l,onClose:()=>{v(!1),o(null)},onSuccess:ye})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function To(t){return t+.5|0}const sa=(t,e,r)=>Math.max(Math.min(t,r),e);function Zi(t){return sa(To(t*2.55),0,255)}function ya(t){return sa(To(t*255),0,255)}function Sr(t){return sa(To(t/2.55)/100,0,1)}function Ly(t){return sa(To(t*100),0,100)}const ks={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},dx=[..."0123456789ABCDEF"],M9=t=>dx[t&15],E9=t=>dx[(t&240)>>4]+dx[t&15],ec=t=>(t&240)>>4===(t&15),I9=t=>ec(t.r)&&ec(t.g)&&ec(t.b)&&ec(t.a);function R9(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&ks[t[1]]*17,g:255&ks[t[2]]*17,b:255&ks[t[3]]*17,a:e===5?ks[t[4]]*17:255}:(e===7||e===9)&&(r={r:ks[t[1]]<<4|ks[t[2]],g:ks[t[3]]<<4|ks[t[4]],b:ks[t[5]]<<4|ks[t[6]],a:e===9?ks[t[7]]<<4|ks[t[8]]:255})),r}const L9=(t,e)=>t<255?e(t):"";function O9(t){var e=I9(t)?M9:E9;return t?"#"+e(t.r)+e(t.g)+e(t.b)+L9(t.a,e):void 0}const F9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xN(t,e,r){const a=e*Math.min(r,1-r),n=(i,l=(i+t/30)%12)=>r-a*Math.max(Math.min(l-3,9-l,1),-1);return[n(0),n(8),n(4)]}function $9(t,e,r){const a=(n,i=(n+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[a(5),a(3),a(1)]}function z9(t,e,r){const a=xN(t,1,.5);let n;for(e+r>1&&(n=1/(e+r),e*=n,r*=n),n=0;n<3;n++)a[n]*=1-e-r,a[n]+=e;return a}function B9(t,e,r,a,n){return t===n?(e-r)/a+(e<r?6:0):e===n?(r-t)/a+2:(t-e)/a+4}function tg(t){const r=t.r/255,a=t.g/255,n=t.b/255,i=Math.max(r,a,n),l=Math.min(r,a,n),o=(i+l)/2;let c,d,u;return i!==l&&(u=i-l,d=o>.5?u/(2-i-l):u/(i+l),c=B9(r,a,n,u,i),c=c*60+.5),[c|0,d||0,o]}function sg(t,e,r,a){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,a)).map(ya)}function rg(t,e,r){return sg(xN,t,e,r)}function V9(t,e,r){return sg(z9,t,e,r)}function U9(t,e,r){return sg($9,t,e,r)}function pN(t){return(t%360+360)%360}function H9(t){const e=F9.exec(t);let r=255,a;if(!e)return;e[5]!==a&&(r=e[6]?Zi(+e[5]):ya(+e[5]));const n=pN(+e[2]),i=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?a=V9(n,i,l):e[1]==="hsv"?a=U9(n,i,l):a=rg(n,i,l),{r:a[0],g:a[1],b:a[2],a:r}}function W9(t,e){var r=tg(t);r[0]=pN(r[0]+e),r=rg(r),t.r=r[0],t.g=r[1],t.b=r[2]}function q9(t){if(!t)return;const e=tg(t),r=e[0],a=Ly(e[1]),n=Ly(e[2]);return t.a<255?`hsla(${r}, ${a}%, ${n}%, ${Sr(t.a)})`:`hsl(${r}, ${a}%, ${n}%)`}const Oy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Fy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Y9(){const t={},e=Object.keys(Fy),r=Object.keys(Oy);let a,n,i,l,o;for(a=0;a<e.length;a++){for(l=o=e[a],n=0;n<r.length;n++)i=r[n],o=o.replace(i,Oy[i]);i=parseInt(Fy[l],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}let tc;function K9(t){tc||(tc=Y9(),tc.transparent=[0,0,0,0]);const e=tc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const X9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Q9(t){const e=X9.exec(t);let r=255,a,n,i;if(e){if(e[7]!==a){const l=+e[7];r=e[8]?Zi(l):sa(l*255,0,255)}return a=+e[1],n=+e[3],i=+e[5],a=255&(e[2]?Zi(a):sa(a,0,255)),n=255&(e[4]?Zi(n):sa(n,0,255)),i=255&(e[6]?Zi(i):sa(i,0,255)),{r:a,g:n,b:i,a:r}}}function G9(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Sr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const lh=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ln=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function J9(t,e,r){const a=Ln(Sr(t.r)),n=Ln(Sr(t.g)),i=Ln(Sr(t.b));return{r:ya(lh(a+r*(Ln(Sr(e.r))-a))),g:ya(lh(n+r*(Ln(Sr(e.g))-n))),b:ya(lh(i+r*(Ln(Sr(e.b))-i))),a:t.a+r*(e.a-t.a)}}function sc(t,e,r){if(t){let a=tg(t);a[e]=Math.max(0,Math.min(a[e]+a[e]*r,e===0?360:1)),a=rg(a),t.r=a[0],t.g=a[1],t.b=a[2]}}function gN(t,e){return t&&Object.assign(e||{},t)}function $y(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ya(t[3]))):(e=gN(t,{r:0,g:0,b:0,a:1}),e.a=ya(e.a)),e}function Z9(t){return t.charAt(0)==="r"?Q9(t):H9(t)}class no{constructor(e){if(e instanceof no)return e;const r=typeof e;let a;r==="object"?a=$y(e):r==="string"&&(a=R9(e)||K9(e)||Z9(e)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var e=gN(this._rgb);return e&&(e.a=Sr(e.a)),e}set rgb(e){this._rgb=$y(e)}rgbString(){return this._valid?G9(this._rgb):void 0}hexString(){return this._valid?O9(this._rgb):void 0}hslString(){return this._valid?q9(this._rgb):void 0}mix(e,r){if(e){const a=this.rgb,n=e.rgb;let i;const l=r===i?.5:r,o=2*l-1,c=a.a-n.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;i=1-d,a.r=255&d*a.r+i*n.r+.5,a.g=255&d*a.g+i*n.g+.5,a.b=255&d*a.b+i*n.b+.5,a.a=l*a.a+(1-l)*n.a,this.rgb=a}return this}interpolate(e,r){return e&&(this._rgb=J9(this._rgb,e._rgb,r)),this}clone(){return new no(this.rgb)}alpha(e){return this._rgb.a=ya(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=To(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return sc(this._rgb,2,e),this}darken(e){return sc(this._rgb,2,-e),this}saturate(e){return sc(this._rgb,1,e),this}desaturate(e){return sc(this._rgb,1,-e),this}rotate(e){return W9(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function br(){}const eT=(()=>{let t=0;return()=>t++})();function Me(t){return t==null}function Ke(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function _e(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ot(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function gs(t,e){return ot(t)?t:e}function Se(t,e){return typeof t>"u"?e:t}const tT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,fN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function We(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function $e(t,e,r,a){let n,i,l;if(Ke(t))if(i=t.length,a)for(n=i-1;n>=0;n--)e.call(r,t[n],n);else for(n=0;n<i;n++)e.call(r,t[n],n);else if(_e(t))for(l=Object.keys(t),i=l.length,n=0;n<i;n++)e.call(r,t[l[n]],l[n])}function Jd(t,e){let r,a,n,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,a=t.length;r<a;++r)if(n=t[r],i=e[r],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function Zd(t){if(Ke(t))return t.map(Zd);if(_e(t)){const e=Object.create(null),r=Object.keys(t),a=r.length;let n=0;for(;n<a;++n)e[r[n]]=Zd(t[r[n]]);return e}return t}function yN(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function sT(t,e,r,a){if(!yN(t))return;const n=e[t],i=r[t];_e(n)&&_e(i)?io(n,i,a):e[t]=Zd(i)}function io(t,e,r){const a=Ke(e)?e:[e],n=a.length;if(!_e(t))return t;r=r||{};const i=r.merger||sT;let l;for(let o=0;o<n;++o){if(l=a[o],!_e(l))continue;const c=Object.keys(l);for(let d=0,u=c.length;d<u;++d)i(c[d],t,l,r)}return t}function wl(t,e){return io(t,e,{merger:rT})}function rT(t,e,r){if(!yN(t))return;const a=e[t],n=r[t];_e(a)&&_e(n)?wl(a,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Zd(n))}const zy={"":t=>t,x:t=>t.x,y:t=>t.y};function aT(t){const e=t.split("."),r=[];let a="";for(const n of e)a+=n,a.endsWith("\\")?a=a.slice(0,-1)+".":(r.push(a),a="");return r}function nT(t){const e=aT(t);return r=>{for(const a of e){if(a==="")break;r=r&&r[a]}return r}}function kn(t,e){return(zy[e]||(zy[e]=nT(e)))(t)}function ag(t){return t.charAt(0).toUpperCase()+t.slice(1)}const lo=t=>typeof t<"u",Ca=t=>typeof t=="function",By=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function iT(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ie=Math.PI,Qe=2*Ie,lT=Qe+Ie,eu=Number.POSITIVE_INFINITY,oT=Ie/180,ht=Ie/2,Ia=Ie/4,Vy=Ie*2/3,ra=Math.log10,xr=Math.sign;function Sl(t,e,r){return Math.abs(t-e)<r}function Uy(t){const e=Math.round(t);t=Sl(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(ra(t))),a=t/r;return(a<=1?1:a<=2?2:a<=5?5:10)*r}function cT(t){const e=[],r=Math.sqrt(t);let a;for(a=1;a<r;a++)t%a===0&&(e.push(a),e.push(t/a));return r===(r|0)&&e.push(r),e.sort((n,i)=>n-i).pop(),e}function dT(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function oo(t){return!dT(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function uT(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function bN(t,e,r){let a,n,i;for(a=0,n=t.length;a<n;a++)i=t[a][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function or(t){return t*(Ie/180)}function ng(t){return t*(180/Ie)}function Hy(t){if(!ot(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function vN(t,e){const r=e.x-t.x,a=e.y-t.y,n=Math.sqrt(r*r+a*a);let i=Math.atan2(a,r);return i<-.5*Ie&&(i+=Qe),{angle:i,distance:n}}function ux(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function mT(t,e){return(t-e+lT)%Qe-Ie}function zt(t){return(t%Qe+Qe)%Qe}function co(t,e,r,a){const n=zt(t),i=zt(e),l=zt(r),o=zt(i-n),c=zt(l-n),d=zt(n-i),u=zt(n-l);return n===i||n===l||a&&i===l||o>c&&d<u}function Ht(t,e,r){return Math.max(e,Math.min(r,t))}function hT(t){return Ht(t,-32768,32767)}function _r(t,e,r,a=1e-6){return t>=Math.min(e,r)-a&&t<=Math.max(e,r)+a}function ig(t,e,r){r=r||(l=>t[l]<e);let a=t.length-1,n=0,i;for(;a-n>1;)i=n+a>>1,r(i)?n=i:a=i;return{lo:n,hi:a}}const tn=(t,e,r,a)=>ig(t,r,a?n=>{const i=t[n][e];return i<r||i===r&&t[n+1][e]===r}:n=>t[n][e]<r),xT=(t,e,r)=>ig(t,r,a=>t[a][e]>=r);function pT(t,e,r){let a=0,n=t.length;for(;a<n&&t[a]<e;)a++;for(;n>a&&t[n-1]>r;)n--;return a>0||n<t.length?t.slice(a,n):t}const jN=["push","pop","shift","splice","unshift"];function gT(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),jN.forEach(r=>{const a="_onData"+ag(r),n=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const l=n.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[a]=="function"&&o[a](...i)}),l}})})}function Wy(t,e){const r=t._chartjs;if(!r)return;const a=r.listeners,n=a.indexOf(e);n!==-1&&a.splice(n,1),!(a.length>0)&&(jN.forEach(i=>{delete t[i]}),delete t._chartjs)}function NN(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const wN=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function SN(t,e){let r=[],a=!1;return function(...n){r=n,a||(a=!0,wN.call(window,()=>{a=!1,t.apply(e,r)}))}}function fT(t,e){let r;return function(...a){return e?(clearTimeout(r),r=setTimeout(t,e,a)):t.apply(this,a),e}}const lg=t=>t==="start"?"left":t==="end"?"right":"center",$t=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,yT=(t,e,r,a)=>t===(a?"left":"right")?r:t==="center"?(e+r)/2:e;function bT(t,e,r){const a=e.length;let n=0,i=a;if(t._sorted){const{iScale:l,vScale:o,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=l.axis,{min:m,max:h,minDefined:x,maxDefined:g}=l.getUserBounds();if(x){if(n=Math.min(tn(c,u,m).lo,r?a:tn(e,u,l.getPixelForValue(m)).lo),d){const f=c.slice(0,n+1).reverse().findIndex(y=>!Me(y[o.axis]));n-=Math.max(0,f)}n=Ht(n,0,a-1)}if(g){let f=Math.max(tn(c,l.axis,h,!0).hi+1,r?0:tn(e,u,l.getPixelForValue(h),!0).hi+1);if(d){const y=c.slice(f-1).findIndex(p=>!Me(p[o.axis]));f+=Math.max(0,y)}i=Ht(f,n,a)-n}else i=a-n}return{start:n,count:i}}function vT(t){const{xScale:e,yScale:r,_scaleRanges:a}=t,n={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!a)return t._scaleRanges=n,!0;const i=a.xmin!==e.min||a.xmax!==e.max||a.ymin!==r.min||a.ymax!==r.max;return Object.assign(a,n),i}const rc=t=>t===0||t===1,qy=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Qe/r)),Yy=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*Qe/r)+1,Cl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ht)+1,easeOutSine:t=>Math.sin(t*ht),easeInOutSine:t=>-.5*(Math.cos(Ie*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>rc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>rc(t)?t:qy(t,.075,.3),easeOutElastic:t=>rc(t)?t:Yy(t,.075,.3),easeInOutElastic(t){return rc(t)?t:t<.5?.5*qy(t*2,.1125,.45):.5+.5*Yy(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Cl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Cl.easeInBounce(t*2)*.5:Cl.easeOutBounce(t*2-1)*.5+.5};function og(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ky(t){return og(t)?t:new no(t)}function oh(t){return og(t)?t:new no(t).saturate(.5).darken(.1).hexString()}const jT=["x","y","borderWidth","radius","tension"],NT=["color","borderColor","backgroundColor"];function wT(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:NT},numbers:{type:"number",properties:jT}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function ST(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Xy=new Map;function CT(t,e){e=e||{};const r=t+JSON.stringify(e);let a=Xy.get(r);return a||(a=new Intl.NumberFormat(t,e),Xy.set(r,a)),a}function nm(t,e,r){return CT(e,r).format(t)}const CN={values(t){return Ke(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const a=this.chart.options.locale;let n,i=t;if(r.length>1){const d=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=kT(t,r)}const l=ra(Math.abs(i)),o=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:n,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),nm(t,a,c)},logarithmic(t,e,r){if(t===0)return"0";const a=r[e].significand||t/Math.pow(10,Math.floor(ra(t)));return[1,2,3,5,10,15].includes(a)||e>.8*r.length?CN.numeric.call(this,t,e,r):""}};function kT(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var im={formatters:CN};function _T(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:im.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const _n=Object.create(null),mx=Object.create(null);function kl(t,e){if(!e)return t;const r=e.split(".");for(let a=0,n=r.length;a<n;++a){const i=r[a];t=t[i]||(t[i]=Object.create(null))}return t}function ch(t,e,r){return typeof e=="string"?io(kl(t,e),r):io(kl(t,""),e)}class PT{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=a=>a.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(a,n)=>oh(n.backgroundColor),this.hoverBorderColor=(a,n)=>oh(n.borderColor),this.hoverColor=(a,n)=>oh(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return ch(this,e,r)}get(e){return kl(this,e)}describe(e,r){return ch(mx,e,r)}override(e,r){return ch(_n,e,r)}route(e,r,a,n){const i=kl(this,e),l=kl(this,a),o="_"+r;Object.defineProperties(i,{[o]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[o],d=l[n];return _e(c)?Object.assign({},d,c):Se(c,d)},set(c){this[o]=c}}})}apply(e){e.forEach(r=>r(this))}}var ct=new PT({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[wT,ST,_T]);function TT(t){return!t||Me(t.size)||Me(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function tu(t,e,r,a,n){let i=e[n];return i||(i=e[n]=t.measureText(n).width,r.push(n)),i>a&&(a=i),a}function AT(t,e,r,a){a=a||{};let n=a.data=a.data||{},i=a.garbageCollect=a.garbageCollect||[];a.font!==e&&(n=a.data={},i=a.garbageCollect=[],a.font=e),t.save(),t.font=e;let l=0;const o=r.length;let c,d,u,m,h;for(c=0;c<o;c++)if(m=r[c],m!=null&&!Ke(m))l=tu(t,n,i,l,m);else if(Ke(m))for(d=0,u=m.length;d<u;d++)h=m[d],h!=null&&!Ke(h)&&(l=tu(t,n,i,l,h));t.restore();const x=i.length/2;if(x>r.length){for(c=0;c<x;c++)delete n[i[c]];i.splice(0,x)}return l}function Ra(t,e,r){const a=t.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((e-n)*a)/a+n}function Qy(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function hx(t,e,r,a){kN(t,e,r,a,null)}function kN(t,e,r,a,n){let i,l,o,c,d,u,m,h;const x=e.pointStyle,g=e.rotation,f=e.radius;let y=(g||0)*oT;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,a),t.rotate(y),t.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),t.restore();return}if(!(isNaN(f)||f<=0)){switch(t.beginPath(),x){default:n?t.ellipse(r,a,n/2,f,0,0,Qe):t.arc(r,a,f,0,Qe),t.closePath();break;case"triangle":u=n?n/2:f,t.moveTo(r+Math.sin(y)*u,a-Math.cos(y)*f),y+=Vy,t.lineTo(r+Math.sin(y)*u,a-Math.cos(y)*f),y+=Vy,t.lineTo(r+Math.sin(y)*u,a-Math.cos(y)*f),t.closePath();break;case"rectRounded":d=f*.516,c=f-d,l=Math.cos(y+Ia)*c,m=Math.cos(y+Ia)*(n?n/2-d:c),o=Math.sin(y+Ia)*c,h=Math.sin(y+Ia)*(n?n/2-d:c),t.arc(r-m,a-o,d,y-Ie,y-ht),t.arc(r+h,a-l,d,y-ht,y),t.arc(r+m,a+o,d,y,y+ht),t.arc(r-h,a+l,d,y+ht,y+Ie),t.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*f,u=n?n/2:c,t.rect(r-u,a-c,2*u,2*c);break}y+=Ia;case"rectRot":m=Math.cos(y)*(n?n/2:f),l=Math.cos(y)*f,o=Math.sin(y)*f,h=Math.sin(y)*(n?n/2:f),t.moveTo(r-m,a-o),t.lineTo(r+h,a-l),t.lineTo(r+m,a+o),t.lineTo(r-h,a+l),t.closePath();break;case"crossRot":y+=Ia;case"cross":m=Math.cos(y)*(n?n/2:f),l=Math.cos(y)*f,o=Math.sin(y)*f,h=Math.sin(y)*(n?n/2:f),t.moveTo(r-m,a-o),t.lineTo(r+m,a+o),t.moveTo(r+h,a-l),t.lineTo(r-h,a+l);break;case"star":m=Math.cos(y)*(n?n/2:f),l=Math.cos(y)*f,o=Math.sin(y)*f,h=Math.sin(y)*(n?n/2:f),t.moveTo(r-m,a-o),t.lineTo(r+m,a+o),t.moveTo(r+h,a-l),t.lineTo(r-h,a+l),y+=Ia,m=Math.cos(y)*(n?n/2:f),l=Math.cos(y)*f,o=Math.sin(y)*f,h=Math.sin(y)*(n?n/2:f),t.moveTo(r-m,a-o),t.lineTo(r+m,a+o),t.moveTo(r+h,a-l),t.lineTo(r-h,a+l);break;case"line":l=n?n/2:Math.cos(y)*f,o=Math.sin(y)*f,t.moveTo(r-l,a-o),t.lineTo(r+l,a+o);break;case"dash":t.moveTo(r,a),t.lineTo(r+Math.cos(y)*(n?n/2:f),a+Math.sin(y)*f);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Pr(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function lm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function om(t){t.restore()}function DT(t,e,r,a,n){if(!e)return t.lineTo(r.x,r.y);if(n==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else n==="after"!=!!a?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function MT(t,e,r,a){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(a?e.cp1x:e.cp2x,a?e.cp1y:e.cp2y,a?r.cp2x:r.cp1x,a?r.cp2y:r.cp1y,r.x,r.y)}function ET(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Me(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function IT(t,e,r,a,n){if(n.strikethrough||n.underline){const i=t.measureText(a),l=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,d=r+i.actualBoundingBoxDescent,u=n.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(l,u),t.lineTo(o,u),t.stroke()}}function RT(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Pn(t,e,r,a,n,i={}){const l=Ke(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=n.string,ET(t,i),c=0;c<l.length;++c)d=l[c],i.backdrop&&RT(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Me(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,r,a,i.maxWidth)),t.fillText(d,r,a,i.maxWidth),IT(t,r,a,d,i),a+=Number(n.lineHeight);t.restore()}function uo(t,e){const{x:r,y:a,w:n,h:i,radius:l}=e;t.arc(r+l.topLeft,a+l.topLeft,l.topLeft,1.5*Ie,Ie,!0),t.lineTo(r,a+i-l.bottomLeft),t.arc(r+l.bottomLeft,a+i-l.bottomLeft,l.bottomLeft,Ie,ht,!0),t.lineTo(r+n-l.bottomRight,a+i),t.arc(r+n-l.bottomRight,a+i-l.bottomRight,l.bottomRight,ht,0,!0),t.lineTo(r+n,a+l.topRight),t.arc(r+n-l.topRight,a+l.topRight,l.topRight,0,-ht,!0),t.lineTo(r+l.topLeft,a)}const LT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,OT=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function FT(t,e){const r=(""+t).match(LT);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const $T=t=>+t||0;function cg(t,e){const r={},a=_e(e),n=a?Object.keys(e):e,i=_e(t)?a?l=>Se(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of n)r[l]=$T(i(l));return r}function _N(t){return cg(t,{top:"y",right:"x",bottom:"y",left:"x"})}function hn(t){return cg(t,["topLeft","topRight","bottomLeft","bottomRight"])}function qt(t){const e=_N(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Nt(t,e){t=t||{},e=e||ct.font;let r=Se(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let a=Se(t.style,e.style);a&&!(""+a).match(OT)&&(console.warn('Invalid font style specified: "'+a+'"'),a=void 0);const n={family:Se(t.family,e.family),lineHeight:FT(Se(t.lineHeight,e.lineHeight),r),size:r,style:a,weight:Se(t.weight,e.weight),string:""};return n.string=TT(n),n}function ac(t,e,r,a){let n=!0,i,l,o;for(i=0,l=t.length;i<l;++i)if(o=t[i],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),n=!1),r!==void 0&&Ke(o)&&(o=o[r%o.length],n=!1),o!==void 0))return a&&!n&&(a.cacheable=!1),o}function zT(t,e,r){const{min:a,max:n}=t,i=fN(e,(n-a)/2),l=(o,c)=>r&&o===0?0:o+c;return{min:l(a,-Math.abs(i)),max:l(n,i)}}function Ma(t,e){return Object.assign(Object.create(t),e)}function dg(t,e=[""],r,a,n=()=>t[0]){const i=r||t;typeof a>"u"&&(a=DN("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:a,_getTarget:n,override:o=>dg([o,...t],e,i,a)};return new Proxy(l,{deleteProperty(o,c){return delete o[c],delete o._keys,delete t[0][c],!0},get(o,c){return TN(o,c,()=>KT(c,e,t,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,c){return Jy(o).includes(c)},ownKeys(o){return Jy(o)},set(o,c,d){const u=o._storage||(o._storage=n());return o[c]=u[c]=d,delete o._keys,!0}})}function Ni(t,e,r,a){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:PN(t,a),setContext:i=>Ni(t,i,r,a),override:i=>Ni(t.override(i),e,r,a)};return new Proxy(n,{deleteProperty(i,l){return delete i[l],delete t[l],!0},get(i,l,o){return TN(i,l,()=>VT(i,l,o))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(i,l,o){return t[l]=o,delete i[l],!0}})}function PN(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:a=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:r,indexable:a,isScriptable:Ca(r)?r:()=>r,isIndexable:Ca(a)?a:()=>a}}const BT=(t,e)=>t?t+ag(e):e,ug=(t,e)=>_e(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function TN(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const a=r();return t[e]=a,a}function VT(t,e,r){const{_proxy:a,_context:n,_subProxy:i,_descriptors:l}=t;let o=a[e];return Ca(o)&&l.isScriptable(e)&&(o=UT(e,o,t,r)),Ke(o)&&o.length&&(o=HT(e,o,t,l.isIndexable)),ug(e,o)&&(o=Ni(o,n,i&&i[e],l)),o}function UT(t,e,r,a){const{_proxy:n,_context:i,_subProxy:l,_stack:o}=r;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let c=e(i,l||a);return o.delete(t),ug(t,c)&&(c=mg(n._scopes,n,t,c)),c}function HT(t,e,r,a){const{_proxy:n,_context:i,_subProxy:l,_descriptors:o}=r;if(typeof i.index<"u"&&a(t))return e[i.index%e.length];if(_e(e[0])){const c=e,d=n._scopes.filter(u=>u!==c);e=[];for(const u of c){const m=mg(d,n,t,u);e.push(Ni(m,i,l&&l[t],o))}}return e}function AN(t,e,r){return Ca(t)?t(e,r):t}const WT=(t,e)=>t===!0?e:typeof t=="string"?kn(e,t):void 0;function qT(t,e,r,a,n){for(const i of e){const l=WT(r,i);if(l){t.add(l);const o=AN(l._fallback,r,n);if(typeof o<"u"&&o!==r&&o!==a)return o}else if(l===!1&&typeof a<"u"&&r!==a)return null}return!1}function mg(t,e,r,a){const n=e._rootScopes,i=AN(e._fallback,r,a),l=[...t,...n],o=new Set;o.add(a);let c=Gy(o,l,r,i||r,a);return c===null||typeof i<"u"&&i!==r&&(c=Gy(o,l,i,c,a),c===null)?!1:dg(Array.from(o),[""],n,i,()=>YT(e,r,a))}function Gy(t,e,r,a,n){for(;r;)r=qT(t,e,r,a,n);return r}function YT(t,e,r){const a=t._getTarget();e in a||(a[e]={});const n=a[e];return Ke(n)&&_e(r)?r:n||{}}function KT(t,e,r,a){let n;for(const i of e)if(n=DN(BT(i,t),r),typeof n<"u")return ug(t,n)?mg(r,a,t,n):n}function DN(t,e){for(const r of e){if(!r)continue;const a=r[t];if(typeof a<"u")return a}}function Jy(t){let e=t._keys;return e||(e=t._keys=XT(t._scopes)),e}function XT(t){const e=new Set;for(const r of t)for(const a of Object.keys(r).filter(n=>!n.startsWith("_")))e.add(a);return Array.from(e)}const QT=Number.EPSILON||1e-14,wi=(t,e)=>e<t.length&&!t[e].skip&&t[e],MN=t=>t==="x"?"y":"x";function GT(t,e,r,a){const n=t.skip?e:t,i=e,l=r.skip?e:r,o=ux(i,n),c=ux(l,i);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const m=a*d,h=a*u;return{previous:{x:i.x-m*(l.x-n.x),y:i.y-m*(l.y-n.y)},next:{x:i.x+h*(l.x-n.x),y:i.y+h*(l.y-n.y)}}}function JT(t,e,r){const a=t.length;let n,i,l,o,c,d=wi(t,0);for(let u=0;u<a-1;++u)if(c=d,d=wi(t,u+1),!(!c||!d)){if(Sl(e[u],0,QT)){r[u]=r[u+1]=0;continue}n=r[u]/e[u],i=r[u+1]/e[u],o=Math.pow(n,2)+Math.pow(i,2),!(o<=9)&&(l=3/Math.sqrt(o),r[u]=n*l*e[u],r[u+1]=i*l*e[u])}}function ZT(t,e,r="x"){const a=MN(r),n=t.length;let i,l,o,c=wi(t,0);for(let d=0;d<n;++d){if(l=o,o=c,c=wi(t,d+1),!o)continue;const u=o[r],m=o[a];l&&(i=(u-l[r])/3,o[`cp1${r}`]=u-i,o[`cp1${a}`]=m-i*e[d]),c&&(i=(c[r]-u)/3,o[`cp2${r}`]=u+i,o[`cp2${a}`]=m+i*e[d])}}function eA(t,e="x"){const r=MN(e),a=t.length,n=Array(a).fill(0),i=Array(a);let l,o,c,d=wi(t,0);for(l=0;l<a;++l)if(o=c,c=d,d=wi(t,l+1),!!c){if(d){const u=d[e]-c[e];n[l]=u!==0?(d[r]-c[r])/u:0}i[l]=o?d?xr(n[l-1])!==xr(n[l])?0:(n[l-1]+n[l])/2:n[l-1]:n[l]}JT(t,n,i),ZT(t,i,e)}function nc(t,e,r){return Math.max(Math.min(t,r),e)}function tA(t,e){let r,a,n,i,l,o=Pr(t[0],e);for(r=0,a=t.length;r<a;++r)l=i,i=o,o=r<a-1&&Pr(t[r+1],e),i&&(n=t[r],l&&(n.cp1x=nc(n.cp1x,e.left,e.right),n.cp1y=nc(n.cp1y,e.top,e.bottom)),o&&(n.cp2x=nc(n.cp2x,e.left,e.right),n.cp2y=nc(n.cp2y,e.top,e.bottom)))}function sA(t,e,r,a,n){let i,l,o,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")eA(t,n);else{let d=a?t[t.length-1]:t[0];for(i=0,l=t.length;i<l;++i)o=t[i],c=GT(d,o,t[Math.min(i+1,l-(a?0:1))%l],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}e.capBezierPoints&&tA(t,r)}function hg(){return typeof window<"u"&&typeof document<"u"}function xg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function su(t,e,r){let a;return typeof t=="string"?(a=parseInt(t,10),t.indexOf("%")!==-1&&(a=a/100*e.parentNode[r])):a=t,a}const cm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function rA(t,e){return cm(t).getPropertyValue(e)}const aA=["top","right","bottom","left"];function xn(t,e,r){const a={};r=r?"-"+r:"";for(let n=0;n<4;n++){const i=aA[n];a[i]=parseFloat(t[e+"-"+i+r])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}const nA=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function iA(t,e){const r=t.touches,a=r&&r.length?r[0]:t,{offsetX:n,offsetY:i}=a;let l=!1,o,c;if(nA(n,i,t.target))o=n,c=i;else{const d=e.getBoundingClientRect();o=a.clientX-d.left,c=a.clientY-d.top,l=!0}return{x:o,y:c,box:l}}function Ua(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:a}=e,n=cm(r),i=n.boxSizing==="border-box",l=xn(n,"padding"),o=xn(n,"border","width"),{x:c,y:d,box:u}=iA(t,r),m=l.left+(u&&o.left),h=l.top+(u&&o.top);let{width:x,height:g}=e;return i&&(x-=l.width+o.width,g-=l.height+o.height),{x:Math.round((c-m)/x*r.width/a),y:Math.round((d-h)/g*r.height/a)}}function lA(t,e,r){let a,n;if(e===void 0||r===void 0){const i=t&&xg(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const l=i.getBoundingClientRect(),o=cm(i),c=xn(o,"border","width"),d=xn(o,"padding");e=l.width-d.width-c.width,r=l.height-d.height-c.height,a=su(o.maxWidth,i,"clientWidth"),n=su(o.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:a||eu,maxHeight:n||eu}}const ic=t=>Math.round(t*10)/10;function oA(t,e,r,a){const n=cm(t),i=xn(n,"margin"),l=su(n.maxWidth,t,"clientWidth")||eu,o=su(n.maxHeight,t,"clientHeight")||eu,c=lA(t,e,r);let{width:d,height:u}=c;if(n.boxSizing==="content-box"){const h=xn(n,"border","width"),x=xn(n,"padding");d-=x.width+h.width,u-=x.height+h.height}return d=Math.max(0,d-i.width),u=Math.max(0,a?d/a:u-i.height),d=ic(Math.min(d,l,c.maxWidth)),u=ic(Math.min(u,o,c.maxHeight)),d&&!u&&(u=ic(d/2)),(e!==void 0||r!==void 0)&&a&&c.height&&u>c.height&&(u=c.height,d=ic(Math.floor(u*a))),{width:d,height:u}}function Zy(t,e,r){const a=e||1,n=Math.floor(t.height*a),i=Math.floor(t.width*a);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(r||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==a||l.height!==n||l.width!==i?(t.currentDevicePixelRatio=a,l.height=n,l.width=i,t.ctx.setTransform(a,0,0,a,0,0),!0):!1}const cA=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};hg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function eb(t,e){const r=rA(t,e),a=r&&r.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function Ha(t,e,r,a){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function dA(t,e,r,a){return{x:t.x+r*(e.x-t.x),y:a==="middle"?r<.5?t.y:e.y:a==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function uA(t,e,r,a){const n={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},l=Ha(t,n,r),o=Ha(n,i,r),c=Ha(i,e,r),d=Ha(l,o,r),u=Ha(o,c,r);return Ha(d,u,r)}const mA=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,a){return r-a},leftForLtr(r,a){return r-a}}},hA=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function di(t,e,r){return t?mA(e,r):hA()}function EN(t,e){let r,a;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,a=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=a)}function IN(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function RN(t){return t==="angle"?{between:co,compare:mT,normalize:zt}:{between:_r,compare:(e,r)=>e-r,normalize:e=>e}}function tb({start:t,end:e,count:r,loop:a,style:n}){return{start:t%r,end:e%r,loop:a&&(e-t+1)%r===0,style:n}}function xA(t,e,r){const{property:a,start:n,end:i}=r,{between:l,normalize:o}=RN(a),c=e.length;let{start:d,end:u,loop:m}=t,h,x;if(m){for(d+=c,u+=c,h=0,x=c;h<x&&l(o(e[d%c][a]),n,i);++h)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:m,style:t.style}}function LN(t,e,r){if(!r)return[t];const{property:a,start:n,end:i}=r,l=e.length,{compare:o,between:c,normalize:d}=RN(a),{start:u,end:m,loop:h,style:x}=xA(t,e,r),g=[];let f=!1,y=null,p,b,v;const w=()=>c(n,v,p)&&o(n,v)!==0,N=()=>o(i,p)===0||c(i,v,p),S=()=>f||w(),k=()=>!f||N();for(let P=u,_=u;P<=m;++P)b=e[P%l],!b.skip&&(p=d(b[a]),p!==v&&(f=c(p,n,i),y===null&&S()&&(y=o(p,n)===0?P:_),y!==null&&k()&&(g.push(tb({start:y,end:P,loop:h,count:l,style:x})),y=null),_=P,v=p));return y!==null&&g.push(tb({start:y,end:m,loop:h,count:l,style:x})),g}function ON(t,e){const r=[],a=t.segments;for(let n=0;n<a.length;n++){const i=LN(a[n],t.points,e);i.length&&r.push(...i)}return r}function pA(t,e,r,a){let n=0,i=e-1;if(r&&!a)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,r&&(i+=n);i>n&&t[i%e].skip;)i--;return i%=e,{start:n,end:i}}function gA(t,e,r,a){const n=t.length,i=[];let l=e,o=t[e],c;for(c=e+1;c<=r;++c){const d=t[c%n];d.skip||d.stop?o.skip||(a=!1,i.push({start:e%n,end:(c-1)%n,loop:a}),e=l=d.stop?c:null):(l=c,o.skip&&(e=c)),o=d}return l!==null&&i.push({start:e%n,end:l%n,loop:a}),i}function fA(t,e){const r=t.points,a=t.options.spanGaps,n=r.length;if(!n)return[];const i=!!t._loop,{start:l,end:o}=pA(r,n,i,a);if(a===!0)return sb(t,[{start:l,end:o,loop:i}],r,e);const c=o<l?o+n:o,d=!!t._fullLoop&&l===0&&o===n-1;return sb(t,gA(r,l,c,d),r,e)}function sb(t,e,r,a){return!a||!a.setContext||!r?e:yA(t,e,r,a)}function yA(t,e,r,a){const n=t._chart.getContext(),i=rb(t.options),{_datasetIndex:l,options:{spanGaps:o}}=t,c=r.length,d=[];let u=i,m=e[0].start,h=m;function x(g,f,y,p){const b=o?-1:1;if(g!==f){for(g+=c;r[g%c].skip;)g-=b;for(;r[f%c].skip;)f+=b;g%c!==f%c&&(d.push({start:g%c,end:f%c,loop:y,style:p}),u=p,m=f%c)}}for(const g of e){m=o?m:g.start;let f=r[m%c],y;for(h=m+1;h<=g.end;h++){const p=r[h%c];y=rb(a.setContext(Ma(n,{type:"segment",p0:f,p1:p,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:l}))),bA(y,u)&&x(m,h-1,g.loop,u),f=p,u=y}m<h-1&&x(m,h-1,g.loop,u)}return d}function rb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function bA(t,e){if(!e)return!1;const r=[],a=function(n,i){return og(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,a)!==JSON.stringify(e,a)}function lc(t,e,r){return t.options.clip?t[r]:e[r]}function vA(t,e){const{xScale:r,yScale:a}=t;return r&&a?{left:lc(r,e,"left"),right:lc(r,e,"right"),top:lc(a,e,"top"),bottom:lc(a,e,"bottom")}:e}function FN(t,e){const r=e._clip;if(r.disabled)return!1;const a=vA(e,t.chartArea);return{left:r.left===!1?0:a.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:a.right+(r.right===!0?0:r.right),top:r.top===!1?0:a.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:a.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class jA{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,a,n){const i=r.listeners[n],l=r.duration;i.forEach(o=>o({chart:e,initial:r.initial,numSteps:l,currentStep:Math.min(a-r.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=wN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((a,n)=>{if(!a.running||!a.items.length)return;const i=a.items;let l=i.length-1,o=!1,c;for(;l>=0;--l)c=i[l],c._active?(c._total>a.duration&&(a.duration=c._total),c.tick(e),o=!0):(i[l]=i[i.length-1],i.pop());o&&(n.draw(),this._notify(n,a,e,"progress")),i.length||(a.running=!1,this._notify(n,a,e,"complete"),a.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let a=r.get(e);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,a)),a}listen(e,r,a){this._getAnims(e).listeners[r].push(a)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((a,n)=>Math.max(a,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const a=r.items;let n=a.length-1;for(;n>=0;--n)a[n].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var vr=new jA;const ab="transparent",NA={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const a=Ky(t||ab),n=a.valid&&Ky(e||ab);return n&&n.valid?n.mix(a,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class wA{constructor(e,r,a,n){const i=r[a];n=ac([e.to,n,i,e.from]);const l=ac([e.from,i,n]);this._active=!0,this._fn=e.fn||NA[e.type||typeof l],this._easing=Cl[e.easing]||Cl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=a,this._from=l,this._to=n,this._promises=void 0}active(){return this._active}update(e,r,a){if(this._active){this._notify(!1);const n=this._target[this._prop],i=a-this._start,l=this._duration-i;this._start=a,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=ac([e.to,r,n,e.from]),this._from=ac([e.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,a=this._duration,n=this._prop,i=this._from,l=this._loop,o=this._to;let c;if(this._active=i!==o&&(l||r<a),!this._active){this._target[n]=o,this._notify(!0);return}if(r<0){this._target[n]=i;return}c=r/a%2,c=l&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,a)=>{e.push({res:r,rej:a})})}_notify(e){const r=e?"res":"rej",a=this._promises||[];for(let n=0;n<a.length;n++)a[n][r]()}}class $N{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!_e(e))return;const r=Object.keys(ct.animation),a=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!_e(i))return;const l={};for(const o of r)l[o]=i[o];(Ke(i.properties)&&i.properties||[n]).forEach(o=>{(o===n||!a.has(o))&&a.set(o,l)})})}_animateOptions(e,r){const a=r.options,n=CA(e,a);if(!n)return[];const i=this._createAnimations(n,a);return a.$shared&&SA(e.options.$animations,a).then(()=>{e.options=a},()=>{}),i}_createAnimations(e,r){const a=this._properties,n=[],i=e.$animations||(e.$animations={}),l=Object.keys(r),o=Date.now();let c;for(c=l.length-1;c>=0;--c){const d=l[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,r));continue}const u=r[d];let m=i[d];const h=a.get(d);if(m)if(h&&m.active()){m.update(h,u,o);continue}else m.cancel();if(!h||!h.duration){e[d]=u;continue}i[d]=m=new wA(h,e,d,u),n.push(m)}return n}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const a=this._createAnimations(e,r);if(a.length)return vr.add(this._chart,a),!0}}function SA(t,e){const r=[],a=Object.keys(e);for(let n=0;n<a.length;n++){const i=t[a[n]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function CA(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function nb(t,e){const r=t&&t.options||{},a=r.reverse,n=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:a?i:n,end:a?n:i}}function kA(t,e,r){if(r===!1)return!1;const a=nb(t,r),n=nb(e,r);return{top:n.end,right:a.end,bottom:n.start,left:a.start}}function _A(t){let e,r,a,n;return _e(t)?(e=t.top,r=t.right,a=t.bottom,n=t.left):e=r=a=n=t,{top:e,right:r,bottom:a,left:n,disabled:t===!1}}function zN(t,e){const r=[],a=t._getSortedDatasetMetas(e);let n,i;for(n=0,i=a.length;n<i;++n)r.push(a[n].index);return r}function ib(t,e,r,a={}){const n=t.keys,i=a.mode==="single";let l,o,c,d;if(e===null)return;let u=!1;for(l=0,o=n.length;l<o;++l){if(c=+n[l],c===r){if(u=!0,a.all)continue;break}d=t.values[c],ot(d)&&(i||e===0||xr(e)===xr(d))&&(e+=d)}return!u&&!a.all?0:e}function PA(t,e){const{iScale:r,vScale:a}=e,n=r.axis==="x"?"x":"y",i=a.axis==="x"?"x":"y",l=Object.keys(t),o=new Array(l.length);let c,d,u;for(c=0,d=l.length;c<d;++c)u=l[c],o[c]={[n]:u,[i]:t[u]};return o}function dh(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function TA(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function AA(t){const{min:e,max:r,minDefined:a,maxDefined:n}=t.getUserBounds();return{min:a?e:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function DA(t,e,r){const a=t[e]||(t[e]={});return a[r]||(a[r]={})}function lb(t,e,r,a){for(const n of e.getMatchingVisibleMetas(a).reverse()){const i=t[n.index];if(r&&i>0||!r&&i<0)return n.index}return null}function ob(t,e){const{chart:r,_cachedMeta:a}=t,n=r._stacks||(r._stacks={}),{iScale:i,vScale:l,index:o}=a,c=i.axis,d=l.axis,u=TA(i,l,a),m=e.length;let h;for(let x=0;x<m;++x){const g=e[x],{[c]:f,[d]:y}=g,p=g._stacks||(g._stacks={});h=p[d]=DA(n,u,f),h[o]=y,h._top=lb(h,l,!0,a.type),h._bottom=lb(h,l,!1,a.type);const b=h._visualValues||(h._visualValues={});b[o]=y}}function uh(t,e){const r=t.scales;return Object.keys(r).filter(a=>r[a].axis===e).shift()}function MA(t,e){return Ma(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function EA(t,e,r){return Ma(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Vi(t,e){const r=t.controller.index,a=t.vScale&&t.vScale.axis;if(a){e=e||t._parsed;for(const n of e){const i=n._stacks;if(!i||i[a]===void 0||i[a][r]===void 0)return;delete i[a][r],i[a]._visualValues!==void 0&&i[a]._visualValues[r]!==void 0&&delete i[a]._visualValues[r]}}}const mh=t=>t==="reset"||t==="none",cb=(t,e)=>e?t:Object.assign({},t),IA=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:zN(r,!0),values:null};class pn{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=dh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Vi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,a=this.getDataset(),n=(m,h,x,g)=>m==="x"?h:m==="r"?g:x,i=r.xAxisID=Se(a.xAxisID,uh(e,"x")),l=r.yAxisID=Se(a.yAxisID,uh(e,"y")),o=r.rAxisID=Se(a.rAxisID,uh(e,"r")),c=r.indexAxis,d=r.iAxisID=n(c,i,l,o),u=r.vAxisID=n(c,l,i,o);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(l),r.rScale=this.getScaleForId(o),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Wy(this._data,this),e._stacked&&Vi(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),a=this._data;if(_e(r)){const n=this._cachedMeta;this._data=PA(r,n)}else if(a!==r){if(a){Wy(a,this);const n=this._cachedMeta;Vi(n),n._parsed=[]}r&&Object.isExtensible(r)&&gT(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,a=this.getDataset();let n=!1;this._dataCheck();const i=r._stacked;r._stacked=dh(r.vScale,r),r.stack!==a.stack&&(n=!0,Vi(r),r.stack=a.stack),this._resyncElements(e),(n||i!==r._stacked)&&(ob(this,r._parsed),r._stacked=dh(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),a=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(a,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:a,_data:n}=this,{iScale:i,_stacked:l}=a,o=i.axis;let c=e===0&&r===n.length?!0:a._sorted,d=e>0&&a._parsed[e-1],u,m,h;if(this._parsing===!1)a._parsed=n,a._sorted=!0,h=n;else{Ke(n[e])?h=this.parseArrayData(a,n,e,r):_e(n[e])?h=this.parseObjectData(a,n,e,r):h=this.parsePrimitiveData(a,n,e,r);const x=()=>m[o]===null||d&&m[o]<d[o];for(u=0;u<r;++u)a._parsed[u+e]=m=h[u],c&&(x()&&(c=!1),d=m);a._sorted=c}l&&ob(this,h)}parsePrimitiveData(e,r,a,n){const{iScale:i,vScale:l}=e,o=i.axis,c=l.axis,d=i.getLabels(),u=i===l,m=new Array(n);let h,x,g;for(h=0,x=n;h<x;++h)g=h+a,m[h]={[o]:u||i.parse(d[g],g),[c]:l.parse(r[g],g)};return m}parseArrayData(e,r,a,n){const{xScale:i,yScale:l}=e,o=new Array(n);let c,d,u,m;for(c=0,d=n;c<d;++c)u=c+a,m=r[u],o[c]={x:i.parse(m[0],u),y:l.parse(m[1],u)};return o}parseObjectData(e,r,a,n){const{xScale:i,yScale:l}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let u,m,h,x;for(u=0,m=n;u<m;++u)h=u+a,x=r[h],d[u]={x:i.parse(kn(x,o),h),y:l.parse(kn(x,c),h)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,a){const n=this.chart,i=this._cachedMeta,l=r[e.axis],o={keys:zN(n,!0),values:r._stacks[e.axis]._visualValues};return ib(o,l,i.index,{mode:a})}updateRangeFromParsed(e,r,a,n){const i=a[r.axis];let l=i===null?NaN:i;const o=n&&a._stacks[r.axis];n&&o&&(n.values=o,l=ib(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,r){const a=this._cachedMeta,n=a._parsed,i=a._sorted&&e===a.iScale,l=n.length,o=this._getOtherScale(e),c=IA(r,a,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:m}=AA(o);let h,x;function g(){x=n[h];const f=x[o.axis];return!ot(x[e.axis])||u>f||m<f}for(h=0;h<l&&!(!g()&&(this.updateRangeFromParsed(d,e,x,c),i));++h);if(i){for(h=l-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(d,e,x,c);break}}return d}getAllParsedValues(e){const r=this._cachedMeta._parsed,a=[];let n,i,l;for(n=0,i=r.length;n<i;++n)l=r[n][e.axis],ot(l)&&a.push(l);return a}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,a=r.iScale,n=r.vScale,i=this.getParsed(e);return{label:a?""+a.getLabelForValue(i[a.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=_A(Se(this.options.clip,kA(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,a=this._cachedMeta,n=a.data||[],i=r.chartArea,l=[],o=this._drawStart||0,c=this._drawCount||n.length-o,d=this.options.drawActiveElementsOnTop;let u;for(a.dataset&&a.dataset.draw(e,i,o,c),u=o;u<o+c;++u){const m=n[u];m.hidden||(m.active&&d?l.push(m):m.draw(e,i))}for(u=0;u<l.length;++u)l[u].draw(e,i)}getStyle(e,r){const a=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(a):this.resolveDataElementOptions(e||0,a)}getContext(e,r,a){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];i=l.$context||(l.$context=EA(this.getContext(),e,l)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=MA(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=a,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",a){const n=r==="active",i=this._cachedDataOpts,l=e+"-"+r,o=i[l],c=this.enableOptionSharing&&lo(a);if(o)return cb(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),m=n?[`${e}Hover`,"hover",e,""]:[e,""],h=d.getOptionScopes(this.getDataset(),u),x=Object.keys(ct.elements[e]),g=()=>this.getContext(a,n,r),f=d.resolveNamedOptions(h,x,g,m);return f.$shared&&(f.$shared=c,i[l]=Object.freeze(cb(f,c))),f}_resolveAnimations(e,r,a){const n=this.chart,i=this._cachedDataOpts,l=`animation-${r}`,o=i[l];if(o)return o;let c;if(n.options.animation!==!1){const u=this.chart.config,m=u.datasetAnimationScopeKeys(this._type,r),h=u.getOptionScopes(this.getDataset(),m);c=u.createResolver(h,this.getContext(e,a,r))}const d=new $N(n,c&&c.animations);return c&&c._cacheable&&(i[l]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||mh(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const a=this.resolveDataElementOptions(e,r),n=this._sharedOptions,i=this.getSharedOptions(a),l=this.includeOptions(r,i)||i!==n;return this.updateSharedOptions(i,r,a),{sharedOptions:i,includeOptions:l}}updateElement(e,r,a,n){mh(n)?Object.assign(e,a):this._resolveAnimations(r,n).update(e,a)}updateSharedOptions(e,r,a){e&&!mh(r)&&this._resolveAnimations(void 0,r).update(e,a)}_setStyle(e,r,a,n){e.active=n;const i=this.getStyle(r,n);this._resolveAnimations(r,a,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,a){this._setStyle(e,a,"active",!1)}setHoverStyle(e,r,a){this._setStyle(e,a,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,a=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const n=a.length,i=r.length,l=Math.min(i,n);l&&this.parse(0,l),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,r,a=!0){const n=this._cachedMeta,i=n.data,l=e+r;let o;const c=d=>{for(d.length+=r,o=d.length-1;o>=l;o--)d[o]=d[o-r]};for(c(i),o=e;o<l;++o)i[o]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,r),a&&this.updateElements(i,e,r,"reset")}updateElements(e,r,a,n){}_removeElements(e,r){const a=this._cachedMeta;if(this._parsing){const n=a._parsed.splice(e,r);a._stacked&&Vi(a,n)}a.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,a,n]=e;this[r](a,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const a=arguments.length-2;a&&this._sync(["_insertElements",e,a])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}oe(pn,"defaults",{}),oe(pn,"datasetElementType",null),oe(pn,"dataElementType",null);function RA(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let a=[];for(let n=0,i=r.length;n<i;n++)a=a.concat(r[n].controller.getAllParsedValues(t));t._cache.$bar=NN(a.sort((n,i)=>n-i))}return t._cache.$bar}function LA(t){const e=t.iScale,r=RA(e,t.type);let a=e._length,n,i,l,o;const c=()=>{l===32767||l===-32768||(lo(o)&&(a=Math.min(a,Math.abs(l-o)||a)),o=l)};for(n=0,i=r.length;n<i;++n)l=e.getPixelForValue(r[n]),c();for(o=void 0,n=0,i=e.ticks.length;n<i;++n)l=e.getPixelForTick(n),c();return a}function OA(t,e,r,a){const n=r.barThickness;let i,l;return Me(n)?(i=e.min*r.categoryPercentage,l=r.barPercentage):(i=n*a,l=1),{chunk:i/a,ratio:l,start:e.pixels[t]-i/2}}function FA(t,e,r,a){const n=e.pixels,i=n[t];let l=t>0?n[t-1]:null,o=t<n.length-1?n[t+1]:null;const c=r.categoryPercentage;l===null&&(l=i-(o===null?e.end-e.start:o-i)),o===null&&(o=i+i-l);const d=i-(i-Math.min(l,o))/2*c;return{chunk:Math.abs(o-l)/2*c/a,ratio:r.barPercentage,start:d}}function $A(t,e,r,a){const n=r.parse(t[0],a),i=r.parse(t[1],a),l=Math.min(n,i),o=Math.max(n,i);let c=l,d=o;Math.abs(l)>Math.abs(o)&&(c=o,d=l),e[r.axis]=d,e._custom={barStart:c,barEnd:d,start:n,end:i,min:l,max:o}}function BN(t,e,r,a){return Ke(t)?$A(t,e,r,a):e[r.axis]=r.parse(t,a),e}function db(t,e,r,a){const n=t.iScale,i=t.vScale,l=n.getLabels(),o=n===i,c=[];let d,u,m,h;for(d=r,u=r+a;d<u;++d)h=e[d],m={},m[n.axis]=o||n.parse(l[d],d),c.push(BN(h,m,i,d));return c}function hh(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function zA(t,e,r){return t!==0?xr(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function BA(t){let e,r,a,n,i;return t.horizontal?(e=t.base>t.x,r="left",a="right"):(e=t.base<t.y,r="bottom",a="top"),e?(n="end",i="start"):(n="start",i="end"),{start:r,end:a,reverse:e,top:n,bottom:i}}function VA(t,e,r,a){let n=e.borderSkipped;const i={};if(!n){t.borderSkipped=i;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:o,reverse:c,top:d,bottom:u}=BA(t);n==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===a?n=d:(r._bottom||0)===a?n=u:(i[ub(u,l,o,c)]=!0,n=d)),i[ub(n,l,o,c)]=!0,t.borderSkipped=i}function ub(t,e,r,a){return a?(t=UA(t,e,r),t=mb(t,r,e)):t=mb(t,e,r),t}function UA(t,e,r){return t===e?r:t===r?e:t}function mb(t,e,r){return t==="start"?e:t==="end"?r:t}function HA(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class ed extends pn{parsePrimitiveData(e,r,a,n){return db(e,r,a,n)}parseArrayData(e,r,a,n){return db(e,r,a,n)}parseObjectData(e,r,a,n){const{iScale:i,vScale:l}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?o:c,u=l.axis==="x"?o:c,m=[];let h,x,g,f;for(h=a,x=a+n;h<x;++h)f=r[h],g={},g[i.axis]=i.parse(kn(f,d),h),m.push(BN(kn(f,u),g,l,h));return m}updateRangeFromParsed(e,r,a,n){super.updateRangeFromParsed(e,r,a,n);const i=a._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:a,vScale:n}=r,i=this.getParsed(e),l=i._custom,o=hh(l)?"["+l.start+", "+l.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+a.getLabelForValue(i[a.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,a,n){const i=n==="reset",{index:l,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:m,includeOptions:h}=this._getSharedOptions(r,n);for(let x=r;x<r+a;x++){const g=this.getParsed(x),f=i||Me(g[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),y=this._calculateBarIndexPixels(x,u),p=(g._stacks||{})[o.axis],b={horizontal:d,base:f.base,enableBorderRadius:!p||hh(g._custom)||l===p._top||l===p._bottom,x:d?f.head:y.center,y:d?y.center:f.head,height:d?y.size:Math.abs(f.size),width:d?Math.abs(f.size):y.size};h&&(b.options=m||this.resolveDataElementOptions(x,e[x].active?"active":n));const v=b.options||e[x].options;VA(b,v,p,l),HA(b,v,u.ratio),this.updateElement(e[x],x,b,n)}}_getStacks(e,r){const{iScale:a}=this._cachedMeta,n=a.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=a.options.stacked,l=[],o=this._cachedMeta.controller.getParsed(r),c=o&&o[a.axis],d=u=>{const m=u._parsed.find(x=>x[a.axis]===c),h=m&&m[u.vScale.axis];if(Me(h)||isNaN(h))return!0};for(const u of n)if(!(r!==void 0&&d(u))&&((i===!1||l.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&l.push(u.stack),u.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(a=>e[a].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const a of this.chart.data.datasets)e[Se(this.chart.options.indexAxis==="x"?a.xAxisID:a.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,a){const n=this._getStacks(e,a),i=r!==void 0?n.indexOf(r):-1;return i===-1?n.length-1:i}_getRuler(){const e=this.options,r=this._cachedMeta,a=r.iScale,n=[];let i,l;for(i=0,l=r.data.length;i<l;++i)n.push(a.getPixelForValue(this.getParsed(i)[a.axis],i));const o=e.barThickness;return{min:o||LA(r),pixels:n,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:a,index:n},options:{base:i,minBarLength:l}}=this,o=i||0,c=this.getParsed(e),d=c._custom,u=hh(d);let m=c[r.axis],h=0,x=a?this.applyStack(r,c,a):m,g,f;x!==m&&(h=x-m,x=m),u&&(m=d.barStart,x=d.barEnd-d.barStart,m!==0&&xr(m)!==xr(d.barEnd)&&(h=0),h+=m);const y=!Me(i)&&!u?i:h;let p=r.getPixelForValue(y);if(this.chart.getDataVisibility(e)?g=r.getPixelForValue(h+x):g=p,f=g-p,Math.abs(f)<l){f=zA(f,r,o)*l,m===o&&(p-=f/2);const b=r.getPixelForDecimal(0),v=r.getPixelForDecimal(1),w=Math.min(b,v),N=Math.max(b,v);p=Math.max(Math.min(p,N),w),g=p+f,a&&!u&&(c._stacks[r.axis]._visualValues[n]=r.getValueForPixel(g)-r.getValueForPixel(p))}if(p===r.getPixelForValue(o)){const b=xr(f)*r.getLineWidthForValue(o)/2;p+=b,f-=b}return{size:f,base:p,head:g,center:g+f/2}}_calculateBarIndexPixels(e,r){const a=r.scale,n=this.options,i=n.skipNull,l=Se(n.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(r.grouped){const u=i?this._getStackCount(e):r.stackCount,m=n.barThickness==="flex"?FA(e,r,n,u*d):OA(e,r,n,u*d),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(Se(h,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+x;o=m.start+m.chunk*g+m.chunk/2,c=Math.min(l,m.chunk*m.ratio)}else o=a.getPixelForValue(this.getParsed(e)[a.axis],e),c=Math.min(l,r.min*r.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const e=this._cachedMeta,r=e.vScale,a=e.data,n=a.length;let i=0;for(;i<n;++i)this.getParsed(i)[r.axis]!==null&&!a[i].hidden&&a[i].draw(this._ctx)}}oe(ed,"id","bar"),oe(ed,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),oe(ed,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function WA(t,e,r){let a=1,n=1,i=0,l=0;if(e<Qe){const o=t,c=o+e,d=Math.cos(o),u=Math.sin(o),m=Math.cos(c),h=Math.sin(c),x=(v,w,N)=>co(v,o,c,!0)?1:Math.max(w,w*r,N,N*r),g=(v,w,N)=>co(v,o,c,!0)?-1:Math.min(w,w*r,N,N*r),f=x(0,d,m),y=x(ht,u,h),p=g(Ie,d,m),b=g(Ie+ht,u,h);a=(f-p)/2,n=(y-b)/2,i=-(f+p)/2,l=-(y+b)/2}return{ratioX:a,ratioY:n,offsetX:i,offsetY:l}}class el extends pn{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const a=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=a;else{let i=c=>+a[c];if(_e(a[e])){const{key:c="value"}=this._parsing;i=d=>+kn(a[d],c)}let l,o;for(l=e,o=e+r;l<o;++l)n._parsed[l]=i(l)}}_getRotation(){return or(this.options.rotation-90)}_getCircumference(){return or(this.options.circumference)}_getRotationExtents(){let e=Qe,r=-Qe;for(let a=0;a<this.chart.data.datasets.length;++a)if(this.chart.isDatasetVisible(a)&&this.chart.getDatasetMeta(a).type===this._type){const n=this.chart.getDatasetMeta(a).controller,i=n._getRotation(),l=n._getCircumference();e=Math.min(e,i),r=Math.max(r,i+l)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:a}=r,n=this._cachedMeta,i=n.data,l=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(a.width,a.height)-l)/2,0),c=Math.min(tT(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:m}=this._getRotationExtents(),{ratioX:h,ratioY:x,offsetX:g,offsetY:f}=WA(m,u,c),y=(a.width-l)/h,p=(a.height-l)/x,b=Math.max(Math.min(y,p)/2,0),v=fN(this.options.radius,b),w=Math.max(v*c,0),N=(v-w)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=f*v,n.total=this.calculateTotal(),this.outerRadius=v-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){const a=this.options,n=this._cachedMeta,i=this._getCircumference();return r&&a.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*i/Qe)}updateElements(e,r,a,n){const i=n==="reset",l=this.chart,o=l.chartArea,d=l.options.animation,u=(o.left+o.right)/2,m=(o.top+o.bottom)/2,h=i&&d.animateScale,x=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:f,includeOptions:y}=this._getSharedOptions(r,n);let p=this._getRotation(),b;for(b=0;b<r;++b)p+=this._circumference(b,i);for(b=r;b<r+a;++b){const v=this._circumference(b,i),w=e[b],N={x:u+this.offsetX,y:m+this.offsetY,startAngle:p,endAngle:p+v,circumference:v,outerRadius:g,innerRadius:x};y&&(N.options=f||this.resolveDataElementOptions(b,w.active?"active":n)),p+=v,this.updateElement(w,b,N,n)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let a=0,n;for(n=0;n<r.length;n++){const i=e._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!r[n].hidden&&(a+=Math.abs(i))}return a}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?Qe*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,a=this.chart,n=a.data.labels||[],i=nm(r._parsed[e],a.options.locale);return{label:n[e]||"",value:i}}getMaxBorderWidth(e){let r=0;const a=this.chart;let n,i,l,o,c;if(!e){for(n=0,i=a.data.datasets.length;n<i;++n)if(a.isDatasetVisible(n)){l=a.getDatasetMeta(n),e=l.data,o=l.controller;break}}if(!e)return 0;for(n=0,i=e.length;n<i;++n)c=o.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let a=0,n=e.length;a<n;++a){const i=this.resolveDataElementOptions(a);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let a=0;a<e;++a)this.chart.isDatasetVisible(a)&&(r+=this._getRingWeight(a));return r}_getRingWeight(e){return Math.max(Se(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}oe(el,"id","doughnut"),oe(el,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),oe(el,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),oe(el,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:a,color:n}}=e.legend.options;return r.labels.map((i,l)=>{const c=e.getDatasetMeta(0).controller.getStyle(l);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:a,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,r,a){a.chart.toggleDataVisibility(r.index),a.chart.update()}}}});class td extends pn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:a,data:n=[],_dataset:i}=r,l=this.chart._animationsDisabled;let{start:o,count:c}=bT(r,n,l);this._drawStart=o,this._drawCount=c,vT(r)&&(o=0,c=n.length),a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!i._decimated,a.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(a,void 0,{animated:!l,options:d},e),this.updateElements(n,o,c,e)}updateElements(e,r,a,n){const i=n==="reset",{iScale:l,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:m}=this._getSharedOptions(r,n),h=l.axis,x=o.axis,{spanGaps:g,segment:f}=this.options,y=oo(g)?g:Number.POSITIVE_INFINITY,p=this.chart._animationsDisabled||i||n==="none",b=r+a,v=e.length;let w=r>0&&this.getParsed(r-1);for(let N=0;N<v;++N){const S=e[N],k=p?S:{};if(N<r||N>=b){k.skip=!0;continue}const P=this.getParsed(N),_=Me(P[x]),L=k[h]=l.getPixelForValue(P[h],N),T=k[x]=i||_?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,P,c):P[x],N);k.skip=isNaN(L)||isNaN(T)||_,k.stop=N>0&&Math.abs(P[h]-w[h])>y,f&&(k.parsed=P,k.raw=d.data[N]),m&&(k.options=u||this.resolveDataElementOptions(N,S.active?"active":n)),p||this.updateElement(S,N,k,n),w=P}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,a=r.options&&r.options.borderWidth||0,n=e.data||[];if(!n.length)return a;const i=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(a,i,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}oe(td,"id","line"),oe(td,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),oe(td,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function La(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pg{constructor(e){oe(this,"options");this.options=e||{}}static override(e){Object.assign(pg.prototype,e)}init(){}formats(){return La()}parse(){return La()}format(){return La()}add(){return La()}diff(){return La()}startOf(){return La()}endOf(){return La()}}var qA={_date:pg};function YA(t,e,r,a){const{controller:n,data:i,_sorted:l}=t,o=n._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&l&&i.length){const d=o._reversePixels?xT:tn;if(a){if(n._sharedOptions){const u=i[0],m=typeof u.getRange=="function"&&u.getRange(e);if(m){const h=d(i,e,r-m),x=d(i,e,r+m);return{lo:h.lo,hi:x.hi}}}}else{const u=d(i,e,r);if(c){const{vScale:m}=n._cachedMeta,{_parsed:h}=t,x=h.slice(0,u.lo+1).reverse().findIndex(f=>!Me(f[m.axis]));u.lo-=Math.max(0,x);const g=h.slice(u.hi).findIndex(f=>!Me(f[m.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:i.length-1}}function Ao(t,e,r,a,n){const i=t.getSortedVisibleDatasetMetas(),l=r[e];for(let o=0,c=i.length;o<c;++o){const{index:d,data:u}=i[o],{lo:m,hi:h}=YA(i[o],e,l,n);for(let x=m;x<=h;++x){const g=u[x];g.skip||a(g,d,x)}}}function KA(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(a,n){const i=e?Math.abs(a.x-n.x):0,l=r?Math.abs(a.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function xh(t,e,r,a,n){const i=[];return!n&&!t.isPointInArea(e)||Ao(t,r,e,function(o,c,d){!n&&!Pr(o,t.chartArea,0)||o.inRange(e.x,e.y,a)&&i.push({element:o,datasetIndex:c,index:d})},!0),i}function XA(t,e,r,a){let n=[];function i(l,o,c){const{startAngle:d,endAngle:u}=l.getProps(["startAngle","endAngle"],a),{angle:m}=vN(l,{x:e.x,y:e.y});co(m,d,u)&&n.push({element:l,datasetIndex:o,index:c})}return Ao(t,r,e,i),n}function QA(t,e,r,a,n,i){let l=[];const o=KA(r);let c=Number.POSITIVE_INFINITY;function d(u,m,h){const x=u.inRange(e.x,e.y,n);if(a&&!x)return;const g=u.getCenterPoint(n);if(!(!!i||t.isPointInArea(g))&&!x)return;const y=o(e,g);y<c?(l=[{element:u,datasetIndex:m,index:h}],c=y):y===c&&l.push({element:u,datasetIndex:m,index:h})}return Ao(t,r,e,d),l}function ph(t,e,r,a,n,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!a?XA(t,e,r,n):QA(t,e,r,a,n,i)}function hb(t,e,r,a,n){const i=[],l=r==="x"?"inXRange":"inYRange";let o=!1;return Ao(t,r,e,(c,d,u)=>{c[l]&&c[l](e[r],n)&&(i.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(e.x,e.y,n))}),a&&!o?[]:i}var GA={evaluateInteractionItems:Ao,modes:{index(t,e,r,a){const n=Ua(e,t),i=r.axis||"x",l=r.includeInvisible||!1,o=r.intersect?xh(t,n,i,a,l):ph(t,n,i,!1,a,l),c=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,m=d.data[u];m&&!m.skip&&c.push({element:m,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,r,a){const n=Ua(e,t),i=r.axis||"xy",l=r.includeInvisible||!1;let o=r.intersect?xh(t,n,i,a,l):ph(t,n,i,!1,a,l);if(o.length>0){const c=o[0].datasetIndex,d=t.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(t,e,r,a){const n=Ua(e,t),i=r.axis||"xy",l=r.includeInvisible||!1;return xh(t,n,i,a,l)},nearest(t,e,r,a){const n=Ua(e,t),i=r.axis||"xy",l=r.includeInvisible||!1;return ph(t,n,i,r.intersect,a,l)},x(t,e,r,a){const n=Ua(e,t);return hb(t,n,"x",r.intersect,a)},y(t,e,r,a){const n=Ua(e,t);return hb(t,n,"y",r.intersect,a)}}};const VN=["left","top","right","bottom"];function Ui(t,e){return t.filter(r=>r.pos===e)}function xb(t,e){return t.filter(r=>VN.indexOf(r.pos)===-1&&r.box.axis===e)}function Hi(t,e){return t.sort((r,a)=>{const n=e?a:r,i=e?r:a;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function JA(t){const e=[];let r,a,n,i,l,o;for(r=0,a=(t||[]).length;r<a;++r)n=t[r],{position:i,options:{stack:l,stackWeight:o=1}}=n,e.push({index:r,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:l&&i+l,stackWeight:o});return e}function ZA(t){const e={};for(const r of t){const{stack:a,pos:n,stackWeight:i}=r;if(!a||!VN.includes(n))continue;const l=e[a]||(e[a]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return e}function eD(t,e){const r=ZA(t),{vBoxMaxWidth:a,hBoxMaxHeight:n}=e;let i,l,o;for(i=0,l=t.length;i<l;++i){o=t[i];const{fullSize:c}=o.box,d=r[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*a:c&&e.availableWidth,o.height=n):(o.width=a,o.height=u?u*n:c&&e.availableHeight)}return r}function tD(t){const e=JA(t),r=Hi(e.filter(d=>d.box.fullSize),!0),a=Hi(Ui(e,"left"),!0),n=Hi(Ui(e,"right")),i=Hi(Ui(e,"top"),!0),l=Hi(Ui(e,"bottom")),o=xb(e,"x"),c=xb(e,"y");return{fullSize:r,leftAndTop:a.concat(i),rightAndBottom:n.concat(c).concat(l).concat(o),chartArea:Ui(e,"chartArea"),vertical:a.concat(n).concat(c),horizontal:i.concat(l).concat(o)}}function pb(t,e,r,a){return Math.max(t[r],e[r])+Math.max(t[a],e[a])}function UN(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function sD(t,e,r,a){const{pos:n,box:i}=r,l=t.maxPadding;if(!_e(n)){r.size&&(t[n]-=r.size);const m=a[r.stack]||{size:0,count:1};m.size=Math.max(m.size,r.horizontal?i.height:i.width),r.size=m.size/m.count,t[n]+=r.size}i.getPadding&&UN(l,i.getPadding());const o=Math.max(0,e.outerWidth-pb(l,t,"left","right")),c=Math.max(0,e.outerHeight-pb(l,t,"top","bottom")),d=o!==t.w,u=c!==t.h;return t.w=o,t.h=c,r.horizontal?{same:d,other:u}:{same:u,other:d}}function rD(t){const e=t.maxPadding;function r(a){const n=Math.max(e[a]-t[a],0);return t[a]+=n,n}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function aD(t,e){const r=e.maxPadding;function a(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(l=>{i[l]=Math.max(e[l],r[l])}),i}return a(t?["left","right"]:["top","bottom"])}function tl(t,e,r,a){const n=[];let i,l,o,c,d,u;for(i=0,l=t.length,d=0;i<l;++i){o=t[i],c=o.box,c.update(o.width||e.w,o.height||e.h,aD(o.horizontal,e));const{same:m,other:h}=sD(e,r,o,a);d|=m&&n.length,u=u||h,c.fullSize||n.push(o)}return d&&tl(n,e,r,a)||u}function oc(t,e,r,a,n){t.top=r,t.left=e,t.right=e+a,t.bottom=r+n,t.width=a,t.height=n}function gb(t,e,r,a){const n=r.padding;let{x:i,y:l}=e;for(const o of t){const c=o.box,d=a[o.stack]||{count:1,placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const m=e.w*u,h=d.size||c.height;lo(d.start)&&(l=d.start),c.fullSize?oc(c,n.left,l,r.outerWidth-n.right-n.left,h):oc(c,e.left+d.placed,l,m,h),d.start=l,d.placed+=m,l=c.bottom}else{const m=e.h*u,h=d.size||c.width;lo(d.start)&&(i=d.start),c.fullSize?oc(c,i,n.top,h,r.outerHeight-n.bottom-n.top):oc(c,i,e.top+d.placed,h,m),d.start=i,d.placed+=m,i=c.right}}e.x=i,e.y=l}var As={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,a){if(!t)return;const n=qt(t.options.layout.padding),i=Math.max(e-n.width,0),l=Math.max(r-n.height,0),o=tD(t.boxes),c=o.vertical,d=o.horizontal;$e(t.boxes,f=>{typeof f.beforeLayout=="function"&&f.beforeLayout()});const u=c.reduce((f,y)=>y.box.options&&y.box.options.display===!1?f:f+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:r,padding:n,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/u,hBoxMaxHeight:l/2}),h=Object.assign({},n);UN(h,qt(a));const x=Object.assign({maxPadding:h,w:i,h:l,x:n.left,y:n.top},n),g=eD(c.concat(d),m);tl(o.fullSize,x,m,g),tl(c,x,m,g),tl(d,x,m,g)&&tl(c,x,m,g),rD(x),gb(o.leftAndTop,x,m,g),x.x+=x.w,x.y+=x.h,gb(o.rightAndBottom,x,m,g),t.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},$e(o.chartArea,f=>{const y=f.box;Object.assign(y,t.chartArea),y.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class HN{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,a){}removeEventListener(e,r,a){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,a,n){return r=Math.max(0,r||e.width),a=a||e.height,{width:r,height:Math.max(0,n?Math.floor(r/n):a)}}isAttached(e){return!0}updateConfig(e){}}class nD extends HN{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const sd="$chartjs",iD={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fb=t=>t===null||t==="";function lD(t,e){const r=t.style,a=t.getAttribute("height"),n=t.getAttribute("width");if(t[sd]={initial:{height:a,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",fb(n)){const i=eb(t,"width");i!==void 0&&(t.width=i)}if(fb(a))if(t.style.height==="")t.height=t.width/(e||2);else{const i=eb(t,"height");i!==void 0&&(t.height=i)}return t}const WN=cA?{passive:!0}:!1;function oD(t,e,r){t&&t.addEventListener(e,r,WN)}function cD(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,WN)}function dD(t,e){const r=iD[t.type]||t.type,{x:a,y:n}=Ua(t,e);return{type:r,chart:e,native:t,x:a!==void 0?a:null,y:n!==void 0?n:null}}function ru(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function uD(t,e,r){const a=t.canvas,n=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||ru(o.addedNodes,a),l=l&&!ru(o.removedNodes,a);l&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function mD(t,e,r){const a=t.canvas,n=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||ru(o.removedNodes,a),l=l&&!ru(o.addedNodes,a);l&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const mo=new Map;let yb=0;function qN(){const t=window.devicePixelRatio;t!==yb&&(yb=t,mo.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function hD(t,e){mo.size||window.addEventListener("resize",qN),mo.set(t,e)}function xD(t){mo.delete(t),mo.size||window.removeEventListener("resize",qN)}function pD(t,e,r){const a=t.canvas,n=a&&xg(a);if(!n)return;const i=SN((o,c)=>{const d=n.clientWidth;r(o,c),d<n.clientWidth&&r()},window),l=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return l.observe(n),hD(t,i),l}function gh(t,e,r){r&&r.disconnect(),e==="resize"&&xD(t)}function gD(t,e,r){const a=t.canvas,n=SN(i=>{t.ctx!==null&&r(dD(i,t))},t);return oD(a,e,n),n}class fD extends HN{acquireContext(e,r){const a=e&&e.getContext&&e.getContext("2d");return a&&a.canvas===e?(lD(e,r),a):null}releaseContext(e){const r=e.canvas;if(!r[sd])return!1;const a=r[sd].initial;["height","width"].forEach(i=>{const l=a[i];Me(l)?r.removeAttribute(i):r.setAttribute(i,l)});const n=a.style||{};return Object.keys(n).forEach(i=>{r.style[i]=n[i]}),r.width=r.width,delete r[sd],!0}addEventListener(e,r,a){this.removeEventListener(e,r);const n=e.$proxies||(e.$proxies={}),l={attach:uD,detach:mD,resize:pD}[r]||gD;n[r]=l(e,r,a)}removeEventListener(e,r){const a=e.$proxies||(e.$proxies={}),n=a[r];if(!n)return;({attach:gh,detach:gh,resize:gh}[r]||cD)(e,r,n),a[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,a,n){return oA(e,r,a,n)}isAttached(e){const r=e&&xg(e);return!!(r&&r.isConnected)}}function yD(t){return!hg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?nD:fD}class Qs{constructor(){oe(this,"x");oe(this,"y");oe(this,"active",!1);oe(this,"options");oe(this,"$animations")}tooltipPosition(e){const{x:r,y:a}=this.getProps(["x","y"],e);return{x:r,y:a}}hasValue(){return oo(this.x)&&oo(this.y)}getProps(e,r){const a=this.$animations;if(!r||!a)return this;const n={};return e.forEach(i=>{n[i]=a[i]&&a[i].active()?a[i]._to:this[i]}),n}}oe(Qs,"defaults",{}),oe(Qs,"defaultRoutes");function bD(t,e){const r=t.options.ticks,a=vD(t),n=Math.min(r.maxTicksLimit||a,a),i=r.major.enabled?ND(e):[],l=i.length,o=i[0],c=i[l-1],d=[];if(l>n)return wD(e,d,i,l/n),d;const u=jD(i,e,n);if(l>0){let m,h;const x=l>1?Math.round((c-o)/(l-1)):null;for(cc(e,d,u,Me(x)?0:o-x,o),m=0,h=l-1;m<h;m++)cc(e,d,u,i[m],i[m+1]);return cc(e,d,u,c,Me(x)?e.length:c+x),d}return cc(e,d,u),d}function vD(t){const e=t.options.offset,r=t._tickSize(),a=t._length/r+(e?0:1),n=t._maxLength/r;return Math.floor(Math.min(a,n))}function jD(t,e,r){const a=SD(t),n=e.length/r;if(!a)return Math.max(n,1);const i=cT(a);for(let l=0,o=i.length-1;l<o;l++){const c=i[l];if(c>n)return c}return Math.max(n,1)}function ND(t){const e=[];let r,a;for(r=0,a=t.length;r<a;r++)t[r].major&&e.push(r);return e}function wD(t,e,r,a){let n=0,i=r[0],l;for(a=Math.ceil(a),l=0;l<t.length;l++)l===i&&(e.push(t[l]),n++,i=r[n*a])}function cc(t,e,r,a,n){const i=Se(a,0),l=Math.min(Se(n,t.length),t.length);let o=0,c,d,u;for(r=Math.ceil(r),n&&(c=n-a,r=c/Math.floor(c/r)),u=i;u<0;)o++,u=Math.round(i+o*r);for(d=Math.max(i,0);d<l;d++)d===u&&(e.push(t[d]),o++,u=Math.round(i+o*r))}function SD(t){const e=t.length;let r,a;if(e<2)return!1;for(a=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==a)return!1;return a}const CD=t=>t==="left"?"right":t==="right"?"left":t,bb=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,vb=(t,e)=>Math.min(e||t,t);function jb(t,e){const r=[],a=t.length/e,n=t.length;let i=0;for(;i<n;i+=a)r.push(t[Math.floor(i)]);return r}function kD(t,e,r){const a=t.ticks.length,n=Math.min(e,a-1),i=t._startPixel,l=t._endPixel,o=1e-6;let c=t.getPixelForTick(n),d;if(!(r&&(a===1?d=Math.max(c-i,l-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(n-1))/2,c+=n<e?d:-d,c<i-o||c>l+o)))return c}function _D(t,e){$e(t,r=>{const a=r.gc,n=a.length/2;let i;if(n>e){for(i=0;i<n;++i)delete r.data[a[i]];a.splice(0,n)}})}function Wi(t){return t.drawTicks?t.tickLength:0}function Nb(t,e){if(!t.display)return 0;const r=Nt(t.font,e),a=qt(t.padding);return(Ke(t.text)?t.text.length:1)*r.lineHeight+a.height}function PD(t,e){return Ma(t,{scale:e,type:"scale"})}function TD(t,e,r){return Ma(t,{tick:r,index:e,type:"tick"})}function AD(t,e,r){let a=lg(t);return(r&&e!=="right"||!r&&e==="right")&&(a=CD(a)),a}function DD(t,e,r,a){const{top:n,left:i,bottom:l,right:o,chart:c}=t,{chartArea:d,scales:u}=c;let m=0,h,x,g;const f=l-n,y=o-i;if(t.isHorizontal()){if(x=$t(a,i,o),_e(r)){const p=Object.keys(r)[0],b=r[p];g=u[p].getPixelForValue(b)+f-e}else r==="center"?g=(d.bottom+d.top)/2+f-e:g=bb(t,r,e);h=o-i}else{if(_e(r)){const p=Object.keys(r)[0],b=r[p];x=u[p].getPixelForValue(b)-y+e}else r==="center"?x=(d.left+d.right)/2-y+e:x=bb(t,r,e);g=$t(a,l,n),m=r==="left"?-ht:ht}return{titleX:x,titleY:g,maxWidth:h,rotation:m}}class In extends Qs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:a,_suggestedMax:n}=this;return e=gs(e,Number.POSITIVE_INFINITY),r=gs(r,Number.NEGATIVE_INFINITY),a=gs(a,Number.POSITIVE_INFINITY),n=gs(n,Number.NEGATIVE_INFINITY),{min:gs(e,a),max:gs(r,n),minDefined:ot(e),maxDefined:ot(r)}}getMinMax(e){let{min:r,max:a,minDefined:n,maxDefined:i}=this.getUserBounds(),l;if(n&&i)return{min:r,max:a};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)l=o[c].controller.getMinMax(this,e),n||(r=Math.min(r,l.min)),i||(a=Math.max(a,l.max));return r=i&&r>a?a:r,a=n&&r>a?r:a,{min:gs(r,gs(a,r)),max:gs(a,gs(r,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){We(this.options.beforeUpdate,[this])}update(e,r,a){const{beginAtZero:n,grace:i,ticks:l}=this.options,o=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zT(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?jb(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=bD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,a;this.isHorizontal()?(r=this.left,a=this.right):(r=this.top,a=this.bottom,e=!e),this._startPixel=r,this._endPixel=a,this._reversePixels=e,this._length=a-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){We(this.options.afterUpdate,[this])}beforeSetDimensions(){We(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){We(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),We(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){We(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let a,n,i;for(a=0,n=e.length;a<n;a++)i=e[a],i.label=We(r.callback,[i.value,a,e],this)}afterTickToLabelConversion(){We(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){We(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,a=vb(this.ticks.length,e.ticks.maxTicksLimit),n=r.minRotation||0,i=r.maxRotation;let l=n,o,c,d;if(!this._isVisible()||!r.display||n>=i||a<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),m=u.widest.width,h=u.highest.height,x=Ht(this.chart.width-m,0,this.maxWidth);o=e.offset?this.maxWidth/a:x/(a-1),m+6>o&&(o=x/(a-(e.offset?.5:1)),c=this.maxHeight-Wi(e.grid)-r.padding-Nb(e.title,this.chart.options.font),d=Math.sqrt(m*m+h*h),l=ng(Math.min(Math.asin(Ht((u.highest.height+6)/o,-1,1)),Math.asin(Ht(c/d,-1,1))-Math.asin(Ht(h/d,-1,1)))),l=Math.max(n,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){We(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){We(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:a,title:n,grid:i}}=this,l=this._isVisible(),o=this.isHorizontal();if(l){const c=Nb(n,r.options.font);if(o?(e.width=this.maxWidth,e.height=Wi(i)+c):(e.height=this.maxHeight,e.width=Wi(i)+c),a.display&&this.ticks.length){const{first:d,last:u,widest:m,highest:h}=this._getLabelSizes(),x=a.padding*2,g=or(this.labelRotation),f=Math.cos(g),y=Math.sin(g);if(o){const p=a.mirror?0:y*m.width+f*h.height;e.height=Math.min(this.maxHeight,e.height+p+x)}else{const p=a.mirror?0:f*m.width+y*h.height;e.width=Math.min(this.maxWidth,e.width+p+x)}this._calculatePadding(d,u,y,f)}}this._handleMargins(),o?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,a,n){const{ticks:{align:i,padding:l},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,x=0;c?d?(h=n*e.width,x=a*r.height):(h=a*e.height,x=n*r.width):i==="start"?x=r.width:i==="end"?h=e.width:i!=="inner"&&(h=e.width/2,x=r.width/2),this.paddingLeft=Math.max((h-u+l)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-m+l)*this.width/(this.width-m),0)}else{let u=r.height/2,m=e.height/2;i==="start"?(u=0,m=e.height):i==="end"&&(u=r.height,m=0),this.paddingTop=u+l,this.paddingBottom=m+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){We(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,a;for(r=0,a=e.length;r<a;r++)Me(e[r].label)&&(e.splice(r,1),a--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let a=this.ticks;r<a.length&&(a=jb(a,r)),this._labelSizes=e=this._computeLabelSizes(a,a.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,a){const{ctx:n,_longestTextCache:i}=this,l=[],o=[],c=Math.floor(r/vb(r,a));let d=0,u=0,m,h,x,g,f,y,p,b,v,w,N;for(m=0;m<r;m+=c){if(g=e[m].label,f=this._resolveTickFontOptions(m),n.font=y=f.string,p=i[y]=i[y]||{data:{},gc:[]},b=f.lineHeight,v=w=0,!Me(g)&&!Ke(g))v=tu(n,p.data,p.gc,v,g),w=b;else if(Ke(g))for(h=0,x=g.length;h<x;++h)N=g[h],!Me(N)&&!Ke(N)&&(v=tu(n,p.data,p.gc,v,N),w+=b);l.push(v),o.push(w),d=Math.max(v,d),u=Math.max(w,u)}_D(i,r);const S=l.indexOf(d),k=o.indexOf(u),P=_=>({width:l[_]||0,height:o[_]||0});return{first:P(0),last:P(r-1),widest:P(S),highest:P(k),widths:l,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return hT(this._alignToPixels?Ra(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const a=r[e];return a.$context||(a.$context=TD(this.getContext(),e,a))}return this.$context||(this.$context=PD(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=or(this.labelRotation),a=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),i=this._getLabelSizes(),l=e.autoSkipPadding||0,o=i?i.widest.width+l:0,c=i?i.highest.height+l:0;return this.isHorizontal()?c*a>o*n?o/a:c/n:c*n<o*a?c/a:o/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,a=this.chart,n=this.options,{grid:i,position:l,border:o}=n,c=i.offset,d=this.isHorizontal(),m=this.ticks.length+(c?1:0),h=Wi(i),x=[],g=o.setContext(this.getContext()),f=g.display?g.width:0,y=f/2,p=function(V){return Ra(a,V,f)};let b,v,w,N,S,k,P,_,L,T,U,H;if(l==="top")b=p(this.bottom),k=this.bottom-h,_=b-y,T=p(e.top)+y,H=e.bottom;else if(l==="bottom")b=p(this.top),T=e.top,H=p(e.bottom)-y,k=b+y,_=this.top+h;else if(l==="left")b=p(this.right),S=this.right-h,P=b-y,L=p(e.left)+y,U=e.right;else if(l==="right")b=p(this.left),L=e.left,U=p(e.right)-y,S=b+y,P=this.left+h;else if(r==="x"){if(l==="center")b=p((e.top+e.bottom)/2+.5);else if(_e(l)){const V=Object.keys(l)[0],G=l[V];b=p(this.chart.scales[V].getPixelForValue(G))}T=e.top,H=e.bottom,k=b+y,_=k+h}else if(r==="y"){if(l==="center")b=p((e.left+e.right)/2);else if(_e(l)){const V=Object.keys(l)[0],G=l[V];b=p(this.chart.scales[V].getPixelForValue(G))}S=b-y,P=S-h,L=e.left,U=e.right}const W=Se(n.ticks.maxTicksLimit,m),J=Math.max(1,Math.ceil(m/W));for(v=0;v<m;v+=J){const V=this.getContext(v),G=i.setContext(V),M=o.setContext(V),z=G.lineWidth,D=G.color,X=M.dash||[],F=M.dashOffset,ie=G.tickWidth,ye=G.tickColor,fe=G.tickBorderDash||[],pe=G.tickBorderDashOffset;w=kD(this,v,c),w!==void 0&&(N=Ra(a,w,z),d?S=P=L=U=N:k=_=T=H=N,x.push({tx1:S,ty1:k,tx2:P,ty2:_,x1:L,y1:T,x2:U,y2:H,width:z,color:D,borderDash:X,borderDashOffset:F,tickWidth:ie,tickColor:ye,tickBorderDash:fe,tickBorderDashOffset:pe}))}return this._ticksLength=m,this._borderValue=b,x}_computeLabelItems(e){const r=this.axis,a=this.options,{position:n,ticks:i}=a,l=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:m}=i,h=Wi(a.grid),x=h+u,g=m?-u:x,f=-or(this.labelRotation),y=[];let p,b,v,w,N,S,k,P,_,L,T,U,H="middle";if(n==="top")S=this.bottom-g,k=this._getXAxisLabelAlignment();else if(n==="bottom")S=this.top+g,k=this._getXAxisLabelAlignment();else if(n==="left"){const J=this._getYAxisLabelAlignment(h);k=J.textAlign,N=J.x}else if(n==="right"){const J=this._getYAxisLabelAlignment(h);k=J.textAlign,N=J.x}else if(r==="x"){if(n==="center")S=(e.top+e.bottom)/2+x;else if(_e(n)){const J=Object.keys(n)[0],V=n[J];S=this.chart.scales[J].getPixelForValue(V)+x}k=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")N=(e.left+e.right)/2-x;else if(_e(n)){const J=Object.keys(n)[0],V=n[J];N=this.chart.scales[J].getPixelForValue(V)}k=this._getYAxisLabelAlignment(h).textAlign}r==="y"&&(c==="start"?H="top":c==="end"&&(H="bottom"));const W=this._getLabelSizes();for(p=0,b=o.length;p<b;++p){v=o[p],w=v.label;const J=i.setContext(this.getContext(p));P=this.getPixelForTick(p)+i.labelOffset,_=this._resolveTickFontOptions(p),L=_.lineHeight,T=Ke(w)?w.length:1;const V=T/2,G=J.color,M=J.textStrokeColor,z=J.textStrokeWidth;let D=k;l?(N=P,k==="inner"&&(p===b-1?D=this.options.reverse?"left":"right":p===0?D=this.options.reverse?"right":"left":D="center"),n==="top"?d==="near"||f!==0?U=-T*L+L/2:d==="center"?U=-W.highest.height/2-V*L+L:U=-W.highest.height+L/2:d==="near"||f!==0?U=L/2:d==="center"?U=W.highest.height/2-V*L:U=W.highest.height-T*L,m&&(U*=-1),f!==0&&!J.showLabelBackdrop&&(N+=L/2*Math.sin(f))):(S=P,U=(1-T)*L/2);let X;if(J.showLabelBackdrop){const F=qt(J.backdropPadding),ie=W.heights[p],ye=W.widths[p];let fe=U-F.top,pe=0-F.left;switch(H){case"middle":fe-=ie/2;break;case"bottom":fe-=ie;break}switch(k){case"center":pe-=ye/2;break;case"right":pe-=ye;break;case"inner":p===b-1?pe-=ye:p>0&&(pe-=ye/2);break}X={left:pe,top:fe,width:ye+F.width,height:ie+F.height,color:J.backdropColor}}y.push({label:w,font:_,textOffset:U,options:{rotation:f,color:G,strokeColor:M,strokeWidth:z,textAlign:D,textBaseline:H,translation:[N,S],backdrop:X}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-or(this.labelRotation))return e==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:a,mirror:n,padding:i}}=this.options,l=this._getLabelSizes(),o=e+i,c=l.widest.width;let d,u;return r==="left"?n?(u=this.right+i,a==="near"?d="left":a==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,a==="near"?d="right":a==="center"?(d="center",u-=c/2):(d="left",u=this.left)):r==="right"?n?(u=this.left+i,a==="near"?d="right":a==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,a==="near"?d="left":a==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:a,top:n,width:i,height:l}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(a,n,i,l),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const r=this.options.grid,a=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,l;const o=(c,d,u)=>{!u.width||!u.color||(a.save(),a.lineWidth=u.width,a.strokeStyle=u.color,a.setLineDash(u.borderDash||[]),a.lineDashOffset=u.borderDashOffset,a.beginPath(),a.moveTo(c.x,c.y),a.lineTo(d.x,d.y),a.stroke(),a.restore())};if(r.display)for(i=0,l=n.length;i<l;++i){const c=n[i];r.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:a,grid:n}}=this,i=a.setContext(this.getContext()),l=a.display?i.width:0;if(!l)return;const o=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,m,h;this.isHorizontal()?(d=Ra(e,this.left,l)-l/2,u=Ra(e,this.right,o)+o/2,m=h=c):(m=Ra(e,this.top,l)-l/2,h=Ra(e,this.bottom,o)+o/2,d=u=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(d,m),r.lineTo(u,h),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const a=this.ctx,n=this._computeLabelArea();n&&lm(a,n);const i=this.getLabelItems(e);for(const l of i){const o=l.options,c=l.font,d=l.label,u=l.textOffset;Pn(a,d,0,u,c,o)}n&&om(a)}drawTitle(){const{ctx:e,options:{position:r,title:a,reverse:n}}=this;if(!a.display)return;const i=Nt(a.font),l=qt(a.padding),o=a.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||_e(r)?(c+=l.bottom,Ke(a.text)&&(c+=i.lineHeight*(a.text.length-1))):c+=l.top;const{titleX:d,titleY:u,maxWidth:m,rotation:h}=DD(this,c,r,o);Pn(e,a.text,0,0,i,{color:a.color,maxWidth:m,rotation:h,textAlign:AD(o,r,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,a=Se(e.grid&&e.grid.z,-1),n=Se(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==In.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:a,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",n=[];let i,l;for(i=0,l=r.length;i<l;++i){const o=r[i];o[a]===this.id&&(!e||o.type===e)&&n.push(o)}return n}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return Nt(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dc{constructor(e,r,a){this.type=e,this.scope=r,this.override=a,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let a;ID(r)&&(a=this.register(r));const n=this.items,i=e.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,MD(e,l,a),this.override&&ct.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const r=this.items,a=e.id,n=this.scope;a in r&&delete r[a],n&&a in ct[n]&&(delete ct[n][a],this.override&&delete _n[a])}}function MD(t,e,r){const a=io(Object.create(null),[r?ct.get(r):{},ct.get(e),t.defaults]);ct.set(e,a),t.defaultRoutes&&ED(e,t.defaultRoutes),t.descriptors&&ct.describe(e,t.descriptors)}function ED(t,e){Object.keys(e).forEach(r=>{const a=r.split("."),n=a.pop(),i=[t].concat(a).join("."),l=e[r].split("."),o=l.pop(),c=l.join(".");ct.route(i,n,c,o)})}function ID(t){return"id"in t&&"defaults"in t}class RD{constructor(){this.controllers=new dc(pn,"datasets",!0),this.elements=new dc(Qs,"elements"),this.plugins=new dc(Object,"plugins"),this.scales=new dc(In,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,a){[...r].forEach(n=>{const i=a||this._getRegistryForType(n);a||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):$e(n,l=>{const o=a||this._getRegistryForType(l);this._exec(e,o,l)})})}_exec(e,r,a){const n=ag(e);We(a["before"+n],[],a),r[e](a),We(a["after"+n],[],a)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const a=this._typedRegistries[r];if(a.isForType(e))return a}return this.plugins}_get(e,r,a){const n=r.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+a+".");return n}}var nr=new RD;class LD{constructor(){this._init=[]}notify(e,r,a,n){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=n?this._descriptors(e).filter(n):this._descriptors(e),l=this._notify(i,e,r,a);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,r,a,n){n=n||{};for(const i of e){const l=i.plugin,o=l[a],c=[r,n,i.options];if(We(o,c,l)===!1&&n.cancelable)return!1}return!0}invalidate(){Me(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const a=e&&e.config,n=Se(a.options&&a.options.plugins,{}),i=OD(a);return n===!1&&!r?[]:$D(e,i,n,r)}_notifyStateChanges(e){const r=this._oldCache||[],a=this._cache,n=(i,l)=>i.filter(o=>!l.some(c=>o.plugin.id===c.plugin.id));this._notify(n(r,a),e,"stop"),this._notify(n(a,r),e,"start")}}function OD(t){const e={},r=[],a=Object.keys(nr.plugins.items);for(let i=0;i<a.length;i++)r.push(nr.getPlugin(a[i]));const n=t.plugins||[];for(let i=0;i<n.length;i++){const l=n[i];r.indexOf(l)===-1&&(r.push(l),e[l.id]=!0)}return{plugins:r,localIds:e}}function FD(t,e){return!e&&t===!1?null:t===!0?{}:t}function $D(t,{plugins:e,localIds:r},a,n){const i=[],l=t.getContext();for(const o of e){const c=o.id,d=FD(a[c],n);d!==null&&i.push({plugin:o,options:zD(t.config,{plugin:o,local:r[c]},d,l)})}return i}function zD(t,{plugin:e,local:r},a,n){const i=t.pluginScopeKeys(e),l=t.getOptionScopes(a,i);return r&&e.defaults&&l.push(e.defaults),t.createResolver(l,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xx(t,e){const r=ct.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function BD(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function VD(t,e){return t===e?"_index_":"_value_"}function wb(t){if(t==="x"||t==="y"||t==="r")return t}function UD(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function px(t,...e){if(wb(t))return t;for(const r of e){const a=r.axis||UD(r.position)||t.length>1&&wb(t[0].toLowerCase());if(a)return a}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Sb(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function HD(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(a=>a.xAxisID===t||a.yAxisID===t);if(r.length)return Sb(t,"x",r[0])||Sb(t,"y",r[0])}return{}}function WD(t,e){const r=_n[t.type]||{scales:{}},a=e.scales||{},n=xx(t.type,e),i=Object.create(null);return Object.keys(a).forEach(l=>{const o=a[l];if(!_e(o))return console.error(`Invalid scale configuration for scale: ${l}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const c=px(l,o,HD(l,t),ct.scales[o.type]),d=VD(c,n),u=r.scales||{};i[l]=wl(Object.create(null),[{axis:c},o,u[c],u[d]])}),t.data.datasets.forEach(l=>{const o=l.type||t.type,c=l.indexAxis||xx(o,e),u=(_n[o]||{}).scales||{};Object.keys(u).forEach(m=>{const h=BD(m,c),x=l[h+"AxisID"]||h;i[x]=i[x]||Object.create(null),wl(i[x],[{axis:h},a[x],u[m]])})}),Object.keys(i).forEach(l=>{const o=i[l];wl(o,[ct.scales[o.type],ct.scale])}),i}function YN(t){const e=t.options||(t.options={});e.plugins=Se(e.plugins,{}),e.scales=WD(t,e)}function KN(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function qD(t){return t=t||{},t.data=KN(t.data),YN(t),t}const Cb=new Map,XN=new Set;function uc(t,e){let r=Cb.get(t);return r||(r=e(),Cb.set(t,r),XN.add(r)),r}const qi=(t,e,r)=>{const a=kn(e,r);a!==void 0&&t.add(a)};class YD{constructor(e){this._config=qD(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=KN(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),YN(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return uc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return uc(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return uc(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,a=this.type;return uc(`${a}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const a=this._scopeCache;let n=a.get(e);return(!n||r)&&(n=new Map,a.set(e,n)),n}getOptionScopes(e,r,a){const{options:n,type:i}=this,l=this._cachedScopes(e,a),o=l.get(r);if(o)return o;const c=new Set;r.forEach(u=>{e&&(c.add(e),u.forEach(m=>qi(c,e,m))),u.forEach(m=>qi(c,n,m)),u.forEach(m=>qi(c,_n[i]||{},m)),u.forEach(m=>qi(c,ct,m)),u.forEach(m=>qi(c,mx,m))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),XN.has(r)&&l.set(r,d),d}chartOptionScopes(){const{options:e,type:r}=this;return[e,_n[r]||{},ct.datasets[r]||{},{type:r},ct,mx]}resolveNamedOptions(e,r,a,n=[""]){const i={$shared:!0},{resolver:l,subPrefixes:o}=kb(this._resolverCache,e,n);let c=l;if(XD(l,r)){i.$shared=!1,a=Ca(a)?a():a;const d=this.createResolver(e,a,o);c=Ni(l,a,d)}for(const d of r)i[d]=c[d];return i}createResolver(e,r,a=[""],n){const{resolver:i}=kb(this._resolverCache,e,a);return _e(r)?Ni(i,r,void 0,n):i}}function kb(t,e,r){let a=t.get(e);a||(a=new Map,t.set(e,a));const n=r.join();let i=a.get(n);return i||(i={resolver:dg(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},a.set(n,i)),i}const KD=t=>_e(t)&&Object.getOwnPropertyNames(t).some(e=>Ca(t[e]));function XD(t,e){const{isScriptable:r,isIndexable:a}=PN(t);for(const n of e){const i=r(n),l=a(n),o=(l||i)&&t[n];if(i&&(Ca(o)||KD(o))||l&&Ke(o))return!0}return!1}var QD="4.5.0";const GD=["top","bottom","left","right","chartArea"];function _b(t,e){return t==="top"||t==="bottom"||GD.indexOf(t)===-1&&e==="x"}function Pb(t,e){return function(r,a){return r[t]===a[t]?r[e]-a[e]:r[t]-a[t]}}function Tb(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),We(r&&r.onComplete,[t],e)}function JD(t){const e=t.chart,r=e.options.animation;We(r&&r.onProgress,[t],e)}function QN(t){return hg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const rd={},Ab=t=>{const e=QN(t);return Object.values(rd).filter(r=>r.canvas===e).pop()};function ZD(t,e,r){const a=Object.keys(t);for(const n of a){const i=+n;if(i>=e){const l=t[n];delete t[n],(r>0||i>e)&&(t[i+r]=l)}}}function eM(t,e,r,a){return!r||t.type==="mouseout"?null:a?e:t}var Ur;let Do=(Ur=class{static register(...e){nr.add(...e),Db()}static unregister(...e){nr.remove(...e),Db()}constructor(e,r){const a=this.config=new YD(r),n=QN(e),i=Ab(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||yD(n)),this.platform.updateConfig(a);const o=this.platform.acquireContext(n,l.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=eT(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=fT(m=>this.update(m),l.resizeDelay||0),this._dataChanges=[],rd[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}vr.listen(this,"complete",Tb),vr.listen(this,"progress",JD),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:a,height:n,_aspectRatio:i}=this;return Me(e)?r&&i?i:n?a/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return nr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Zy(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Qy(this.canvas,this.ctx),this}stop(){return vr.stop(this),this}resize(e,r){vr.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const a=this.options,n=this.canvas,i=a.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(n,e,r,i),o=a.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Zy(this,o,!0)&&(this.notifyPlugins("resize",{size:l}),We(a.onResize,[this,l],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};$e(r,(a,n)=>{a.id=n})}buildOrUpdateScales(){const e=this.options,r=e.scales,a=this.scales,n=Object.keys(a).reduce((l,o)=>(l[o]=!1,l),{});let i=[];r&&(i=i.concat(Object.keys(r).map(l=>{const o=r[l],c=px(l,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),$e(i,l=>{const o=l.options,c=o.id,d=px(c,o),u=Se(o.type,l.dtype);(o.position===void 0||_b(o.position,d)!==_b(l.dposition))&&(o.position=l.dposition),n[c]=!0;let m=null;if(c in a&&a[c].type===u)m=a[c];else{const h=nr.getScale(u);m=new h({id:c,type:u,ctx:this.ctx,chart:this}),a[m.id]=m}m.init(o,e)}),$e(n,(l,o)=>{l||delete a[o]}),$e(a,l=>{As.configure(this,l,l.options),As.addBox(this,l)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,a=e.length;if(e.sort((n,i)=>n.index-i.index),a>r){for(let n=r;n<a;++n)this._destroyDatasetMeta(n);e.splice(r,a-r)}this._sortedMetasets=e.slice(0).sort(Pb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((a,n)=>{r.filter(i=>i===a._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let a,n;for(this._removeUnreferencedMetasets(),a=0,n=r.length;a<n;a++){const i=r[a];let l=this.getDatasetMeta(a);const o=i.type||this.config.type;if(l.type&&l.type!==o&&(this._destroyDatasetMeta(a),l=this.getDatasetMeta(a)),l.type=o,l.indexAxis=i.indexAxis||xx(o,this.options),l.order=i.order||0,l.index=a,l.label=""+i.label,l.visible=this.isDatasetVisible(a),l.controller)l.controller.updateIndex(a),l.controller.linkScales();else{const c=nr.getController(o),{datasetElementType:d,dataElementType:u}=ct.datasets[o];Object.assign(c,{dataElementType:nr.getElement(u),datasetElementType:d&&nr.getElement(d)}),l.controller=new c(this,a),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){$e(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const a=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:m}=this.getDatasetMeta(d),h=!n&&i.indexOf(m)===-1;m.buildOrUpdateElements(h),l=Math.max(+m.getMaxOverflow(),l)}l=this._minPadding=a.layout.autoPadding?l:0,this._updateLayout(l),n||$e(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Pb("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){$e(this.scales,e=>{As.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),a=new Set(e.events);(!By(r,a)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:a,start:n,count:i}of r){const l=a==="_removeElements"?-i:i;ZD(e,n,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,a=i=>new Set(e.filter(l=>l[0]===i).map((l,o)=>o+","+l.splice(1).join(","))),n=a(0);for(let i=1;i<r;i++)if(!By(n,a(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;As.update(this,this.width,this.height,e);const r=this.chartArea,a=r.width<=0||r.height<=0;this._layers=[],$e(this.boxes,n=>{a&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,a=this.data.datasets.length;r<a;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,Ca(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const a=this.getDatasetMeta(e),n={meta:a,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(a.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vr.has(this)?this.attached&&!vr.running(this)&&vr.start(this):(this.draw(),Tb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:a,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,a=[];let n,i;for(n=0,i=r.length;n<i;++n){const l=r[n];(!e||l.visible)&&a.push(l)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,a={meta:e,index:e.index,cancelable:!0},n=FN(this,e);this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&lm(r,n),e.controller.draw(),n&&om(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return Pr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,a,n){const i=GA.modes[r];return typeof i=="function"?i(this,e,a,n):[]}getDatasetMeta(e){const r=this.data.datasets[e],a=this._metasets;let n=a.filter(i=>i&&i._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},a.push(n)),n}getContext(){return this.$context||(this.$context=Ma(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const a=this.getDatasetMeta(e);return typeof a.hidden=="boolean"?!a.hidden:!r.hidden}setDatasetVisibility(e,r){const a=this.getDatasetMeta(e);a.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,a){const n=a?"show":"hide",i=this.getDatasetMeta(e),l=i.controller._resolveAnimations(void 0,n);lo(r)?(i.data[r].hidden=!a,this.update()):(this.setDatasetVisibility(e,a),l.update(i,{visible:a}),this.update(o=>o.datasetIndex===e?n:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),vr.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Qy(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete rd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,a=(i,l)=>{r.addEventListener(this,i,l),e[i]=l},n=(i,l,o)=>{i.offsetX=l,i.offsetY=o,this._eventHandler(i)};$e(this.options.events,i=>a(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,a=(c,d)=>{r.addEventListener(this,c,d),e[c]=d},n=(c,d)=>{e[c]&&(r.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let l;const o=()=>{n("attach",o),this.attached=!0,this.resize(),a("resize",i),a("detach",l)};l=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),a("attach",o)},r.isAttached(this.canvas)?o():l()}unbindEvents(){$e(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},$e(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,a){const n=a?"set":"remove";let i,l,o,c;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){l=e[o];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[n+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],a=e.map(({datasetIndex:i,index:l})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[l],index:l}});!Jd(a,r)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,r))}notifyPlugins(e,r,a){return this._plugins.notify(this,e,r,a)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,a){const n=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(m=>u.datasetIndex===m.datasetIndex&&u.index===m.index)),l=i(r,e),o=a?e:i(e,r);l.length&&this.updateHoverStyle(l,n.mode,!1),o.length&&n.mode&&this.updateHoverStyle(o,n.mode,!0)}_eventHandler(e,r){const a={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},n=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",a,n)===!1)return;const i=this._handleEvent(e,r,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,n),(i||a.changed)&&this.render(),this}_handleEvent(e,r,a){const{_active:n=[],options:i}=this,l=r,o=this._getActiveElements(e,n,a,l),c=iT(e),d=eM(e,this._lastEvent,a,c);a&&(this._lastEvent=null,We(i.onHover,[e,o,this],this),c&&We(i.onClick,[e,o,this],this));const u=!Jd(o,n);return(u||r)&&(this._active=o,this._updateHoverStyles(o,n,r)),this._lastEvent=d,u}_getActiveElements(e,r,a,n){if(e.type==="mouseout")return[];if(!a)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}},oe(Ur,"defaults",ct),oe(Ur,"instances",rd),oe(Ur,"overrides",_n),oe(Ur,"registry",nr),oe(Ur,"version",QD),oe(Ur,"getChart",Ab),Ur);function Db(){return $e(Do.instances,t=>t._plugins.invalidate())}function tM(t,e,r){const{startAngle:a,x:n,y:i,outerRadius:l,innerRadius:o,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,m=Math.min(d/l,zt(a-r));if(t.beginPath(),t.arc(n,i,l-d/2,a+m/2,r-m/2),o>0){const h=Math.min(d/o,zt(a-r));t.arc(n,i,o+d/2,r-h/2,a+h/2,!0)}else{const h=Math.min(d/2,l*zt(a-r));if(u==="round")t.arc(n,i,h,r-Ie/2,a+Ie/2,!0);else if(u==="bevel"){const x=2*h*h,g=-x*Math.cos(r+Ie/2)+n,f=-x*Math.sin(r+Ie/2)+i,y=x*Math.cos(a+Ie/2)+n,p=x*Math.sin(a+Ie/2)+i;t.lineTo(g,f),t.lineTo(y,p)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function sM(t,e,r){const{startAngle:a,pixelMargin:n,x:i,y:l,outerRadius:o,innerRadius:c}=e;let d=n/o;t.beginPath(),t.arc(i,l,o,a-d,r+d),c>n?(d=n/c,t.arc(i,l,c,r+d,a-d,!0)):t.arc(i,l,n,r+ht,a-ht),t.closePath(),t.clip()}function rM(t){return cg(t,["outerStart","outerEnd","innerStart","innerEnd"])}function aM(t,e,r,a){const n=rM(t.options.borderRadius),i=(r-e)/2,l=Math.min(i,a*e/2),o=c=>{const d=(r-Math.min(i,c))*a/2;return Ht(c,0,Math.min(i,d))};return{outerStart:o(n.outerStart),outerEnd:o(n.outerEnd),innerStart:Ht(n.innerStart,0,l),innerEnd:Ht(n.innerEnd,0,l)}}function On(t,e,r,a){return{x:r+t*Math.cos(e),y:a+t*Math.sin(e)}}function au(t,e,r,a,n,i){const{x:l,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=e,m=Math.max(e.outerRadius+a+r-d,0),h=u>0?u+a+r+d:0;let x=0;const g=n-c;if(a){const J=u>0?u-a:0,V=m>0?m-a:0,G=(J+V)/2,M=G!==0?g*G/(G+a):g;x=(g-M)/2}const f=Math.max(.001,g*m-r/Ie)/m,y=(g-f)/2,p=c+y+x,b=n-y-x,{outerStart:v,outerEnd:w,innerStart:N,innerEnd:S}=aM(e,h,m,b-p),k=m-v,P=m-w,_=p+v/k,L=b-w/P,T=h+N,U=h+S,H=p+N/T,W=b-S/U;if(t.beginPath(),i){const J=(_+L)/2;if(t.arc(l,o,m,_,J),t.arc(l,o,m,J,L),w>0){const z=On(P,L,l,o);t.arc(z.x,z.y,w,L,b+ht)}const V=On(U,b,l,o);if(t.lineTo(V.x,V.y),S>0){const z=On(U,W,l,o);t.arc(z.x,z.y,S,b+ht,W+Math.PI)}const G=(b-S/h+(p+N/h))/2;if(t.arc(l,o,h,b-S/h,G,!0),t.arc(l,o,h,G,p+N/h,!0),N>0){const z=On(T,H,l,o);t.arc(z.x,z.y,N,H+Math.PI,p-ht)}const M=On(k,p,l,o);if(t.lineTo(M.x,M.y),v>0){const z=On(k,_,l,o);t.arc(z.x,z.y,v,p-ht,_)}}else{t.moveTo(l,o);const J=Math.cos(_)*m+l,V=Math.sin(_)*m+o;t.lineTo(J,V);const G=Math.cos(L)*m+l,M=Math.sin(L)*m+o;t.lineTo(G,M)}t.closePath()}function nM(t,e,r,a,n){const{fullCircles:i,startAngle:l,circumference:o}=e;let c=e.endAngle;if(i){au(t,e,r,a,c,n);for(let d=0;d<i;++d)t.fill();isNaN(o)||(c=l+(o%Qe||Qe))}return au(t,e,r,a,c,n),t.fill(),c}function iM(t,e,r,a,n){const{fullCircles:i,startAngle:l,circumference:o,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:m,borderDashOffset:h,borderRadius:x}=c,g=c.borderAlign==="inner";if(!d)return;t.setLineDash(m||[]),t.lineDashOffset=h,g?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let f=e.endAngle;if(i){au(t,e,r,a,f,n);for(let y=0;y<i;++y)t.stroke();isNaN(o)||(f=l+(o%Qe||Qe))}g&&sM(t,e,f),c.selfJoin&&f-l>=Ie&&x===0&&u!=="miter"&&tM(t,e,f),i||(au(t,e,r,a,f,n),t.stroke())}class Gn extends Qs{constructor(r){super();oe(this,"circumference");oe(this,"endAngle");oe(this,"fullCircles");oe(this,"innerRadius");oe(this,"outerRadius");oe(this,"pixelMargin");oe(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,a,n){const i=this.getProps(["x","y"],n),{angle:l,distance:o}=vN(i,{x:r,y:a}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:m,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),x=(this.options.spacing+this.options.borderWidth)/2,g=Se(h,d-c),f=co(l,c,d)&&c!==d,y=g>=Qe||f,p=_r(o,u+x,m+x);return y&&p}getCenterPoint(r){const{x:a,y:n,startAngle:i,endAngle:l,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:d,spacing:u}=this.options,m=(i+l)/2,h=(o+c+u+d)/2;return{x:a+Math.cos(m)*h,y:n+Math.sin(m)*h}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:a,circumference:n}=this,i=(a.offset||0)/4,l=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=n>Qe?Math.floor(n/Qe):0,n===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const c=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(Ie,n||0)),u=i*d;r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,nM(r,this,u,l,o),iM(r,this,u,l,o),r.restore()}}oe(Gn,"id","arc"),oe(Gn,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),oe(Gn,"defaultRoutes",{backgroundColor:"backgroundColor"}),oe(Gn,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function GN(t,e,r=e){t.lineCap=Se(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Se(r.borderDash,e.borderDash)),t.lineDashOffset=Se(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Se(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Se(r.borderWidth,e.borderWidth),t.strokeStyle=Se(r.borderColor,e.borderColor)}function lM(t,e,r){t.lineTo(r.x,r.y)}function oM(t){return t.stepped?DT:t.tension||t.cubicInterpolationMode==="monotone"?MT:lM}function JN(t,e,r={}){const a=t.length,{start:n=0,end:i=a-1}=r,{start:l,end:o}=e,c=Math.max(n,l),d=Math.min(i,o),u=n<l&&i<l||n>o&&i>o;return{count:a,start:c,loop:e.loop,ilen:d<c&&!u?a+d-c:d-c}}function cM(t,e,r,a){const{points:n,options:i}=e,{count:l,start:o,loop:c,ilen:d}=JN(n,r,a),u=oM(i);let{move:m=!0,reverse:h}=a||{},x,g,f;for(x=0;x<=d;++x)g=n[(o+(h?d-x:x))%l],!g.skip&&(m?(t.moveTo(g.x,g.y),m=!1):u(t,f,g,h,i.stepped),f=g);return c&&(g=n[(o+(h?d:0))%l],u(t,f,g,h,i.stepped)),!!c}function dM(t,e,r,a){const n=e.points,{count:i,start:l,ilen:o}=JN(n,r,a),{move:c=!0,reverse:d}=a||{};let u=0,m=0,h,x,g,f,y,p;const b=w=>(l+(d?o-w:w))%i,v=()=>{f!==y&&(t.lineTo(u,y),t.lineTo(u,f),t.lineTo(u,p))};for(c&&(x=n[b(0)],t.moveTo(x.x,x.y)),h=0;h<=o;++h){if(x=n[b(h)],x.skip)continue;const w=x.x,N=x.y,S=w|0;S===g?(N<f?f=N:N>y&&(y=N),u=(m*u+w)/++m):(v(),t.lineTo(w,N),g=S,m=0,f=y=N),p=N}v()}function gx(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?dM:cM}function uM(t){return t.stepped?dA:t.tension||t.cubicInterpolationMode==="monotone"?uA:Ha}function mM(t,e,r,a){let n=e._path;n||(n=e._path=new Path2D,e.path(n,r,a)&&n.closePath()),GN(t,e.options),t.stroke(n)}function hM(t,e,r,a){const{segments:n,options:i}=e,l=gx(e);for(const o of n)GN(t,i,o.style),t.beginPath(),l(t,e,o,{start:r,end:r+a-1})&&t.closePath(),t.stroke()}const xM=typeof Path2D=="function";function pM(t,e,r,a){xM&&!e.options.segment?mM(t,e,r,a):hM(t,e,r,a)}class Tr extends Qs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const a=this.options;if((a.tension||a.cubicInterpolationMode==="monotone")&&!a.stepped&&!this._pointsUpdated){const n=a.spanGaps?this._loop:this._fullLoop;sA(this._points,a,e,n,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=fA(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,a=e.length;return a&&r[e[a-1].end]}interpolate(e,r){const a=this.options,n=e[r],i=this.points,l=ON(this,{property:r,start:n,end:n});if(!l.length)return;const o=[],c=uM(a);let d,u;for(d=0,u=l.length;d<u;++d){const{start:m,end:h}=l[d],x=i[m],g=i[h];if(x===g){o.push(x);continue}const f=Math.abs((n-x[r])/(g[r]-x[r])),y=c(x,g,f,a.stepped);y[r]=e[r],o.push(y)}return o.length===1?o[0]:o}pathSegment(e,r,a){return gx(this)(e,this,r,a)}path(e,r,a){const n=this.segments,i=gx(this);let l=this._loop;r=r||0,a=a||this.points.length-r;for(const o of n)l&=i(e,this,o,{start:r,end:r+a-1});return!!l}draw(e,r,a,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),pM(e,this,a,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}oe(Tr,"id","line"),oe(Tr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),oe(Tr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),oe(Tr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Mb(t,e,r,a){const n=t.options,{[r]:i}=t.getProps([r],a);return Math.abs(e-i)<n.radius+n.hitRadius}class _l extends Qs{constructor(r){super();oe(this,"parsed");oe(this,"skip");oe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,a,n){const i=this.options,{x:l,y:o}=this.getProps(["x","y"],n);return Math.pow(r-l,2)+Math.pow(a-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,a){return Mb(this,r,"x",a)}inYRange(r,a){return Mb(this,r,"y",a)}getCenterPoint(r){const{x:a,y:n}=this.getProps(["x","y"],r);return{x:a,y:n}}size(r){r=r||this.options||{};let a=r.radius||0;a=Math.max(a,a&&r.hoverRadius||0);const n=a&&r.borderWidth||0;return(a+n)*2}draw(r,a){const n=this.options;this.skip||n.radius<.1||!Pr(this,a,this.size(n)/2)||(r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.fillStyle=n.backgroundColor,hx(r,n,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}oe(_l,"id","point"),oe(_l,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),oe(_l,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ZN(t,e){const{x:r,y:a,base:n,width:i,height:l}=t.getProps(["x","y","base","width","height"],e);let o,c,d,u,m;return t.horizontal?(m=l/2,o=Math.min(r,n),c=Math.max(r,n),d=a-m,u=a+m):(m=i/2,o=r-m,c=r+m,d=Math.min(a,n),u=Math.max(a,n)),{left:o,top:d,right:c,bottom:u}}function aa(t,e,r,a){return t?0:Ht(e,r,a)}function gM(t,e,r){const a=t.options.borderWidth,n=t.borderSkipped,i=_N(a);return{t:aa(n.top,i.top,0,r),r:aa(n.right,i.right,0,e),b:aa(n.bottom,i.bottom,0,r),l:aa(n.left,i.left,0,e)}}function fM(t,e,r){const{enableBorderRadius:a}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,i=hn(n),l=Math.min(e,r),o=t.borderSkipped,c=a||_e(n);return{topLeft:aa(!c||o.top||o.left,i.topLeft,0,l),topRight:aa(!c||o.top||o.right,i.topRight,0,l),bottomLeft:aa(!c||o.bottom||o.left,i.bottomLeft,0,l),bottomRight:aa(!c||o.bottom||o.right,i.bottomRight,0,l)}}function yM(t){const e=ZN(t),r=e.right-e.left,a=e.bottom-e.top,n=gM(t,r/2,a/2),i=fM(t,r/2,a/2);return{outer:{x:e.left,y:e.top,w:r,h:a,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:r-n.l-n.r,h:a-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function fh(t,e,r,a){const n=e===null,i=r===null,o=t&&!(n&&i)&&ZN(t,a);return o&&(n||_r(e,o.left,o.right))&&(i||_r(r,o.top,o.bottom))}function bM(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function vM(t,e){t.rect(e.x,e.y,e.w,e.h)}function yh(t,e,r={}){const a=t.x!==r.x?-e:0,n=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-a,l=(t.y+t.h!==r.y+r.h?e:0)-n;return{x:t.x+a,y:t.y+n,w:t.w+i,h:t.h+l,radius:t.radius}}class Pl extends Qs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:a,backgroundColor:n}}=this,{inner:i,outer:l}=yM(this),o=bM(l.radius)?uo:vM;e.save(),(l.w!==i.w||l.h!==i.h)&&(e.beginPath(),o(e,yh(l,r,i)),e.clip(),o(e,yh(i,-r,l)),e.fillStyle=a,e.fill("evenodd")),e.beginPath(),o(e,yh(i,r)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,r,a){return fh(this,e,r,a)}inXRange(e,r){return fh(this,e,null,r)}inYRange(e,r){return fh(this,null,e,r)}getCenterPoint(e){const{x:r,y:a,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+n)/2:r,y:i?a:(a+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}oe(Pl,"id","bar"),oe(Pl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),oe(Pl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function jM(t,e,r){const a=t.segments,n=t.points,i=e.points,l=[];for(const o of a){let{start:c,end:d}=o;d=dm(c,d,n);const u=fx(r,n[c],n[d],o.loop);if(!e.segments){l.push({source:o,target:u,start:n[c],end:n[d]});continue}const m=ON(e,u);for(const h of m){const x=fx(r,i[h.start],i[h.end],h.loop),g=LN(o,n,x);for(const f of g)l.push({source:f,target:h,start:{[r]:Eb(u,x,"start",Math.max)},end:{[r]:Eb(u,x,"end",Math.min)}})}}return l}function fx(t,e,r,a){if(a)return;let n=e[t],i=r[t];return t==="angle"&&(n=zt(n),i=zt(i)),{property:t,start:n,end:i}}function NM(t,e){const{x:r=null,y:a=null}=t||{},n=e.points,i=[];return e.segments.forEach(({start:l,end:o})=>{o=dm(l,o,n);const c=n[l],d=n[o];a!==null?(i.push({x:c.x,y:a}),i.push({x:d.x,y:a})):r!==null&&(i.push({x:r,y:c.y}),i.push({x:r,y:d.y}))}),i}function dm(t,e,r){for(;e>t;e--){const a=r[e];if(!isNaN(a.x)&&!isNaN(a.y))break}return e}function Eb(t,e,r,a){return t&&e?a(t[r],e[r]):t?t[r]:e?e[r]:0}function ew(t,e){let r=[],a=!1;return Ke(t)?(a=!0,r=t):r=NM(t,e),r.length?new Tr({points:r,options:{tension:0},_loop:a,_fullLoop:a}):null}function Ib(t){return t&&t.fill!==!1}function wM(t,e,r){let n=t[e].fill;const i=[e];let l;if(!r)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!ot(n))return n;if(l=t[n],!l)return!1;if(l.visible)return n;i.push(n),n=l.fill}return!1}function SM(t,e,r){const a=PM(t);if(_e(a))return isNaN(a.value)?!1:a;let n=parseFloat(a);return ot(n)&&Math.floor(n)===n?CM(a[0],e,n,r):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}function CM(t,e,r,a){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=a?!1:r}function kM(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:_e(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function _M(t,e,r){let a;return t==="start"?a=r:t==="end"?a=e.options.reverse?e.min:e.max:_e(t)?a=t.value:a=e.getBaseValue(),a}function PM(t){const e=t.options,r=e.fill;let a=Se(r&&r.target,r);return a===void 0&&(a=!!e.backgroundColor),a===!1||a===null?!1:a===!0?"origin":a}function TM(t){const{scale:e,index:r,line:a}=t,n=[],i=a.segments,l=a.points,o=AM(e,r);o.push(ew({x:null,y:e.bottom},a));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)DM(n,l[u],o)}return new Tr({points:n,options:{}})}function AM(t,e){const r=[],a=t.getMatchingVisibleMetas("line");for(let n=0;n<a.length;n++){const i=a[n];if(i.index===e)break;i.hidden||r.unshift(i.dataset)}return r}function DM(t,e,r){const a=[];for(let n=0;n<r.length;n++){const i=r[n],{first:l,last:o,point:c}=MM(i,e,"x");if(!(!c||l&&o)){if(l)a.unshift(c);else if(t.push(c),!o)break}}t.push(...a)}function MM(t,e,r){const a=t.interpolate(e,r);if(!a)return{};const n=a[r],i=t.segments,l=t.points;let o=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],m=l[u.start][r],h=l[u.end][r];if(_r(n,m,h)){o=n===m,c=n===h;break}}return{first:o,last:c,point:a}}class tw{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,a){const{x:n,y:i,radius:l}=this;return r=r||{start:0,end:Qe},e.arc(n,i,l,r.end,r.start,!0),!a.bounds}interpolate(e){const{x:r,y:a,radius:n}=this,i=e.angle;return{x:r+Math.cos(i)*n,y:a+Math.sin(i)*n,angle:i}}}function EM(t){const{chart:e,fill:r,line:a}=t;if(ot(r))return IM(e,r);if(r==="stack")return TM(t);if(r==="shape")return!0;const n=RM(t);return n instanceof tw?n:ew(n,a)}function IM(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function RM(t){return(t.scale||{}).getPointPositionForValue?OM(t):LM(t)}function LM(t){const{scale:e={},fill:r}=t,a=kM(r,e);if(ot(a)){const n=e.isHorizontal();return{x:n?a:null,y:n?null:a}}return null}function OM(t){const{scale:e,fill:r}=t,a=e.options,n=e.getLabels().length,i=a.reverse?e.max:e.min,l=_M(r,e,i),o=[];if(a.grid.circular){const c=e.getPointPositionForValue(0,i);return new tw({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(l)})}for(let c=0;c<n;++c)o.push(e.getPointPositionForValue(c,l));return o}function bh(t,e,r){const a=EM(e),{chart:n,index:i,line:l,scale:o,axis:c}=e,d=l.options,u=d.fill,m=d.backgroundColor,{above:h=m,below:x=m}=u||{},g=n.getDatasetMeta(i),f=FN(n,g);a&&l.points.length&&(lm(t,r),FM(t,{line:l,target:a,above:h,below:x,area:r,scale:o,axis:c,clip:f}),om(t))}function FM(t,e){const{line:r,target:a,above:n,below:i,area:l,scale:o,clip:c}=e,d=r._loop?"angle":e.axis;t.save();let u=i;i!==n&&(d==="x"?(Rb(t,a,l.top),vh(t,{line:r,target:a,color:n,scale:o,property:d,clip:c}),t.restore(),t.save(),Rb(t,a,l.bottom)):d==="y"&&(Lb(t,a,l.left),vh(t,{line:r,target:a,color:i,scale:o,property:d,clip:c}),t.restore(),t.save(),Lb(t,a,l.right),u=n)),vh(t,{line:r,target:a,color:u,scale:o,property:d,clip:c}),t.restore()}function Rb(t,e,r){const{segments:a,points:n}=e;let i=!0,l=!1;t.beginPath();for(const o of a){const{start:c,end:d}=o,u=n[c],m=n[dm(c,d,n)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,r),t.lineTo(u.x,u.y)),l=!!e.pathSegment(t,o,{move:l}),l?t.closePath():t.lineTo(m.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function Lb(t,e,r){const{segments:a,points:n}=e;let i=!0,l=!1;t.beginPath();for(const o of a){const{start:c,end:d}=o,u=n[c],m=n[dm(c,d,n)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(r,u.y),t.lineTo(u.x,u.y)),l=!!e.pathSegment(t,o,{move:l}),l?t.closePath():t.lineTo(r,m.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function vh(t,e){const{line:r,target:a,property:n,color:i,scale:l,clip:o}=e,c=jM(r,a,n);for(const{source:d,target:u,start:m,end:h}of c){const{style:{backgroundColor:x=i}={}}=d,g=a!==!0;t.save(),t.fillStyle=x,$M(t,l,o,g&&fx(n,m,h)),t.beginPath();const f=!!r.pathSegment(t,d);let y;if(g){f?t.closePath():Ob(t,a,h,n);const p=!!a.pathSegment(t,u,{move:f,reverse:!0});y=f&&p,y||Ob(t,a,m,n)}t.closePath(),t.fill(y?"evenodd":"nonzero"),t.restore()}}function $M(t,e,r,a){const n=e.chart.chartArea,{property:i,start:l,end:o}=a||{};if(i==="x"||i==="y"){let c,d,u,m;i==="x"?(c=l,d=n.top,u=o,m=n.bottom):(c=n.left,d=l,u=n.right,m=o),t.beginPath(),r&&(c=Math.max(c,r.left),u=Math.min(u,r.right),d=Math.max(d,r.top),m=Math.min(m,r.bottom)),t.rect(c,d,u-c,m-d),t.clip()}}function Ob(t,e,r,a){const n=e.interpolate(r,a);n&&t.lineTo(n.x,n.y)}var zM={id:"filler",afterDatasetsUpdate(t,e,r){const a=(t.data.datasets||[]).length,n=[];let i,l,o,c;for(l=0;l<a;++l)i=t.getDatasetMeta(l),o=i.dataset,c=null,o&&o.options&&o instanceof Tr&&(c={visible:t.isDatasetVisible(l),index:l,fill:SM(o,l,a),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=c,n.push(c);for(l=0;l<a;++l)c=n[l],!(!c||c.fill===!1)&&(c.fill=wM(n,l,r.propagate))},beforeDraw(t,e,r){const a=r.drawTime==="beforeDraw",n=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let l=n.length-1;l>=0;--l){const o=n[l].$filler;o&&(o.line.updateControlPoints(i,o.axis),a&&o.fill&&bh(t.ctx,o,i))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const a=t.getSortedVisibleDatasetMetas();for(let n=a.length-1;n>=0;--n){const i=a[n].$filler;Ib(i)&&bh(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,r){const a=e.meta.$filler;!Ib(a)||r.drawTime!=="beforeDatasetDraw"||bh(t.ctx,a,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Fb=(t,e)=>{let{boxHeight:r=e,boxWidth:a=e}=t;return t.usePointStyle&&(r=Math.min(r,e),a=t.pointStyleWidth||Math.min(a,e)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(e,r)}},BM=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class $b extends Qs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,a){this.maxWidth=e,this.maxHeight=r,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=We(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(a=>e.filter(a,this.chart.data))),e.sort&&(r=r.sort((a,n)=>e.sort(a,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const a=e.labels,n=Nt(a.font),i=n.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=Fb(a,i);let d,u;r.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(l,i,o,c)+10):(u=this.maxHeight,d=this._fitCols(l,n,o,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,r,a,n){const{ctx:i,maxWidth:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+o;let m=e;i.textAlign="left",i.textBaseline="middle";let h=-1,x=-u;return this.legendItems.forEach((g,f)=>{const y=a+r/2+i.measureText(g.text).width;(f===0||d[d.length-1]+y+2*o>l)&&(m+=u,d[d.length-(f>0?0:1)]=0,x+=u,h++),c[f]={left:0,top:x,row:h,width:y,height:n},d[d.length-1]+=y+o}),m}_fitCols(e,r,a,n){const{ctx:i,maxHeight:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=l-e;let m=o,h=0,x=0,g=0,f=0;return this.legendItems.forEach((y,p)=>{const{itemWidth:b,itemHeight:v}=VM(a,r,i,y,n);p>0&&x+v+2*o>u&&(m+=h+o,d.push({width:h,height:x}),g+=h+o,f++,h=x=0),c[p]={left:g,top:x,col:f,width:b,height:v},h=Math.max(h,b),x+=v+o}),m+=h,d.push({width:h,height:x}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:a,labels:{padding:n},rtl:i}}=this,l=di(i,this.left,this.width);if(this.isHorizontal()){let o=0,c=$t(a,this.left+n,this.right-this.lineWidths[o]);for(const d of r)o!==d.row&&(o=d.row,c=$t(a,this.left+n,this.right-this.lineWidths[o])),d.top+=this.top+e+n,d.left=l.leftForLtr(l.x(c),d.width),c+=d.width+n}else{let o=0,c=$t(a,this.top+e+n,this.bottom-this.columnSizes[o].height);for(const d of r)d.col!==o&&(o=d.col,c=$t(a,this.top+e+n,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+n,d.left=l.leftForLtr(l.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;lm(e,this),this._draw(),om(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:a,ctx:n}=this,{align:i,labels:l}=e,o=ct.color,c=di(e.rtl,this.left,this.width),d=Nt(l.font),{padding:u}=l,m=d.size,h=m/2;let x;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:g,boxHeight:f,itemHeight:y}=Fb(l,m),p=function(S,k,P){if(isNaN(g)||g<=0||isNaN(f)||f<0)return;n.save();const _=Se(P.lineWidth,1);if(n.fillStyle=Se(P.fillStyle,o),n.lineCap=Se(P.lineCap,"butt"),n.lineDashOffset=Se(P.lineDashOffset,0),n.lineJoin=Se(P.lineJoin,"miter"),n.lineWidth=_,n.strokeStyle=Se(P.strokeStyle,o),n.setLineDash(Se(P.lineDash,[])),l.usePointStyle){const L={radius:f*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:_},T=c.xPlus(S,g/2),U=k+h;kN(n,L,T,U,l.pointStyleWidth&&g)}else{const L=k+Math.max((m-f)/2,0),T=c.leftForLtr(S,g),U=hn(P.borderRadius);n.beginPath(),Object.values(U).some(H=>H!==0)?uo(n,{x:T,y:L,w:g,h:f,radius:U}):n.rect(T,L,g,f),n.fill(),_!==0&&n.stroke()}n.restore()},b=function(S,k,P){Pn(n,P.text,S,k+y/2,d,{strikethrough:P.hidden,textAlign:c.textAlign(P.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?x={x:$t(i,this.left+u,this.right-a[0]),y:this.top+u+w,line:0}:x={x:this.left+u,y:$t(i,this.top+w+u,this.bottom-r[0].height),line:0},EN(this.ctx,e.textDirection);const N=y+u;this.legendItems.forEach((S,k)=>{n.strokeStyle=S.fontColor,n.fillStyle=S.fontColor;const P=n.measureText(S.text).width,_=c.textAlign(S.textAlign||(S.textAlign=l.textAlign)),L=g+h+P;let T=x.x,U=x.y;c.setWidth(this.width),v?k>0&&T+L+u>this.right&&(U=x.y+=N,x.line++,T=x.x=$t(i,this.left+u,this.right-a[x.line])):k>0&&U+N>this.bottom&&(T=x.x=T+r[x.line].width+u,x.line++,U=x.y=$t(i,this.top+w+u,this.bottom-r[x.line].height));const H=c.x(T);if(p(H,U,S),T=yT(_,T+g+h,v?T+L:this.right,e.rtl),b(c.x(T),U,S),v)x.x+=L+u;else if(typeof S.text!="string"){const W=d.lineHeight;x.y+=sw(S,W)+u}else x.y+=N}),IN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,a=Nt(r.font),n=qt(r.padding);if(!r.display)return;const i=di(e.rtl,this.left,this.width),l=this.ctx,o=r.position,c=a.size/2,d=n.top+c;let u,m=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+d,m=$t(e.align,m,this.right-h);else{const g=this.columnSizes.reduce((f,y)=>Math.max(f,y.height),0);u=d+$t(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const x=$t(o,m,m+h);l.textAlign=i.textAlign(lg(o)),l.textBaseline="middle",l.strokeStyle=r.color,l.fillStyle=r.color,l.font=a.string,Pn(l,r.text,x,u,a)}_computeTitleHeight(){const e=this.options.title,r=Nt(e.font),a=qt(e.padding);return e.display?r.lineHeight+a.height:0}_getLegendItemAt(e,r){let a,n,i;if(_r(e,this.left,this.right)&&_r(r,this.top,this.bottom)){for(i=this.legendHitBoxes,a=0;a<i.length;++a)if(n=i[a],_r(e,n.left,n.left+n.width)&&_r(r,n.top,n.top+n.height))return this.legendItems[a]}return null}handleEvent(e){const r=this.options;if(!WM(e.type,r))return;const a=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=BM(n,a);n&&!i&&We(r.onLeave,[e,n,this],this),this._hoveredItem=a,a&&!i&&We(r.onHover,[e,a,this],this)}else a&&We(r.onClick,[e,a,this],this)}}function VM(t,e,r,a,n){const i=UM(a,t,e,r),l=HM(n,a,e.lineHeight);return{itemWidth:i,itemHeight:l}}function UM(t,e,r,a){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((i,l)=>i.length>l.length?i:l)),e+r.size/2+a.measureText(n).width}function HM(t,e,r){let a=t;return typeof e.text!="string"&&(a=sw(e,r)),a}function sw(t,e){const r=t.text?t.text.length:0;return e*r}function WM(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var rw={id:"legend",_element:$b,start(t,e,r){const a=t.legend=new $b({ctx:t.ctx,options:r,chart:t});As.configure(t,a,r),As.addBox(t,a)},stop(t){As.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const a=t.legend;As.configure(t,a,r),a.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const a=e.datasetIndex,n=r.chart;n.isDatasetVisible(a)?(n.hide(a),e.hidden=!0):(n.show(a),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:a,textAlign:n,color:i,useBorderRadius:l,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(r?0:void 0),u=qt(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:a||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:l&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class aw extends Qs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const a=this.options;if(this.left=0,this.top=0,!a.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const n=Ke(a.text)?a.text.length:1;this._padding=qt(a.padding);const i=n*Nt(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:a,bottom:n,right:i,options:l}=this,o=l.align;let c=0,d,u,m;return this.isHorizontal()?(u=$t(o,a,i),m=r+e,d=i-a):(l.position==="left"?(u=a+e,m=$t(o,n,r),c=Ie*-.5):(u=i-e,m=$t(o,r,n),c=Ie*.5),d=n-r),{titleX:u,titleY:m,maxWidth:d,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const a=Nt(r.font),i=a.lineHeight/2+this._padding.top,{titleX:l,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(i);Pn(e,r.text,0,0,a,{color:r.color,maxWidth:c,rotation:d,textAlign:lg(r.align),textBaseline:"middle",translation:[l,o]})}}function qM(t,e){const r=new aw({ctx:t.ctx,options:e,chart:t});As.configure(t,r,e),As.addBox(t,r),t.titleBlock=r}var YM={id:"title",_element:aw,start(t,e,r){qM(t,r)},stop(t){const e=t.titleBlock;As.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const a=t.titleBlock;As.configure(t,a,r),a.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sl={average(t){if(!t.length)return!1;let e,r,a=new Set,n=0,i=0;for(e=0,r=t.length;e<r;++e){const o=t[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();a.add(c.x),n+=c.y,++i}}return i===0||a.size===0?!1:{x:[...a].reduce((o,c)=>o+c)/a.size,y:n/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,a=e.y,n=Number.POSITIVE_INFINITY,i,l,o;for(i=0,l=t.length;i<l;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=ux(e,d);u<n&&(n=u,o=c)}}if(o){const c=o.tooltipPosition();r=c.x,a=c.y}return{x:r,y:a}}};function rr(t,e){return e&&(Ke(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function jr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function KM(t,e){const{element:r,datasetIndex:a,index:n}=e,i=t.getDatasetMeta(a).controller,{label:l,value:o}=i.getLabelAndValue(n);return{chart:t,label:l,parsed:i.getParsed(n),raw:t.data.datasets[a].data[n],formattedValue:o,dataset:i.getDataset(),dataIndex:n,datasetIndex:a,element:r}}function zb(t,e){const r=t.chart.ctx,{body:a,footer:n,title:i}=t,{boxWidth:l,boxHeight:o}=e,c=Nt(e.bodyFont),d=Nt(e.titleFont),u=Nt(e.footerFont),m=i.length,h=n.length,x=a.length,g=qt(e.padding);let f=g.height,y=0,p=a.reduce((w,N)=>w+N.before.length+N.lines.length+N.after.length,0);if(p+=t.beforeBody.length+t.afterBody.length,m&&(f+=m*d.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),p){const w=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;f+=x*w+(p-x)*c.lineHeight+(p-1)*e.bodySpacing}h&&(f+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let b=0;const v=function(w){y=Math.max(y,r.measureText(w).width+b)};return r.save(),r.font=d.string,$e(t.title,v),r.font=c.string,$e(t.beforeBody.concat(t.afterBody),v),b=e.displayColors?l+2+e.boxPadding:0,$e(a,w=>{$e(w.before,v),$e(w.lines,v),$e(w.after,v)}),b=0,r.font=u.string,$e(t.footer,v),r.restore(),y+=g.width,{width:y,height:f}}function XM(t,e){const{y:r,height:a}=e;return r<a/2?"top":r>t.height-a/2?"bottom":"center"}function QM(t,e,r,a){const{x:n,width:i}=a,l=r.caretSize+r.caretPadding;if(t==="left"&&n+i+l>e.width||t==="right"&&n-i-l<0)return!0}function GM(t,e,r,a){const{x:n,width:i}=r,{width:l,chartArea:{left:o,right:c}}=t;let d="center";return a==="center"?d=n<=(o+c)/2?"left":"right":n<=i/2?d="left":n>=l-i/2&&(d="right"),QM(d,t,e,r)&&(d="center"),d}function Bb(t,e,r){const a=r.yAlign||e.yAlign||XM(t,r);return{xAlign:r.xAlign||e.xAlign||GM(t,e,r,a),yAlign:a}}function JM(t,e){let{x:r,width:a}=t;return e==="right"?r-=a:e==="center"&&(r-=a/2),r}function ZM(t,e,r){let{y:a,height:n}=t;return e==="top"?a+=r:e==="bottom"?a-=n+r:a-=n/2,a}function Vb(t,e,r,a){const{caretSize:n,caretPadding:i,cornerRadius:l}=t,{xAlign:o,yAlign:c}=r,d=n+i,{topLeft:u,topRight:m,bottomLeft:h,bottomRight:x}=hn(l);let g=JM(e,o);const f=ZM(e,c,d);return c==="center"?o==="left"?g+=d:o==="right"&&(g-=d):o==="left"?g-=Math.max(u,h)+n:o==="right"&&(g+=Math.max(m,x)+n),{x:Ht(g,0,a.width-e.width),y:Ht(f,0,a.height-e.height)}}function mc(t,e,r){const a=qt(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-a.right:t.x+a.left}function Ub(t){return rr([],jr(t))}function eE(t,e,r){return Ma(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function Hb(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const nw={beforeTitle:br,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,a=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(a>0&&e.dataIndex<a)return r[e.dataIndex]}return""},afterTitle:br,beforeBody:br,beforeLabel:br,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Me(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:br,afterBody:br,beforeFooter:br,footer:br,afterFooter:br};function ns(t,e,r,a){const n=t[e].call(r,a);return typeof n>"u"?nw[e].call(r,a):n}class yx extends Qs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,a=this.options.setContext(this.getContext()),n=a.enabled&&r.options.animation&&a.animations,i=new $N(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=eE(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:a}=r,n=ns(a,"beforeTitle",this,e),i=ns(a,"title",this,e),l=ns(a,"afterTitle",this,e);let o=[];return o=rr(o,jr(n)),o=rr(o,jr(i)),o=rr(o,jr(l)),o}getBeforeBody(e,r){return Ub(ns(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:a}=r,n=[];return $e(e,i=>{const l={before:[],lines:[],after:[]},o=Hb(a,i);rr(l.before,jr(ns(o,"beforeLabel",this,i))),rr(l.lines,ns(o,"label",this,i)),rr(l.after,jr(ns(o,"afterLabel",this,i))),n.push(l)}),n}getAfterBody(e,r){return Ub(ns(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:a}=r,n=ns(a,"beforeFooter",this,e),i=ns(a,"footer",this,e),l=ns(a,"afterFooter",this,e);let o=[];return o=rr(o,jr(n)),o=rr(o,jr(i)),o=rr(o,jr(l)),o}_createItems(e){const r=this._active,a=this.chart.data,n=[],i=[],l=[];let o=[],c,d;for(c=0,d=r.length;c<d;++c)o.push(KM(this.chart,r[c]));return e.filter&&(o=o.filter((u,m,h)=>e.filter(u,m,h,a))),e.itemSort&&(o=o.sort((u,m)=>e.itemSort(u,m,a))),$e(o,u=>{const m=Hb(e.callbacks,u);n.push(ns(m,"labelColor",this,u)),i.push(ns(m,"labelPointStyle",this,u)),l.push(ns(m,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=o,o}update(e,r){const a=this.options.setContext(this.getContext()),n=this._active;let i,l=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const o=sl[a.position].call(this,n,this._eventPosition);l=this._createItems(a),this.title=this.getTitle(l,a),this.beforeBody=this.getBeforeBody(l,a),this.body=this.getBody(l,a),this.afterBody=this.getAfterBody(l,a),this.footer=this.getFooter(l,a);const c=this._size=zb(this,a),d=Object.assign({},o,c),u=Bb(this.chart,a,d),m=Vb(a,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&a.external&&a.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,a,n){const i=this.getCaretPosition(e,a,n);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,a){const{xAlign:n,yAlign:i}=this,{caretSize:l,cornerRadius:o}=a,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:m}=hn(o),{x:h,y:x}=e,{width:g,height:f}=r;let y,p,b,v,w,N;return i==="center"?(w=x+f/2,n==="left"?(y=h,p=y-l,v=w+l,N=w-l):(y=h+g,p=y+l,v=w-l,N=w+l),b=y):(n==="left"?p=h+Math.max(c,u)+l:n==="right"?p=h+g-Math.max(d,m)-l:p=this.caretX,i==="top"?(v=x,w=v-l,y=p-l,b=p+l):(v=x+f,w=v+l,y=p+l,b=p-l),N=v),{x1:y,x2:p,x3:b,y1:v,y2:w,y3:N}}drawTitle(e,r,a){const n=this.title,i=n.length;let l,o,c;if(i){const d=di(a.rtl,this.x,this.width);for(e.x=mc(this,a.titleAlign,a),r.textAlign=d.textAlign(a.titleAlign),r.textBaseline="middle",l=Nt(a.titleFont),o=a.titleSpacing,r.fillStyle=a.titleColor,r.font=l.string,c=0;c<i;++c)r.fillText(n[c],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+o,c+1===i&&(e.y+=a.titleMarginBottom-o)}}_drawColorBox(e,r,a,n,i){const l=this.labelColors[a],o=this.labelPointStyles[a],{boxHeight:c,boxWidth:d}=i,u=Nt(i.bodyFont),m=mc(this,"left",i),h=n.x(m),x=c<u.lineHeight?(u.lineHeight-c)/2:0,g=r.y+x;if(i.usePointStyle){const f={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},y=n.leftForLtr(h,d)+d/2,p=g+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,hx(e,f,y,p),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,hx(e,f,y,p)}else{e.lineWidth=_e(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const f=n.leftForLtr(h,d),y=n.leftForLtr(n.xPlus(h,1),d-2),p=hn(l.borderRadius);Object.values(p).some(b=>b!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,uo(e,{x:f,y:g,w:d,h:c,radius:p}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),uo(e,{x:y,y:g+1,w:d-2,h:c-2,radius:p}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(f,g,d,c),e.strokeRect(f,g,d,c),e.fillStyle=l.backgroundColor,e.fillRect(y,g+1,d-2,c-2))}e.fillStyle=this.labelTextColors[a]}drawBody(e,r,a){const{body:n}=this,{bodySpacing:i,bodyAlign:l,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=a,m=Nt(a.bodyFont);let h=m.lineHeight,x=0;const g=di(a.rtl,this.x,this.width),f=function(P){r.fillText(P,g.x(e.x+x),e.y+h/2),e.y+=h+i},y=g.textAlign(l);let p,b,v,w,N,S,k;for(r.textAlign=l,r.textBaseline="middle",r.font=m.string,e.x=mc(this,y,a),r.fillStyle=a.bodyColor,$e(this.beforeBody,f),x=o&&y!=="right"?l==="center"?d/2+u:d+2+u:0,w=0,S=n.length;w<S;++w){for(p=n[w],b=this.labelTextColors[w],r.fillStyle=b,$e(p.before,f),v=p.lines,o&&v.length&&(this._drawColorBox(r,e,w,g,a),h=Math.max(m.lineHeight,c)),N=0,k=v.length;N<k;++N)f(v[N]),h=m.lineHeight;$e(p.after,f)}x=0,h=m.lineHeight,$e(this.afterBody,f),e.y-=i}drawFooter(e,r,a){const n=this.footer,i=n.length;let l,o;if(i){const c=di(a.rtl,this.x,this.width);for(e.x=mc(this,a.footerAlign,a),e.y+=a.footerMarginTop,r.textAlign=c.textAlign(a.footerAlign),r.textBaseline="middle",l=Nt(a.footerFont),r.fillStyle=a.footerColor,r.font=l.string,o=0;o<i;++o)r.fillText(n[o],c.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+a.footerSpacing}}drawBackground(e,r,a,n){const{xAlign:i,yAlign:l}=this,{x:o,y:c}=e,{width:d,height:u}=a,{topLeft:m,topRight:h,bottomLeft:x,bottomRight:g}=hn(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(o+m,c),l==="top"&&this.drawCaret(e,r,a,n),r.lineTo(o+d-h,c),r.quadraticCurveTo(o+d,c,o+d,c+h),l==="center"&&i==="right"&&this.drawCaret(e,r,a,n),r.lineTo(o+d,c+u-g),r.quadraticCurveTo(o+d,c+u,o+d-g,c+u),l==="bottom"&&this.drawCaret(e,r,a,n),r.lineTo(o+x,c+u),r.quadraticCurveTo(o,c+u,o,c+u-x),l==="center"&&i==="left"&&this.drawCaret(e,r,a,n),r.lineTo(o,c+m),r.quadraticCurveTo(o,c,o+m,c),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,a=this.$animations,n=a&&a.x,i=a&&a.y;if(n||i){const l=sl[e.position].call(this,this._active,this._eventPosition);if(!l)return;const o=this._size=zb(this,e),c=Object.assign({},l,this._size),d=Bb(r,e,c),u=Vb(e,c,d,r);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let a=this.opacity;if(!a)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};a=Math.abs(a)<.001?0:a;const l=qt(r.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&o&&(e.save(),e.globalAlpha=a,this.drawBackground(i,e,n,r),EN(e,r.textDirection),i.y+=l.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),IN(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const a=this._active,n=e.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),i=!Jd(a,n),l=this._positionChanged(n,r);(i||l)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,a=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],l=this._getActiveElements(e,i,r,a),o=this._positionChanged(l,e),c=r||!Jd(l,i)||o;return c&&(this._active=l,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,a,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return r.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,i.mode,i,a);return i.reverse&&l.reverse(),l}_positionChanged(e,r){const{caretX:a,caretY:n,options:i}=this,l=sl[i.position].call(this,e,r);return l!==!1&&(a!==l.x||n!==l.y)}}oe(yx,"positioners",sl);var iw={id:"tooltip",_element:yx,positioners:sl,afterInit(t,e,r){r&&(t.tooltip=new yx({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const tE=(t,e,r,a)=>(typeof e=="string"?(r=t.push(e)-1,a.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function sE(t,e,r,a){const n=t.indexOf(e);if(n===-1)return tE(t,e,r,a);const i=t.lastIndexOf(e);return n!==i?r:n}const rE=(t,e)=>t===null?null:Ht(Math.round(t),0,e);function Wb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class nu extends In{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const a=this.getLabels();for(const{index:n,label:i}of r)a[n]===i&&a.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Me(e))return null;const a=this.getLabels();return r=isFinite(r)&&a[r]===e?r:sE(a,e,Se(r,e),this._addedLabels),rE(r,a.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:a,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(a=0),r||(n=this.getLabels().length-1)),this.min=a,this.max=n}buildTicks(){const e=this.min,r=this.max,a=this.options.offset,n=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let l=e;l<=r;l++)n.push({value:l});return n}getLabelForValue(e){return Wb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}oe(nu,"id","category"),oe(nu,"defaults",{ticks:{callback:Wb}});function aE(t,e){const r=[],{bounds:n,step:i,min:l,max:o,precision:c,count:d,maxTicks:u,maxDigits:m,includeBounds:h}=t,x=i||1,g=u-1,{min:f,max:y}=e,p=!Me(l),b=!Me(o),v=!Me(d),w=(y-f)/(m+1);let N=Uy((y-f)/g/x)*x,S,k,P,_;if(N<1e-14&&!p&&!b)return[{value:f},{value:y}];_=Math.ceil(y/N)-Math.floor(f/N),_>g&&(N=Uy(_*N/g/x)*x),Me(c)||(S=Math.pow(10,c),N=Math.ceil(N*S)/S),n==="ticks"?(k=Math.floor(f/N)*N,P=Math.ceil(y/N)*N):(k=f,P=y),p&&b&&i&&uT((o-l)/i,N/1e3)?(_=Math.round(Math.min((o-l)/N,u)),N=(o-l)/_,k=l,P=o):v?(k=p?l:k,P=b?o:P,_=d-1,N=(P-k)/_):(_=(P-k)/N,Sl(_,Math.round(_),N/1e3)?_=Math.round(_):_=Math.ceil(_));const L=Math.max(Hy(N),Hy(k));S=Math.pow(10,Me(c)?L:c),k=Math.round(k*S)/S,P=Math.round(P*S)/S;let T=0;for(p&&(h&&k!==l?(r.push({value:l}),k<l&&T++,Sl(Math.round((k+T*N)*S)/S,l,qb(l,w,t))&&T++):k<l&&T++);T<_;++T){const U=Math.round((k+T*N)*S)/S;if(b&&U>o)break;r.push({value:U})}return b&&h&&P!==o?r.length&&Sl(r[r.length-1].value,o,qb(o,w,t))?r[r.length-1].value=o:r.push({value:o}):(!b||P===o)&&r.push({value:P}),r}function qb(t,e,{horizontal:r,minRotation:a}){const n=or(a),i=(r?Math.sin(n):Math.cos(n))||.001,l=.75*e*(""+t).length;return Math.min(e/i,l)}class iu extends In{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Me(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:a}=this.getUserBounds();let{min:n,max:i}=this;const l=c=>n=r?n:c,o=c=>i=a?i:c;if(e){const c=xr(n),d=xr(i);c<0&&d<0?o(0):c>0&&d>0&&l(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);o(i+c),e||l(n-c)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:a}=e,n;return a?(n=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let a=this.getTickLimit();a=Math.max(2,a);const n={maxTicks:a,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,l=aE(n,i);return e.bounds==="ticks"&&bN(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let r=this.min,a=this.max;if(super.configure(),this.options.offset&&e.length){const n=(a-r)/Math.max(e.length-1,1)/2;r-=n,a+=n}this._startValue=r,this._endValue=a,this._valueRange=a-r}getLabelForValue(e){return nm(e,this.chart.options.locale,this.options.ticks.format)}}class lu extends iu{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=ot(e)?e:0,this.max=ot(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,a=or(this.options.ticks.minRotation),n=(e?Math.sin(a):Math.cos(a))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}oe(lu,"id","linear"),oe(lu,"defaults",{ticks:{callback:im.formatters.numeric}});const ho=t=>Math.floor(ra(t)),Oa=(t,e)=>Math.pow(10,ho(t)+e);function Yb(t){return t/Math.pow(10,ho(t))===1}function Kb(t,e,r){const a=Math.pow(10,r),n=Math.floor(t/a);return Math.ceil(e/a)-n}function nE(t,e){const r=e-t;let a=ho(r);for(;Kb(t,e,a)>10;)a++;for(;Kb(t,e,a)<10;)a--;return Math.min(a,ho(t))}function iE(t,{min:e,max:r}){e=gs(t.min,e);const a=[],n=ho(e);let i=nE(e,r),l=i<0?Math.pow(10,Math.abs(i)):1;const o=Math.pow(10,i),c=n>i?Math.pow(10,n):0,d=Math.round((e-c)*l)/l,u=Math.floor((e-c)/o/10)*o*10;let m=Math.floor((d-u)/Math.pow(10,i)),h=gs(t.min,Math.round((c+u+m*Math.pow(10,i))*l)/l);for(;h<r;)a.push({value:h,major:Yb(h),significand:m}),m>=10?m=m<15?15:20:m++,m>=20&&(i++,m=2,l=i>=0?1:l),h=Math.round((c+u+m*Math.pow(10,i))*l)/l;const x=gs(t.max,h);return a.push({value:x,major:Yb(x),significand:m}),a}class Xb extends In{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const a=iu.prototype.parse.apply(this,[e,r]);if(a===0){this._zero=!0;return}return ot(a)&&a>0?a:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=ot(e)?Math.max(0,e):null,this.max=ot(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ot(this._userMin)&&(this.min=e===Oa(this.min,0)?Oa(this.min,-1):Oa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let a=this.min,n=this.max;const i=o=>a=e?a:o,l=o=>n=r?n:o;a===n&&(a<=0?(i(1),l(10)):(i(Oa(a,-1)),l(Oa(n,1)))),a<=0&&i(Oa(n,-1)),n<=0&&l(Oa(a,1)),this.min=a,this.max=n}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},a=iE(r,this);return e.bounds==="ticks"&&bN(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}getLabelForValue(e){return e===void 0?"0":nm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ra(e),this._valueRange=ra(this.max)-ra(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ra(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}oe(Xb,"id","logarithmic"),oe(Xb,"defaults",{ticks:{callback:im.formatters.logarithmic,major:{enabled:!0}}});function bx(t){const e=t.ticks;if(e.display&&t.display){const r=qt(e.backdropPadding);return Se(e.font&&e.font.size,ct.font.size)+r.height}return 0}function lE(t,e,r){return r=Ke(r)?r:[r],{w:AT(t,e.string,r),h:r.length*e.lineHeight}}function Qb(t,e,r,a,n){return t===a||t===n?{start:e-r/2,end:e+r/2}:t<a||t>n?{start:e-r,end:e}:{start:e,end:e+r}}function oE(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),a=[],n=[],i=t._pointLabels.length,l=t.options.pointLabels,o=l.centerPointLabels?Ie/i:0;for(let c=0;c<i;c++){const d=l.setContext(t.getPointLabelContext(c));n[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+n[c],o),m=Nt(d.font),h=lE(t.ctx,m,t._pointLabels[c]);a[c]=h;const x=zt(t.getIndexAngle(c)+o),g=Math.round(ng(x)),f=Qb(g,u.x,h.w,0,180),y=Qb(g,u.y,h.h,90,270);cE(r,e,x,f,y)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=mE(t,a,n)}function cE(t,e,r,a,n){const i=Math.abs(Math.sin(r)),l=Math.abs(Math.cos(r));let o=0,c=0;a.start<e.l?(o=(e.l-a.start)/i,t.l=Math.min(t.l,e.l-o)):a.end>e.r&&(o=(a.end-e.r)/i,t.r=Math.max(t.r,e.r+o)),n.start<e.t?(c=(e.t-n.start)/l,t.t=Math.min(t.t,e.t-c)):n.end>e.b&&(c=(n.end-e.b)/l,t.b=Math.max(t.b,e.b+c))}function dE(t,e,r){const a=t.drawingArea,{extra:n,additionalAngle:i,padding:l,size:o}=r,c=t.getPointPosition(e,a+n+l,i),d=Math.round(ng(zt(c.angle+ht))),u=pE(c.y,o.h,d),m=hE(d),h=xE(c.x,o.w,m);return{visible:!0,x:c.x,y:u,textAlign:m,left:h,top:u,right:h+o.w,bottom:u+o.h}}function uE(t,e){if(!e)return!0;const{left:r,top:a,right:n,bottom:i}=t;return!(Pr({x:r,y:a},e)||Pr({x:r,y:i},e)||Pr({x:n,y:a},e)||Pr({x:n,y:i},e))}function mE(t,e,r){const a=[],n=t._pointLabels.length,i=t.options,{centerPointLabels:l,display:o}=i.pointLabels,c={extra:bx(i)/2,additionalAngle:l?Ie/n:0};let d;for(let u=0;u<n;u++){c.padding=r[u],c.size=e[u];const m=dE(t,u,c);a.push(m),o==="auto"&&(m.visible=uE(m,d),m.visible&&(d=m))}return a}function hE(t){return t===0||t===180?"center":t<180?"left":"right"}function xE(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function pE(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function gE(t,e,r){const{left:a,top:n,right:i,bottom:l}=r,{backdropColor:o}=e;if(!Me(o)){const c=hn(e.borderRadius),d=qt(e.backdropPadding);t.fillStyle=o;const u=a-d.left,m=n-d.top,h=i-a+d.width,x=l-n+d.height;Object.values(c).some(g=>g!==0)?(t.beginPath(),uo(t,{x:u,y:m,w:h,h:x,radius:c}),t.fill()):t.fillRect(u,m,h,x)}}function fE(t,e){const{ctx:r,options:{pointLabels:a}}=t;for(let n=e-1;n>=0;n--){const i=t._pointLabelItems[n];if(!i.visible)continue;const l=a.setContext(t.getPointLabelContext(n));gE(r,l,i);const o=Nt(l.font),{x:c,y:d,textAlign:u}=i;Pn(r,t._pointLabels[n],c,d+o.lineHeight/2,o,{color:l.color,textAlign:u,textBaseline:"middle"})}}function lw(t,e,r,a){const{ctx:n}=t;if(r)n.arc(t.xCenter,t.yCenter,e,0,Qe);else{let i=t.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let l=1;l<a;l++)i=t.getPointPosition(l,e),n.lineTo(i.x,i.y)}}function yE(t,e,r,a,n){const i=t.ctx,l=e.circular,{color:o,lineWidth:c}=e;!l&&!a||!o||!c||r<0||(i.save(),i.strokeStyle=o,i.lineWidth=c,i.setLineDash(n.dash||[]),i.lineDashOffset=n.dashOffset,i.beginPath(),lw(t,r,l,a),i.closePath(),i.stroke(),i.restore())}function bE(t,e,r){return Ma(t,{label:r,index:e,type:"pointLabel"})}class hc extends iu{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=qt(bx(this.options)/2),r=this.width=this.maxWidth-e.width,a=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+a/2+e.top),this.drawingArea=Math.floor(Math.min(r,a)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=ot(e)&&!isNaN(e)?e:0,this.max=ot(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/bx(this.options))}generateTickLabels(e){iu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,a)=>{const n=We(this.options.pointLabels.callback,[r,a],this);return n||n===0?n:""}).filter((r,a)=>this.chart.getDataVisibility(a))}fit(){const e=this.options;e.display&&e.pointLabels.display?oE(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,a,n){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((a-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,a,n))}getIndexAngle(e){const r=Qe/(this._pointLabels.length||1),a=this.options.startAngle||0;return zt(e*r+or(a))}getDistanceFromCenterForValue(e){if(Me(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Me(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const a=r[e];return bE(this.getContext(),e,a)}}getPointPosition(e,r,a=0){const n=this.getIndexAngle(e)-ht+a;return{x:Math.cos(n)*r+this.xCenter,y:Math.sin(n)*r+this.yCenter,angle:n}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:a,right:n,bottom:i}=this._pointLabelItems[e];return{left:r,top:a,right:n,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const a=this.ctx;a.save(),a.beginPath(),lw(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),a.closePath(),a.fillStyle=e,a.fill(),a.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:a,grid:n,border:i}=r,l=this._pointLabels.length;let o,c,d;if(r.pointLabels.display&&fE(this,l),n.display&&this.ticks.forEach((u,m)=>{if(m!==0||m===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(m),x=n.setContext(h),g=i.setContext(h);yE(this,x,c,l,g)}}),a.display){for(e.save(),o=l-1;o>=0;o--){const u=a.setContext(this.getPointLabelContext(o)),{color:m,lineWidth:h}=u;!h||!m||(e.lineWidth=h,e.strokeStyle=m,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),d=this.getPointPosition(o,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,a=r.ticks;if(!a.display)return;const n=this.getIndexAngle(0);let i,l;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,c)=>{if(c===0&&this.min>=0&&!r.reverse)return;const d=a.setContext(this.getContext(c)),u=Nt(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,l=e.measureText(o.label).width,e.fillStyle=d.backdropColor;const m=qt(d.backdropPadding);e.fillRect(-l/2-m.left,-i-u.size/2-m.top,l+m.width,u.size+m.height)}Pn(e,o.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}oe(hc,"id","radialLinear"),oe(hc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:im.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),oe(hc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),oe(hc,"descriptors",{angleLines:{_fallback:"grid"}});const um={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ls=Object.keys(um);function Gb(t,e){return t-e}function Jb(t,e){if(Me(e))return null;const r=t._adapter,{parser:a,round:n,isoWeekday:i}=t._parseOpts;let l=e;return typeof a=="function"&&(l=a(l)),ot(l)||(l=typeof a=="string"?r.parse(l,a):r.parse(l)),l===null?null:(n&&(l=n==="week"&&(oo(i)||i===!0)?r.startOf(l,"isoWeek",i):r.startOf(l,n)),+l)}function Zb(t,e,r,a){const n=ls.length;for(let i=ls.indexOf(t);i<n-1;++i){const l=um[ls[i]],o=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((r-e)/(o*l.size))<=a)return ls[i]}return ls[n-1]}function vE(t,e,r,a,n){for(let i=ls.length-1;i>=ls.indexOf(r);i--){const l=ls[i];if(um[l].common&&t._adapter.diff(n,a,l)>=e-1)return l}return ls[r?ls.indexOf(r):0]}function jE(t){for(let e=ls.indexOf(t)+1,r=ls.length;e<r;++e)if(um[ls[e]].common)return ls[e]}function ev(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:a,hi:n}=ig(r,e),i=r[a]>=e?r[a]:r[n];t[i]=!0}}function NE(t,e,r,a){const n=t._adapter,i=+n.startOf(e[0].value,a),l=e[e.length-1].value;let o,c;for(o=i;o<=l;o=+n.add(o,1,a))c=r[o],c>=0&&(e[c].major=!0);return e}function tv(t,e,r){const a=[],n={},i=e.length;let l,o;for(l=0;l<i;++l)o=e[l],n[o]=l,a.push({value:o,major:!1});return i===0||!r?a:NE(t,a,n,r)}class xo extends In{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const a=e.time||(e.time={}),n=this._adapter=new qA._date(e.adapters.date);n.init(r),wl(a.displayFormats,n.formats()),this._parseOpts={parser:a.parser,round:a.round,isoWeekday:a.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:Jb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,a=e.time.unit||"day";let{min:n,max:i,minDefined:l,maxDefined:o}=this.getUserBounds();function c(d){!l&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!o&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!l||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=ot(n)&&!isNaN(n)?n:+r.startOf(Date.now(),a),i=ot(i)&&!isNaN(i)?i:+r.endOf(Date.now(),a)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],a=e[e.length-1]),{min:r,max:a}}buildTicks(){const e=this.options,r=e.time,a=e.ticks,n=a.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,l=this.max,o=pT(n,i,l);return this._unit=r.unit||(a.autoSkip?Zb(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):vE(this,o.length,r.minUnit,this.min,this.max)),this._majorUnit=!a.major.enabled||this._unit==="year"?void 0:jE(this._unit),this.initOffsets(n),e.reverse&&o.reverse(),tv(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,a=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?r=1-n:r=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?a=i:a=(i-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;r=Ht(r,0,l),a=Ht(a,0,l),this._offsets={start:r,end:a,factor:1/(r+1+a)}}_generate(){const e=this._adapter,r=this.min,a=this.max,n=this.options,i=n.time,l=i.unit||Zb(i.minUnit,r,a,this._getLabelCapacity(r)),o=Se(n.ticks.stepSize,1),c=l==="week"?i.isoWeekday:!1,d=oo(c)||c===!0,u={};let m=r,h,x;if(d&&(m=+e.startOf(m,"isoWeek",c)),m=+e.startOf(m,d?"day":l),e.diff(a,r,l)>1e5*o)throw new Error(r+" and "+a+" are too far apart with stepSize of "+o+" "+l);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(h=m,x=0;h<a;h=+e.add(h,o,l),x++)ev(u,h,g);return(h===a||n.bounds==="ticks"||x===1)&&ev(u,h,g),Object.keys(u).sort(Gb).map(f=>+f)}getLabelForValue(e){const r=this._adapter,a=this.options.time;return a.tooltipFormat?r.format(e,a.tooltipFormat):r.format(e,a.displayFormats.datetime)}format(e,r){const n=this.options.time.displayFormats,i=this._unit,l=r||n[i];return this._adapter.format(e,l)}_tickFormatFunction(e,r,a,n){const i=this.options,l=i.ticks.callback;if(l)return We(l,[e,r,a],this);const o=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],m=d&&o[d],h=a[r],x=d&&m&&h&&h.major;return this._adapter.format(e,n||(x?m:u))}generateTickLabels(e){let r,a,n;for(r=0,a=e.length;r<a;++r)n=e[r],n.label=this._tickFormatFunction(n.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,a=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+a)*r.factor)}getValueForPixel(e){const r=this._offsets,a=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+a*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,a=this.ctx.measureText(e).width,n=or(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(n),l=Math.sin(n),o=this._resolveTickFontOptions(0).size;return{w:a*i+o*l,h:a*l+o*i}}_getLabelCapacity(e){const r=this.options.time,a=r.displayFormats,n=a[r.unit]||a.millisecond,i=this._tickFormatFunction(e,0,tv(this,[e],this._majorUnit),n),l=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],r,a;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,a=n.length;r<a;++r)e=e.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,a;if(e.length)return e;const n=this.getLabels();for(r=0,a=n.length;r<a;++r)e.push(Jb(this,n[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return NN(e.sort(Gb))}}oe(xo,"id","time"),oe(xo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function xc(t,e,r){let a=0,n=t.length-1,i,l,o,c;r?(e>=t[a].pos&&e<=t[n].pos&&({lo:a,hi:n}=tn(t,"pos",e)),{pos:i,time:o}=t[a],{pos:l,time:c}=t[n]):(e>=t[a].time&&e<=t[n].time&&({lo:a,hi:n}=tn(t,"time",e)),{time:i,pos:o}=t[a],{time:l,pos:c}=t[n]);const d=l-i;return d?o+(c-o)*(e-i)/d:o}class sv extends xo{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=xc(r,this.min),this._tableRange=xc(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:a}=this,n=[],i=[];let l,o,c,d,u;for(l=0,o=e.length;l<o;++l)d=e[l],d>=r&&d<=a&&n.push(d);if(n.length<2)return[{time:r,pos:0},{time:a,pos:1}];for(l=0,o=n.length;l<o;++l)u=n[l+1],c=n[l-1],d=n[l],Math.round((u+c)/2)!==d&&i.push({time:d,pos:l/(o-1)});return i}_generate(){const e=this.min,r=this.max;let a=super.getDataTimestamps();return(!a.includes(e)||!a.length)&&a.splice(0,0,e),(!a.includes(r)||a.length===1)&&a.push(r),a.sort((n,i)=>n-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),a=this.getLabelTimestamps();return r.length&&a.length?e=this.normalize(r.concat(a)):e=r.length?r:a,e=this._cache.all=e,e}getDecimalForValue(e){return(xc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,a=this.getDecimalForPixel(e)/r.factor-r.end;return xc(this._table,a*this._tableRange+this._minPos,!0)}}oe(sv,"id","timeseries"),oe(sv,"defaults",xo.defaults);const ow="label";function rv(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function wE(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function cw(t,e){t.labels=e}function dw(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ow;const a=[];t.datasets=e.map(n=>{const i=t.datasets.find(l=>l[r]===n[r]);return!i||!n.data||a.includes(i)?{...n}:(a.push(i),Object.assign(i,n),i)})}function SE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ow;const r={labels:[],datasets:[]};return cw(r,t.labels),dw(r,t.datasets,e),r}function CE(t,e){const{height:r=150,width:a=300,redraw:n=!1,datasetIdKey:i,type:l,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:m,...h}=t,x=j.useRef(null),g=j.useRef(null),f=()=>{x.current&&(g.current=new Do(x.current,{type:l,data:SE(o,i),options:c&&{...c},plugins:d}),rv(e,g.current))},y=()=>{rv(e,null),g.current&&(g.current.destroy(),g.current=null)};return j.useEffect(()=>{!n&&g.current&&c&&wE(g.current,c)},[n,c]),j.useEffect(()=>{!n&&g.current&&cw(g.current.config.data,o.labels)},[n,o.labels]),j.useEffect(()=>{!n&&g.current&&o.datasets&&dw(g.current.config.data,o.datasets,i)},[n,o.datasets]),j.useEffect(()=>{g.current&&(n?(y(),setTimeout(f)):g.current.update(m))},[n,c,o.labels,o.datasets,m]),j.useEffect(()=>{g.current&&(y(),setTimeout(f))},[l]),j.useEffect(()=>(f(),()=>y()),[]),Hs.createElement("canvas",{ref:x,role:"img",height:r,width:a,...h},u)}const kE=j.forwardRef(CE);function gg(t,e){return Do.register(e),j.forwardRef((r,a)=>Hs.createElement(kE,{...r,ref:a,type:t}))}const vx=gg("line",td),jx=gg("bar",ed),uw=gg("doughnut",el);Do.register(Gn,iw,rw,nu,lu,Pl,Tr,_l,xo);function _E(){const[t,e]=j.useState("overview"),[r,a]=j.useState("30d"),[n,i]=j.useState(""),[l,o]=j.useState(""),c=ve(P=>P.customers.list),d=ve(P=>P.appointments.data),{catalog:u,workOrders:m,technicians:h}=ve(P=>P.services),x=ve(P=>P.invoices.invoices);ve(P=>P.inventory.items);const g=()=>{const P=new Date;let _;switch(r){case"7d":_=new Date(P.getTime()-7*24*60*60*1e3);break;case"30d":_=new Date(P.getTime()-30*24*60*60*1e3);break;case"90d":_=new Date(P.getTime()-90*24*60*60*1e3);break;case"1y":_=new Date(P.getTime()-365*24*60*60*1e3);break;case"custom":_=n?new Date(n):new Date(P.getTime()-30*24*60*60*1e3);break;default:_=new Date(P.getTime()-30*24*60*60*1e3)}const L=r==="custom"&&l?new Date(l):P;return{startDate:_,endDate:L}},f=j.useMemo(()=>{const{startDate:P,endDate:_}=g(),L=x.filter(Y=>{const $=new Date(Y.date);return $>=P&&$<=_}),T=d.filter(Y=>{const $=new Date(Y.date);return $>=P&&$<=_}),U=m.filter(Y=>{const $=new Date(Y.date);return $>=P&&$<=_}),H=L.reduce((Y,$)=>Y+$.total,0),W=L.filter(Y=>Y.status==="paid").reduce((Y,$)=>Y+$.total,0),J=H-W,V=H/Math.max(L.length,1),G=U.filter(Y=>Y.status==="completed").length,M=U.length,z=U.reduce((Y,$)=>Y+$.total,0)/Math.max(M,1),D=c.length,X=c.filter(Y=>Y.lastVisit&&new Date(Y.lastVisit)>=P).length,F=c.filter(Y=>new Date(Y.dateCreated)>=P).length,ie=X/Math.max(D,1)*100,ye=T.length,fe=T.filter(Y=>Y.status==="completed").length,pe=T.filter(Y=>Y.status==="cancelled").length,Te=T.filter(Y=>Y.status==="no-show").length,Oe=fe/Math.max(ye,1)*100;return{revenue:{total:H,paid:W,outstanding:J,avgInvoice:V},services:{completed:G,total:M,avgValue:z,completionRate:G/Math.max(M,1)*100},customers:{total:D,active:X,new:F,retentionRate:ie},appointments:{total:ye,completed:fe,cancelled:pe,noShow:Te,completionRate:Oe}}},[c,d,m,x,r,n,l]),y={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Revenue",data:[15e3,18e3,22e3,19e3,25e3,28e3],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},p={labels:["Oil Change","Brake Service","Tire Service","Engine Repair","Transmission","Other"],datasets:[{data:[35,20,15,12,8,10],backgroundColor:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#6b7280"]}]},b={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"New Customers",data:[8,12,15,18,22,25],backgroundColor:"#10b981",borderRadius:4},{label:"Returning Customers",data:[45,48,52,55,58,62],backgroundColor:"#3b82f6",borderRadius:4}]},v={labels:h.map(P=>P.name),datasets:[{label:"Services Completed",data:[25,32,28,35],backgroundColor:"#8b5cf6"},{label:"Revenue Generated",data:[15e3,19200,16800,21e3],backgroundColor:"#f59e0b"}]},w=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",f.revenue.total.toLocaleString()]}),s.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+12.5% vs last period"})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(Na,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active Customers"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.customers.active}),s.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[f.customers.retentionRate.toFixed(1),"% retention"]})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(Or,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Services Completed"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:f.services.completed}),s.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:[f.services.completionRate.toFixed(1),"% completion rate"]})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:s.jsx(Sn,{className:"w-6 h-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Service Value"}),s.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["$",f.services.avgValue.toFixed(0)]}),s.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"+8.3% vs last period"})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:s.jsx(z2,{className:"w-6 h-6 text-yellow-600"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Revenue Trend"}),s.jsx("div",{className:"h-64",children:s.jsx(vx,{data:y,options:{maintainAspectRatio:!1}})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Service Distribution"}),s.jsx("div",{className:"h-64",children:s.jsx(uw,{data:p,options:{maintainAspectRatio:!1}})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Performance Summary"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[f.appointments.completionRate.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Appointment Completion Rate"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["$",f.revenue.avgInvoice.toFixed(0)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Average Invoice Value"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:f.customers.new}),s.jsx("div",{className:"text-sm text-gray-600",children:"New Customers This Period"})]})]})]})]}),N=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Revenue"}),s.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["$",f.revenue.total.toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This period"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Paid Revenue"}),s.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["$",f.revenue.paid.toLocaleString()]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(f.revenue.paid/f.revenue.total*100).toFixed(1),"% of total"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Outstanding"}),s.jsxs("p",{className:"text-3xl font-bold text-yellow-600",children:["$",f.revenue.outstanding.toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Pending collection"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Monthly Revenue Trend"}),s.jsx("div",{className:"h-80",children:s.jsx(vx,{data:y,options:{maintainAspectRatio:!1}})})]})]}),S=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:f.customers.total}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:f.customers.active}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Customers"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:f.customers.new}),s.jsx("div",{className:"text-sm text-gray-600",children:"New Customers"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-yellow-600",children:[f.customers.retentionRate.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Retention Rate"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Customer Growth"}),s.jsx("div",{className:"h-80",children:s.jsx(jx,{data:b,options:{maintainAspectRatio:!1}})})]})]}),k=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Technician Performance"}),s.jsx("div",{className:"h-80",children:s.jsx(jx,{data:v,options:{maintainAspectRatio:!1}})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:h.map(P=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:P.name}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Services:"}),s.jsx("span",{className:"font-medium",children:"28"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Revenue:"}),s.jsx("span",{className:"font-medium",children:"$18,400"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Avg/Service:"}),s.jsx("span",{className:"font-medium",children:"$657"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Rating:"}),s.jsx("span",{className:"font-medium",children:"4.8/5"})]})]})]},P.id))})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(It,{title:"Reports & Analytics"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:r,onChange:P=>a(P.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"7d",children:"Last 7 days"}),s.jsx("option",{value:"30d",children:"Last 30 days"}),s.jsx("option",{value:"90d",children:"Last 90 days"}),s.jsx("option",{value:"1y",children:"Last year"}),s.jsx("option",{value:"custom",children:"Custom range"})]}),r==="custom"&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"date",value:n,onChange:P=>i(P.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm"}),s.jsx("input",{type:"date",value:l,onChange:P=>o(P.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),s.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Qn,{className:"w-4 h-4"}),"Export"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"overview",label:"Overview",icon:Ud},{key:"revenue",label:"Revenue",icon:Na},{key:"customers",label:"Customers",icon:Or},{key:"services",label:"Services",icon:Sn},{key:"technicians",label:"Technicians",icon:v7},{key:"inventory",label:"Inventory",icon:to}].map(P=>s.jsxs("button",{onClick:()=>e(P.key),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${t===P.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]},P.key))})}),s.jsxs("div",{className:"p-6",children:[t==="overview"&&w(),t==="revenue"&&N(),t==="customers"&&S(),t==="technicians"&&k(),t==="services"&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(p7,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"Services Report"}),s.jsx("p",{className:"text-gray-400",children:"Detailed service analytics coming soon..."})]}),t==="inventory"&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(to,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"Inventory Report"}),s.jsx("p",{className:"text-gray-400",children:"Inventory analytics and trends coming soon..."})]})]})]})]})}const PE=()=>H1(),TE=O1,AE={stats:null,loading:!1,error:null,realTimeEnabled:!0,lastUpdate:null,customReports:[]},ad=q("dashboard/fetchStats",async t=>{const e=t?new URLSearchParams(t).toString():"";return(await A.get(`/dashboard/stats${e?`?${e}`:""}`)).data}),DE=q("dashboard/generateReport",async t=>(await A.post("/dashboard/reports",t)).data);q("dashboard/exportData",async t=>(await A.get(`/dashboard/export?format=${t}`,{responseType:"blob"})).data);const ME=q("dashboard/realTimeUpdates",async(t,{getState:e})=>(await A.get("/dashboard/realtime")).data),EE=wt({name:"dashboard",initialState:AE,reducers:{setRealTimeEnabled:(t,e)=>{t.realTimeEnabled=e.payload},updateLastUpdate:t=>{t.lastUpdate=new Date().toISOString()},addCustomReport:(t,e)=>{t.customReports.push(e.payload)},clearError:t=>{t.error=null},simulateRealTimeUpdate:t=>{t.stats&&(t.stats={...t.stats,totalCustomers:t.stats.totalCustomers+Math.floor(Math.random()*3)-1,totalAppointments:t.stats.totalAppointments+Math.floor(Math.random()*2),totalRevenue:t.stats.totalRevenue+Math.floor(Math.random()*100),pendingTasks:t.stats.pendingTasks+Math.floor(Math.random()*2)-1},t.lastUpdate=new Date().toISOString())}},extraReducers:t=>{t.addCase(ad.pending,e=>{e.loading=!0,e.error=null}).addCase(ad.fulfilled,(e,r)=>{e.loading=!1,e.stats=r.payload,e.lastUpdate=new Date().toISOString()}).addCase(ad.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to fetch dashboard stats"}).addCase(DE.fulfilled,(e,r)=>{e.customReports.push(r.payload)}).addCase(ME.fulfilled,(e,r)=>{e.realTimeEnabled&&(e.stats={...e.stats,...r.payload},e.lastUpdate=new Date().toISOString())})}}),IE=EE.reducer;Do.register(nu,lu,_l,Tr,Pl,Gn,YM,iw,rw,zM);const av=()=>{var U;const t=PE(),{stats:e,loading:r,error:a}=TE(H=>H.dashboard),[n,i]=j.useState(!0),[l,o]=j.useState(6e4),[c,d]=j.useState(new Date),[u,m]=j.useState(!1),[h,x]=j.useState([]),[g,f]=j.useState({start:"",end:""}),[y,p]=j.useState("line"),[b,v]=j.useState(!1),[w,N]=j.useState({dateRange:"7d",serviceType:"all",technician:"all",status:"all"}),S=j.useCallback(()=>{t(ad(w)),d(new Date)},[t,w]);j.useEffect(()=>{S()},[S]),j.useEffect(()=>{if(!n)return;const H=setInterval(()=>{S()},l);return()=>clearInterval(H)},[n,l,S]),j.useEffect(()=>{if(!n)return;const H=setInterval(()=>{if(e){const W={...e,totalCustomers:e.totalCustomers+Math.floor(Math.random()*3)-1,totalAppointments:e.totalAppointments+Math.floor(Math.random()*2),totalRevenue:e.totalRevenue+Math.floor(Math.random()*100),pendingTasks:e.pendingTasks+Math.floor(Math.random()*2)-1};console.log("Real-time update:",W)}},5e3);return()=>clearInterval(H)},[n,e]);const k={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Revenue",data:[12e3,19e3,15e3,25e3,22e3,3e4],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]},P={labels:["Oil Change","Brake Service","Engine Repair","AC Service","Tire Service"],datasets:[{data:[30,25,20,15,10],backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6"]}]},_={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Appointments",data:[12,19,15,25,22,18,8],backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]},L=()=>{const H={metrics:h,dateRange:g,chartType:y,data:k,generatedAt:new Date().toISOString()},W=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),J=URL.createObjectURL(W),V=document.createElement("a");V.href=J,V.download=`dashboard-report-${new Date().toISOString().split("T")[0]}.json`,V.click(),URL.revokeObjectURL(J)},T=(H,W)=>{N(J=>({...J,[H]:W}))};return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a?s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:["Error loading dashboard: ",a]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsxs("p",{className:"text-gray-600",children:["Last updated: ",c.toLocaleTimeString()]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg shadow-sm border",children:[s.jsx("button",{onClick:()=>i(!n),className:`p-2 rounded ${n?"text-green-600":"text-gray-400"}`,title:n?"Disable auto-refresh":"Enable auto-refresh",children:n?s.jsx(vk,{}):s.jsx(bk,{})}),s.jsxs("select",{value:l,onChange:H=>o(Number(H.target.value)),className:"text-sm border rounded px-2 py-1",children:[s.jsx("option",{value:1e4,children:"10s"}),s.jsx("option",{value:3e4,children:"30s"}),s.jsx("option",{value:6e4,children:"1m"}),s.jsx("option",{value:3e5,children:"5m"})]}),s.jsx("button",{onClick:S,className:"p-2 text-blue-600 hover:text-blue-700",title:"Refresh now",children:s.jsx(Pk,{})})]}),s.jsxs("button",{onClick:()=>v(!b),className:"flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm border hover:bg-gray-50",children:[s.jsx(jk,{}),s.jsx("span",{children:"Filters"})]}),s.jsxs("button",{onClick:()=>m(!u),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[s.jsx(k2,{}),s.jsx("span",{children:"Custom Report"})]})]})]}),b&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),s.jsxs("select",{value:w.dateRange,onChange:H=>T("dateRange",H.target.value),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"1d",children:"Last 24 hours"}),s.jsx("option",{value:"7d",children:"Last 7 days"}),s.jsx("option",{value:"30d",children:"Last 30 days"}),s.jsx("option",{value:"90d",children:"Last 90 days"}),s.jsx("option",{value:"1y",children:"Last year"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Type"}),s.jsxs("select",{value:w.serviceType,onChange:H=>T("serviceType",H.target.value),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Services"}),s.jsx("option",{value:"maintenance",children:"Maintenance"}),s.jsx("option",{value:"repair",children:"Repair"}),s.jsx("option",{value:"diagnostic",children:"Diagnostic"}),s.jsx("option",{value:"emergency",children:"Emergency"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technician"}),s.jsxs("select",{value:w.technician,onChange:H=>T("technician",H.target.value),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Technicians"}),s.jsx("option",{value:"john",children:"John Smith"}),s.jsx("option",{value:"sarah",children:"Sarah Johnson"}),s.jsx("option",{value:"mike",children:"Mike Davis"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:w.status,onChange:H=>T("status",H.target.value),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})]}),u&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Custom Report Builder"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Metrics"}),s.jsx("div",{className:"space-y-2",children:["Revenue","Appointments","Customers","Services"].map(H=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:h.includes(H),onChange:W=>{W.target.checked?x([...h,H]):x(h.filter(J=>J!==H))},className:"mr-2"}),H]},H))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",value:g.start,onChange:H=>f({...g,start:H.target.value}),className:"w-full border rounded-lg px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",value:g.end,onChange:H=>f({...g,end:H.target.value}),className:"w-full border rounded-lg px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chart Type"}),s.jsxs("select",{value:y,onChange:H=>p(H.target.value),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"line",children:"Line Chart"}),s.jsx("option",{value:"bar",children:"Bar Chart"}),s.jsx("option",{value:"pie",children:"Pie Chart"}),s.jsx("option",{value:"doughnut",children:"Doughnut Chart"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:L,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[s.jsx(ry,{}),"Generate Report"]}),s.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(e==null?void 0:e.totalCustomers)||0})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:s.jsx(Z0,{className:"text-blue-600 text-xl"})})]}),s.jsx("div",{className:"mt-4",children:s.jsx("span",{className:"text-sm text-green-600",children:"+12% from last month"})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Appointments"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(e==null?void 0:e.totalAppointments)||0})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:s.jsx(sy,{className:"text-green-600 text-xl"})})]}),s.jsx("div",{className:"mt-4",children:s.jsx("span",{className:"text-sm text-green-600",children:"+8% from last month"})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",((U=e==null?void 0:e.totalRevenue)==null?void 0:U.toLocaleString())||0]})]}),s.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:s.jsx(_2,{className:"text-yellow-600 text-xl"})})]}),s.jsx("div",{className:"mt-4",children:s.jsx("span",{className:"text-sm text-green-600",children:"+15% from last month"})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(e==null?void 0:e.pendingTasks)||0})]}),s.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:s.jsx(Fd,{className:"text-red-600 text-xl"})})]}),s.jsx("div",{className:"mt-4",children:s.jsx("span",{className:"text-sm text-red-600",children:"-5% from last month"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue Trends"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gk,{className:"text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Last 6 months"})]})]}),s.jsx("div",{className:"h-64",children:s.jsx(vx,{data:k,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(H){return"$"+H.toLocaleString()}}}}}})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service Distribution"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fk,{className:"text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-600",children:"This month"})]})]}),s.jsx("div",{className:"h-64",children:s.jsx(uw,{data:P,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Weekly Appointments"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pk,{className:"text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-600",children:"This week"})]})]}),s.jsx("div",{className:"h-64",children:s.jsx(jx,{data:_,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:"View Today's Appointments"}),s.jsx(sy,{className:"text-blue-600"})]})}),s.jsx("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:"Generate Monthly Report"}),s.jsx(ry,{className:"text-green-600"})]})}),s.jsx("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:"View Pending Tasks"}),s.jsx(Fd,{className:"text-red-600"})]})}),s.jsx("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:"Customer Analytics"}),s.jsx(Z0,{className:"text-purple-600"})]})})]})]})]})]})},RE=()=>{const[t,e]=j.useState(!1),r=gr(),{isAuthenticated:a}=xs(),n=[{name:"Home",href:"/"},{name:"Services",href:"/services"},{name:"About",href:"/about"},{name:"Contact",href:"/contact"},{name:"Appointments",href:"/appointments"}],i=l=>r.pathname===l;return s.jsxs("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsxs(me,{to:a?"/admin/dashboard":"/",className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-white font-bold text-xl",children:"A"})}),s.jsxs("div",{children:[s.jsx("div",{className:`text-xl font-bold ${a?"text-yellow-600 hover:text-yellow-700":"text-gray-900"} transition-colors`,children:"Auto Repair Pro"}),s.jsx("div",{className:"text-xs text-gray-600",children:"Professional Auto Care"})]})]})}),s.jsx("div",{className:"hidden md:block",children:s.jsx("div",{className:"ml-10 flex items-baseline space-x-8",children:n.map(l=>s.jsx(me,{to:l.href,className:`px-3 py-2 rounded-md text-sm font-medium transition duration-300 ${i(l.href)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:l.name},l.name))})}),s.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(Xl,{className:"mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:"(555) 123-4567"})]}),a?s.jsx(me,{to:Ve.isAdmin()?"/admin/dashboard":"/customer/dashboard",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-300",children:"Dashboard"}):s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(me,{to:"/auth/login",className:"text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition duration-300",children:"Sign In"}),s.jsx(me,{to:"/auth/register",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-300",children:"Sign Up"})]}),s.jsx(me,{to:"/appointments",className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-300",children:"Book Now"})]}),s.jsx("div",{className:"md:hidden",children:s.jsx("button",{onClick:()=>e(!t),className:"text-gray-700 hover:text-blue-600 focus:outline-none focus:text-blue-600",children:t?s.jsx(A2,{className:"h-6 w-6"}):s.jsx(xk,{className:"h-6 w-6"})})})]})}),t&&s.jsx("div",{className:"md:hidden",children:s.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t",children:[n.map(l=>s.jsx(me,{to:l.href,className:`block px-3 py-2 rounded-md text-base font-medium transition duration-300 ${i(l.href)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,onClick:()=>e(!1),children:l.name},l.name)),s.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center px-3 py-2 text-gray-600",children:[s.jsx(Xl,{className:"mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:"(555) 123-4567"})]}),a?s.jsx(me,{to:Ve.isAdmin()?"/admin/dashboard":"/customer/dashboard",className:"block px-3 py-2 text-green-600 hover:text-green-700 text-base font-medium transition duration-300",onClick:()=>e(!1),children:"Dashboard"}):s.jsxs(s.Fragment,{children:[s.jsx(me,{to:"/auth/login",className:"block px-3 py-2 text-gray-700 hover:text-blue-600 text-base font-medium transition duration-300",onClick:()=>e(!1),children:"Sign In"}),s.jsx(me,{to:"/auth/register",className:"block px-3 py-2 text-blue-600 hover:text-blue-700 text-base font-medium transition duration-300",onClick:()=>e(!1),children:"Sign Up"})]}),s.jsx(me,{to:"/appointments",className:"block mt-2 mx-3 bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-center font-medium transition duration-300",onClick:()=>e(!1),children:"Book Appointment"})]})]})})]})},LE=()=>{const t=new Date().getFullYear(),e=[{name:"Home",href:"/"},{name:"Services",href:"/services"},{name:"About Us",href:"/about"},{name:"Contact",href:"/contact"},{name:"Appointments",href:"/appointments"}],r=[{name:"Oil Change",href:"/services"},{name:"Brake Service",href:"/services"},{name:"Engine Diagnostics",href:"/services"},{name:"Tire Service",href:"/services"},{name:"AC/Heating",href:"/services"}],a=[{icon:s.jsx(N2,{}),href:"#",label:"Facebook"},{icon:s.jsx(C2,{}),href:"#",label:"Twitter"},{icon:s.jsx(w2,{}),href:"#",label:"Instagram"},{icon:s.jsx(S2,{}),href:"#",label:"LinkedIn"}];return s.jsxs("footer",{className:"bg-gray-900 text-white",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-white font-bold text-xl",children:"A"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold",children:"Auto Repair Pro"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Professional Auto Care"})]})]}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Your trusted partner in automotive care for over 15 years. We're committed to providing honest, reliable, and professional auto repair services."}),s.jsx("div",{className:"flex space-x-4",children:a.map((n,i)=>s.jsx("a",{href:n.href,className:"w-10 h-10 bg-gray-800 hover:bg-blue-600 text-white rounded-full flex items-center justify-center transition duration-300","aria-label":n.label,children:n.icon},i))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),s.jsx("ul",{className:"space-y-2",children:e.map((n,i)=>s.jsx("li",{children:s.jsxs(me,{to:n.href,className:"text-gray-400 hover:text-white transition duration-300 flex items-center",children:[s.jsx(J0,{className:"mr-2 text-xs"}),n.name]})},i))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Our Services"}),s.jsx("ul",{className:"space-y-2",children:r.map((n,i)=>s.jsx("li",{children:s.jsxs(me,{to:n.href,className:"text-gray-400 hover:text-white transition duration-300 flex items-center",children:[s.jsx(J0,{className:"mr-2 text-xs"}),n.name]})},i))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact Info"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(Xl,{className:"text-blue-500 mr-3 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400",children:"Phone"}),s.jsx("p",{className:"text-white",children:"(555) 123-4567"}),s.jsx("p",{className:"text-white",children:"(555) 123-4568 (Emergency)"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(P2,{className:"text-blue-500 mr-3 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400",children:"Email"}),s.jsx("p",{className:"text-white",children:"info@autorepair.com"}),s.jsx("p",{className:"text-white",children:"service@autorepair.com"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(Od,{className:"text-blue-500 mr-3 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400",children:"Address"}),s.jsx("p",{className:"text-white",children:"123 Auto Repair Street"}),s.jsx("p",{className:"text-white",children:"City, State 12345"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(em,{className:"text-blue-500 mr-3 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400",children:"Hours"}),s.jsx("p",{className:"text-white",children:"Mon-Fri: 8AM-6PM"}),s.jsx("p",{className:"text-white",children:"Sat: 9AM-4PM"})]})]})]})]})]})}),s.jsx("div",{className:"bg-gray-800 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Stay Updated"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Subscribe to our newsletter for maintenance tips and special offers."}),s.jsxs("div",{className:"max-w-md mx-auto flex",children:[s.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-2 rounded-l-lg border-0 focus:ring-2 focus:ring-blue-500 text-gray-900"}),s.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-r-lg transition duration-300",children:"Subscribe"})]})]})})}),s.jsx("div",{className:"bg-gray-950 py-4",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[s.jsxs("div",{className:"text-gray-400 text-sm",children:[" ",t," Auto Repair Pro. All rights reserved."]}),s.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[s.jsx(me,{to:"/privacy",className:"text-gray-400 hover:text-white text-sm transition duration-300",children:"Privacy Policy"}),s.jsx(me,{to:"/terms",className:"text-gray-400 hover:text-white text-sm transition duration-300",children:"Terms of Service"}),s.jsx(me,{to:"/sitemap",className:"text-gray-400 hover:text-white text-sm transition duration-300",children:"Sitemap"})]})]})})})]})},OE=()=>{const[t,e]=j.useState(!1),[r,a]=j.useState(!1),[n,i]=j.useState([{id:"1",text:"Hello! Welcome to Auto Repair Pro. How can we help you today?",sender:"agent",timestamp:new Date}]),[l,o]=j.useState(""),[c,d]=j.useState(!1),u=j.useRef(null),m=j.useRef(null),h=()=>{var y;(y=u.current)==null||y.scrollIntoView({behavior:"smooth"})};j.useEffect(()=>{h()},[n]),j.useEffect(()=>{t&&m.current&&m.current.focus()},[t]);const x=()=>{if(!l.trim())return;const y={id:Date.now().toString(),text:l,sender:"user",timestamp:new Date};i(p=>[...p,y]),o(""),d(!0),setTimeout(()=>{const p={id:(Date.now()+1).toString(),text:g(l),sender:"agent",timestamp:new Date};i(b=>[...b,p]),d(!1)},1e3+Math.random()*2e3)},g=y=>{const p=y.toLowerCase();return p.includes("appointment")||p.includes("book")||p.includes("schedule")?"Great! You can book an appointment through our website or call us at (555) 123-4567. What type of service do you need?":p.includes("price")||p.includes("cost")||p.includes("quote")?"Our prices vary depending on the service needed. You can view our service prices on our website, or call us for a detailed quote. What specific service are you looking for?":p.includes("hours")||p.includes("open")||p.includes("time")?"We're open Monday through Friday from 8:00 AM to 6:00 PM, and Saturdays from 9:00 AM to 4:00 PM. We're closed on Sundays.":p.includes("emergency")||p.includes("urgent")||p.includes("help")?"For emergency services, please call our emergency line at (555) 123-4568. We provide 24/7 roadside assistance and emergency repairs.":p.includes("location")||p.includes("address")||p.includes("where")?"We're located at 123 Auto Repair Street, City, State 12345. You can find directions on our website or call us for assistance.":"Thank you for your message! A live agent will be with you shortly. In the meantime, you can also call us at (555) 123-4567 for immediate assistance."},f=y=>{y.key==="Enter"&&x()};return r?s.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:s.jsx("button",{onClick:()=>a(!1),className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg transition duration-300",children:s.jsx(Um,{className:"text-xl"})})}):s.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:t?s.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-gray-200 w-80 h-96 flex flex-col",children:[s.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Um,{}),s.jsx("span",{className:"font-semibold",children:"Live Chat"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>a(!0),className:"hover:bg-blue-700 p-1 rounded",children:s.jsx(Tk,{className:"text-sm"})}),s.jsx("button",{onClick:()=>e(!1),className:"hover:bg-blue-700 p-1 rounded",children:s.jsx(A2,{className:"text-sm"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[n.map(y=>s.jsx("div",{className:`flex ${y.sender==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs px-3 py-2 rounded-lg ${y.sender==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[y.sender==="user"?s.jsx(M2,{className:"text-xs"}):s.jsx(ay,{className:"text-xs"}),s.jsx("span",{className:"text-xs opacity-75",children:y.sender==="user"?"You":"Auto Repair Pro"})]}),s.jsx("p",{className:"text-sm",children:y.text}),s.jsx("p",{className:"text-xs opacity-75 mt-1",children:y.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},y.id)),c&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"bg-gray-100 text-gray-800 px-3 py-2 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ay,{className:"text-xs"}),s.jsx("span",{className:"text-xs",children:"Agent is typing..."})]}),s.jsxs("div",{className:"flex space-x-1 mt-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})}),s.jsx("div",{ref:u})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{ref:m,type:"text",value:l,onChange:y=>o(y.target.value),onKeyPress:f,placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("button",{onClick:x,disabled:!l.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white p-2 rounded-lg transition duration-300",children:s.jsx(kk,{className:"text-sm"})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send  Usually responds in a few seconds"})]})]}):s.jsxs("button",{onClick:()=>e(!0),className:"bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg transition duration-300 flex items-center space-x-2",children:[s.jsx(Um,{className:"text-xl"}),s.jsx("span",{className:"text-sm font-medium",children:"Chat with us"})]})})},Yi=({children:t})=>s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(RE,{}),s.jsx("main",{className:"flex-grow",children:t}),s.jsx(LE,{}),s.jsx(OE,{})]}),nv=()=>{const{isAuthenticated:t}=xs(),e=[{icon:s.jsx(Mp,{className:"text-4xl text-blue-600"}),title:"Engine Diagnostics",description:"Advanced computer diagnostics to identify engine issues quickly and accurately."},{icon:s.jsx(Fd,{className:"text-4xl text-blue-600"}),title:"Brake Service",description:"Complete brake system inspection, repair, and replacement services."},{icon:s.jsx(D2,{className:"text-4xl text-blue-600"}),title:"Oil Change",description:"Professional oil change service with quality filters and lubricants."},{icon:s.jsx(Ep,{className:"text-4xl text-blue-600"}),title:"Preventive Maintenance",description:"Regular maintenance to keep your vehicle running smoothly and safely."}],r=[{name:"John Smith",rating:5,text:"Excellent service! They fixed my transmission issues quickly and at a fair price. Highly recommended!",vehicle:"2018 Toyota Camry"},{name:"Sarah Johnson",rating:5,text:"Very professional and honest. They explained everything clearly and didn't try to sell unnecessary repairs.",vehicle:"2020 Honda CR-V"},{name:"Mike Davis",rating:5,text:"Fast turnaround time and great communication throughout the entire process. Will definitely return!",vehicle:"2019 Ford F-150"}],a=[{number:"5000+",label:"Happy Customers"},{number:"15+",label:"Years Experience"},{number:"24/7",label:"Emergency Service"},{number:"100%",label:"Satisfaction Guarantee"}];return s.jsxs("div",{className:"min-h-screen",children:[s.jsxs("section",{className:"relative text-white",style:{backgroundImage:"url(/images/banner.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[s.jsx("div",{className:"absolute inset-0 bg-black opacity-60"}),s.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:t?s.jsx(me,{to:"/admin/dashboard",className:"text-yellow-400 hover:text-yellow-300 transition-colors cursor-pointer",children:"Professional Auto Repair Services"}):"Professional Auto Repair Services"}),s.jsx("p",{className:"text-xl mb-8 text-blue-100",children:"Expert mechanics, quality parts, and honest service. Your vehicle deserves the best care."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(me,{to:"/appointments",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold text-center transition duration-300",children:"Book Appointment"}),!t&&s.jsx(me,{to:"/auth/register",className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-semibold text-center transition duration-300",children:"Join Now"}),s.jsx(me,{to:"/services",className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-8 py-3 rounded-lg font-semibold text-center transition duration-300",children:"Our Services"})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-8",children:[s.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Quick Contact"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xl,{className:"text-blue-300 mr-3"}),s.jsx("span",{children:"(555) 123-4567"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Od,{className:"text-blue-300 mr-3"}),s.jsx("span",{children:"123 Auto Repair St, City, State 12345"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(em,{className:"text-blue-300 mr-3"}),s.jsx("span",{children:"Mon-Fri: 8AM-6PM, Sat: 9AM-4PM"})]})]})]})})]})})]}),s.jsx("section",{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Services"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"We provide comprehensive auto repair and maintenance services to keep your vehicle running at its best."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((n,i)=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition duration-300",children:[s.jsx("div",{className:"flex justify-center mb-4",children:n.icon}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:n.title}),s.jsx("p",{className:"text-gray-600",children:n.description})]},i))}),s.jsx("div",{className:"text-center mt-12",children:s.jsx(me,{to:"/services",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-300",children:"View All Services"})})]})}),s.jsx("section",{className:"py-16 bg-blue-600 text-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:a.map((n,i)=>s.jsxs("div",{children:[s.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:n.number}),s.jsx("div",{className:"text-blue-100",children:n.label})]},i))})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"What Our Customers Say"}),s.jsx("p",{className:"text-xl text-gray-600",children:"Don't just take our word for it - hear from our satisfied customers."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((n,i)=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("div",{className:"flex mb-4",children:[...Array(n.rating)].map((l,o)=>s.jsx(Ba,{className:"text-yellow-400"},o))}),s.jsxs("p",{className:"text-gray-700 mb-4 italic",children:['"',n.text,'"']}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:n.name}),s.jsx("p",{className:"text-sm text-gray-600",children:n.vehicle})]})]},i))})]})}),s.jsx("section",{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose Us?"}),s.jsx("p",{className:"text-xl text-gray-600",children:"We're committed to providing the best auto repair experience."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(qr,{className:"text-green-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Certified Technicians"}),s.jsx("p",{className:"text-gray-600",children:"Our team consists of ASE-certified mechanics with years of experience."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(qr,{className:"text-green-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Quality Parts"}),s.jsx("p",{className:"text-gray-600",children:"We use only high-quality OEM and aftermarket parts for all repairs."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(qr,{className:"text-green-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Warranty"}),s.jsx("p",{className:"text-gray-600",children:"All our work comes with a comprehensive warranty for your peace of mind."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(qr,{className:"text-green-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Transparent Pricing"}),s.jsx("p",{className:"text-gray-600",children:"No hidden fees or surprises - we provide clear, upfront pricing."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(qr,{className:"text-green-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Fast Service"}),s.jsx("p",{className:"text-gray-600",children:"Most repairs completed same-day or within 24 hours."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(qr,{className:"text-green-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Customer Service"}),s.jsx("p",{className:"text-gray-600",children:"Dedicated customer service team to answer all your questions."})]})]})]})]})}),!t&&s.jsx("section",{className:"py-16 bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Join Our Community"}),s.jsx("p",{className:"text-xl mb-8 text-purple-100",children:"Create an account to manage your vehicles, track service history, and book appointments easily."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(me,{to:"/auth/register",className:"bg-white hover:bg-gray-100 text-purple-600 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Create Account"}),s.jsx(me,{to:"/auth/login",className:"border-2 border-white text-white hover:bg-white hover:text-purple-600 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Sign In"})]}),s.jsx("div",{className:"mt-6 text-sm text-purple-200",children:s.jsx("p",{children:"For business owners and staff, create an admin account to manage operations."})})]})}),s.jsx("section",{className:"py-16 bg-blue-900 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Get Started?"}),s.jsx("p",{className:"text-xl mb-8 text-blue-100",children:"Schedule your appointment today and experience the difference professional auto care makes."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(me,{to:"/appointments",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Book Appointment"}),s.jsx(me,{to:"/contact",className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Contact Us"})]})]})})]})},FE=()=>{const[t,e]=j.useState("all"),r=[{id:"all",name:"All Services"},{id:"maintenance",name:"Maintenance"},{id:"repair",name:"Repair"},{id:"diagnostic",name:"Diagnostics"},{id:"emergency",name:"Emergency"}],a=[{id:1,name:"Oil Change Service",category:"maintenance",description:"Complete oil change service including filter replacement and multi-point inspection.",price:"$29.99",duration:"30-45 min",icon:s.jsx(Ck,{className:"text-3xl text-blue-600"}),features:["Synthetic or conventional oil","Oil filter replacement","Multi-point inspection","Tire pressure check","Fluid level check"]},{id:2,name:"Brake Service",category:"repair",description:"Complete brake system inspection, repair, and replacement services.",price:"From $89.99",duration:"2-4 hours",icon:s.jsx(yk,{className:"text-3xl text-red-600"}),features:["Brake pad replacement","Rotor inspection/resurfacing","Brake fluid check","Caliper inspection","Brake line inspection"]},{id:3,name:"Engine Diagnostics",category:"diagnostic",description:"Advanced computer diagnostics to identify engine issues quickly and accurately.",price:"$49.99",duration:"1-2 hours",icon:s.jsx(k2,{className:"text-3xl text-green-600"}),features:["Computer code reading","Engine performance analysis","Emission system check","Detailed diagnostic report","Repair recommendations"]},{id:4,name:"Tire Service",category:"maintenance",description:"Tire rotation, balancing, and replacement services.",price:"From $19.99",duration:"1-2 hours",icon:s.jsx(Mp,{className:"text-3xl text-gray-600"}),features:["Tire rotation","Wheel balancing","Tire pressure monitoring","Tread depth check","Tire replacement"]},{id:5,name:"Transmission Service",category:"repair",description:"Transmission fluid change and transmission system maintenance.",price:"From $129.99",duration:"2-3 hours",icon:s.jsx(T2,{className:"text-3xl text-purple-600"}),features:["Transmission fluid change","Filter replacement","Pan cleaning","Gasket replacement","Transmission inspection"]},{id:6,name:"AC/Heating Service",category:"repair",description:"Air conditioning and heating system diagnosis and repair.",price:"From $79.99",duration:"1-3 hours",icon:s.jsx(Ep,{className:"text-3xl text-blue-400"}),features:["AC system diagnosis","Refrigerant recharge","Compressor inspection","Heater core check","Thermostat replacement"]},{id:7,name:"Battery Service",category:"emergency",description:"Battery testing, replacement, and jump start services.",price:"From $39.99",duration:"30-60 min",icon:s.jsx(D2,{className:"text-3xl text-yellow-600"}),features:["Battery testing","Battery replacement","Jump start service","Terminal cleaning","Charging system check"]},{id:8,name:"Preventive Maintenance",category:"maintenance",description:"Comprehensive maintenance packages to keep your vehicle running smoothly.",price:"From $149.99",duration:"2-4 hours",icon:s.jsx(Fd,{className:"text-3xl text-orange-600"}),features:["Full inspection","Fluid changes","Filter replacements","Belt inspection","Safety check"]}],n=t==="all"?a:a.filter(i=>i.category===t);return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Our Services"}),s.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Comprehensive auto repair and maintenance services to keep your vehicle running at peak performance."})]})})}),s.jsx("section",{className:"py-8 bg-white border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:r.map(i=>s.jsx("button",{onClick:()=>e(i.id),className:`px-6 py-2 rounded-full font-semibold transition duration-300 ${t===i.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:i.name},i.id))})})}),s.jsx("section",{className:"py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(i=>s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center",children:[i.icon,s.jsx("h3",{className:"text-xl font-semibold text-gray-900 ml-3",children:i.name})]})}),s.jsx("p",{className:"text-gray-600 mb-4",children:i.description}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center text-green-600 font-semibold",children:[s.jsx(_2,{className:"mr-1"}),i.price]}),s.jsxs("div",{className:"flex items-center text-gray-500",children:[s.jsx(em,{className:"mr-1"}),i.duration]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Includes:"}),s.jsx("ul",{className:"space-y-1",children:i.features.map((l,o)=>s.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Jt,{className:"text-green-500 mr-2 text-xs"}),l]},o))})]}),s.jsxs(me,{to:`/appointments?service=${i.id}`,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold text-center transition duration-300 flex items-center justify-center",children:["Book Service",s.jsx(J0,{className:"ml-2"})]})]})},i.id))})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Service Packages"}),s.jsx("p",{className:"text-xl text-gray-600",children:"Save money with our comprehensive service packages."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Basic Package"}),s.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-6",children:"$99.99"}),s.jsxs("ul",{className:"space-y-3 mb-8",children:[s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Oil Change"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Tire Rotation"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Multi-point Inspection"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Fluid Level Check"]})]}),s.jsx(me,{to:"/appointments?package=basic",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition duration-300",children:"Book Package"})]}),s.jsxs("div",{className:"bg-blue-600 rounded-lg p-8 text-center text-white relative",children:[s.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:s.jsx("span",{className:"bg-red-500 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"Most Popular"})}),s.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Premium Package"}),s.jsx("div",{className:"text-4xl font-bold mb-6",children:"$199.99"}),s.jsxs("ul",{className:"space-y-3 mb-8",children:[s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"mr-2"}),"Everything in Basic"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"mr-2"}),"Brake Inspection"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"mr-2"}),"AC System Check"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"mr-2"}),"Battery Test"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"mr-2"}),"Engine Diagnostics"]})]}),s.jsx(me,{to:"/appointments?package=premium",className:"w-full bg-white text-blue-600 hover:bg-gray-100 py-3 px-6 rounded-lg font-semibold transition duration-300",children:"Book Package"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ultimate Package"}),s.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-6",children:"$349.99"}),s.jsxs("ul",{className:"space-y-3 mb-8",children:[s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Everything in Premium"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Transmission Service"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Coolant Flush"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Fuel System Clean"]}),s.jsxs("li",{className:"flex items-center justify-center",children:[s.jsx(Jt,{className:"text-green-500 mr-2"}),"Full Detail"]})]}),s.jsx(me,{to:"/appointments?package=ultimate",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition duration-300",children:"Book Package"})]})]})]})}),s.jsx("section",{className:"py-16 bg-blue-900 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Need a Custom Service?"}),s.jsx("p",{className:"text-xl mb-8 text-blue-100",children:"Contact us for custom service packages or specific repairs not listed above."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(me,{to:"/contact",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Contact Us"}),s.jsx(me,{to:"/appointments",className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Book Appointment"})]})]})})]})},$E=()=>{const t=[{name:"John Smith",position:"Owner & Master Technician",experience:"20+ years",specialties:["Engine Diagnostics","Transmission Repair","Electrical Systems"],image:"https://via.placeholder.com/200x200?text=John+Smith"},{name:"Sarah Johnson",position:"Service Manager",experience:"15+ years",specialties:["Customer Service","Service Coordination","Quality Control"],image:"https://via.placeholder.com/200x200?text=Sarah+Johnson"},{name:"Mike Davis",position:"Senior Technician",experience:"12+ years",specialties:["Brake Systems","Suspension","AC/Heating"],image:"https://via.placeholder.com/200x200?text=Mike+Davis"},{name:"Lisa Chen",position:"Diagnostic Specialist",experience:"10+ years",specialties:["Computer Diagnostics","Hybrid Vehicles","Emission Systems"],image:"https://via.placeholder.com/200x200?text=Lisa+Chen"}],e=[{icon:s.jsx(wk,{className:"text-3xl text-red-500"}),title:"Passion for Excellence",description:"We're passionate about cars and committed to delivering the highest quality service to every customer."},{icon:s.jsx(Ep,{className:"text-3xl text-blue-500"}),title:"Integrity & Trust",description:"We believe in honest, transparent communication and building lasting relationships with our customers."},{icon:s.jsx(Sk,{className:"text-3xl text-yellow-500"}),title:"Innovation",description:"We stay current with the latest automotive technology and continuously improve our processes."},{icon:s.jsx(Nk,{className:"text-3xl text-green-500"}),title:"Customer Focus",description:"Your satisfaction is our priority. We treat every vehicle as if it were our own."}],r=[{number:"5000+",label:"Happy Customers",description:"Satisfied customers who trust us with their vehicles"},{number:"15+",label:"Years Experience",description:"Decades of combined automotive expertise"},{number:"100%",label:"Satisfaction Rate",description:"Customer satisfaction guarantee on all work"},{number:"24/7",label:"Emergency Service",description:"Round-the-clock emergency roadside assistance"}],a=["ASE Certified Master Technician","BMW Certified Service Center","Toyota Certified Service Center","Honda Certified Service Center","Ford Certified Service Center","GM Certified Service Center","EPA Certified Refrigerant Handler","OSHA Safety Certified"];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"About Us"}),s.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Your trusted partner in automotive care for over 15 years. We're committed to providing honest, reliable, and professional auto repair services."})]})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Our Story"}),s.jsxs("div",{className:"space-y-4 text-gray-600",children:[s.jsx("p",{children:"Founded in 2008, Auto Repair Pro has been serving the community with dedication and expertise. What started as a small family-owned shop has grown into one of the most trusted auto repair facilities in the region."}),s.jsx("p",{children:"Our founder, John Smith, began his automotive career as an apprentice mechanic at the age of 16. His passion for cars and commitment to honest service led him to establish Auto Repair Pro with a simple mission: to provide reliable, affordable, and honest auto repair services."}),s.jsx("p",{children:"Over the years, we've expanded our team, invested in state-of-the-art diagnostic equipment, and maintained our commitment to customer satisfaction. Today, we're proud to serve thousands of customers with the same dedication and integrity that started it all."})]})]}),s.jsx("div",{className:"bg-gray-200 rounded-lg h-96 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-600",children:[s.jsx(Mp,{className:"text-6xl mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-semibold",children:"Company Image"}),s.jsx("p",{className:"text-sm",children:"(Shop photo would go here)"})]})})]})})}),s.jsx("section",{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Values"}),s.jsx("p",{className:"text-xl text-gray-600",children:"The principles that guide everything we do."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((n,i)=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:n.icon}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:n.title}),s.jsx("p",{className:"text-gray-600",children:n.description})]},i))})]})}),s.jsx("section",{className:"py-16 bg-blue-600 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Our Achievements"}),s.jsx("p",{className:"text-xl text-blue-100",children:"Numbers that speak for themselves."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((n,i)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:n.number}),s.jsx("div",{className:"text-xl font-semibold mb-2",children:n.label}),s.jsx("div",{className:"text-blue-100",children:n.description})]},i))})]})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Meet Our Team"}),s.jsx("p",{className:"text-xl text-gray-600",children:"Experienced professionals dedicated to your vehicle's care."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,i)=>s.jsxs("div",{className:"bg-gray-50 rounded-lg overflow-hidden shadow-md",children:[s.jsx("div",{className:"bg-gray-200 h-48 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-600",children:[s.jsx(Z0,{className:"text-4xl mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Photo"})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-1",children:n.name}),s.jsx("p",{className:"text-blue-600 font-medium mb-2",children:n.position}),s.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[n.experience," experience"]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Specialties:"}),s.jsx("ul",{className:"space-y-1",children:n.specialties.map((l,o)=>s.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(qr,{className:"text-green-500 mr-2 text-xs"}),l]},o))})]})]})]},i))})]})}),s.jsx("section",{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Certifications & Training"}),s.jsx("p",{className:"text-xl text-gray-600",children:"Our team maintains the highest standards of professional certification."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map((n,i)=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[s.jsx(hk,{className:"text-3xl text-blue-600 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-900 font-medium",children:n})]},i))})]})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose Auto Repair Pro?"}),s.jsx("p",{className:"text-xl text-gray-600",children:"We're not just another auto repair shop - we're your automotive partners."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ba,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Expert Technicians"}),s.jsx("p",{className:"text-gray-600",children:"Our ASE-certified technicians have years of experience and ongoing training to stay current with the latest automotive technology."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ba,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Quality Parts"}),s.jsx("p",{className:"text-gray-600",children:"We use only high-quality OEM and aftermarket parts backed by manufacturer warranties."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ba,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Honest Pricing"}),s.jsx("p",{className:"text-gray-600",children:"No hidden fees or surprises. We provide clear, upfront pricing and detailed estimates before any work begins."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ba,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Warranty Protection"}),s.jsx("p",{className:"text-gray-600",children:"All our work comes with a comprehensive warranty for your peace of mind."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ba,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Convenient Service"}),s.jsx("p",{className:"text-gray-600",children:"Online appointment booking, shuttle service, and loaner vehicles available for your convenience."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ba,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Customer Focus"}),s.jsx("p",{className:"text-gray-600",children:"We treat every customer like family and every vehicle as if it were our own."})]})]})]})]})}),s.jsx("section",{className:"py-16 bg-blue-900 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Experience the Difference?"}),s.jsx("p",{className:"text-xl mb-8 text-blue-100",children:"Join thousands of satisfied customers who trust Auto Repair Pro with their vehicles."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx("a",{href:"/appointments",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Schedule Service"}),s.jsx("a",{href:"/contact",className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Contact Us"})]})]})})]})},zE=()=>{const[t,e]=j.useState({name:"",email:"",phone:"",subject:"",message:""}),[r,a]=j.useState(!1),n=c=>{const{name:d,value:u}=c.target;e(m=>({...m,[d]:u}))},i=c=>{c.preventDefault(),console.log("Form submitted:",t),a(!0),e({name:"",email:"",phone:"",subject:"",message:""}),setTimeout(()=>a(!1),5e3)},l=[{icon:s.jsx(Xl,{className:"text-2xl text-blue-600"}),title:"Phone",details:["Main: (555) 123-4567","Emergency: (555) 123-4568"]},{icon:s.jsx(P2,{className:"text-2xl text-blue-600"}),title:"Email",details:["info@autorepair.com","service@autorepair.com"]},{icon:s.jsx(Od,{className:"text-2xl text-blue-600"}),title:"Address",details:["123 Auto Repair Street","City, State 12345"]},{icon:s.jsx(em,{className:"text-2xl text-blue-600"}),title:"Business Hours",details:["Monday - Friday: 8:00 AM - 6:00 PM","Saturday: 9:00 AM - 4:00 PM","Sunday: Closed"]}],o=[{icon:s.jsx(N2,{}),href:"#",label:"Facebook"},{icon:s.jsx(C2,{}),href:"#",label:"Twitter"},{icon:s.jsx(w2,{}),href:"#",label:"Instagram"},{icon:s.jsx(S2,{}),href:"#",label:"LinkedIn"}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Contact Us"}),s.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Get in touch with us for any questions, quotes, or to schedule your next service appointment."})]})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:l.map((c,d)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:c.icon}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:c.title}),s.jsx("div",{className:"space-y-1",children:c.details.map((u,m)=>s.jsx("p",{className:"text-gray-600",children:u},m))})]},d))})})}),s.jsx("section",{className:"py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Send us a Message"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg flex items-center",children:[s.jsx(qr,{className:"mr-2"}),"Thank you! Your message has been sent successfully. We'll get back to you soon."]}),s.jsxs("form",{onSubmit:i,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),s.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:n,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),s.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:n,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your.email@example.com"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:n,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(555) 123-4567"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),s.jsxs("select",{id:"subject",name:"subject",value:t.subject,onChange:n,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a subject"}),s.jsx("option",{value:"general",children:"General Inquiry"}),s.jsx("option",{value:"appointment",children:"Appointment Request"}),s.jsx("option",{value:"quote",children:"Quote Request"}),s.jsx("option",{value:"service",children:"Service Question"}),s.jsx("option",{value:"complaint",children:"Complaint"}),s.jsx("option",{value:"feedback",children:"Feedback"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),s.jsx("textarea",{id:"message",name:"message",value:t.message,onChange:n,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please describe your inquiry or request..."})]}),s.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition duration-300",children:"Send Message"})]})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Our Location"}),s.jsx("div",{className:"bg-gray-200 rounded-lg h-64 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-600",children:[s.jsx(Od,{className:"text-4xl mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-semibold",children:"Interactive Map"}),s.jsx("p",{className:"text-sm",children:"123 Auto Repair Street, City, State 12345"}),s.jsx("p",{className:"text-sm mt-2",children:"(Map integration would go here)"})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Follow Us"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Stay connected with us on social media for updates, tips, and special offers."}),s.jsx("div",{className:"flex space-x-4",children:o.map((c,d)=>s.jsx("a",{href:c.href,className:"w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition duration-300","aria-label":c.label,children:c.icon},d))})]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-red-800 mb-2",children:"Emergency Service"}),s.jsx("p",{className:"text-red-700 mb-4",children:"Need immediate assistance? Call our emergency line:"}),s.jsx("div",{className:"text-2xl font-bold text-red-800",children:"(555) 123-4568"}),s.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Available 24/7 for roadside assistance and emergency repairs"})]})]})]})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),s.jsx("p",{className:"text-xl text-gray-600",children:"Find answers to common questions about our services."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What are your business hours?"}),s.jsx("p",{className:"text-gray-600",children:"We're open Monday through Friday from 8:00 AM to 6:00 PM, and Saturdays from 9:00 AM to 4:00 PM. We're closed on Sundays."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Do you offer emergency services?"}),s.jsx("p",{className:"text-gray-600",children:"Yes, we provide 24/7 emergency roadside assistance and emergency repair services. Call our emergency line at (555) 123-4568."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What types of vehicles do you service?"}),s.jsx("p",{className:"text-gray-600",children:"We service all makes and models of cars, trucks, and SUVs. Our certified technicians are trained to work on domestic and foreign vehicles."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Do you provide warranties on your work?"}),s.jsx("p",{className:"text-gray-600",children:"Yes, all our work comes with a comprehensive warranty. We stand behind the quality of our repairs and parts."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Can I get a quote over the phone?"}),s.jsx("p",{className:"text-gray-600",children:"While we can provide general estimates over the phone, we recommend an in-person inspection for accurate pricing as vehicle conditions vary."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Do you accept insurance claims?"}),s.jsx("p",{className:"text-gray-600",children:"Yes, we work with most major insurance companies and can help you navigate the claims process for accident-related repairs."})]})]})]})]})})]})};function BE(){const{isAuthenticated:t,isLoading:e}=xs();return e?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs(I3,{children:[s.jsx(be,{path:"/",element:s.jsx(Yi,{children:s.jsx(nv,{})})}),s.jsx(be,{path:"/services",element:s.jsx(Yi,{children:s.jsx(FE,{})})}),s.jsx(be,{path:"/about",element:s.jsx(Yi,{children:s.jsx($E,{})})}),s.jsx(be,{path:"/contact",element:s.jsx(Yi,{children:s.jsx(zE,{})})}),s.jsx(be,{path:"/appointments",element:s.jsx(Yi,{children:s.jsx(nv,{})})}),s.jsx(be,{path:"/auth/login",element:s.jsx(cy,{})}),s.jsx(be,{path:"/auth/register",element:s.jsx(cy,{})}),s.jsx(be,{path:"/admin/login",element:s.jsx(za,{to:"/auth/login",replace:!0})}),s.jsx(be,{path:"/admin/register",element:s.jsx(za,{to:"/auth/register",replace:!0})}),s.jsx(be,{path:"/customer/login",element:s.jsx(za,{to:"/auth/login",replace:!0})}),s.jsx(be,{path:"/customer/register",element:s.jsx(za,{to:"/auth/register",replace:!0})}),s.jsx(be,{path:"/admin",element:s.jsx(za,{to:"/auth/login",replace:!0})}),s.jsxs(be,{path:"/admin/dashboard",element:s.jsx(Qo,{requireAnyAdmin:!0,children:s.jsx(n7,{})}),children:[s.jsx(be,{index:!0,element:s.jsx(av,{})}),s.jsx(be,{path:"overview",element:s.jsx(av,{})}),s.jsx(be,{path:"appointments",element:s.jsx(v_,{})}),s.jsx(be,{path:"customers",element:s.jsx(oP,{})}),s.jsx(be,{path:"customers/new",element:s.jsx(_P,{})}),s.jsx(be,{path:"customers/:id",element:s.jsx(kP,{})}),s.jsx(be,{path:"business-clients",element:s.jsx(MP,{})}),s.jsx(be,{path:"services",element:s.jsx(VP,{})}),s.jsx(be,{path:"invoices",element:s.jsx(D9,{})}),s.jsx(be,{path:"inventory",element:s.jsx(b9,{})}),s.jsx(be,{path:"reports",element:s.jsx(Qo,{requireAnyAdmin:!0,children:s.jsx(_E,{})})}),s.jsx(be,{path:"reminders",element:s.jsx(l9,{})}),s.jsx(be,{path:"tasks",element:s.jsx(B_,{})}),s.jsx(be,{path:"promotions",element:s.jsx(Y_,{})}),s.jsx(be,{path:"contact-logs",element:s.jsx(Q_,{})}),s.jsx(be,{path:"mailchimp",element:s.jsx(G_,{})}),s.jsx(be,{path:"marketing",element:s.jsx(rP,{})}),s.jsx(be,{path:"sms",element:s.jsx(nP,{})}),s.jsx(be,{path:"live-chat",element:s.jsx(iP,{})}),s.jsx(be,{path:"yellowpages",element:s.jsx(lP,{})}),s.jsx(be,{path:"system-admin",element:s.jsx(Qo,{requireSuperAdmin:!0,children:s.jsx(KP,{})})})]}),s.jsxs(be,{path:"/customer/dashboard",element:s.jsx(Qo,{requireCustomer:!0,children:s.jsx(l7,{})}),children:[s.jsx(be,{index:!0,element:s.jsx(o7,{})}),s.jsx(be,{path:"vehicles",element:s.jsx(d7,{})}),s.jsx(be,{path:"appointments",element:s.jsx(j7,{})}),s.jsx(be,{path:"services",element:s.jsx(N7,{})}),s.jsx(be,{path:"invoices",element:s.jsx(w7,{})}),s.jsx(be,{path:"messages",element:s.jsx(S7,{})}),s.jsx(be,{path:"notifications",element:s.jsx(C7,{})}),s.jsx(be,{path:"profile",element:s.jsx(k7,{})})]}),s.jsx(be,{path:"*",element:s.jsx(za,{to:"/",replace:!0})})]}),!1,s.jsx(Ak,{})]})}const VE={list:[],loading:!1,error:null,selectedCustomer:null,pagination:null,stats:null},UE=wt({name:"customers",initialState:VE,reducers:{setSelectedCustomer:(t,e)=>{t.selectedCustomer=e.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Pt.pending,e=>{e.loading=!0,e.error=null}).addCase(Pt.fulfilled,(e,r)=>{e.loading=!1,console.log("fetchCustomers.fulfilled payload:",r.payload);const a=r.payload,n=(a==null?void 0:a.customers)||[];console.log("fetchCustomers.fulfilled customers:",n);const i=n.map(l=>({...l,id:l._id||l.id}));e.list=i,e.pagination=(a==null?void 0:a.pagination)||null,e.error=null}).addCase(Pt.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Vs.pending,e=>{e.loading=!0,e.error=null}).addCase(Vs.fulfilled,(e,r)=>{e.loading=!1,e.selectedCustomer=r.payload,e.error=null}).addCase(Vs.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(an.pending,e=>{e.loading=!0,e.error=null}).addCase(an.fulfilled,(e,r)=>{e.loading=!1,e.list.unshift(r.payload),e.error=null}).addCase(an.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(nn.pending,e=>{e.loading=!0,e.error=null}).addCase(nn.fulfilled,(e,r)=>{var n;e.loading=!1;const a=e.list.findIndex(i=>i._id===r.payload._id);a!==-1&&(e.list[a]=r.payload),((n=e.selectedCustomer)==null?void 0:n._id)===r.payload._id&&(e.selectedCustomer=r.payload),e.error=null}).addCase(nn.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(ga.pending,e=>{e.loading=!0,e.error=null}).addCase(ga.fulfilled,(e,r)=>{var a;e.loading=!1,e.list=e.list.filter(n=>n._id!==r.payload),((a=e.selectedCustomer)==null?void 0:a._id)===r.payload&&(e.selectedCustomer=null),e.error=null}).addCase(ga.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(fa.pending,e=>{e.error=null}).addCase(fa.fulfilled,(e,r)=>{e.stats=r.payload,e.error=null}).addCase(fa.rejected,(e,r)=>{e.error=r.payload}),t.addCase(ii.pending,e=>{e.loading=!0,e.error=null}).addCase(ii.fulfilled,(e,r)=>{e.loading=!1,e.list=r.payload,e.error=null}).addCase(ii.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),HE=UE.reducer,WE={reminders:[],templates:[],settings:{emailEnabled:!0,smsEnabled:!1,emailProvider:{smtp:"",port:587,username:"",password:""},smsProvider:{apiKey:"",serviceName:"twilio"},businessInfo:{name:"",phone:"",email:"",address:"",website:""}},loading:!1,error:null},qE=wt({name:"reminders",initialState:WE,reducers:{addReminder:(t,e)=>{t.reminders.push(e.payload)},updateReminder:(t,e)=>{const r=t.reminders.findIndex(a=>a.id===e.payload.id);r!==-1&&(t.reminders[r]=e.payload)},deleteReminder:(t,e)=>{t.reminders=t.reminders.filter(r=>r.id!==e.payload)},updateReminderStatus:(t,e)=>{const r=t.reminders.find(a=>a.id===e.payload.id);r&&(r.status=e.payload.status,e.payload.sentDate&&(r.sentDate=e.payload.sentDate))},addTemplate:(t,e)=>{t.templates.push(e.payload)},updateTemplate:(t,e)=>{const r=t.templates.findIndex(a=>a.id===e.payload.id);r!==-1&&(t.templates[r]=e.payload)},deleteTemplate:(t,e)=>{t.templates=t.templates.filter(r=>r.id!==e.payload)},toggleTemplate:(t,e)=>{const r=t.templates.find(a=>a.id===e.payload);r&&(r.isActive=!r.isActive)},updateNotificationSettings:(t,e)=>{t.settings={...t.settings,...e.payload}},markAllAsSent:(t,e)=>{e.payload.forEach(r=>{const a=t.reminders.find(n=>n.id===r);a&&(a.status="sent",a.sentDate=new Date().toISOString())})},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload,t.loading=!1}},extraReducers:t=>{t.addCase(lr.pending,e=>{e.loading=!0,e.error=null}).addCase(lr.fulfilled,(e,r)=>{e.loading=!1;const a=(r.payload.data||[]).map(n=>({...n,id:n._id||n.id}));e.reminders=a}).addCase(lr.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to fetch reminders"}),t.addCase(Us.pending,e=>{e.loading=!0,e.error=null}).addCase(Us.fulfilled,(e,r)=>{e.loading=!1,e.templates=(r.payload.data||[]).map(a=>({...a,id:a._id||a.id}))}).addCase(Us.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to fetch templates"}),t.addCase(cn.pending,e=>{e.loading=!0,e.error=null}).addCase(cn.fulfilled,(e,r)=>{e.loading=!1,e.settings=r.payload||e.settings}).addCase(cn.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to fetch notification settings"}),t.addCase(xl.pending,e=>{e.loading=!0,e.error=null}).addCase(xl.fulfilled,(e,r)=>{if(e.loading=!1,r.payload){const a={...r.payload,id:r.payload._id||r.payload.id};e.reminders.push(a)}}).addCase(xl.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to create reminder"}),t.addCase(oi.pending,e=>{e.loading=!0,e.error=null}).addCase(oi.fulfilled,(e,r)=>{if(e.loading=!1,r.payload){const a={...r.payload,id:r.payload._id||r.payload.id},n=e.reminders.findIndex(i=>i.id===a.id||i._id===a.id);n!==-1&&(e.reminders[n]=a)}}).addCase(oi.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to update reminder"}),t.addCase(pl.pending,e=>{e.loading=!0,e.error=null}).addCase(pl.fulfilled,(e,r)=>{e.loading=!1,e.reminders=e.reminders.filter(a=>a.id!==r.payload&&a._id!==r.payload)}).addCase(pl.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to delete reminder"}),t.addCase(gl.pending,e=>{e.loading=!0,e.error=null}).addCase(gl.fulfilled,(e,r)=>{if(e.loading=!1,r.payload){const a={...r.payload,id:r.payload._id||r.payload.id};e.templates.push(a)}}).addCase(gl.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to create reminder template"}),t.addCase(ci.pending,e=>{e.loading=!0,e.error=null}).addCase(ci.fulfilled,(e,r)=>{if(e.loading=!1,r.payload){const a={...r.payload,id:r.payload._id||r.payload.id},n=e.templates.findIndex(i=>i.id===a.id||i._id===a.id);n!==-1&&(e.templates[n]=a)}}).addCase(ci.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to update reminder template"}),t.addCase(fl.pending,e=>{e.loading=!0,e.error=null}).addCase(fl.fulfilled,(e,r)=>{e.loading=!1,e.templates=e.templates.filter(a=>a.id!==r.payload&&a._id!==r.payload)}).addCase(fl.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to delete reminder template"})}}),YE=qE.reducer,KE={items:[],transactions:[],suppliers:[],purchaseOrders:[],categories:[],locations:[],loading:!1,error:null},XE=wt({name:"inventory",initialState:KE,reducers:{addInventoryItemLocal:(t,e)=>{t.items.push(e.payload)},updateInventoryItemLocal:(t,e)=>{const r=t.items.findIndex(a=>a.id===e.payload.id);r!==-1&&(t.items[r]={...e.payload,lastUpdated:new Date().toISOString()})},deleteInventoryItemLocal:(t,e)=>{t.items=t.items.filter(r=>r.id!==e.payload)},adjustInventoryQuantity:(t,e)=>{const r=t.items.find(a=>a.id===e.payload.itemId);if(r){const a=r.currentStock||0;r.currentStock=e.payload.newQuantity,r.lastUpdated=new Date().toISOString();const n={id:`txn_${Date.now()}`,itemId:e.payload.itemId,type:"adjustment",quantity:e.payload.newQuantity-a,date:new Date().toISOString(),reference:"MANUAL_ADJ",notes:e.payload.reason,employeeId:"system",employeeName:"System"};t.transactions.push(n)}},addTransaction:(t,e)=>{t.transactions.push(e.payload);const r=t.items.find(a=>a.id===e.payload.itemId);r&&(r.currentStock=(r.currentStock||0)+e.payload.quantity,r.lastUpdated=new Date().toISOString())},addSupplierLocal:(t,e)=>{t.suppliers.push(e.payload)},updateSupplierLocal:(t,e)=>{const r=t.suppliers.findIndex(a=>a.id===e.payload.id);r!==-1&&(t.suppliers[r]=e.payload)},deleteSupplierLocal:(t,e)=>{t.suppliers=t.suppliers.filter(r=>r.id!==e.payload)},addPurchaseOrderLocal:(t,e)=>{t.purchaseOrders.push(e.payload)},updatePurchaseOrderLocal:(t,e)=>{const r=t.purchaseOrders.findIndex(a=>a.id===e.payload.id);r!==-1&&(t.purchaseOrders[r]=e.payload)},updatePurchaseOrderStatus:(t,e)=>{const r=t.purchaseOrders.find(a=>a.id===e.payload.id);r&&(r.status=e.payload.status,e.payload.status==="received"&&(r.receivedDate=new Date().toISOString(),r.items.forEach(a=>{const n={id:`txn_${Date.now()}_${a.item}`,itemId:a.item,type:"purchase",quantity:a.quantity,unitCost:a.unitPrice,totalCost:a.totalPrice,date:new Date().toISOString(),reference:r.id,notes:`Received from ${r.supplierName}`,employeeId:"system",employeeName:"System"};t.transactions.push(n);const i=t.items.find(l=>l.id===a.item);i&&(i.currentStock=(i.currentStock||0)+a.quantity,i.lastUpdated=new Date().toISOString())})))},deletePurchaseOrderLocal:(t,e)=>{t.purchaseOrders=t.purchaseOrders.filter(r=>r.id!==e.payload)},addCategory:(t,e)=>{t.categories.includes(e.payload)||(t.categories.push(e.payload),t.categories.sort())},removeCategory:(t,e)=>{t.categories=t.categories.filter(r=>r!==e.payload)},addLocation:(t,e)=>{t.locations.includes(e.payload)||(t.locations.push(e.payload),t.locations.sort())},removeLocation:(t,e)=>{t.locations=t.locations.filter(r=>r!==e.payload)},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload,t.loading=!1}},extraReducers:t=>{t.addCase(dn.pending,e=>{e.loading=!0,e.error=null}).addCase(dn.fulfilled,(e,r)=>{var a;e.loading=!1,e.items=((a=r.payload.data)==null?void 0:a.items)||r.payload.items||r.payload}).addCase(dn.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(un.pending,e=>{e.loading=!0,e.error=null}).addCase(un.fulfilled,(e,r)=>{var a;e.loading=!1,e.transactions=((a=r.payload.data)==null?void 0:a.transactions)||r.payload.transactions||r.payload}).addCase(un.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(mn.pending,e=>{e.loading=!0,e.error=null}).addCase(mn.fulfilled,(e,r)=>{var a;e.loading=!1,e.suppliers=((a=r.payload.data)==null?void 0:a.suppliers)||r.payload.suppliers||r.payload}).addCase(mn.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Dr.pending,e=>{e.loading=!0,e.error=null}).addCase(Dr.fulfilled,(e,r)=>{var a;e.loading=!1,e.purchaseOrders=((a=r.payload.data)==null?void 0:a.purchaseOrders)||r.payload.purchaseOrders||r.payload}).addCase(Dr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(yl.pending,e=>{e.loading=!0,e.error=null}).addCase(yl.fulfilled,(e,r)=>{var a;e.loading=!1,e.categories=((a=r.payload.data)==null?void 0:a.categories)||r.payload.categories||r.payload}).addCase(yl.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(bl.pending,e=>{e.loading=!0,e.error=null}).addCase(bl.fulfilled,(e,r)=>{var a;e.loading=!1,e.locations=((a=r.payload.data)==null?void 0:a.locations)||r.payload.locations||r.payload}).addCase(bl.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Wp.fulfilled,(e,r)=>{var n;const a=((n=r.payload.data)==null?void 0:n.item)||r.payload.data||r.payload;e.items.push(a)}),t.addCase(qp.fulfilled,(e,r)=>{var i;const a=((i=r.payload.data)==null?void 0:i.item)||r.payload.data||r.payload,n=e.items.findIndex(l=>l._id===a._id||l.id===a.id);n!==-1&&(e.items[n]=a)}),t.addCase(Yp.fulfilled,(e,r)=>{const a=r.payload;e.items=e.items.filter(n=>n._id!==a&&n.id!==a)}),t.addCase(Gp.fulfilled,(e,r)=>{var a;e.suppliers.push(((a=r.payload.data)==null?void 0:a.supplier)||r.payload.data||r.payload)}),t.addCase(Jp.fulfilled,(e,r)=>{var i;const a=((i=r.payload.data)==null?void 0:i.supplier)||r.payload.data||r.payload,n=e.suppliers.findIndex(l=>l._id===a._id||l.id===a.id);n!==-1&&(e.suppliers[n]=a)}),t.addCase(Zp.fulfilled,(e,r)=>{const a=r.payload;e.suppliers=e.suppliers.filter(n=>n._id!==a&&n.id!==a)}),t.addCase(Kp.fulfilled,(e,r)=>{e.purchaseOrders.push(r.payload.data||r.payload)}),t.addCase(Xp.fulfilled,(e,r)=>{const a=r.payload.data||r.payload,n=e.purchaseOrders.findIndex(i=>i._id===a._id||i.id===a.id);n!==-1&&(e.purchaseOrders[n]=a)}),t.addCase(Qp.fulfilled,(e,r)=>{const a=r.payload;e.purchaseOrders=e.purchaseOrders.filter(n=>n._id!==a&&n.id!==a)})}}),QE=XE.reducer,GE={invoices:[],settings:{companyInfo:{name:"Auto Repair Service",address:"123 Main St, City, State 12345",phone:"(555) 123-4567",email:"info@autorepair.com",website:"www.autorepair.com"},invoiceDefaults:{invoicePrefix:"INV-",nextInvoiceNumber:1001,paymentTerms:30,taxRate:8.5,currency:"USD"},template:{headerColor:"#3B82F6",footerText:"Thank you for your business!",includeLogo:!0,includeTerms:!0}},loading:!1,error:null,stats:null,paymentStats:null,templates:[]},JE=wt({name:"invoices",initialState:GE,reducers:{addInvoice:(t,e)=>{t.invoices.push(e.payload),t.settings.invoiceDefaults.nextInvoiceNumber+=1},updateInvoiceStatus:(t,e)=>{const r=t.invoices.find(a=>a._id===e.payload.id);r&&(r.status=e.payload.status)},recordPayment:(t,e)=>{const r=t.invoices.find(a=>a._id===e.payload.invoiceId);r&&(r.paidAmount=(r.paidAmount||0)+e.payload.amount,r.paymentMethod=e.payload.method,r.paidDate=e.payload.date,r.paidAmount>=r.total?r.status="paid":r.paidAmount>0&&(r.status="sent"))},updateInvoiceSettings:(t,e)=>{t.settings={...t.settings,...e.payload}},updateCompanyInfo:(t,e)=>{t.settings.companyInfo={...t.settings.companyInfo,...e.payload}},updateInvoiceDefaults:(t,e)=>{t.settings.invoiceDefaults={...t.settings.invoiceDefaults,...e.payload}},updateTemplate:(t,e)=>{t.settings.template={...t.settings.template,...e.payload}},generateInvoiceFromWorkOrder:(t,e)=>{var l;const{workOrder:r,customer:a}=e.payload,n=(l=a.vehicles)==null?void 0:l.find(o=>o.id===r.vehicleId),i={_id:`${t.settings.invoiceDefaults.invoicePrefix}${t.settings.invoiceDefaults.nextInvoiceNumber.toString().padStart(3,"0")}`,workOrderId:r.id,customerId:a.id,customerName:a.name,vehicleInfo:n?`${n.year} ${n.make} ${n.model}`:"Unknown Vehicle",date:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"draft",services:r.services||[],parts:r.partsUsed||[],laborHours:r.laborHours||0,laborRate:t.settings.invoiceDefaults.taxRate||120,subtotal:r.subtotal||0,tax:(r.subtotal||0)*(t.settings.invoiceDefaults.taxRate/100),total:r.total||0,paidAmount:0,notes:r.notes||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t.invoices.push(i),t.settings.invoiceDefaults.nextInvoiceNumber+=1},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload,t.loading=!1}},extraReducers:t=>{t.addCase(vl.pending,e=>{e.loading=!0,e.error=null}).addCase(vl.fulfilled,(e,r)=>{e.loading=!1,e.invoices=r.payload.data||[]}).addCase(vl.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to fetch invoices"}),t.addCase(Yc.pending,e=>{e.loading=!0,e.error=null}).addCase(Yc.fulfilled,(e,r)=>{e.loading=!1,e.invoices.push(r.payload.data)}).addCase(Yc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to create invoice"}),t.addCase(Kc.pending,e=>{e.loading=!0,e.error=null}).addCase(Kc.fulfilled,(e,r)=>{e.loading=!1;const a=e.invoices.findIndex(n=>n._id===r.payload.data._id);a!==-1&&(e.invoices[a]=r.payload.data)}).addCase(Kc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to update invoice"}),t.addCase(Xc.pending,e=>{e.loading=!0,e.error=null}).addCase(Xc.fulfilled,(e,r)=>{e.loading=!1,e.invoices=e.invoices.filter(a=>a._id!==r.payload)}).addCase(Xc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to delete invoice"}),t.addCase(ih.pending,e=>{e.loading=!0,e.error=null}).addCase(ih.fulfilled,(e,r)=>{e.loading=!1;const a=e.invoices.findIndex(n=>n._id===r.payload.data._id);a!==-1&&(e.invoices[a]=r.payload.data)}).addCase(ih.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to send invoice"}),t.addCase(Qc.pending,e=>{e.loading=!0,e.error=null}).addCase(Qc.fulfilled,(e,r)=>{e.loading=!1;const a=e.invoices.findIndex(n=>n._id===r.payload.data._id);a!==-1&&(e.invoices[a]=r.payload.data)}).addCase(Qc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to add payment"}),t.addCase(jl.pending,e=>{e.loading=!0,e.error=null}).addCase(jl.fulfilled,(e,r)=>{e.loading=!1,e.stats=r.payload.data}).addCase(jl.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to fetch invoice stats"}),t.addCase(Gc.pending,e=>{e.loading=!0,e.error=null}).addCase(Gc.fulfilled,(e,r)=>{e.loading=!1,e.paymentStats=r.payload.data}).addCase(Gc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to fetch payment stats"}),t.addCase(Jc.pending,e=>{e.loading=!0,e.error=null}).addCase(Jc.fulfilled,(e,r)=>{e.loading=!1,e.templates=r.payload.data||[]}).addCase(Jc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to fetch invoice templates"}),t.addCase(Zc.pending,e=>{e.loading=!0,e.error=null}).addCase(Zc.fulfilled,(e,r)=>{e.loading=!1,r.payload.data&&(e.invoices=r.payload.data)}).addCase(Zc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to update overdue invoices"})}}),ZE=JE.reducer;class eI{async getUsers(e){return(await A.get("/admin/users",{params:e})).data}async getUserById(e){return(await A.get(`/admin/users/${e}`)).data.data}async createUser(e){return(await A.post("/admin/users",e)).data.data}async updateUser(e,r){return(await A.put(`/admin/users/${e}`,r)).data.data}async deleteUser(e){await A.delete(`/admin/users/${e}`)}async toggleUserStatus(e){return(await A.patch(`/admin/users/${e}/toggle-status`)).data.data}async getUserStats(){return(await A.get("/admin/users/stats")).data.data}async getSystemSettings(){return(await A.get("/admin/settings")).data.data}async updateSystemSettings(e){return(await A.put("/admin/settings",e)).data.data}async getSystemLogs(e){return(await A.get("/admin/logs",{params:e})).data}async getSystemHealth(){return(await A.get("/admin/health")).data.data}}const Js=new eI,jh=q("admin/fetchUsers",async t=>await Js.getUsers(t)),Nh=q("admin/fetchUserById",async t=>await Js.getUserById(t)),wh=q("admin/createUser",async t=>await Js.createUser(t)),Sh=q("admin/updateUser",async({id:t,userData:e})=>await Js.updateUser(t,e)),Ch=q("admin/deleteUser",async t=>(await Js.deleteUser(t),t)),iv=q("admin/toggleUserStatus",async t=>{const e=await Js.toggleUserStatus(t);return{id:t,isActive:e.isActive}}),kh=q("admin/fetchUserStats",async()=>await Js.getUserStats()),_h=q("admin/fetchSystemSettings",async()=>await Js.getSystemSettings()),Ph=q("admin/updateSystemSettings",async t=>await Js.updateSystemSettings(t)),Th=q("admin/fetchSystemLogs",async t=>await Js.getSystemLogs(t)),Ah=q("admin/fetchSystemHealth",async()=>await Js.getSystemHealth()),tI={users:[],selectedUser:null,userStats:null,usersLoading:!1,userStatsLoading:!1,createUserLoading:!1,updateUserLoading:!1,deleteUserLoading:!1,systemSettings:null,systemSettingsLoading:!1,updateSettingsLoading:!1,systemLogs:[],systemLogsLoading:!1,systemHealth:null,systemHealthLoading:!1,pagination:{page:1,limit:10,totalDocs:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1},error:null},sI=wt({name:"admin",initialState:tI,reducers:{clearError:t=>{t.error=null},clearSelectedUser:t=>{t.selectedUser=null},setPagination:(t,e)=>{t.pagination={...t.pagination,...e.payload}}},extraReducers:t=>{t.addCase(jh.pending,e=>{e.usersLoading=!0,e.error=null}).addCase(jh.fulfilled,(e,r)=>{e.usersLoading=!1,e.users=r.payload.data,e.pagination=r.payload.pagination}).addCase(jh.rejected,(e,r)=>{e.usersLoading=!1,e.error=r.error.message||"Failed to fetch users"}),t.addCase(Nh.pending,e=>{e.error=null}).addCase(Nh.fulfilled,(e,r)=>{e.selectedUser=r.payload}).addCase(Nh.rejected,(e,r)=>{e.error=r.error.message||"Failed to fetch user"}),t.addCase(wh.pending,e=>{e.createUserLoading=!0,e.error=null}).addCase(wh.fulfilled,(e,r)=>{e.createUserLoading=!1,e.users.unshift(r.payload)}).addCase(wh.rejected,(e,r)=>{e.createUserLoading=!1,e.error=r.error.message||"Failed to create user"}),t.addCase(Sh.pending,e=>{e.updateUserLoading=!0,e.error=null}).addCase(Sh.fulfilled,(e,r)=>{var n;e.updateUserLoading=!1;const a=e.users.findIndex(i=>i._id===r.payload._id);a!==-1&&(e.users[a]=r.payload),((n=e.selectedUser)==null?void 0:n._id)===r.payload._id&&(e.selectedUser=r.payload)}).addCase(Sh.rejected,(e,r)=>{e.updateUserLoading=!1,e.error=r.error.message||"Failed to update user"}),t.addCase(Ch.pending,e=>{e.deleteUserLoading=!0,e.error=null}).addCase(Ch.fulfilled,(e,r)=>{var a;e.deleteUserLoading=!1,e.users=e.users.filter(n=>n._id!==r.payload),((a=e.selectedUser)==null?void 0:a._id)===r.payload&&(e.selectedUser=null)}).addCase(Ch.rejected,(e,r)=>{e.deleteUserLoading=!1,e.error=r.error.message||"Failed to delete user"}),t.addCase(iv.fulfilled,(e,r)=>{var n;const a=e.users.findIndex(i=>i._id===r.payload.id);a!==-1&&(e.users[a].isActive=r.payload.isActive),((n=e.selectedUser)==null?void 0:n._id)===r.payload.id&&(e.selectedUser.isActive=r.payload.isActive)}).addCase(iv.rejected,(e,r)=>{e.error=r.error.message||"Failed to toggle user status"}),t.addCase(kh.pending,e=>{e.userStatsLoading=!0,e.error=null}).addCase(kh.fulfilled,(e,r)=>{e.userStatsLoading=!1,e.userStats=r.payload}).addCase(kh.rejected,(e,r)=>{e.userStatsLoading=!1,e.error=r.error.message||"Failed to fetch user stats"}),t.addCase(_h.pending,e=>{e.systemSettingsLoading=!0,e.error=null}).addCase(_h.fulfilled,(e,r)=>{e.systemSettingsLoading=!1,e.systemSettings=r.payload}).addCase(_h.rejected,(e,r)=>{e.systemSettingsLoading=!1,e.error=r.error.message||"Failed to fetch system settings"}),t.addCase(Ph.pending,e=>{e.updateSettingsLoading=!0,e.error=null}).addCase(Ph.fulfilled,(e,r)=>{e.updateSettingsLoading=!1,e.systemSettings=r.payload}).addCase(Ph.rejected,(e,r)=>{e.updateSettingsLoading=!1,e.error=r.error.message||"Failed to update system settings"}),t.addCase(Th.pending,e=>{e.systemLogsLoading=!0,e.error=null}).addCase(Th.fulfilled,(e,r)=>{e.systemLogsLoading=!1,e.systemLogs=r.payload.data,e.pagination=r.payload.pagination}).addCase(Th.rejected,(e,r)=>{e.systemLogsLoading=!1,e.error=r.error.message||"Failed to fetch system logs"}),t.addCase(Ah.pending,e=>{e.systemHealthLoading=!0,e.error=null}).addCase(Ah.fulfilled,(e,r)=>{e.systemHealthLoading=!1,e.systemHealth=r.payload}).addCase(Ah.rejected,(e,r)=>{e.systemHealthLoading=!1,e.error=r.error.message||"Failed to fetch system health"})}}),rI=sI.reducer;class aI{async getEmailTemplates(){return(await A.get("/email/templates")).data.data}async createEmailTemplate(e){return(await A.post("/email/templates",e)).data.data}async updateEmailTemplate(e,r){return(await A.put(`/email/templates/${e}`,r)).data.data}async deleteEmailTemplate(e){await A.delete(`/email/templates/${e}`)}async getEmailCampaigns(){return(await A.get("/email/campaigns")).data.data}async createEmailCampaign(e){return(await A.post("/email/campaigns",e)).data.data}async sendEmailCampaign(e){return(await A.post(`/email/campaigns/${e}/send`)).data.data}async sendEmail(e){return(await A.post("/email/send",e)).data.data}async getEmailAnalytics(){return(await A.get("/email/analytics")).data.data}}const zr=new aI,Dh=q("email/fetchEmailTemplates",async()=>await zr.getEmailTemplates()),Mh=q("email/createEmailTemplate",async t=>await zr.createEmailTemplate(t)),Eh=q("email/updateEmailTemplate",async({id:t,templateData:e})=>await zr.updateEmailTemplate(t,e)),Ih=q("email/deleteEmailTemplate",async t=>(await zr.deleteEmailTemplate(t),t)),Rh=q("email/fetchEmailCampaigns",async()=>await zr.getEmailCampaigns()),Lh=q("email/createEmailCampaign",async t=>await zr.createEmailCampaign(t)),Oh=q("email/sendEmailCampaign",async t=>await zr.sendEmailCampaign(t)),Fh=q("email/sendEmail",async t=>await zr.sendEmail(t)),$h=q("email/fetchEmailAnalytics",async()=>await zr.getEmailAnalytics()),nI={templates:[],templatesLoading:!1,createTemplateLoading:!1,updateTemplateLoading:!1,deleteTemplateLoading:!1,campaigns:[],campaignsLoading:!1,createCampaignLoading:!1,sendCampaignLoading:!1,sendEmailLoading:!1,analytics:null,analyticsLoading:!1,error:null},iI=wt({name:"email",initialState:nI,reducers:{clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Dh.pending,e=>{e.templatesLoading=!0,e.error=null}).addCase(Dh.fulfilled,(e,r)=>{e.templatesLoading=!1,e.templates=r.payload}).addCase(Dh.rejected,(e,r)=>{e.templatesLoading=!1,e.error=r.error.message||"Failed to fetch email templates"}),t.addCase(Mh.pending,e=>{e.createTemplateLoading=!0,e.error=null}).addCase(Mh.fulfilled,(e,r)=>{e.createTemplateLoading=!1,e.templates.unshift(r.payload)}).addCase(Mh.rejected,(e,r)=>{e.createTemplateLoading=!1,e.error=r.error.message||"Failed to create email template"}),t.addCase(Eh.pending,e=>{e.updateTemplateLoading=!0,e.error=null}).addCase(Eh.fulfilled,(e,r)=>{e.updateTemplateLoading=!1;const a=e.templates.findIndex(n=>n.id===r.payload.id);a!==-1&&(e.templates[a]=r.payload)}).addCase(Eh.rejected,(e,r)=>{e.updateTemplateLoading=!1,e.error=r.error.message||"Failed to update email template"}),t.addCase(Ih.pending,e=>{e.deleteTemplateLoading=!0,e.error=null}).addCase(Ih.fulfilled,(e,r)=>{e.deleteTemplateLoading=!1,e.templates=e.templates.filter(a=>a.id!==r.payload)}).addCase(Ih.rejected,(e,r)=>{e.deleteTemplateLoading=!1,e.error=r.error.message||"Failed to delete email template"}),t.addCase(Rh.pending,e=>{e.campaignsLoading=!0,e.error=null}).addCase(Rh.fulfilled,(e,r)=>{e.campaignsLoading=!1,e.campaigns=r.payload}).addCase(Rh.rejected,(e,r)=>{e.campaignsLoading=!1,e.error=r.error.message||"Failed to fetch email campaigns"}),t.addCase(Lh.pending,e=>{e.createCampaignLoading=!0,e.error=null}).addCase(Lh.fulfilled,(e,r)=>{e.createCampaignLoading=!1,e.campaigns.unshift(r.payload)}).addCase(Lh.rejected,(e,r)=>{e.createCampaignLoading=!1,e.error=r.error.message||"Failed to create email campaign"}),t.addCase(Oh.pending,e=>{e.sendCampaignLoading=!0,e.error=null}).addCase(Oh.fulfilled,(e,r)=>{e.sendCampaignLoading=!1;const a=e.campaigns.findIndex(n=>n.id===r.payload.id);a!==-1&&(e.campaigns[a]=r.payload)}).addCase(Oh.rejected,(e,r)=>{e.sendCampaignLoading=!1,e.error=r.error.message||"Failed to send email campaign"}),t.addCase(Fh.pending,e=>{e.sendEmailLoading=!0,e.error=null}).addCase(Fh.fulfilled,e=>{e.sendEmailLoading=!1}).addCase(Fh.rejected,(e,r)=>{e.sendEmailLoading=!1,e.error=r.error.message||"Failed to send email"}),t.addCase($h.pending,e=>{e.analyticsLoading=!0,e.error=null}).addCase($h.fulfilled,(e,r)=>{e.analyticsLoading=!1,e.analytics=r.payload}).addCase($h.rejected,(e,r)=>{e.analyticsLoading=!1,e.error=r.error.message||"Failed to fetch email analytics"})}}),lI=iI.reducer,oI={logs:[],stats:{totalContacts:0,phoneCalls:0,emails:0,followUpsNeeded:0,resolved:0},loading:!1,error:null,pagination:{currentPage:1,totalPages:1,totalItems:0,hasNextPage:!1,hasPrevPage:!1}},cI=wt({name:"communicationLogs",initialState:oI,reducers:{clearError:t=>{t.error=null},setLoading:(t,e)=>{t.loading=e.payload}},extraReducers:t=>{t.addCase(Ja.pending,e=>{e.loading=!0,e.error=null}).addCase(Ja.fulfilled,(e,r)=>{e.loading=!1,console.log("communicationLogsReducer: fetchCommunicationLogs.fulfilled payload:",r.payload),console.log("communicationLogsReducer: action.payload.data:",r.payload.data);const a=(r.payload.data||[]).map(n=>({...n,id:n._id||n.id}));console.log("communicationLogsReducer: logsWithId:",a),e.logs=a,e.pagination=r.payload.pagination||{currentPage:1,totalPages:1,totalItems:0,hasNextPage:!1,hasPrevPage:!1}}).addCase(Ja.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to fetch communication logs"}),t.addCase($c.pending,e=>{e.loading=!0,e.error=null}).addCase($c.fulfilled,(e,r)=>{if(e.loading=!1,r.payload.data){const a={...r.payload.data,id:r.payload.data._id||r.payload.data.id};e.logs.unshift(a),e.stats.totalContacts+=1}}).addCase($c.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to create communication log"}),t.addCase(zc.pending,e=>{e.loading=!0,e.error=null}).addCase(zc.fulfilled,(e,r)=>{if(e.loading=!1,r.payload.data){const a={...r.payload.data,id:r.payload.data._id||r.payload.data.id},n=e.logs.findIndex(i=>i.id===a.id||i._id===a.id);n!==-1&&(e.logs[n]=a)}}).addCase(zc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to update communication log"}),t.addCase(Bc.pending,e=>{e.loading=!0,e.error=null}).addCase(Bc.fulfilled,(e,r)=>{e.loading=!1,e.logs=e.logs.filter(a=>a.id!==r.payload&&a._id!==r.payload),e.stats.totalContacts=Math.max(0,e.stats.totalContacts-1)}).addCase(Bc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to delete communication log"}),t.addCase(Vc.pending,e=>{e.loading=!0,e.error=null}).addCase(Vc.fulfilled,(e,r)=>{e.loading=!1,e.stats=r.payload.data||e.stats}).addCase(Vc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Failed to fetch communication statistics"})}}),dI=cI.reducer,zh=q("sms/fetchHistory",async(t={},{rejectWithValue:e})=>{var r,a;try{const n=new URLSearchParams;return Object.entries(t).forEach(([l,o])=>{o&&n.append(l,o)}),(await A.get(`/sms/history?${n.toString()}`)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch SMS history")}}),Bh=q("sms/fetchStats",async(t,{rejectWithValue:e})=>{var r,a;try{return(await A.get("/sms/analytics")).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch SMS stats")}}),Vh=q("sms/sendSMS",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await A.post("/sms/send",t);return C.success("SMS sent successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to send SMS"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to send SMS")}}),Uh=q("sms/sendBulkSMS",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await A.post("/sms/bulk",t);return C.success(`Bulk SMS sent: ${l.data.data.sentCount} successful, ${l.data.data.failedCount} failed`),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to send bulk SMS"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to send bulk SMS")}}),Hh=q("sms/fetchTemplates",async(t={},{rejectWithValue:e})=>{var r,a;try{const n=new URLSearchParams;return Object.entries(t).forEach(([l,o])=>{o!==void 0&&n.append(l,o.toString())}),(await A.get(`/sms/templates?${n.toString()}`)).data}catch(n){return e(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch SMS templates")}}),Wh=q("sms/createTemplate",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await A.post("/sms/templates",t);return C.success("SMS template created successfully"),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create SMS template"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create SMS template")}}),qh=q("sms/useTemplate",async(t,{rejectWithValue:e})=>{var r,a,n,i;try{const l=await A.post(`/sms/templates/${t.templateId}/use`,t);return C.success(`Template used: ${l.data.data.sentCount} SMS sent successfully`),l.data}catch(l){return C.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to use SMS template"),e(((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to use SMS template")}}),uI={history:[],templates:[],stats:null,loading:!1,error:null,pagination:null},mI=wt({name:"sms",initialState:uI,reducers:{clearError:t=>{t.error=null},clearHistory:t=>{t.history=[],t.pagination=null}},extraReducers:t=>{t.addCase(zh.pending,e=>{e.loading=!0,e.error=null}).addCase(zh.fulfilled,(e,r)=>{e.loading=!1,e.history=r.payload.data.records,e.pagination=r.payload.data.pagination}).addCase(zh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Bh.pending,e=>{e.loading=!0,e.error=null}).addCase(Bh.fulfilled,(e,r)=>{e.loading=!1,e.stats=r.payload.data}).addCase(Bh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Vh.pending,e=>{e.loading=!0,e.error=null}).addCase(Vh.fulfilled,(e,r)=>{e.loading=!1,e.history.unshift(r.payload.data)}).addCase(Vh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Uh.pending,e=>{e.loading=!0,e.error=null}).addCase(Uh.fulfilled,(e,r)=>{e.loading=!1,e.history.unshift(...r.payload.data.records)}).addCase(Uh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Hh.pending,e=>{e.loading=!0,e.error=null}).addCase(Hh.fulfilled,(e,r)=>{e.loading=!1,e.templates=r.payload.data}).addCase(Hh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Wh.pending,e=>{e.loading=!0,e.error=null}).addCase(Wh.fulfilled,(e,r)=>{e.loading=!1,e.templates.push(r.payload.data)}).addCase(Wh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(qh.pending,e=>{e.loading=!0,e.error=null}).addCase(qh.fulfilled,(e,r)=>{e.loading=!1,e.history.unshift(...r.payload.data.records);const a=r.meta.arg.templateId,n=e.templates.find(i=>i._id===a);n&&(n.usageCount+=r.payload.data.sentCount)}).addCase(qh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),hI=mI.reducer,Yh=q("chat/fetchChats",async t=>{const e=new URLSearchParams;return Object.entries(t).forEach(([a,n])=>{n&&n!==""&&e.append(a,n.toString())}),(await A.get(`/chat?${e}`)).data.data}),xI=q("chat/fetchChat",async t=>(await A.get(`/chat/${t}`)).data.data.chat),pI=q("chat/assignChat",async({chatId:t,assignedTo:e,reason:r})=>(await A.put(`/chat/${t}/assign`,{assignedTo:e,reason:r})).data.data.chat),gI=q("chat/resolveChat",async({chatId:t,notes:e})=>(await A.put(`/chat/${t}/resolve`,{notes:e})).data.data.chat),fI=q("chat/closeChat",async t=>(await A.put(`/chat/${t}/close`)).data.data.chat),yI=q("chat/sendMessage",async({chatId:t,content:e,messageType:r="text"})=>{const a=await A.post(`/chat/${t}/messages`,{content:e,messageType:r});return{chatId:t,message:a.data.data.message}}),bI=q("chat/fetchChatStats",async()=>(await A.get("/chat/stats")).data.data.stats),vI={chats:[],selectedChat:null,loading:!1,error:null,stats:null,pagination:{currentPage:1,totalPages:1,totalChats:0,hasNextPage:!1,hasPrevPage:!1}},jI=wt({name:"chat",initialState:vI,reducers:{clearError:t=>{t.error=null},setSelectedChat:(t,e)=>{t.selectedChat=e.payload},addMessageToChat:(t,e)=>{var i;const{chatId:r,message:a}=e.payload,n=t.chats.find(l=>l._id===r);n&&(n.messages.push(a),n.lastActivity=new Date().toISOString()),((i=t.selectedChat)==null?void 0:i._id)===r&&(t.selectedChat.messages.push(a),t.selectedChat.lastActivity=new Date().toISOString())},updateChatStatus:(t,e)=>{var i;const{chatId:r,status:a}=e.payload,n=t.chats.find(l=>l._id===r);n&&(n.status=a),((i=t.selectedChat)==null?void 0:i._id)===r&&(t.selectedChat.status=a)}},extraReducers:t=>{t.addCase(Yh.pending,e=>{e.loading=!0,e.error=null}).addCase(Yh.fulfilled,(e,r)=>{e.loading=!1,e.chats=r.payload.chats,e.pagination=r.payload.pagination}).addCase(Yh.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to fetch chats"}).addCase(xI.fulfilled,(e,r)=>{e.selectedChat=r.payload}).addCase(pI.fulfilled,(e,r)=>{var i;const a=r.payload,n=e.chats.findIndex(l=>l._id===a._id);n!==-1&&(e.chats[n]=a),((i=e.selectedChat)==null?void 0:i._id)===a._id&&(e.selectedChat=a)}).addCase(gI.fulfilled,(e,r)=>{var i;const a=r.payload,n=e.chats.findIndex(l=>l._id===a._id);n!==-1&&(e.chats[n]=a),((i=e.selectedChat)==null?void 0:i._id)===a._id&&(e.selectedChat=a)}).addCase(fI.fulfilled,(e,r)=>{var i;const a=r.payload,n=e.chats.findIndex(l=>l._id===a._id);n!==-1&&(e.chats[n]=a),((i=e.selectedChat)==null?void 0:i._id)===a._id&&(e.selectedChat=a)}).addCase(yI.fulfilled,(e,r)=>{var l;const{chatId:a,message:n}=r.payload,i=e.chats.find(o=>o._id===a);i&&(i.messages.push(n),i.lastActivity=new Date().toISOString()),((l=e.selectedChat)==null?void 0:l._id)===a&&(e.selectedChat.messages.push(n),e.selectedChat.lastActivity=new Date().toISOString())}).addCase(bI.fulfilled,(e,r)=>{e.stats=r.payload})}}),NI=jI.reducer,wI=n_({reducer:{appointments:f_,tasks:z_,promotions:q_,marketing:eP,customers:HE,services:D_,reminders:YE,inventory:QE,invoices:ZE,dashboard:IE,admin:rI,email:lI,vehicles:_9,communicationLogs:dI,sms:hI,chat:NI},middleware:t=>t({serializableCheck:{ignoredActions:["persist/PERSIST"]}})});Kh.createRoot(document.getElementById("root")).render(s.jsx(Hs.StrictMode,{children:s.jsx(MS,{store:wI,children:s.jsx(B3,{children:s.jsxs(nk,{children:[s.jsx(BE,{}),s.jsx(S5,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}));
