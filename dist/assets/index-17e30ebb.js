var gS=Object.defineProperty;var yS=(s,t,a)=>t in s?gS(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var oe=(s,t,a)=>(yS(s,typeof t!="symbol"?t+"":t,a),a);function vS(s,t){for(var a=0;a<t.length;a++){const r=t[a];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in s)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();function bS(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var nj={exports:{}},Fu={},ij={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wo=Symbol.for("react.element"),jS=Symbol.for("react.portal"),NS=Symbol.for("react.fragment"),wS=Symbol.for("react.strict_mode"),SS=Symbol.for("react.profiler"),CS=Symbol.for("react.provider"),kS=Symbol.for("react.context"),_S=Symbol.for("react.forward_ref"),AS=Symbol.for("react.suspense"),TS=Symbol.for("react.memo"),PS=Symbol.for("react.lazy"),yg=Symbol.iterator;function DS(s){return s===null||typeof s!="object"?null:(s=yg&&s[yg]||s["@@iterator"],typeof s=="function"?s:null)}var lj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oj=Object.assign,cj={};function Ki(s,t,a){this.props=s,this.context=t,this.refs=cj,this.updater=a||lj}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Ki.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function dj(){}dj.prototype=Ki.prototype;function y0(s,t,a){this.props=s,this.context=t,this.refs=cj,this.updater=a||lj}var v0=y0.prototype=new dj;v0.constructor=y0;oj(v0,Ki.prototype);v0.isPureReactComponent=!0;var vg=Array.isArray,uj=Object.prototype.hasOwnProperty,b0={current:null},mj={key:!0,ref:!0,__self:!0,__source:!0};function hj(s,t,a){var r,n={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)uj.call(t,r)&&!mj.hasOwnProperty(r)&&(n[r]=t[r]);var o=arguments.length-2;if(o===1)n.children=a;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(s&&s.defaultProps)for(r in o=s.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:Wo,type:s,key:i,ref:l,props:n,_owner:b0.current}}function MS(s,t){return{$$typeof:Wo,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function j0(s){return typeof s=="object"&&s!==null&&s.$$typeof===Wo}function ES(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(a){return t[a]})}var bg=/\/+/g;function eh(s,t){return typeof s=="object"&&s!==null&&s.key!=null?ES(""+s.key):t.toString(36)}function Hc(s,t,a,r,n){var i=typeof s;(i==="undefined"||i==="boolean")&&(s=null);var l=!1;if(s===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(s.$$typeof){case Wo:case jS:l=!0}}if(l)return l=s,n=n(l),s=r===""?"."+eh(l,0):r,vg(n)?(a="",s!=null&&(a=s.replace(bg,"$&/")+"/"),Hc(n,t,a,"",function(d){return d})):n!=null&&(j0(n)&&(n=MS(n,a+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(bg,"$&/")+"/")+s)),t.push(n)),1;if(l=0,r=r===""?".":r+":",vg(s))for(var o=0;o<s.length;o++){i=s[o];var c=r+eh(i,o);l+=Hc(i,t,a,c,n)}else if(c=DS(s),typeof c=="function")for(s=c.call(s),o=0;!(i=s.next()).done;)i=i.value,c=r+eh(i,o++),l+=Hc(i,t,a,c,n);else if(i==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ic(s,t,a){if(s==null)return s;var r=[],n=0;return Hc(s,r,"","",function(i){return t.call(a,i,n++)}),r}function IS(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(a){(s._status===0||s._status===-1)&&(s._status=1,s._result=a)},function(a){(s._status===0||s._status===-1)&&(s._status=2,s._result=a)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var ps={current:null},Wc={transition:null},RS={ReactCurrentDispatcher:ps,ReactCurrentBatchConfig:Wc,ReactCurrentOwner:b0};function xj(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:ic,forEach:function(s,t,a){ic(s,function(){t.apply(this,arguments)},a)},count:function(s){var t=0;return ic(s,function(){t++}),t},toArray:function(s){return ic(s,function(t){return t})||[]},only:function(s){if(!j0(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};_e.Component=Ki;_e.Fragment=NS;_e.Profiler=SS;_e.PureComponent=y0;_e.StrictMode=wS;_e.Suspense=AS;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RS;_e.act=xj;_e.cloneElement=function(s,t,a){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var r=oj({},s.props),n=s.key,i=s.ref,l=s._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=b0.current),t.key!==void 0&&(n=""+t.key),s.type&&s.type.defaultProps)var o=s.type.defaultProps;for(c in t)uj.call(t,c)&&!mj.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=a;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:Wo,type:s.type,key:n,ref:i,props:r,_owner:l}};_e.createContext=function(s){return s={$$typeof:kS,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:CS,_context:s},s.Consumer=s};_e.createElement=hj;_e.createFactory=function(s){var t=hj.bind(null,s);return t.type=s,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(s){return{$$typeof:_S,render:s}};_e.isValidElement=j0;_e.lazy=function(s){return{$$typeof:PS,_payload:{_status:-1,_result:s},_init:IS}};_e.memo=function(s,t){return{$$typeof:TS,type:s,compare:t===void 0?null:t}};_e.startTransition=function(s){var t=Wc.transition;Wc.transition={};try{s()}finally{Wc.transition=t}};_e.unstable_act=xj;_e.useCallback=function(s,t){return ps.current.useCallback(s,t)};_e.useContext=function(s){return ps.current.useContext(s)};_e.useDebugValue=function(){};_e.useDeferredValue=function(s){return ps.current.useDeferredValue(s)};_e.useEffect=function(s,t){return ps.current.useEffect(s,t)};_e.useId=function(){return ps.current.useId()};_e.useImperativeHandle=function(s,t,a){return ps.current.useImperativeHandle(s,t,a)};_e.useInsertionEffect=function(s,t){return ps.current.useInsertionEffect(s,t)};_e.useLayoutEffect=function(s,t){return ps.current.useLayoutEffect(s,t)};_e.useMemo=function(s,t){return ps.current.useMemo(s,t)};_e.useReducer=function(s,t,a){return ps.current.useReducer(s,t,a)};_e.useRef=function(s){return ps.current.useRef(s)};_e.useState=function(s){return ps.current.useState(s)};_e.useSyncExternalStore=function(s,t,a){return ps.current.useSyncExternalStore(s,t,a)};_e.useTransition=function(){return ps.current.useTransition()};_e.version="18.3.1";ij.exports=_e;var b=ij.exports;const oa=bS(b),LS=vS({__proto__:null,default:oa},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS=b,FS=Symbol.for("react.element"),$S=Symbol.for("react.fragment"),zS=Object.prototype.hasOwnProperty,BS=OS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,US={key:!0,ref:!0,__self:!0,__source:!0};function pj(s,t,a){var r,n={},i=null,l=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)zS.call(t,r)&&!US.hasOwnProperty(r)&&(n[r]=t[r]);if(s&&s.defaultProps)for(r in t=s.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:FS,type:s,key:i,ref:l,props:n,_owner:BS.current}}Fu.Fragment=$S;Fu.jsx=pj;Fu.jsxs=pj;nj.exports=Fu;var e=nj.exports,$x={},fj={exports:{}},Fs={},gj={exports:{}},yj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(I,$){var A=I.length;I.push($);e:for(;0<A;){var G=A-1>>>1,z=I[G];if(0<n(z,$))I[G]=$,I[A]=z,A=G;else break e}}function a(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var $=I[0],A=I.pop();if(A!==$){I[0]=A;e:for(var G=0,z=I.length,ie=z>>>1;G<ie;){var de=2*(G+1)-1,xe=I[de],he=de+1,Pe=I[he];if(0>n(xe,A))he<z&&0>n(Pe,xe)?(I[G]=Pe,I[he]=A,G=he):(I[G]=xe,I[de]=A,G=de);else if(he<z&&0>n(Pe,A))I[G]=Pe,I[he]=A,G=he;else break e}}return $}function n(I,$){var A=I.sortIndex-$.sortIndex;return A!==0?A:I.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();s.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,y=!1,g=!1,j=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(I){for(var $=a(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=I)r(d),$.sortIndex=$.expirationTime,t(c,$);else break;$=a(d)}}function N(I){if(j=!1,p(I),!g)if(a(c)!==null)g=!0,W(w);else{var $=a(d);$!==null&&Z(N,$.startTime-I)}}function w(I,$){g=!1,j&&(j=!1,x(T),T=-1),y=!0;var A=h;try{for(p($),m=a(c);m!==null&&(!(m.expirationTime>$)||I&&!D());){var G=m.callback;if(typeof G=="function"){m.callback=null,h=m.priorityLevel;var z=G(m.expirationTime<=$);$=s.unstable_now(),typeof z=="function"?m.callback=z:m===a(c)&&r(c),p($)}else r(c);m=a(c)}if(m!==null)var ie=!0;else{var de=a(d);de!==null&&Z(N,de.startTime-$),ie=!1}return ie}finally{m=null,h=A,y=!1}}var S=!1,C=null,T=-1,_=5,F=-1;function D(){return!(s.unstable_now()-F<_)}function R(){if(C!==null){var I=s.unstable_now();F=I;var $=!0;try{$=C(!0,I)}finally{$?U():(S=!1,C=null)}}else S=!1}var U;if(typeof f=="function")U=function(){f(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,E=O.port2;O.port1.onmessage=R,U=function(){E.postMessage(null)}}else U=function(){v(R,0)};function W(I){C=I,S||(S=!0,U())}function Z(I,$){T=v(function(){I(s.unstable_now())},$)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(I){I.callback=null},s.unstable_continueExecution=function(){g||y||(g=!0,W(w))},s.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<I?Math.floor(1e3/I):5},s.unstable_getCurrentPriorityLevel=function(){return h},s.unstable_getFirstCallbackNode=function(){return a(c)},s.unstable_next=function(I){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var A=h;h=$;try{return I()}finally{h=A}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(I,$){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var A=h;h=I;try{return $()}finally{h=A}},s.unstable_scheduleCallback=function(I,$,A){var G=s.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?G+A:G):A=G,I){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=A+z,I={id:u++,callback:$,priorityLevel:I,startTime:A,expirationTime:z,sortIndex:-1},A>G?(I.sortIndex=A,t(d,I),a(c)===null&&I===a(d)&&(j?(x(T),T=-1):j=!0,Z(N,A-G))):(I.sortIndex=z,t(c,I),g||y||(g=!0,W(w))),I},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(I){var $=h;return function(){var A=h;h=$;try{return I.apply(this,arguments)}finally{h=A}}}})(yj);gj.exports=yj;var VS=gj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS=b,Is=VS;function ne(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vj=new Set,co={};function ei(s,t){Li(s,t),Li(s+"Capture",t)}function Li(s,t){for(co[s]=t,s=0;s<t.length;s++)vj.add(t[s])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zx=Object.prototype.hasOwnProperty,WS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jg={},Ng={};function qS(s){return zx.call(Ng,s)?!0:zx.call(jg,s)?!1:WS.test(s)?Ng[s]=!0:(jg[s]=!0,!1)}function YS(s,t,a,r){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:a!==null?!a.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function KS(s,t,a,r){if(t===null||typeof t>"u"||YS(s,t,a,r))return!0;if(r)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fs(s,t,a,r,n,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=s,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Gt[s]=new fs(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];Gt[t]=new fs(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Gt[s]=new fs(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Gt[s]=new fs(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Gt[s]=new fs(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Gt[s]=new fs(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Gt[s]=new fs(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Gt[s]=new fs(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Gt[s]=new fs(s,5,!1,s.toLowerCase(),null,!1,!1)});var N0=/[\-:]([a-z])/g;function w0(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(N0,w0);Gt[t]=new fs(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(N0,w0);Gt[t]=new fs(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(N0,w0);Gt[t]=new fs(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Gt[s]=new fs(s,1,!1,s.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new fs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Gt[s]=new fs(s,1,!1,s.toLowerCase(),null,!0,!0)});function S0(s,t,a,r){var n=Gt.hasOwnProperty(t)?Gt[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KS(t,a,n,r)&&(a=null),r||n===null?qS(t)&&(a===null?s.removeAttribute(t):s.setAttribute(t,""+a)):n.mustUseProperty?s[n.propertyName]=a===null?n.type===3?!1:"":a:(t=n.attributeName,r=n.attributeNamespace,a===null?s.removeAttribute(t):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,r?s.setAttributeNS(r,t,a):s.setAttribute(t,a))))}var lr=HS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lc=Symbol.for("react.element"),li=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),C0=Symbol.for("react.strict_mode"),Bx=Symbol.for("react.profiler"),bj=Symbol.for("react.provider"),jj=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),Ux=Symbol.for("react.suspense"),Vx=Symbol.for("react.suspense_list"),_0=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),Nj=Symbol.for("react.offscreen"),wg=Symbol.iterator;function ll(s){return s===null||typeof s!="object"?null:(s=wg&&s[wg]||s["@@iterator"],typeof s=="function"?s:null)}var mt=Object.assign,th;function Sl(s){if(th===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);th=t&&t[1]||""}return`
`+th+s}var sh=!1;function ah(s,t){if(!s||sh)return"";sh=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(s,[],t)}else{try{t.call()}catch(d){r=d}s.call(t.prototype)}else{try{throw Error()}catch(d){r=d}s()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=r.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=l&&0<=o);break}}}finally{sh=!1,Error.prepareStackTrace=a}return(s=s?s.displayName||s.name:"")?Sl(s):""}function GS(s){switch(s.tag){case 5:return Sl(s.type);case 16:return Sl("Lazy");case 13:return Sl("Suspense");case 19:return Sl("SuspenseList");case 0:case 2:case 15:return s=ah(s.type,!1),s;case 11:return s=ah(s.type.render,!1),s;case 1:return s=ah(s.type,!0),s;default:return""}}function Hx(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case oi:return"Fragment";case li:return"Portal";case Bx:return"Profiler";case C0:return"StrictMode";case Ux:return"Suspense";case Vx:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case jj:return(s.displayName||"Context")+".Consumer";case bj:return(s._context.displayName||"Context")+".Provider";case k0:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case _0:return t=s.displayName||null,t!==null?t:Hx(s.type)||"Memo";case hr:t=s._payload,s=s._init;try{return Hx(s(t))}catch{}}return null}function XS(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hx(t);case 8:return t===C0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qr(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wj(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QS(s){var t=wj(s)?"checked":"value",a=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),r=""+s[t];if(!s.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,i=a.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(s,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function oc(s){s._valueTracker||(s._valueTracker=QS(s))}function Sj(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return s&&(r=wj(s)?s.checked?"true":"false":s.value),s=r,s!==a?(t.setValue(s),!0):!1}function Bd(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Wx(s,t){var a=t.checked;return mt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??s._wrapperState.initialChecked})}function Sg(s,t){var a=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;a=qr(t.value!=null?t.value:a),s._wrapperState={initialChecked:r,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cj(s,t){t=t.checked,t!=null&&S0(s,"checked",t,!1)}function qx(s,t){Cj(s,t);var a=qr(t.value),r=t.type;if(a!=null)r==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+a):s.value!==""+a&&(s.value=""+a);else if(r==="submit"||r==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?Yx(s,t.type,a):t.hasOwnProperty("defaultValue")&&Yx(s,t.type,qr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function Cg(s,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,a||t===s.value||(s.value=t),s.defaultValue=t}a=s.name,a!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,a!==""&&(s.name=a)}function Yx(s,t,a){(t!=="number"||Bd(s.ownerDocument)!==s)&&(a==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+a&&(s.defaultValue=""+a))}var Cl=Array.isArray;function bi(s,t,a,r){if(s=s.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<s.length;a++)n=t.hasOwnProperty("$"+s[a].value),s[a].selected!==n&&(s[a].selected=n),n&&r&&(s[a].defaultSelected=!0)}else{for(a=""+qr(a),t=null,n=0;n<s.length;n++){if(s[n].value===a){s[n].selected=!0,r&&(s[n].defaultSelected=!0);return}t!==null||s[n].disabled||(t=s[n])}t!==null&&(t.selected=!0)}}function Kx(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return mt({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function kg(s,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(ne(92));if(Cl(a)){if(1<a.length)throw Error(ne(93));a=a[0]}t=a}t==null&&(t=""),a=t}s._wrapperState={initialValue:qr(a)}}function kj(s,t){var a=qr(t.value),r=qr(t.defaultValue);a!=null&&(a=""+a,a!==s.value&&(s.value=a),t.defaultValue==null&&s.defaultValue!==a&&(s.defaultValue=a)),r!=null&&(s.defaultValue=""+r)}function _g(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function _j(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gx(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?_j(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var cc,Aj=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,r,n){MSApp.execUnsafeLocalFunction(function(){return s(t,a,r,n)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(cc=cc||document.createElement("div"),cc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cc.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function uo(s,t){if(t){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=t;return}}s.textContent=t}var Rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JS=["Webkit","ms","Moz","O"];Object.keys(Rl).forEach(function(s){JS.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),Rl[t]=Rl[s]})});function Tj(s,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||Rl.hasOwnProperty(s)&&Rl[s]?(""+t).trim():t+"px"}function Pj(s,t){s=s.style;for(var a in t)if(t.hasOwnProperty(a)){var r=a.indexOf("--")===0,n=Tj(a,t[a],r);a==="float"&&(a="cssFloat"),r?s.setProperty(a,n):s[a]=n}}var ZS=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xx(s,t){if(t){if(ZS[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function Qx(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jx=null;function A0(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Zx=null,ji=null,Ni=null;function Ag(s){if(s=Ko(s)){if(typeof Zx!="function")throw Error(ne(280));var t=s.stateNode;t&&(t=Vu(t),Zx(s.stateNode,s.type,t))}}function Dj(s){ji?Ni?Ni.push(s):Ni=[s]:ji=s}function Mj(){if(ji){var s=ji,t=Ni;if(Ni=ji=null,Ag(s),t)for(s=0;s<t.length;s++)Ag(t[s])}}function Ej(s,t){return s(t)}function Ij(){}var rh=!1;function Rj(s,t,a){if(rh)return s(t,a);rh=!0;try{return Ej(s,t,a)}finally{rh=!1,(ji!==null||Ni!==null)&&(Ij(),Mj())}}function mo(s,t){var a=s.stateNode;if(a===null)return null;var r=Vu(a);if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(s=s.type,r=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!r;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(ne(231,t,typeof a));return a}var ep=!1;if(er)try{var ol={};Object.defineProperty(ol,"passive",{get:function(){ep=!0}}),window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch{ep=!1}function e6(s,t,a,r,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(a,d)}catch(u){this.onError(u)}}var Ll=!1,Ud=null,Vd=!1,tp=null,t6={onError:function(s){Ll=!0,Ud=s}};function s6(s,t,a,r,n,i,l,o,c){Ll=!1,Ud=null,e6.apply(t6,arguments)}function a6(s,t,a,r,n,i,l,o,c){if(s6.apply(this,arguments),Ll){if(Ll){var d=Ud;Ll=!1,Ud=null}else throw Error(ne(198));Vd||(Vd=!0,tp=d)}}function ti(s){var t=s,a=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(a=t.return),s=t.return;while(s)}return t.tag===3?a:null}function Lj(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function Tg(s){if(ti(s)!==s)throw Error(ne(188))}function r6(s){var t=s.alternate;if(!t){if(t=ti(s),t===null)throw Error(ne(188));return t!==s?null:s}for(var a=s,r=t;;){var n=a.return;if(n===null)break;var i=n.alternate;if(i===null){if(r=n.return,r!==null){a=r;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===a)return Tg(n),s;if(i===r)return Tg(n),t;i=i.sibling}throw Error(ne(188))}if(a.return!==r.return)a=n,r=i;else{for(var l=!1,o=n.child;o;){if(o===a){l=!0,a=n,r=i;break}if(o===r){l=!0,r=n,a=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===a){l=!0,a=i,r=n;break}if(o===r){l=!0,r=i,a=n;break}o=o.sibling}if(!l)throw Error(ne(189))}}if(a.alternate!==r)throw Error(ne(190))}if(a.tag!==3)throw Error(ne(188));return a.stateNode.current===a?s:t}function Oj(s){return s=r6(s),s!==null?Fj(s):null}function Fj(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=Fj(s);if(t!==null)return t;s=s.sibling}return null}var $j=Is.unstable_scheduleCallback,Pg=Is.unstable_cancelCallback,n6=Is.unstable_shouldYield,i6=Is.unstable_requestPaint,bt=Is.unstable_now,l6=Is.unstable_getCurrentPriorityLevel,T0=Is.unstable_ImmediatePriority,zj=Is.unstable_UserBlockingPriority,Hd=Is.unstable_NormalPriority,o6=Is.unstable_LowPriority,Bj=Is.unstable_IdlePriority,$u=null,_a=null;function c6(s){if(_a&&typeof _a.onCommitFiberRoot=="function")try{_a.onCommitFiberRoot($u,s,void 0,(s.current.flags&128)===128)}catch{}}var ca=Math.clz32?Math.clz32:m6,d6=Math.log,u6=Math.LN2;function m6(s){return s>>>=0,s===0?32:31-(d6(s)/u6|0)|0}var dc=64,uc=4194304;function kl(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Wd(s,t){var a=s.pendingLanes;if(a===0)return 0;var r=0,n=s.suspendedLanes,i=s.pingedLanes,l=a&268435455;if(l!==0){var o=l&~n;o!==0?r=kl(o):(i&=l,i!==0&&(r=kl(i)))}else l=a&~n,l!==0?r=kl(l):i!==0&&(r=kl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(r&4&&(r|=a&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=r;0<t;)a=31-ca(t),n=1<<a,r|=s[a],t&=~n;return r}function h6(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x6(s,t){for(var a=s.suspendedLanes,r=s.pingedLanes,n=s.expirationTimes,i=s.pendingLanes;0<i;){var l=31-ca(i),o=1<<l,c=n[l];c===-1?(!(o&a)||o&r)&&(n[l]=h6(o,t)):c<=t&&(s.expiredLanes|=o),i&=~o}}function sp(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Uj(){var s=dc;return dc<<=1,!(dc&4194240)&&(dc=64),s}function nh(s){for(var t=[],a=0;31>a;a++)t.push(s);return t}function qo(s,t,a){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-ca(t),s[t]=a}function p6(s,t){var a=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var r=s.eventTimes;for(s=s.expirationTimes;0<a;){var n=31-ca(a),i=1<<n;t[n]=0,r[n]=-1,s[n]=-1,a&=~i}}function P0(s,t){var a=s.entangledLanes|=t;for(s=s.entanglements;a;){var r=31-ca(a),n=1<<r;n&t|s[r]&t&&(s[r]|=t),a&=~n}}var ze=0;function Vj(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Hj,D0,Wj,qj,Yj,ap=!1,mc=[],_r=null,Ar=null,Tr=null,ho=new Map,xo=new Map,pr=[],f6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dg(s,t){switch(s){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":ho.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(t.pointerId)}}function cl(s,t,a,r,n,i){return s===null||s.nativeEvent!==i?(s={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:i,targetContainers:[n]},t!==null&&(t=Ko(t),t!==null&&D0(t)),s):(s.eventSystemFlags|=r,t=s.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),s)}function g6(s,t,a,r,n){switch(t){case"focusin":return _r=cl(_r,s,t,a,r,n),!0;case"dragenter":return Ar=cl(Ar,s,t,a,r,n),!0;case"mouseover":return Tr=cl(Tr,s,t,a,r,n),!0;case"pointerover":var i=n.pointerId;return ho.set(i,cl(ho.get(i)||null,s,t,a,r,n)),!0;case"gotpointercapture":return i=n.pointerId,xo.set(i,cl(xo.get(i)||null,s,t,a,r,n)),!0}return!1}function Kj(s){var t=bn(s.target);if(t!==null){var a=ti(t);if(a!==null){if(t=a.tag,t===13){if(t=Lj(a),t!==null){s.blockedOn=t,Yj(s.priority,function(){Wj(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function qc(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var a=rp(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(a===null){a=s.nativeEvent;var r=new a.constructor(a.type,a);Jx=r,a.target.dispatchEvent(r),Jx=null}else return t=Ko(a),t!==null&&D0(t),s.blockedOn=a,!1;t.shift()}return!0}function Mg(s,t,a){qc(s)&&a.delete(t)}function y6(){ap=!1,_r!==null&&qc(_r)&&(_r=null),Ar!==null&&qc(Ar)&&(Ar=null),Tr!==null&&qc(Tr)&&(Tr=null),ho.forEach(Mg),xo.forEach(Mg)}function dl(s,t){s.blockedOn===t&&(s.blockedOn=null,ap||(ap=!0,Is.unstable_scheduleCallback(Is.unstable_NormalPriority,y6)))}function po(s){function t(n){return dl(n,s)}if(0<mc.length){dl(mc[0],s);for(var a=1;a<mc.length;a++){var r=mc[a];r.blockedOn===s&&(r.blockedOn=null)}}for(_r!==null&&dl(_r,s),Ar!==null&&dl(Ar,s),Tr!==null&&dl(Tr,s),ho.forEach(t),xo.forEach(t),a=0;a<pr.length;a++)r=pr[a],r.blockedOn===s&&(r.blockedOn=null);for(;0<pr.length&&(a=pr[0],a.blockedOn===null);)Kj(a),a.blockedOn===null&&pr.shift()}var wi=lr.ReactCurrentBatchConfig,qd=!0;function v6(s,t,a,r){var n=ze,i=wi.transition;wi.transition=null;try{ze=1,M0(s,t,a,r)}finally{ze=n,wi.transition=i}}function b6(s,t,a,r){var n=ze,i=wi.transition;wi.transition=null;try{ze=4,M0(s,t,a,r)}finally{ze=n,wi.transition=i}}function M0(s,t,a,r){if(qd){var n=rp(s,t,a,r);if(n===null)ph(s,t,r,Yd,a),Dg(s,r);else if(g6(n,s,t,a,r))r.stopPropagation();else if(Dg(s,r),t&4&&-1<f6.indexOf(s)){for(;n!==null;){var i=Ko(n);if(i!==null&&Hj(i),i=rp(s,t,a,r),i===null&&ph(s,t,r,Yd,a),i===n)break;n=i}n!==null&&r.stopPropagation()}else ph(s,t,r,null,a)}}var Yd=null;function rp(s,t,a,r){if(Yd=null,s=A0(r),s=bn(s),s!==null)if(t=ti(s),t===null)s=null;else if(a=t.tag,a===13){if(s=Lj(t),s!==null)return s;s=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return Yd=s,null}function Gj(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l6()){case T0:return 1;case zj:return 4;case Hd:case o6:return 16;case Bj:return 536870912;default:return 16}default:return 16}}var jr=null,E0=null,Yc=null;function Xj(){if(Yc)return Yc;var s,t=E0,a=t.length,r,n="value"in jr?jr.value:jr.textContent,i=n.length;for(s=0;s<a&&t[s]===n[s];s++);var l=a-s;for(r=1;r<=l&&t[a-r]===n[i-r];r++);return Yc=n.slice(s,1<r?1-r:void 0)}function Kc(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function hc(){return!0}function Eg(){return!1}function $s(s){function t(a,r,n,i,l){this._reactName=a,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in s)s.hasOwnProperty(o)&&(a=s[o],this[o]=a?a(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hc:Eg,this.isPropagationStopped=Eg,this}return mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),t}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I0=$s(Gi),Yo=mt({},Gi,{view:0,detail:0}),j6=$s(Yo),ih,lh,ul,zu=mt({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R0,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ul&&(ul&&s.type==="mousemove"?(ih=s.screenX-ul.screenX,lh=s.screenY-ul.screenY):lh=ih=0,ul=s),ih)},movementY:function(s){return"movementY"in s?s.movementY:lh}}),Ig=$s(zu),N6=mt({},zu,{dataTransfer:0}),w6=$s(N6),S6=mt({},Yo,{relatedTarget:0}),oh=$s(S6),C6=mt({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),k6=$s(C6),_6=mt({},Gi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),A6=$s(_6),T6=mt({},Gi,{data:0}),Rg=$s(T6),P6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E6(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=M6[s])?!!t[s]:!1}function R0(){return E6}var I6=mt({},Yo,{key:function(s){if(s.key){var t=P6[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=Kc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?D6[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R0,charCode:function(s){return s.type==="keypress"?Kc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Kc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),R6=$s(I6),L6=mt({},zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lg=$s(L6),O6=mt({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R0}),F6=$s(O6),$6=mt({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),z6=$s($6),B6=mt({},zu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),U6=$s(B6),V6=[9,13,27,32],L0=er&&"CompositionEvent"in window,Ol=null;er&&"documentMode"in document&&(Ol=document.documentMode);var H6=er&&"TextEvent"in window&&!Ol,Qj=er&&(!L0||Ol&&8<Ol&&11>=Ol),Og=String.fromCharCode(32),Fg=!1;function Jj(s,t){switch(s){case"keyup":return V6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zj(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ci=!1;function W6(s,t){switch(s){case"compositionend":return Zj(t);case"keypress":return t.which!==32?null:(Fg=!0,Og);case"textInput":return s=t.data,s===Og&&Fg?null:s;default:return null}}function q6(s,t){if(ci)return s==="compositionend"||!L0&&Jj(s,t)?(s=Xj(),Yc=E0=jr=null,ci=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qj&&t.locale!=="ko"?null:t.data;default:return null}}var Y6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!Y6[s.type]:t==="textarea"}function eN(s,t,a,r){Dj(r),t=Kd(t,"onChange"),0<t.length&&(a=new I0("onChange","change",null,a,r),s.push({event:a,listeners:t}))}var Fl=null,fo=null;function K6(s){uN(s,0)}function Bu(s){var t=mi(s);if(Sj(t))return s}function G6(s,t){if(s==="change")return t}var tN=!1;if(er){var ch;if(er){var dh="oninput"in document;if(!dh){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),dh=typeof zg.oninput=="function"}ch=dh}else ch=!1;tN=ch&&(!document.documentMode||9<document.documentMode)}function Bg(){Fl&&(Fl.detachEvent("onpropertychange",sN),fo=Fl=null)}function sN(s){if(s.propertyName==="value"&&Bu(fo)){var t=[];eN(t,fo,s,A0(s)),Rj(K6,t)}}function X6(s,t,a){s==="focusin"?(Bg(),Fl=t,fo=a,Fl.attachEvent("onpropertychange",sN)):s==="focusout"&&Bg()}function Q6(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Bu(fo)}function J6(s,t){if(s==="click")return Bu(t)}function Z6(s,t){if(s==="input"||s==="change")return Bu(t)}function eC(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var ha=typeof Object.is=="function"?Object.is:eC;function go(s,t){if(ha(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var a=Object.keys(s),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var n=a[r];if(!zx.call(t,n)||!ha(s[n],t[n]))return!1}return!0}function Ug(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vg(s,t){var a=Ug(s);s=0;for(var r;a;){if(a.nodeType===3){if(r=s+a.textContent.length,s<=t&&r>=t)return{node:a,offset:t-s};s=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ug(a)}}function aN(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?aN(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function rN(){for(var s=window,t=Bd();t instanceof s.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)s=t.contentWindow;else break;t=Bd(s.document)}return t}function O0(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function tC(s){var t=rN(),a=s.focusedElem,r=s.selectionRange;if(t!==a&&a&&a.ownerDocument&&aN(a.ownerDocument.documentElement,a)){if(r!==null&&O0(a)){if(t=r.start,s=r.end,s===void 0&&(s=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(s,a.value.length);else if(s=(t=a.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var n=a.textContent.length,i=Math.min(r.start,n);r=r.end===void 0?i:Math.min(r.end,n),!s.extend&&i>r&&(n=r,r=i,i=n),n=Vg(a,i);var l=Vg(a,r);n&&l&&(s.rangeCount!==1||s.anchorNode!==n.node||s.anchorOffset!==n.offset||s.focusNode!==l.node||s.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),s.removeAllRanges(),i>r?(s.addRange(t),s.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),s.addRange(t)))}}for(t=[],s=a;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)s=t[a],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var sC=er&&"documentMode"in document&&11>=document.documentMode,di=null,np=null,$l=null,ip=!1;function Hg(s,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ip||di==null||di!==Bd(r)||(r=di,"selectionStart"in r&&O0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$l&&go($l,r)||($l=r,r=Kd(np,"onSelect"),0<r.length&&(t=new I0("onSelect","select",null,t,a),s.push({event:t,listeners:r}),t.target=di)))}function xc(s,t){var a={};return a[s.toLowerCase()]=t.toLowerCase(),a["Webkit"+s]="webkit"+t,a["Moz"+s]="moz"+t,a}var ui={animationend:xc("Animation","AnimationEnd"),animationiteration:xc("Animation","AnimationIteration"),animationstart:xc("Animation","AnimationStart"),transitionend:xc("Transition","TransitionEnd")},uh={},nN={};er&&(nN=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Uu(s){if(uh[s])return uh[s];if(!ui[s])return s;var t=ui[s],a;for(a in t)if(t.hasOwnProperty(a)&&a in nN)return uh[s]=t[a];return s}var iN=Uu("animationend"),lN=Uu("animationiteration"),oN=Uu("animationstart"),cN=Uu("transitionend"),dN=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(s,t){dN.set(s,t),ei(t,[s])}for(var mh=0;mh<Wg.length;mh++){var hh=Wg[mh],aC=hh.toLowerCase(),rC=hh[0].toUpperCase()+hh.slice(1);tn(aC,"on"+rC)}tn(iN,"onAnimationEnd");tn(lN,"onAnimationIteration");tn(oN,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(cN,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ei("onBeforeInput",["compositionend","keypress","textInput","paste"]);ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nC=new Set("cancel close invalid load scroll toggle".split(" ").concat(_l));function qg(s,t,a){var r=s.type||"unknown-event";s.currentTarget=a,a6(r,t,void 0,s),s.currentTarget=null}function uN(s,t){t=(t&4)!==0;for(var a=0;a<s.length;a++){var r=s[a],n=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;qg(n,o,d),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;qg(n,o,d),i=c}}}if(Vd)throw s=tp,Vd=!1,tp=null,s}function Xe(s,t){var a=t[up];a===void 0&&(a=t[up]=new Set);var r=s+"__bubble";a.has(r)||(mN(t,s,2,!1),a.add(r))}function xh(s,t,a){var r=0;t&&(r|=4),mN(a,s,r,t)}var pc="_reactListening"+Math.random().toString(36).slice(2);function yo(s){if(!s[pc]){s[pc]=!0,vj.forEach(function(a){a!=="selectionchange"&&(nC.has(a)||xh(a,!1,s),xh(a,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[pc]||(t[pc]=!0,xh("selectionchange",!1,t))}}function mN(s,t,a,r){switch(Gj(t)){case 1:var n=v6;break;case 4:n=b6;break;default:n=M0}a=n.bind(null,t,a,s),n=void 0,!ep||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?s.addEventListener(t,a,{capture:!0,passive:n}):s.addEventListener(t,a,!0):n!==void 0?s.addEventListener(t,a,{passive:n}):s.addEventListener(t,a,!1)}function ph(s,t,a,r,n){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=bn(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}Rj(function(){var d=i,u=A0(a),m=[];e:{var h=dN.get(s);if(h!==void 0){var y=I0,g=s;switch(s){case"keypress":if(Kc(a)===0)break e;case"keydown":case"keyup":y=R6;break;case"focusin":g="focus",y=oh;break;case"focusout":g="blur",y=oh;break;case"beforeblur":case"afterblur":y=oh;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=w6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=F6;break;case iN:case lN:case oN:y=k6;break;case cN:y=z6;break;case"scroll":y=j6;break;case"wheel":y=U6;break;case"copy":case"cut":case"paste":y=A6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Lg}var j=(t&4)!==0,v=!j&&s==="scroll",x=j?h!==null?h+"Capture":null:h;j=[];for(var f=d,p;f!==null;){p=f;var N=p.stateNode;if(p.tag===5&&N!==null&&(p=N,x!==null&&(N=mo(f,x),N!=null&&j.push(vo(f,N,p)))),v)break;f=f.return}0<j.length&&(h=new y(h,g,null,a,u),m.push({event:h,listeners:j}))}}if(!(t&7)){e:{if(h=s==="mouseover"||s==="pointerover",y=s==="mouseout"||s==="pointerout",h&&a!==Jx&&(g=a.relatedTarget||a.fromElement)&&(bn(g)||g[tr]))break e;if((y||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,y?(g=a.relatedTarget||a.toElement,y=d,g=g?bn(g):null,g!==null&&(v=ti(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=d),y!==g)){if(j=Ig,N="onMouseLeave",x="onMouseEnter",f="mouse",(s==="pointerout"||s==="pointerover")&&(j=Lg,N="onPointerLeave",x="onPointerEnter",f="pointer"),v=y==null?h:mi(y),p=g==null?h:mi(g),h=new j(N,f+"leave",y,a,u),h.target=v,h.relatedTarget=p,N=null,bn(u)===d&&(j=new j(x,f+"enter",g,a,u),j.target=p,j.relatedTarget=v,N=j),v=N,y&&g)t:{for(j=y,x=g,f=0,p=j;p;p=ri(p))f++;for(p=0,N=x;N;N=ri(N))p++;for(;0<f-p;)j=ri(j),f--;for(;0<p-f;)x=ri(x),p--;for(;f--;){if(j===x||x!==null&&j===x.alternate)break t;j=ri(j),x=ri(x)}j=null}else j=null;y!==null&&Yg(m,h,y,j,!1),g!==null&&v!==null&&Yg(m,v,g,j,!0)}}e:{if(h=d?mi(d):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var w=G6;else if($g(h))if(tN)w=Z6;else{w=Q6;var S=X6}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=J6);if(w&&(w=w(s,d))){eN(m,w,a,u);break e}S&&S(s,h,d),s==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Yx(h,"number",h.value)}switch(S=d?mi(d):window,s){case"focusin":($g(S)||S.contentEditable==="true")&&(di=S,np=d,$l=null);break;case"focusout":$l=np=di=null;break;case"mousedown":ip=!0;break;case"contextmenu":case"mouseup":case"dragend":ip=!1,Hg(m,a,u);break;case"selectionchange":if(sC)break;case"keydown":case"keyup":Hg(m,a,u)}var C;if(L0)e:{switch(s){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ci?Jj(s,a)&&(T="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(T="onCompositionStart");T&&(Qj&&a.locale!=="ko"&&(ci||T!=="onCompositionStart"?T==="onCompositionEnd"&&ci&&(C=Xj()):(jr=u,E0="value"in jr?jr.value:jr.textContent,ci=!0)),S=Kd(d,T),0<S.length&&(T=new Rg(T,s,null,a,u),m.push({event:T,listeners:S}),C?T.data=C:(C=Zj(a),C!==null&&(T.data=C)))),(C=H6?W6(s,a):q6(s,a))&&(d=Kd(d,"onBeforeInput"),0<d.length&&(u=new Rg("onBeforeInput","beforeinput",null,a,u),m.push({event:u,listeners:d}),u.data=C))}uN(m,t)})}function vo(s,t,a){return{instance:s,listener:t,currentTarget:a}}function Kd(s,t){for(var a=t+"Capture",r=[];s!==null;){var n=s,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=mo(s,a),i!=null&&r.unshift(vo(s,i,n)),i=mo(s,t),i!=null&&r.push(vo(s,i,n))),s=s.return}return r}function ri(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Yg(s,t,a,r,n){for(var i=t._reactName,l=[];a!==null&&a!==r;){var o=a,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,n?(c=mo(a,i),c!=null&&l.unshift(vo(a,c,o))):n||(c=mo(a,i),c!=null&&l.push(vo(a,c,o)))),a=a.return}l.length!==0&&s.push({event:t,listeners:l})}var iC=/\r\n?/g,lC=/\u0000|\uFFFD/g;function Kg(s){return(typeof s=="string"?s:""+s).replace(iC,`
`).replace(lC,"")}function fc(s,t,a){if(t=Kg(t),Kg(s)!==t&&a)throw Error(ne(425))}function Gd(){}var lp=null,op=null;function cp(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,oC=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,cC=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(s){return Gg.resolve(null).then(s).catch(dC)}:dp;function dC(s){setTimeout(function(){throw s})}function fh(s,t){var a=t,r=0;do{var n=a.nextSibling;if(s.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){s.removeChild(n),po(t);return}r--}else a!=="$"&&a!=="$?"&&a!=="$!"||r++;a=n}while(a);po(t)}function Pr(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Xg(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return s;t--}else a==="/$"&&t++}s=s.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),Sa="__reactFiber$"+Xi,bo="__reactProps$"+Xi,tr="__reactContainer$"+Xi,up="__reactEvents$"+Xi,uC="__reactListeners$"+Xi,mC="__reactHandles$"+Xi;function bn(s){var t=s[Sa];if(t)return t;for(var a=s.parentNode;a;){if(t=a[tr]||a[Sa]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(s=Xg(s);s!==null;){if(a=s[Sa])return a;s=Xg(s)}return t}s=a,a=s.parentNode}return null}function Ko(s){return s=s[Sa]||s[tr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function mi(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(ne(33))}function Vu(s){return s[bo]||null}var mp=[],hi=-1;function sn(s){return{current:s}}function Je(s){0>hi||(s.current=mp[hi],mp[hi]=null,hi--)}function Ge(s,t){hi++,mp[hi]=s.current,s.current=t}var Yr={},ls=sn(Yr),ws=sn(!1),Vn=Yr;function Oi(s,t){var a=s.type.contextTypes;if(!a)return Yr;var r=s.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in a)n[i]=t[i];return r&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=n),n}function Ss(s){return s=s.childContextTypes,s!=null}function Xd(){Je(ws),Je(ls)}function Qg(s,t,a){if(ls.current!==Yr)throw Error(ne(168));Ge(ls,t),Ge(ws,a)}function hN(s,t,a){var r=s.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return a;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(ne(108,XS(s)||"Unknown",n));return mt({},a,r)}function Qd(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Yr,Vn=ls.current,Ge(ls,s),Ge(ws,ws.current),!0}function Jg(s,t,a){var r=s.stateNode;if(!r)throw Error(ne(169));a?(s=hN(s,t,Vn),r.__reactInternalMemoizedMergedChildContext=s,Je(ws),Je(ls),Ge(ls,s)):Je(ws),Ge(ws,a)}var Va=null,Hu=!1,gh=!1;function xN(s){Va===null?Va=[s]:Va.push(s)}function hC(s){Hu=!0,xN(s)}function an(){if(!gh&&Va!==null){gh=!0;var s=0,t=ze;try{var a=Va;for(ze=1;s<a.length;s++){var r=a[s];do r=r(!0);while(r!==null)}Va=null,Hu=!1}catch(n){throw Va!==null&&(Va=Va.slice(s+1)),$j(T0,an),n}finally{ze=t,gh=!1}}return null}var xi=[],pi=0,Jd=null,Zd=0,Us=[],Vs=0,Hn=null,qa=1,Ya="";function xn(s,t){xi[pi++]=Zd,xi[pi++]=Jd,Jd=s,Zd=t}function pN(s,t,a){Us[Vs++]=qa,Us[Vs++]=Ya,Us[Vs++]=Hn,Hn=s;var r=qa;s=Ya;var n=32-ca(r)-1;r&=~(1<<n),a+=1;var i=32-ca(t)+n;if(30<i){var l=n-n%5;i=(r&(1<<l)-1).toString(32),r>>=l,n-=l,qa=1<<32-ca(t)+n|a<<n|r,Ya=i+s}else qa=1<<i|a<<n|r,Ya=s}function F0(s){s.return!==null&&(xn(s,1),pN(s,1,0))}function $0(s){for(;s===Jd;)Jd=xi[--pi],xi[pi]=null,Zd=xi[--pi],xi[pi]=null;for(;s===Hn;)Hn=Us[--Vs],Us[Vs]=null,Ya=Us[--Vs],Us[Vs]=null,qa=Us[--Vs],Us[Vs]=null}var Es=null,Ms=null,at=!1,ra=null;function fN(s,t){var a=Ws(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=s,t=s.deletions,t===null?(s.deletions=[a],s.flags|=16):t.push(a)}function Zg(s,t){switch(s.tag){case 5:var a=s.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,Es=s,Ms=Pr(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,Es=s,Ms=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=Hn!==null?{id:qa,overflow:Ya}:null,s.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=Ws(18,null,null,0),a.stateNode=t,a.return=s,s.child=a,Es=s,Ms=null,!0):!1;default:return!1}}function hp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function xp(s){if(at){var t=Ms;if(t){var a=t;if(!Zg(s,t)){if(hp(s))throw Error(ne(418));t=Pr(a.nextSibling);var r=Es;t&&Zg(s,t)?fN(r,a):(s.flags=s.flags&-4097|2,at=!1,Es=s)}}else{if(hp(s))throw Error(ne(418));s.flags=s.flags&-4097|2,at=!1,Es=s}}}function ey(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Es=s}function gc(s){if(s!==Es)return!1;if(!at)return ey(s),at=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!cp(s.type,s.memoizedProps)),t&&(t=Ms)){if(hp(s))throw gN(),Error(ne(418));for(;t;)fN(s,t),t=Pr(t.nextSibling)}if(ey(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ne(317));e:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"){if(t===0){Ms=Pr(s.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}s=s.nextSibling}Ms=null}}else Ms=Es?Pr(s.stateNode.nextSibling):null;return!0}function gN(){for(var s=Ms;s;)s=Pr(s.nextSibling)}function Fi(){Ms=Es=null,at=!1}function z0(s){ra===null?ra=[s]:ra.push(s)}var xC=lr.ReactCurrentBatchConfig;function ml(s,t,a){if(s=a.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(ne(309));var r=a.stateNode}if(!r)throw Error(ne(147,s));var n=r,i=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof s!="string")throw Error(ne(284));if(!a._owner)throw Error(ne(290,s))}return s}function yc(s,t){throw s=Object.prototype.toString.call(t),Error(ne(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function ty(s){var t=s._init;return t(s._payload)}function yN(s){function t(x,f){if(s){var p=x.deletions;p===null?(x.deletions=[f],x.flags|=16):p.push(f)}}function a(x,f){if(!s)return null;for(;f!==null;)t(x,f),f=f.sibling;return null}function r(x,f){for(x=new Map;f!==null;)f.key!==null?x.set(f.key,f):x.set(f.index,f),f=f.sibling;return x}function n(x,f){return x=Ir(x,f),x.index=0,x.sibling=null,x}function i(x,f,p){return x.index=p,s?(p=x.alternate,p!==null?(p=p.index,p<f?(x.flags|=2,f):p):(x.flags|=2,f)):(x.flags|=1048576,f)}function l(x){return s&&x.alternate===null&&(x.flags|=2),x}function o(x,f,p,N){return f===null||f.tag!==6?(f=Sh(p,x.mode,N),f.return=x,f):(f=n(f,p),f.return=x,f)}function c(x,f,p,N){var w=p.type;return w===oi?u(x,f,p.props.children,N,p.key):f!==null&&(f.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===hr&&ty(w)===f.type)?(N=n(f,p.props),N.ref=ml(x,f,p),N.return=x,N):(N=td(p.type,p.key,p.props,null,x.mode,N),N.ref=ml(x,f,p),N.return=x,N)}function d(x,f,p,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=Ch(p,x.mode,N),f.return=x,f):(f=n(f,p.children||[]),f.return=x,f)}function u(x,f,p,N,w){return f===null||f.tag!==7?(f=Mn(p,x.mode,N,w),f.return=x,f):(f=n(f,p),f.return=x,f)}function m(x,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Sh(""+f,x.mode,p),f.return=x,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case lc:return p=td(f.type,f.key,f.props,null,x.mode,p),p.ref=ml(x,null,f),p.return=x,p;case li:return f=Ch(f,x.mode,p),f.return=x,f;case hr:var N=f._init;return m(x,N(f._payload),p)}if(Cl(f)||ll(f))return f=Mn(f,x.mode,p,null),f.return=x,f;yc(x,f)}return null}function h(x,f,p,N){var w=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return w!==null?null:o(x,f,""+p,N);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case lc:return p.key===w?c(x,f,p,N):null;case li:return p.key===w?d(x,f,p,N):null;case hr:return w=p._init,h(x,f,w(p._payload),N)}if(Cl(p)||ll(p))return w!==null?null:u(x,f,p,N,null);yc(x,p)}return null}function y(x,f,p,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(p)||null,o(f,x,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case lc:return x=x.get(N.key===null?p:N.key)||null,c(f,x,N,w);case li:return x=x.get(N.key===null?p:N.key)||null,d(f,x,N,w);case hr:var S=N._init;return y(x,f,p,S(N._payload),w)}if(Cl(N)||ll(N))return x=x.get(p)||null,u(f,x,N,w,null);yc(f,N)}return null}function g(x,f,p,N){for(var w=null,S=null,C=f,T=f=0,_=null;C!==null&&T<p.length;T++){C.index>T?(_=C,C=null):_=C.sibling;var F=h(x,C,p[T],N);if(F===null){C===null&&(C=_);break}s&&C&&F.alternate===null&&t(x,C),f=i(F,f,T),S===null?w=F:S.sibling=F,S=F,C=_}if(T===p.length)return a(x,C),at&&xn(x,T),w;if(C===null){for(;T<p.length;T++)C=m(x,p[T],N),C!==null&&(f=i(C,f,T),S===null?w=C:S.sibling=C,S=C);return at&&xn(x,T),w}for(C=r(x,C);T<p.length;T++)_=y(C,x,T,p[T],N),_!==null&&(s&&_.alternate!==null&&C.delete(_.key===null?T:_.key),f=i(_,f,T),S===null?w=_:S.sibling=_,S=_);return s&&C.forEach(function(D){return t(x,D)}),at&&xn(x,T),w}function j(x,f,p,N){var w=ll(p);if(typeof w!="function")throw Error(ne(150));if(p=w.call(p),p==null)throw Error(ne(151));for(var S=w=null,C=f,T=f=0,_=null,F=p.next();C!==null&&!F.done;T++,F=p.next()){C.index>T?(_=C,C=null):_=C.sibling;var D=h(x,C,F.value,N);if(D===null){C===null&&(C=_);break}s&&C&&D.alternate===null&&t(x,C),f=i(D,f,T),S===null?w=D:S.sibling=D,S=D,C=_}if(F.done)return a(x,C),at&&xn(x,T),w;if(C===null){for(;!F.done;T++,F=p.next())F=m(x,F.value,N),F!==null&&(f=i(F,f,T),S===null?w=F:S.sibling=F,S=F);return at&&xn(x,T),w}for(C=r(x,C);!F.done;T++,F=p.next())F=y(C,x,T,F.value,N),F!==null&&(s&&F.alternate!==null&&C.delete(F.key===null?T:F.key),f=i(F,f,T),S===null?w=F:S.sibling=F,S=F);return s&&C.forEach(function(R){return t(x,R)}),at&&xn(x,T),w}function v(x,f,p,N){if(typeof p=="object"&&p!==null&&p.type===oi&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case lc:e:{for(var w=p.key,S=f;S!==null;){if(S.key===w){if(w=p.type,w===oi){if(S.tag===7){a(x,S.sibling),f=n(S,p.props.children),f.return=x,x=f;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===hr&&ty(w)===S.type){a(x,S.sibling),f=n(S,p.props),f.ref=ml(x,S,p),f.return=x,x=f;break e}a(x,S);break}else t(x,S);S=S.sibling}p.type===oi?(f=Mn(p.props.children,x.mode,N,p.key),f.return=x,x=f):(N=td(p.type,p.key,p.props,null,x.mode,N),N.ref=ml(x,f,p),N.return=x,x=N)}return l(x);case li:e:{for(S=p.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){a(x,f.sibling),f=n(f,p.children||[]),f.return=x,x=f;break e}else{a(x,f);break}else t(x,f);f=f.sibling}f=Ch(p,x.mode,N),f.return=x,x=f}return l(x);case hr:return S=p._init,v(x,f,S(p._payload),N)}if(Cl(p))return g(x,f,p,N);if(ll(p))return j(x,f,p,N);yc(x,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(a(x,f.sibling),f=n(f,p),f.return=x,x=f):(a(x,f),f=Sh(p,x.mode,N),f.return=x,x=f),l(x)):a(x,f)}return v}var $i=yN(!0),vN=yN(!1),eu=sn(null),tu=null,fi=null,B0=null;function U0(){B0=fi=tu=null}function V0(s){var t=eu.current;Je(eu),s._currentValue=t}function pp(s,t,a){for(;s!==null;){var r=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),s===a)break;s=s.return}}function Si(s,t){tu=s,B0=fi=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(Ns=!0),s.firstContext=null)}function Ks(s){var t=s._currentValue;if(B0!==s)if(s={context:s,memoizedValue:t,next:null},fi===null){if(tu===null)throw Error(ne(308));fi=s,tu.dependencies={lanes:0,firstContext:s}}else fi=fi.next=s;return t}var jn=null;function H0(s){jn===null?jn=[s]:jn.push(s)}function bN(s,t,a,r){var n=t.interleaved;return n===null?(a.next=a,H0(t)):(a.next=n.next,n.next=a),t.interleaved=a,sr(s,r)}function sr(s,t){s.lanes|=t;var a=s.alternate;for(a!==null&&(a.lanes|=t),a=s,s=s.return;s!==null;)s.childLanes|=t,a=s.alternate,a!==null&&(a.childLanes|=t),a=s,s=s.return;return a.tag===3?a.stateNode:null}var xr=!1;function W0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jN(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Qa(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(s,t,a){var r=s.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,sr(s,a)}return n=r.interleaved,n===null?(t.next=t,H0(r)):(t.next=n.next,n.next=t),r.interleaved=t,sr(s,a)}function Gc(s,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var r=t.lanes;r&=s.pendingLanes,a|=r,t.lanes=a,P0(s,a)}}function sy(s,t){var a=s.updateQueue,r=s.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var n=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var l={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};i===null?n=i=l:i=i.next=l,a=a.next}while(a!==null);i===null?n=i=t:i=i.next=t}else n=i=t;a={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:r.shared,effects:r.effects},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=t:s.next=t,a.lastBaseUpdate=t}function su(s,t,a,r){var n=s.updateQueue;xr=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=s.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=n.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,y=o.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=s,j=o;switch(h=t,y=a,j.tag){case 1:if(g=j.payload,typeof g=="function"){m=g.call(y,m,h);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=j.payload,h=typeof g=="function"?g.call(y,m,h):g,h==null)break e;m=mt({},m,h);break e;case 2:xr=!0}}o.callback!==null&&o.lane!==0&&(s.flags|=64,h=n.effects,h===null?n.effects=[o]:h.push(o))}else y={eventTime:y,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=y,c=m):u=u.next=y,l|=h;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;h=o,o=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(1);if(u===null&&(c=m),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);qn|=l,s.lanes=l,s.memoizedState=m}}function ay(s,t,a){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var r=s[t],n=r.callback;if(n!==null){if(r.callback=null,r=a,typeof n!="function")throw Error(ne(191,n));n.call(r)}}}var Go={},Aa=sn(Go),jo=sn(Go),No=sn(Go);function Nn(s){if(s===Go)throw Error(ne(174));return s}function q0(s,t){switch(Ge(No,t),Ge(jo,s),Ge(Aa,Go),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gx(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=Gx(t,s)}Je(Aa),Ge(Aa,t)}function zi(){Je(Aa),Je(jo),Je(No)}function NN(s){Nn(No.current);var t=Nn(Aa.current),a=Gx(t,s.type);t!==a&&(Ge(jo,s),Ge(Aa,a))}function Y0(s){jo.current===s&&(Je(Aa),Je(jo))}var dt=sn(0);function au(s){for(var t=s;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yh=[];function K0(){for(var s=0;s<yh.length;s++)yh[s]._workInProgressVersionPrimary=null;yh.length=0}var Xc=lr.ReactCurrentDispatcher,vh=lr.ReactCurrentBatchConfig,Wn=0,ut=null,Mt=null,Ft=null,ru=!1,zl=!1,wo=0,pC=0;function Qt(){throw Error(ne(321))}function G0(s,t){if(t===null)return!1;for(var a=0;a<t.length&&a<s.length;a++)if(!ha(s[a],t[a]))return!1;return!0}function X0(s,t,a,r,n,i){if(Wn=i,ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xc.current=s===null||s.memoizedState===null?vC:bC,s=a(r,n),zl){i=0;do{if(zl=!1,wo=0,25<=i)throw Error(ne(301));i+=1,Ft=Mt=null,t.updateQueue=null,Xc.current=jC,s=a(r,n)}while(zl)}if(Xc.current=nu,t=Mt!==null&&Mt.next!==null,Wn=0,Ft=Mt=ut=null,ru=!1,t)throw Error(ne(300));return s}function Q0(){var s=wo!==0;return wo=0,s}function Na(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?ut.memoizedState=Ft=s:Ft=Ft.next=s,Ft}function Gs(){if(Mt===null){var s=ut.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var t=Ft===null?ut.memoizedState:Ft.next;if(t!==null)Ft=t,Mt=s;else{if(s===null)throw Error(ne(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Ft===null?ut.memoizedState=Ft=s:Ft=Ft.next=s}return Ft}function So(s,t){return typeof t=="function"?t(s):t}function bh(s){var t=Gs(),a=t.queue;if(a===null)throw Error(ne(311));a.lastRenderedReducer=s;var r=Mt,n=r.baseQueue,i=a.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}r.baseQueue=n=i,a.pending=null}if(n!==null){i=n.next,r=r.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Wn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:s(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=r):c=c.next=m,ut.lanes|=u,qn|=u}d=d.next}while(d!==null&&d!==i);c===null?l=r:c.next=o,ha(r,t.memoizedState)||(Ns=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,a.lastRenderedState=r}if(s=a.interleaved,s!==null){n=s;do i=n.lane,ut.lanes|=i,qn|=i,n=n.next;while(n!==s)}else n===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function jh(s){var t=Gs(),a=t.queue;if(a===null)throw Error(ne(311));a.lastRenderedReducer=s;var r=a.dispatch,n=a.pending,i=t.memoizedState;if(n!==null){a.pending=null;var l=n=n.next;do i=s(i,l.action),l=l.next;while(l!==n);ha(i,t.memoizedState)||(Ns=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,r]}function wN(){}function SN(s,t){var a=ut,r=Gs(),n=t(),i=!ha(r.memoizedState,n);if(i&&(r.memoizedState=n,Ns=!0),r=r.queue,J0(_N.bind(null,a,r,s),[s]),r.getSnapshot!==t||i||Ft!==null&&Ft.memoizedState.tag&1){if(a.flags|=2048,Co(9,kN.bind(null,a,r,n,t),void 0,null),Bt===null)throw Error(ne(349));Wn&30||CN(a,t,n)}return n}function CN(s,t,a){s.flags|=16384,s={getSnapshot:t,value:a},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.stores=[s]):(a=t.stores,a===null?t.stores=[s]:a.push(s))}function kN(s,t,a,r){t.value=a,t.getSnapshot=r,AN(t)&&TN(s)}function _N(s,t,a){return a(function(){AN(t)&&TN(s)})}function AN(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!ha(s,a)}catch{return!0}}function TN(s){var t=sr(s,1);t!==null&&da(t,s,1,-1)}function ry(s){var t=Na();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:s},t.queue=s,s=s.dispatch=yC.bind(null,ut,s),[t.memoizedState,s]}function Co(s,t,a,r){return s={tag:s,create:t,destroy:a,deps:r,next:null},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.lastEffect=s.next=s):(a=t.lastEffect,a===null?t.lastEffect=s.next=s:(r=a.next,a.next=s,s.next=r,t.lastEffect=s)),s}function PN(){return Gs().memoizedState}function Qc(s,t,a,r){var n=Na();ut.flags|=s,n.memoizedState=Co(1|t,a,void 0,r===void 0?null:r)}function Wu(s,t,a,r){var n=Gs();r=r===void 0?null:r;var i=void 0;if(Mt!==null){var l=Mt.memoizedState;if(i=l.destroy,r!==null&&G0(r,l.deps)){n.memoizedState=Co(t,a,i,r);return}}ut.flags|=s,n.memoizedState=Co(1|t,a,i,r)}function ny(s,t){return Qc(8390656,8,s,t)}function J0(s,t){return Wu(2048,8,s,t)}function DN(s,t){return Wu(4,2,s,t)}function MN(s,t){return Wu(4,4,s,t)}function EN(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function IN(s,t,a){return a=a!=null?a.concat([s]):null,Wu(4,4,EN.bind(null,t,s),a)}function Z0(){}function RN(s,t){var a=Gs();t=t===void 0?null:t;var r=a.memoizedState;return r!==null&&t!==null&&G0(t,r[1])?r[0]:(a.memoizedState=[s,t],s)}function LN(s,t){var a=Gs();t=t===void 0?null:t;var r=a.memoizedState;return r!==null&&t!==null&&G0(t,r[1])?r[0]:(s=s(),a.memoizedState=[s,t],s)}function ON(s,t,a){return Wn&21?(ha(a,t)||(a=Uj(),ut.lanes|=a,qn|=a,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,Ns=!0),s.memoizedState=a)}function fC(s,t){var a=ze;ze=a!==0&&4>a?a:4,s(!0);var r=vh.transition;vh.transition={};try{s(!1),t()}finally{ze=a,vh.transition=r}}function FN(){return Gs().memoizedState}function gC(s,t,a){var r=Er(s);if(a={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null},$N(s))zN(t,a);else if(a=bN(s,t,a,r),a!==null){var n=xs();da(a,s,r,n),BN(a,t,r)}}function yC(s,t,a){var r=Er(s),n={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null};if($N(s))zN(t,n);else{var i=s.alternate;if(s.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,a);if(n.hasEagerState=!0,n.eagerState=o,ha(o,l)){var c=t.interleaved;c===null?(n.next=n,H0(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}a=bN(s,t,n,r),a!==null&&(n=xs(),da(a,s,r,n),BN(a,t,r))}}function $N(s){var t=s.alternate;return s===ut||t!==null&&t===ut}function zN(s,t){zl=ru=!0;var a=s.pending;a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t}function BN(s,t,a){if(a&4194240){var r=t.lanes;r&=s.pendingLanes,a|=r,t.lanes=a,P0(s,a)}}var nu={readContext:Ks,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},vC={readContext:Ks,useCallback:function(s,t){return Na().memoizedState=[s,t===void 0?null:t],s},useContext:Ks,useEffect:ny,useImperativeHandle:function(s,t,a){return a=a!=null?a.concat([s]):null,Qc(4194308,4,EN.bind(null,t,s),a)},useLayoutEffect:function(s,t){return Qc(4194308,4,s,t)},useInsertionEffect:function(s,t){return Qc(4,2,s,t)},useMemo:function(s,t){var a=Na();return t=t===void 0?null:t,s=s(),a.memoizedState=[s,t],s},useReducer:function(s,t,a){var r=Na();return t=a!==void 0?a(t):t,r.memoizedState=r.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},r.queue=s,s=s.dispatch=gC.bind(null,ut,s),[r.memoizedState,s]},useRef:function(s){var t=Na();return s={current:s},t.memoizedState=s},useState:ry,useDebugValue:Z0,useDeferredValue:function(s){return Na().memoizedState=s},useTransition:function(){var s=ry(!1),t=s[0];return s=fC.bind(null,s[1]),Na().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,a){var r=ut,n=Na();if(at){if(a===void 0)throw Error(ne(407));a=a()}else{if(a=t(),Bt===null)throw Error(ne(349));Wn&30||CN(r,t,a)}n.memoizedState=a;var i={value:a,getSnapshot:t};return n.queue=i,ny(_N.bind(null,r,i,s),[s]),r.flags|=2048,Co(9,kN.bind(null,r,i,a,t),void 0,null),a},useId:function(){var s=Na(),t=Bt.identifierPrefix;if(at){var a=Ya,r=qa;a=(r&~(1<<32-ca(r)-1)).toString(32)+a,t=":"+t+"R"+a,a=wo++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=pC++,t=":"+t+"r"+a.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},bC={readContext:Ks,useCallback:RN,useContext:Ks,useEffect:J0,useImperativeHandle:IN,useInsertionEffect:DN,useLayoutEffect:MN,useMemo:LN,useReducer:bh,useRef:PN,useState:function(){return bh(So)},useDebugValue:Z0,useDeferredValue:function(s){var t=Gs();return ON(t,Mt.memoizedState,s)},useTransition:function(){var s=bh(So)[0],t=Gs().memoizedState;return[s,t]},useMutableSource:wN,useSyncExternalStore:SN,useId:FN,unstable_isNewReconciler:!1},jC={readContext:Ks,useCallback:RN,useContext:Ks,useEffect:J0,useImperativeHandle:IN,useInsertionEffect:DN,useLayoutEffect:MN,useMemo:LN,useReducer:jh,useRef:PN,useState:function(){return jh(So)},useDebugValue:Z0,useDeferredValue:function(s){var t=Gs();return Mt===null?t.memoizedState=s:ON(t,Mt.memoizedState,s)},useTransition:function(){var s=jh(So)[0],t=Gs().memoizedState;return[s,t]},useMutableSource:wN,useSyncExternalStore:SN,useId:FN,unstable_isNewReconciler:!1};function ta(s,t){if(s&&s.defaultProps){t=mt({},t),s=s.defaultProps;for(var a in s)t[a]===void 0&&(t[a]=s[a]);return t}return t}function fp(s,t,a,r){t=s.memoizedState,a=a(r,t),a=a==null?t:mt({},t,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var qu={isMounted:function(s){return(s=s._reactInternals)?ti(s)===s:!1},enqueueSetState:function(s,t,a){s=s._reactInternals;var r=xs(),n=Er(s),i=Qa(r,n);i.payload=t,a!=null&&(i.callback=a),t=Dr(s,i,n),t!==null&&(da(t,s,n,r),Gc(t,s,n))},enqueueReplaceState:function(s,t,a){s=s._reactInternals;var r=xs(),n=Er(s),i=Qa(r,n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=Dr(s,i,n),t!==null&&(da(t,s,n,r),Gc(t,s,n))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var a=xs(),r=Er(s),n=Qa(a,r);n.tag=2,t!=null&&(n.callback=t),t=Dr(s,n,r),t!==null&&(da(t,s,r,a),Gc(t,s,r))}};function iy(s,t,a,r,n,i,l){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!go(a,r)||!go(n,i):!0}function UN(s,t,a){var r=!1,n=Yr,i=t.contextType;return typeof i=="object"&&i!==null?i=Ks(i):(n=Ss(t)?Vn:ls.current,r=t.contextTypes,i=(r=r!=null)?Oi(s,n):Yr),t=new t(a,i),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qu,s.stateNode=t,t._reactInternals=s,r&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=n,s.__reactInternalMemoizedMaskedChildContext=i),t}function ly(s,t,a,r){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==s&&qu.enqueueReplaceState(t,t.state,null)}function gp(s,t,a,r){var n=s.stateNode;n.props=a,n.state=s.memoizedState,n.refs={},W0(s);var i=t.contextType;typeof i=="object"&&i!==null?n.context=Ks(i):(i=Ss(t)?Vn:ls.current,n.context=Oi(s,i)),n.state=s.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(fp(s,t,i,a),n.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&qu.enqueueReplaceState(n,n.state,null),su(s,a,n,r),n.state=s.memoizedState),typeof n.componentDidMount=="function"&&(s.flags|=4194308)}function Bi(s,t){try{var a="",r=t;do a+=GS(r),r=r.return;while(r);var n=a}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:s,source:t,stack:n,digest:null}}function Nh(s,t,a){return{value:s,source:null,stack:a??null,digest:t??null}}function yp(s,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var NC=typeof WeakMap=="function"?WeakMap:Map;function VN(s,t,a){a=Qa(-1,a),a.tag=3,a.payload={element:null};var r=t.value;return a.callback=function(){lu||(lu=!0,Ap=r),yp(s,t)},a}function HN(s,t,a){a=Qa(-1,a),a.tag=3;var r=s.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;a.payload=function(){return r(n)},a.callback=function(){yp(s,t)}}var i=s.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(a.callback=function(){yp(s,t),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),a}function oy(s,t,a){var r=s.pingCache;if(r===null){r=s.pingCache=new NC;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(a)||(n.add(a),s=LC.bind(null,s,t,a),t.then(s,s))}function cy(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function dy(s,t,a,r,n){return s.mode&1?(s.flags|=65536,s.lanes=n,s):(s===t?s.flags|=65536:(s.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Qa(-1,1),t.tag=2,Dr(a,t,1))),a.lanes|=1),s)}var wC=lr.ReactCurrentOwner,Ns=!1;function ms(s,t,a,r){t.child=s===null?vN(t,null,a,r):$i(t,s.child,a,r)}function uy(s,t,a,r,n){a=a.render;var i=t.ref;return Si(t,n),r=X0(s,t,a,r,i,n),a=Q0(),s!==null&&!Ns?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~n,ar(s,t,n)):(at&&a&&F0(t),t.flags|=1,ms(s,t,r,n),t.child)}function my(s,t,a,r,n){if(s===null){var i=a.type;return typeof i=="function"&&!of(i)&&i.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=i,WN(s,t,i,r,n)):(s=td(a.type,null,r,t,t.mode,n),s.ref=t.ref,s.return=t,t.child=s)}if(i=s.child,!(s.lanes&n)){var l=i.memoizedProps;if(a=a.compare,a=a!==null?a:go,a(l,r)&&s.ref===t.ref)return ar(s,t,n)}return t.flags|=1,s=Ir(i,r),s.ref=t.ref,s.return=t,t.child=s}function WN(s,t,a,r,n){if(s!==null){var i=s.memoizedProps;if(go(i,r)&&s.ref===t.ref)if(Ns=!1,t.pendingProps=r=i,(s.lanes&n)!==0)s.flags&131072&&(Ns=!0);else return t.lanes=s.lanes,ar(s,t,n)}return vp(s,t,a,r,n)}function qN(s,t,a){var r=t.pendingProps,n=r.children,i=s!==null?s.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(yi,Ds),Ds|=a;else{if(!(a&1073741824))return s=i!==null?i.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,Ge(yi,Ds),Ds|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:a,Ge(yi,Ds),Ds|=r}else i!==null?(r=i.baseLanes|a,t.memoizedState=null):r=a,Ge(yi,Ds),Ds|=r;return ms(s,t,n,a),t.child}function YN(s,t){var a=t.ref;(s===null&&a!==null||s!==null&&s.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function vp(s,t,a,r,n){var i=Ss(a)?Vn:ls.current;return i=Oi(t,i),Si(t,n),a=X0(s,t,a,r,i,n),r=Q0(),s!==null&&!Ns?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~n,ar(s,t,n)):(at&&r&&F0(t),t.flags|=1,ms(s,t,a,n),t.child)}function hy(s,t,a,r,n){if(Ss(a)){var i=!0;Qd(t)}else i=!1;if(Si(t,n),t.stateNode===null)Jc(s,t),UN(t,a,r),gp(t,a,r,n),r=!0;else if(s===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=a.contextType;typeof d=="object"&&d!==null?d=Ks(d):(d=Ss(a)?Vn:ls.current,d=Oi(t,d));var u=a.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==d)&&ly(t,l,r,d),xr=!1;var h=t.memoizedState;l.state=h,su(t,r,l,n),c=t.memoizedState,o!==r||h!==c||ws.current||xr?(typeof u=="function"&&(fp(t,a,u,r),c=t.memoizedState),(o=xr||iy(t,a,o,r,h,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=d,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,jN(s,t),o=t.memoizedProps,d=t.type===t.elementType?o:ta(t.type,o),l.props=d,m=t.pendingProps,h=l.context,c=a.contextType,typeof c=="object"&&c!==null?c=Ks(c):(c=Ss(a)?Vn:ls.current,c=Oi(t,c));var y=a.getDerivedStateFromProps;(u=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||h!==c)&&ly(t,l,r,c),xr=!1,h=t.memoizedState,l.state=h,su(t,r,l,n);var g=t.memoizedState;o!==m||h!==g||ws.current||xr?(typeof y=="function"&&(fp(t,a,y,r),g=t.memoizedState),(d=xr||iy(t,a,d,r,h,g,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===s.memoizedProps&&h===s.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===s.memoizedProps&&h===s.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),l.props=r,l.state=g,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||o===s.memoizedProps&&h===s.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===s.memoizedProps&&h===s.memoizedState||(t.flags|=1024),r=!1)}return bp(s,t,a,r,i,n)}function bp(s,t,a,r,n,i){YN(s,t);var l=(t.flags&128)!==0;if(!r&&!l)return n&&Jg(t,a,!1),ar(s,t,i);r=t.stateNode,wC.current=t;var o=l&&typeof a.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,s!==null&&l?(t.child=$i(t,s.child,null,i),t.child=$i(t,null,o,i)):ms(s,t,o,i),t.memoizedState=r.state,n&&Jg(t,a,!0),t.child}function KN(s){var t=s.stateNode;t.pendingContext?Qg(s,t.pendingContext,t.pendingContext!==t.context):t.context&&Qg(s,t.context,!1),q0(s,t.containerInfo)}function xy(s,t,a,r,n){return Fi(),z0(n),t.flags|=256,ms(s,t,a,r),t.child}var jp={dehydrated:null,treeContext:null,retryLane:0};function Np(s){return{baseLanes:s,cachePool:null,transitions:null}}function GN(s,t,a){var r=t.pendingProps,n=dt.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=s!==null&&s.memoizedState===null?!1:(n&2)!==0),o?(i=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(n|=1),Ge(dt,n&1),s===null)return xp(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,s=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Gu(l,r,0,null),s=Mn(s,r,a,null),i.return=t,s.return=t,i.sibling=s,t.child=i,t.child.memoizedState=Np(a),t.memoizedState=jp,s):ef(t,l));if(n=s.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return SC(s,t,l,r,o,n,a);if(i){i=r.fallback,l=t.mode,n=s.child,o=n.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ir(n,c),r.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=Ir(o,i):(i=Mn(i,l,a,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=s.child.memoizedState,l=l===null?Np(a):{baseLanes:l.baseLanes|a,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=s.childLanes&~a,t.memoizedState=jp,r}return i=s.child,s=i.sibling,r=Ir(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=a),r.return=t,r.sibling=null,s!==null&&(a=t.deletions,a===null?(t.deletions=[s],t.flags|=16):a.push(s)),t.child=r,t.memoizedState=null,r}function ef(s,t){return t=Gu({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function vc(s,t,a,r){return r!==null&&z0(r),$i(t,s.child,null,a),s=ef(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function SC(s,t,a,r,n,i,l){if(a)return t.flags&256?(t.flags&=-257,r=Nh(Error(ne(422))),vc(s,t,l,r)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(i=r.fallback,n=t.mode,r=Gu({mode:"visible",children:r.children},n,0,null),i=Mn(i,n,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&$i(t,s.child,null,l),t.child.memoizedState=Np(l),t.memoizedState=jp,i);if(!(t.mode&1))return vc(s,t,l,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(ne(419)),r=Nh(i,r,void 0),vc(s,t,l,r)}if(o=(l&s.childLanes)!==0,Ns||o){if(r=Bt,r!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,sr(s,n),da(r,s,n,-1))}return lf(),r=Nh(Error(ne(421))),vc(s,t,l,r)}return n.data==="$?"?(t.flags|=128,t.child=s.child,t=OC.bind(null,s),n._reactRetry=t,null):(s=i.treeContext,Ms=Pr(n.nextSibling),Es=t,at=!0,ra=null,s!==null&&(Us[Vs++]=qa,Us[Vs++]=Ya,Us[Vs++]=Hn,qa=s.id,Ya=s.overflow,Hn=t),t=ef(t,r.children),t.flags|=4096,t)}function py(s,t,a){s.lanes|=t;var r=s.alternate;r!==null&&(r.lanes|=t),pp(s.return,t,a)}function wh(s,t,a,r,n){var i=s.memoizedState;i===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=a,i.tailMode=n)}function XN(s,t,a){var r=t.pendingProps,n=r.revealOrder,i=r.tail;if(ms(s,t,r.children,a),r=dt.current,r&2)r=r&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&py(s,a,t);else if(s.tag===19)py(s,a,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}r&=1}if(Ge(dt,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(a=t.child,n=null;a!==null;)s=a.alternate,s!==null&&au(s)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),wh(t,!1,n,a,i);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(s=n.alternate,s!==null&&au(s)===null){t.child=n;break}s=n.sibling,n.sibling=a,a=n,n=s}wh(t,!0,a,null,i);break;case"together":wh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jc(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function ar(s,t,a){if(s!==null&&(t.dependencies=s.dependencies),qn|=t.lanes,!(a&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(ne(153));if(t.child!==null){for(s=t.child,a=Ir(s,s.pendingProps),t.child=a,a.return=t;s.sibling!==null;)s=s.sibling,a=a.sibling=Ir(s,s.pendingProps),a.return=t;a.sibling=null}return t.child}function CC(s,t,a){switch(t.tag){case 3:KN(t),Fi();break;case 5:NN(t);break;case 1:Ss(t.type)&&Qd(t);break;case 4:q0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Ge(eu,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ge(dt,dt.current&1),t.flags|=128,null):a&t.child.childLanes?GN(s,t,a):(Ge(dt,dt.current&1),s=ar(s,t,a),s!==null?s.sibling:null);Ge(dt,dt.current&1);break;case 19:if(r=(a&t.childLanes)!==0,s.flags&128){if(r)return XN(s,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ge(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,qN(s,t,a)}return ar(s,t,a)}var QN,wp,JN,ZN;QN=function(s,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};wp=function(){};JN=function(s,t,a,r){var n=s.memoizedProps;if(n!==r){s=t.stateNode,Nn(Aa.current);var i=null;switch(a){case"input":n=Wx(s,n),r=Wx(s,r),i=[];break;case"select":n=mt({},n,{value:void 0}),r=mt({},r,{value:void 0}),i=[];break;case"textarea":n=Kx(s,n),r=Kx(s,r),i=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(s.onclick=Gd)}Xx(a,r);var l;a=null;for(d in n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(a||(a={}),a[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(co.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=n!=null?n[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(a||(a={}),a[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(a||(a={}),a[l]=c[l])}else a||(i||(i=[]),i.push(d,a)),a=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(co.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Xe("scroll",s),i||o===c||(i=[])):(i=i||[]).push(d,c))}a&&(i=i||[]).push("style",a);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};ZN=function(s,t,a,r){a!==r&&(t.flags|=4)};function hl(s,t){if(!at)switch(s.tailMode){case"hidden":t=s.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:r.sibling=null}}function Jt(s){var t=s.alternate!==null&&s.alternate.child===s.child,a=0,r=0;if(t)for(var n=s.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=s,n=n.sibling;else for(n=s.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=s,n=n.sibling;return s.subtreeFlags|=r,s.childLanes=a,t}function kC(s,t,a){var r=t.pendingProps;switch($0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(t),null;case 1:return Ss(t.type)&&Xd(),Jt(t),null;case 3:return r=t.stateNode,zi(),Je(ws),Je(ls),K0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(gc(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ra!==null&&(Dp(ra),ra=null))),wp(s,t),Jt(t),null;case 5:Y0(t);var n=Nn(No.current);if(a=t.type,s!==null&&t.stateNode!=null)JN(s,t,a,r,n),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ne(166));return Jt(t),null}if(s=Nn(Aa.current),gc(t)){r=t.stateNode,a=t.type;var i=t.memoizedProps;switch(r[Sa]=t,r[bo]=i,s=(t.mode&1)!==0,a){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(n=0;n<_l.length;n++)Xe(_l[n],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":Sg(r,i),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",r);break;case"textarea":kg(r,i),Xe("invalid",r)}Xx(a,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&fc(r.textContent,o,s),n=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&fc(r.textContent,o,s),n=["children",""+o]):co.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Xe("scroll",r)}switch(a){case"input":oc(r),Cg(r,i,!0);break;case"textarea":oc(r),_g(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Gd)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=_j(a)),s==="http://www.w3.org/1999/xhtml"?a==="script"?(s=l.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof r.is=="string"?s=l.createElement(a,{is:r.is}):(s=l.createElement(a),a==="select"&&(l=s,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):s=l.createElementNS(s,a),s[Sa]=t,s[bo]=r,QN(s,t,!1,!1),t.stateNode=s;e:{switch(l=Qx(a,r),a){case"dialog":Xe("cancel",s),Xe("close",s),n=r;break;case"iframe":case"object":case"embed":Xe("load",s),n=r;break;case"video":case"audio":for(n=0;n<_l.length;n++)Xe(_l[n],s);n=r;break;case"source":Xe("error",s),n=r;break;case"img":case"image":case"link":Xe("error",s),Xe("load",s),n=r;break;case"details":Xe("toggle",s),n=r;break;case"input":Sg(s,r),n=Wx(s,r),Xe("invalid",s);break;case"option":n=r;break;case"select":s._wrapperState={wasMultiple:!!r.multiple},n=mt({},r,{value:void 0}),Xe("invalid",s);break;case"textarea":kg(s,r),n=Kx(s,r),Xe("invalid",s);break;default:n=r}Xx(a,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Pj(s,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Aj(s,c)):i==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&uo(s,c):typeof c=="number"&&uo(s,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(co.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Xe("scroll",s):c!=null&&S0(s,i,c,l))}switch(a){case"input":oc(s),Cg(s,r,!1);break;case"textarea":oc(s),_g(s);break;case"option":r.value!=null&&s.setAttribute("value",""+qr(r.value));break;case"select":s.multiple=!!r.multiple,i=r.value,i!=null?bi(s,!!r.multiple,i,!1):r.defaultValue!=null&&bi(s,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(s.onclick=Gd)}switch(a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jt(t),null;case 6:if(s&&t.stateNode!=null)ZN(s,t,s.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ne(166));if(a=Nn(No.current),Nn(Aa.current),gc(t)){if(r=t.stateNode,a=t.memoizedProps,r[Sa]=t,(i=r.nodeValue!==a)&&(s=Es,s!==null))switch(s.tag){case 3:fc(r.nodeValue,a,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&fc(r.nodeValue,a,(s.mode&1)!==0)}i&&(t.flags|=4)}else r=(a.nodeType===9?a:a.ownerDocument).createTextNode(r),r[Sa]=t,t.stateNode=r}return Jt(t),null;case 13:if(Je(dt),r=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(at&&Ms!==null&&t.mode&1&&!(t.flags&128))gN(),Fi(),t.flags|=98560,i=!1;else if(i=gc(t),r!==null&&r.dehydrated!==null){if(s===null){if(!i)throw Error(ne(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[Sa]=t}else Fi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jt(t),i=!1}else ra!==null&&(Dp(ra),ra=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=a,t):(r=r!==null,r!==(s!==null&&s.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(s===null||dt.current&1?Et===0&&(Et=3):lf())),t.updateQueue!==null&&(t.flags|=4),Jt(t),null);case 4:return zi(),wp(s,t),s===null&&yo(t.stateNode.containerInfo),Jt(t),null;case 10:return V0(t.type._context),Jt(t),null;case 17:return Ss(t.type)&&Xd(),Jt(t),null;case 19:if(Je(dt),i=t.memoizedState,i===null)return Jt(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)hl(i,!1);else{if(Et!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(l=au(s),l!==null){for(t.flags|=128,hl(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=a,a=t.child;a!==null;)i=a,s=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a=a.sibling;return Ge(dt,dt.current&1|2),t.child}s=s.sibling}i.tail!==null&&bt()>Ui&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304)}else{if(!r)if(s=au(l),s!==null){if(t.flags|=128,r=!0,a=s.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!at)return Jt(t),null}else 2*bt()-i.renderingStartTime>Ui&&a!==1073741824&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(a=i.last,a!==null?a.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=bt(),t.sibling=null,a=dt.current,Ge(dt,r?a&1|2:a&1),t):(Jt(t),null);case 22:case 23:return nf(),r=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ds&1073741824&&(Jt(t),t.subtreeFlags&6&&(t.flags|=8192)):Jt(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function _C(s,t){switch($0(t),t.tag){case 1:return Ss(t.type)&&Xd(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return zi(),Je(ws),Je(ls),K0(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return Y0(t),null;case 13:if(Je(dt),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));Fi()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return Je(dt),null;case 4:return zi(),null;case 10:return V0(t.type._context),null;case 22:case 23:return nf(),null;case 24:return null;default:return null}}var bc=!1,as=!1,AC=typeof WeakSet=="function"?WeakSet:Set,ue=null;function gi(s,t){var a=s.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(r){ft(s,t,r)}else a.current=null}function Sp(s,t,a){try{a()}catch(r){ft(s,t,r)}}var fy=!1;function TC(s,t){if(lp=qd,s=rN(),O0(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var n=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=s,h=null;t:for(;;){for(var y;m!==a||n!==0&&m.nodeType!==3||(o=l+n),m!==i||r!==0&&m.nodeType!==3||(c=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===s)break t;if(h===a&&++d===n&&(o=l),h===i&&++u===r&&(c=l),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}a=o===-1||c===-1?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(op={focusedElem:s,selectionRange:a},qd=!1,ue=t;ue!==null;)if(t=ue,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,ue=s;else for(;ue!==null;){t=ue;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var j=g.memoizedProps,v=g.memoizedState,x=t.stateNode,f=x.getSnapshotBeforeUpdate(t.elementType===t.type?j:ta(t.type,j),v);x.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(N){ft(t,t.return,N)}if(s=t.sibling,s!==null){s.return=t.return,ue=s;break}ue=t.return}return g=fy,fy=!1,g}function Bl(s,t,a){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&s)===s){var i=n.destroy;n.destroy=void 0,i!==void 0&&Sp(t,a,i)}n=n.next}while(n!==r)}}function Yu(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&s)===s){var r=a.create;a.destroy=r()}a=a.next}while(a!==t)}}function Cp(s){var t=s.ref;if(t!==null){var a=s.stateNode;switch(s.tag){case 5:s=a;break;default:s=a}typeof t=="function"?t(s):t.current=s}}function ew(s){var t=s.alternate;t!==null&&(s.alternate=null,ew(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[Sa],delete t[bo],delete t[up],delete t[uC],delete t[mC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function tw(s){return s.tag===5||s.tag===3||s.tag===4}function gy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||tw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function kp(s,t,a){var r=s.tag;if(r===5||r===6)s=s.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(s,t):a.insertBefore(s,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(s,a)):(t=a,t.appendChild(s)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Gd));else if(r!==4&&(s=s.child,s!==null))for(kp(s,t,a),s=s.sibling;s!==null;)kp(s,t,a),s=s.sibling}function _p(s,t,a){var r=s.tag;if(r===5||r===6)s=s.stateNode,t?a.insertBefore(s,t):a.appendChild(s);else if(r!==4&&(s=s.child,s!==null))for(_p(s,t,a),s=s.sibling;s!==null;)_p(s,t,a),s=s.sibling}var qt=null,sa=!1;function dr(s,t,a){for(a=a.child;a!==null;)sw(s,t,a),a=a.sibling}function sw(s,t,a){if(_a&&typeof _a.onCommitFiberUnmount=="function")try{_a.onCommitFiberUnmount($u,a)}catch{}switch(a.tag){case 5:as||gi(a,t);case 6:var r=qt,n=sa;qt=null,dr(s,t,a),qt=r,sa=n,qt!==null&&(sa?(s=qt,a=a.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):qt.removeChild(a.stateNode));break;case 18:qt!==null&&(sa?(s=qt,a=a.stateNode,s.nodeType===8?fh(s.parentNode,a):s.nodeType===1&&fh(s,a),po(s)):fh(qt,a.stateNode));break;case 4:r=qt,n=sa,qt=a.stateNode.containerInfo,sa=!0,dr(s,t,a),qt=r,sa=n;break;case 0:case 11:case 14:case 15:if(!as&&(r=a.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Sp(a,t,l),n=n.next}while(n!==r)}dr(s,t,a);break;case 1:if(!as&&(gi(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(o){ft(a,t,o)}dr(s,t,a);break;case 21:dr(s,t,a);break;case 22:a.mode&1?(as=(r=as)||a.memoizedState!==null,dr(s,t,a),as=r):dr(s,t,a);break;default:dr(s,t,a)}}function yy(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var a=s.stateNode;a===null&&(a=s.stateNode=new AC),t.forEach(function(r){var n=FC.bind(null,s,r);a.has(r)||(a.add(r),r.then(n,n))})}}function ea(s,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var n=a[r];try{var i=s,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:qt=o.stateNode,sa=!1;break e;case 3:qt=o.stateNode.containerInfo,sa=!0;break e;case 4:qt=o.stateNode.containerInfo,sa=!0;break e}o=o.return}if(qt===null)throw Error(ne(160));sw(i,l,n),qt=null,sa=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){ft(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aw(t,s),t=t.sibling}function aw(s,t){var a=s.alternate,r=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ea(t,s),va(s),r&4){try{Bl(3,s,s.return),Yu(3,s)}catch(j){ft(s,s.return,j)}try{Bl(5,s,s.return)}catch(j){ft(s,s.return,j)}}break;case 1:ea(t,s),va(s),r&512&&a!==null&&gi(a,a.return);break;case 5:if(ea(t,s),va(s),r&512&&a!==null&&gi(a,a.return),s.flags&32){var n=s.stateNode;try{uo(n,"")}catch(j){ft(s,s.return,j)}}if(r&4&&(n=s.stateNode,n!=null)){var i=s.memoizedProps,l=a!==null?a.memoizedProps:i,o=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Cj(n,i),Qx(o,l);var d=Qx(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?Pj(n,m):u==="dangerouslySetInnerHTML"?Aj(n,m):u==="children"?uo(n,m):S0(n,u,m,d)}switch(o){case"input":qx(n,i);break;case"textarea":kj(n,i);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?bi(n,!!i.multiple,y,!1):h!==!!i.multiple&&(i.defaultValue!=null?bi(n,!!i.multiple,i.defaultValue,!0):bi(n,!!i.multiple,i.multiple?[]:"",!1))}n[bo]=i}catch(j){ft(s,s.return,j)}}break;case 6:if(ea(t,s),va(s),r&4){if(s.stateNode===null)throw Error(ne(162));n=s.stateNode,i=s.memoizedProps;try{n.nodeValue=i}catch(j){ft(s,s.return,j)}}break;case 3:if(ea(t,s),va(s),r&4&&a!==null&&a.memoizedState.isDehydrated)try{po(t.containerInfo)}catch(j){ft(s,s.return,j)}break;case 4:ea(t,s),va(s);break;case 13:ea(t,s),va(s),n=s.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(af=bt())),r&4&&yy(s);break;case 22:if(u=a!==null&&a.memoizedState!==null,s.mode&1?(as=(d=as)||u,ea(t,s),as=d):ea(t,s),va(s),r&8192){if(d=s.memoizedState!==null,(s.stateNode.isHidden=d)&&!u&&s.mode&1)for(ue=s,u=s.child;u!==null;){for(m=ue=u;ue!==null;){switch(h=ue,y=h.child,h.tag){case 0:case 11:case 14:case 15:Bl(4,h,h.return);break;case 1:gi(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,a=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(j){ft(r,a,j)}}break;case 5:gi(h,h.return);break;case 22:if(h.memoizedState!==null){by(m);continue}}y!==null?(y.return=h,ue=y):by(m)}u=u.sibling}e:for(u=null,m=s;;){if(m.tag===5){if(u===null){u=m;try{n=m.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Tj("display",l))}catch(j){ft(s,s.return,j)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(j){ft(s,s.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===s)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ea(t,s),va(s),r&4&&yy(s);break;case 21:break;default:ea(t,s),va(s)}}function va(s){var t=s.flags;if(t&2){try{e:{for(var a=s.return;a!==null;){if(tw(a)){var r=a;break e}a=a.return}throw Error(ne(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(uo(n,""),r.flags&=-33);var i=gy(s);_p(s,i,n);break;case 3:case 4:var l=r.stateNode.containerInfo,o=gy(s);kp(s,o,l);break;default:throw Error(ne(161))}}catch(c){ft(s,s.return,c)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function PC(s,t,a){ue=s,rw(s)}function rw(s,t,a){for(var r=(s.mode&1)!==0;ue!==null;){var n=ue,i=n.child;if(n.tag===22&&r){var l=n.memoizedState!==null||bc;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||as;o=bc;var d=as;if(bc=l,(as=c)&&!d)for(ue=n;ue!==null;)l=ue,c=l.child,l.tag===22&&l.memoizedState!==null?jy(n):c!==null?(c.return=l,ue=c):jy(n);for(;i!==null;)ue=i,rw(i),i=i.sibling;ue=n,bc=o,as=d}vy(s)}else n.subtreeFlags&8772&&i!==null?(i.return=n,ue=i):vy(s)}}function vy(s){for(;ue!==null;){var t=ue;if(t.flags&8772){var a=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:as||Yu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!as)if(a===null)r.componentDidMount();else{var n=t.elementType===t.type?a.memoizedProps:ta(t.type,a.memoizedProps);r.componentDidUpdate(n,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ay(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}ay(t,l,a)}break;case 5:var o=t.stateNode;if(a===null&&t.flags&4){a=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&po(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}as||t.flags&512&&Cp(t)}catch(h){ft(t,t.return,h)}}if(t===s){ue=null;break}if(a=t.sibling,a!==null){a.return=t.return,ue=a;break}ue=t.return}}function by(s){for(;ue!==null;){var t=ue;if(t===s){ue=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ue=a;break}ue=t.return}}function jy(s){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{Yu(4,t)}catch(c){ft(t,a,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(c){ft(t,n,c)}}var i=t.return;try{Cp(t)}catch(c){ft(t,i,c)}break;case 5:var l=t.return;try{Cp(t)}catch(c){ft(t,l,c)}}}catch(c){ft(t,t.return,c)}if(t===s){ue=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ue=o;break}ue=t.return}}var DC=Math.ceil,iu=lr.ReactCurrentDispatcher,tf=lr.ReactCurrentOwner,Ys=lr.ReactCurrentBatchConfig,Ee=0,Bt=null,At=null,Kt=0,Ds=0,yi=sn(0),Et=0,ko=null,qn=0,Ku=0,sf=0,Ul=null,vs=null,af=0,Ui=1/0,Ua=null,lu=!1,Ap=null,Mr=null,jc=!1,Nr=null,ou=0,Vl=0,Tp=null,Zc=-1,ed=0;function xs(){return Ee&6?bt():Zc!==-1?Zc:Zc=bt()}function Er(s){return s.mode&1?Ee&2&&Kt!==0?Kt&-Kt:xC.transition!==null?(ed===0&&(ed=Uj()),ed):(s=ze,s!==0||(s=window.event,s=s===void 0?16:Gj(s.type)),s):1}function da(s,t,a,r){if(50<Vl)throw Vl=0,Tp=null,Error(ne(185));qo(s,a,r),(!(Ee&2)||s!==Bt)&&(s===Bt&&(!(Ee&2)&&(Ku|=a),Et===4&&fr(s,Kt)),Cs(s,r),a===1&&Ee===0&&!(t.mode&1)&&(Ui=bt()+500,Hu&&an()))}function Cs(s,t){var a=s.callbackNode;x6(s,t);var r=Wd(s,s===Bt?Kt:0);if(r===0)a!==null&&Pg(a),s.callbackNode=null,s.callbackPriority=0;else if(t=r&-r,s.callbackPriority!==t){if(a!=null&&Pg(a),t===1)s.tag===0?hC(Ny.bind(null,s)):xN(Ny.bind(null,s)),cC(function(){!(Ee&6)&&an()}),a=null;else{switch(Vj(r)){case 1:a=T0;break;case 4:a=zj;break;case 16:a=Hd;break;case 536870912:a=Bj;break;default:a=Hd}a=mw(a,nw.bind(null,s))}s.callbackPriority=t,s.callbackNode=a}}function nw(s,t){if(Zc=-1,ed=0,Ee&6)throw Error(ne(327));var a=s.callbackNode;if(Ci()&&s.callbackNode!==a)return null;var r=Wd(s,s===Bt?Kt:0);if(r===0)return null;if(r&30||r&s.expiredLanes||t)t=cu(s,r);else{t=r;var n=Ee;Ee|=2;var i=lw();(Bt!==s||Kt!==t)&&(Ua=null,Ui=bt()+500,Dn(s,t));do try{IC();break}catch(o){iw(s,o)}while(1);U0(),iu.current=i,Ee=n,At!==null?t=0:(Bt=null,Kt=0,t=Et)}if(t!==0){if(t===2&&(n=sp(s),n!==0&&(r=n,t=Pp(s,n))),t===1)throw a=ko,Dn(s,0),fr(s,r),Cs(s,bt()),a;if(t===6)fr(s,r);else{if(n=s.current.alternate,!(r&30)&&!MC(n)&&(t=cu(s,r),t===2&&(i=sp(s),i!==0&&(r=i,t=Pp(s,i))),t===1))throw a=ko,Dn(s,0),fr(s,r),Cs(s,bt()),a;switch(s.finishedWork=n,s.finishedLanes=r,t){case 0:case 1:throw Error(ne(345));case 2:pn(s,vs,Ua);break;case 3:if(fr(s,r),(r&130023424)===r&&(t=af+500-bt(),10<t)){if(Wd(s,0)!==0)break;if(n=s.suspendedLanes,(n&r)!==r){xs(),s.pingedLanes|=s.suspendedLanes&n;break}s.timeoutHandle=dp(pn.bind(null,s,vs,Ua),t);break}pn(s,vs,Ua);break;case 4:if(fr(s,r),(r&4194240)===r)break;for(t=s.eventTimes,n=-1;0<r;){var l=31-ca(r);i=1<<l,l=t[l],l>n&&(n=l),r&=~i}if(r=n,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DC(r/1960))-r,10<r){s.timeoutHandle=dp(pn.bind(null,s,vs,Ua),r);break}pn(s,vs,Ua);break;case 5:pn(s,vs,Ua);break;default:throw Error(ne(329))}}}return Cs(s,bt()),s.callbackNode===a?nw.bind(null,s):null}function Pp(s,t){var a=Ul;return s.current.memoizedState.isDehydrated&&(Dn(s,t).flags|=256),s=cu(s,t),s!==2&&(t=vs,vs=a,t!==null&&Dp(t)),s}function Dp(s){vs===null?vs=s:vs.push.apply(vs,s)}function MC(s){for(var t=s;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var r=0;r<a.length;r++){var n=a[r],i=n.getSnapshot;n=n.value;try{if(!ha(i(),n))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fr(s,t){for(t&=~sf,t&=~Ku,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var a=31-ca(t),r=1<<a;s[a]=-1,t&=~r}}function Ny(s){if(Ee&6)throw Error(ne(327));Ci();var t=Wd(s,0);if(!(t&1))return Cs(s,bt()),null;var a=cu(s,t);if(s.tag!==0&&a===2){var r=sp(s);r!==0&&(t=r,a=Pp(s,r))}if(a===1)throw a=ko,Dn(s,0),fr(s,t),Cs(s,bt()),a;if(a===6)throw Error(ne(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,pn(s,vs,Ua),Cs(s,bt()),null}function rf(s,t){var a=Ee;Ee|=1;try{return s(t)}finally{Ee=a,Ee===0&&(Ui=bt()+500,Hu&&an())}}function Yn(s){Nr!==null&&Nr.tag===0&&!(Ee&6)&&Ci();var t=Ee;Ee|=1;var a=Ys.transition,r=ze;try{if(Ys.transition=null,ze=1,s)return s()}finally{ze=r,Ys.transition=a,Ee=t,!(Ee&6)&&an()}}function nf(){Ds=yi.current,Je(yi)}function Dn(s,t){s.finishedWork=null,s.finishedLanes=0;var a=s.timeoutHandle;if(a!==-1&&(s.timeoutHandle=-1,oC(a)),At!==null)for(a=At.return;a!==null;){var r=a;switch($0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xd();break;case 3:zi(),Je(ws),Je(ls),K0();break;case 5:Y0(r);break;case 4:zi();break;case 13:Je(dt);break;case 19:Je(dt);break;case 10:V0(r.type._context);break;case 22:case 23:nf()}a=a.return}if(Bt=s,At=s=Ir(s.current,null),Kt=Ds=t,Et=0,ko=null,sf=Ku=qn=0,vs=Ul=null,jn!==null){for(t=0;t<jn.length;t++)if(a=jn[t],r=a.interleaved,r!==null){a.interleaved=null;var n=r.next,i=a.pending;if(i!==null){var l=i.next;i.next=n,r.next=l}a.pending=r}jn=null}return s}function iw(s,t){do{var a=At;try{if(U0(),Xc.current=nu,ru){for(var r=ut.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}ru=!1}if(Wn=0,Ft=Mt=ut=null,zl=!1,wo=0,tf.current=null,a===null||a.return===null){Et=1,ko=t,At=null;break}e:{var i=s,l=a.return,o=a,c=t;if(t=Kt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=cy(l);if(y!==null){y.flags&=-257,dy(y,l,o,i,t),y.mode&1&&oy(i,d,t),t=y,c=d;var g=t.updateQueue;if(g===null){var j=new Set;j.add(c),t.updateQueue=j}else g.add(c);break e}else{if(!(t&1)){oy(i,d,t),lf();break e}c=Error(ne(426))}}else if(at&&o.mode&1){var v=cy(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),dy(v,l,o,i,t),z0(Bi(c,o));break e}}i=c=Bi(c,o),Et!==4&&(Et=2),Ul===null?Ul=[i]:Ul.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=VN(i,c,t);sy(i,x);break e;case 1:o=c;var f=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Mr===null||!Mr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=HN(i,o,t);sy(i,N);break e}}i=i.return}while(i!==null)}cw(a)}catch(w){t=w,At===a&&a!==null&&(At=a=a.return);continue}break}while(1)}function lw(){var s=iu.current;return iu.current=nu,s===null?nu:s}function lf(){(Et===0||Et===3||Et===2)&&(Et=4),Bt===null||!(qn&268435455)&&!(Ku&268435455)||fr(Bt,Kt)}function cu(s,t){var a=Ee;Ee|=2;var r=lw();(Bt!==s||Kt!==t)&&(Ua=null,Dn(s,t));do try{EC();break}catch(n){iw(s,n)}while(1);if(U0(),Ee=a,iu.current=r,At!==null)throw Error(ne(261));return Bt=null,Kt=0,Et}function EC(){for(;At!==null;)ow(At)}function IC(){for(;At!==null&&!n6();)ow(At)}function ow(s){var t=uw(s.alternate,s,Ds);s.memoizedProps=s.pendingProps,t===null?cw(s):At=t,tf.current=null}function cw(s){var t=s;do{var a=t.alternate;if(s=t.return,t.flags&32768){if(a=_C(a,t),a!==null){a.flags&=32767,At=a;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Et=6,At=null;return}}else if(a=kC(a,t,Ds),a!==null){At=a;return}if(t=t.sibling,t!==null){At=t;return}At=t=s}while(t!==null);Et===0&&(Et=5)}function pn(s,t,a){var r=ze,n=Ys.transition;try{Ys.transition=null,ze=1,RC(s,t,a,r)}finally{Ys.transition=n,ze=r}return null}function RC(s,t,a,r){do Ci();while(Nr!==null);if(Ee&6)throw Error(ne(327));a=s.finishedWork;var n=s.finishedLanes;if(a===null)return null;if(s.finishedWork=null,s.finishedLanes=0,a===s.current)throw Error(ne(177));s.callbackNode=null,s.callbackPriority=0;var i=a.lanes|a.childLanes;if(p6(s,i),s===Bt&&(At=Bt=null,Kt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||jc||(jc=!0,mw(Hd,function(){return Ci(),null})),i=(a.flags&15990)!==0,a.subtreeFlags&15990||i){i=Ys.transition,Ys.transition=null;var l=ze;ze=1;var o=Ee;Ee|=4,tf.current=null,TC(s,a),aw(a,s),tC(op),qd=!!lp,op=lp=null,s.current=a,PC(a),i6(),Ee=o,ze=l,Ys.transition=i}else s.current=a;if(jc&&(jc=!1,Nr=s,ou=n),i=s.pendingLanes,i===0&&(Mr=null),c6(a.stateNode),Cs(s,bt()),t!==null)for(r=s.onRecoverableError,a=0;a<t.length;a++)n=t[a],r(n.value,{componentStack:n.stack,digest:n.digest});if(lu)throw lu=!1,s=Ap,Ap=null,s;return ou&1&&s.tag!==0&&Ci(),i=s.pendingLanes,i&1?s===Tp?Vl++:(Vl=0,Tp=s):Vl=0,an(),null}function Ci(){if(Nr!==null){var s=Vj(ou),t=Ys.transition,a=ze;try{if(Ys.transition=null,ze=16>s?16:s,Nr===null)var r=!1;else{if(s=Nr,Nr=null,ou=0,Ee&6)throw Error(ne(331));var n=Ee;for(Ee|=4,ue=s.current;ue!==null;){var i=ue,l=i.child;if(ue.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(ue=d;ue!==null;){var u=ue;switch(u.tag){case 0:case 11:case 15:Bl(8,u,i)}var m=u.child;if(m!==null)m.return=u,ue=m;else for(;ue!==null;){u=ue;var h=u.sibling,y=u.return;if(ew(u),u===d){ue=null;break}if(h!==null){h.return=y,ue=h;break}ue=y}}}var g=i.alternate;if(g!==null){var j=g.child;if(j!==null){g.child=null;do{var v=j.sibling;j.sibling=null,j=v}while(j!==null)}}ue=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ue=l;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bl(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ue=x;break e}ue=i.return}}var f=s.current;for(ue=f;ue!==null;){l=ue;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,ue=p;else e:for(l=f;ue!==null;){if(o=ue,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yu(9,o)}}catch(w){ft(o,o.return,w)}if(o===l){ue=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,ue=N;break e}ue=o.return}}if(Ee=n,an(),_a&&typeof _a.onPostCommitFiberRoot=="function")try{_a.onPostCommitFiberRoot($u,s)}catch{}r=!0}return r}finally{ze=a,Ys.transition=t}}return!1}function wy(s,t,a){t=Bi(a,t),t=VN(s,t,1),s=Dr(s,t,1),t=xs(),s!==null&&(qo(s,1,t),Cs(s,t))}function ft(s,t,a){if(s.tag===3)wy(s,s,a);else for(;t!==null;){if(t.tag===3){wy(t,s,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){s=Bi(a,s),s=HN(t,s,1),t=Dr(t,s,1),s=xs(),t!==null&&(qo(t,1,s),Cs(t,s));break}}t=t.return}}function LC(s,t,a){var r=s.pingCache;r!==null&&r.delete(t),t=xs(),s.pingedLanes|=s.suspendedLanes&a,Bt===s&&(Kt&a)===a&&(Et===4||Et===3&&(Kt&130023424)===Kt&&500>bt()-af?Dn(s,0):sf|=a),Cs(s,t)}function dw(s,t){t===0&&(s.mode&1?(t=uc,uc<<=1,!(uc&130023424)&&(uc=4194304)):t=1);var a=xs();s=sr(s,t),s!==null&&(qo(s,t,a),Cs(s,a))}function OC(s){var t=s.memoizedState,a=0;t!==null&&(a=t.retryLane),dw(s,a)}function FC(s,t){var a=0;switch(s.tag){case 13:var r=s.stateNode,n=s.memoizedState;n!==null&&(a=n.retryLane);break;case 19:r=s.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(t),dw(s,a)}var uw;uw=function(s,t,a){if(s!==null)if(s.memoizedProps!==t.pendingProps||ws.current)Ns=!0;else{if(!(s.lanes&a)&&!(t.flags&128))return Ns=!1,CC(s,t,a);Ns=!!(s.flags&131072)}else Ns=!1,at&&t.flags&1048576&&pN(t,Zd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Jc(s,t),s=t.pendingProps;var n=Oi(t,ls.current);Si(t,a),n=X0(null,t,r,s,n,a);var i=Q0();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ss(r)?(i=!0,Qd(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,W0(t),n.updater=qu,t.stateNode=n,n._reactInternals=t,gp(t,r,s,a),t=bp(null,t,r,!0,i,a)):(t.tag=0,at&&i&&F0(t),ms(null,t,n,a),t=t.child),t;case 16:r=t.elementType;e:{switch(Jc(s,t),s=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=zC(r),s=ta(r,s),n){case 0:t=vp(null,t,r,s,a);break e;case 1:t=hy(null,t,r,s,a);break e;case 11:t=uy(null,t,r,s,a);break e;case 14:t=my(null,t,r,ta(r.type,s),a);break e}throw Error(ne(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ta(r,n),vp(s,t,r,n,a);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ta(r,n),hy(s,t,r,n,a);case 3:e:{if(KN(t),s===null)throw Error(ne(387));r=t.pendingProps,i=t.memoizedState,n=i.element,jN(s,t),su(t,r,null,a);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=Bi(Error(ne(423)),t),t=xy(s,t,r,a,n);break e}else if(r!==n){n=Bi(Error(ne(424)),t),t=xy(s,t,r,a,n);break e}else for(Ms=Pr(t.stateNode.containerInfo.firstChild),Es=t,at=!0,ra=null,a=vN(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Fi(),r===n){t=ar(s,t,a);break e}ms(s,t,r,a)}t=t.child}return t;case 5:return NN(t),s===null&&xp(t),r=t.type,n=t.pendingProps,i=s!==null?s.memoizedProps:null,l=n.children,cp(r,n)?l=null:i!==null&&cp(r,i)&&(t.flags|=32),YN(s,t),ms(s,t,l,a),t.child;case 6:return s===null&&xp(t),null;case 13:return GN(s,t,a);case 4:return q0(t,t.stateNode.containerInfo),r=t.pendingProps,s===null?t.child=$i(t,null,r,a):ms(s,t,r,a),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ta(r,n),uy(s,t,r,n,a);case 7:return ms(s,t,t.pendingProps,a),t.child;case 8:return ms(s,t,t.pendingProps.children,a),t.child;case 12:return ms(s,t,t.pendingProps.children,a),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,Ge(eu,r._currentValue),r._currentValue=l,i!==null)if(ha(i.value,l)){if(i.children===n.children&&!ws.current){t=ar(s,t,a);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Qa(-1,a&-a),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=a,c=i.alternate,c!==null&&(c.lanes|=a),pp(i.return,a,t),o.lanes|=a;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(ne(341));l.lanes|=a,o=l.alternate,o!==null&&(o.lanes|=a),pp(l,a,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}ms(s,t,n.children,a),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,Si(t,a),n=Ks(n),r=r(n),t.flags|=1,ms(s,t,r,a),t.child;case 14:return r=t.type,n=ta(r,t.pendingProps),n=ta(r.type,n),my(s,t,r,n,a);case 15:return WN(s,t,t.type,t.pendingProps,a);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ta(r,n),Jc(s,t),t.tag=1,Ss(r)?(s=!0,Qd(t)):s=!1,Si(t,a),UN(t,r,n),gp(t,r,n,a),bp(null,t,r,!0,s,a);case 19:return XN(s,t,a);case 22:return qN(s,t,a)}throw Error(ne(156,t.tag))};function mw(s,t){return $j(s,t)}function $C(s,t,a,r){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(s,t,a,r){return new $C(s,t,a,r)}function of(s){return s=s.prototype,!(!s||!s.isReactComponent)}function zC(s){if(typeof s=="function")return of(s)?1:0;if(s!=null){if(s=s.$$typeof,s===k0)return 11;if(s===_0)return 14}return 2}function Ir(s,t){var a=s.alternate;return a===null?(a=Ws(s.tag,t,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=t,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&14680064,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a}function td(s,t,a,r,n,i){var l=2;if(r=s,typeof s=="function")of(s)&&(l=1);else if(typeof s=="string")l=5;else e:switch(s){case oi:return Mn(a.children,n,i,t);case C0:l=8,n|=8;break;case Bx:return s=Ws(12,a,t,n|2),s.elementType=Bx,s.lanes=i,s;case Ux:return s=Ws(13,a,t,n),s.elementType=Ux,s.lanes=i,s;case Vx:return s=Ws(19,a,t,n),s.elementType=Vx,s.lanes=i,s;case Nj:return Gu(a,n,i,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case bj:l=10;break e;case jj:l=9;break e;case k0:l=11;break e;case _0:l=14;break e;case hr:l=16,r=null;break e}throw Error(ne(130,s==null?s:typeof s,""))}return t=Ws(l,a,t,n),t.elementType=s,t.type=r,t.lanes=i,t}function Mn(s,t,a,r){return s=Ws(7,s,r,t),s.lanes=a,s}function Gu(s,t,a,r){return s=Ws(22,s,r,t),s.elementType=Nj,s.lanes=a,s.stateNode={isHidden:!1},s}function Sh(s,t,a){return s=Ws(6,s,null,t),s.lanes=a,s}function Ch(s,t,a){return t=Ws(4,s.children!==null?s.children:[],s.key,t),t.lanes=a,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function BC(s,t,a,r,n){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nh(0),this.expirationTimes=nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nh(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function cf(s,t,a,r,n,i,l,o,c){return s=new BC(s,t,a,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ws(3,null,null,t),s.current=i,i.stateNode=s,i.memoizedState={element:r,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},W0(i),s}function UC(s,t,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:s,containerInfo:t,implementation:a}}function hw(s){if(!s)return Yr;s=s._reactInternals;e:{if(ti(s)!==s||s.tag!==1)throw Error(ne(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ss(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(s.tag===1){var a=s.type;if(Ss(a))return hN(s,a,t)}return t}function xw(s,t,a,r,n,i,l,o,c){return s=cf(a,r,!0,s,n,i,l,o,c),s.context=hw(null),a=s.current,r=xs(),n=Er(a),i=Qa(r,n),i.callback=t??null,Dr(a,i,n),s.current.lanes=n,qo(s,n,r),Cs(s,r),s}function Xu(s,t,a,r){var n=t.current,i=xs(),l=Er(n);return a=hw(a),t.context===null?t.context=a:t.pendingContext=a,t=Qa(i,l),t.payload={element:s},r=r===void 0?null:r,r!==null&&(t.callback=r),s=Dr(n,t,l),s!==null&&(da(s,n,l,i),Gc(s,n,l)),l}function du(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Sy(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<t?a:t}}function df(s,t){Sy(s,t),(s=s.alternate)&&Sy(s,t)}function VC(){return null}var pw=typeof reportError=="function"?reportError:function(s){console.error(s)};function uf(s){this._internalRoot=s}Qu.prototype.render=uf.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(ne(409));Xu(s,t,null,null)};Qu.prototype.unmount=uf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Yn(function(){Xu(null,s,null,null)}),t[tr]=null}};function Qu(s){this._internalRoot=s}Qu.prototype.unstable_scheduleHydration=function(s){if(s){var t=qj();s={blockedOn:null,target:s,priority:t};for(var a=0;a<pr.length&&t!==0&&t<pr[a].priority;a++);pr.splice(a,0,s),a===0&&Kj(s)}};function mf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Ju(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Cy(){}function HC(s,t,a,r,n){if(n){if(typeof r=="function"){var i=r;r=function(){var d=du(l);i.call(d)}}var l=xw(t,r,s,0,null,!1,!1,"",Cy);return s._reactRootContainer=l,s[tr]=l.current,yo(s.nodeType===8?s.parentNode:s),Yn(),l}for(;n=s.lastChild;)s.removeChild(n);if(typeof r=="function"){var o=r;r=function(){var d=du(c);o.call(d)}}var c=cf(s,0,!1,null,null,!1,!1,"",Cy);return s._reactRootContainer=c,s[tr]=c.current,yo(s.nodeType===8?s.parentNode:s),Yn(function(){Xu(t,c,a,r)}),c}function Zu(s,t,a,r,n){var i=a._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=du(l);o.call(c)}}Xu(t,l,s,n)}else l=HC(a,t,s,n,r);return du(l)}Hj=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var a=kl(t.pendingLanes);a!==0&&(P0(t,a|1),Cs(t,bt()),!(Ee&6)&&(Ui=bt()+500,an()))}break;case 13:Yn(function(){var r=sr(s,1);if(r!==null){var n=xs();da(r,s,1,n)}}),df(s,1)}};D0=function(s){if(s.tag===13){var t=sr(s,134217728);if(t!==null){var a=xs();da(t,s,134217728,a)}df(s,134217728)}};Wj=function(s){if(s.tag===13){var t=Er(s),a=sr(s,t);if(a!==null){var r=xs();da(a,s,t,r)}df(s,t)}};qj=function(){return ze};Yj=function(s,t){var a=ze;try{return ze=s,t()}finally{ze=a}};Zx=function(s,t,a){switch(t){case"input":if(qx(s,a),t=a.name,a.type==="radio"&&t!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==s&&r.form===s.form){var n=Vu(r);if(!n)throw Error(ne(90));Sj(r),qx(r,n)}}}break;case"textarea":kj(s,a);break;case"select":t=a.value,t!=null&&bi(s,!!a.multiple,t,!1)}};Ej=rf;Ij=Yn;var WC={usingClientEntryPoint:!1,Events:[Ko,mi,Vu,Dj,Mj,rf]},xl={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qC={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Oj(s),s===null?null:s.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance||VC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{$u=Nc.inject(qC),_a=Nc}catch{}}Fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WC;Fs.createPortal=function(s,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(t))throw Error(ne(200));return UC(s,t,null,a)};Fs.createRoot=function(s,t){if(!mf(s))throw Error(ne(299));var a=!1,r="",n=pw;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=cf(s,1,!1,null,null,a,!1,r,n),s[tr]=t.current,yo(s.nodeType===8?s.parentNode:s),new uf(t)};Fs.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(ne(188)):(s=Object.keys(s).join(","),Error(ne(268,s)));return s=Oj(t),s=s===null?null:s.stateNode,s};Fs.flushSync=function(s){return Yn(s)};Fs.hydrate=function(s,t,a){if(!Ju(t))throw Error(ne(200));return Zu(null,s,t,!0,a)};Fs.hydrateRoot=function(s,t,a){if(!mf(s))throw Error(ne(405));var r=a!=null&&a.hydratedSources||null,n=!1,i="",l=pw;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onRecoverableError!==void 0&&(l=a.onRecoverableError)),t=xw(t,null,s,1,a??null,n,!1,i,l),s[tr]=t.current,yo(s),r)for(s=0;s<r.length;s++)a=r[s],n=a._getVersion,n=n(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,n]:t.mutableSourceEagerHydrationData.push(a,n);return new Qu(t)};Fs.render=function(s,t,a){if(!Ju(t))throw Error(ne(200));return Zu(null,s,t,!1,a)};Fs.unmountComponentAtNode=function(s){if(!Ju(s))throw Error(ne(40));return s._reactRootContainer?(Yn(function(){Zu(null,null,s,!1,function(){s._reactRootContainer=null,s[tr]=null})}),!0):!1};Fs.unstable_batchedUpdates=rf;Fs.unstable_renderSubtreeIntoContainer=function(s,t,a,r){if(!Ju(a))throw Error(ne(200));if(s==null||s._reactInternals===void 0)throw Error(ne(38));return Zu(s,t,a,!1,r)};Fs.version="18.3.1-next-f1338f8080-20240426";function fw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fw)}catch(s){console.error(s)}}fw(),fj.exports=Fs;var gw=fj.exports,ky=gw;$x.createRoot=ky.createRoot,$x.hydrateRoot=ky.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _o(){return _o=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},_o.apply(this,arguments)}var wr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(wr||(wr={}));const _y="popstate";function YC(s){s===void 0&&(s={});function t(r,n){let{pathname:i,search:l,hash:o}=r.location;return Mp("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(r,n){return typeof n=="string"?n:uu(n)}return GC(t,a,null,s)}function wt(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function yw(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function KC(){return Math.random().toString(36).substr(2,8)}function Ay(s,t){return{usr:s.state,key:s.key,idx:t}}function Mp(s,t,a,r){return a===void 0&&(a=null),_o({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?Qi(t):t,{state:a,key:t&&t.key||r||KC()})}function uu(s){let{pathname:t="/",search:a="",hash:r=""}=s;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Qi(s){let t={};if(s){let a=s.indexOf("#");a>=0&&(t.hash=s.substr(a),s=s.substr(0,a));let r=s.indexOf("?");r>=0&&(t.search=s.substr(r),s=s.substr(0,r)),s&&(t.pathname=s)}return t}function GC(s,t,a,r){r===void 0&&(r={});let{window:n=document.defaultView,v5Compat:i=!1}=r,l=n.history,o=wr.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(_o({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){o=wr.Pop;let v=u(),x=v==null?null:v-d;d=v,c&&c({action:o,location:j.location,delta:x})}function h(v,x){o=wr.Push;let f=Mp(j.location,v,x);a&&a(f,v),d=u()+1;let p=Ay(f,d),N=j.createHref(f);try{l.pushState(p,"",N)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;n.location.assign(N)}i&&c&&c({action:o,location:j.location,delta:1})}function y(v,x){o=wr.Replace;let f=Mp(j.location,v,x);a&&a(f,v),d=u();let p=Ay(f,d),N=j.createHref(f);l.replaceState(p,"",N),i&&c&&c({action:o,location:j.location,delta:0})}function g(v){let x=n.location.origin!=="null"?n.location.origin:n.location.href,f=typeof v=="string"?v:uu(v);return f=f.replace(/ $/,"%20"),wt(x,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,x)}let j={get action(){return o},get location(){return s(n,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(_y,m),c=v,()=>{n.removeEventListener(_y,m),c=null}},createHref(v){return t(n,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:y,go(v){return l.go(v)}};return j}var Ty;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Ty||(Ty={}));function XC(s,t,a){return a===void 0&&(a="/"),QC(s,t,a,!1)}function QC(s,t,a,r){let n=typeof t=="string"?Qi(t):t,i=hf(n.pathname||"/",a);if(i==null)return null;let l=vw(s);JC(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=c4(i);o=l4(l[c],d,r)}return o}function vw(s,t,a,r){t===void 0&&(t=[]),a===void 0&&(a=[]),r===void 0&&(r="");let n=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(wt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Rr([r,c.relativePath]),u=a.concat(c);i.children&&i.children.length>0&&(wt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),vw(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:n4(d,i.index),routesMeta:u})};return s.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,l);else for(let c of bw(i.path))n(i,l,c)}),t}function bw(s){let t=s.split("/");if(t.length===0)return[];let[a,...r]=t,n=a.endsWith("?"),i=a.replace(/\?$/,"");if(r.length===0)return n?[i,""]:[i];let l=bw(r.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>s.startsWith("/")&&c===""?"/":c)}function JC(s){s.sort((t,a)=>t.score!==a.score?a.score-t.score:i4(t.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}const ZC=/^:[\w-]+$/,e4=3,t4=2,s4=1,a4=10,r4=-2,Py=s=>s==="*";function n4(s,t){let a=s.split("/"),r=a.length;return a.some(Py)&&(r+=r4),t&&(r+=t4),a.filter(n=>!Py(n)).reduce((n,i)=>n+(ZC.test(i)?e4:i===""?s4:a4),r)}function i4(s,t){return s.length===t.length&&s.slice(0,-1).every((r,n)=>r===t[n])?s[s.length-1]-t[t.length-1]:0}function l4(s,t,a){a===void 0&&(a=!1);let{routesMeta:r}=s,n={},i="/",l=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=Dy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m&&d&&a&&!r[r.length-1].route.index&&(m=Dy({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(n,m.params),l.push({params:n,pathname:Rr([i,m.pathname]),pathnameBase:h4(Rr([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=Rr([i,m.pathnameBase]))}return l}function Dy(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,r]=o4(s.path,s.caseSensitive,s.end),n=t.match(a);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce((d,u,m)=>{let{paramName:h,isOptional:y}=u;if(h==="*"){let j=o[m]||"";l=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const g=o[m];return y&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:s}}function o4(s,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),yw(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let r=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),r]}function c4(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yw(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function hf(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,r=s.charAt(a);return r&&r!=="/"?null:s.slice(a)||"/"}function d4(s,t){t===void 0&&(t="/");let{pathname:a,search:r="",hash:n=""}=typeof s=="string"?Qi(s):s;return{pathname:a?a.startsWith("/")?a:u4(a,t):t,search:x4(r),hash:p4(n)}}function u4(s,t){let a=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function kh(s,t,a,r){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m4(s){return s.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function xf(s,t){let a=m4(s);return t?a.map((r,n)=>n===a.length-1?r.pathname:r.pathnameBase):a.map(r=>r.pathnameBase)}function pf(s,t,a,r){r===void 0&&(r=!1);let n;typeof s=="string"?n=Qi(s):(n=_o({},s),wt(!n.pathname||!n.pathname.includes("?"),kh("?","pathname","search",n)),wt(!n.pathname||!n.pathname.includes("#"),kh("#","pathname","hash",n)),wt(!n.search||!n.search.includes("#"),kh("#","search","hash",n)));let i=s===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=a;else{let m=t.length-1;if(!r&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),m-=1;n.pathname=h.join("/")}o=m>=0?t[m]:"/"}let c=d4(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Rr=s=>s.join("/").replace(/\/\/+/g,"/"),h4=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),x4=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,p4=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function f4(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const jw=["post","put","patch","delete"];new Set(jw);const g4=["get",...jw];new Set(g4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},Ao.apply(this,arguments)}const ff=b.createContext(null),y4=b.createContext(null),rn=b.createContext(null),em=b.createContext(null),La=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Nw=b.createContext(null);function v4(s,t){let{relative:a}=t===void 0?{}:t;Ji()||wt(!1);let{basename:r,navigator:n}=b.useContext(rn),{hash:i,pathname:l,search:o}=Cw(s,{relative:a}),c=l;return r!=="/"&&(c=l==="/"?r:Rr([r,l])),n.createHref({pathname:c,search:o,hash:i})}function Ji(){return b.useContext(em)!=null}function Oa(){return Ji()||wt(!1),b.useContext(em).location}function ww(s){b.useContext(rn).static||b.useLayoutEffect(s)}function Zi(){let{isDataRoute:s}=b.useContext(La);return s?I4():b4()}function b4(){Ji()||wt(!1);let s=b.useContext(ff),{basename:t,future:a,navigator:r}=b.useContext(rn),{matches:n}=b.useContext(La),{pathname:i}=Oa(),l=JSON.stringify(xf(n,a.v7_relativeSplatPath)),o=b.useRef(!1);return ww(()=>{o.current=!0}),b.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){r.go(d);return}let m=pf(d,JSON.parse(l),i,u.relative==="path");s==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Rr([t,m.pathname])),(u.replace?r.replace:r.push)(m,u.state,u)},[t,r,l,i,s])}const j4=b.createContext(null);function N4(s){let t=b.useContext(La).outlet;return t&&b.createElement(j4.Provider,{value:s},t)}function Sw(){let{matches:s}=b.useContext(La),t=s[s.length-1];return t?t.params:{}}function Cw(s,t){let{relative:a}=t===void 0?{}:t,{future:r}=b.useContext(rn),{matches:n}=b.useContext(La),{pathname:i}=Oa(),l=JSON.stringify(xf(n,r.v7_relativeSplatPath));return b.useMemo(()=>pf(s,JSON.parse(l),i,a==="path"),[s,l,i,a])}function w4(s,t){return S4(s,t)}function S4(s,t,a,r){Ji()||wt(!1);let{navigator:n}=b.useContext(rn),{matches:i}=b.useContext(La),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Oa(),u;if(t){var m;let v=typeof t=="string"?Qi(t):t;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||wt(!1),u=v}else u=d;let h=u.pathname||"/",y=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");y="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=XC(s,{pathname:y}),j=T4(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Rr([c,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Rr([c,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,a,r);return t&&j?b.createElement(em.Provider,{value:{location:Ao({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:wr.Pop}},j):j}function C4(){let s=E4(),t=f4(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),a?b.createElement("pre",{style:n},a):null,i)}const k4=b.createElement(C4,null);class _4 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?b.createElement(La.Provider,{value:this.props.routeContext},b.createElement(Nw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A4(s){let{routeContext:t,match:a,children:r}=s,n=b.useContext(ff);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),b.createElement(La.Provider,{value:t},r)}function T4(s,t,a,r){var n;if(t===void 0&&(t=[]),a===void 0&&(a=null),r===void 0&&(r=null),s==null){var i;if(!a)return null;if(a.errors)s=a.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let l=s,o=(n=a)==null?void 0:n.errors;if(o!=null){let u=l.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||wt(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(a&&r&&r.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:y}=a,g=m.route.loader&&h[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||g){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,h)=>{let y,g=!1,j=null,v=null;a&&(y=o&&m.route.id?o[m.route.id]:void 0,j=m.route.errorElement||k4,c&&(d<0&&h===0?(R4("route-fallback",!1),g=!0,v=null):d===h&&(g=!0,v=m.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,h+1)),f=()=>{let p;return y?p=j:g?p=v:m.route.Component?p=b.createElement(m.route.Component,null):m.route.element?p=m.route.element:p=u,b.createElement(A4,{match:m,routeContext:{outlet:u,matches:x,isDataRoute:a!=null},children:p})};return a&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?b.createElement(_4,{location:a.location,revalidation:a.revalidation,component:j,error:y,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var kw=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(kw||{}),mu=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(mu||{});function P4(s){let t=b.useContext(ff);return t||wt(!1),t}function D4(s){let t=b.useContext(y4);return t||wt(!1),t}function M4(s){let t=b.useContext(La);return t||wt(!1),t}function _w(s){let t=M4(),a=t.matches[t.matches.length-1];return a.route.id||wt(!1),a.route.id}function E4(){var s;let t=b.useContext(Nw),a=D4(mu.UseRouteError),r=_w(mu.UseRouteError);return t!==void 0?t:(s=a.errors)==null?void 0:s[r]}function I4(){let{router:s}=P4(kw.UseNavigateStable),t=_w(mu.UseNavigateStable),a=b.useRef(!1);return ww(()=>{a.current=!0}),b.useCallback(function(n,i){i===void 0&&(i={}),a.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,Ao({fromRouteId:t},i)))},[s,t])}const My={};function R4(s,t,a){!t&&!My[s]&&(My[s]=!0)}function L4(s,t){s==null||s.v7_startTransition,(s==null?void 0:s.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function fn(s){let{to:t,replace:a,state:r,relative:n}=s;Ji()||wt(!1);let{future:i,static:l}=b.useContext(rn),{matches:o}=b.useContext(La),{pathname:c}=Oa(),d=Zi(),u=pf(t,xf(o,i.v7_relativeSplatPath),c,n==="path"),m=JSON.stringify(u);return b.useEffect(()=>d(JSON.parse(m),{replace:a,state:r,relative:n}),[d,m,n,a,r]),null}function Aw(s){return N4(s.context)}function fe(s){wt(!1)}function O4(s){let{basename:t="/",children:a=null,location:r,navigationType:n=wr.Pop,navigator:i,static:l=!1,future:o}=s;Ji()&&wt(!1);let c=t.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:c,navigator:i,static:l,future:Ao({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof r=="string"&&(r=Qi(r));let{pathname:u="/",search:m="",hash:h="",state:y=null,key:g="default"}=r,j=b.useMemo(()=>{let v=hf(u,c);return v==null?null:{location:{pathname:v,search:m,hash:h,state:y,key:g},navigationType:n}},[c,u,m,h,y,g,n]);return j==null?null:b.createElement(rn.Provider,{value:d},b.createElement(em.Provider,{children:a,value:j}))}function F4(s){let{children:t,location:a}=s;return w4(Ep(t),a)}new Promise(()=>{});function Ep(s,t){t===void 0&&(t=[]);let a=[];return b.Children.forEach(s,(r,n)=>{if(!b.isValidElement(r))return;let i=[...t,n];if(r.type===b.Fragment){a.push.apply(a,Ep(r.props.children,i));return}r.type!==fe&&wt(!1),!r.props.index||!r.props.children||wt(!1);let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ep(r.props.children,i)),a.push(l)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ip(){return Ip=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},Ip.apply(this,arguments)}function $4(s,t){if(s==null)return{};var a={},r=Object.keys(s),n,i;for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&(a[n]=s[n]);return a}function z4(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function B4(s,t){return s.button===0&&(!t||t==="_self")&&!z4(s)}const U4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],V4="6";try{window.__reactRouterVersion=V4}catch{}const H4="startTransition",Ey=LS[H4];function W4(s){let{basename:t,children:a,future:r,window:n}=s,i=b.useRef();i.current==null&&(i.current=YC({window:n,v5Compat:!0}));let l=i.current,[o,c]=b.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},u=b.useCallback(m=>{d&&Ey?Ey(()=>c(m)):c(m)},[c,d]);return b.useLayoutEffect(()=>l.listen(u),[l,u]),b.useEffect(()=>L4(r),[r]),b.createElement(O4,{basename:t,children:a,location:o.location,navigationType:o.action,navigator:l,future:r})}const q4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=b.forwardRef(function(t,a){let{onClick:r,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,h=$4(t,U4),{basename:y}=b.useContext(rn),g,j=!1;if(typeof d=="string"&&Y4.test(d)&&(g=d,q4))try{let p=new URL(window.location.href),N=d.startsWith("//")?new URL(p.protocol+d):new URL(d),w=hf(N.pathname,y);N.origin===p.origin&&w!=null?d=w+N.search+N.hash:j=!0}catch{}let v=v4(d,{relative:n}),x=K4(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:m});function f(p){r&&r(p),p.defaultPrevented||x(p)}return b.createElement("a",Ip({},h,{href:g||v,onClick:j||i?r:f,ref:a,target:c}))});var Iy;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Iy||(Iy={}));var Ry;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Ry||(Ry={}));function K4(s,t){let{target:a,replace:r,state:n,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=Zi(),d=Oa(),u=Cw(s,{relative:l});return b.useCallback(m=>{if(B4(m,a)){m.preventDefault();let h=r!==void 0?r:uu(d)===uu(u);c(s,{replace:h,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,r,n,a,s,i,l,o])}var Tw={exports:{}},Pw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=b;function G4(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var X4=typeof Object.is=="function"?Object.is:G4,Q4=Vi.useState,J4=Vi.useEffect,Z4=Vi.useLayoutEffect,e5=Vi.useDebugValue;function t5(s,t){var a=t(),r=Q4({inst:{value:a,getSnapshot:t}}),n=r[0].inst,i=r[1];return Z4(function(){n.value=a,n.getSnapshot=t,_h(n)&&i({inst:n})},[s,a,t]),J4(function(){return _h(n)&&i({inst:n}),s(function(){_h(n)&&i({inst:n})})},[s]),e5(a),a}function _h(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!X4(s,a)}catch{return!0}}function s5(s,t){return t()}var a5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?s5:t5;Pw.useSyncExternalStore=Vi.useSyncExternalStore!==void 0?Vi.useSyncExternalStore:a5;Tw.exports=Pw;var r5=Tw.exports,Dw={exports:{}},Mw={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm=b,n5=r5;function i5(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var l5=typeof Object.is=="function"?Object.is:i5,o5=n5.useSyncExternalStore,c5=tm.useRef,d5=tm.useEffect,u5=tm.useMemo,m5=tm.useDebugValue;Mw.useSyncExternalStoreWithSelector=function(s,t,a,r,n){var i=c5(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=u5(function(){function c(y){if(!d){if(d=!0,u=y,y=r(y),n!==void 0&&l.hasValue){var g=l.value;if(n(g,y))return m=g}return m=y}if(g=m,l5(u,y))return g;var j=r(y);return n!==void 0&&n(g,j)?(u=y,g):(u=y,m=j)}var d=!1,u,m,h=a===void 0?null:a;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,a,r,n]);var o=o5(s,i[0],i[1]);return d5(function(){l.hasValue=!0,l.value=o},[o]),m5(o),o};Dw.exports=Mw;var h5=Dw.exports;function x5(s){s()}let Ew=x5;const p5=s=>Ew=s,f5=()=>Ew,Ly=Symbol.for("react-redux-context"),Oy=typeof globalThis<"u"?globalThis:{};function g5(){var s;if(!b.createContext)return{};const t=(s=Oy[Ly])!=null?s:Oy[Ly]=new Map;let a=t.get(b.createContext);return a||(a=b.createContext(null),t.set(b.createContext,a)),a}const Kr=g5();function gf(s=Kr){return function(){return b.useContext(s)}}const Iw=gf(),y5=()=>{throw new Error("uSES not initialized!")};let Rw=y5;const v5=s=>{Rw=s},b5=(s,t)=>s===t;function j5(s=Kr){const t=s===Kr?Iw:gf(s);return function(r,n={}){const{equalityFn:i=b5,stabilityCheck:l=void 0,noopCheck:o=void 0}=typeof n=="function"?{equalityFn:n}:n,{store:c,subscription:d,getServerState:u,stabilityCheck:m,noopCheck:h}=t();b.useRef(!0);const y=b.useCallback({[r.name](j){return r(j)}}[r.name],[r,m,l]),g=Rw(d.addNestedSub,c.getState,u||c.getState,y,i);return b.useDebugValue(g),g}}const Lw=j5();var Ow={exports:{}},Be={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=typeof Symbol=="function"&&Symbol.for,yf=Ht?Symbol.for("react.element"):60103,vf=Ht?Symbol.for("react.portal"):60106,sm=Ht?Symbol.for("react.fragment"):60107,am=Ht?Symbol.for("react.strict_mode"):60108,rm=Ht?Symbol.for("react.profiler"):60114,nm=Ht?Symbol.for("react.provider"):60109,im=Ht?Symbol.for("react.context"):60110,bf=Ht?Symbol.for("react.async_mode"):60111,lm=Ht?Symbol.for("react.concurrent_mode"):60111,om=Ht?Symbol.for("react.forward_ref"):60112,cm=Ht?Symbol.for("react.suspense"):60113,N5=Ht?Symbol.for("react.suspense_list"):60120,dm=Ht?Symbol.for("react.memo"):60115,um=Ht?Symbol.for("react.lazy"):60116,w5=Ht?Symbol.for("react.block"):60121,S5=Ht?Symbol.for("react.fundamental"):60117,C5=Ht?Symbol.for("react.responder"):60118,k5=Ht?Symbol.for("react.scope"):60119;function zs(s){if(typeof s=="object"&&s!==null){var t=s.$$typeof;switch(t){case yf:switch(s=s.type,s){case bf:case lm:case sm:case rm:case am:case cm:return s;default:switch(s=s&&s.$$typeof,s){case im:case om:case um:case dm:case nm:return s;default:return t}}case vf:return t}}}function Fw(s){return zs(s)===lm}Be.AsyncMode=bf;Be.ConcurrentMode=lm;Be.ContextConsumer=im;Be.ContextProvider=nm;Be.Element=yf;Be.ForwardRef=om;Be.Fragment=sm;Be.Lazy=um;Be.Memo=dm;Be.Portal=vf;Be.Profiler=rm;Be.StrictMode=am;Be.Suspense=cm;Be.isAsyncMode=function(s){return Fw(s)||zs(s)===bf};Be.isConcurrentMode=Fw;Be.isContextConsumer=function(s){return zs(s)===im};Be.isContextProvider=function(s){return zs(s)===nm};Be.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===yf};Be.isForwardRef=function(s){return zs(s)===om};Be.isFragment=function(s){return zs(s)===sm};Be.isLazy=function(s){return zs(s)===um};Be.isMemo=function(s){return zs(s)===dm};Be.isPortal=function(s){return zs(s)===vf};Be.isProfiler=function(s){return zs(s)===rm};Be.isStrictMode=function(s){return zs(s)===am};Be.isSuspense=function(s){return zs(s)===cm};Be.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===sm||s===lm||s===rm||s===am||s===cm||s===N5||typeof s=="object"&&s!==null&&(s.$$typeof===um||s.$$typeof===dm||s.$$typeof===nm||s.$$typeof===im||s.$$typeof===om||s.$$typeof===S5||s.$$typeof===C5||s.$$typeof===k5||s.$$typeof===w5)};Be.typeOf=zs;Ow.exports=Be;var _5=Ow.exports,$w=_5,A5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},T5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zw={};zw[$w.ForwardRef]=A5;zw[$w.Memo]=T5;var He={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf=Symbol.for("react.element"),Nf=Symbol.for("react.portal"),mm=Symbol.for("react.fragment"),hm=Symbol.for("react.strict_mode"),xm=Symbol.for("react.profiler"),pm=Symbol.for("react.provider"),fm=Symbol.for("react.context"),P5=Symbol.for("react.server_context"),gm=Symbol.for("react.forward_ref"),ym=Symbol.for("react.suspense"),vm=Symbol.for("react.suspense_list"),bm=Symbol.for("react.memo"),jm=Symbol.for("react.lazy"),D5=Symbol.for("react.offscreen"),Bw;Bw=Symbol.for("react.module.reference");function Xs(s){if(typeof s=="object"&&s!==null){var t=s.$$typeof;switch(t){case jf:switch(s=s.type,s){case mm:case xm:case hm:case ym:case vm:return s;default:switch(s=s&&s.$$typeof,s){case P5:case fm:case gm:case jm:case bm:case pm:return s;default:return t}}case Nf:return t}}}He.ContextConsumer=fm;He.ContextProvider=pm;He.Element=jf;He.ForwardRef=gm;He.Fragment=mm;He.Lazy=jm;He.Memo=bm;He.Portal=Nf;He.Profiler=xm;He.StrictMode=hm;He.Suspense=ym;He.SuspenseList=vm;He.isAsyncMode=function(){return!1};He.isConcurrentMode=function(){return!1};He.isContextConsumer=function(s){return Xs(s)===fm};He.isContextProvider=function(s){return Xs(s)===pm};He.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===jf};He.isForwardRef=function(s){return Xs(s)===gm};He.isFragment=function(s){return Xs(s)===mm};He.isLazy=function(s){return Xs(s)===jm};He.isMemo=function(s){return Xs(s)===bm};He.isPortal=function(s){return Xs(s)===Nf};He.isProfiler=function(s){return Xs(s)===xm};He.isStrictMode=function(s){return Xs(s)===hm};He.isSuspense=function(s){return Xs(s)===ym};He.isSuspenseList=function(s){return Xs(s)===vm};He.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===mm||s===xm||s===hm||s===ym||s===vm||s===D5||typeof s=="object"&&s!==null&&(s.$$typeof===jm||s.$$typeof===bm||s.$$typeof===pm||s.$$typeof===fm||s.$$typeof===gm||s.$$typeof===Bw||s.getModuleId!==void 0)};He.typeOf=Xs;function M5(){const s=f5();let t=null,a=null;return{clear(){t=null,a=null},notify(){s(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0,i=a={callback:r,next:null,prev:a};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:a=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const Fy={notify(){},get:()=>[]};function E5(s,t){let a,r=Fy,n=0,i=!1;function l(j){u();const v=r.subscribe(j);let x=!1;return()=>{x||(x=!0,v(),m())}}function o(){r.notify()}function c(){g.onStateChange&&g.onStateChange()}function d(){return i}function u(){n++,a||(a=t?t.addNestedSub(c):s.subscribe(c),r=M5())}function m(){n--,a&&n===0&&(a(),a=void 0,r.clear(),r=Fy)}function h(){i||(i=!0,u())}function y(){i&&(i=!1,m())}const g={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:h,tryUnsubscribe:y,getListeners:()=>r};return g}const I5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R5=I5?b.useLayoutEffect:b.useEffect;function L5({store:s,context:t,children:a,serverState:r,stabilityCheck:n="once",noopCheck:i="once"}){const l=b.useMemo(()=>{const d=E5(s);return{store:s,subscription:d,getServerState:r?()=>r:void 0,stabilityCheck:n,noopCheck:i}},[s,r,n,i]),o=b.useMemo(()=>s.getState(),[s]);R5(()=>{const{subscription:d}=l;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[l,o]);const c=t||Kr;return b.createElement(c.Provider,{value:l},a)}function Uw(s=Kr){const t=s===Kr?Iw:gf(s);return function(){const{store:r}=t();return r}}const O5=Uw();function F5(s=Kr){const t=s===Kr?O5:Uw(s);return function(){return t().dispatch}}const Vw=F5();v5(h5.useSyncExternalStoreWithSelector);p5(gw.unstable_batchedUpdates);let $5={data:""},z5=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||$5,B5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,U5=/\/\*[^]*?\*\/|  +/g,$y=/\n+/g,gr=(s,t)=>{let a="",r="",n="";for(let i in s){let l=s[i];i[0]=="@"?i[1]=="i"?a=i+" "+l+";":r+=i[1]=="f"?gr(l,i):i+"{"+gr(l,i[1]=="k"?"":t)+"}":typeof l=="object"?r+=gr(l,t?t.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=gr.p?gr.p(i,l):i+":"+l+";")}return a+(t&&n?t+"{"+n+"}":n)+r},Fa={},Hw=s=>{if(typeof s=="object"){let t="";for(let a in s)t+=a+Hw(s[a]);return t}return s},V5=(s,t,a,r,n)=>{let i=Hw(s),l=Fa[i]||(Fa[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!Fa[l]){let c=i!==s?s:(d=>{let u,m,h=[{}];for(;u=B5.exec(d.replace(U5,""));)u[4]?h.shift():u[3]?(m=u[3].replace($y," ").trim(),h.unshift(h[0][m]=h[0][m]||{})):h[0][u[1]]=u[2].replace($y," ").trim();return h[0]})(s);Fa[l]=gr(n?{["@keyframes "+l]:c}:c,a?"":"."+l)}let o=a&&Fa.g?Fa.g:null;return a&&(Fa.g=Fa[l]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Fa[l],t,r,o),l},H5=(s,t,a)=>s.reduce((r,n,i)=>{let l=t[i];if(l&&l.call){let o=l(a),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":gr(o,""):o===!1?"":o}return r+n+(l??"")},"");function Nm(s){let t=this||{},a=s.call?s(t.p):s;return V5(a.unshift?a.raw?H5(a,[].slice.call(arguments,1),t.p):a.reduce((r,n)=>Object.assign(r,n&&n.call?n(t.p):n),{}):a,z5(t.target),t.g,t.o,t.k)}let Ww,Rp,Lp;Nm.bind({g:1});let rr=Nm.bind({k:1});function W5(s,t,a,r){gr.p=t,Ww=s,Rp=a,Lp=r}function nn(s,t){let a=this||{};return function(){let r=arguments;function n(i,l){let o=Object.assign({},i),c=o.className||n.className;a.p=Object.assign({theme:Rp&&Rp()},o),a.o=/ *go\d+/.test(c),o.className=Nm.apply(a,r)+(c?" "+c:""),t&&(o.ref=l);let d=s;return s[0]&&(d=o.as||s,delete o.as),Lp&&d[0]&&Lp(o),Ww(d,o)}return t?t(n):n}}var q5=s=>typeof s=="function",hu=(s,t)=>q5(s)?s(t):s,Y5=(()=>{let s=0;return()=>(++s).toString()})(),qw=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),K5=20,Yw=(s,t)=>{switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,K5)};case 1:return{...s,toasts:s.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:a}=t;return Yw(s,{type:s.toasts.find(i=>i.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=t;return{...s,toasts:s.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let n=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},sd=[],wn={toasts:[],pausedAt:void 0},si=s=>{wn=Yw(wn,s),sd.forEach(t=>{t(wn)})},G5={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},X5=(s={})=>{let[t,a]=b.useState(wn),r=b.useRef(wn);b.useEffect(()=>(r.current!==wn&&a(wn),sd.push(a),()=>{let i=sd.indexOf(a);i>-1&&sd.splice(i,1)}),[]);let n=t.toasts.map(i=>{var l,o,c;return{...s,...s[i.type],...i,removeDelay:i.removeDelay||((l=s[i.type])==null?void 0:l.removeDelay)||(s==null?void 0:s.removeDelay),duration:i.duration||((o=s[i.type])==null?void 0:o.duration)||(s==null?void 0:s.duration)||G5[i.type],style:{...s.style,...(c=s[i.type])==null?void 0:c.style,...i.style}}});return{...t,toasts:n}},Q5=(s,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:(a==null?void 0:a.id)||Y5()}),Xo=s=>(t,a)=>{let r=Q5(t,s,a);return si({type:2,toast:r}),r.id},P=(s,t)=>Xo("blank")(s,t);P.error=Xo("error");P.success=Xo("success");P.loading=Xo("loading");P.custom=Xo("custom");P.dismiss=s=>{si({type:3,toastId:s})};P.remove=s=>si({type:4,toastId:s});P.promise=(s,t,a)=>{let r=P.loading(t.loading,{...a,...a==null?void 0:a.loading});return typeof s=="function"&&(s=s()),s.then(n=>{let i=t.success?hu(t.success,n):void 0;return i?P.success(i,{id:r,...a,...a==null?void 0:a.success}):P.dismiss(r),n}).catch(n=>{let i=t.error?hu(t.error,n):void 0;i?P.error(i,{id:r,...a,...a==null?void 0:a.error}):P.dismiss(r)}),s};var J5=(s,t)=>{si({type:1,toast:{id:s,height:t}})},Z5=()=>{si({type:5,time:Date.now()})},Hl=new Map,ek=1e3,tk=(s,t=ek)=>{if(Hl.has(s))return;let a=setTimeout(()=>{Hl.delete(s),si({type:4,toastId:s})},t);Hl.set(s,a)},sk=s=>{let{toasts:t,pausedAt:a}=X5(s);b.useEffect(()=>{if(a)return;let i=Date.now(),l=t.map(o=>{if(o.duration===1/0)return;let c=(o.duration||0)+o.pauseDuration-(i-o.createdAt);if(c<0){o.visible&&P.dismiss(o.id);return}return setTimeout(()=>P.dismiss(o.id),c)});return()=>{l.forEach(o=>o&&clearTimeout(o))}},[t,a]);let r=b.useCallback(()=>{a&&si({type:6,time:Date.now()})},[a]),n=b.useCallback((i,l)=>{let{reverseOrder:o=!1,gutter:c=8,defaultPosition:d}=l||{},u=t.filter(y=>(y.position||d)===(i.position||d)&&y.height),m=u.findIndex(y=>y.id===i.id),h=u.filter((y,g)=>g<m&&y.visible).length;return u.filter(y=>y.visible).slice(...o?[h+1]:[0,h]).reduce((y,g)=>y+(g.height||0)+c,0)},[t]);return b.useEffect(()=>{t.forEach(i=>{if(i.dismissed)tk(i.id,i.removeDelay);else{let l=Hl.get(i.id);l&&(clearTimeout(l),Hl.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:J5,startPause:Z5,endPause:r,calculateOffset:n}}},ak=rr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,rk=rr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nk=rr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ik=nn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ak} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${rk} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${nk} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,lk=rr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ok=nn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${lk} 1s linear infinite;
`,ck=rr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,dk=rr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,uk=nn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ck} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${dk} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,mk=nn("div")`
  position: absolute;
`,hk=nn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,xk=rr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pk=nn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${xk} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,fk=({toast:s})=>{let{icon:t,type:a,iconTheme:r}=s;return t!==void 0?typeof t=="string"?b.createElement(pk,null,t):t:a==="blank"?null:b.createElement(hk,null,b.createElement(ok,{...r}),a!=="loading"&&b.createElement(mk,null,a==="error"?b.createElement(ik,{...r}):b.createElement(uk,{...r})))},gk=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,yk=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,vk="0%{opacity:0;} 100%{opacity:1;}",bk="0%{opacity:1;} 100%{opacity:0;}",jk=nn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Nk=nn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,wk=(s,t)=>{let a=s.includes("top")?1:-1,[r,n]=qw()?[vk,bk]:[gk(a),yk(a)];return{animation:t?`${rr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rr(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Sk=b.memo(({toast:s,position:t,style:a,children:r})=>{let n=s.height?wk(s.position||t||"top-center",s.visible):{opacity:0},i=b.createElement(fk,{toast:s}),l=b.createElement(Nk,{...s.ariaProps},hu(s.message,s));return b.createElement(jk,{className:s.className,style:{...n,...a,...s.style}},typeof r=="function"?r({icon:i,message:l}):b.createElement(b.Fragment,null,i,l))});W5(b.createElement);var Ck=({id:s,className:t,style:a,onHeightUpdate:r,children:n})=>{let i=b.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;r(s,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[s,r]);return b.createElement("div",{ref:i,className:t,style:a},n)},kk=(s,t)=>{let a=s.includes("top"),r=a?{top:0}:{bottom:0},n=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:qw()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...r,...n}},_k=Nm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,wc=16,Ak=({reverseOrder:s,position:t="top-center",toastOptions:a,gutter:r,children:n,containerStyle:i,containerClassName:l})=>{let{toasts:o,handlers:c}=sk(a);return b.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:wc,left:wc,right:wc,bottom:wc,pointerEvents:"none",...i},className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},o.map(d=>{let u=d.position||t,m=c.calculateOffset(d,{reverseOrder:s,gutter:r,defaultPosition:t}),h=kk(u,m);return b.createElement(Ck,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?_k:"",style:h},d.type==="custom"?hu(d.message,d):n?n(d):b.createElement(Sk,{toast:d,position:u}))}))};function Kw(s,t){return function(){return s.apply(t,arguments)}}const{toString:Tk}=Object.prototype,{getPrototypeOf:wf}=Object,{iterator:wm,toStringTag:Gw}=Symbol,Sm=(s=>t=>{const a=Tk.call(t);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),ga=s=>(s=s.toLowerCase(),t=>Sm(t)===s),Cm=s=>t=>typeof t===s,{isArray:el}=Array,To=Cm("undefined");function Qo(s){return s!==null&&!To(s)&&s.constructor!==null&&!To(s.constructor)&&ks(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Xw=ga("ArrayBuffer");function Pk(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&Xw(s.buffer),t}const Dk=Cm("string"),ks=Cm("function"),Qw=Cm("number"),Jo=s=>s!==null&&typeof s=="object",Mk=s=>s===!0||s===!1,ad=s=>{if(Sm(s)!=="object")return!1;const t=wf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Gw in s)&&!(wm in s)},Ek=s=>{if(!Jo(s)||Qo(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Ik=ga("Date"),Rk=ga("File"),Lk=ga("Blob"),Ok=ga("FileList"),Fk=s=>Jo(s)&&ks(s.pipe),$k=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||ks(s.append)&&((t=Sm(s))==="formdata"||t==="object"&&ks(s.toString)&&s.toString()==="[object FormData]"))},zk=ga("URLSearchParams"),[Bk,Uk,Vk,Hk]=["ReadableStream","Request","Response","Headers"].map(ga),Wk=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zo(s,t,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let r,n;if(typeof s!="object"&&(s=[s]),el(s))for(r=0,n=s.length;r<n;r++)t.call(null,s[r],r,s);else{if(Qo(s))return;const i=a?Object.getOwnPropertyNames(s):Object.keys(s),l=i.length;let o;for(r=0;r<l;r++)o=i[r],t.call(null,s[o],o,s)}}function Jw(s,t){if(Qo(s))return null;t=t.toLowerCase();const a=Object.keys(s);let r=a.length,n;for(;r-- >0;)if(n=a[r],t===n.toLowerCase())return n;return null}const Sn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Zw=s=>!To(s)&&s!==Sn;function Op(){const{caseless:s}=Zw(this)&&this||{},t={},a=(r,n)=>{const i=s&&Jw(t,n)||n;ad(t[i])&&ad(r)?t[i]=Op(t[i],r):ad(r)?t[i]=Op({},r):el(r)?t[i]=r.slice():t[i]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&Zo(arguments[r],a);return t}const qk=(s,t,a,{allOwnKeys:r}={})=>(Zo(t,(n,i)=>{a&&ks(n)?s[i]=Kw(n,a):s[i]=n},{allOwnKeys:r}),s),Yk=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),Kk=(s,t,a,r)=>{s.prototype=Object.create(t.prototype,r),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),a&&Object.assign(s.prototype,a)},Gk=(s,t,a,r)=>{let n,i,l;const o={};if(t=t||{},s==null)return t;do{for(n=Object.getOwnPropertyNames(s),i=n.length;i-- >0;)l=n[i],(!r||r(l,s,t))&&!o[l]&&(t[l]=s[l],o[l]=!0);s=a!==!1&&wf(s)}while(s&&(!a||a(s,t))&&s!==Object.prototype);return t},Xk=(s,t,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=t.length;const r=s.indexOf(t,a);return r!==-1&&r===a},Qk=s=>{if(!s)return null;if(el(s))return s;let t=s.length;if(!Qw(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=s[t];return a},Jk=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&wf(Uint8Array)),Zk=(s,t)=>{const r=(s&&s[wm]).call(s);let n;for(;(n=r.next())&&!n.done;){const i=n.value;t.call(s,i[0],i[1])}},e3=(s,t)=>{let a;const r=[];for(;(a=s.exec(t))!==null;)r.push(a);return r},t3=ga("HTMLFormElement"),s3=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),zy=(({hasOwnProperty:s})=>(t,a)=>s.call(t,a))(Object.prototype),a3=ga("RegExp"),e1=(s,t)=>{const a=Object.getOwnPropertyDescriptors(s),r={};Zo(a,(n,i)=>{let l;(l=t(n,i,s))!==!1&&(r[i]=l||n)}),Object.defineProperties(s,r)},r3=s=>{e1(s,(t,a)=>{if(ks(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=s[a];if(ks(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},n3=(s,t)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return el(s)?r(s):r(String(s).split(t)),a},i3=()=>{},l3=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function o3(s){return!!(s&&ks(s.append)&&s[Gw]==="FormData"&&s[wm])}const c3=s=>{const t=new Array(10),a=(r,n)=>{if(Jo(r)){if(t.indexOf(r)>=0)return;if(Qo(r))return r;if(!("toJSON"in r)){t[n]=r;const i=el(r)?[]:{};return Zo(r,(l,o)=>{const c=a(l,n+1);!To(c)&&(i[o]=c)}),t[n]=void 0,i}}return r};return a(s,0)},d3=ga("AsyncFunction"),u3=s=>s&&(Jo(s)||ks(s))&&ks(s.then)&&ks(s.catch),t1=((s,t)=>s?setImmediate:t?((a,r)=>(Sn.addEventListener("message",({source:n,data:i})=>{n===Sn&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),Sn.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ks(Sn.postMessage)),m3=typeof queueMicrotask<"u"?queueMicrotask.bind(Sn):typeof process<"u"&&process.nextTick||t1,h3=s=>s!=null&&ks(s[wm]),X={isArray:el,isArrayBuffer:Xw,isBuffer:Qo,isFormData:$k,isArrayBufferView:Pk,isString:Dk,isNumber:Qw,isBoolean:Mk,isObject:Jo,isPlainObject:ad,isEmptyObject:Ek,isReadableStream:Bk,isRequest:Uk,isResponse:Vk,isHeaders:Hk,isUndefined:To,isDate:Ik,isFile:Rk,isBlob:Lk,isRegExp:a3,isFunction:ks,isStream:Fk,isURLSearchParams:zk,isTypedArray:Jk,isFileList:Ok,forEach:Zo,merge:Op,extend:qk,trim:Wk,stripBOM:Yk,inherits:Kk,toFlatObject:Gk,kindOf:Sm,kindOfTest:ga,endsWith:Xk,toArray:Qk,forEachEntry:Zk,matchAll:e3,isHTMLForm:t3,hasOwnProperty:zy,hasOwnProp:zy,reduceDescriptors:e1,freezeMethods:r3,toObjectSet:n3,toCamelCase:s3,noop:i3,toFiniteNumber:l3,findKey:Jw,global:Sn,isContextDefined:Zw,isSpecCompliantForm:o3,toJSONObject:c3,isAsyncFn:d3,isThenable:u3,setImmediate:t1,asap:m3,isIterable:h3};function Ne(s,t,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}X.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const s1=Ne.prototype,a1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{a1[s]={value:s}});Object.defineProperties(Ne,a1);Object.defineProperty(s1,"isAxiosError",{value:!0});Ne.from=(s,t,a,r,n,i)=>{const l=Object.create(s1);return X.toFlatObject(s,l,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Ne.call(l,s.message,t,a,r,n),l.cause=s,l.name=s.name,i&&Object.assign(l,i),l};const x3=null;function Fp(s){return X.isPlainObject(s)||X.isArray(s)}function r1(s){return X.endsWith(s,"[]")?s.slice(0,-2):s}function By(s,t,a){return s?s.concat(t).map(function(n,i){return n=r1(n),!a&&i?"["+n+"]":n}).join(a?".":""):t}function p3(s){return X.isArray(s)&&!s.some(Fp)}const f3=X.toFlatObject(X,{},null,function(t){return/^is[A-Z]/.test(t)});function km(s,t,a){if(!X.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,a=X.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,v){return!X.isUndefined(v[j])});const r=a.metaTokens,n=a.visitor||u,i=a.dots,l=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(t);if(!X.isFunction(n))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(X.isDate(g))return g.toISOString();if(X.isBoolean(g))return g.toString();if(!c&&X.isBlob(g))throw new Ne("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(g)||X.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,j,v){let x=g;if(g&&!v&&typeof g=="object"){if(X.endsWith(j,"{}"))j=r?j:j.slice(0,-2),g=JSON.stringify(g);else if(X.isArray(g)&&p3(g)||(X.isFileList(g)||X.endsWith(j,"[]"))&&(x=X.toArray(g)))return j=r1(j),x.forEach(function(p,N){!(X.isUndefined(p)||p===null)&&t.append(l===!0?By([j],N,i):l===null?j:j+"[]",d(p))}),!1}return Fp(g)?!0:(t.append(By(v,j,i),d(g)),!1)}const m=[],h=Object.assign(f3,{defaultVisitor:u,convertValue:d,isVisitable:Fp});function y(g,j){if(!X.isUndefined(g)){if(m.indexOf(g)!==-1)throw Error("Circular reference detected in "+j.join("."));m.push(g),X.forEach(g,function(x,f){(!(X.isUndefined(x)||x===null)&&n.call(t,x,X.isString(f)?f.trim():f,j,h))===!0&&y(x,j?j.concat(f):[f])}),m.pop()}}if(!X.isObject(s))throw new TypeError("data must be an object");return y(s),t}function Uy(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Sf(s,t){this._pairs=[],s&&km(s,this,t)}const n1=Sf.prototype;n1.append=function(t,a){this._pairs.push([t,a])};n1.toString=function(t){const a=t?function(r){return t.call(this,r,Uy)}:Uy;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function g3(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function i1(s,t,a){if(!t)return s;const r=a&&a.encode||g3;X.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(t,a):i=X.isURLSearchParams(t)?t.toString():new Sf(t,a).toString(r),i){const l=s.indexOf("#");l!==-1&&(s=s.slice(0,l)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class y3{constructor(){this.handlers=[]}use(t,a,r){return this.handlers.push({fulfilled:t,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){X.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Vy=y3,l1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},v3=typeof URLSearchParams<"u"?URLSearchParams:Sf,b3=typeof FormData<"u"?FormData:null,j3=typeof Blob<"u"?Blob:null,N3={isBrowser:!0,classes:{URLSearchParams:v3,FormData:b3,Blob:j3},protocols:["http","https","file","blob","url","data"]},Cf=typeof window<"u"&&typeof document<"u",$p=typeof navigator=="object"&&navigator||void 0,w3=Cf&&(!$p||["ReactNative","NativeScript","NS"].indexOf($p.product)<0),S3=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),C3=Cf&&window.location.href||"http://localhost",k3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Cf,hasStandardBrowserEnv:w3,hasStandardBrowserWebWorkerEnv:S3,navigator:$p,origin:C3},Symbol.toStringTag,{value:"Module"})),rs={...k3,...N3};function _3(s,t){return km(s,new rs.classes.URLSearchParams,{visitor:function(a,r,n,i){return rs.isNode&&X.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function A3(s){return X.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function T3(s){const t={},a=Object.keys(s);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],t[i]=s[i];return t}function o1(s){function t(a,r,n,i){let l=a[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=a.length;return l=!l&&X.isArray(n)?n.length:l,c?(X.hasOwnProp(n,l)?n[l]=[n[l],r]:n[l]=r,!o):((!n[l]||!X.isObject(n[l]))&&(n[l]=[]),t(a,r,n[l],i)&&X.isArray(n[l])&&(n[l]=T3(n[l])),!o)}if(X.isFormData(s)&&X.isFunction(s.entries)){const a={};return X.forEachEntry(s,(r,n)=>{t(A3(r),n,a,0)}),a}return null}function P3(s,t,a){if(X.isString(s))try{return(t||JSON.parse)(s),X.trim(s)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(s)}const kf={transitional:l1,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=X.isObject(t);if(i&&X.isHTMLForm(t)&&(t=new FormData(t)),X.isFormData(t))return n?JSON.stringify(o1(t)):t;if(X.isArrayBuffer(t)||X.isBuffer(t)||X.isStream(t)||X.isFile(t)||X.isBlob(t)||X.isReadableStream(t))return t;if(X.isArrayBufferView(t))return t.buffer;if(X.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _3(t,this.formSerializer).toString();if((o=X.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return km(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),P3(t)):t}],transformResponse:[function(t){const a=this.transitional||kf.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(X.isResponse(t)||X.isReadableStream(t))return t;if(t&&X.isString(t)&&(r&&!this.responseType||n)){const l=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(o){if(l)throw o.name==="SyntaxError"?Ne.from(o,Ne.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rs.classes.FormData,Blob:rs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],s=>{kf.headers[s]={}});const _f=kf,D3=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),M3=s=>{const t={};let a,r,n;return s&&s.split(`
`).forEach(function(l){n=l.indexOf(":"),a=l.substring(0,n).trim().toLowerCase(),r=l.substring(n+1).trim(),!(!a||t[a]&&D3[a])&&(a==="set-cookie"?t[a]?t[a].push(r):t[a]=[r]:t[a]=t[a]?t[a]+", "+r:r)}),t},Hy=Symbol("internals");function pl(s){return s&&String(s).trim().toLowerCase()}function rd(s){return s===!1||s==null?s:X.isArray(s)?s.map(rd):String(s)}function E3(s){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(s);)t[r[1]]=r[2];return t}const I3=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Ah(s,t,a,r,n){if(X.isFunction(r))return r.call(this,t,a);if(n&&(t=a),!!X.isString(t)){if(X.isString(r))return t.indexOf(r)!==-1;if(X.isRegExp(r))return r.test(t)}}function R3(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,r)=>a.toUpperCase()+r)}function L3(s,t){const a=X.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(s,r+a,{value:function(n,i,l){return this[r].call(this,t,n,i,l)},configurable:!0})})}class _m{constructor(t){t&&this.set(t)}set(t,a,r){const n=this;function i(o,c,d){const u=pl(c);if(!u)throw new Error("header name must be a non-empty string");const m=X.findKey(n,u);(!m||n[m]===void 0||d===!0||d===void 0&&n[m]!==!1)&&(n[m||c]=rd(o))}const l=(o,c)=>X.forEach(o,(d,u)=>i(d,u,c));if(X.isPlainObject(t)||t instanceof this.constructor)l(t,a);else if(X.isString(t)&&(t=t.trim())&&!I3(t))l(M3(t),a);else if(X.isObject(t)&&X.isIterable(t)){let o={},c,d;for(const u of t){if(!X.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?X.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,a)}else t!=null&&i(a,t,r);return this}get(t,a){if(t=pl(t),t){const r=X.findKey(this,t);if(r){const n=this[r];if(!a)return n;if(a===!0)return E3(n);if(X.isFunction(a))return a.call(this,n,r);if(X.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=pl(t),t){const r=X.findKey(this,t);return!!(r&&this[r]!==void 0&&(!a||Ah(this,this[r],r,a)))}return!1}delete(t,a){const r=this;let n=!1;function i(l){if(l=pl(l),l){const o=X.findKey(r,l);o&&(!a||Ah(r,r[o],o,a))&&(delete r[o],n=!0)}}return X.isArray(t)?t.forEach(i):i(t),n}clear(t){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!t||Ah(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const a=this,r={};return X.forEach(this,(n,i)=>{const l=X.findKey(r,i);if(l){a[l]=rd(n),delete a[i];return}const o=t?R3(i):String(i).trim();o!==i&&delete a[i],a[o]=rd(n),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return X.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=t&&X.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const r=new this(t);return a.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[Hy]=this[Hy]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=pl(l);r[o]||(L3(n,l),r[o]=!0)}return X.isArray(t)?t.forEach(i):i(t),this}}_m.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(_m.prototype,({value:s},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(r){this[a]=r}}});X.freezeMethods(_m);const ua=_m;function Th(s,t){const a=this||_f,r=t||a,n=ua.from(r.headers);let i=r.data;return X.forEach(s,function(o){i=o.call(a,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function c1(s){return!!(s&&s.__CANCEL__)}function tl(s,t,a){Ne.call(this,s??"canceled",Ne.ERR_CANCELED,t,a),this.name="CanceledError"}X.inherits(tl,Ne,{__CANCEL__:!0});function d1(s,t,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?s(a):t(new Ne("Request failed with status code "+a.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function O3(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function F3(s,t){s=s||10;const a=new Array(s),r=new Array(s);let n=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=r[i];l||(l=d),a[n]=c,r[n]=d;let m=i,h=0;for(;m!==n;)h+=a[m++],m=m%s;if(n=(n+1)%s,n===i&&(i=(i+1)%s),d-l<t)return;const y=u&&d-u;return y?Math.round(h*1e3/y):void 0}}function $3(s,t){let a=0,r=1e3/t,n,i;const l=(d,u=Date.now())=>{a=u,n=null,i&&(clearTimeout(i),i=null),s(...d)};return[(...d)=>{const u=Date.now(),m=u-a;m>=r?l(d,u):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},r-m)))},()=>n&&l(n)]}const xu=(s,t,a=3)=>{let r=0;const n=F3(50,250);return $3(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-r,d=n(c),u=l<=o;r=l;const m={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};s(m)},a)},Wy=(s,t)=>{const a=s!=null;return[r=>t[0]({lengthComputable:a,total:s,loaded:r}),t[1]]},qy=s=>(...t)=>X.asap(()=>s(...t)),z3=rs.hasStandardBrowserEnv?((s,t)=>a=>(a=new URL(a,rs.origin),s.protocol===a.protocol&&s.host===a.host&&(t||s.port===a.port)))(new URL(rs.origin),rs.navigator&&/(msie|trident)/i.test(rs.navigator.userAgent)):()=>!0,B3=rs.hasStandardBrowserEnv?{write(s,t,a,r,n,i){const l=[s+"="+encodeURIComponent(t)];X.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),X.isString(r)&&l.push("path="+r),X.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function U3(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function V3(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function u1(s,t,a){let r=!U3(t);return s&&(r||a==!1)?V3(s,t):t}const Yy=s=>s instanceof ua?{...s}:s;function Kn(s,t){t=t||{};const a={};function r(d,u,m,h){return X.isPlainObject(d)&&X.isPlainObject(u)?X.merge.call({caseless:h},d,u):X.isPlainObject(u)?X.merge({},u):X.isArray(u)?u.slice():u}function n(d,u,m,h){if(X.isUndefined(u)){if(!X.isUndefined(d))return r(void 0,d,m,h)}else return r(d,u,m,h)}function i(d,u){if(!X.isUndefined(u))return r(void 0,u)}function l(d,u){if(X.isUndefined(u)){if(!X.isUndefined(d))return r(void 0,d)}else return r(void 0,u)}function o(d,u,m){if(m in t)return r(d,u);if(m in s)return r(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,m)=>n(Yy(d),Yy(u),m,!0)};return X.forEach(Object.keys({...s,...t}),function(u){const m=c[u]||n,h=m(s[u],t[u],u);X.isUndefined(h)&&m!==o||(a[u]=h)}),a}const m1=s=>{const t=Kn({},s);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=t;t.headers=l=ua.from(l),t.url=i1(u1(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(X.isFormData(a)){if(rs.hasStandardBrowserEnv||rs.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...u].join("; "))}}if(rs.hasStandardBrowserEnv&&(r&&X.isFunction(r)&&(r=r(t)),r||r!==!1&&z3(t.url))){const d=n&&i&&B3.read(i);d&&l.set(n,d)}return t},H3=typeof XMLHttpRequest<"u",W3=H3&&function(s){return new Promise(function(a,r){const n=m1(s);let i=n.data;const l=ua.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,u,m,h,y,g;function j(){y&&y(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(n.method.toUpperCase(),n.url,!0),v.timeout=n.timeout;function x(){if(!v)return;const p=ua.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:p,config:s,request:v};d1(function(C){a(C),j()},function(C){r(C),j()},w),v=null}"onloadend"in v?v.onloadend=x:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(x)},v.onabort=function(){v&&(r(new Ne("Request aborted",Ne.ECONNABORTED,s,v)),v=null)},v.onerror=function(){r(new Ne("Network Error",Ne.ERR_NETWORK,s,v)),v=null},v.ontimeout=function(){let N=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const w=n.transitional||l1;n.timeoutErrorMessage&&(N=n.timeoutErrorMessage),r(new Ne(N,w.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,s,v)),v=null},i===void 0&&l.setContentType(null),"setRequestHeader"in v&&X.forEach(l.toJSON(),function(N,w){v.setRequestHeader(w,N)}),X.isUndefined(n.withCredentials)||(v.withCredentials=!!n.withCredentials),o&&o!=="json"&&(v.responseType=n.responseType),d&&([h,g]=xu(d,!0),v.addEventListener("progress",h)),c&&v.upload&&([m,y]=xu(c),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",y)),(n.cancelToken||n.signal)&&(u=p=>{v&&(r(!p||p.type?new tl(null,s,v):p),v.abort(),v=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const f=O3(n.url);if(f&&rs.protocols.indexOf(f)===-1){r(new Ne("Unsupported protocol "+f+":",Ne.ERR_BAD_REQUEST,s));return}v.send(i||null)})},q3=(s,t)=>{const{length:a}=s=s?s.filter(Boolean):[];if(t||a){let r=new AbortController,n;const i=function(d){if(!n){n=!0,o();const u=d instanceof Error?d:this.reason;r.abort(u instanceof Ne?u:new tl(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new Ne(`timeout ${t} of ms exceeded`,Ne.ETIMEDOUT))},t);const o=()=>{s&&(l&&clearTimeout(l),l=null,s.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),s=null)};s.forEach(d=>d.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>X.asap(o),c}},Y3=q3,K3=function*(s,t){let a=s.byteLength;if(!t||a<t){yield s;return}let r=0,n;for(;r<a;)n=r+t,yield s.slice(r,n),r=n},G3=async function*(s,t){for await(const a of X3(s))yield*K3(a,t)},X3=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:a,value:r}=await t.read();if(a)break;yield r}}finally{await t.cancel()}},Ky=(s,t,a,r)=>{const n=G3(s,t);let i=0,l,o=c=>{l||(l=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){o(),c.close();return}let m=u.byteLength;if(a){let h=i+=m;a(h)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},Am=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",h1=Am&&typeof ReadableStream=="function",Q3=Am&&(typeof TextEncoder=="function"?(s=>t=>s.encode(t))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),x1=(s,...t)=>{try{return!!s(...t)}catch{return!1}},J3=h1&&x1(()=>{let s=!1;const t=new Request(rs.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!t}),Gy=64*1024,zp=h1&&x1(()=>X.isReadableStream(new Response("").body)),pu={stream:zp&&(s=>s.body)};Am&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!pu[t]&&(pu[t]=X.isFunction(s[t])?a=>a[t]():(a,r)=>{throw new Ne(`Response type '${t}' is not supported`,Ne.ERR_NOT_SUPPORT,r)})})})(new Response);const Z3=async s=>{if(s==null)return 0;if(X.isBlob(s))return s.size;if(X.isSpecCompliantForm(s))return(await new Request(rs.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(X.isArrayBufferView(s)||X.isArrayBuffer(s))return s.byteLength;if(X.isURLSearchParams(s)&&(s=s+""),X.isString(s))return(await Q3(s)).byteLength},e_=async(s,t)=>{const a=X.toFiniteNumber(s.getContentLength());return a??Z3(t)},t_=Am&&(async s=>{let{url:t,method:a,data:r,signal:n,cancelToken:i,timeout:l,onDownloadProgress:o,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:h}=m1(s);d=d?(d+"").toLowerCase():"text";let y=Y3([n,i&&i.toAbortSignal()],l),g;const j=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let v;try{if(c&&J3&&a!=="get"&&a!=="head"&&(v=await e_(u,r))!==0){let w=new Request(t,{method:"POST",body:r,duplex:"half"}),S;if(X.isFormData(r)&&(S=w.headers.get("content-type"))&&u.setContentType(S),w.body){const[C,T]=Wy(v,xu(qy(c)));r=Ky(w.body,Gy,C,T)}}X.isString(m)||(m=m?"include":"omit");const x="credentials"in Request.prototype;g=new Request(t,{...h,signal:y,method:a.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:x?m:void 0});let f=await fetch(g,h);const p=zp&&(d==="stream"||d==="response");if(zp&&(o||p&&j)){const w={};["status","statusText","headers"].forEach(_=>{w[_]=f[_]});const S=X.toFiniteNumber(f.headers.get("content-length")),[C,T]=o&&Wy(S,xu(qy(o),!0))||[];f=new Response(Ky(f.body,Gy,C,()=>{T&&T(),j&&j()}),w)}d=d||"text";let N=await pu[X.findKey(pu,d)||"text"](f,s);return!p&&j&&j(),await new Promise((w,S)=>{d1(w,S,{data:N,headers:ua.from(f.headers),status:f.status,statusText:f.statusText,config:s,request:g})})}catch(x){throw j&&j(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,s,g),{cause:x.cause||x}):Ne.from(x,x&&x.code,s,g)}}),Bp={http:x3,xhr:W3,fetch:t_};X.forEach(Bp,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const Xy=s=>`- ${s}`,s_=s=>X.isFunction(s)||s===null||s===!1,p1={getAdapter:s=>{s=X.isArray(s)?s:[s];const{length:t}=s;let a,r;const n={};for(let i=0;i<t;i++){a=s[i];let l;if(r=a,!s_(a)&&(r=Bp[(l=String(a)).toLowerCase()],r===void 0))throw new Ne(`Unknown adapter '${l}'`);if(r)break;n[l||"#"+i]=r}if(!r){const i=Object.entries(n).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=t?i.length>1?`since :
`+i.map(Xy).join(`
`):" "+Xy(i[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:Bp};function Ph(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new tl(null,s)}function Qy(s){return Ph(s),s.headers=ua.from(s.headers),s.data=Th.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),p1.getAdapter(s.adapter||_f.adapter)(s).then(function(r){return Ph(s),r.data=Th.call(s,s.transformResponse,r),r.headers=ua.from(r.headers),r},function(r){return c1(r)||(Ph(s),r&&r.response&&(r.response.data=Th.call(s,s.transformResponse,r.response),r.response.headers=ua.from(r.response.headers))),Promise.reject(r)})}const f1="1.11.0",Tm={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{Tm[s]=function(r){return typeof r===s||"a"+(t<1?"n ":" ")+s}});const Jy={};Tm.transitional=function(t,a,r){function n(i,l){return"[Axios v"+f1+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,o)=>{if(t===!1)throw new Ne(n(l," has been removed"+(a?" in "+a:"")),Ne.ERR_DEPRECATED);return a&&!Jy[l]&&(Jy[l]=!0,console.warn(n(l," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,l,o):!0}};Tm.spelling=function(t){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function a_(s,t,a){if(typeof s!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const r=Object.keys(s);let n=r.length;for(;n-- >0;){const i=r[n],l=t[i];if(l){const o=s[i],c=o===void 0||l(o,i,s);if(c!==!0)throw new Ne("option "+i+" must be "+c,Ne.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Ne("Unknown option "+i,Ne.ERR_BAD_OPTION)}}const nd={assertOptions:a_,validators:Tm},ba=nd.validators;class fu{constructor(t){this.defaults=t||{},this.interceptors={request:new Vy,response:new Vy}}async request(t,a){try{return await this._request(t,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Kn(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&nd.assertOptions(r,{silentJSONParsing:ba.transitional(ba.boolean),forcedJSONParsing:ba.transitional(ba.boolean),clarifyTimeoutError:ba.transitional(ba.boolean)},!1),n!=null&&(X.isFunction(n)?a.paramsSerializer={serialize:n}:nd.assertOptions(n,{encode:ba.function,serialize:ba.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),nd.assertOptions(a,{baseUrl:ba.spelling("baseURL"),withXsrfToken:ba.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&X.merge(i.common,i[a.method]);i&&X.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),a.headers=ua.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(a)===!1||(c=c&&j.synchronous,o.unshift(j.fulfilled,j.rejected))});const d=[];this.interceptors.response.forEach(function(j){d.push(j.fulfilled,j.rejected)});let u,m=0,h;if(!c){const g=[Qy.bind(this),void 0];for(g.unshift(...o),g.push(...d),h=g.length,u=Promise.resolve(a);m<h;)u=u.then(g[m++],g[m++]);return u}h=o.length;let y=a;for(m=0;m<h;){const g=o[m++],j=o[m++];try{y=g(y)}catch(v){j.call(this,v);break}}try{u=Qy.call(this,y)}catch(g){return Promise.reject(g)}for(m=0,h=d.length;m<h;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Kn(this.defaults,t);const a=u1(t.baseURL,t.url,t.allowAbsoluteUrls);return i1(a,t.params,t.paramsSerializer)}}X.forEach(["delete","get","head","options"],function(t){fu.prototype[t]=function(a,r){return this.request(Kn(r||{},{method:t,url:a,data:(r||{}).data}))}});X.forEach(["post","put","patch"],function(t){function a(r){return function(i,l,o){return this.request(Kn(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}fu.prototype[t]=a(),fu.prototype[t+"Form"]=a(!0)});const id=fu;class Af{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{r.subscribe(o),i=o}).then(n);return l.cancel=function(){r.unsubscribe(i)},l},t(function(i,l,o){r.reason||(r.reason=new tl(i,l,o),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=r=>{t.abort(r)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new Af(function(n){t=n}),cancel:t}}}const r_=Af;function n_(s){return function(a){return s.apply(null,a)}}function i_(s){return X.isObject(s)&&s.isAxiosError===!0}const Up={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Up).forEach(([s,t])=>{Up[t]=s});const l_=Up;function g1(s){const t=new id(s),a=Kw(id.prototype.request,t);return X.extend(a,id.prototype,t,{allOwnKeys:!0}),X.extend(a,t,null,{allOwnKeys:!0}),a.create=function(n){return g1(Kn(s,n))},a}const Dt=g1(_f);Dt.Axios=id;Dt.CanceledError=tl;Dt.CancelToken=r_;Dt.isCancel=c1;Dt.VERSION=f1;Dt.toFormData=km;Dt.AxiosError=Ne;Dt.Cancel=Dt.CanceledError;Dt.all=function(t){return Promise.all(t)};Dt.spread=n_;Dt.isAxiosError=i_;Dt.mergeConfig=Kn;Dt.AxiosHeaders=ua;Dt.formToJSON=s=>o1(X.isHTMLForm(s)?new FormData(s):s);Dt.getAdapter=p1.getAdapter;Dt.HttpStatusCode=l_;Dt.default=Dt;const o_=Dt,pt="http://localhost:3001",Lt={APPOINTMENTS:`${pt}/api/appointments`,CUSTOMERS:`${pt}/api/customers`,AUTH:`${pt}/api/auth`,SERVICES:`${pt}/api/services`,USERS:`${pt}/api/users`,TASKS:`${pt}/api/tasks`,INVENTORY:`${pt}/api/inventory`,INVOICES:`${pt}/api/invoices`,REMINDERS:`${pt}/api/reminders`,REPORTS:`${pt}/api/reports`,DASHBOARD:`${pt}/api/dashboard`,ADMIN:`${pt}/api/admin`,EMAIL:`${pt}/api/email`,UPLOAD:`${pt}/api/upload`,CHAT:`${pt}/api/chat`,MARKETING:`${pt}/api/marketing`,SALES:`${pt}/api/sales`,COLLECTIONS:`${pt}/api/collections`,YELLOWPAGES:`${pt}/api/yellowpages`,MAILCHIMP:`${pt}/api/mailchimp`,SMS:`${pt}/api/sms`},Ot=()=>{const s=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");return{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`}}},c_=async(s,t=3,a=1e3)=>{var n,i,l,o,c,d;let r;for(let u=0;u<=t;u++)try{return await s()}catch(m){if(r=m,((n=m.response)==null?void 0:n.status)===429){const y=((l=(i=m.response)==null?void 0:i.data)==null?void 0:l.retryAfter)||"15 minutes";throw P.error(`Rate limit exceeded. Please try again in ${y}.`),m}if(((o=m.response)==null?void 0:o.status)>=400&&((c=m.response)==null?void 0:c.status)<500&&((d=m.response)==null?void 0:d.status)!==408||u===t)throw m;const h=a*Math.pow(2,u);console.warn(`API request failed, retrying in ${h}ms (attempt ${u+1}/${t+1})`),await new Promise(y=>setTimeout(y,h))}throw r},M=o_.create({baseURL:`${pt}/api`,timeout:1e4,headers:{"Content-Type":"application/json"}});M.interceptors.request.use(s=>{const t=localStorage.getItem("authToken");return t&&s.headers&&(s.headers.Authorization=`Bearer ${t}`),s},s=>Promise.reject(s));M.interceptors.response.use(s=>s,s=>{var a,r,n,i,l,o,c,d,u,m,h,y,g,j;const t=((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||s.message||"An error occurred";if(console.log("API Response Interceptor - Error Status:",(n=s.response)==null?void 0:n.status),console.log("API Response Interceptor - Error URL:",(i=s.config)==null?void 0:i.url),console.log("API Response Interceptor - Error Message:",t),((l=s.response)==null?void 0:l.status)===429){const v=((c=(o=s.response)==null?void 0:o.data)==null?void 0:c.retryAfter)||"15 minutes",x=((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.path)||((m=s.config)==null?void 0:m.url);return console.warn(`Rate limit exceeded for ${x}. Retry after: ${v}`),P.error(`Too many requests. Please try again in ${v}.`),Promise.reject(s)}if(((h=s.response)==null?void 0:h.status)===401){const v=((y=s.config)==null?void 0:y.url)||"";console.log("API Response Interceptor - 401 Error on URL:",v),v.includes("/auth/me")||v.includes("/auth/verify")?(console.log("API Response Interceptor - Clearing auth for auth endpoint"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("role"),localStorage.removeItem("email"),window.location.href="/auth/login",P.error("Session expired. Please login again.")):(console.log("API Response Interceptor - 401 on data endpoint, not clearing token"),P.error("Authentication required. Please login again."))}else((g=s.response)==null?void 0:g.status)===403?P.error("Access denied. You don't have permission for this action."):((j=s.response)==null?void 0:j.status)>=500?P.error("Server error. Please try again later."):P.error(t);return Promise.reject(s)});const le=async s=>{try{return(await c_(()=>s)).data}catch(t){throw t}},Ye={async login(s){const t=await le(M.post("/auth/login",s));return t.success&&(localStorage.setItem("authToken",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),localStorage.setItem("role",t.data.user.role),localStorage.setItem("email",t.data.user.email)),t},async register(s){return await le(M.post("/auth/register",s))},async getCurrentUser(){return await le(M.get("/auth/me"))},async changePassword(s){return await le(M.put("/auth/change-password",s))},logout(){const s=this.getCurrentUserFromStorage();s==null||s.role,localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("role"),localStorage.removeItem("email"),window.location.href="/auth/login"},isAuthenticated(){return!!localStorage.getItem("authToken")},getCurrentUserFromStorage(){const s=localStorage.getItem("user");return s?JSON.parse(s):null},getToken(){return localStorage.getItem("authToken")},hasPermission(s){var a;const t=this.getCurrentUserFromStorage();return((a=t==null?void 0:t.permissions)==null?void 0:a.includes(s))||(t==null?void 0:t.role)==="super_admin"||(t==null?void 0:t.role)==="admin"||!1},isSuperAdmin(){const s=this.getCurrentUserFromStorage();return(s==null?void 0:s.role)==="super_admin"},isAdmin(){const s=this.getCurrentUserFromStorage();return(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="super_admin"},isBusinessClient(){const s=this.getCurrentUserFromStorage();return(s==null?void 0:s.role)==="business_client"},isCustomer(){const s=this.getCurrentUserFromStorage();return(s==null?void 0:s.role)==="customer"},isAnyAdmin(){const s=this.getCurrentUserFromStorage();return(s==null?void 0:s.role)==="super_admin"||(s==null?void 0:s.role)==="admin"}},y1=b.createContext(void 0),d_=({children:s})=>{const[t,a]=b.useState(null),[r,n]=b.useState(!0);b.useEffect(()=>{(async()=>{try{if(Ye.isAuthenticated()){const f=Ye.getCurrentUserFromStorage();f&&(a(f),console.log("AuthContext: User loaded from storage:",f));try{const p=await Ye.getCurrentUser();p.success?(a(p.data.user),console.log("AuthContext: User verified with server:",p.data.user)):(console.log("AuthContext: Server verification failed, clearing auth"),Ye.logout())}catch(p){console.error("AuthContext: Server verification error:",p)}}else console.log("AuthContext: No authentication token found")}catch(f){console.error("AuthContext: Auth initialization error:",f),Ye.logout()}finally{n(!1)}})()},[]);const v={user:t,isAuthenticated:!!t,isLoading:r,login:async x=>{try{n(!0);const f=await Ye.login(x);return f.success?(console.log("AuthContext: Login successful, setting user:",f.data.user),a(f.data.user),P.success("Login successful!"),!0):(console.log("AuthContext: Login failed:",f.message),P.error(f.message||"Login failed"),!1)}catch(f){return console.error("AuthContext: Login error:",f),P.error("Login failed. Please try again."),!1}finally{n(!1)}},register:async x=>{try{n(!0);const f=await Ye.register(x);return f.success?(P.success("User registered successfully!"),!0):(P.error(f.message||"Registration failed"),!1)}catch(f){return console.error("Registration error:",f),P.error("Registration failed. Please try again."),!1}finally{n(!1)}},logout:()=>{Ye.logout(),a(null),P.success("Logged out successfully")},changePassword:async x=>{try{n(!0);const f=await Ye.changePassword(x);return f.success?(P.success("Password changed successfully!"),!0):(P.error(f.message||"Password change failed"),!1)}catch(f){return console.error("Password change error:",f),P.error("Password change failed. Please try again."),!1}finally{n(!1)}},hasPermission:x=>Ye.hasPermission(x),isSuperAdmin:()=>Ye.isSuperAdmin(),isAdmin:()=>Ye.isAdmin(),isBusinessClient:()=>Ye.isBusinessClient(),isCustomer:()=>Ye.isCustomer(),isAnyAdmin:()=>Ye.isAnyAdmin(),refreshUser:async()=>{try{if(Ye.isAuthenticated()){const x=await Ye.getCurrentUser();x.success&&a(x.data.user)}}catch(x){console.error("User refresh error:",x)}}};return e.jsx(y1.Provider,{value:v,children:s})},As=()=>{const s=b.useContext(y1);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Sc=({children:s,requiredPermissions:t=[],requireSuperAdmin:a=!1,requireAdmin:r=!1,requireBusinessClient:n=!1,requireCustomer:i=!1,requireAnyAdmin:l=!1})=>{const{isAuthenticated:o,isLoading:c,user:d,hasPermission:u,isSuperAdmin:m,isAdmin:h,isBusinessClient:y,isCustomer:g,isAnyAdmin:j}=As(),v=Oa();return c?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):o?a&&!m()?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You need Super Admin privileges to access this page."}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):l&&!j()?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You need Admin privileges to access this page."}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Current role: ",(d==null?void 0:d.role)||"Unknown"]}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):r&&!h()?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You need Admin privileges to access this page."}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):n&&!y()?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You need Business Client privileges to access this page."}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):i&&!g()?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You need Customer privileges to access this page."}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):t.length>0&&!t.every(f=>u(f))?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You don't have the required permissions to access this page."}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Required permissions: ",t.join(", ")]}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):e.jsx(e.Fragment,{children:s}):e.jsx(fn,{to:"/auth/login",state:{from:v},replace:!0})};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m_=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,r)=>r?r.toUpperCase():a.toLowerCase()),Zy=s=>{const t=m_(s);return t.charAt(0).toUpperCase()+t.slice(1)},v1=(...s)=>s.filter((t,a,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===a).join(" ").trim(),h_=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=b.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:l,...o},c)=>b.createElement("svg",{ref:c,...x_,width:t,height:t,stroke:s,strokeWidth:r?Number(a)*24/Number(t):a,className:v1("lucide",n),...!i&&!h_(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>b.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(s,t)=>{const a=b.forwardRef(({className:r,...n},i)=>b.createElement(p_,{ref:i,iconNode:t,className:v1(`lucide-${u_(Zy(s))}`,`lucide-${s}`,r),...n}));return a.displayName=Zy(s),a};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Hi=re("activity",f_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],b1=re("arrow-left",g_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],v_=re("award",y_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],j_=re("banknote",b_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Lr=re("bell",N_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Pm=re("building-2",w_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],j1=re("building",S_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],N1=re("calculator",C_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],be=re("calendar",k_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Fe=re("car",__);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Qs=re("chart-column",A_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Dm=re("chart-pie",T_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Wt=re("check",P_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],w1=re("chevron-down",D_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],E_=re("chevron-left",M_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gu=re("chevron-right",I_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],L_=re("chevron-up",R_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ev=re("circle-alert",O_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ke=re("circle-check-big",F_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ta=re("circle-x",$_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Cn=re("clipboard-list",z_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],En=re("clipboard",B_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vt=re("clock",U_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],xa=re("cog",V_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ma=re("credit-card",H_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Gr=re("crown",W_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],S1=re("database",q_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Me=re("dollar-sign",Y_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ns=re("download",K_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],C1=re("droplets",G_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Q_=re("eye-off",X_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],St=re("eye",J_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],eA=re("file-spreadsheet",Z_);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],lt=re("file-text",tA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]],aA=re("file-type",sA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],k1=re("flag",rA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],_1=re("funnel",nA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Gn=re("gauge",iA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],oA=re("gift",lA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],A1=re("grid-3x3",cA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],uA=re("handshake",dA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],T1=re("hash",mA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Tf=re("heart",hA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],P1=re("house",xA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],D1=re("info",pA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],gA=re("lightbulb",fA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],M1=re("link",yA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ld=re("loader-circle",vA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],E1=re("list",bA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],I1=re("lock",jA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wA=re("log-out",NA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jt=re("mail",SA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],pa=re("map-pin",CA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],_A=re("maximize",kA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],TA=re("megaphone",AA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],DA=re("menu",PA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Ut=re("message-circle",MA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Po=re("message-square",EA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],RA=re("mic-off",IA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],OA=re("mic",LA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],$A=re("minimize",FA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],od=re("package",zA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],UA=re("palette",BA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],HA=re("paperclip",VA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],tv=re("pause",WA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],kt=re("phone",qA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Dh=re("play",YA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ze=re("plus",KA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],R1=re("printer",GA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ea=re("refresh-cw",XA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],JA=re("rotate-ccw",QA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],eT=re("ruler",ZA);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sT=re("save",tT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Rs=re("search",aT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ec=re("send",rT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xt=re("settings",nT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Mm=re("share-2",iT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qe=re("shield",lT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],cT=re("shopping-cart",oT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],uT=re("smartphone",dT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],hT=re("smile",mT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mh=re("square-check-big",xT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Tt=re("square-pen",pT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ts=re("star",fT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Pf=re("tag",gT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wl=re("target",yT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rt=re("trash-2",vT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Em=re("trending-down",bT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ve=re("trending-up",jT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ot=re("triangle-alert",NT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Xr=re("truck",wT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sv=re("user-plus",ST);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vt=re("user",CT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],nt=re("users",kT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],AT=re("video",_T);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],PT=re("wallet",TT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],MT=re("wind",DT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],it=re("wrench",ET);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qr=re("x",IT);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Df=re("zap",RT),LT=()=>{const{isAuthenticated:s,user:t}=As(),a=window.location.pathname;if(!s||a.startsWith("/admin/dashboard")||a.startsWith("/customer/dashboard"))return null;const r=()=>(t==null?void 0:t.role)==="admin"?"/admin/dashboard":(t==null?void 0:t.role)==="customer"?"/customer/dashboard":"/admin/dashboard",n=()=>(t==null?void 0:t.role)==="admin"?"Go to Admin Dashboard":(t==null?void 0:t.role)==="customer"?"Go to Customer Dashboard":"Go to Dashboard";return e.jsx("div",{className:"fixed bottom-24 right-6 z-50",children:e.jsx(me,{to:r(),className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white p-4 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-110 flex items-center justify-center border-2 border-white",title:n(),children:e.jsx(Gn,{className:"w-6 h-6"})})})},OT=[{to:"/admin/dashboard",label:"Dashboard",icon:e.jsx(P1,{size:18})},{to:"/admin/dashboard/customers",label:"Customers",icon:e.jsx(nt,{size:18})},{to:"/admin/dashboard/appointments",label:"Appointments",icon:e.jsx(be,{size:18})},{to:"/admin/dashboard/business-clients",label:"Business Clients",icon:e.jsx(Pm,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/services",label:"Services",icon:e.jsx(Xt,{size:18})},{to:"/admin/dashboard/invoices",label:"Invoices",icon:e.jsx(lt,{size:18})},{to:"/admin/dashboard/inventory",label:"Inventory",icon:e.jsx(od,{size:18})},{to:"/admin/dashboard/reports",label:"Reports",icon:e.jsx(Qs,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/reminders",label:"Reminders",icon:e.jsx(Lr,{size:18})},{to:"/admin/dashboard/contact-logs",label:"Communication",icon:e.jsx(kt,{size:18})},{to:"/admin/dashboard/tasks",label:"Tasks",icon:e.jsx(Cn,{size:18})},{to:"/admin/dashboard/promotions",label:"Promotions",icon:e.jsx(Ut,{size:18})},{to:"/admin/dashboard/marketing",label:"Marketing",icon:e.jsx(jt,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/sms",label:"SMS",icon:e.jsx(kt,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/mailchimp",label:"MailChimp",icon:e.jsx(jt,{size:18}),roles:["super_admin","admin"]},{to:"/admin/dashboard/live-chat",label:"Live Chat",icon:e.jsx(Ut,{size:18})},{to:"/admin/dashboard/yellowpages",label:"YellowPages",icon:e.jsx(Rs,{size:18})},{to:"/admin/dashboard/system-admin",label:"System Administration",icon:e.jsx(Xt,{size:18}),roles:["super_admin"]}];function FT(){const s=Oa(),{user:t}=As();return e.jsxs("aside",{className:"bg-white text-secondary-900 w-64 flex flex-col h-screen border-r border-secondary-200",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200 bg-secondary-50 flex-shrink-0",children:e.jsx(me,{to:"/",className:"block",children:e.jsxs("div",{className:"text-xl font-bold text-blue-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Xt,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-blue-600",children:"AutoCRM Pro"})]})})}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 sidebar-scrollbar sidebar-nav min-h-0",children:OT.filter(a=>!a.roles||a.roles.includes((t==null?void 0:t.role)||"")).map(a=>e.jsxs(me,{to:a.to,className:`flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${s.pathname===a.to?"bg-blue-50 text-blue-700 border border-blue-300":"text-secondary-600 hover:bg-secondary-100 hover:text-secondary-900"}`,children:[a.icon,e.jsx("span",{className:"text-sm",children:a.label})]},a.to))}),e.jsx("div",{className:"p-4 border-t border-secondary-200 bg-secondary-50 flex-shrink-0",children:e.jsx("div",{className:"text-xs text-secondary-600 text-center",children:"v2.0.0 • AutoCRM Pro"})})]})}var L1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},av=oa.createContext&&oa.createContext(L1),$T=["attr","size","title"];function zT(s,t){if(s==null)return{};var a=BT(s,t),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(a[r]=s[r])}return a}function BT(s,t){if(s==null)return{};var a={};for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){if(t.indexOf(r)>=0)continue;a[r]=s[r]}return a}function yu(){return yu=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},yu.apply(this,arguments)}function rv(s,t){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),a.push.apply(a,r)}return a}function vu(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?rv(Object(a),!0).forEach(function(r){UT(s,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):rv(Object(a)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(a,r))})}return s}function UT(s,t,a){return t=VT(t),t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function VT(s){var t=HT(s,"string");return typeof t=="symbol"?t:t+""}function HT(s,t){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var r=a.call(s,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function O1(s){return s&&s.map((t,a)=>oa.createElement(t.tag,vu({key:a},t.attr),O1(t.child)))}function ye(s){return t=>oa.createElement(WT,yu({attr:vu({},s.attr)},t),O1(s.child))}function WT(s){var t=a=>{var{attr:r,size:n,title:i}=s,l=zT(s,$T),o=n||a.size||"1em",c;return a.className&&(c=a.className),s.className&&(c=(c?c+" ":"")+s.className),oa.createElement("svg",yu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,l,{className:c,style:vu(vu({color:s.color||a.color},a.style),s.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&oa.createElement("title",null,i),s.children)};return av!==void 0?oa.createElement(av.Consumer,null,a=>t(a)):t(L1)}function qT(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(s)}function YT(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(s)}function Vp(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"},child:[]}]})(s)}function hs(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(s)}function bu(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"},child:[]}]})(s)}function Al(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z",clipRule:"evenodd"},child:[]}]})(s)}function In(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(s)}function ki(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(s)}function KT(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(s)}function GT(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(s)}function XT(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13 7H7v6h6V7z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z",clipRule:"evenodd"},child:[]}]})(s)}function $t(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},child:[]}]})(s)}function Hp(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"},child:[]}]})(s)}function Do(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"},child:[]}]})(s)}function QT(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"},child:[]},{tag:"path",attr:{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"},child:[]},{tag:"path",attr:{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"},child:[]}]})(s)}function JT(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2h-2.22l.123.489.804.804A1 1 0 0113 18H7a1 1 0 01-.707-1.707l.804-.804L7.22 15H5a2 2 0 01-2-2V5zm5.771 7H5V5h10v7H8.771z",clipRule:"evenodd"},child:[]}]})(s)}function Mo(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"},child:[]}]})(s)}function ZT(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(s)}function Ct(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(s)}function Jr(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"},child:[]}]})(s)}function eP(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"},child:[]}]})(s)}function tP(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z",clipRule:"evenodd"},child:[]}]})(s)}function sP(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"},child:[]}]})(s)}function aP(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"},child:[]}]})(s)}function Yt(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(s)}function nv(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3a1 1 0 01-1-1v-2a1 1 0 00-1-1H9a1 1 0 00-1 1v2a1 1 0 01-1 1H4a1 1 0 110-2V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z",clipRule:"evenodd"},child:[]}]})(s)}function F1(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"},child:[]}]})(s)}function $1(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(s)}function nr(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(s)}function bs(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"},child:[]}]})(s)}function z1(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"},child:[]}]})(s)}function _s(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"},child:[]}]})(s)}function _i(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"},child:[]}]})(s)}function Or(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},child:[]}]})(s)}function rP(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"},child:[]}]})(s)}function iv(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 3a1 1 0 00-1.447-.894L8.763 6H5a3 3 0 000 6h.28l1.771 5.316A1 1 0 008 18h1a1 1 0 001-1v-4.382l6.553 3.276A1 1 0 0018 15V3z",clipRule:"evenodd"},child:[]}]})(s)}function nP(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},child:[]}]})(s)}function Mf(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},child:[]}]})(s)}function Ls(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(s)}function iP(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"},child:[]}]})(s)}function B1(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"},child:[]},{tag:"path",attr:{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1v-5a1 1 0 00-.293-.707l-2-2A1 1 0 0015 7h-1z"},child:[]}]})(s)}function Ia(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"},child:[]}]})(s)}function U1(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"},child:[]}]})(s)}function lv(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"},child:[]}]})(s)}function ju(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},child:[]}]})(s)}function Ai(s){return ye({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(s)}function lP(){const{user:s,logout:t,isLoading:a}=As(),r=()=>{t()};return a||!s?e.jsx("header",{className:"bg-white border-b border-secondary-200 shadow-soft px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{to:"/",className:"hover:text-primary-600 transition-colors",children:e.jsx("h1",{className:"text-xl font-bold text-primary-600",children:"AutoCRM Pro"})}),e.jsx("span",{className:"ml-4 text-sm text-secondary-600 bg-secondary-100 px-3 py-1 rounded-full",children:"Admin Dashboard"})]}),e.jsx("div",{className:"text-secondary-500 text-sm",children:"Loading..."})]})}):e.jsx("header",{className:"bg-white border-b border-secondary-200 shadow-soft px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{to:"/",className:"hover:text-primary-600 transition-colors",children:e.jsx("h1",{className:"text-xl font-bold text-primary-600",children:"AutoCRM Pro"})}),e.jsx("span",{className:"ml-4 text-sm text-secondary-600 bg-secondary-100 px-3 py-1 rounded-full",children:"Admin Dashboard"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"p-2 text-secondary-400 hover:text-secondary-600 hover:bg-secondary-100 rounded-lg transition-all duration-200",children:e.jsx(Vp,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-secondary-400 hover:text-secondary-600 hover:bg-secondary-100 rounded-lg transition-all duration-200",children:e.jsx(Hp,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center space-x-3 bg-secondary-50 px-4 py-2 rounded-xl",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Ia,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-secondary-900",children:(s==null?void 0:s.name)||"Admin"}),e.jsx("div",{className:"text-xs text-secondary-500 capitalize",children:(s==null?void 0:s.role)||"Admin"})]})]}),e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-4 py-2 bg-error-600 hover:bg-error-700 text-white rounded-xl text-sm font-medium transition-all duration-200 shadow-soft hover:shadow-medium",children:[e.jsx(aP,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})})}function oP(){const[s,t]=b.useState("");return b.useEffect(()=>{const a=localStorage.getItem("role");a?t(a):window.location.href="/admin/login"},[]),s?e.jsxs("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-secondary-50 to-secondary-100",children:[e.jsx(FT,{}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsx(lP,{}),e.jsx("main",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsx(Aw,{})})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-secondary-50 to-secondary-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"loading-spinner-large mb-4"}),e.jsx("p",{className:"text-secondary-600 font-medium",children:"Loading dashboard..."})]})})}function cP({currentRole:s,isLoginMode:t}){const[a,r]=b.useState(0),[n,i]=b.useState(!1),l=[{title:"Smart Role Detection",description:"Automatically detects your account type and provides relevant features",icon:"🎯",color:"from-blue-500 to-purple-500"},{title:"Real-time Validation",description:"Instant feedback on form inputs with helpful suggestions",icon:"⚡",color:"from-green-500 to-blue-500"},{title:"Password Strength Analyzer",description:"Advanced password strength checker with improvement suggestions",icon:"🔒",color:"from-red-500 to-orange-500"},{title:"Smart Redirects",description:"Automatically redirects to the appropriate dashboard based on your role",icon:"🔄",color:"from-purple-500 to-pink-500"},{title:"Responsive Design",description:"Perfect experience on all devices - desktop, tablet, and mobile",icon:"📱",color:"from-indigo-500 to-purple-500"}];return b.useEffect(()=>{i(!0);const o=setInterval(()=>{r(c=>(c+1)%l.length)},3e3);return()=>clearInterval(o)},[]),t?e.jsxs("div",{className:"hidden lg:block w-96 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Welcome Back!"}),e.jsxs("p",{className:"text-gray-600",children:["Sign in to access your ",s==="admin"?"business dashboard":"vehicle management portal"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 text-lg",children:"🚀"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Quick Access"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get to your dashboard in seconds"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 text-lg",children:"🔐"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Secure Login"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your data is protected with industry-standard security"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 text-lg",children:"📱"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Mobile Ready"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Access your account from any device"})]})]})})]})]}):e.jsxs("div",{className:"hidden lg:block w-96 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Smart Features"}),e.jsx("p",{className:"text-gray-600",children:"Experience the next generation of authentication"})]}),e.jsxs("div",{className:"relative h-64 bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-500 opacity-10"}),e.jsxs("div",{className:"relative p-6 h-full flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:`text-4xl mb-4 transition-all duration-500 ${n?"scale-100":"scale-75"}`,children:l[a].icon}),e.jsx("h4",{className:`font-semibold text-gray-800 mb-2 transition-all duration-500 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:l[a].title}),e.jsx("p",{className:`text-sm text-gray-600 transition-all duration-500 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:l[a].description})]}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:l.map((o,c)=>e.jsx("button",{onClick:()=>r(c),className:`w-2 h-2 rounded-full transition-all duration-300 ${c===a?"bg-blue-600 scale-125":"bg-gray-300 hover:bg-gray-400"}`},c))})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:s==="admin"?"Admin Benefits":"Customer Benefits"}),s==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Manage business operations"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Access customer management tools"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"View analytics and reports"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Manage your vehicles"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Schedule appointments"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Track service history"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg p-4 text-white text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{className:"font-semibold",children:"Enterprise Security"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Your data is protected with bank-level encryption"})]})]})}function ov(){const[s,t]=b.useState(!0),[a,r]=b.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"customer",businessName:"",permissions:["customer_access"]}),[n,i]=b.useState({}),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState(!1),[h,y]=b.useState(0),[g,j]=b.useState([]),v=Zi(),x=Oa();b.useEffect(()=>{const D=x.pathname;D.includes("/register")?t(!1):D.includes("/login")&&t(!0),D.includes("/admin")?r(R=>({...R,role:"admin",permissions:["admin_access"]})):D.includes("/customer")&&r(R=>({...R,role:"customer",permissions:["customer_access"]}))},[x]);const f=D=>{let R=0;const U=[];D.length>=8?R+=1:U.push("Use at least 8 characters"),/[a-z]/.test(D)?R+=1:U.push("Include lowercase letters"),/[A-Z]/.test(D)?R+=1:U.push("Include uppercase letters"),/[0-9]/.test(D)?R+=1:U.push("Include numbers"),/[^A-Za-z0-9]/.test(D)?R+=1:U.push("Include special characters"),y(R),j(U)},p=(D,R)=>{const U={...n};switch(D){case"name":s||(R.trim()?R.length<2?U.name="Name must be at least 2 characters":delete U.name:U.name="Name is required");break;case"email":R?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R)?delete U.email:U.email="Please enter a valid email address":U.email="Email is required";break;case"phone":s||(R&&!/^[\+]?[1-9][\d]{0,15}$/.test(R.replace(/[\s\-\(\)]/g,""))?U.phone="Please enter a valid phone number":delete U.phone);break;case"password":R?!s&&R.length<6?(f(R),U.password="Password must be at least 6 characters"):(s||f(R),delete U.password):U.password="Password is required";break;case"confirmPassword":!s&&R!==a.password?U.confirmPassword="Passwords do not match":delete U.confirmPassword;break;case"businessName":!s&&a.role==="admin"&&!R.trim()?U.businessName="Business name is required for admin accounts":delete U.businessName;break}i(U)},N=D=>{const{name:R,value:U}=D.target;if(r(O=>({...O,[R]:U})),R==="role"){const O=U==="admin"?["admin_access"]:["customer_access"];r(E=>({...E,role:U,permissions:O}))}p(R,U)},w=()=>{var R;const D={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(D.email="Please enter a valid email address"):D.email="Email is required",a.password?!s&&a.password.length<6&&(D.password="Password must be at least 6 characters"):D.password="Password is required",s||(a.name.trim()||(D.name="Name is required"),a.password!==a.confirmPassword&&(D.confirmPassword="Passwords do not match"),a.role==="admin"&&!((R=a.businessName)!=null&&R.trim())&&(D.businessName="Business name is required for admin accounts")),i(D),Object.keys(D).length===0},{login:S,register:C}=As(),T=async D=>{if(D.preventDefault(),!w()){P.error("Please fix the errors in the form");return}o(!0);try{if(s){if(await S({email:a.email,password:a.password})){const U=Ye.getCurrentUserFromStorage();console.log("Login successful, user:",U),U?U.role==="customer"?(console.log("Redirecting to customer dashboard"),v("/customer/dashboard")):(console.log("Redirecting to admin dashboard"),v("/admin/dashboard")):console.error("User not found in storage after successful login")}}else{const R={name:a.name,email:a.email,password:a.password,role:a.role,permissions:a.permissions||[],phone:a.phone};a.businessName&&a.businessName.trim()&&(R.businessName=a.businessName.trim()),await C(R)&&(t(!0),r(O=>({...O,password:"",confirmPassword:""})))}}catch(R){console.error("Authentication error:",R),P.error("An error occurred. Please try again.")}finally{o(!1)}},_=()=>h<=2?"text-red-500":h<=3?"text-yellow-500":h<=4?"text-blue-500":"text-green-500",F=()=>h<=2?"Weak":h<=3?"Fair":h<=4?"Good":"Strong";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"flex items-center justify-center space-x-8 max-w-6xl w-full",children:[e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:s?"Welcome Back":"Create Account"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s?"Sign in to access your dashboard":"Join us to manage your business or vehicles"})]}),e.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Sign In"}),e.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s?"text-gray-600 hover:text-gray-900":"bg-white text-blue-600 shadow-sm"}`,children:"Sign Up"})]}),e.jsx("form",{className:"mt-8 space-y-6",onSubmit:T,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"space-y-4",children:[!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:a.name,onChange:N,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter your full name"}),n.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number (Optional)"}),e.jsx("input",{id:"phone",name:"phone",type:"tel",value:a.phone,onChange:N,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.phone?"border-red-300":"border-gray-300"}`,placeholder:"Enter your phone number"}),n.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Type"}),e.jsxs("select",{id:"role",name:"role",value:a.role,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"customer",children:"Customer - Manage my vehicles"}),e.jsx("option",{value:"admin",children:"Admin - Manage business operations"})]})]}),a.role==="admin"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"businessName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),e.jsx("input",{id:"businessName",name:"businessName",type:"text",required:!0,value:a.businessName,onChange:N,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.businessName?"border-red-300":"border-gray-300"}`,placeholder:"Enter your business name"}),n.businessName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.businessName})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:a.email,onChange:N,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter your email"}),n.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:c?"text":"password",required:!0,value:a.password,onChange:N,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.password?"border-red-300":"border-gray-300"}`,placeholder:s?"Enter your password":"Create a password"}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password}),!s&&a.password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${h<=2?"bg-red-500":h<=3?"bg-yellow-500":h<=4?"bg-blue-500":"bg-green-500"}`,style:{width:`${h/5*100}%`}})}),e.jsx("span",{className:`text-sm font-medium ${_()}`,children:F()})]}),g.length>0&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium",children:"Suggestions:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:g.map((D,R)=>e.jsx("li",{children:D},R))})]})]})]}),!s&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:u?"text":"password",required:!0,value:a.confirmPassword,onChange:N,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n.confirmPassword?"border-red-300":"border-gray-300"}`,placeholder:"Confirm your password"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.confirmPassword})]})]}),e.jsx("button",{type:"submit",disabled:l,className:"w-full mt-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s?"Signing in...":"Creating account..."]}):s?"Sign In":"Create Account"}),e.jsx("div",{className:"mt-6 text-center space-y-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(me,{to:"/auth/register",className:"text-sm text-blue-600 hover:text-blue-500 block",children:"Don't have an account? Sign up"}),e.jsx(me,{to:"/auth/forgot-password",className:"text-sm text-gray-600 hover:text-gray-500 block",children:"Forgot your password?"})]}):e.jsx(me,{to:"/auth/login",className:"text-sm text-blue-600 hover:text-blue-500 block",children:"Already have an account? Sign in"})})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",e.jsx(me,{to:"/contact",className:"text-blue-600 hover:text-blue-500",children:"Contact us"})]})})]}),e.jsx(cP,{currentRole:a.role,isLoginMode:s})]})})}function dP(){const{user:s,logout:t}=As(),a=Oa(),r=()=>{t()};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-lg border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Fe,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Auto Service Portal"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 rounded-lg",children:[e.jsx(Vt,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:(s==null?void 0:s.name)||"Customer"})]}),e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-3 py-2 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(wA,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})})}),e.jsxs("div",{className:"flex",children:[e.jsx("nav",{className:"w-64 bg-white shadow-lg border-r border-gray-200 min-h-screen",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Navigation"}),e.jsx("div",{className:"w-12 h-1 bg-blue-600 rounded-full"})]}),e.jsxs("nav",{className:"space-y-1",children:[e.jsxs(me,{to:"/",className:"flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[e.jsx(P1,{className:"w-5 h-5"}),e.jsx("span",{children:"Home"})]}),e.jsxs(me,{to:"/customer/dashboard",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Qs,{className:"w-5 h-5"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(me,{to:"/customer/dashboard/vehicles",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/vehicles"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{children:"My Vehicles"})]}),e.jsxs(me,{to:"/customer/dashboard/appointments",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/appointments"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{children:"Appointments"})]}),e.jsxs(me,{to:"/customer/dashboard/services",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/services"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(it,{className:"w-5 h-5"}),e.jsx("span",{children:"Services"})]}),e.jsxs(me,{to:"/customer/dashboard/invoices",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/invoices"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{children:"Invoices"})]}),e.jsxs(me,{to:"/customer/dashboard/messages",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/messages"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Ut,{className:"w-5 h-5"}),e.jsx("span",{children:"Messages"})]}),e.jsxs(me,{to:"/customer/dashboard/notifications",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/notifications"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Lr,{className:"w-5 h-5"}),e.jsx("span",{children:"Notifications"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Enhanced Features"}),e.jsxs(me,{to:"/customer/dashboard/portal/123",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname.includes("/customer/dashboard/portal")?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Gr,{className:"w-5 h-5"}),e.jsx("span",{children:"Portal Dashboard"})]}),e.jsxs(me,{to:"/customer/dashboard/memberships",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/memberships"?"bg-green-100 text-green-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsx("span",{children:"Memberships"})]}),e.jsxs(me,{to:"/customer/dashboard/warranties",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/warranties"?"bg-orange-100 text-orange-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(lt,{className:"w-5 h-5"}),e.jsx("span",{children:"Warranties"})]}),e.jsxs(me,{to:"/customer/dashboard/analytics",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/analytics"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Analytics"})]}),e.jsxs(me,{to:"/customer/dashboard/vehicle-database",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/vehicle-database"?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(S1,{className:"w-5 h-5"}),e.jsx("span",{children:"Vehicle Database"})]}),e.jsxs(me,{to:"/customer/dashboard/payment-options",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/payment-options"?"bg-emerald-100 text-emerald-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{children:"Payment Options"})]}),e.jsxs(me,{to:"/customer/dashboard/live-chat",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/live-chat"?"bg-pink-100 text-pink-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Ut,{className:"w-5 h-5"}),e.jsx("span",{children:"Live Chat"})]}),e.jsxs(me,{to:"/customer/dashboard/reports",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/reports"?"bg-teal-100 text-teal-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Hi,{className:"w-5 h-5"}),e.jsx("span",{children:"Reports"})]})]}),e.jsxs(me,{to:"/customer/dashboard/profile",className:`flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${a.pathname==="/customer/dashboard/profile"?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{children:"Profile"})]})]})]})}),e.jsx("main",{className:"flex-1 p-8 bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(Aw,{})})})]})]})}function uP(){const{user:s}=As(),[t,a]=b.useState({totalVehicles:0,upcomingAppointments:1,pendingInvoices:0,unreadMessages:2,unreadNotifications:0,totalSpent:0,loyaltyPoints:0}),[r,n]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(!0),[d,u]=b.useState([]);b.useEffect(()=>{(async()=>{c(!0);try{await new Promise(x=>setTimeout(x,800)),a({totalVehicles:2,upcomingAppointments:1,pendingInvoices:0,unreadMessages:2,unreadNotifications:3,lastServiceDate:"2024-01-10",nextServiceDue:"2024-03-15",totalSpent:1250,loyaltyPoints:450}),n([{id:"1",type:"appointment",title:"Oil Change Appointment",description:"Scheduled for Toyota Camry 2020",date:"2024-01-15",status:"pending",priority:"medium",actionRequired:!0},{id:"2",type:"service",title:"Brake Inspection Completed",description:"Honda Civic 2019 - All brakes in good condition",date:"2024-01-10",status:"completed",priority:"low"},{id:"3",type:"payment",title:"Invoice Payment Received",description:"Payment of $150.00 for brake service",date:"2024-01-08",status:"completed",priority:"low"},{id:"4",type:"message",title:"Service Reminder",description:"Your Toyota Camry is due for maintenance",date:"2024-01-05",status:"pending",priority:"high",actionRequired:!0}]),l([{id:"1",type:"service",title:"Schedule Oil Change",description:"Your Toyota Camry is due for an oil change. Recommended interval: 5,000 miles.",priority:"medium",estimatedCost:45,urgency:"soon",action:"Schedule Now",actionUrl:"/customer/dashboard/appointments"},{id:"2",type:"maintenance",title:"Tire Rotation",description:"Consider rotating your tires to ensure even wear and extend tire life.",priority:"low",estimatedCost:25,urgency:"routine",action:"Learn More",actionUrl:"/customer/dashboard/services"},{id:"3",type:"promotion",title:"Winter Service Special",description:"Get 20% off winter maintenance packages. Valid until January 31st.",priority:"medium",urgency:"soon",action:"View Offer",actionUrl:"/customer/dashboard/promotions"}]),u(["Your Toyota Camry is due for service in 2 weeks","You have 2 unread messages from the service team"])}catch(x){P.error("Failed to load dashboard data"),console.error("Dashboard data loading error:",x)}finally{c(!1)}})()},[]);const m=v=>{switch(v){case"appointment":return e.jsx(be,{className:"w-6 h-6 text-blue-600"});case"service":return e.jsx(xa,{className:"w-6 h-6 text-green-600"});case"payment":return e.jsx(ma,{className:"w-6 h-6 text-purple-600"});case"message":return e.jsx(Ut,{className:"w-6 h-6 text-indigo-600"});case"reminder":return e.jsx(ev,{className:"w-6 h-6 text-orange-600"});case"promotion":return e.jsx(oA,{className:"w-6 h-6 text-pink-600"});default:return e.jsx(lt,{className:"w-6 h-6 text-gray-600"})}},h=v=>{switch(v){case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"cancelled":return"text-red-600 bg-red-100";case"overdue":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},y=v=>{switch(v){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},g=v=>{switch(v){case"urgent":return"text-red-600 bg-red-100";case"soon":return"text-orange-600 bg-orange-100";case"routine":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},j=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v);return o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-sm p-6 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(Vt,{className:"w-6 h-6 text-blue-600"}),"Welcome back, ",(s==null?void 0:s.name)||"Customer","!"]}),e.jsx("p",{className:"text-gray-600 mb-3",children:"Here's what's happening with your vehicles and appointments."}),d.length>0&&e.jsx("div",{className:"space-y-2",children:d.map((v,x)=>e.jsxs("div",{className:"flex items-center text-sm text-amber-700 bg-amber-100 px-3 py-2 rounded-lg",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),v]},x))})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5 text-purple-600"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.loyaltyPoints})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Loyalty Points"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(Fe,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalVehicles}),t.nextServiceDue&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Next service: ",new Date(t.nextServiceDue).toLocaleDateString()]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(be,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.upcomingAppointments}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to view details"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-xl",children:e.jsx(Me,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.pendingInvoices}),e.jsx("p",{className:"text-xs text-gray-500",children:"All caught up!"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(Ut,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unread Messages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.unreadMessages}),e.jsx("p",{className:"text-xs text-gray-500",children:"Requires attention"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-blue-600"}),"Smart Recommendations"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"AI-powered suggestions"})]}),e.jsx("div",{className:"space-y-4",children:i.map(v=>e.jsxs("div",{className:"flex items-start gap-4 p-4 border border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${g(v.urgency)}`,children:v.urgency})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:v.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y(v.priority)}`,children:v.priority})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:v.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[v.estimatedCost&&e.jsxs("span",{className:"text-sm font-medium text-green-600 flex items-center gap-1",children:[e.jsx(Me,{className:"w-4 h-4"}),"Est. ",j(v.estimatedCost)]}),e.jsx("span",{className:"text-xs text-gray-500",children:v.type.charAt(0).toUpperCase()+v.type.slice(1)})]}),e.jsx(me,{to:v.actionUrl,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white text-sm rounded-lg transition-all duration-200 hover:shadow-md",children:v.action})]})]})]},v.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(Xt,{className:"w-5 h-5 text-gray-600"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(me,{to:"/customer/dashboard/appointments",className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3 group-hover:scale-110 transition-transform",children:e.jsx(be,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Schedule Appointment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Book a service"})]})]}),e.jsxs(me,{to:"/customer/dashboard/vehicles",className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-3 group-hover:scale-110 transition-transform",children:e.jsx(Fe,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"View Vehicles"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage your cars"})]})]}),e.jsxs(me,{to:"/customer/dashboard/invoices",className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg mr-3 group-hover:scale-110 transition-transform",children:e.jsx(ma,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Pay Invoice"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View & pay bills"})]})]}),e.jsxs(me,{to:"/customer/dashboard/messages",className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg mr-3 group-hover:scale-110 transition-transform",children:e.jsx(Ut,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Send Message"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Contact the shop"})]})]}),e.jsxs(me,{to:"/customer/dashboard/notifications",className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 group relative",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg mr-3 group-hover:scale-110 transition-transform",children:e.jsx(ev,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Notifications"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.unreadNotifications," unread"]})]}),t.unreadNotifications>0&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:t.unreadNotifications})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5 text-gray-600"}),"Recent Activity"]}),e.jsx(me,{to:"/customer/dashboard/activity",className:"text-sm text-blue-600 hover:text-blue-500 font-medium",children:"View all"})]}),e.jsx("div",{className:"space-y-4",children:r.map(v=>e.jsxs("div",{className:`flex items-start gap-4 p-4 border rounded-xl transition-all duration-200 ${v.actionRequired?"border-orange-200 bg-orange-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("div",{className:"flex-shrink-0",children:m(v.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(v.status)}`,children:v.status}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y(v.priority)}`,children:v.priority})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:v.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:new Date(v.date).toLocaleDateString()}),v.actionRequired&&e.jsxs("span",{className:"text-xs text-orange-600 font-medium flex items-center gap-1",children:[e.jsx(ot,{className:"w-3 h-3"}),"Action Required"]})]})]})]},v.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl shadow-sm p-6 border border-green-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-600"}),"Financial Summary"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 flex items-center justify-center gap-2",children:[e.jsx(Me,{className:"w-6 h-6"}),j(t.totalSpent)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Spent This Year"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 flex items-center justify-center gap-2",children:[e.jsx(ts,{className:"w-6 h-6"}),t.loyaltyPoints]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Loyalty Points Earned"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 flex items-center justify-center gap-2",children:[e.jsx(ma,{className:"w-6 h-6"}),j(t.pendingInvoices)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Outstanding Balance"})]})]})]})]})}class mP{async getProfile(){return(await M.get("/customers/profile")).data}async updateProfile(t){return(await M.put("/customers/profile",t)).data}async getVehicles(){return(await M.get("/customers/vehicles")).data}async addVehicle(t){return(await M.post("/customers/vehicles",t)).data}async updateVehicle(t,a){return(await M.put(`/customers/vehicles/${t}`,a)).data}async deleteVehicle(t){return(await M.delete(`/customers/vehicles/${t}`)).data}async getAppointments(){return(await M.get("/customers/appointments")).data}async createAppointment(t){return(await M.post("/customers/appointments",t)).data}async updateAppointment(t,a){return(await M.put(`/customers/appointments/${t}`,a)).data}async cancelAppointment(t){return(await M.delete(`/customers/appointments/${t}`)).data}async confirmAppointment(t){return(await M.put(`/customers/appointments/${t}/confirm`)).data}async getServices(){return(await M.get("/customers/services")).data}async getInvoices(){return(await M.get("/customers/invoices")).data}async payInvoice(t,a){return(await M.post(`/customers/invoices/${t}/pay`,a)).data}async downloadInvoice(t){return(await M.get(`/customers/invoices/${t}/download`)).data}async getMessages(){return(await M.get("/customers/messages")).data}async sendMessage(t){return(await M.post("/customers/messages",t)).data}async markMessageAsRead(t){return(await M.put(`/customers/messages/${t}/read`)).data}async deleteMessage(t){return(await M.delete(`/customers/messages/${t}`)).data}async getDashboardData(){return(await M.get("/customers/dashboard")).data}async getNotifications(t=1,a=20,r,n){const i=new URLSearchParams({page:t.toString(),limit:a.toString()});return r&&i.append("type",r),n&&i.append("status",n),(await M.get(`/customers/notifications?${i}`)).data}async markNotificationAsRead(t){return(await M.put(`/customers/notifications/${t}/read`)).data}async markAllNotificationsAsRead(){return(await M.put("/customers/notifications/read-all")).data}async getTechnicians(){return(await M.get("/customers/technicians")).data}}const We=new mP;function pe({isOpen:s,onClose:t,children:a,title:r,icon:n,submitText:i,onSubmit:l,submitColor:o="bg-blue-600",disableOutsideClose:c=!1,size:d="md"}){if(!s)return null;const u={sm:"max-w-sm",md:"max-w-xl",lg:"max-w-2xl",xl:"max-w-4xl"},m=h=>{h.target===h.currentTarget&&!c&&t()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:m,children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full ${u[d]} max-h-[90vh] overflow-hidden flex flex-col animate-fadeIn`,children:[r&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n&&e.jsx("div",{className:"text-blue-600",children:n}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:e.jsx(Qr,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:a}),i&&l&&e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-100",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:l,className:`${o} text-white text-sm px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 font-medium`,children:i})]})]})})}function Im({isOpen:s,title:t,message:a,confirmText:r="Confirm",cancelText:n="Cancel",onConfirm:i,onCancel:l,type:o="info"}){if(!s)return null;const d=(()=>{switch(o){case"danger":return{icon:e.jsx(Ct,{className:"w-5 h-5"}),submitColor:"bg-red-600"};case"warning":return{icon:e.jsx(Ct,{className:"w-5 h-5"}),submitColor:"bg-yellow-600"};case"success":return{icon:e.jsx(In,{className:"w-5 h-5"}),submitColor:"bg-green-600"};default:return{icon:e.jsx(sP,{className:"w-5 h-5"}),submitColor:"bg-blue-600"}}})();return e.jsx(pe,{isOpen:s,onClose:l,title:t,icon:d.icon,submitText:r,onSubmit:i,submitColor:d.submitColor,children:e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-gray-600",children:a})})})}function hP({isOpen:s,onClose:t,onSubmit:a,vehicle:r,isEditing:n=!1}){const[i,l]=b.useState({year:"",make:"",model:"",vin:"",licensePlate:"",color:"",mileage:"",fuelType:"",transmission:"",engineSize:"",status:"active"});b.useEffect(()=>{l(r&&n?r:{year:"",make:"",model:"",vin:"",licensePlate:"",color:"",mileage:"",fuelType:"",transmission:"",engineSize:"",status:"active"})},[r,n]);const o=d=>{const{name:u,value:m}=d.target;l(h=>({...h,[u]:m}))},c=()=>{a(i)};return e.jsx(pe,{isOpen:s,onClose:t,title:n?"Edit Vehicle":"Add New Vehicle",icon:e.jsx(B1,{className:"w-5 h-5"}),submitText:n?"Update Vehicle":"Add Vehicle",onSubmit:c,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Year *"}),e.jsx("input",{type:"text",name:"year",value:i.year,onChange:o,className:"form-input",placeholder:"2020",maxLength:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Color *"}),e.jsx("input",{type:"text",name:"color",value:i.color,onChange:o,className:"form-input",placeholder:"Silver"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Make *"}),e.jsx("input",{type:"text",name:"make",value:i.make,onChange:o,className:"form-input",placeholder:"Toyota"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Model *"}),e.jsx("input",{type:"text",name:"model",value:i.model,onChange:o,className:"form-input",placeholder:"Camry"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"VIN (17 characters) *"}),e.jsx("input",{type:"text",name:"vin",value:i.vin,onChange:o,className:"form-input font-mono",placeholder:"1HGBH41JXMN109186",maxLength:17})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"License Plate *"}),e.jsx("input",{type:"text",name:"licensePlate",value:i.licensePlate,onChange:o,className:"form-input",placeholder:"ABC123"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Mileage *"}),e.jsx("input",{type:"number",name:"mileage",value:i.mileage,onChange:o,className:"form-input",placeholder:"45000",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",value:i.status,onChange:o,className:"form-select",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Fuel Type"}),e.jsxs("select",{name:"fuelType",value:i.fuelType,onChange:o,className:"form-select",children:[e.jsx("option",{value:"",children:"Select fuel type"}),e.jsx("option",{value:"gasoline",children:"Gasoline"}),e.jsx("option",{value:"diesel",children:"Diesel"}),e.jsx("option",{value:"hybrid",children:"Hybrid"}),e.jsx("option",{value:"electric",children:"Electric"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Transmission"}),e.jsxs("select",{name:"transmission",value:i.transmission,onChange:o,className:"form-select",children:[e.jsx("option",{value:"",children:"Select transmission"}),e.jsx("option",{value:"automatic",children:"Automatic"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"cvt",children:"CVT"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Engine Size"}),e.jsx("input",{type:"text",name:"engineSize",value:i.engineSize,onChange:o,className:"form-input",placeholder:"2.5L"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{name:"notes",value:i.notes||"",onChange:o,className:"form-textarea",rows:3,placeholder:"Additional notes about the vehicle..."})]})]})})}function xP(){As();const[s,t]=b.useState([]),[a,r]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState(!1),[u,m]=b.useState(null);b.useState(null);const[h,y]=b.useState("overview"),[g,j]=b.useState({year:"",make:"",model:"",vin:"",licensePlate:"",color:"",mileage:"",fuelType:"",transmission:"",engineSize:"",status:"active"}),[v,x]=b.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"info"});b.useEffect(()=>{f()},[]),b.useEffect(()=>{s.length>0&&(p(),N())},[s]);const f=async()=>{try{o(!0);const E=await We.getVehicles();E.success?t(E.data.vehicles):P.error(E.message||"Failed to load vehicles")}catch(E){console.error("Error loading vehicles:",E),E instanceof Error?E.message.includes("401")||E.message.includes("Unauthorized")?P.error("Please login again to access your vehicles"):E.message.includes("500")||E.message.includes("Internal Server Error")?P.error("Server error. Please try again later."):E.message.includes("Network")||E.message.includes("fetch")?P.error("Cannot connect to server. Please check your connection."):P.error(`Failed to load vehicles: ${E.message}`):P.error("Failed to load vehicles")}finally{o(!1)}},p=()=>{const E=[];s.forEach(W=>{const Z=W.mileage;Z%5e3<500&&E.push({id:`oil_${W.id}`,vehicleId:W.id,type:"oil_change",title:"Oil Change Due",description:`${W.year} ${W.make} ${W.model} is due for an oil change`,dueMileage:Math.ceil(Z/5e3)*5e3,priority:Z%5e3<100?"urgent":"high",estimatedCost:35,isOverdue:Z%5e3>1e3}),Z%6e3<500&&E.push({id:`tire_${W.id}`,vehicleId:W.id,type:"tire_rotation",title:"Tire Rotation Due",description:`${W.year} ${W.make} ${W.model} needs tire rotation`,dueMileage:Math.ceil(Z/6e3)*6e3,priority:Z%6e3<100?"high":"medium",estimatedCost:45,isOverdue:Z%6e3>1e3}),Z%2e4<1e3&&E.push({id:`brake_${W.id}`,vehicleId:W.id,type:"brake_service",title:"Brake Service Due",description:`${W.year} ${W.make} ${W.model} brake inspection needed`,dueMileage:Math.ceil(Z/2e4)*2e4,priority:Z%2e4<500?"urgent":"high",estimatedCost:120,isOverdue:Z%2e4>2e3})}),r(E)},N=()=>{const E=[];s.forEach(W=>{W.lastServiceDate&&E.push({id:`service_${W.id}_1`,vehicleId:W.id,serviceType:"Oil Change & Inspection",description:"Regular maintenance service",date:W.lastServiceDate,mileage:W.mileage-5e3,cost:85,technician:"Mike Johnson",notes:"All systems checked, vehicle in good condition"})}),i(E)},w=()=>{if(!g.year||!g.make||!g.model||!g.vin||!g.licensePlate||!g.color||!g.mileage)return P.error("Please fill in all required fields"),!1;if(g.vin.length!==17)return P.error("VIN must be 17 characters long"),!1;if(!u&&s.find($=>$.vin.toUpperCase()===g.vin.toUpperCase()))return P.error("A vehicle with this VIN already exists"),!1;const E=new Date().getFullYear(),W=parseInt(g.year);return W<1900||W>E+1?(P.error(`Year must be between 1900 and ${E+1}`),!1):parseInt(g.mileage)<0?(P.error("Mileage must be a positive number"),!1):!0},S=E=>{if(j(E),!w())return;(async()=>{try{const Z={year:parseInt(E.year),make:E.make,model:E.model,vin:E.vin.toUpperCase(),licensePlate:E.licensePlate.toUpperCase(),color:E.color,mileage:parseInt(E.mileage),status:E.status};if(u){const I=await We.updateVehicle(u.id,Z);I.success?P.success("Vehicle updated successfully"):P.error(I.message||"Failed to update vehicle")}else{const I=await We.addVehicle(Z);I.success?P.success("Vehicle added successfully"):P.error(I.message||"Failed to add vehicle")}await f(),_()}catch(Z){console.error("Error submitting vehicle:",Z),P.error("An error occurred while saving the vehicle")}})()},C=E=>{m(E),j({year:E.year.toString(),make:E.make,model:E.model,vin:E.vin,licensePlate:E.licensePlate,color:E.color,mileage:E.mileage.toString(),fuelType:E.fuelType||"",transmission:E.transmission||"",engineSize:E.engineSize||"",status:E.status||"active"}),d(!0)},T=async E=>{x({isOpen:!0,title:"Delete Vehicle",message:"Are you sure you want to delete this vehicle? This action cannot be undone and will remove all associated data.",type:"danger",onConfirm:async()=>{try{const W=await We.deleteVehicle(E);W.success?(await f(),P.success("Vehicle deleted successfully")):P.error(W.message||"Failed to delete vehicle")}catch(W){console.error("Error deleting vehicle:",W),P.error("Failed to delete vehicle")}x(W=>({...W,isOpen:!1}))}})},_=()=>{d(!1),m(null),j({year:"",make:"",model:"",vin:"",licensePlate:"",color:"",mileage:"",fuelType:"",transmission:"",engineSize:"",status:"active"})},F=()=>{x(E=>({...E,isOpen:!1}))},D=E=>E==="active"?"text-green-600 bg-green-100":"text-red-600 bg-red-100",R=E=>{switch(E){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},U=E=>{switch(E){case"oil_change":return e.jsx(C1,{className:"w-6 h-6 text-blue-600"});case"tire_rotation":return e.jsx(JA,{className:"w-6 h-6 text-green-600"});case"brake_service":return e.jsx(qe,{className:"w-6 h-6 text-red-600"});case"timing_belt":return e.jsx(vt,{className:"w-6 h-6 text-orange-600"});case"air_filter":return e.jsx(MT,{className:"w-6 h-6 text-gray-600"});case"spark_plugs":return e.jsx(Df,{className:"w-6 h-6 text-yellow-600"});default:return e.jsx(it,{className:"w-6 h-6 text-gray-600"})}},O=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E);return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Vehicles"}),e.jsx("p",{className:"text-gray-600",children:"Manage your registered vehicles and maintenance"}),a.length>0&&e.jsxs("div",{className:"mt-3 flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-amber-700 bg-amber-100 px-3 py-2 rounded-lg",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),a.filter(E=>E.priority==="urgent").length," urgent maintenance items"]}),e.jsxs("div",{className:"flex items-center text-sm text-orange-700 bg-orange-100 px-3 py-2 rounded-lg",children:[e.jsx(it,{className:"w-4 h-4 mr-2"}),a.length," total maintenance alerts"]})]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Vehicle"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Fe,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(E=>E.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-orange-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(it,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Due for Service"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(E=>E.isOverdue).length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ve,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Mileage"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length>0?Math.round(s.reduce((E,W)=>E+W.mileage,0)/s.length).toLocaleString():"0"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"tab-header",children:e.jsxs("nav",{className:"tab-buttons",children:[e.jsx("button",{onClick:()=>y("overview"),className:`tab-button ${h==="overview"?"tab-button-active":"tab-button-inactive"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>y("maintenance"),className:`tab-button ${h==="maintenance"?"tab-button-active":"tab-button-inactive"}`,children:["Maintenance Alerts",a.length>0&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:a.length})]}),e.jsx("button",{onClick:()=>y("history"),className:`tab-button ${h==="history"?"tab-button-active":"tab-button-inactive"}`,children:"Service History"})]})}),e.jsxs("div",{className:"p-6",children:[h==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"VIN"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"License Plate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mileage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[E.year," ",E.make," ",E.model]}),e.jsx("div",{className:"text-sm text-gray-500",children:E.color})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:E.vin}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:E.licensePlate}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[E.mileage.toLocaleString()," mi"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.nextServiceDate?e.jsx("span",{className:new Date(E.nextServiceDate)<=new Date?"text-red-600 font-medium":"",children:new Date(E.nextServiceDate).toLocaleDateString()}):e.jsx("span",{className:"text-gray-400",children:"Not scheduled"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D(E.status)}`,children:E.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>C(E),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),e.jsx("button",{onClick:()=>T(E.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},E.id))})]}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Fe,{className:"w-12 h-12 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No vehicles found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't added any vehicles yet. Add your first vehicle to get started."}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center space-x-2 mx-auto",children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Your First Vehicle"})]})]})]})}),h==="maintenance"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Maintenance Alerts"}),a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ke,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-gray-600",children:"No maintenance items due at this time."})]}):e.jsx("div",{className:"space-y-4",children:a.sort((E,W)=>{const Z={urgent:0,high:1,medium:2,low:3};return Z[E.priority]-Z[W.priority]}).map(E=>{const W=s.find(Z=>Z.id===E.vehicleId);return e.jsx("div",{className:`border rounded-lg p-4 ${E.isOverdue?"border-red-200 bg-red-50":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[U(E.type),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:E.title}),e.jsx("p",{className:"text-sm text-gray-600",children:E.description}),W&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Vehicle: ",W.year," ",W.make," ",W.model]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Due at: ",E.dueMileage.toLocaleString()," miles"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R(E.priority)}`,children:E.priority}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-green-600",children:["Est. ",O(E.estimatedCost)]}),E.isOverdue&&e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Overdue"})]})]})]})},E.id)})})]}),h==="history"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service History"}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(lt,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No service history"}),e.jsx("p",{className:"text-gray-600",children:"Service records will appear here after your first visit."})]}):e.jsx("div",{className:"space-y-4",children:n.map(E=>{const W=s.find(Z=>Z.id===E.vehicleId);return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:E.serviceType}),e.jsx("p",{className:"text-sm text-gray-600",children:E.description}),W&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Vehicle: ",W.year," ",W.make," ",W.model]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Technician: ",E.technician]}),E.notes&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2 italic",children:['"',E.notes,'"']})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:O(E.cost)}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(E.date).toLocaleDateString()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[E.mileage.toLocaleString()," mi"]})]})]})},E.id)})})]})]})]}),c&&e.jsx(hP,{isOpen:c,onClose:_,onSubmit:S,vehicle:u?{year:u.year.toString(),make:u.make,model:u.model,vin:u.vin,licensePlate:u.licensePlate,color:u.color,mileage:u.mileage.toString(),fuelType:u.fuelType||"",transmission:u.transmission||"",engineSize:"",status:u.status,notes:""}:null,isEditing:!!u}),e.jsx(Im,{isOpen:v.isOpen,title:v.title,message:v.message,onConfirm:v.onConfirm,onCancel:F,type:v.type})]})}const Ue=Vw,je=Lw;function pP(){As(),Ue();const[s,t]=b.useState([]),[a,r]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState(!1),[u,m]=b.useState(null),[h,y]=b.useState("upcoming"),[g,j]=b.useState([]),[v,x]=b.useState({scheduledDate:"",scheduledTime:"",serviceType:"",vehicleId:"",notes:"",status:"scheduled",estimatedDuration:"60",priority:"medium",technicianId:""}),[f,p]=b.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"info"}),N=["Oil Change & Inspection","Brake Service","Tire Rotation","Tire Replacement","Battery Replacement","Air Filter Replacement","Spark Plug Replacement","Transmission Service","Coolant Flush","Power Steering Service","Suspension Service","Exhaust System Repair","Electrical System Repair","AC/Heating Service","Diagnostic Service","Custom Service"];b.useEffect(()=>{w()},[]),b.useEffect(()=>{const A=async()=>{try{const G=await We.getTechnicians();G.success?t(G.data.technicians||[]):(console.error("Failed to load technicians:",G.message),t([]))}catch(G){console.error("Error loading technicians:",G),t([])}};s.length===0&&A()},[s.length]),b.useEffect(()=>{n.length>0&&a.length>0&&S()},[n,a]);const w=async()=>{try{o(!0);const[A,G]=await Promise.all([We.getAppointments(),We.getVehicles()]);A.success?r(A.data.appointments):P.error(A.message||"Failed to load appointments"),G.success?i(G.data.vehicles):P.error(G.message||"Failed to load vehicles")}catch(A){console.error("Error loading data:",A),P.error("Failed to load appointments and vehicles")}finally{o(!1)}},S=()=>{const A=[],G=new Date;n.forEach(z=>{z.nextServiceDate&&new Date(z.nextServiceDate)<=G&&A.push({id:`service_${z.id}`,type:"service_due",title:"Service Due Soon",description:`${z.year} ${z.make} ${z.model} is due for service`,priority:"high",action:"Schedule Service",vehicleId:z.id})}),a.forEach(z=>{if(z.status==="scheduled"){const ie=new Date(`${z.scheduledDate}T${z.scheduledTime}`),de=Math.ceil((ie.getTime()-G.getTime())/(1e3*60*60*24));de<=2&&de>0&&A.push({id:`confirm_${z.id}`,type:"confirmation_needed",title:"Confirm Appointment",description:`Please confirm your appointment for ${z.scheduledDate}`,priority:"medium",action:"Confirm",appointmentId:z.id})}}),j(A)},C=A=>{const{name:G,value:z}=A.target;x(ie=>({...ie,[G]:z}))},T=()=>{if(!v.scheduledDate||!v.scheduledTime||!v.serviceType||!v.vehicleId)return P.error("Please fill in all required fields"),!1;if(n.length===0)return P.error("Please add a vehicle first before scheduling an appointment"),!1;if(new Date(`${v.scheduledDate}T${v.scheduledTime}`)<=new Date)return P.error("Please select a future date and time"),!1;const z=parseInt(v.estimatedDuration);return isNaN(z)||z<15||z>480?(P.error("Duration must be between 15 and 480 minutes"),!1):!0},_=async()=>{if(T())try{const A={scheduledDate:v.scheduledDate,scheduledTime:v.scheduledTime,serviceType:v.serviceType,vehicleId:v.vehicleId,notes:v.notes.trim()||void 0,status:v.status,estimatedDuration:v.estimatedDuration,priority:v.priority,technicianId:v.technicianId||void 0};if(u){const G=await We.updateAppointment(u.id,A);G.success?P.success("Appointment updated successfully"):P.error(G.message||"Failed to update appointment")}else{const G=await We.createAppointment(A);G.success?P.success("Appointment scheduled successfully"):P.error(G.message||"Failed to create appointment")}await w(),U()}catch(A){console.error("Error saving appointment:",A),P.error("Failed to save appointment")}},F=A=>{m(A),x({scheduledDate:A.scheduledDate.split("T")[0],scheduledTime:A.scheduledTime,serviceType:A.serviceType,vehicleId:A.vehicleId,notes:A.notes||"",status:A.status,estimatedDuration:A.estimatedDuration||"60",priority:"medium",technicianId:A.technician||""}),d(!0)},D=async A=>{p({isOpen:!0,title:"Cancel Appointment",message:"Are you sure you want to cancel this appointment? This action cannot be undone.",type:"warning",onConfirm:async()=>{try{const G=await We.cancelAppointment(A);G.success?(await w(),P.success("Appointment cancelled successfully")):P.error(G.message||"Failed to cancel appointment")}catch(G){console.error("Error cancelling appointment:",G),P.error("Failed to cancel appointment")}p(G=>({...G,isOpen:!1}))}})},R=async A=>{var G,z,ie;try{switch(A.type){case"service_due":x({scheduledDate:"",scheduledTime:"",serviceType:"",vehicleId:A.vehicleId,notes:`Service due for ${(G=n.find(xe=>xe.id===A.vehicleId))==null?void 0:G.year} ${(z=n.find(xe=>xe.id===A.vehicleId))==null?void 0:z.make} ${(ie=n.find(xe=>xe.id===A.vehicleId))==null?void 0:ie.model}`,status:"scheduled",estimatedDuration:"60",priority:"medium",technicianId:""}),d(!0);break;case"confirmation_needed":const de=A.description.split("for ")[1];p({isOpen:!0,title:"Confirm Appointment",message:`Please confirm your appointment for ${de}. This will mark your appointment as confirmed.`,type:"info",onConfirm:async()=>{try{const xe=await We.confirmAppointment(A.appointmentId);xe.success?(P.success("Appointment confirmed successfully!"),await w(),j(he=>he.filter(Pe=>Pe.id!==A.id))):P.error(xe.message||"Failed to confirm appointment")}catch(xe){console.error("Error confirming appointment:",xe),P.error("Failed to confirm appointment")}p(xe=>({...xe,isOpen:!1}))}});break;default:console.log("Unknown suggestion type:",A.type)}}catch(de){console.error("Error handling suggestion action:",de),P.error("Failed to process action")}},U=()=>{d(!1),m(null),x({scheduledDate:"",scheduledTime:"",serviceType:"",vehicleId:"",notes:"",status:"scheduled",estimatedDuration:"60",priority:"medium",technicianId:""})},O=()=>{p(A=>({...A,isOpen:!1}))},E=A=>{switch(A){case"scheduled":return"text-blue-600 bg-blue-100";case"in-progress":return"text-yellow-600 bg-yellow-100";case"completed":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},W=A=>{switch(A){case"scheduled":return e.jsx(be,{className:"w-6 h-6 text-blue-600"});case"in-progress":return e.jsx(it,{className:"w-6 h-6 text-yellow-600"});case"completed":return e.jsx(ke,{className:"w-6 h-6 text-green-600"});case"cancelled":return e.jsx(Qr,{className:"w-6 h-6 text-red-600"});default:return e.jsx(En,{className:"w-6 h-6 text-gray-600"})}},Z=a.filter(A=>{const G=new Date(`${A.scheduledDate}T${A.scheduledTime}`),z=new Date;switch(h){case"upcoming":return G>z&&A.status!=="cancelled";case"past":return G<=z||A.status==="completed";case"all":return!0;default:return!0}}),I=a.filter(A=>new Date(`${A.scheduledDate}T${A.scheduledTime}`)>new Date&&A.status!=="cancelled"),$=a.filter(A=>new Date(`${A.scheduledDate}T${A.scheduledTime}`)<=new Date||A.status==="completed");return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Appointments"}),e.jsx("p",{className:"text-gray-600",children:"Schedule and manage your service appointments"}),g.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:g.slice(0,2).map(A=>e.jsxs("div",{className:"flex items-center text-sm text-amber-700 bg-amber-100 px-3 py-2 rounded-lg",children:[e.jsx(gA,{className:"w-4 h-4 mr-2"}),A.description,e.jsx("button",{className:"ml-2 text-amber-800 underline hover:text-amber-900",onClick:()=>R(A),children:A.action})]},A.id))}),n.length===0&&e.jsxs("div",{className:"mt-3 flex items-center text-sm text-red-700 bg-red-100 px-3 py-2 rounded-lg",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"No vehicles found. Please add a vehicle first to schedule appointments."]})]}),e.jsxs("button",{onClick:()=>d(!0),disabled:n.length===0,className:`px-4 py-2 rounded-lg flex items-center space-x-2 shadow-lg transition-all duration-200 ${n.length===0?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white hover:shadow-xl"}`,children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{children:n.length===0?"No Vehicles Available":"Schedule Appointment"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(be,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(it,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(A=>A.status==="completed").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Me,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",a.filter(A=>A.status==="completed"&&A.totalCost).reduce((A,G)=>A+(G.totalCost||0),0).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:[{key:"upcoming",label:"Upcoming",count:I.length},{key:"past",label:"Past",count:$.length},{key:"all",label:"All",count:a.length}].map(A=>e.jsxs("button",{onClick:()=>y(A.key),className:`py-4 px-1 border-b-2 font-medium text-sm ${h===A.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[A.label,e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2.5 rounded-full text-xs",children:A.count})]},A.key))})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[W(A.status),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",A.id]}),e.jsx("div",{className:"text-sm text-gray-500",children:A.estimatedDuration})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(()=>{const G=n.find(z=>z.id===A.vehicleId);return G?e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[G.year," ",G.make," ",G.model]}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[G.licensePlate," • ",G.mileage.toLocaleString()," mi"]})]}):e.jsx("span",{className:"text-red-600",children:"Unknown Vehicle"})})()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.serviceType}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:new Date(A.scheduledDate).toLocaleDateString()}),e.jsx("div",{className:"text-gray-500",children:A.scheduledTime})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E(A.status)}`,children:A.status.replace("-"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.totalCost?`$${A.totalCost.toFixed(2)}`:"TBD"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[A.status==="scheduled"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(A),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),e.jsx("button",{onClick:()=>D(A.id),className:"text-red-600 hover:text-red-900",children:"Cancel"})]}),A.status==="completed"&&e.jsx("button",{className:"text-green-600 hover:text-green-900",children:"View Details"})]})]},A.id))})]})}),Z.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(be,{className:"w-12 h-12 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:h==="upcoming"?"No upcoming appointments":"No past appointments"}),e.jsx("p",{className:"text-gray-600 mb-6",children:h==="upcoming"?n.length===0?"Add a vehicle first to schedule appointments":"Schedule your first appointment to get started":"Your completed appointments will appear here"}),h==="upcoming"&&e.jsx("div",{className:"space-y-2",children:n.length===0?e.jsx("button",{onClick:()=>window.location.href="/customer/vehicles",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Add Vehicle"}):e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Schedule Appointment"})})]})]}),c&&e.jsx(pe,{isOpen:c,onClose:U,title:u?"Edit Appointment":"Schedule New Appointment",icon:e.jsx(be,{className:"w-5 h-5"}),submitText:u?"Update Appointment":"Schedule Appointment",onSubmit:_,submitColor:"bg-blue-600",size:"xl",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Date *"]}),e.jsx("input",{type:"date",name:"scheduledDate",value:v.scheduledDate,onChange:C,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Time *"]}),e.jsx("input",{type:"time",name:"scheduledTime",value:v.scheduledTime,onChange:C,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Xr,{className:"w-4 h-4"}),"Vehicle *"]}),e.jsxs("select",{name:"vehicleId",value:v.vehicleId,onChange:C,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",disabled:n.length===0,children:[e.jsx("option",{value:"",children:n.length===0?"No vehicles available":"Select a vehicle"}),n.map(A=>e.jsxs("option",{value:A.id,children:[A.year," ",A.make," ",A.model," - ",A.licensePlate," (",A.mileage.toLocaleString()," mi)"]},A.id))]}),n.length===0&&e.jsxs("p",{className:"text-sm text-red-600 mt-2 flex items-center gap-1",children:[e.jsx(ot,{className:"w-4 h-4"}),"Please add a vehicle first before scheduling an appointment."]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(xa,{className:"w-4 h-4"}),"Service Type *"]}),e.jsxs("select",{name:"serviceType",value:v.serviceType,onChange:C,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"",children:"Select a service"}),N.map(A=>e.jsx("option",{value:A,children:A},A))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4"}),"Assign Technician"]}),e.jsxs("select",{name:"technicianId",value:v.technicianId,onChange:C,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"",children:"Select a technician (optional)"}),s.filter(A=>A.isActive).map(A=>{const G=A.id||A._id,z=A.specializations||A.specialization||[];return e.jsxs("option",{value:G,children:[A.name," - ",Array.isArray(z)?z.join(", "):z]},G)})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Choose a technician to assign to this appointment"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Duration (minutes)"]}),e.jsx("input",{type:"number",name:"estimatedDuration",min:"15",max:"480",value:v.estimatedDuration,onChange:C,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",placeholder:"60"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(k1,{className:"w-4 h-4"}),"Priority"]}),e.jsxs("select",{name:"priority",value:v.priority,onChange:C,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(En,{className:"w-4 h-4"}),"Status"]}),e.jsxs("select",{name:"status",value:v.status,onChange:C,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Notes (Optional)"]}),e.jsx("textarea",{name:"notes",value:v.notes,onChange:C,rows:3,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white resize-none",placeholder:"Any special requests or additional information..."})]})]})}),e.jsx(Im,{isOpen:f.isOpen,title:f.title,message:f.message,onConfirm:f.onConfirm,onCancel:O,type:f.type})]})}function fP(){As();const[s,t]=b.useState([]),[a,r]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState(!0),[u,m]=b.useState("history"),[h,y]=b.useState("all");b.useEffect(()=>{g()},[]),b.useEffect(()=>{a.length>0&&s.length>0&&v()},[a,s]);const g=async()=>{try{d(!0);const[_,F]=await Promise.all([We.getServices(),We.getVehicles()]);_.success?t(_.data.services):P.error(_.message||"Failed to load services"),F.success?r(F.data.vehicles):P.error(F.message||"Failed to load vehicles");const D=F.success?F.data.vehicles:[],R=_.success?_.data.services:[],U=j(D,R);i(U)}catch(_){console.error("Error loading data:",_),P.error("Failed to load service data")}finally{d(!1)}},j=(_,F)=>{const D=[];return _.forEach(R=>{const O=F.filter(W=>W.vehicleId===R.id).sort((W,Z)=>new Date(Z.date).getTime()-new Date(W.date).getTime())[0],E={id:`oil-${R.id}`,vehicleId:R.id,vehicleInfo:`${R.year} ${R.make} ${R.model}`,serviceType:"Oil Change & Inspection",recommendedInterval:"Every 3,000 miles or 3 months",lastServiceDate:(O==null?void 0:O.date)||R.lastServiceDate||new Date().toISOString().split("T")[0],lastServiceMileage:(O==null?void 0:O.mileage)||R.lastServiceMileage||R.mileage,nextServiceDate:R.nextServiceDate||new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],nextServiceMileage:R.nextServiceMileage||R.mileage+3e3,status:R.nextServiceDate&&new Date(R.nextServiceDate)<=new Date?"overdue":"upcoming"};D.push(E)}),D},v=()=>{const _=[];a.forEach(F=>{s.filter(U=>U.vehicleId===F.id).sort((U,O)=>new Date(O.date).getTime()-new Date(U.date).getTime())[0],F.nextServiceDate&&new Date(F.nextServiceDate)<=new Date&&_.push({id:`urgent_${F.id}`,type:"urgent_service",title:"Service Overdue",description:`${F.year} ${F.make} ${F.model} is overdue for service`,priority:"urgent",estimatedCost:150,action:"Schedule Now",vehicleId:F.id});const R=new Date().getMonth();(R>=8||R<=2)&&_.push({id:`seasonal_${F.id}`,type:"seasonal_maintenance",title:"Winter Preparation",description:"Prepare your vehicle for winter conditions",priority:"medium",estimatedCost:200,action:"Learn More",vehicleId:F.id}),F.mileage>1e5&&_.push({id:`high_mileage_${F.id}`,type:"high_mileage",title:"High Mileage Service",description:"Your vehicle may need additional attention due to high mileage",priority:"high",estimatedCost:300,action:"Schedule Inspection",vehicleId:F.id})}),o(_)},x=_=>{switch(_){case"completed":return"text-green-600 bg-green-100";case"in-progress":return"text-yellow-600 bg-yellow-100";case"scheduled":return"text-blue-600 bg-blue-100";case"due":return"text-orange-600 bg-orange-100";case"upcoming":return"text-blue-600 bg-blue-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},f=_=>{switch(_){case"completed":return e.jsx(ke,{className:"w-6 h-6 text-green-600"});case"in-progress":return e.jsx(it,{className:"w-6 h-6 text-yellow-600"});case"scheduled":return e.jsx(be,{className:"w-6 h-6 text-blue-600"});case"due":return e.jsx(ot,{className:"w-6 h-6 text-orange-600"});case"upcoming":return e.jsx(En,{className:"w-6 h-6 text-blue-600"});case"overdue":return e.jsx(ot,{className:"w-6 h-6 text-red-600"});default:return e.jsx(En,{className:"w-6 h-6 text-gray-600"})}},p=h==="all"?s:s.filter(_=>_.vehicleId===h),N=h==="all"?n:n.filter(_=>_.vehicleId===h),w=s.reduce((_,F)=>_+F.cost,0),S=s.filter(_=>_.status==="completed").length,C=n.filter(_=>_.status==="upcoming").length,T=n.filter(_=>_.status==="overdue").length;return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Service History"}),e.jsx("p",{className:"text-gray-600",children:"View your vehicle maintenance records and schedules"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{value:h,onChange:_=>y(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Vehicles"}),a.map(_=>e.jsxs("option",{value:_.id,children:[_.year," ",_.make," ",_.model," - ",_.licensePlate]},_.id))]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(it,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Me,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",w.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(En,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"tab-header",children:e.jsx("nav",{className:"tab-buttons",children:[{key:"history",label:"Service History",count:p.length},{key:"schedule",label:"Maintenance Schedule",count:N.length},{key:"recommendations",label:"Recommendations",count:T}].map(_=>e.jsxs("button",{onClick:()=>m(_.key),className:`tab-button ${u===_.key?"tab-button-active":"tab-button-inactive"}`,children:[_.label,e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2.5 rounded-full text-xs",children:_.count})]},_.key))})}),e.jsxs("div",{className:"p-6",children:[u==="history"&&e.jsxs("div",{className:"space-y-4",children:[p.map(_=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[f(_.status),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_.serviceType}),e.jsx("p",{className:"text-sm text-gray-600",children:(()=>{const F=a.find(D=>D.id===_.vehicleId);return F?`${F.year} ${F.make} ${F.model}`:"Unknown Vehicle"})()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["$",_.cost.toFixed(2)]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[_.mileage.toLocaleString()," mi"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),e.jsx("p",{className:"font-medium",children:new Date(_.date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Technician"}),e.jsx("p",{className:"font-medium",children:_.technician})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Description"}),e.jsx("p",{className:"font-medium",children:_.description})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x(_.status)}`,children:_.status.replace("-"," ")})]})]}),_.parts&&_.parts.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Parts Used:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_.parts.map((F,D)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:F},D))})]}),_.notes&&e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",_.notes]})}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[e.jsx("div",{children:_.warranty&&e.jsxs("span",{children:["Warranty: ",_.warranty]})}),e.jsx("div",{children:_.nextServiceDate&&e.jsxs("span",{children:["Next Service: ",new Date(_.nextServiceDate).toLocaleDateString()]})})]})]},_.id)),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(it,{className:"w-12 h-12 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No service records found"}),e.jsx("p",{className:"text-gray-600",children:"Your service history will appear here after your first service appointment."})]})]}),u==="schedule"&&e.jsxs("div",{className:"space-y-4",children:[N.map(_=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[f(_.status),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_.serviceType}),e.jsx("p",{className:"text-sm text-gray-600",children:_.vehicleInfo})]})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${x(_.status)}`,children:_.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Recommended Interval"}),e.jsx("p",{className:"font-medium",children:_.recommendedInterval})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Service"}),e.jsxs("p",{className:"font-medium",children:[new Date(_.lastServiceDate).toLocaleDateString(),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",_.lastServiceMileage.toLocaleString()," mi)"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Next Service"}),e.jsxs("p",{className:"font-medium",children:[new Date(_.nextServiceDate).toLocaleDateString(),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",_.nextServiceMileage.toLocaleString()," mi)"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"font-medium capitalize",children:_.status})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm",children:"Schedule Service"})})]},_.id)),N.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(lt,{className:"w-12 h-12 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No maintenance schedule found"}),e.jsx("p",{className:"text-gray-600",children:"Your maintenance schedule will be created based on your vehicle and service history."})]})]}),u==="recommendations"&&e.jsxs("div",{className:"space-y-4",children:[T>0?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ot,{className:"w-6 h-6 mr-3 text-yellow-600"}),e.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Maintenance Recommendations"})]}),e.jsxs("p",{className:"text-yellow-700 mb-4",children:["You have ",T," service(s) that are overdue. We recommend scheduling these services soon to maintain your vehicle's performance and safety."]}),e.jsx("button",{className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg",children:"Schedule Overdue Services"})]}):e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ke,{className:"w-6 h-6 mr-3 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"All Up to Date"})]}),e.jsx("p",{className:"text-green-700",children:"Great job! Your vehicle maintenance is current. Continue following the recommended service intervals to keep your vehicle in optimal condition."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Service Tips"}),e.jsxs("ul",{className:"space-y-2 text-blue-700",children:[e.jsx("li",{children:"• Regular oil changes help maintain engine performance and longevity"}),e.jsx("li",{children:"• Brake inspections every 6 months ensure safety"}),e.jsx("li",{children:"• Tire rotations every 6,000 miles promote even wear"}),e.jsx("li",{children:"• Keep records of all services for warranty purposes"}),e.jsx("li",{children:"• Address warning lights promptly to prevent costly repairs"})]})]})]})]})]})]})}function gP(){const[s,t]=b.useState([]),[a,r]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState("all"),[c,d]=b.useState(!1),[u,m]=b.useState(null),[h,y]=b.useState({paymentMethod:"credit_card",paymentReference:""});b.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const[C,T]=await Promise.all([We.getInvoices(),We.getVehicles()]);C.success?t(C.data.invoices):P.error(C.message||"Failed to load invoices"),T.success?r(T.data.vehicles):P.error(T.message||"Failed to load vehicles")}catch(C){console.error("Error loading data:",C),P.error("Failed to load invoice data")}finally{i(!1)}},j=C=>{switch(C){case"paid":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},v=async C=>{m(C),d(!0)},x=async()=>{if(u)try{const C=await We.payInvoice(u.id,h);if(!C.success){P.error(C.message||"Failed to process payment");return}t(T=>T.map(_=>_.id===u.id?{..._,status:"paid",paymentDate:new Date().toISOString()}:_)),d(!1),m(null),y({paymentMethod:"credit_card",paymentReference:""}),P.success("Payment processed successfully!")}catch(C){console.error("Error processing payment:",C),P.error("Failed to process payment")}},f=async C=>{try{const T=await We.downloadInvoice(C);T.success?(P.success("Invoice download initiated"),console.log("Download URL:",T.data.downloadUrl)):P.error(T.message||"Failed to download invoice")}catch(T){console.error("Error downloading invoice:",T),P.error("Failed to download invoice")}},p=l==="all"?s:s.filter(C=>C.status===l),N=s.reduce((C,T)=>C+T.total,0),w=s.filter(C=>C.status==="paid").reduce((C,T)=>C+T.total,0),S=N-w;return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoices & Payments"}),e.jsx("p",{className:"text-gray-600",children:"Manage your invoices and track payments"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(lt,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoiced"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",N.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Paid"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",w.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Me,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Outstanding"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",S.toFixed(2)]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center space-x-4 mb-4",children:e.jsxs("select",{value:l,onChange:C=>o(C.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.invoiceNumber}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Due: ",new Date(C.dueDate).toLocaleDateString()]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(()=>{const T=a.find(_=>_.id===C.vehicleId);return T?`${T.year} ${T.make} ${T.model}`:"Unknown Vehicle"})()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.serviceType}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(C.date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",C.total.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j(C.status)}`,children:C.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:"View"}),C.status==="pending"&&e.jsx("button",{onClick:()=>v(C),className:"text-green-600 hover:text-green-900",children:"Pay"}),e.jsx("button",{onClick:()=>f(C.id),className:"text-gray-600 hover:text-gray-900",children:"Download"})]})})]},C.id))})]})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(lt,{className:"w-12 h-12 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No invoices found"}),e.jsx("p",{className:"text-gray-600",children:"Your invoices will appear here after service appointments."})]})]})}),c&&u&&e.jsx(pe,{isOpen:c,onClose:()=>d(!1),title:"Process Payment",icon:e.jsx(ma,{className:"w-5 h-5"}),submitText:"Process Payment",onSubmit:x,submitColor:"bg-green-600",size:"lg",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Invoice Details"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Invoice #:"})," ",u.invoiceNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Amount:"})," $",u.total.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Due Date:"})," ",new Date(u.dueDate).toLocaleDateString()]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ma,{className:"w-4 h-4"}),"Payment Method *"]}),e.jsxs("select",{value:h.paymentMethod,onChange:C=>y(T=>({...T,paymentMethod:C.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select payment method"}),e.jsx("option",{value:"credit_card",children:"Credit Card"}),e.jsx("option",{value:"debit_card",children:"Debit Card"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"cash",children:"Cash"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(T1,{className:"w-4 h-4"}),"Payment Reference (Optional)"]}),e.jsx("input",{type:"text",value:h.paymentReference,onChange:C=>y(T=>({...T,paymentReference:C.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",placeholder:"Transaction ID or reference number"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Provide a reference number for tracking purposes"})]})]})})]})}function yP(){const[s,t]=b.useState([]),[a,r]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState("all"),[c,d]=b.useState(!1),[u,m]=b.useState({subject:"",message:"",type:"general",priority:"medium"});b.useEffect(()=>{h()},[]);const h=async()=>{try{i(!0);const x=await We.getMessages();x.success?t(x.data.messages):P.error(x.message||"Failed to load messages")}catch(x){console.error("Error loading messages:",x),P.error("Failed to load messages")}finally{i(!1)}},y=s.filter(x=>{switch(l){case"unread":return!x.isRead;case"read":return x.isRead;default:return!0}}),g=async x=>{try{const f=await We.markMessageAsRead(x);if(!f.success){P.error(f.message||"Failed to mark message as read");return}t(p=>p.map(N=>N.id===x?{...N,isRead:!0}:N))}catch(f){console.error("Error marking message as read:",f),P.error("Failed to mark message as read")}},j=async()=>{if(!u.subject.trim()||!u.message.trim()){P.error("Please fill in all required fields");return}try{const x=await We.sendMessage({subject:u.subject,message:u.message,type:u.type,priority:u.priority});if(x.success)t(f=>[x.data.message,...f]);else{P.error(x.message||"Failed to send message");return}m({subject:"",message:"",type:"general",priority:"medium"}),d(!1),P.success("Message sent successfully")}catch(x){console.error("Error sending message:",x),P.error("Failed to send message")}},v=async x=>{if(confirm("Are you sure you want to delete this message?"))try{const f=await We.deleteMessage(x);if(!f.success){P.error(f.message||"Failed to delete message");return}t(p=>p.filter(N=>N.id!==x)),(a==null?void 0:a.id)===x&&r(null),P.success("Message deleted successfully")}catch(f){console.error("Error deleting message:",f),P.error("Failed to delete message")}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Messages"}),e.jsx("p",{className:"text-gray-600",children:"View messages from our service team"})]}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-300",children:"New Message"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-96",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("div",{className:"flex space-x-2",children:[{key:"all",label:"All",count:s.length},{key:"unread",label:"Unread",count:s.filter(x=>!x.isRead).length},{key:"read",label:"Read",count:s.filter(x=>x.isRead).length}].map(x=>e.jsxs("button",{onClick:()=>o(x.key),className:`px-3 py-1 text-sm rounded-lg ${l===x.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[x.label," (",x.count,")"]},x.key))})}),e.jsx("div",{className:"overflow-y-auto h-80 custom-scrollbar",children:y.map(x=>e.jsxs("div",{onClick:()=>{r(x),x.isRead||g(x.id)},className:`p-4 border-b cursor-pointer hover:bg-gray-50 ${(a==null?void 0:a.id)===x.id?"bg-blue-50":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:x.subject}),!x.isRead&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:"New"})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate mb-1",children:x.message}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.date).toLocaleDateString()}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${x.type==="appointment"?"bg-blue-100 text-blue-700":x.type==="reminder"?"bg-yellow-100 text-yellow-700":x.type==="service"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:x.type})]})]},x.id))})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-lg shadow",children:a?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a.subject}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a.type==="appointment"?"bg-blue-100 text-blue-700":a.type==="reminder"?"bg-yellow-100 text-yellow-700":a.type==="service"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a.type}),e.jsx("button",{onClick:()=>v(a.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["From: ",a.from," • ",new Date(a.date).toLocaleString()]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4",children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:a.message})})})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ut,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a message"}),e.jsx("p",{className:"text-gray-600",children:"Choose a message from the list to view its details."})]})})})]}),c&&e.jsx(pe,{isOpen:c,onClose:()=>d(!1),title:"Send New Message",icon:e.jsx(Po,{className:"w-5 h-5"}),submitText:"Send Message",onSubmit:j,submitColor:"bg-blue-600",size:"lg",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Subject *"]}),e.jsx("input",{type:"text",value:u.subject,onChange:x=>m(f=>({...f,subject:x.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",placeholder:"Enter message subject",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Po,{className:"w-4 h-4"}),"Message *"]}),e.jsx("textarea",{value:u.message,onChange:x=>m(f=>({...f,message:x.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white resize-none",rows:4,placeholder:"Enter your message",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Pf,{className:"w-4 h-4"}),"Type"]}),e.jsxs("select",{value:u.type,onChange:x=>m(f=>({...f,type:x.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"appointment",children:"Appointment"}),e.jsx("option",{value:"service",children:"Service"}),e.jsx("option",{value:"support",children:"Support"}),e.jsx("option",{value:"reminder",children:"Reminder"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(k1,{className:"w-4 h-4"}),"Priority"]}),e.jsxs("select",{value:u.priority,onChange:x=>m(f=>({...f,priority:x.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]})]})})]})}function vP(){As();const[s,t]=b.useState([]),[a,r]=b.useState(0),[n,i]=b.useState(!0),[l,o]=b.useState("all"),[c,d]=b.useState(""),[u,m]=b.useState(1),[h,y]=b.useState(1);b.useEffect(()=>{g()},[u,l,c]);const g=async()=>{var w;try{i(!0);const S=l==="all"?void 0:l,C=await We.getNotifications(u,20,c,S);C.success?(t(C.data.notifications),r(C.data.unreadCount),y(((w=C.data.pagination)==null?void 0:w.pages)||1)):P.error(C.message||"Failed to load notifications")}catch(S){console.error("Error loading notifications:",S),P.error("Failed to load notifications")}finally{i(!1)}},j=async w=>{try{const S=await We.markNotificationAsRead(w);S.success?(t(C=>C.map(T=>T.id===w?{...T,status:"read",readAt:new Date().toISOString()}:T)),r(C=>Math.max(0,C-1)),P.success("Notification marked as read")):P.error(S.message||"Failed to mark notification as read")}catch(S){console.error("Error marking notification as read:",S),P.error("Failed to mark notification as read")}},v=async()=>{try{const w=await We.markAllNotificationsAsRead();w.success?(t(S=>S.map(C=>({...C,status:"read"}))),r(0),P.success("All notifications marked as read")):P.error(w.message||"Failed to mark all notifications as read")}catch(w){console.error("Error marking all notifications as read:",w),P.error("Failed to mark all notifications as read")}},x=w=>{switch(w){case"service_reminder":return e.jsx(it,{className:"w-6 h-6 text-blue-600"});case"appointment_reminder":return e.jsx(be,{className:"w-6 h-6 text-purple-600"});case"appointment_confirmation":return e.jsx(ke,{className:"w-6 h-6 text-green-600"});case"payment_reminder":return e.jsx(Me,{className:"w-6 h-6 text-orange-600"});case"maintenance_alert":return e.jsx(ot,{className:"w-6 h-6 text-red-600"});case"warranty_expiry":return e.jsx(qe,{className:"w-6 h-6 text-yellow-600"});case"follow_up":return e.jsx(kt,{className:"w-6 h-6 text-indigo-600"});case"marketing":return e.jsx(TA,{className:"w-6 h-6 text-pink-600"});default:return e.jsx(En,{className:"w-6 h-6 text-gray-600"})}},f=w=>{switch(w){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=w=>{switch(w){case"service_reminder":return"Service Reminder";case"appointment_reminder":return"Appointment Reminder";case"appointment_confirmation":return"Appointment Confirmation";case"payment_reminder":return"Payment Reminder";case"maintenance_alert":return"Maintenance Alert";case"warranty_expiry":return"Warranty Expiry";case"follow_up":return"Follow-up";case"marketing":return"Marketing";default:return"General"}},N=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((w,S)=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},S))})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Stay updated with your vehicle maintenance, appointments, and important updates"})]}),a>0&&e.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Mark All as Read"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(En,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Lr,{className:"w-8 h-8 text-red-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unread"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Read"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length-a})]})]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:l,onChange:w=>o(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Notifications"}),e.jsx("option",{value:"unread",children:"Unread Only"}),e.jsx("option",{value:"read",children:"Read Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"service_reminder",children:"Service Reminders"}),e.jsx("option",{value:"appointment_reminder",children:"Appointment Reminders"}),e.jsx("option",{value:"payment_reminder",children:"Payment Reminders"}),e.jsx("option",{value:"maintenance_alert",children:"Maintenance Alerts"}),e.jsx("option",{value:"follow_up",children:"Follow-ups"}),e.jsx("option",{value:"marketing",children:"Marketing"})]})]})]})})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(jt,{className:"w-12 h-12 text-gray-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-600",children:l==="all"?"You're all caught up! No notifications at the moment.":`No ${l} notifications found.`})]}):s.map(w=>{var S,C;return e.jsx("div",{className:`bg-white p-6 rounded-lg shadow border-l-4 ${w.status==="read"?"border-gray-200":"border-blue-500"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12",children:x(w.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${f(w.priority)}`,children:w.priority}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:p(w.type)})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:w.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-1"}),N(w.createdAt)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(jt,{className:"w-4 h-4 mr-1"}),w.channel]}),((S=w.metadata)==null?void 0:S.serviceType)&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(it,{className:"w-4 h-4 mr-1"}),w.metadata.serviceType]}),((C=w.metadata)==null?void 0:C.mileage)&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(eT,{className:"w-4 h-4 mr-1"}),w.metadata.mileage.toLocaleString()," miles"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[w.status!=="read"&&e.jsx("button",{onClick:()=>j(w.id),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Mark Read"}),w.status==="read"&&e.jsx("span",{className:"text-sm text-gray-500",children:"✓ Read"})]})]})},w.id)})}),h>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("nav",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>m(w=>Math.max(1,w-1)),disabled:u===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[e.jsx(E_,{className:"w-4 h-4 mr-1"}),"Previous"]}),e.jsxs("span",{className:"px-3 py-2 text-sm text-gray-700",children:["Page ",u," of ",h]}),e.jsxs("button",{onClick:()=>m(w=>Math.min(h,w+1)),disabled:u===h,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:["Next",e.jsx(gu,{className:"w-4 h-4 ml-1"})]})]})})]})})}function bP(){const[s,t]=b.useState(null),[a,r]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState("profile"),[c,d]=b.useState(!1),[u,m]=b.useState({name:"",email:"",phone:"",businessName:"",street:"",city:"",state:"",zipCode:""}),[h,y]=b.useState({notifications:{email:!0,sms:!0,push:!1},reminders:{appointments:!0,maintenance:!0,payments:!0},privacy:{shareData:!1,marketing:!1}});b.useEffect(()=>{g()},[]);const g=async()=>{try{r(!0);const S=await We.getProfile();if(S.success){const C=S.data.profile;t(C),m({name:C.name,email:C.email,phone:C.phone,businessName:C.businessName||"",street:C.address.street,city:C.address.city,state:C.address.state,zipCode:C.address.zipCode}),y(C.preferences)}else P.error(S.message||"Failed to load profile data")}catch(S){console.error("Error loading profile:",S),P.error("Failed to load profile data")}finally{r(!1)}},j=S=>{const{name:C,value:T}=S.target;m(_=>({..._,[C]:T}))},v=(S,C,T)=>{y(_=>({..._,[S]:{..._[S],[C]:T}}))},x=async()=>{try{const S={name:u.name,email:u.email,phone:u.phone,businessName:u.businessName,address:{street:u.street,city:u.city,state:u.state,zipCode:u.zipCode}},C=await We.updateProfile(S);C.success?(await g(),P.success("Profile updated successfully!"),i(!1)):P.error(C.message||"Failed to update profile")}catch(S){console.error("Error updating profile:",S),P.error("Failed to update profile")}},f=async()=>{try{const S=await We.updateProfile({preferences:h});S.success?P.success("Preferences updated successfully!"):P.error(S.message||"Failed to update preferences")}catch(S){console.error("Error updating preferences:",S),P.error("Failed to update preferences")}},p=()=>{P.success("Password change email sent!")},N=()=>{d(!0)},w=()=>{P.success("Account deletion request submitted"),d(!1)};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile & Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account and preferences"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsx("nav",{className:"space-y-2",children:[{key:"profile",label:"Profile",icon:e.jsx(Vt,{className:"w-5 h-5"})},{key:"preferences",label:"Preferences",icon:e.jsx(Xt,{className:"w-5 h-5"})},{key:"security",label:"Security",icon:e.jsx(I1,{className:"w-5 h-5"})}].map(S=>e.jsxs("button",{onClick:()=>o(S.key),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left ${l===S.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"flex items-center",children:S.icon}),e.jsx("span",{className:"font-medium",children:S.label})]},S.key))})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l==="profile"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profile Information"}),e.jsx("button",{onClick:()=>i(!n),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:n?"Cancel":"Edit Profile"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",value:u.name,onChange:j,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:u.email,onChange:j,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:j,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name (Optional)"}),e.jsx("input",{type:"text",name:"businessName",value:u.businessName,onChange:j,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",name:"street",value:u.street,onChange:j,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",name:"city",value:u.city,onChange:j,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),e.jsx("input",{type:"text",name:"state",value:u.state,onChange:j,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),e.jsx("input",{type:"text",name:"zipCode",value:u.zipCode,onChange:j,disabled:!n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]})]})]}),n&&e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]}),l==="preferences"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Preferences"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Preferences"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notifications"}),e.jsx("div",{className:"space-y-4",children:Object.entries(h.notifications).map(([S,C])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[S," Notifications"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Receive notifications via ",S]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:T=>v("notifications",S,T.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},S))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reminders"}),e.jsx("div",{className:"space-y-4",children:Object.entries(h.reminders).map(([S,C])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[S," Reminders"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Get reminded about upcoming ",S]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:T=>v("reminders",S,T.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},S))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Privacy"}),e.jsx("div",{className:"space-y-4",children:Object.entries(h.privacy).map(([S,C])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:S==="shareData"?"Share Data":"Marketing Communications"}),e.jsx("p",{className:"text-sm text-gray-600",children:S==="shareData"?"Allow us to use your data for service improvements":"Receive marketing and promotional communications"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:T=>v("privacy",S,T.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},S))})]})]})]}),l==="security"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Security Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-normal text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your account password"})]}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change Password"})]})}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-normal text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Enable 2FA"})]})}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-normal text-gray-900",children:"Account Activity"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View your recent login activity"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"View Activity"})]})}),e.jsx("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-normal text-red-900",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-red-600",children:"Permanently delete your account and all data"})]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete Account"})]})})]})]})]})})]}),e.jsx(Im,{isOpen:c,title:"Delete Account",message:"Are you sure you want to delete your account? This action cannot be undone.",confirmText:"Delete Account",cancelText:"Cancel",onConfirm:w,onCancel:()=>d(!1),type:"danger"})]})}function jP({membership:s,onManage:t,onCancel:a,showActions:r=!0}){var m,h,y,g,j,v;if(!s)return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:e.jsx("p",{children:"No membership data available"})})});const n=()=>{switch(s.status){case"active":return e.jsx(ke,{className:"w-5 h-5 text-green-600"});case"cancelled":return e.jsx(Ta,{className:"w-5 h-5 text-red-600"});case"expired":return e.jsx(ot,{className:"w-5 h-5 text-orange-600"});case"suspended":return e.jsx(vt,{className:"w-5 h-5 text-yellow-600"});default:return e.jsx(Ta,{className:"w-5 h-5 text-gray-600"})}},i=()=>{switch(s.status){case"active":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"expired":return"bg-orange-100 text-orange-800";case"suspended":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},l=()=>{var f;switch(((f=s==null?void 0:s.membershipPlan)==null?void 0:f.tier)||"basic"){case"vip":return e.jsx(Gr,{className:"w-5 h-5 text-yellow-600"});case"enterprise":return e.jsx(qe,{className:"w-5 h-5 text-purple-600"});case"premium":return e.jsx(nt,{className:"w-5 h-5 text-blue-600"});default:return e.jsx(ke,{className:"w-5 h-5 text-green-600"})}},o=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),c=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),d=()=>{if(s.status!=="active")return!1;const x=s.daysUntilRenewal||0;return x<=30&&x>0},u=()=>s.status==="expired"||s.isExpired||!1;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[l(),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((m=s==null?void 0:s.membershipPlan)==null?void 0:m.name)||"Membership Plan"}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[((h=s==null?void 0:s.membershipPlan)==null?void 0:h.tier)||"basic"," Tier"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n(),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i()}`,children:s.status})]})]}),d()&&e.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium text-orange-800",children:["Expires in ",s.daysUntilRenewal," days"]})]})}),u()&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ta,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Membership expired"})]})}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Price:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[c(s.price),"/",s.billingCycle]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Next Billing:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.nextBillingDate?o(s.nextBillingDate):"Not set"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.startDate?o(s.startDate):"Not set"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"End Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.endDate?o(s.endDate):"Not set"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:((y=s.paymentMethod)==null?void 0:y.replace("_"," "))||"Not set"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Auto Renew:"}),e.jsx("span",{className:`font-medium ${s.autoRenew?"text-green-600":"text-red-600"}`,children:s.autoRenew?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),e.jsx("span",{className:"font-medium text-gray-900",children:c(s.totalPaid||0)})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Benefits Used"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-blue-600",children:((g=s.benefitsUsed)==null?void 0:g.inspections)||0}),e.jsx("div",{className:"text-gray-600",children:"Inspections"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-green-600",children:((j=s.benefitsUsed)==null?void 0:j.roadsideAssistance)||0}),e.jsx("div",{className:"text-gray-600",children:"Roadside"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-purple-600",children:((v=s.benefitsUsed)==null?void 0:v.priorityBookings)||0}),e.jsx("div",{className:"text-gray-600",children:"Priority"})]})]})]}),r&&e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[t&&e.jsx("button",{onClick:()=>t(s),className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Manage Plan"}),a&&s.status==="active"&&e.jsx("button",{onClick:()=>a(s),className:"flex-1 py-2 px-4 border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium",children:"Cancel"})]})]})}function NP({warranty:s,onViewDetails:t,onUpdateMileage:a,onFileClaim:r,showActions:n=!0}){var g,j,v,x,f,p,N;if(!s)return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:e.jsx("p",{children:"No warranty data available"})})});const i=()=>{switch(s.status||"unknown"){case"active":return e.jsx(ke,{className:"w-5 h-5 text-green-600"});case"expired":return e.jsx(Ta,{className:"w-5 h-5 text-red-600"});case"cancelled":return e.jsx(Ta,{className:"w-5 h-5 text-gray-600"});case"suspended":return e.jsx(vt,{className:"w-5 h-5 text-yellow-600"});default:return e.jsx(Ta,{className:"w-5 h-5 text-gray-600"})}},l=()=>{switch(s.status||"unknown"){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";case"suspended":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},o=()=>{switch(s.warrantyType||"unknown"){case"manufacturer":return e.jsx(qe,{className:"w-5 h-5 text-blue-600"});case"extended":return e.jsx(qe,{className:"w-5 h-5 text-purple-600"});case"powertrain":return e.jsx(Fe,{className:"w-5 h-5 text-green-600"});case"bumper_to_bumper":return e.jsx(qe,{className:"w-5 h-5 text-orange-600"});default:return e.jsx(qe,{className:"w-5 h-5 text-gray-600"})}},c=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),d=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(w),u=w=>new Intl.NumberFormat("en-US").format(w),m=()=>{if((s.status||"unknown")!=="active")return!1;const S=s.daysUntilExpiration||0;return S<=90&&S>0},h=()=>{if((s.status||"unknown")!=="active"||!s.mileageLimit||!s.mileageRemaining)return!1;const S=s.mileageRemaining/s.mileageLimit*100;return S<=10&&S>0},y=()=>{if(!s.coverage)return"Coverage details not available";const w=Object.entries(s.coverage).filter(([S,C])=>C).map(([S,C])=>S.charAt(0).toUpperCase()+S.slice(1));return w.length>0?w.slice(0,3).join(", ")+(w.length>3?"...":""):"No specific coverage details available"};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[o(),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name||"Unnamed Warranty"}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[((g=s.warrantyType)==null?void 0:g.replace("_"," "))||"Unknown"," Warranty"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i(),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${l()}`,children:s.status||"unknown"})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[((j=s.vehicle)==null?void 0:j.year)||"N/A"," ",((v=s.vehicle)==null?void 0:v.make)||"N/A"," ",((x=s.vehicle)==null?void 0:x.model)||"N/A"]})]}),e.jsxs("div",{className:"text-xs text-blue-700",children:["VIN: ",((f=s.vehicle)==null?void 0:f.vin)||"N/A"]})]}),m()&&e.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium text-orange-800",children:["Expires in ",s.daysUntilExpiration||0," days"]})]})}),h()&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gn,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:[u(s.mileageRemaining||0)," miles remaining"]})]})}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.startDate?c(s.startDate):"Not set"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"End Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.endDate?c(s.endDate):"Not set"})]}),s.mileageLimit&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Mileage Limit:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[u(s.mileageLimit||0)," miles"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Mileage:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[u(s.currentMileage||0)," miles"]})]}),(s.deductible||0)>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Deductible:"}),e.jsx("span",{className:"font-medium text-gray-900",children:d(s.deductible||0)})]}),s.maxClaimAmount&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Max Claim:"}),e.jsx("span",{className:"font-medium text-gray-900",children:d(s.maxClaimAmount||0)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Claims:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[s.totalClaims||0," ($",d(s.totalClaimAmount||0),")"]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Coverage Includes"}),e.jsx("p",{className:"text-xs text-gray-600",children:y()})]}),((p=s.provider)==null?void 0:p.name)&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900 mb-1",children:"Provider"}),e.jsx("p",{className:"text-xs text-green-700",children:s.provider.name}),((N=s.provider.contact)==null?void 0:N.phone)&&e.jsx("p",{className:"text-xs text-green-700",children:s.provider.contact.phone})]}),n&&e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[t&&e.jsx("button",{onClick:()=>t(s),className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"View Details"}),a&&(s.status||"unknown")==="active"&&e.jsx("button",{onClick:()=>a(s),className:"flex-1 py-2 px-4 border border-green-600 text-green-600 rounded-lg hover:bg-green-50 transition-colors text-sm font-medium",children:"Update Mileage"}),r&&(s.status||"unknown")==="active"&&e.jsx("button",{onClick:()=>r(s),className:"flex-1 py-2 px-4 border border-purple-600 text-purple-600 rounded-lg hover:bg-purple-50 transition-colors text-sm font-medium",children:"File Claim"})]})]})}const cn=[{id:"basic",name:"Basic Membership",tier:"basic",price:19.99,billingCycle:"monthly",features:["Free oil changes","10% off parts","Basic roadside assistance","Service reminders","Online appointment booking"],benefits:["Up to 2 vehicles","Standard customer support","Basic reporting"]},{id:"premium",name:"Premium Membership",tier:"premium",price:49.99,billingCycle:"monthly",features:["All Basic features","Free tire rotations","20% off parts","Priority scheduling","Extended roadside assistance","Vehicle health reports","Concierge service"],benefits:["Up to 5 vehicles","Priority customer support","Advanced analytics","Exclusive promotions"],popular:!0,savings:15},{id:"elite",name:"Elite Membership",tier:"elite",price:99.99,billingCycle:"monthly",features:["All Premium features","Free comprehensive inspections","30% off parts","VIP scheduling","Unlimited roadside assistance","Real-time vehicle monitoring","Personal service advisor","Loaner vehicle priority","Mobile service calls"],benefits:["Unlimited vehicles","24/7 VIP support","Custom reporting","Exclusive events","Partner discounts"],savings:25}];function V1({onSelectPlan:s,selectedPlanId:t}){const[a,r]=b.useState("monthly"),[n,i]=b.useState(t||""),l=u=>{switch(u){case"basic":return e.jsx(qe,{className:"w-5 h-5"});case"premium":return e.jsx(ts,{className:"w-5 h-5"});case"elite":return e.jsx(Gr,{className:"w-5 h-5"});default:return e.jsx(qe,{className:"w-5 h-5"})}},o=u=>{switch(u){case"basic":return"bg-gray-100 text-gray-700 border-gray-300";case"premium":return"bg-blue-100 text-blue-700 border-blue-300";case"elite":return"bg-purple-100 text-purple-700 border-purple-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},c=u=>{i(u.id),s==null||s(u)},d=u=>{if(a==="yearly"){const m=u.price*12,h=m*(u.savings||0)/100;return{original:m,discounted:m-h,savings:h}}return{original:u.price,discounted:u.price,savings:0}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg p-1 flex",children:[e.jsx("button",{onClick:()=>r("monthly"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"}),e.jsxs("button",{onClick:()=>r("yearly"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="yearly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Yearly",e.jsx("span",{className:"ml-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Save up to 25%"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:cn.map(u=>{const m=d(u),h=n===u.id;return e.jsxs("div",{className:`relative rounded-2xl border-2 transition-all duration-200 cursor-pointer ${h?"border-blue-500 shadow-lg scale-105":"border-gray-200 hover:border-gray-300 hover:shadow-md"} ${u.popular?"ring-2 ring-blue-200":""}`,onClick:()=>c(u),children:[u.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-medium",children:"Most Popular"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full mb-3 ${o(u.tier)}`,children:l(u.tier)}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:u.name}),e.jsxs("div",{className:"space-y-1",children:[a==="yearly"&&m.savings>0&&e.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["$",m.original.toFixed(2),"/year"]}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:["$",m.discounted.toFixed(2),e.jsxs("span",{className:"text-lg font-normal text-gray-500",children:["/",a==="yearly"?"year":"month"]})]}),a==="yearly"&&m.savings>0&&e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["Save $",m.savings.toFixed(2),"/year"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Features"}),e.jsx("ul",{className:"space-y-2",children:u.features.map((y,g)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Wt,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:y})]},g))})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Benefits"}),e.jsx("ul",{className:"space-y-2",children:u.benefits.map((y,g)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Df,{className:"w-4 h-4 text-yellow-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:y})]},g))})]}),e.jsx("button",{className:`w-full mt-6 py-3 px-4 rounded-lg font-medium transition-colors ${h?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:h?"Selected":"Select Plan"})]})]},u.id)})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detailed Comparison"}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Feature"}),cn.map(u=>e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:u.name},u.id))]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Monthly Price"}),cn.map(u=>e.jsxs("td",{className:"px-6 py-4 text-sm text-center text-gray-700",children:["$",u.price]},u.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Max Vehicles"}),cn.map(u=>e.jsx("td",{className:"px-6 py-4 text-sm text-center text-gray-700",children:u.tier==="basic"?"2":u.tier==="premium"?"5":"Unlimited"},u.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Parts Discount"}),cn.map(u=>e.jsx("td",{className:"px-6 py-4 text-sm text-center text-gray-700",children:u.tier==="basic"?"10%":u.tier==="premium"?"20%":"30%"},u.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Roadside Assistance"}),cn.map(u=>e.jsx("td",{className:"px-6 py-4 text-sm text-center text-gray-700",children:u.tier==="basic"?"Basic":u.tier==="premium"?"Extended":"Unlimited"},u.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Customer Support"}),cn.map(u=>e.jsx("td",{className:"px-6 py-4 text-sm text-center text-gray-700",children:u.tier==="basic"?"Standard":u.tier==="premium"?"Priority":"24/7 VIP"},u.id))]})]})]})})})]})]})}function wP({customerId:s,onNotificationClick:t}){const[a,r]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState("all"),[c,d]=b.useState("all");b.useEffect(()=>{u()},[s]);const u=async()=>{try{i(!0),r([{id:"1",type:"success",title:"Appointment Confirmed",message:"Your appointment for oil change on 2024-01-15 at 10:00 AM has been confirmed.",timestamp:"2024-01-10T09:30:00Z",read:!1,category:"appointment",actionUrl:"/customer/dashboard/appointments",actionText:"View Appointment"},{id:"2",type:"warning",title:"Payment Due",message:"Your membership payment of $99.99 is due in 3 days.",timestamp:"2024-01-09T14:20:00Z",read:!1,category:"billing",actionUrl:"/customer/dashboard/billing",actionText:"Pay Now"},{id:"3",type:"info",title:"Warranty Expiring Soon",message:"Your extended warranty for 2020 Honda Civic expires in 30 days.",timestamp:"2024-01-08T11:15:00Z",read:!0,category:"warranty",actionUrl:"/customer/dashboard/warranties",actionText:"Renew Warranty"},{id:"4",type:"success",title:"Service Completed",message:"Your brake inspection has been completed. No issues found.",timestamp:"2024-01-07T16:45:00Z",read:!0,category:"service"},{id:"5",type:"info",title:"Membership Benefits",message:"You have 2 free inspections remaining this month.",timestamp:"2024-01-06T10:30:00Z",read:!1,category:"membership",actionUrl:"/customer/dashboard/memberships",actionText:"View Benefits"}])}catch(p){console.error("Error loading notifications:",p)}finally{i(!1)}},m=async p=>{try{r(N=>N.map(w=>w.id===p?{...w,read:!0}:w))}catch(N){console.error("Error marking notification as read:",N)}},h=async()=>{try{r(p=>p.map(N=>({...N,read:!0})))}catch(p){console.error("Error marking all notifications as read:",p)}},y=async p=>{try{r(N=>N.filter(w=>w.id!==p))}catch(N){console.error("Error deleting notification:",N)}},g=p=>{switch(p){case"success":return e.jsx(ke,{className:"w-5 h-5 text-green-600"});case"warning":return e.jsx(ot,{className:"w-5 h-5 text-yellow-600"});case"error":return e.jsx(Ta,{className:"w-5 h-5 text-red-600"});default:return e.jsx(D1,{className:"w-5 h-5 text-blue-600"})}},j=p=>{switch(p){case"appointment":return e.jsx(be,{className:"w-4 h-4"});case"billing":return e.jsx(Me,{className:"w-4 h-4"});case"warranty":return e.jsx(qe,{className:"w-4 h-4"});case"membership":return e.jsx(ts,{className:"w-4 h-4"});case"service":return e.jsx(Fe,{className:"w-4 h-4"});default:return e.jsx(Lr,{className:"w-4 h-4"})}},v=p=>{const N=new Date(p),S=Math.floor((new Date().getTime()-N.getTime())/(1e3*60*60));if(S<1)return"Just now";if(S<24)return`${S} hour${S>1?"s":""} ago`;{const C=Math.floor(S/24);return`${C} day${C>1?"s":""} ago`}},x=a.filter(p=>{const N=l==="all"||l==="unread"&&!p.read||l==="read"&&p.read,w=c==="all"||p.category===c;return N&&w}),f=a.filter(p=>!p.read).length;return n?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Lr,{className:"w-6 h-6 text-gray-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Notifications"}),f>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded-full",children:f})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all as read"})})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsxs("select",{value:l,onChange:p=>o(p.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Category:"}),e.jsxs("select",{value:c,onChange:p=>d(p.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"appointment",children:"Appointments"}),e.jsx("option",{value:"billing",children:"Billing"}),e.jsx("option",{value:"warranty",children:"Warranty"}),e.jsx("option",{value:"membership",children:"Membership"}),e.jsx("option",{value:"service",children:"Service"}),e.jsx("option",{value:"general",children:"General"})]})]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:x.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Lr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No notifications found"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:x.map(p=>e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${p.read?"":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:g(p.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:p.title}),!p.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:v(p.timestamp)}),e.jsxs("div",{className:"flex items-center space-x-1",children:[j(p.category),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:p.category})]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),e.jsxs("div",{className:"flex items-center space-x-3 mt-3",children:[p.actionUrl&&p.actionText&&e.jsx("button",{onClick:()=>t==null?void 0:t(p),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:p.actionText}),!p.read&&e.jsx("button",{onClick:()=>m(p.id),className:"text-sm text-gray-500 hover:text-gray-700",children:"Mark as read"}),e.jsx("button",{onClick:()=>y(p.id),className:"text-sm text-red-500 hover:text-red-700",children:"Delete"})]})]})]})},p.id))})}),x.length>0&&e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Showing ",x.length," of ",a.length," notifications"]}),e.jsxs("span",{children:[f," unread"]})]})})]})}function SP({customerId:s,timeRange:t="30d"}){const[a,r]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState(t);b.useEffect(()=>{c()},[s,l]);const c=async()=>{try{i(!0),r({totalMemberships:156,activeMemberships:142,expiringSoon:8,totalRevenue:15680.5,monthlyGrowth:12.5,topPlans:[{name:"Premium Plan",count:67,revenue:6700,percentage:43},{name:"VIP Plan",count:45,revenue:6750,percentage:29},{name:"Basic Plan",count:32,revenue:1920,percentage:21},{name:"Enterprise Plan",count:12,revenue:3600,percentage:7}],statusBreakdown:[{status:"Active",count:142,percentage:91},{status:"Expired",count:8,percentage:5},{status:"Cancelled",count:4,percentage:3},{status:"Suspended",count:2,percentage:1}],monthlyTrends:[{month:"Jan",memberships:145,revenue:14500},{month:"Feb",memberships:148,revenue:14800},{month:"Mar",memberships:152,revenue:15200},{month:"Apr",memberships:156,revenue:15680}],benefitsUsage:[{benefit:"Free Inspections",used:89,available:200,percentage:44.5},{benefit:"Priority Booking",used:156,available:300,percentage:52},{benefit:"Roadside Assistance",used:12,available:50,percentage:24},{benefit:"Concierge Service",used:23,available:100,percentage:23}]})}catch(g){console.error("Error loading analytics data:",g)}finally{i(!1)}},d=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g),u=g=>new Intl.NumberFormat("en-US").format(g),m=g=>g>=0?e.jsx(Ve,{className:"w-4 h-4 text-green-600"}):e.jsx(Em,{className:"w-4 h-4 text-red-600"}),h=g=>g>=0?"text-green-600":"text-red-600",y=g=>{switch(g.toLowerCase()){case"active":return"text-green-600 bg-green-100";case"expired":return"text-red-600 bg-red-100";case"cancelled":return"text-gray-600 bg-gray-100";case"suspended":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};return n?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Membership Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive insights into your membership performance"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:l,onChange:g=>o(g.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Memberships"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u(a.totalMemberships)})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Gr,{className:"w-6 h-6 text-blue-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[m(a.monthlyGrowth),e.jsxs("span",{className:`text-sm font-medium ${h(a.monthlyGrowth)}`,children:[a.monthlyGrowth>0?"+":"",a.monthlyGrowth,"%"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"vs last month"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Memberships"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u(a.activeMemberships)})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-6 h-6 text-green-600"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Active Rate"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[Math.round(a.activeMemberships/a.totalMemberships*100),"%"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${a.activeMemberships/a.totalMemberships*100}%`}})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(a.totalRevenue)})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg: ",d(a.totalRevenue/a.totalMemberships)," per membership"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Expiring Soon"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u(a.expiringSoon)})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(ot,{className:"w-6 h-6 text-orange-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Next 30 days"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Membership Plans"}),e.jsx(Qs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:a.topPlans.map((g,j)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:j+1})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[u(g.count)," members"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d(g.revenue)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[g.percentage,"%"]})]})]},j))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Status Breakdown"}),e.jsx(Dm,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:a.statusBreakdown.map((g,j)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${y(g.status)}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:g.status})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u(g.count)}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",g.percentage,"%)"]})]})]},j))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Trends"}),e.jsx(Hi,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Membership Growth"}),e.jsx("div",{className:"space-y-3",children:a.monthlyTrends.map((g,j)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:g.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u(g.memberships)}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${g.memberships/Math.max(...a.monthlyTrends.map(v=>v.memberships))*100}%`}})})]})]},j))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Revenue Trends"}),e.jsx("div",{className:"space-y-3",children:a.monthlyTrends.map((g,j)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:g.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:d(g.revenue)}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${g.revenue/Math.max(...a.monthlyTrends.map(v=>v.revenue))*100}%`}})})]})]},j))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Benefits Usage"}),e.jsx(ts,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.benefitsUsage.map((g,j)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.benefit}),e.jsxs("span",{className:"text-sm text-gray-500",children:[g.used,"/",g.available]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${g.percentage}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[u(g.used)," used"]}),e.jsxs("span",{children:[g.percentage,"% utilization"]})]})]},j))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Strong Growth"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Membership growth is up ",a.monthlyGrowth,"% this month, indicating strong customer retention."]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Me,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Revenue Optimization"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Premium and VIP plans generate ",Math.round((a.topPlans[0].revenue+a.topPlans[1].revenue)/a.totalRevenue*100),"% of total revenue."]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ot,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Renewal Opportunity"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.expiringSoon," memberships expiring soon - consider proactive renewal campaigns."]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Hi,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Benefits Utilization"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Priority booking is the most used benefit at ",a.benefitsUsage[1].percentage,"% utilization."]})]})]})]})]})]}):e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{className:"text-gray-600",children:"No analytics data available."})})}function CP({customerId:s,timeRange:t="30d"}){const[a,r]=b.useState(!0),[n,i]=b.useState(t);b.useEffect(()=>{l()},[s,n]);const l=async()=>{try{r(!0),await new Promise(d=>setTimeout(d,1e3))}catch(d){console.error("Error loading warranty analytics data:",d)}finally{r(!1)}},o=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d),c=d=>new Intl.NumberFormat("en-US").format(d);return a?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Warranty Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Warranty performance insights and metrics"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Warranties"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"89"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(qe,{className:"w-6 h-6 text-blue-600"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Active Rate"}),e.jsx("span",{className:"font-medium text-gray-900",children:"85%"})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"85%"}})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Claims"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"23"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-6 h-6 text-green-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"87.5% success rate"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Claim Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o(12450.75)})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg: ",o(541.34)," per claim"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Expiring Soon"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"5"})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(ot,{className:"w-6 h-6 text-orange-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"3 by mileage"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Warranty Types"}),e.jsx(Qs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:[{type:"Extended Warranty",count:34,claims:12,amount:6800,percentage:38},{type:"Powertrain Warranty",count:28,claims:8,amount:4200,percentage:31},{type:"Bumper to Bumper",count:18,claims:2,amount:1200,percentage:20},{type:"Manufacturer Warranty",count:9,claims:1,amount:250.75,percentage:11}].map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:u+1})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.type}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c(d.count)," warranties"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:o(d.amount)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[d.claims," claims"]})]})]},u))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Claims Trends"}),e.jsx(Hi,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Claims Volume"}),e.jsx("div",{className:"space-y-3",children:[{month:"Jan",claims:3,amount:1800},{month:"Feb",claims:5,amount:2800},{month:"Mar",claims:4,amount:2200},{month:"Apr",claims:6,amount:3200},{month:"May",claims:5,amount:2450.75}].map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:d.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:c(d.claims)}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${d.claims/6*100}%`}})})]})]},u))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Claim Amounts"}),e.jsx("div",{className:"space-y-3",children:[{month:"Jan",claims:3,amount:1800},{month:"Feb",claims:5,amount:2800},{month:"Mar",claims:4,amount:2200},{month:"Apr",claims:6,amount:3200},{month:"May",claims:5,amount:2450.75}].map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:d.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:o(d.amount)}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${d.amount/3200*100}%`}})})]})]},u))})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ke,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"High Success Rate"}),e.jsx("p",{className:"text-sm text-gray-600",children:"87.5% claim success rate indicates excellent warranty coverage and service quality."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Me,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Cost Management"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Average claim amount of ",o(541.34)," shows effective cost control."]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ot,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Renewal Opportunities"}),e.jsx("p",{className:"text-sm text-gray-600",children:"5 warranties expiring soon - focus on retention strategies."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Coverage Optimization"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Extended and powertrain warranties represent 69% of total warranties."})]})]})]})]})]})}function kP({customerId:s,timeRange:t="30d"}){const[a,r]=b.useState(!0),[n,i]=b.useState(t);b.useEffect(()=>{l()},[s,n]);const l=async()=>{try{r(!0),await new Promise(d=>setTimeout(d,1e3))}catch(d){console.error("Error loading LTV analytics data:",d)}finally{r(!1)}},o=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d),c=d=>new Intl.NumberFormat("en-US").format(d);return a?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer LTV Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Customer lifetime value and retention insights"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average LTV"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o(2847.5)})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-blue-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"+12.5%"}),e.jsx("span",{className:"text-sm text-gray-500",children:"vs last month"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customer Retention"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"87.3%"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(nt,{className:"w-6 h-6 text-green-600"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Retention Rate"}),e.jsx("span",{className:"font-medium text-gray-900",children:"87.3%"})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"87.3%"}})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Repeat Purchase Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"73.8%"})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Wl,{className:"w-6 h-6 text-purple-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"+8.2%"}),e.jsx("span",{className:"text-sm text-gray-500",children:"vs last month"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"VIP Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"156"})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(Gr,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"15.6% of total customers"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Segments by LTV"}),e.jsx(Qs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:[{segment:"VIP Customers",count:156,avgLTV:5847.5,percentage:15.6,color:"bg-yellow-500"},{segment:"Premium Customers",count:234,avgLTV:3247.3,percentage:23.4,color:"bg-blue-500"},{segment:"Regular Customers",count:445,avgLTV:1847.8,percentage:44.5,color:"bg-green-500"},{segment:"New Customers",count:165,avgLTV:847.2,percentage:16.5,color:"bg-gray-500"}].map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 ${d.color} rounded-full`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.segment}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c(d.count)," customers"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:o(d.avgLTV)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[d.percentage,"%"]})]})]},u))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"LTV Trends"}),e.jsx(Hi,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Monthly LTV Growth"}),e.jsx("div",{className:"space-y-3",children:[{month:"Jan",ltv:2650,growth:5.2},{month:"Feb",ltv:2720,growth:2.6},{month:"Mar",ltv:2810,growth:3.3},{month:"Apr",ltv:2890,growth:2.8},{month:"May",ltv:2847,growth:-1.5}].map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:d.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:o(d.ltv)}),e.jsxs("div",{className:"flex items-center space-x-1",children:[d.growth>=0?e.jsx(Ve,{className:"w-3 h-3 text-green-600"}):e.jsx(Em,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:`text-xs font-medium ${d.growth>=0?"text-green-600":"text-red-600"}`,children:[d.growth>0?"+":"",d.growth,"%"]})]})]})]},u))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Retention Trends"}),e.jsx("div",{className:"space-y-3",children:[{month:"Jan",retention:85.2,churn:14.8},{month:"Feb",retention:86.1,churn:13.9},{month:"Mar",retention:87.8,churn:12.2},{month:"Apr",retention:88.3,churn:11.7},{month:"May",retention:87.3,churn:12.7}].map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:d.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[d.retention,"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${d.retention}%`}})})]})]},u))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Acquisition Channels"}),e.jsx(Wl,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:[{channel:"Referrals",customers:234,avgLTV:3247,percentage:23.4},{channel:"Online Ads",customers:189,avgLTV:2847,percentage:18.9},{channel:"Direct Traffic",customers:156,avgLTV:2647,percentage:15.6},{channel:"Social Media",customers:145,avgLTV:2447,percentage:14.5},{channel:"Other",customers:276,avgLTV:2247,percentage:27.6}].map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:u+1})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.channel}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c(d.customers)," customers"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:o(d.avgLTV)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[d.percentage,"%"]})]})]},u))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Lifetime Stages"}),e.jsx(vt,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:[{stage:"New Customer",count:165,avgLTV:847,duration:"0-3 months"},{stage:"Growing Customer",count:234,avgLTV:1847,duration:"3-12 months"},{stage:"Established Customer",count:445,avgLTV:3247,duration:"1-3 years"},{stage:"Loyal Customer",count:156,avgLTV:5847,duration:"3+ years"}].map((d,u)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:d.stage}),e.jsx("span",{className:"text-sm text-gray-500",children:o(d.avgLTV)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${d.count/1e3*100}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[c(d.count)," customers"]}),e.jsx("span",{children:d.duration})]})]},u))})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Strategic Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ts,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"VIP Customer Focus"}),e.jsx("p",{className:"text-sm text-gray-600",children:"VIP customers represent 15.6% of total customers but generate 32% of total revenue."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Strong Retention"}),e.jsx("p",{className:"text-sm text-gray-600",children:"87.3% retention rate indicates excellent customer satisfaction and loyalty."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Wl,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Referral Opportunity"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Referral customers have the highest LTV at ",o(3247)," - focus on referral programs."]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(v_,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Lifetime Value Growth"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Average LTV increased by 12.5% this month, showing strong value creation."})]})]})]})]})]})}function _P({customerId:s}){const[t,a]=b.useState([]),[r,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState(!1);b.useEffect(()=>{d()},[s]);const d=async()=>{try{n(!0),a([{id:"1",name:"Welcome Series",type:"email",status:"active",targetAudience:"New Customers",trigger:"Account Creation",sentCount:234,openRate:68.5,clickRate:23.4,conversionRate:12.8,createdAt:"2024-01-15T10:00:00Z",lastSent:"2024-01-20T14:30:00Z"},{id:"2",name:"Appointment Reminders",type:"sms",status:"active",targetAudience:"All Customers",trigger:"24h Before Appointment",sentCount:156,openRate:95.2,clickRate:45.8,conversionRate:89.3,createdAt:"2024-01-10T09:00:00Z",lastSent:"2024-01-21T08:15:00Z"},{id:"3",name:"Membership Renewal",type:"email",status:"paused",targetAudience:"Expiring Memberships",trigger:"30 Days Before Expiry",sentCount:45,openRate:72.1,clickRate:18.9,conversionRate:34.2,createdAt:"2024-01-05T11:30:00Z",lastSent:"2024-01-18T16:45:00Z"},{id:"4",name:"Service Promotions",type:"push",status:"draft",targetAudience:"VIP Customers",trigger:"Seasonal Campaign",sentCount:0,openRate:0,clickRate:0,conversionRate:0,createdAt:"2024-01-22T13:20:00Z",scheduledFor:"2024-02-01T10:00:00Z"}])}catch(j){console.error("Error loading campaigns:",j)}finally{n(!1)}},u=j=>{switch(j){case"email":return e.jsx(jt,{className:"w-5 h-5 text-blue-600"});case"sms":return e.jsx(Po,{className:"w-5 h-5 text-green-600"});case"push":return e.jsx(Lr,{className:"w-5 h-5 text-purple-600"});case"in-app":return e.jsx(Wl,{className:"w-5 h-5 text-orange-600"});default:return e.jsx(jt,{className:"w-5 h-5 text-gray-600"})}},m=j=>{switch(j){case"active":return"text-green-600 bg-green-100";case"paused":return"text-yellow-600 bg-yellow-100";case"draft":return"text-gray-600 bg-gray-100";case"completed":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},h=j=>{switch(j){case"active":return e.jsx(Dh,{className:"w-4 h-4"});case"paused":return e.jsx(tv,{className:"w-4 h-4"});case"draft":return e.jsx(Tt,{className:"w-4 h-4"});case"completed":return e.jsx(ke,{className:"w-4 h-4"});default:return e.jsx(vt,{className:"w-4 h-4"})}},y=j=>new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=async(j,v)=>{try{a(x=>x.map(f=>{if(f.id===j)switch(v){case"activate":return{...f,status:"active"};case"pause":return{...f,status:"paused"};default:return f}return f}))}catch(x){console.error("Error updating campaign:",x)}};return r?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Automated Marketing Campaigns"}),e.jsx("p",{className:"text-gray-600",children:"Manage automated customer engagement campaigns"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Campaign"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Campaigns"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(j=>j.status==="active").length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Dh,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:[t.filter(j=>j.status==="active").length," of ",t.length," total"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.reduce((j,v)=>j+v.sentCount,0).toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(jt,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Across all campaigns"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Open Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(t.reduce((j,v)=>j+v.openRate,0)/t.length),"%"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(St,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Industry average: 21.5%"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Conversion"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(t.reduce((j,v)=>j+v.conversionRate,0)/t.length),"%"]})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Ve,{className:"w-6 h-6 text-orange-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Across all campaigns"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Campaigns"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Sent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),e.jsx("div",{className:"text-sm text-gray-500",children:j.targetAudience}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Trigger: ",j.trigger]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[u(j.type),e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:j.type})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(j.status)}`,children:[h(j.status),e.jsx("span",{className:"ml-1 capitalize",children:j.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Sent"}),e.jsx("div",{className:"font-medium",children:j.sentCount.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Open"}),e.jsxs("div",{className:"font-medium",children:[j.openRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Click"}),e.jsxs("div",{className:"font-medium",children:[j.clickRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Convert"}),e.jsxs("div",{className:"font-medium",children:[j.conversionRate,"%"]})]})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.lastSent?y(j.lastSent):"Not sent yet"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>l(j),className:"text-blue-600 hover:text-blue-900",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>l(j),className:"text-gray-600 hover:text-gray-900",children:e.jsx(Tt,{className:"w-4 h-4"})}),j.status==="active"?e.jsx("button",{onClick:()=>g(j.id,"pause"),className:"text-yellow-600 hover:text-yellow-900",children:e.jsx(tv,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>g(j.id,"activate"),className:"text-green-600 hover:text-green-900",children:e.jsx(Dh,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(j.id,"delete"),className:"text-red-600 hover:text-red-900",children:e.jsx(rt,{className:"w-4 h-4"})})]})})]},j.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Campaign Templates"}),e.jsx(Qs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{name:"Welcome Series",description:"3-email sequence for new customers",type:"email",estimatedOpenRate:68,estimatedConversion:15},{name:"Appointment Reminders",description:"SMS reminders before appointments",type:"sms",estimatedOpenRate:95,estimatedConversion:85},{name:"Membership Renewal",description:"Email campaign for expiring memberships",type:"email",estimatedOpenRate:72,estimatedConversion:35},{name:"Service Promotions",description:"Push notifications for special offers",type:"push",estimatedOpenRate:45,estimatedConversion:25},{name:"Feedback Request",description:"Post-service feedback collection",type:"email",estimatedOpenRate:58,estimatedConversion:42},{name:"Birthday Wishes",description:"Personalized birthday messages",type:"email",estimatedOpenRate:78,estimatedConversion:18}].map((j,v)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[u(j.type),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:j.name}),e.jsx("p",{className:"text-xs text-gray-500",children:j.description})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[e.jsxs("span",{children:["Est. Open Rate: ",j.estimatedOpenRate,"%"]}),e.jsxs("span",{children:["Est. Conversion: ",j.estimatedConversion,"%"]})]}),e.jsx("button",{className:"w-full bg-blue-50 text-blue-600 text-sm py-2 rounded-md hover:bg-blue-100 transition-colors",children:"Use Template"})]},v))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"High Engagement"}),e.jsx("p",{className:"text-sm text-gray-600",children:"SMS campaigns show 95% open rate and 89% conversion rate - excellent for urgent communications."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Wl,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Targeted Success"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Welcome series achieves 68% open rate with 12.8% conversion - strong onboarding performance."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ot,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Optimization Opportunity"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Membership renewal campaign paused - consider A/B testing to improve conversion rates."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Xt,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Automation Benefits"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automated campaigns save 15+ hours weekly and maintain consistent customer communication."})]})]})]})]})]})}function AP({customerId:s,amount:t,onSelectOption:a}){const[r,n]=b.useState([]),[i,l]=b.useState(!0),[o,c]=b.useState(null),[d,u]=b.useState({}),[m,h]=b.useState(null);b.useEffect(()=>{y()},[s,t]);const y=async()=>{try{l(!0),n([{id:"1",name:"Credit Card Payment",type:"credit_card",description:"Pay with your credit card for immediate processing",minAmount:0,maxAmount:1e4,processingFee:2.9,approvalTime:"Instant",requirements:["Valid credit card","Sufficient credit limit"],benefits:["Immediate processing","Rewards points","Purchase protection"],status:"available"},{id:"2",name:"6-Month Financing",type:"financing",description:"Spread your payment over 6 months with 0% APR",interestRate:0,termLength:6,minAmount:500,maxAmount:5e3,approvalTime:"2-3 business days",requirements:["Credit check","Income verification","Good credit score"],benefits:["0% APR","No hidden fees","Flexible payments"],status:"available"},{id:"3",name:"12-Month Financing",type:"financing",description:"Extended financing with competitive rates",interestRate:8.99,termLength:12,minAmount:1e3,maxAmount:1e4,approvalTime:"1-2 business days",requirements:["Credit check","Income verification"],benefits:["Lower monthly payments","Competitive rates","Quick approval"],status:"available"},{id:"4",name:"Pay in 4 Installments",type:"installment",description:"Split your payment into 4 equal installments",minAmount:50,maxAmount:2e3,processingFee:0,approvalTime:"Instant",requirements:["Valid payment method","No credit check"],benefits:["No interest","No credit check","Instant approval"],status:"available"},{id:"5",name:"30-Day Pay Later",type:"pay_later",description:"Pay within 30 days with no interest",minAmount:100,maxAmount:3e3,approvalTime:"Instant",requirements:["Valid payment method","Good payment history"],benefits:["No interest if paid on time","Flexible payment date","No credit impact"],status:"available"}])}catch(N){console.error("Error loading payment options:",N)}finally{l(!1)}},g=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N),j=(N,w,S)=>{if(w===0)return N/S;const C=w/100/12;return N*C*Math.pow(1+C,S)/(Math.pow(1+C,S)-1)},v=N=>{switch(N){case"credit_card":return e.jsx(ma,{className:"w-6 h-6 text-blue-600"});case"financing":return e.jsx(Me,{className:"w-6 h-6 text-green-600"});case"installment":return e.jsx(be,{className:"w-6 h-6 text-purple-600"});case"pay_later":return e.jsx(vt,{className:"w-6 h-6 text-orange-600"});default:return e.jsx(ma,{className:"w-6 h-6 text-gray-600"})}},x=N=>{switch(N){case"available":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"unavailable":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},f=N=>{u(w=>({...w,[N]:!w[N]}))},p=N=>{c(N.id),a&&a(N)};return i?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Options"}),e.jsx("p",{className:"text-gray-600",children:"Choose the payment method that works best for you"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(t)})]})]}),e.jsx("div",{className:"space-y-4",children:r.map(N=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:v(N.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.name}),e.jsx("p",{className:"text-sm text-gray-600",children:N.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(N.status)}`,children:N.status==="available"?"Available":N.status}),e.jsx("button",{onClick:()=>f(N.id),className:"text-gray-400 hover:text-gray-600",children:d[N.id]?e.jsx(L_,{className:"w-5 h-5"}):e.jsx(w1,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[N.interestRate!==void 0&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Interest Rate"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.interestRate===0?"0%":`${N.interestRate}%`})]}),N.termLength&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Term Length"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[N.termLength," months"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Approval Time"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.approvalTime})]}),N.processingFee!==void 0&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Processing Fee"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.processingFee===0?"Free":`${N.processingFee}%`})]})]}),N.type==="financing"&&N.interestRate!==void 0&&N.termLength&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Monthly Payment"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:g(j(t,N.interestRate,N.termLength))})]}),e.jsxs("button",{onClick:()=>h(m===N.id?null:N.id),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700",children:[e.jsx(N1,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Calculate"})]})]}),m===N.id&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Principal"}),e.jsx("p",{className:"font-medium",children:g(t)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Interest"}),e.jsx("p",{className:"font-medium",children:g(j(t,N.interestRate,N.termLength)*N.termLength-t)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total"}),e.jsx("p",{className:"font-medium",children:g(j(t,N.interestRate,N.termLength)*N.termLength)})]})]})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>p(N),disabled:N.status!=="available",className:`px-6 py-2 rounded-lg font-medium transition-colors ${o===N.id?"bg-blue-600 text-white":N.status==="available"?"bg-blue-50 text-blue-600 hover:bg-blue-100":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:o===N.id?"Selected":"Choose Option"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Secure Payment"})]})]})]}),d[N.id]&&e.jsx("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Requirements"}),e.jsx("ul",{className:"space-y-2",children:N.requirements.map((w,S)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:w})]},S))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Benefits"}),e.jsx("ul",{className:"space-y-2",children:N.benefits.map((w,S)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:w})]},S))})]})]})})]},N.id))}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Security"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I1,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"SSL Encrypted"}),e.jsx("p",{className:"text-xs text-gray-600",children:"All transactions are secure"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"PCI Compliant"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Industry standard security"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Fraud Protection"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Advanced fraud detection"})]})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(D1,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Important Information"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-yellow-800",children:[e.jsx("li",{children:"• All financing options require credit approval"}),e.jsx("li",{children:"• Late payments may result in additional fees"}),e.jsx("li",{children:"• Terms and conditions apply to all payment options"}),e.jsx("li",{children:"• Contact customer service for questions about payment options"})]})]})]})}),o&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Selected Payment Option"}),(()=>{const N=r.find(w=>w.id===o);return N?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[v(N.type),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:N.name}),e.jsx("p",{className:"text-sm text-blue-700",children:N.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-blue-600",children:"Total Amount"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:g(t)})]})]}):null})()]})]})}function TP({customerId:s}){const[t,a]=b.useState([]),[r,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState(""),[d,u]=b.useState("all");b.useEffect(()=>{m()},[s]);const m=async()=>{try{n(!0),a([{id:"1",make:"Honda",model:"Civic",year:2020,vin:"1HGBH41JXMN109186",licensePlate:"ABC123",mileage:45e3,color:"Blue",lastServiceDate:"2024-01-15",nextServiceDate:"2024-04-15",estimatedValue:18500,status:"active",serviceHistory:[{id:"1",date:"2024-01-15",serviceType:"Oil Change",description:"Synthetic oil change and filter replacement",cost:45,mileage:45e3},{id:"2",date:"2023-10-20",serviceType:"Brake Service",description:"Front brake pad replacement",cost:285,mileage:42e3}]},{id:"2",make:"Toyota",model:"Camry",year:2018,vin:"4T1B11HK5JU123456",licensePlate:"XYZ789",mileage:78e3,color:"Silver",lastServiceDate:"2024-01-10",nextServiceDate:"2024-03-10",estimatedValue:16500,status:"maintenance",serviceHistory:[{id:"3",date:"2024-01-10",serviceType:"Timing Belt",description:"Timing belt replacement",cost:650,mileage:78e3}]}])}catch(x){console.error("Error loading vehicles:",x)}finally{n(!1)}},h=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),y=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=x=>{switch(x){case"active":return"text-green-600 bg-green-100";case"maintenance":return"text-yellow-600 bg-yellow-100";case"inactive":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},j=t.filter(x=>{const f=x.make.toLowerCase().includes(o.toLowerCase())||x.model.toLowerCase().includes(o.toLowerCase())||x.licensePlate.toLowerCase().includes(o.toLowerCase()),p=d==="all"||x.status===d;return f&&p}),v=x=>x.serviceHistory.reduce((f,p)=>f+p.cost,0);return r?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vehicle Database"}),e.jsx("p",{className:"text-gray-600",children:"Manage your vehicle fleet and maintenance schedules"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Vehicle"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Fe,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:[t.filter(x=>x.status==="active").length," active"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h(t.reduce((x,f)=>x+f.estimatedValue,0))})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Average: ",h(t.reduce((x,f)=>x+f.estimatedValue,0)/t.length)]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Mileage"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.reduce((x,f)=>x+f.mileage,0).toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Gn,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Average: ",Math.round(t.reduce((x,f)=>x+f.mileage,0)/t.length).toLocaleString()," miles"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Service Cost"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h(t.reduce((x,f)=>x+v(f),0))})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(it,{className:"w-6 h-6 text-orange-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Across all vehicles"})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search vehicles by make, model, or license plate...",value:o,onChange:x=>c(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:d,onChange:x=>u(x.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),e.jsx("div",{className:"space-y-4",children:j.map(x=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:e.jsx(Fe,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[x.year," ",x.make," ",x.model]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[x.licensePlate," • ",x.color," • ",x.mileage.toLocaleString()," miles"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["VIN: ",x.vin]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g(x.status)}`,children:x.status}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Value"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:h(x.estimatedValue)})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Service"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y(x.lastServiceDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Service"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y(x.nextServiceDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Service Count"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.serviceHistory.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Service Cost"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:h(v(x))})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>l(x),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:[e.jsx(St,{className:"w-4 h-4 inline mr-1"}),"View Details"]}),e.jsxs("button",{className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:[e.jsx(Tt,{className:"w-4 h-4 inline mr-1"}),"Edit"]}),e.jsxs("button",{className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:[e.jsx(lt,{className:"w-4 h-4 inline mr-1"}),"Service History"]})]}),e.jsxs("button",{className:"text-red-600 hover:text-red-700 text-sm font-medium",children:[e.jsx(rt,{className:"w-4 h-4 inline mr-1"}),"Remove"]})]})]})},x.id))}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Cost Analysis"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(x=>e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:[x.year," ",x.make," ",x.model]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Service Cost"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h(v(x))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Service Count"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.serviceHistory.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Cost per Service"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h(v(x)/x.serviceHistory.length)})]})]})]},x.id))})]})]})}function PP({customerId:s,onClose:t}){const[a,r]=b.useState([]),[n,i]=b.useState(""),[l,o]=b.useState(null),[c,d]=b.useState(!1),[u,m]=b.useState("connecting"),[h,y]=b.useState(!1),[g,j]=b.useState(!1);b.useState(!1);const[v,x]=b.useState(!1),f=b.useRef(null);b.useEffect(()=>{p(),N()},[]),b.useEffect(()=>{N()},[a]);const p=async()=>{try{setTimeout(()=>{m("connected"),o({id:"1",name:"Sarah Johnson",avatar:"/avatars/agent1.jpg",status:"online",department:"Technical Support",rating:4.8}),w({id:"1",sender:"system",content:"Welcome! You are now connected to our support team.",timestamp:new Date().toISOString(),type:"text",status:"read"})},2e3)}catch(D){console.error("Error initializing chat:",D),m("disconnected")}},N=()=>{var D;(D=f.current)==null||D.scrollIntoView({behavior:"smooth"})},w=D=>{r(R=>[...R,D])},S=()=>{if(!n.trim())return;const D={id:Date.now().toString(),sender:"customer",content:n,timestamp:new Date().toISOString(),type:"text",status:"sent"};w(D),i(""),d(!1),setTimeout(()=>{d(!0),setTimeout(()=>{const R={id:(Date.now()+1).toString(),sender:"agent",content:"Thank you for your message. I'm here to help you with any questions or concerns you may have.",timestamp:new Date().toISOString(),type:"text",status:"read"};w(R),d(!1)},2e3)},1e3)},C=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),S())},T=D=>new Date(D).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),_=D=>{switch(D){case"online":return"text-green-600";case"busy":return"text-yellow-600";case"offline":return"text-red-600";default:return"text-gray-600"}},F=D=>{switch(D){case"sent":return e.jsx(vt,{className:"w-3 h-3 text-gray-400"});case"delivered":return e.jsx(ke,{className:"w-3 h-3 text-blue-500"});case"read":return e.jsx(ke,{className:"w-3 h-3 text-green-500"});default:return null}};return h?e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Live Chat"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_A,{className:"w-4 h-4"})})]})})}):e.jsxs("div",{className:"fixed bottom-4 right-4 w-96 h-[500px] bg-white rounded-lg shadow-xl border border-gray-200 z-50 flex flex-col",children:[e.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Live Support"}),e.jsx("p",{className:"text-sm text-blue-100",children:u==="connected"?"Connected":u==="connecting"?"Connecting...":"Disconnected"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>y(!0),className:"text-blue-100 hover:text-white",children:e.jsx($A,{className:"w-4 h-4"})}),t&&e.jsx("button",{onClick:t,className:"text-blue-100 hover:text-white",children:"×"})]})]}),l&&e.jsxs("div",{className:"mt-3 flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Vt,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:l.name}),e.jsx("p",{className:"text-xs text-blue-100",children:l.department})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${_(l.status)}`}),e.jsx("span",{className:"text-xs",children:l.status})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[a.map(D=>e.jsx("div",{className:`flex ${D.sender==="customer"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs px-3 py-2 rounded-lg ${D.sender==="customer"?"bg-blue-600 text-white":D.sender==="system"?"bg-gray-100 text-gray-700":"bg-gray-200 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:D.content}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-xs opacity-70",children:T(D.timestamp)}),D.sender==="customer"&&e.jsx("div",{className:"ml-2",children:F(D.status)})]})]})},D.id)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-200 text-gray-900 px-3 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm",children:"Agent is typing"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full animate-bounce"}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e.jsx("div",{ref:f})]}),e.jsxs("div",{className:"border-t border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>x(!v),className:"text-gray-400 hover:text-gray-600",children:e.jsx(hT,{className:"w-5 h-5"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(HA,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:n,onChange:D=>i(D.target.value),onKeyPress:C,placeholder:"Type your message...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:1})}),e.jsx("button",{onClick:S,disabled:!n.trim(),className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(ec,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(kt,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(AT,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(!g),className:`${g?"text-red-500":"text-gray-400"} hover:text-gray-600`,children:g?e.jsx(RA,{className:"w-4 h-4"}):e.jsx(OA,{className:"w-4 h-4"})})]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(Xt,{className:"w-4 h-4"})})]})]})]})}function DP({customerId:s}){const[t,a]=b.useState([]),[r,n]=b.useState(!0),[i,l]=b.useState(""),[o,c]=b.useState("all");b.useEffect(()=>{d()},[s]);const d=async()=>{try{n(!0),a([{id:"1",name:"Monthly Financial Summary",type:"financial",description:"Comprehensive financial overview including revenue, expenses, and profit margins",lastGenerated:"2024-01-31T10:00:00Z",nextScheduled:"2024-02-29T10:00:00Z",status:"active",format:"pdf",data:{revenue:125e3,expenses:85e3,profit:4e4}},{id:"2",name:"Customer Service Analytics",type:"customer",description:"Customer satisfaction scores and service quality metrics",lastGenerated:"2024-01-30T15:30:00Z",status:"active",format:"excel",data:{satisfaction:4.8,responseTime:"2.3 hours",resolutionRate:94.2}},{id:"3",name:"Vehicle Maintenance Report",type:"vehicle",description:"Vehicle fleet status and maintenance schedules",lastGenerated:"2024-01-29T09:15:00Z",nextScheduled:"2024-02-28T09:15:00Z",status:"active",format:"csv",data:{totalVehicles:45,maintenanceDue:8,avgServiceCost:285}}])}catch(x){console.error("Error loading reports:",x)}finally{n(!1)}},u=async x=>{console.log(`Generating report: ${x}`)},m=async(x,f)=>{console.log(`Exporting report ${x.id} in ${f} format`)},h=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),y=x=>{switch(x){case"financial":return e.jsx(Me,{className:"w-4 h-4"});case"customer":return e.jsx(nt,{className:"w-4 h-4"});case"vehicle":return e.jsx(Fe,{className:"w-4 h-4"});case"service":return e.jsx(it,{className:"w-4 h-4"});default:return e.jsx(Qs,{className:"w-4 h-4"})}},g=x=>{switch(x){case"pdf":return e.jsx(aA,{className:"w-4 h-4"});case"excel":return e.jsx(eA,{className:"w-4 h-4"});case"csv":return e.jsx(lt,{className:"w-4 h-4"});default:return e.jsx(S1,{className:"w-4 h-4"})}},j=x=>{switch(x){case"active":return"text-green-600 bg-green-100";case"paused":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},v=t.filter(x=>{const f=x.name.toLowerCase().includes(i.toLowerCase()),p=o==="all"||x.type===o;return f&&p});return r?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Advanced Reporting & Export"}),e.jsx("p",{className:"text-gray-600",children:"Generate comprehensive reports and export data"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Report"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search reports...",value:i,onChange:x=>l(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:o,onChange:x=>c(x.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"financial",children:"Financial"}),e.jsx("option",{value:"customer",children:"Customer"}),e.jsx("option",{value:"vehicle",children:"Vehicle"}),e.jsx("option",{value:"service",children:"Service"})]})]})}),e.jsx("div",{className:"space-y-4",children:v.map(x=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:y(x.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Last: ",h(x.lastGenerated)]}),x.nextScheduled&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Next: ",h(x.nextScheduled)]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${j(x.status)}`,children:x.status})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>u(x.id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:[e.jsx(Ea,{className:"w-4 h-4 inline mr-1"}),"Generate"]}),e.jsxs("button",{onClick:()=>m(x,x.format),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:[e.jsx(ns,{className:"w-4 h-4 inline mr-1"}),"Export"]}),e.jsxs("button",{className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:[e.jsx(St,{className:"w-4 h-4 inline mr-1"}),"View"]})]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(x.data).map(([f,p])=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:f}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:typeof p=="number"&&(f.includes("revenue")||f.includes("cost")||f.includes("profit"))?`$${p.toLocaleString()}`:typeof p=="number"&&(f.includes("rate")||f.includes("satisfaction"))?`${p}%`:String(p)})]},f))}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Export as:"}),["pdf","excel","csv","json"].map(f=>e.jsxs("button",{onClick:()=>m(x,f),className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-900",children:[g(f),e.jsx("span",{className:"uppercase",children:f})]},f))]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:[e.jsx(Mm,{className:"w-4 h-4 inline mr-1"}),"Share"]}),e.jsxs("button",{className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:[e.jsx(jt,{className:"w-4 h-4 inline mr-1"}),"Email"]}),e.jsxs("button",{className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:[e.jsx(R1,{className:"w-4 h-4 inline mr-1"}),"Print"]})]})]})]})},x.id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(lt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Reports"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(x=>x.status==="active").length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(x=>x.nextScheduled).length})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(be,{className:"w-6 h-6 text-purple-600"})})]})})]})]})}function MP({}){const{customerId:s}=Sw(),[t,a]=b.useState("overview"),[r,n]=b.useState(!1),[i,l]=b.useState(null),[o,c]=b.useState(!0);b.useEffect(()=>{d()},[s]);const d=async()=>{try{c(!0),l({id:s,name:"John Smith",email:"john.smith@email.com",phone:"+1 (555) 123-4567",joinDate:"2023-01-15",totalSpent:8500,vehicles:2,appointments:12,memberships:[{id:"1",planName:"Premium Membership",status:"active",startDate:"2024-01-01",endDate:"2024-12-31",monthlyFee:49.99,benefitsUsed:8,totalBenefits:12}],warranties:[{id:"1",vehicleId:"1",vehicleMake:"Honda",vehicleModel:"Civic",type:"Extended Warranty",status:"active",startDate:"2023-06-01",endDate:"2026-06-01",coverage:"Comprehensive",deductible:100}]})}catch(h){console.error("Error loading customer data:",h)}finally{c(!1)}},u=[{id:"overview",label:"Overview",icon:St},{id:"memberships",label:"Memberships",icon:Gr},{id:"warranties",label:"Warranties",icon:qe},{id:"vehicles",label:"Vehicles",icon:Fe},{id:"analytics",label:"Analytics",icon:Qs},{id:"marketing",label:"Marketing",icon:Ve},{id:"payments",label:"Payments",icon:Me},{id:"reports",label:"Reports",icon:ns},{id:"notifications",label:"Notifications",icon:Lr},{id:"settings",label:"Settings",icon:Xt}],m=()=>{if(!i)return null;switch(t){case"overview":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",i.totalSpent.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.vehicles})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Fe,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.appointments})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(be,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Memberships"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.memberships.length})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Gr,{className:"w-6 h-6 text-orange-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Oil change completed on Honda Civic"}),e.jsx("span",{className:"text-xs text-gray-400",children:"2 hours ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Premium membership renewed"}),e.jsx("span",{className:"text-xs text-gray-400",children:"1 day ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Appointment scheduled for brake service"}),e.jsx("span",{className:"text-xs text-gray-400",children:"3 days ago"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("button",{className:"bg-blue-600 text-white p-6 rounded-xl hover:bg-blue-700 transition-colors",children:[e.jsx(be,{className:"w-8 h-8 mb-3"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Schedule Appointment"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Book your next service"})]}),e.jsxs("button",{className:"bg-green-600 text-white p-6 rounded-xl hover:bg-green-700 transition-colors",children:[e.jsx(qe,{className:"w-8 h-8 mb-3"}),e.jsx("h3",{className:"font-semibold mb-2",children:"File Warranty Claim"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Submit a warranty request"})]}),e.jsxs("button",{className:"bg-purple-600 text-white p-6 rounded-xl hover:bg-purple-700 transition-colors",children:[e.jsx(Po,{className:"w-8 h-8 mb-3"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Contact Support"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Get help from our team"})]})]})]});case"memberships":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Memberships"}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Compare Plans"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.memberships.map(h=>e.jsx(jP,{membership:h,onManage:()=>console.log("Manage membership"),onCancel:()=>console.log("Cancel membership")},h.id))}),e.jsx(V1,{})]});case"warranties":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Warranties"}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Warranty"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.warranties.map(h=>e.jsx(NP,{warranty:h,onViewDetails:()=>console.log("View warranty details"),onUpdateMileage:()=>console.log("Update mileage"),onFileClaim:()=>console.log("File claim")},h.id))})]});case"vehicles":return e.jsx(TP,{customerId:s});case"analytics":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),e.jsx(SP,{customerId:s}),e.jsx(CP,{customerId:s}),e.jsx(kP,{customerId:s})]});case"marketing":return e.jsx(_P,{customerId:s});case"payments":return e.jsx(AP,{customerId:s,amount:500});case"reports":return e.jsx(DP,{customerId:s});case"notifications":return e.jsx(wP,{customerId:s});case"settings":return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Account Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",defaultValue:i==null?void 0:i.name,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",defaultValue:i==null?void 0:i.email,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Communication Preferences"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Email notifications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"SMS notifications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Marketing communications"})]})]})]})]})]});default:return null}};return o?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Customer Portal"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:i==null?void 0:i.name})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:()=>n(!r),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Po,{className:"w-4 h-4"}),e.jsx("span",{children:"Live Chat"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("nav",{className:"flex space-x-8 overflow-x-auto",children:u.map(h=>e.jsxs("button",{onClick:()=>a(h.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap ${t===h.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(h.icon,{className:"w-4 h-4"}),e.jsx("span",{children:h.label})]},h.id))})}),e.jsx("div",{className:"mb-8",children:m()})]}),r&&e.jsx(PP,{customerId:s,onClose:()=>n(!1)})]})}function EP(){const[s,t]=b.useState([]),[a,r]=b.useState(!0),[n,i]=b.useState(!1);b.useState(null);const[l,o]=b.useState(""),[c,d]=b.useState("all");b.useEffect(()=>{u()},[]);const u=async()=>{try{r(!0),t([{id:"1",planName:"Premium Membership",tier:"premium",status:"active",startDate:"2024-01-01",endDate:"2024-12-31",monthlyFee:49.99,benefitsUsed:8,totalBenefits:12,autoRenew:!0,paymentMethod:"Credit Card ****1234",nextBillingDate:"2024-02-01"},{id:"2",planName:"Basic Membership",tier:"basic",status:"expired",startDate:"2023-01-01",endDate:"2023-12-31",monthlyFee:19.99,benefitsUsed:5,totalBenefits:8,autoRenew:!1,paymentMethod:"Credit Card ****5678",nextBillingDate:"2023-12-31"}])}catch(g){console.error("Error loading memberships:",g)}finally{r(!1)}},m=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},h=g=>{switch(g){case"basic":return e.jsx(qe,{className:"w-5 h-5"});case"premium":return e.jsx(ts,{className:"w-5 h-5"});case"elite":return e.jsx(Gr,{className:"w-5 h-5"});default:return e.jsx(qe,{className:"w-5 h-5"})}},y=s.filter(g=>{const j=g.planName.toLowerCase().includes(l.toLowerCase()),v=c==="all"||g.status===c;return j&&v});return a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Memberships"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your service memberships and benefits"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Compare Plans"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(ns,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(qe,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Memberships"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(g=>g.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Cost"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.filter(g=>g.status==="active").reduce((g,j)=>g+j.monthlyFee,0).toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ve,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Benefits Used"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.reduce((g,j)=>g+j.benefitsUsed,0)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(be,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Next Billing"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(g=>g.status==="active").length>0?new Date(s.filter(g=>g.status==="active")[0].nextBillingDate).toLocaleDateString():"N/A"})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search memberships...",value:l,onChange:g=>o(g.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:c,onChange:g=>d(g.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_1,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[y.length," of ",s.length," memberships"]})]})]})}),e.jsx("div",{className:"space-y-4",children:y.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No memberships found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started with a membership plan to unlock exclusive benefits."}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Browse Plans"})]})]}):y.map(g=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:h(g.tier)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:g.planName}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(g.status)}`,children:g.status.charAt(0).toUpperCase()+g.status.slice(1)}),e.jsxs("span",{className:"text-sm text-gray-600",children:["$",g.monthlyFee,"/month"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[g.benefitsUsed,"/",g.totalBenefits," benefits used"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-red-400 hover:text-red-600 transition-colors",children:e.jsx(rt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(g.startDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"End Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(g.endDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Auto Renew:"}),e.jsx("span",{className:"ml-2 font-medium",children:g.autoRenew?e.jsx(Wt,{className:"w-4 h-4 text-green-500 inline"}):e.jsx(Qr,{className:"w-4 h-4 text-red-500 inline"})})]})]})]},g.id))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Compare Membership Plans"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Qr,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx(V1,{onSelectPlan:g=>{console.log("Selected plan:",g),i(!1)}})})]})})]})}function IP(){const[s,t]=b.useState([]),[a,r]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState(""),[u,m]=b.useState("all"),[h,y]=b.useState("all");b.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const N=[{id:"1",name:"Premium Extended Warranty",type:"extended",vehicle:{make:"Toyota",model:"Camry",year:2020,vin:"1HGBH41JXMN109186"},startDate:"2020-03-15",endDate:"2025-03-15",mileageLimit:1e5,currentMileage:45e3,status:"active",coverage:{engine:!0,transmission:!0,electrical:!0,suspension:!0,brakes:!0,cooling:!0,fuel:!0,exhaust:!0,interior:!1,exterior:!1},deductible:100,maxClaimAmount:5e3,totalClaims:2,totalClaimAmount:1200,provider:{name:"AutoShield Warranty Co.",phone:"1-800-WARRANTY",email:"claims@autoshield.com",address:"123 Warranty St, Coverage City, CA 90210"},daysUntilExpiration:365,mileageRemaining:55e3},{id:"2",name:"Manufacturer Warranty",type:"manufacturer",vehicle:{make:"Honda",model:"Civic",year:2022,vin:"2T1BURHE0JC123456"},startDate:"2022-01-10",endDate:"2027-01-10",mileageLimit:6e4,currentMileage:18e3,status:"active",coverage:{engine:!0,transmission:!0,electrical:!0,suspension:!0,brakes:!0,cooling:!0,fuel:!0,exhaust:!0,interior:!0,exterior:!0},deductible:0,maxClaimAmount:1e4,totalClaims:0,totalClaimAmount:0,provider:{name:"Honda Motor Co.",phone:"1-800-HONDA",email:"warranty@honda.com",address:"1919 Torrance Blvd, Torrance, CA 90501"},daysUntilExpiration:1095,mileageRemaining:42e3}],w=[{id:"1",warrantyId:"1",date:"2024-01-15",description:"Engine oil leak repair",amount:800,status:"completed",serviceProvider:"ABC Auto Repair",notes:"Replaced valve cover gasket and oil pan gasket"},{id:"2",warrantyId:"1",date:"2024-02-01",description:"Transmission fluid leak",amount:400,status:"approved",serviceProvider:"ABC Auto Repair",notes:"Replaced transmission pan gasket"}];t(N),r(w)}catch(N){console.error("Error loading warranties:",N)}finally{i(!1)}},j=N=>{switch(N){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";case"suspended":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},v=N=>{switch(N){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"denied":return"bg-red-100 text-red-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},x=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N),f=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),p=s.filter(N=>{const w=N.name.toLowerCase().includes(c.toLowerCase())||N.vehicle.make.toLowerCase().includes(c.toLowerCase())||N.vehicle.model.toLowerCase().includes(c.toLowerCase()),S=u==="all"||N.status===u,C=h==="all"||N.type===h;return w&&S&&C});return n?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Warranties"}),e.jsx("p",{className:"text-gray-600",children:"Manage and track your vehicle warranties and claims"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(qe,{className:"w-4 h-4 mr-1"}),s.filter(N=>N.status==="active").length," Active Warranties"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search warranties...",value:c,onChange:N=>d(N.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 w-full"})]}),e.jsxs("select",{value:u,onChange:N=>m(N.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsxs("select",{value:h,onChange:N=>y(N.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"manufacturer",children:"Manufacturer"}),e.jsx("option",{value:"extended",children:"Extended"}),e.jsx("option",{value:"powertrain",children:"Powertrain"}),e.jsx("option",{value:"bumper_to_bumper",children:"Bumper to Bumper"}),e.jsx("option",{value:"custom",children:"Custom"})]})]})]}),e.jsx("div",{className:"grid gap-6 mb-8",children:p.map(N=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(qe,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.name}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(N.status)}`,children:N.status.charAt(0).toUpperCase()+N.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"w-4 h-4 mr-1"}),N.vehicle.year," ",N.vehicle.make," ",N.vehicle.model]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-1"}),"Expires ",f(N.endDate)]}),N.mileageLimit&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),N.currentMileage.toLocaleString(),"/",N.mileageLimit.toLocaleString()," miles"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>o(N),className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(ns,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Coverage Includes:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:Object.entries(N.coverage).map(([w,S])=>e.jsxs("div",{className:"flex items-center space-x-1",children:[S?e.jsx(ke,{className:"w-4 h-4 text-green-500"}):e.jsx(Ta,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600 capitalize",children:w})]},w))})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.provider.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[N.provider.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(kt,{className:"w-3 h-3 mr-1"}),N.provider.phone]}),N.provider.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(jt,{className:"w-3 h-3 mr-1"}),N.provider.email]})]})]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Deductible"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:x(N.deductible)})]})]})}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Claims History"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[N.totalClaims," claims • ",x(N.totalClaimAmount)," total"]})]}),e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"File Claim"]})]})})]},N.id))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Claims History"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Provider"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(N.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.description}),N.notes&&e.jsx("div",{className:"text-sm text-gray-500",children:N.notes})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x(N.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(N.status)}`,children:N.status.charAt(0).toUpperCase()+N.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.serviceProvider}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(ns,{className:"w-4 h-4"})})]})})]},N.id))})]})})]})]})})}function RP(){const[s,t]=b.useState(null),[a,r]=b.useState(null),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState([]),[u,m]=b.useState(!0),[h,y]=b.useState("1y"),[g,j]=b.useState("all");b.useEffect(()=>{v()},[h,g]);const v=async()=>{try{m(!0);const w={totalServices:45,totalSpent:8750.5,averageServiceCost:194.46,servicesThisYear:12,servicesLastYear:8,yearOverYearChange:50},S={totalVehicles:3,averageAge:4.2,totalMileage:125e3,averageMileage:41667,nextServiceDue:2,overdueServices:1},C=[{month:"Jan",services:3,cost:450,type:"Maintenance"},{month:"Feb",services:2,cost:320,type:"Repair"},{month:"Mar",services:1,cost:180,type:"Inspection"},{month:"Apr",services:2,cost:280,type:"Maintenance"},{month:"May",services:1,cost:150,type:"Repair"},{month:"Jun",services:3,cost:520,type:"Maintenance"}],T=[{type:"Maintenance",count:25,totalCost:4200,percentage:55.6},{type:"Repair",count:12,totalCost:2800,percentage:26.7},{type:"Inspection",count:5,totalCost:750,percentage:11.1},{type:"Emergency",count:3,totalCost:1e3,percentage:6.7}],_=[{vehicle:"2020 Toyota Camry",serviceType:"Oil Change",dueDate:"2024-02-15",estimatedCost:89.99,priority:"medium"},{vehicle:"2018 Honda Civic",serviceType:"Brake Inspection",dueDate:"2024-02-20",estimatedCost:120,priority:"high"},{vehicle:"2020 Toyota Camry",serviceType:"Tire Rotation",dueDate:"2024-03-01",estimatedCost:45,priority:"low"}];t(w),r(S),i(C),o(T),d(_)}catch(w){console.error("Error loading analytics:",w)}finally{m(!1)}},x=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(w),f=w=>w.toLocaleString(),p=w=>{switch(w){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=w=>new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric"});return u?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive insights into your vehicle maintenance and service history"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:h,onChange:w=>y(w.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"3m",children:"Last 3 Months"}),e.jsx("option",{value:"6m",children:"Last 6 Months"}),e.jsx("option",{value:"1y",children:"Last Year"}),e.jsx("option",{value:"2y",children:"Last 2 Years"})]}),e.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(Ea,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(it,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f((s==null?void 0:s.totalServices)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[s!=null&&s.yearOverYearChange&&s.yearOverYearChange>0?e.jsx(Ve,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(Em,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:s!=null&&s.yearOverYearChange&&s.yearOverYearChange>0?"text-green-600":"text-red-600",children:[Math.abs((s==null?void 0:s.yearOverYearChange)||0),"% vs last year"]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Me,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Spent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x((s==null?void 0:s.totalSpent)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg: ",x((s==null?void 0:s.averageServiceCost)||0)]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Fe,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a==null?void 0:a.totalVehicles}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg Age: ",a==null?void 0:a.averageAge," years"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ot,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Due Soon"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a==null?void 0:a.nextServiceDue}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a==null?void 0:a.overdueServices," overdue"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service History"}),e.jsx(Qs,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:n.map((w,S)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 text-sm text-gray-500",children:w.month}),e.jsxs("div",{className:"w-20 text-sm font-medium text-gray-900",children:[w.services," services"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 text-sm text-gray-600",children:x(w.cost)}),e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${w.cost/Math.max(...n.map(C=>C.cost))*100}%`}})})]})]},S))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service Type Breakdown"}),e.jsx(Dm,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:l.map((w,S)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:`hsl(${S*60}, 70%, 60%)`}}),e.jsx("div",{className:"w-24 text-sm font-medium text-gray-900",children:w.type}),e.jsx("div",{className:"w-12 text-sm text-gray-500",children:w.count})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-20 text-sm text-gray-600",children:x(w.totalCost)}),e.jsxs("div",{className:"w-12 text-sm text-gray-500",children:[w.percentage,"%"]})]})]},S))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Maintenance"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:g,onChange:w=>j(w.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Vehicles"}),e.jsx("option",{value:"camry",children:"Toyota Camry"}),e.jsx("option",{value:"civic",children:"Honda Civic"})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(ns,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estimated Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((w,S)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w.vehicle}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.serviceType}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(w.dueDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x(w.estimatedCost)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(w.priority)}`,children:w.priority.charAt(0).toUpperCase()+w.priority.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(be,{className:"w-4 h-4"})})]})})]},S))})]})})]})]})})}function LP(){const[s,t]=b.useState([]),[a,r]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState(""),[u,m]=b.useState("all"),[h,y]=b.useState("all"),[g,j]=b.useState(!1);b.useEffect(()=>{v()},[]);const v=async()=>{try{i(!0);const S=[{id:"1",year:2020,make:"Toyota",model:"Camry",trim:"SE",vin:"1HGBH41JXMN109186",licensePlate:"ABC123",color:"Silver",mileage:45e3,engineType:"2.5L 4-Cylinder",transmission:"8-Speed Automatic",fuelType:"Gasoline",lastServiceDate:"2024-01-15",nextServiceDate:"2024-04-15",lastServiceMileage:44e3,nextServiceMileage:5e4,status:"active",notes:"Primary family vehicle",specifications:{engineSize:"2.5L",horsepower:203,torque:184,fuelCapacity:16,mpgCity:28,mpgHighway:39},maintenanceHistory:[{id:"1",date:"2024-01-15",serviceType:"Oil Change & Inspection",description:"Synthetic oil change, tire rotation, multi-point inspection",technician:"John Smith",mileage:44e3,cost:89.99,nextServiceDate:"2024-04-15",nextServiceMileage:5e4,status:"completed",parts:[{name:"Synthetic Oil",quantity:1,unitPrice:45.99,totalPrice:45.99},{name:"Oil Filter",quantity:1,unitPrice:12.99,totalPrice:12.99}],notes:"Vehicle in excellent condition"}],createdAt:"2020-03-15",updatedAt:"2024-01-15"},{id:"2",year:2018,make:"Honda",model:"Civic",trim:"EX",vin:"2T1BURHE0JC123456",licensePlate:"XYZ789",color:"Blue",mileage:68e3,engineType:"1.5L Turbo 4-Cylinder",transmission:"CVT",fuelType:"Gasoline",lastServiceDate:"2023-12-10",nextServiceDate:"2024-03-10",lastServiceMileage:65e3,nextServiceMileage:7e4,status:"maintenance",notes:"Secondary vehicle, needs brake inspection",specifications:{engineSize:"1.5L Turbo",horsepower:174,torque:162,fuelCapacity:12.4,mpgCity:30,mpgHighway:38},maintenanceHistory:[{id:"2",date:"2023-12-10",serviceType:"Brake Inspection",description:"Brake pad replacement, rotor inspection",technician:"Mike Johnson",mileage:65e3,cost:245.5,nextServiceDate:"2024-03-10",nextServiceMileage:7e4,status:"completed",parts:[{name:"Brake Pads (Front)",quantity:1,unitPrice:89.99,totalPrice:89.99},{name:"Brake Pads (Rear)",quantity:1,unitPrice:79.99,totalPrice:79.99}],notes:"Brakes at 30% remaining, recommend replacement"}],createdAt:"2018-06-20",updatedAt:"2023-12-10"}],C={totalVehicles:2,activeVehicles:1,totalMileage:113e3,averageAge:4.5,totalValue:45e3,upcomingServices:2,overdueServices:1};t(S),r(C)}catch(S){console.error("Error loading vehicles:",S)}finally{i(!1)}},x=S=>{switch(S){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"repair":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(S),p=S=>new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),N=S=>S.toLocaleString(),w=s.filter(S=>{const C=S.make.toLowerCase().includes(c.toLowerCase())||S.model.toLowerCase().includes(c.toLowerCase())||S.licensePlate.toLowerCase().includes(c.toLowerCase())||S.vin.toLowerCase().includes(c.toLowerCase()),T=u==="all"||S.status===u,_=h==="all"||S.make===h;return C&&T&&_});return n?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Vehicle Database"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive fleet management and vehicle tracking"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Add Vehicle"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search vehicles by make, model, plate, or VIN...",value:c,onChange:S=>d(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 w-full"})]}),e.jsxs("select",{value:u,onChange:S=>m(S.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"repair",children:"Repair"})]}),e.jsxs("select",{value:h,onChange:S=>y(S.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Makes"}),e.jsx("option",{value:"Toyota",children:"Toyota"}),e.jsx("option",{value:"Honda",children:"Honda"}),e.jsx("option",{value:"Ford",children:"Ford"}),e.jsx("option",{value:"Chevrolet",children:"Chevrolet"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Fe,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a==null?void 0:a.totalVehicles}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a==null?void 0:a.activeVehicles," active"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Gn,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Mileage"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N((a==null?void 0:a.totalMileage)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg: ",N(Math.round(((a==null?void 0:a.totalMileage)||0)/((a==null?void 0:a.totalVehicles)||1)))]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(be,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Upcoming Services"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a==null?void 0:a.upcomingServices}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a==null?void 0:a.overdueServices," overdue"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Me,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f((a==null?void 0:a.totalValue)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg Age: ",a==null?void 0:a.averageAge," years"]})]})]})})]}),e.jsx("div",{className:"grid gap-6",children:w.map(S=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Fe,{className:"w-6 h-6 text-blue-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[S.year," ",S.make," ",S.model," ",S.trim]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(S.status)}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pa,{className:"w-4 h-4 mr-1"}),S.licensePlate]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gn,{className:"w-4 h-4 mr-1"}),N(S.mileage)," miles"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fuel,{className:"w-4 h-4 mr-1"}),S.fuelType]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xt,{className:"w-4 h-4 mr-1"}),S.engineType]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>o(S),className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600",children:e.jsx(rt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Specifications"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Engine:"}),e.jsx("span",{className:"ml-1 font-medium",children:S.specifications.engineSize})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"HP:"}),e.jsx("span",{className:"ml-1 font-medium",children:S.specifications.horsepower})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"MPG City:"}),e.jsx("span",{className:"ml-1 font-medium",children:S.specifications.mpgCity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"MPG Highway:"}),e.jsx("span",{className:"ml-1 font-medium",children:S.specifications.mpgHighway})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last Service"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.lastServiceDate?p(S.lastServiceDate):"Never"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Next Service"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.nextServiceDate?p(S.nextServiceDate):"Not scheduled"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Service History"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[S.maintenanceHistory.length," records"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(it,{className:"w-4 h-4 mr-2"}),"Schedule Service"]}),e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(lt,{className:"w-4 h-4 mr-2"}),"View History"]})]})]})})]},S.id))})]})})}function OP(){const[s,t]=b.useState([]),[a,r]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState("payment-methods"),[u,m]=b.useState(!1),[h,y]=b.useState(null),[g,j]=b.useState(""),[v,x]=b.useState("all");b.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0);const C=[{id:"1",type:"credit_card",name:"Visa ending in 1234",last4:"1234",expiryDate:"12/25",isDefault:!0,isActive:!0,brand:"Visa"},{id:"2",type:"bank_account",name:"Chase Bank Account",last4:"5678",isDefault:!1,isActive:!0,bankName:"Chase Bank",accountType:"Checking"}],T=[{id:"1",date:"2024-01-15",description:"Oil Change & Inspection",amount:89.99,status:"paid",paymentMethod:"Visa ending in 1234",invoiceNumber:"INV-2024-001",serviceType:"Maintenance"},{id:"2",date:"2024-01-10",description:"Brake Pad Replacement",amount:245.5,status:"paid",paymentMethod:"Chase Bank Account",invoiceNumber:"INV-2024-002",serviceType:"Repair"}],_=[{id:"1",name:"Engine Rebuild Financing",type:"payment_plan",amount:2500,term:12,interestRate:0,monthlyPayment:208.33,totalCost:2500,status:"active",startDate:"2024-01-01",endDate:"2024-12-31",remainingBalance:1500,nextPaymentDate:"2024-02-01"}];t(C),r(T),i(_)}catch(C){console.error("Error loading payment data:",C)}finally{o(!1)}},p=C=>{switch(C){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},N=C=>{switch(C){case"credit_card":case"debit_card":return e.jsx(ma,{className:"w-5 h-5"});case"bank_account":return e.jsx(j_,{className:"w-5 h-5"});case"digital_wallet":return e.jsx(uT,{className:"w-5 h-5"});default:return e.jsx(PT,{className:"w-5 h-5"})}},w=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C),S=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return l?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Options"}),e.jsx("p",{className:"text-gray-600",children:"Manage your payment methods, view billing history, and track financing"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(qe,{className:"w-4 h-4 mr-1"}),"Secure Payments"]})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"payment-methods",name:"Payment Methods",icon:ma},{id:"billing-history",name:"Billing History",icon:lt},{id:"financing",name:"Financing",icon:N1}].map(C=>e.jsxs("button",{onClick:()=>d(C.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${c===C.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(C.icon,{className:"w-4 h-4 mr-2"}),C.name]},C.id))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[c==="payment-methods"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Methods"}),e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Add Payment Method"]})]}),e.jsx("div",{className:"grid gap-4",children:s.map(C=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:N(C.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:C.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[C.type==="credit_card"&&`Expires ${C.expiryDate}`,C.type==="bank_account"&&`${C.bankName} ${C.accountType}`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[C.isDefault&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Default"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>y(C),className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(Tt,{className:"w-4 h-4"})}),!C.isDefault&&e.jsx("button",{className:"p-1 text-gray-400 hover:text-red-600",children:e.jsx(rt,{className:"w-4 h-4"})})]})]})]})},C.id))})]}),c==="billing-history"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Billing History"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:g,onChange:C=>j(C.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("select",{value:v,onChange:C=>x(C.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(C.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.description}),C.invoiceNumber&&e.jsxs("div",{className:"text-sm text-gray-500",children:["#",C.invoiceNumber]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w(C.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(C.status)}`,children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.paymentMethod}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(ns,{className:"w-4 h-4"})})]})})]},C.id))})]})})]}),c==="financing"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Financing Options"}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Apply for Financing"]})]}),e.jsx("div",{className:"grid gap-6",children:n.map(C=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:C.name}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:C.type.replace("_"," ")})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.status==="active"?"bg-green-100 text-green-800":C.status==="completed"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Original Amount"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w(C.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Remaining Balance"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w(C.remainingBalance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Payment"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w(C.monthlyPayment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Next Payment"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:S(C.nextPaymentDate)})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(St,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(ns,{className:"w-4 h-4 mr-2"}),"Download Statement"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Term: ",C.term," months"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Rate: ",C.interestRate,"%"]})]})]})]},C.id))})]})]})]})})}const Ra=Object.create(null);Ra.open="0";Ra.close="1";Ra.ping="2";Ra.pong="3";Ra.message="4";Ra.upgrade="5";Ra.noop="6";const cd=Object.create(null);Object.keys(Ra).forEach(s=>{cd[Ra[s]]=s});const Wp={type:"error",data:"parser error"},H1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",W1=typeof ArrayBuffer=="function",q1=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Ef=({type:s,data:t},a,r)=>H1&&t instanceof Blob?a?r(t):cv(t,r):W1&&(t instanceof ArrayBuffer||q1(t))?a?r(t):cv(new Blob([t]),r):r(Ra[s]+(t||"")),cv=(s,t)=>{const a=new FileReader;return a.onload=function(){const r=a.result.split(",")[1];t("b"+(r||""))},a.readAsDataURL(s)};function dv(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Eh;function FP(s,t){if(H1&&s.data instanceof Blob)return s.data.arrayBuffer().then(dv).then(t);if(W1&&(s.data instanceof ArrayBuffer||q1(s.data)))return t(dv(s.data));Ef(s,!1,a=>{Eh||(Eh=new TextEncoder),t(Eh.encode(a))})}const uv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<uv.length;s++)Tl[uv.charCodeAt(s)]=s;const $P=s=>{let t=s.length*.75,a=s.length,r,n=0,i,l,o,c;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(r=0;r<a;r+=4)i=Tl[s.charCodeAt(r)],l=Tl[s.charCodeAt(r+1)],o=Tl[s.charCodeAt(r+2)],c=Tl[s.charCodeAt(r+3)],u[n++]=i<<2|l>>4,u[n++]=(l&15)<<4|o>>2,u[n++]=(o&3)<<6|c&63;return d},zP=typeof ArrayBuffer=="function",If=(s,t)=>{if(typeof s!="string")return{type:"message",data:Y1(s,t)};const a=s.charAt(0);return a==="b"?{type:"message",data:BP(s.substring(1),t)}:cd[a]?s.length>1?{type:cd[a],data:s.substring(1)}:{type:cd[a]}:Wp},BP=(s,t)=>{if(zP){const a=$P(s);return Y1(a,t)}else return{base64:!0,data:s}},Y1=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},K1=String.fromCharCode(30),UP=(s,t)=>{const a=s.length,r=new Array(a);let n=0;s.forEach((i,l)=>{Ef(i,!1,o=>{r[l]=o,++n===a&&t(r.join(K1))})})},VP=(s,t)=>{const a=s.split(K1),r=[];for(let n=0;n<a.length;n++){const i=If(a[n],t);if(r.push(i),i.type==="error")break}return r};function HP(){return new TransformStream({transform(s,t){FP(s,a=>{const r=a.length;let n;if(r<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r);else if(r<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}s.data&&typeof s.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(a)})}})}let Ih;function Cc(s){return s.reduce((t,a)=>t+a.length,0)}function kc(s,t){if(s[0].length===t)return s.shift();const a=new Uint8Array(t);let r=0;for(let n=0;n<t;n++)a[n]=s[0][r++],r===s[0].length&&(s.shift(),r=0);return s.length&&r<s[0].length&&(s[0]=s[0].slice(r)),a}function WP(s,t){Ih||(Ih=new TextDecoder);const a=[];let r=0,n=-1,i=!1;return new TransformStream({transform(l,o){for(a.push(l);;){if(r===0){if(Cc(a)<1)break;const c=kc(a,1);i=(c[0]&128)===128,n=c[0]&127,n<126?r=3:n===126?r=1:r=2}else if(r===1){if(Cc(a)<2)break;const c=kc(a,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Cc(a)<8)break;const c=kc(a,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,53-32)-1){o.enqueue(Wp);break}n=u*Math.pow(2,32)+d.getUint32(4),r=3}else{if(Cc(a)<n)break;const c=kc(a,n);o.enqueue(If(i?c:Ih.decode(c),t)),r=0}if(n===0||n>s){o.enqueue(Wp);break}}}})}const G1=4;function Pt(s){if(s)return qP(s)}function qP(s){for(var t in Pt.prototype)s[t]=Pt.prototype[t];return s}Pt.prototype.on=Pt.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};Pt.prototype.once=function(s,t){function a(){this.off(s,a),t.apply(this,arguments)}return a.fn=t,this.on(s,a),this};Pt.prototype.off=Pt.prototype.removeListener=Pt.prototype.removeAllListeners=Pt.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+s];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var r,n=0;n<a.length;n++)if(r=a[n],r===t||r.fn===t){a.splice(n,1);break}return a.length===0&&delete this._callbacks["$"+s],this};Pt.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+s],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(a){a=a.slice(0);for(var r=0,n=a.length;r<n;++r)a[r].apply(this,t)}return this};Pt.prototype.emitReserved=Pt.prototype.emit;Pt.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Pt.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Rm=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,a)=>a(t,0))(),Hs=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),YP="arraybuffer";function X1(s,...t){return t.reduce((a,r)=>(s.hasOwnProperty(r)&&(a[r]=s[r]),a),{})}const KP=Hs.setTimeout,GP=Hs.clearTimeout;function Lm(s,t){t.useNativeTimers?(s.setTimeoutFn=KP.bind(Hs),s.clearTimeoutFn=GP.bind(Hs)):(s.setTimeoutFn=Hs.setTimeout.bind(Hs),s.clearTimeoutFn=Hs.clearTimeout.bind(Hs))}const XP=1.33;function QP(s){return typeof s=="string"?JP(s):Math.ceil((s.byteLength||s.size)*XP)}function JP(s){let t=0,a=0;for(let r=0,n=s.length;r<n;r++)t=s.charCodeAt(r),t<128?a+=1:t<2048?a+=2:t<55296||t>=57344?a+=3:(r++,a+=4);return a}function Q1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function ZP(s){let t="";for(let a in s)s.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(s[a]));return t}function eD(s){let t={},a=s.split("&");for(let r=0,n=a.length;r<n;r++){let i=a[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class tD extends Error{constructor(t,a,r){super(t),this.description=a,this.context=r,this.type="TransportError"}}class Rf extends Pt{constructor(t){super(),this.writable=!1,Lm(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,a,r){return super.emitReserved("error",new tD(t,a,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const a=If(t,this.socket.binaryType);this.onPacket(a)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,a={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(a)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const a=ZP(t);return a.length?"?"+a:""}}class sD extends Rf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const a=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||a()})),this.writable||(r++,this.once("drain",function(){--r||a()}))}else a()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const a=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};VP(t,this.socket.binaryType).forEach(a),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,UP(t,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",a=this.query||{};return this.opts.timestampRequests!==!1&&(a[this.opts.timestampParam]=Q1()),!this.supportsBinary&&!a.sid&&(a.b64=1),this.createUri(t,a)}}let J1=!1;try{J1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const aD=J1;function rD(){}class nD extends sD{constructor(t){if(super(t),typeof location<"u"){const a=location.protocol==="https:";let r=location.port;r||(r=a?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,a){const r=this.request({method:"POST",data:t});r.on("success",a),r.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(a,r)=>{this.onError("xhr poll error",a,r)}),this.pollXhr=t}}let Ti=class dd extends Pt{constructor(t,a,r){super(),this.createRequest=t,Lm(this,r),this._opts=r,this._method=r.method||"GET",this._uri=a,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const a=X1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(a);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var n;r.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=dd.requestsCount++,dd.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=rD,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dd.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ti.requestsCount=0;Ti.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",mv);else if(typeof addEventListener=="function"){const s="onpagehide"in Hs?"pagehide":"unload";addEventListener(s,mv,!1)}}function mv(){for(let s in Ti.requests)Ti.requests.hasOwnProperty(s)&&Ti.requests[s].abort()}const iD=function(){const s=Z1({xdomain:!1});return s&&s.responseType!==null}();class lD extends nD{constructor(t){super(t);const a=t&&t.forceBase64;this.supportsBinary=iD&&!a}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ti(Z1,this.uri(),t)}}function Z1(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||aD))return new XMLHttpRequest}catch{}if(!t)try{return new Hs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const e2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class oD extends Rf{get name(){return"websocket"}doOpen(){const t=this.uri(),a=this.opts.protocols,r=e2?{}:X1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,a,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const r=t[a],n=a===t.length-1;Ef(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}n&&Rm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",a=this.query||{};return this.opts.timestampRequests&&(a[this.opts.timestampParam]=Q1()),this.supportsBinary||(a.b64=1),this.createUri(t,a)}}const Rh=Hs.WebSocket||Hs.MozWebSocket;class cD extends oD{createSocket(t,a,r){return e2?new Rh(t,a,r):a?new Rh(t,a):new Rh(t)}doWrite(t,a){this.ws.send(a)}}class dD extends Rf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const a=WP(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(a).getReader(),n=HP();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const i=()=>{r.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const r=t[a],n=a===t.length-1;this._writer.write(r).then(()=>{n&&Rm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const uD={websocket:cD,webtransport:dD,polling:lD},mD=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function qp(s){if(s.length>8e3)throw"URI too long";const t=s,a=s.indexOf("["),r=s.indexOf("]");a!=-1&&r!=-1&&(s=s.substring(0,a)+s.substring(a,r).replace(/:/g,";")+s.substring(r,s.length));let n=mD.exec(s||""),i={},l=14;for(;l--;)i[hD[l]]=n[l]||"";return a!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=xD(i,i.path),i.queryKey=pD(i,i.query),i}function xD(s,t){const a=/\/{2,9}/g,r=t.replace(a,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function pD(s,t){const a={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,i){n&&(a[n]=i)}),a}const Yp=typeof addEventListener=="function"&&typeof removeEventListener=="function",ud=[];Yp&&addEventListener("offline",()=>{ud.forEach(s=>s())},!1);class Fr extends Pt{constructor(t,a){if(super(),this.binaryType=YP,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(a=t,t=null),t){const r=qp(t);a.hostname=r.host,a.secure=r.protocol==="https"||r.protocol==="wss",a.port=r.port,r.query&&(a.query=r.query)}else a.host&&(a.hostname=qp(a.host).host);Lm(this,a),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},a.transports.forEach(r=>{const n=r.prototype.name;this.transports.push(n),this._transportsByName[n]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},a),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=eD(this.opts.query)),Yp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ud.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const a=Object.assign({},this.opts.query);a.EIO=G1,a.transport=t,this.id&&(a.sid=this.id);const r=Object.assign({},this.opts,{query:a,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Fr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const a=this.createTransport(t);a.open(),this.setTransport(a)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",a=>this._onClose("transport close",a))}onOpen(){this.readyState="open",Fr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const a=new Error("server error");a.code=t.data,this._onError(a);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(a+=QP(n)),r>0&&a>this._maxPayload)return this.writeBuffer.slice(0,r);a+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Rm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,a,r){return this._sendPacket("message",t,a,r),this}send(t,a,r){return this._sendPacket("message",t,a,r),this}_sendPacket(t,a,r,n){if(typeof a=="function"&&(n=a,a=void 0),typeof r=="function"&&(n=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:a,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},a=()=>{this.off("upgrade",a),this.off("upgradeError",a),t()},r=()=>{this.once("upgrade",a),this.once("upgradeError",a)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Fr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ud.indexOf(this._offlineEventListener);r!==-1&&ud.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,a),this.writeBuffer=[],this._prevBufferLen=0}}}Fr.protocol=G1;class fD extends Fr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let a=this.createTransport(t),r=!1;Fr.priorWebsocketSuccess=!1;const n=()=>{r||(a.send([{type:"ping",data:"probe"}]),a.once("packet",m=>{if(!r)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",a),!a)return;Fr.priorWebsocketSuccess=a.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(a),a.send([{type:"upgrade"}]),this.emitReserved("upgrade",a),a=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=a.name,this.emitReserved("upgradeError",h)}}))};function i(){r||(r=!0,u(),a.close(),a=null)}const l=m=>{const h=new Error("probe error: "+m);h.transport=a.name,i(),this.emitReserved("upgradeError",h)};function o(){l("transport closed")}function c(){l("socket closed")}function d(m){a&&m.name!==a.name&&i()}const u=()=>{a.removeListener("open",n),a.removeListener("error",l),a.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};a.once("open",n),a.once("error",l),a.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||a.open()},200):a.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const a=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&a.push(t[r]);return a}}let gD=class extends fD{constructor(t,a={}){const r=typeof t=="object"?t:a;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(n=>uD[n]).filter(n=>!!n)),super(t,r)}};function yD(s,t="",a){let r=s;a=a||typeof location<"u"&&location,s==null&&(s=a.protocol+"//"+a.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=a.protocol+s:s=a.host+s),/^(https?|wss?):\/\//.test(s)||(typeof a<"u"?s=a.protocol+"//"+s:s="https://"+s),r=qp(s)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(a&&a.port===r.port?"":":"+r.port),r}const vD=typeof ArrayBuffer=="function",bD=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,t2=Object.prototype.toString,jD=typeof Blob=="function"||typeof Blob<"u"&&t2.call(Blob)==="[object BlobConstructor]",ND=typeof File=="function"||typeof File<"u"&&t2.call(File)==="[object FileConstructor]";function Lf(s){return vD&&(s instanceof ArrayBuffer||bD(s))||jD&&s instanceof Blob||ND&&s instanceof File}function md(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let a=0,r=s.length;a<r;a++)if(md(s[a]))return!0;return!1}if(Lf(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return md(s.toJSON(),!0);for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&md(s[a]))return!0;return!1}function wD(s){const t=[],a=s.data,r=s;return r.data=Kp(a,t),r.attachments=t.length,{packet:r,buffers:t}}function Kp(s,t){if(!s)return s;if(Lf(s)){const a={_placeholder:!0,num:t.length};return t.push(s),a}else if(Array.isArray(s)){const a=new Array(s.length);for(let r=0;r<s.length;r++)a[r]=Kp(s[r],t);return a}else if(typeof s=="object"&&!(s instanceof Date)){const a={};for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=Kp(s[r],t));return a}return s}function SD(s,t){return s.data=Gp(s.data,t),delete s.attachments,s}function Gp(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let a=0;a<s.length;a++)s[a]=Gp(s[a],t);else if(typeof s=="object")for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(s[a]=Gp(s[a],t));return s}const CD=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],kD=5;var Te;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Te||(Te={}));class _D{constructor(t){this.replacer=t}encode(t){return(t.type===Te.EVENT||t.type===Te.ACK)&&md(t)?this.encodeAsBinary({type:t.type===Te.EVENT?Te.BINARY_EVENT:Te.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let a=""+t.type;return(t.type===Te.BINARY_EVENT||t.type===Te.BINARY_ACK)&&(a+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(a+=t.nsp+","),t.id!=null&&(a+=t.id),t.data!=null&&(a+=JSON.stringify(t.data,this.replacer)),a}encodeAsBinary(t){const a=wD(t),r=this.encodeAsString(a.packet),n=a.buffers;return n.unshift(r),n}}function hv(s){return Object.prototype.toString.call(s)==="[object Object]"}class Of extends Pt{constructor(t){super(),this.reviver=t}add(t){let a;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");a=this.decodeString(t);const r=a.type===Te.BINARY_EVENT;r||a.type===Te.BINARY_ACK?(a.type=r?Te.EVENT:Te.ACK,this.reconstructor=new AD(a),a.attachments===0&&super.emitReserved("decoded",a)):super.emitReserved("decoded",a)}else if(Lf(t)||t.base64)if(this.reconstructor)a=this.reconstructor.takeBinaryData(t),a&&(this.reconstructor=null,super.emitReserved("decoded",a));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let a=0;const r={type:Number(t.charAt(0))};if(Te[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Te.BINARY_EVENT||r.type===Te.BINARY_ACK){const i=a+1;for(;t.charAt(++a)!=="-"&&a!=t.length;);const l=t.substring(i,a);if(l!=Number(l)||t.charAt(a)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(a+1)==="/"){const i=a+1;for(;++a&&!(t.charAt(a)===","||a===t.length););r.nsp=t.substring(i,a)}else r.nsp="/";const n=t.charAt(a+1);if(n!==""&&Number(n)==n){const i=a+1;for(;++a;){const l=t.charAt(a);if(l==null||Number(l)!=l){--a;break}if(a===t.length)break}r.id=Number(t.substring(i,a+1))}if(t.charAt(++a)){const i=this.tryParse(t.substr(a));if(Of.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,a){switch(t){case Te.CONNECT:return hv(a);case Te.DISCONNECT:return a===void 0;case Te.CONNECT_ERROR:return typeof a=="string"||hv(a);case Te.EVENT:case Te.BINARY_EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&CD.indexOf(a[0])===-1);case Te.ACK:case Te.BINARY_ACK:return Array.isArray(a)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class AD{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const a=SD(this.reconPack,this.buffers);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const TD=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Of,Encoder:_D,get PacketType(){return Te},protocol:kD},Symbol.toStringTag,{value:"Module"}));function aa(s,t,a){return s.on(t,a),function(){s.off(t,a)}}const PD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class s2 extends Pt{constructor(t,a,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=a,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[aa(t,"open",this.onopen.bind(this)),aa(t,"packet",this.onpacket.bind(this)),aa(t,"error",this.onerror.bind(this)),aa(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...a){var r,n,i;if(PD.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(a.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const l={type:Te.EVENT,data:a};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof a[a.length-1]=="function"){const u=this.ids++,m=a.pop();this._registerAckCallback(u,m),l.id=u}const o=(n=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,a){var r;const n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[t]=a;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);a.call(this,new Error("operation has timed out"))},n),l=(...o)=>{this.io.clearTimeoutFn(i),a.apply(this,o)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...a){return new Promise((r,n)=>{const i=(l,o)=>l?n(l):r(o);i.withError=!0,a.push(i),this.emit(t,...a)})}_addToQueue(t){let a;typeof t[t.length-1]=="function"&&(a=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...i)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),a&&a(n)):(this._queue.shift(),a&&a(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const a=this._queue[0];a.pending&&!t||(a.pending=!0,a.tryCount++,this.flags=a.flags,this.emit.apply(this,a.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,a){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,a),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Te.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Te.EVENT:case Te.BINARY_EVENT:this.onevent(t);break;case Te.ACK:case Te.BINARY_ACK:this.onack(t);break;case Te.DISCONNECT:this.ondisconnect();break;case Te.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const a=t.data||[];t.id!=null&&a.push(this.ack(t.id)),this.connected?this.emitEvent(a):this.receiveBuffer.push(Object.freeze(a))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const a=this._anyListeners.slice();for(const r of a)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const a=this;let r=!1;return function(...n){r||(r=!0,a.packet({type:Te.ACK,id:t,data:n}))}}onack(t){const a=this.acks[t.id];typeof a=="function"&&(delete this.acks[t.id],a.withError&&t.data.unshift(null),a.apply(this,t.data))}onconnect(t,a){this.id=t,this.recovered=a&&this._pid===a,this._pid=a,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const a=this._anyListeners;for(let r=0;r<a.length;r++)if(t===a[r])return a.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const a=this._anyOutgoingListeners;for(let r=0;r<a.length;r++)if(t===a[r])return a.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const a=this._anyOutgoingListeners.slice();for(const r of a)r.apply(this,t.data)}}}function sl(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}sl.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),a=Math.floor(t*this.jitter*s);s=Math.floor(t*10)&1?s+a:s-a}return Math.min(s,this.max)|0};sl.prototype.reset=function(){this.attempts=0};sl.prototype.setMin=function(s){this.ms=s};sl.prototype.setMax=function(s){this.max=s};sl.prototype.setJitter=function(s){this.jitter=s};class Xp extends Pt{constructor(t,a){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(a=t,t=void 0),a=a||{},a.path=a.path||"/socket.io",this.opts=a,Lm(this,a),this.reconnection(a.reconnection!==!1),this.reconnectionAttempts(a.reconnectionAttempts||1/0),this.reconnectionDelay(a.reconnectionDelay||1e3),this.reconnectionDelayMax(a.reconnectionDelayMax||5e3),this.randomizationFactor((r=a.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new sl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(a.timeout==null?2e4:a.timeout),this._readyState="closed",this.uri=t;const n=a.parser||TD;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=a.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var a;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(a=this.backoff)===null||a===void 0||a.setMin(t),this)}randomizationFactor(t){var a;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(a=this.backoff)===null||a===void 0||a.setJitter(t),this)}reconnectionDelayMax(t){var a;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(a=this.backoff)===null||a===void 0||a.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new gD(this.uri,this.opts);const a=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=aa(a,"open",function(){r.onopen(),t&&t()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},l=aa(a,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),a.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(aa(t,"ping",this.onping.bind(this)),aa(t,"data",this.ondata.bind(this)),aa(t,"error",this.onerror.bind(this)),aa(t,"close",this.onclose.bind(this)),aa(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(a){this.onclose("parse error",a)}}ondecoded(t){Rm(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,a){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new s2(this,t,a),this.nsps[t]=r),r}_destroy(t){const a=Object.keys(this.nsps);for(const r of a)if(this.nsps[r].active)return;this._close()}_packet(t){const a=this.encoder.encode(t);for(let r=0;r<a.length;r++)this.engine.write(a[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,a){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,a),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const a=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},a);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const fl={};function hd(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const a=yD(s,t.path||"/socket.io"),r=a.source,n=a.id,i=a.path,l=fl[n]&&i in fl[n].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return o?c=new Xp(r,t):(fl[n]||(fl[n]=new Xp(r,t)),c=fl[n]),a.query&&!t.query&&(t.query=a.queryKey),c.socket(a.path,t)}Object.assign(hd,{Manager:Xp,Socket:s2,io:hd,connect:hd});class DD{constructor(){oe(this,"socket",null);oe(this,"isConnected",!1);oe(this,"reconnectAttempts",0);oe(this,"maxReconnectAttempts",5);oe(this,"reconnectDelay",1e3);oe(this,"messageListeners",[]);oe(this,"typingListeners",[]);oe(this,"assignmentListeners",[]);oe(this,"statusChangeListeners",[]);oe(this,"connectionListeners",[])}connect(t="http://localhost:3001"){var a;(a=this.socket)!=null&&a.connected||(this.socket=hd(t,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:this.reconnectDelay,timeout:2e4}),this.setupEventListeners())}setupEventListeners(){this.socket&&(this.socket.on("connect",()=>{var t;console.log("Socket connected:",(t=this.socket)==null?void 0:t.id),this.isConnected=!0,this.reconnectAttempts=0,this.notifyConnectionListeners(!0)}),this.socket.on("disconnect",t=>{console.log("Socket disconnected:",t),this.isConnected=!1,this.notifyConnectionListeners(!1)}),this.socket.on("connect_error",t=>{console.error("Socket connection error:",t),this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts&&console.error("Max reconnection attempts reached")}),this.socket.on("new-message",t=>{this.notifyMessageListeners(t)}),this.socket.on("user-typing",t=>{this.notifyTypingListeners(t)}),this.socket.on("chat-assigned",t=>{this.notifyAssignmentListeners(t)}),this.socket.on("chat-resolved",t=>{this.notifyStatusChangeListeners(t)}),this.socket.on("chat-closed",t=>{this.notifyStatusChangeListeners(t)}))}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}joinUser(t){var a;(a=this.socket)!=null&&a.connected&&this.socket.emit("join-user",t)}joinChat(t){var a;(a=this.socket)!=null&&a.connected&&this.socket.emit("join-chat",t)}leaveChat(t){var a;(a=this.socket)!=null&&a.connected&&this.socket.emit("leave-chat",t)}sendMessage(t,a,r){var n;(n=this.socket)!=null&&n.connected&&this.socket.emit("send-message",{chatId:t,message:a,senderId:r})}sendTyping(t,a,r){var n;(n=this.socket)!=null&&n.connected&&this.socket.emit("typing",{chatId:t,userId:a,isTyping:r})}onMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(a=>a!==t)}}onTyping(t){return this.typingListeners.push(t),()=>{this.typingListeners=this.typingListeners.filter(a=>a!==t)}}onAssignment(t){return this.assignmentListeners.push(t),()=>{this.assignmentListeners=this.assignmentListeners.filter(a=>a!==t)}}onStatusChange(t){return this.statusChangeListeners.push(t),()=>{this.statusChangeListeners=this.statusChangeListeners.filter(a=>a!==t)}}onConnection(t){return this.connectionListeners.push(t),()=>{this.connectionListeners=this.connectionListeners.filter(a=>a!==t)}}notifyMessageListeners(t){this.messageListeners.forEach(a=>a(t))}notifyTypingListeners(t){this.typingListeners.forEach(a=>a(t))}notifyAssignmentListeners(t){this.assignmentListeners.forEach(a=>a(t))}notifyStatusChangeListeners(t){this.statusChangeListeners.forEach(a=>a(t))}notifyConnectionListeners(t){this.connectionListeners.forEach(a=>a(t))}get connected(){return this.isConnected}get socketId(){var t;return(t=this.socket)==null?void 0:t.id}}const ur=new DD;function MD(){const[s,t]=b.useState(null),[a,r]=b.useState(""),[n,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState(!1),[h,y]=b.useState({name:"",email:"",phone:"",subject:"",category:"general"}),[g,j]=b.useState(!0),v=b.useRef(null),x=b.useRef(`customer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`);b.useEffect(()=>{ur.connect();const S=ur.onConnection(D=>{i(D)}),C=ur.onMessage(D=>{D.chatId===(s==null?void 0:s._id)&&t(R=>R?{...R,messages:[...R.messages,D.message],lastActivity:new Date().toISOString()}:null)}),T=ur.onTyping(D=>{D.userId!==x.current&&(o(!0),setTimeout(()=>o(!1),3e3))}),_=ur.onAssignment(D=>{D.chatId===(s==null?void 0:s._id)&&(P.success(`Chat assigned to ${D.assignedTo||"an agent"}`),s!=null&&s._id&&f(s._id))}),F=ur.onStatusChange(D=>{D.chatId===(s==null?void 0:s._id)&&(P.success(`Chat status changed to ${D.status}`),s!=null&&s._id&&f(s._id))});return()=>{S(),C(),T(),_(),F()}},[s==null?void 0:s._id]),b.useEffect(()=>{var S;(S=v.current)==null||S.scrollIntoView({behavior:"smooth"})},[s==null?void 0:s.messages]);const f=async S=>{try{const C=await M.get(`/chat/${S}`);t(C.data.data.chat)}catch(C){console.error("Error fetching chat:",C),P.error("Failed to load chat")}},p=async()=>{if(!h.name.trim()){P.error("Please enter your name");return}d(!0);try{const C=(await M.post("/chat",{customer:{name:h.name,email:h.email,phone:h.phone,sessionId:x.current},subject:h.subject,category:h.category,initialMessage:`Customer ${h.name} started a chat about: ${h.subject||"General inquiry"}`})).data.data.chat;t(C),j(!1),ur.joinChat(C._id),P.success("Chat started successfully!")}catch(S){console.error("Error creating chat:",S),P.error("Failed to start chat")}finally{d(!1)}},N=async()=>{if(!(!a.trim()||!s)){m(!0);try{const C=(await M.post(`/chat/${s._id}/messages`,{content:a,messageType:"text"})).data.data.message;t(T=>T?{...T,messages:[...T.messages,C],lastActivity:new Date().toISOString()}:null),ur.sendMessage(s._id,C,x.current),r("")}catch(S){console.error("Error sending message:",S),P.error("Failed to send message")}finally{m(!1)}}},w=S=>new Date(S).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return g?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:e.jsx(Ut,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Start a Live Chat"}),e.jsx("p",{className:"text-gray-600",children:"Get instant support from our team"})]}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),p()},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:h.name,onChange:S=>y(C=>({...C,name:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:h.email,onChange:S=>y(C=>({...C,email:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:h.phone,onChange:S=>y(C=>({...C,phone:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),e.jsx("input",{type:"text",value:h.subject,onChange:S=>y(C=>({...C,subject:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What can we help you with?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:h.category,onChange:S=>y(C=>({...C,category:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"general",children:"General Inquiry"}),e.jsx("option",{value:"service",children:"Service Request"}),e.jsx("option",{value:"billing",children:"Billing Question"}),e.jsx("option",{value:"technical",children:"Technical Support"}),e.jsx("option",{value:"complaint",children:"Complaint"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Ea,{className:"w-5 h-5 animate-spin mr-2"}),"Starting Chat..."]}):e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Ut,{className:"w-5 h-5 mr-2"}),"Start Chat"]})})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white bg-opacity-20 rounded-full",children:e.jsx(Ut,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Live Chat Support"}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n?"bg-green-400":"bg-red-400"}`}),e.jsx("span",{children:n?"Connected":"Disconnected"})]}),s&&e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-white bg-opacity-20",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})]})]}),(s==null?void 0:s.assignedTo)&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-blue-100",children:"Assigned to"}),e.jsx("p",{className:"font-medium",children:s.assignedTo.name})]})]})}),e.jsxs("div",{className:"h-96 overflow-y-auto p-6 bg-gray-50",children:[s==null?void 0:s.messages.map((S,C)=>e.jsx("div",{className:`mb-4 ${S.sender.name==="Customer"?"text-right":"text-left"}`,children:e.jsx("div",{className:`inline-block max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${S.sender.name==="Customer"?"bg-blue-600 text-white":S.messageType==="system"?"bg-gray-200 text-gray-700 text-center mx-auto":"bg-white text-gray-900 border border-gray-200"}`,children:S.messageType==="system"?e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-xs",children:[e.jsx(vt,{className:"w-3 h-3"}),e.jsx("span",{children:S.content})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:S.sender.name}),e.jsx("div",{className:"text-sm",children:S.content}),e.jsx("div",{className:`text-xs mt-1 ${S.sender.name==="Customer"?"text-blue-100":"text-gray-500"}`,children:w(S.createdAt)})]})})},S._id||C)),l&&e.jsx("div",{className:"text-left mb-4",children:e.jsx("div",{className:"inline-block bg-white text-gray-900 border border-gray-200 px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx("span",{children:"Agent is typing"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e.jsx("div",{ref:v})]}),e.jsx("div",{className:"border-t border-gray-200 p-4 bg-white",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",value:a,onChange:S=>r(S.target.value),onKeyPress:S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),N())},placeholder:"Type your message...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!n||u}),e.jsx("button",{onClick:N,disabled:!a.trim()||!n||u,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?e.jsx(Ea,{className:"w-5 h-5 animate-spin"}):e.jsx(ec,{className:"w-5 h-5"})})]})})]}),s&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Chat Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Customer"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.customer.name}),s.customer.email&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(jt,{className:"w-3 h-3 mr-1"}),s.customer.email]}),s.customer.phone&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(kt,{className:"w-3 h-3 mr-1"}),s.customer.phone]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subject"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.subject||"No subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:s.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Started"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[new Date(s.createdAt).toLocaleDateString()," at ",w(s.createdAt)]})]})]})]})]})})}function ED(){const[s,t]=b.useState([]),[a,r]=b.useState(null),[n,i]=b.useState(!0);b.useState(null);const[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,m]=b.useState("1y"),[h,y]=b.useState(!1);b.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const w=[{id:"1",title:"Service History Report - Q4 2023",type:"service_history",description:"Comprehensive service history for all vehicles",dateRange:{start:"2023-10-01",end:"2023-12-31"},generatedDate:"2024-01-15",status:"ready",fileSize:"2.4 MB",downloadUrl:"/reports/service-history-q4-2023.pdf"},{id:"2",title:"Cost Analysis Report - 2023",type:"cost_analysis",description:"Detailed cost breakdown and analysis",dateRange:{start:"2023-01-01",end:"2023-12-31"},generatedDate:"2024-01-10",status:"ready",fileSize:"1.8 MB",downloadUrl:"/reports/cost-analysis-2023.pdf"},{id:"3",title:"Maintenance Schedule Report",type:"maintenance_schedule",description:"Upcoming maintenance and service schedules",dateRange:{start:"2024-01-01",end:"2024-12-31"},generatedDate:"2024-01-20",status:"ready",fileSize:"1.2 MB",downloadUrl:"/reports/maintenance-schedule-2024.pdf"}],S={totalServices:45,totalCost:8750.5,averageServiceCost:194.46,servicesByType:[{type:"Maintenance",count:25,totalCost:4200,percentage:55.6},{type:"Repair",count:12,totalCost:2800,percentage:26.7},{type:"Inspection",count:5,totalCost:750,percentage:11.1},{type:"Emergency",count:3,totalCost:1e3,percentage:6.7}],servicesByVehicle:[{vehicle:"2020 Toyota Camry",count:18,totalCost:3200,lastService:"2024-01-15"},{vehicle:"2018 Honda Civic",count:15,totalCost:2800,lastService:"2023-12-10"},{vehicle:"2019 Ford F-150",count:12,totalCost:2750,lastService:"2024-01-05"}],monthlyTrends:[{month:"Jan",services:3,cost:450},{month:"Feb",services:2,cost:320},{month:"Mar",services:1,cost:180},{month:"Apr",services:2,cost:280},{month:"May",services:1,cost:150},{month:"Jun",services:3,cost:520}],upcomingServices:[{vehicle:"2020 Toyota Camry",serviceType:"Oil Change",dueDate:"2024-02-15",estimatedCost:89.99,priority:"medium"},{vehicle:"2018 Honda Civic",serviceType:"Brake Inspection",dueDate:"2024-02-20",estimatedCost:120,priority:"high"}]};t(w),r(S)}catch(w){console.error("Error loading reports:",w)}finally{i(!1)}},j=w=>{switch(w){case"service_history":return e.jsx(it,{className:"w-5 h-5"});case"cost_analysis":return e.jsx(Me,{className:"w-5 h-5"});case"maintenance_schedule":return e.jsx(be,{className:"w-5 h-5"});case"vehicle_performance":return e.jsx(Fe,{className:"w-5 h-5"});case"warranty_status":return e.jsx(lt,{className:"w-5 h-5"});default:return e.jsx(lt,{className:"w-5 h-5"})}},v=w=>{switch(w){case"ready":return"bg-green-100 text-green-800";case"generating":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=w=>{switch(w){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},f=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(w),p=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),N=s.filter(w=>{const S=w.title.toLowerCase().includes(l.toLowerCase())||w.description.toLowerCase().includes(l.toLowerCase()),C=c==="all"||w.type===c;return S&&C});return n?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),e.jsx("p",{className:"text-gray-600",children:"Generate and manage comprehensive service reports and analytics"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(lt,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search reports...",value:l,onChange:w=>o(w.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 w-full"})]}),e.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"service_history",children:"Service History"}),e.jsx("option",{value:"cost_analysis",children:"Cost Analysis"}),e.jsx("option",{value:"maintenance_schedule",children:"Maintenance Schedule"}),e.jsx("option",{value:"vehicle_performance",children:"Vehicle Performance"}),e.jsx("option",{value:"warranty_status",children:"Warranty Status"})]}),e.jsxs("select",{value:u,onChange:w=>m(w.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"1m",children:"Last Month"}),e.jsx("option",{value:"3m",children:"Last 3 Months"}),e.jsx("option",{value:"6m",children:"Last 6 Months"}),e.jsx("option",{value:"1y",children:"Last Year"}),e.jsx("option",{value:"2y",children:"Last 2 Years"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(it,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a==null?void 0:a.totalServices}),e.jsx("p",{className:"text-sm text-gray-500",children:"This period"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Me,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Cost"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f((a==null?void 0:a.totalCost)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Avg: ",f((a==null?void 0:a.averageServiceCost)||0)]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Fe,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a==null?void 0:a.servicesByVehicle.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"In fleet"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(be,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a==null?void 0:a.upcomingServices.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Services due"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Generated Reports"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Range"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.title}),e.jsx("div",{className:"text-sm text-gray-500",children:w.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[j(w.type),e.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:w.type.replace("_"," ")})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[p(w.dateRange.start)," - ",p(w.dateRange.end)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p(w.generatedDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(w.status)}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx(St,{className:"w-4 h-4"})}),w.status==="ready"&&e.jsx("button",{className:"text-green-600 hover:text-green-900",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(Mm,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(R1,{className:"w-4 h-4"})})]})})]},w.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service Type Breakdown"}),e.jsx(Dm,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:a==null?void 0:a.servicesByType.map((w,S)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:`hsl(${S*60}, 70%, 60%)`}}),e.jsx("div",{className:"w-24 text-sm font-medium text-gray-900",children:w.type}),e.jsx("div",{className:"w-12 text-sm text-gray-500",children:w.count})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-20 text-sm text-gray-600",children:f(w.totalCost)}),e.jsxs("div",{className:"w-12 text-sm text-gray-500",children:[w.percentage,"%"]})]})]},S))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Services"}),e.jsx(be,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:a==null?void 0:a.upcomingServices.map((w,S)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.vehicle}),e.jsx("div",{className:"text-sm text-gray-500",children:w.serviceType})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p(w.dueDate)}),e.jsx("div",{className:"text-sm text-gray-500",children:f(w.estimatedCost)}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${x(w.priority)}`,children:w.priority.charAt(0).toUpperCase()+w.priority.slice(1)})]})]},S))})]})]})]})})}function na(s){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+s+(a.length?" "+a.map(function(n){return"'"+n+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Zr(s){return!!s&&!!s[st]}function ir(s){var t;return!!s&&(function(a){if(!a||typeof a!="object")return!1;var r=Object.getPrototypeOf(a);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===UD}(s)||Array.isArray(s)||!!s[bv]||!!(!((t=s.constructor)===null||t===void 0)&&t[bv])||Ff(s)||$f(s))}function Xn(s,t,a){a===void 0&&(a=!1),al(s)===0?(a?Object.keys:Di)(s).forEach(function(r){a&&typeof r=="symbol"||t(r,s[r],s)}):s.forEach(function(r,n){return t(n,r,s)})}function al(s){var t=s[st];return t?t.i>3?t.i-4:t.i:Array.isArray(s)?1:Ff(s)?2:$f(s)?3:0}function Pi(s,t){return al(s)===2?s.has(t):Object.prototype.hasOwnProperty.call(s,t)}function ID(s,t){return al(s)===2?s.get(t):s[t]}function a2(s,t,a){var r=al(s);r===2?s.set(t,a):r===3?s.add(a):s[t]=a}function r2(s,t){return s===t?s!==0||1/s==1/t:s!=s&&t!=t}function Ff(s){return zD&&s instanceof Map}function $f(s){return BD&&s instanceof Set}function gn(s){return s.o||s.t}function zf(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var t=i2(s);delete t[st];for(var a=Di(t),r=0;r<a.length;r++){var n=a[r],i=t[n];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:s[n]})}return Object.create(Object.getPrototypeOf(s),t)}function Bf(s,t){return t===void 0&&(t=!1),Uf(s)||Zr(s)||!ir(s)||(al(s)>1&&(s.set=s.add=s.clear=s.delete=RD),Object.freeze(s),t&&Xn(s,function(a,r){return Bf(r,!0)},!0)),s}function RD(){na(2)}function Uf(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function Pa(s){var t=e0[s];return t||na(18,s),t}function LD(s,t){e0[s]||(e0[s]=t)}function Qp(){return Eo}function Lh(s,t){t&&(Pa("Patches"),s.u=[],s.s=[],s.v=t)}function Nu(s){Jp(s),s.p.forEach(OD),s.p=null}function Jp(s){s===Eo&&(Eo=s.l)}function xv(s){return Eo={p:[],l:Eo,h:s,m:!0,_:0}}function OD(s){var t=s[st];t.i===0||t.i===1?t.j():t.g=!0}function Oh(s,t){t._=t.p.length;var a=t.p[0],r=s!==void 0&&s!==a;return t.h.O||Pa("ES5").S(t,s,r),r?(a[st].P&&(Nu(t),na(4)),ir(s)&&(s=wu(t,s),t.l||Su(t,s)),t.u&&Pa("Patches").M(a[st].t,s,t.u,t.s)):s=wu(t,a,[]),Nu(t),t.u&&t.v(t.u,t.s),s!==n2?s:void 0}function wu(s,t,a){if(Uf(t))return t;var r=t[st];if(!r)return Xn(t,function(o,c){return pv(s,r,t,o,c,a)},!0),t;if(r.A!==s)return t;if(!r.P)return Su(s,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var n=r.i===4||r.i===5?r.o=zf(r.k):r.o,i=n,l=!1;r.i===3&&(i=new Set(n),n.clear(),l=!0),Xn(i,function(o,c){return pv(s,r,n,o,c,a,l)}),Su(s,n,!1),a&&s.u&&Pa("Patches").N(r,a,s.u,s.s)}return r.o}function pv(s,t,a,r,n,i,l){if(Zr(n)){var o=wu(s,n,i&&t&&t.i!==3&&!Pi(t.R,r)?i.concat(r):void 0);if(a2(a,r,o),!Zr(o))return;s.m=!1}else l&&a.add(n);if(ir(n)&&!Uf(n)){if(!s.h.D&&s._<1)return;wu(s,n),t&&t.A.l||Su(s,n)}}function Su(s,t,a){a===void 0&&(a=!1),!s.l&&s.h.D&&s.m&&Bf(t,a)}function Fh(s,t){var a=s[st];return(a?gn(a):s)[t]}function fv(s,t){if(t in s)for(var a=Object.getPrototypeOf(s);a;){var r=Object.getOwnPropertyDescriptor(a,t);if(r)return r;a=Object.getPrototypeOf(a)}}function yr(s){s.P||(s.P=!0,s.l&&yr(s.l))}function $h(s){s.o||(s.o=zf(s.t))}function Zp(s,t,a){var r=Ff(t)?Pa("MapSet").F(t,a):$f(t)?Pa("MapSet").T(t,a):s.O?function(n,i){var l=Array.isArray(n),o={i:l?1:0,A:i?i.A:Qp(),P:!1,I:!1,R:{},l:i,t:n,k:null,o:null,j:null,C:!1},c=o,d=Io;l&&(c=[o],d=Pl);var u=Proxy.revocable(c,d),m=u.revoke,h=u.proxy;return o.k=h,o.j=m,h}(t,a):Pa("ES5").J(t,a);return(a?a.A:Qp()).p.push(r),r}function FD(s){return Zr(s)||na(22,s),function t(a){if(!ir(a))return a;var r,n=a[st],i=al(a);if(n){if(!n.P&&(n.i<4||!Pa("ES5").K(n)))return n.t;n.I=!0,r=gv(a,i),n.I=!1}else r=gv(a,i);return Xn(r,function(l,o){n&&ID(n.t,l)===o||a2(r,l,t(o))}),i===3?new Set(r):r}(s)}function gv(s,t){switch(t){case 2:return new Map(s);case 3:return Array.from(s)}return zf(s)}function $D(){function s(i,l){var o=n[i];return o?o.enumerable=l:n[i]=o={configurable:!0,enumerable:l,get:function(){var c=this[st];return Io.get(c,i)},set:function(c){var d=this[st];Io.set(d,i,c)}},o}function t(i){for(var l=i.length-1;l>=0;l--){var o=i[l][st];if(!o.P)switch(o.i){case 5:r(o)&&yr(o);break;case 4:a(o)&&yr(o)}}}function a(i){for(var l=i.t,o=i.k,c=Di(o),d=c.length-1;d>=0;d--){var u=c[d];if(u!==st){var m=l[u];if(m===void 0&&!Pi(l,u))return!0;var h=o[u],y=h&&h[st];if(y?y.t!==m:!r2(h,m))return!0}}var g=!!l[st];return c.length!==Di(l).length+(g?0:1)}function r(i){var l=i.k;if(l.length!==i.t.length)return!0;var o=Object.getOwnPropertyDescriptor(l,l.length-1);if(o&&!o.get)return!0;for(var c=0;c<l.length;c++)if(!l.hasOwnProperty(c))return!0;return!1}var n={};LD("ES5",{J:function(i,l){var o=Array.isArray(i),c=function(u,m){if(u){for(var h=Array(m.length),y=0;y<m.length;y++)Object.defineProperty(h,""+y,s(y,!0));return h}var g=i2(m);delete g[st];for(var j=Di(g),v=0;v<j.length;v++){var x=j[v];g[x]=s(x,u||!!g[x].enumerable)}return Object.create(Object.getPrototypeOf(m),g)}(o,i),d={i:o?5:4,A:l?l.A:Qp(),P:!1,I:!1,R:{},l,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,st,{value:d,writable:!0}),c},S:function(i,l,o){o?Zr(l)&&l[st].A===i&&t(i.p):(i.u&&function c(d){if(d&&typeof d=="object"){var u=d[st];if(u){var m=u.t,h=u.k,y=u.R,g=u.i;if(g===4)Xn(h,function(p){p!==st&&(m[p]!==void 0||Pi(m,p)?y[p]||c(h[p]):(y[p]=!0,yr(u)))}),Xn(m,function(p){h[p]!==void 0||Pi(h,p)||(y[p]=!1,yr(u))});else if(g===5){if(r(u)&&(yr(u),y.length=!0),h.length<m.length)for(var j=h.length;j<m.length;j++)y[j]=!1;else for(var v=m.length;v<h.length;v++)y[v]=!0;for(var x=Math.min(h.length,m.length),f=0;f<x;f++)h.hasOwnProperty(f)||(y[f]=!0),y[f]===void 0&&c(h[f])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?a(i):r(i)}})}var yv,Eo,Vf=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",zD=typeof Map<"u",BD=typeof Set<"u",vv=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",n2=Vf?Symbol.for("immer-nothing"):((yv={})["immer-nothing"]=!0,yv),bv=Vf?Symbol.for("immer-draftable"):"__$immer_draftable",st=Vf?Symbol.for("immer-state"):"__$immer_state",UD=""+Object.prototype.constructor,Di=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,i2=Object.getOwnPropertyDescriptors||function(s){var t={};return Di(s).forEach(function(a){t[a]=Object.getOwnPropertyDescriptor(s,a)}),t},e0={},Io={get:function(s,t){if(t===st)return s;var a=gn(s);if(!Pi(a,t))return function(n,i,l){var o,c=fv(i,l);return c?"value"in c?c.value:(o=c.get)===null||o===void 0?void 0:o.call(n.k):void 0}(s,a,t);var r=a[t];return s.I||!ir(r)?r:r===Fh(s.t,t)?($h(s),s.o[t]=Zp(s.A.h,r,s)):r},has:function(s,t){return t in gn(s)},ownKeys:function(s){return Reflect.ownKeys(gn(s))},set:function(s,t,a){var r=fv(gn(s),t);if(r!=null&&r.set)return r.set.call(s.k,a),!0;if(!s.P){var n=Fh(gn(s),t),i=n==null?void 0:n[st];if(i&&i.t===a)return s.o[t]=a,s.R[t]=!1,!0;if(r2(a,n)&&(a!==void 0||Pi(s.t,t)))return!0;$h(s),yr(s)}return s.o[t]===a&&(a!==void 0||t in s.o)||Number.isNaN(a)&&Number.isNaN(s.o[t])||(s.o[t]=a,s.R[t]=!0),!0},deleteProperty:function(s,t){return Fh(s.t,t)!==void 0||t in s.t?(s.R[t]=!1,$h(s),yr(s)):delete s.R[t],s.o&&delete s.o[t],!0},getOwnPropertyDescriptor:function(s,t){var a=gn(s),r=Reflect.getOwnPropertyDescriptor(a,t);return r&&{writable:!0,configurable:s.i!==1||t!=="length",enumerable:r.enumerable,value:a[t]}},defineProperty:function(){na(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){na(12)}},Pl={};Xn(Io,function(s,t){Pl[s]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Pl.deleteProperty=function(s,t){return Pl.set.call(this,s,t,void 0)},Pl.set=function(s,t,a){return Io.set.call(this,s[0],t,a,s[0])};var VD=function(){function s(a){var r=this;this.O=vv,this.D=!0,this.produce=function(n,i,l){if(typeof n=="function"&&typeof i!="function"){var o=i;i=n;var c=r;return function(j){var v=this;j===void 0&&(j=o);for(var x=arguments.length,f=Array(x>1?x-1:0),p=1;p<x;p++)f[p-1]=arguments[p];return c.produce(j,function(N){var w;return(w=i).call.apply(w,[v,N].concat(f))})}}var d;if(typeof i!="function"&&na(6),l!==void 0&&typeof l!="function"&&na(7),ir(n)){var u=xv(r),m=Zp(r,n,void 0),h=!0;try{d=i(m),h=!1}finally{h?Nu(u):Jp(u)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(j){return Lh(u,l),Oh(j,u)},function(j){throw Nu(u),j}):(Lh(u,l),Oh(d,u))}if(!n||typeof n!="object"){if((d=i(n))===void 0&&(d=n),d===n2&&(d=void 0),r.D&&Bf(d,!0),l){var y=[],g=[];Pa("Patches").M(n,d,y,g),l(y,g)}return d}na(21,n)},this.produceWithPatches=function(n,i){if(typeof n=="function")return function(d){for(var u=arguments.length,m=Array(u>1?u-1:0),h=1;h<u;h++)m[h-1]=arguments[h];return r.produceWithPatches(d,function(y){return n.apply(void 0,[y].concat(m))})};var l,o,c=r.produce(n,i,function(d,u){l=d,o=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(d){return[d,l,o]}):[c,l,o]},typeof(a==null?void 0:a.useProxies)=="boolean"&&this.setUseProxies(a.useProxies),typeof(a==null?void 0:a.autoFreeze)=="boolean"&&this.setAutoFreeze(a.autoFreeze)}var t=s.prototype;return t.createDraft=function(a){ir(a)||na(8),Zr(a)&&(a=FD(a));var r=xv(this),n=Zp(this,a,void 0);return n[st].C=!0,Jp(r),n},t.finishDraft=function(a,r){var n=a&&a[st],i=n.A;return Lh(i,r),Oh(void 0,i)},t.setAutoFreeze=function(a){this.D=a},t.setUseProxies=function(a){a&&!vv&&na(20),this.O=a},t.applyPatches=function(a,r){var n;for(n=r.length-1;n>=0;n--){var i=r[n];if(i.path.length===0&&i.op==="replace"){a=i.value;break}}n>-1&&(r=r.slice(n+1));var l=Pa("Patches").$;return Zr(a)?l(a,r):this.produce(a,function(o){return l(o,r)})},s}(),Os=new VD,l2=Os.produce;Os.produceWithPatches.bind(Os);Os.setAutoFreeze.bind(Os);Os.setUseProxies.bind(Os);Os.applyPatches.bind(Os);Os.createDraft.bind(Os);Os.finishDraft.bind(Os);function Ro(s){"@babel/helpers - typeof";return Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ro(s)}function HD(s,t){if(Ro(s)!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var r=a.call(s,t||"default");if(Ro(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function WD(s){var t=HD(s,"string");return Ro(t)=="symbol"?t:t+""}function qD(s,t,a){return(t=WD(t))in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function jv(s,t){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),a.push.apply(a,r)}return a}function Nv(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?jv(Object(a),!0).forEach(function(r){qD(s,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):jv(Object(a)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(a,r))})}return s}function Zt(s){return"Minified Redux error #"+s+"; visit https://redux.js.org/Errors?code="+s+" for the full message or use the non-minified dev environment for full errors. "}var wv=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),zh=function(){return Math.random().toString(36).substring(7).split("").join(".")},Cu={INIT:"@@redux/INIT"+zh(),REPLACE:"@@redux/REPLACE"+zh(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+zh()}};function YD(s){if(typeof s!="object"||s===null)return!1;for(var t=s;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(s)===t}function o2(s,t,a){var r;if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Zt(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Zt(1));return a(o2)(s,t)}if(typeof s!="function")throw new Error(Zt(2));var n=s,i=t,l=[],o=l,c=!1;function d(){o===l&&(o=l.slice())}function u(){if(c)throw new Error(Zt(3));return i}function m(j){if(typeof j!="function")throw new Error(Zt(4));if(c)throw new Error(Zt(5));var v=!0;return d(),o.push(j),function(){if(v){if(c)throw new Error(Zt(6));v=!1,d();var f=o.indexOf(j);o.splice(f,1),l=null}}}function h(j){if(!YD(j))throw new Error(Zt(7));if(typeof j.type>"u")throw new Error(Zt(8));if(c)throw new Error(Zt(9));try{c=!0,i=n(i,j)}finally{c=!1}for(var v=l=o,x=0;x<v.length;x++){var f=v[x];f()}return j}function y(j){if(typeof j!="function")throw new Error(Zt(10));n=j,h({type:Cu.REPLACE})}function g(){var j,v=m;return j={subscribe:function(f){if(typeof f!="object"||f===null)throw new Error(Zt(11));function p(){f.next&&f.next(u())}p();var N=v(p);return{unsubscribe:N}}},j[wv]=function(){return this},j}return h({type:Cu.INIT}),r={dispatch:h,subscribe:m,getState:u,replaceReducer:y},r[wv]=g,r}function KD(s){Object.keys(s).forEach(function(t){var a=s[t],r=a(void 0,{type:Cu.INIT});if(typeof r>"u")throw new Error(Zt(12));if(typeof a(void 0,{type:Cu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zt(13))})}function GD(s){for(var t=Object.keys(s),a={},r=0;r<t.length;r++){var n=t[r];typeof s[n]=="function"&&(a[n]=s[n])}var i=Object.keys(a),l;try{KD(a)}catch(o){l=o}return function(c,d){if(c===void 0&&(c={}),l)throw l;for(var u=!1,m={},h=0;h<i.length;h++){var y=i[h],g=a[y],j=c[y],v=g(j,d);if(typeof v>"u")throw d&&d.type,new Error(Zt(14));m[y]=v,u=u||v!==j}return u=u||i.length!==Object.keys(c).length,u?m:c}}function ku(){for(var s=arguments.length,t=new Array(s),a=0;a<s;a++)t[a]=arguments[a];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,n){return function(){return r(n.apply(void 0,arguments))}})}function XD(){for(var s=arguments.length,t=new Array(s),a=0;a<s;a++)t[a]=arguments[a];return function(r){return function(){var n=r.apply(void 0,arguments),i=function(){throw new Error(Zt(15))},l={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=t.map(function(c){return c(l)});return i=ku.apply(void 0,o)(n.dispatch),Nv(Nv({},n),{},{dispatch:i})}}}function c2(s){var t=function(r){var n=r.dispatch,i=r.getState;return function(l){return function(o){return typeof o=="function"?o(n,i,s):l(o)}}};return t}var d2=c2();d2.withExtraArgument=c2;const Sv=d2;var u2=globalThis&&globalThis.__extends||function(){var s=function(t,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},s(t,a)};return function(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(t,a);function r(){this.constructor=t}t.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}(),QD=globalThis&&globalThis.__generator||function(s,t){var a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,n=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){a=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){a.label=d[1];break}if(d[0]===6&&a.label<i[1]){a.label=i[1],i=d;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(d);break}i[2]&&a.ops.pop(),a.trys.pop();continue}d=t.call(s,a)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Wi=globalThis&&globalThis.__spreadArray||function(s,t){for(var a=0,r=t.length,n=s.length;a<r;a++,n++)s[n]=t[a];return s},JD=Object.defineProperty,ZD=Object.defineProperties,eM=Object.getOwnPropertyDescriptors,Cv=Object.getOwnPropertySymbols,tM=Object.prototype.hasOwnProperty,sM=Object.prototype.propertyIsEnumerable,kv=function(s,t,a){return t in s?JD(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a},$r=function(s,t){for(var a in t||(t={}))tM.call(t,a)&&kv(s,a,t[a]);if(Cv)for(var r=0,n=Cv(t);r<n.length;r++){var a=n[r];sM.call(t,a)&&kv(s,a,t[a])}return s},Bh=function(s,t){return ZD(s,eM(t))},aM=function(s,t,a){return new Promise(function(r,n){var i=function(c){try{o(a.next(c))}catch(d){n(d)}},l=function(c){try{o(a.throw(c))}catch(d){n(d)}},o=function(c){return c.done?r(c.value):Promise.resolve(c.value).then(i,l)};o((a=a.apply(s,t)).next())})},rM=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ku:ku.apply(null,arguments)};function nM(s){if(typeof s!="object"||s===null)return!1;var t=Object.getPrototypeOf(s);if(t===null)return!0;for(var a=t;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return t===a}function zr(s,t){function a(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var i=t.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return $r($r({type:s,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:s,payload:r[0]}}return a.toString=function(){return""+s},a.type=s,a.match=function(r){return r.type===s},a}var iM=function(s){u2(t,s);function t(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];var n=s.apply(this,a)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];return s.prototype.concat.apply(this,a)},t.prototype.prepend=function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];return a.length===1&&Array.isArray(a[0])?new(t.bind.apply(t,Wi([void 0],a[0].concat(this)))):new(t.bind.apply(t,Wi([void 0],a.concat(this))))},t}(Array),lM=function(s){u2(t,s);function t(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];var n=s.apply(this,a)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];return s.prototype.concat.apply(this,a)},t.prototype.prepend=function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];return a.length===1&&Array.isArray(a[0])?new(t.bind.apply(t,Wi([void 0],a[0].concat(this)))):new(t.bind.apply(t,Wi([void 0],a.concat(this))))},t}(Array);function t0(s){return ir(s)?l2(s,function(){}):s}function oM(s){return typeof s=="boolean"}function cM(){return function(t){return dM(t)}}function dM(s){s===void 0&&(s={});var t=s.thunk,a=t===void 0?!0:t;s.immutableCheck,s.serializableCheck,s.actionCreatorCheck;var r=new iM;return a&&(oM(a)?r.push(Sv):r.push(Sv.withExtraArgument(a.extraArgument))),r}var uM=!0;function mM(s){var t=cM(),a=s||{},r=a.reducer,n=r===void 0?void 0:r,i=a.middleware,l=i===void 0?t():i,o=a.devTools,c=o===void 0?!0:o,d=a.preloadedState,u=d===void 0?void 0:d,m=a.enhancers,h=m===void 0?void 0:m,y;if(typeof n=="function")y=n;else if(nM(n))y=GD(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=l;typeof g=="function"&&(g=g(t));var j=XD.apply(void 0,g),v=ku;c&&(v=rM($r({trace:!uM},typeof c=="object"&&c)));var x=new lM(j),f=x;Array.isArray(h)?f=Wi([j],h):typeof h=="function"&&(f=h(x));var p=v.apply(void 0,f);return o2(y,u,p)}function m2(s){var t={},a=[],r,n={addCase:function(i,l){var o=typeof i=="string"?i:i.type;if(!o)throw new Error("`builder.addCase` cannot be called with an empty action type");if(o in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[o]=l,n},addMatcher:function(i,l){return a.push({matcher:i,reducer:l}),n},addDefaultCase:function(i){return r=i,n}};return s(n),[t,a,r]}function hM(s){return typeof s=="function"}function xM(s,t,a,r){a===void 0&&(a=[]);var n=typeof t=="function"?m2(t):[t,a,r],i=n[0],l=n[1],o=n[2],c;if(hM(s))c=function(){return t0(s())};else{var d=t0(s);c=function(){return d}}function u(m,h){m===void 0&&(m=c());var y=Wi([i[h.type]],l.filter(function(g){var j=g.matcher;return j(h)}).map(function(g){var j=g.reducer;return j}));return y.filter(function(g){return!!g}).length===0&&(y=[o]),y.reduce(function(g,j){if(j)if(Zr(g)){var v=g,x=j(v,h);return x===void 0?g:x}else{if(ir(g))return l2(g,function(f){return j(f,h)});var x=j(g,h);if(x===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return g},m)}return u.getInitialState=c,u}function pM(s,t){return s+"/"+t}function Rt(s){var t=s.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var a=typeof s.initialState=="function"?s.initialState:t0(s.initialState),r=s.reducers||{},n=Object.keys(r),i={},l={},o={};n.forEach(function(u){var m=r[u],h=pM(t,u),y,g;"reducer"in m?(y=m.reducer,g=m.prepare):y=m,i[u]=y,l[h]=y,o[u]=g?zr(h,g):zr(h)});function c(){var u=typeof s.extraReducers=="function"?m2(s.extraReducers):[s.extraReducers],m=u[0],h=m===void 0?{}:m,y=u[1],g=y===void 0?[]:y,j=u[2],v=j===void 0?void 0:j,x=$r($r({},h),l);return xM(a,function(f){for(var p in x)f.addCase(p,x[p]);for(var N=0,w=g;N<w.length;N++){var S=w[N];f.addMatcher(S.matcher,S.reducer)}v&&f.addDefaultCase(v)})}var d;return{name:t,reducer:function(u,m){return d||(d=c()),d(u,m)},actions:o,caseReducers:i,getInitialState:function(){return d||(d=c()),d.getInitialState()}}}var fM="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gM=function(s){s===void 0&&(s=21);for(var t="",a=s;a--;)t+=fM[Math.random()*64|0];return t},yM=["name","message","stack","code"],Uh=function(){function s(t,a){this.payload=t,this.meta=a}return s}(),_v=function(){function s(t,a){this.payload=t,this.meta=a}return s}(),vM=function(s){if(typeof s=="object"&&s!==null){for(var t={},a=0,r=yM;a<r.length;a++){var n=r[a];typeof s[n]=="string"&&(t[n]=s[n])}return t}return{message:String(s)}},Y=function(){function s(t,a,r){var n=zr(t+"/fulfilled",function(d,u,m,h){return{payload:d,meta:Bh($r({},h||{}),{arg:m,requestId:u,requestStatus:"fulfilled"})}}),i=zr(t+"/pending",function(d,u,m){return{payload:void 0,meta:Bh($r({},m||{}),{arg:u,requestId:d,requestStatus:"pending"})}}),l=zr(t+"/rejected",function(d,u,m,h,y){return{payload:h,error:(r&&r.serializeError||vM)(d||"Rejected"),meta:Bh($r({},y||{}),{arg:m,requestId:u,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}}),o=typeof AbortController<"u"?AbortController:function(){function d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return d.prototype.abort=function(){},d}();function c(d){return function(u,m,h){var y=r!=null&&r.idGenerator?r.idGenerator(d):gM(),g=new o,j;function v(f){j=f,g.abort()}var x=function(){return aM(this,null,function(){var f,p,N,w,S,C,T;return QD(this,function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),w=(f=r==null?void 0:r.condition)==null?void 0:f.call(r,d,{getState:m,extra:h}),jM(w)?[4,w]:[3,2];case 1:w=_.sent(),_.label=2;case 2:if(w===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(F,D){return g.signal.addEventListener("abort",function(){return D({name:"AbortError",message:j||"Aborted"})})}),u(i(y,d,(p=r==null?void 0:r.getPendingMeta)==null?void 0:p.call(r,{requestId:y,arg:d},{getState:m,extra:h}))),[4,Promise.race([S,Promise.resolve(a(d,{dispatch:u,getState:m,extra:h,requestId:y,signal:g.signal,abort:v,rejectWithValue:function(F,D){return new Uh(F,D)},fulfillWithValue:function(F,D){return new _v(F,D)}})).then(function(F){if(F instanceof Uh)throw F;return F instanceof _v?n(F.payload,y,d,F.meta):n(F,y,d)})])];case 3:return N=_.sent(),[3,5];case 4:return C=_.sent(),N=C instanceof Uh?l(null,y,d,C.payload,C.meta):l(C,y,d),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&l.match(N)&&N.meta.condition,T||u(N),[2,N]}})})}();return Object.assign(x,{abort:v,requestId:y,arg:d,unwrap:function(){return x.then(bM)}})}}return Object.assign(c,{pending:i,rejected:l,fulfilled:n,typePrefix:t})}return s.withTypes=function(){return s},s}();function bM(s){if(s.meta&&s.meta.rejectedWithValue)throw s.payload;if(s.error)throw s.error;return s.payload}function jM(s){return s!==null&&typeof s=="object"&&typeof s.then=="function"}var Hf="listenerMiddleware";zr(Hf+"/add");zr(Hf+"/removeAll");zr(Hf+"/remove");var Av;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);$D();class NM{async getAppointments(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([n,i])=>{if(i!=null){const l=n==="technicianId"?"technician":n;a.append(l,i.toString())}}),(await M.get(`/appointments?${a.toString()}`)).data}async getAppointment(t){return(await M.get(`/appointments/${t}`)).data}async createAppointment(t){return(await M.post("/appointments",t)).data}async updateAppointment(t,a){return(await M.put(`/appointments/${t}`,a)).data}async deleteAppointment(t){return(await M.delete(`/appointments/${t}`)).data}async updateStatus(t,a){return(await M.patch(`/appointments/${t}/status`,{status:a})).data}async getStats(t,a){const r=new URLSearchParams;return t&&r.append("startDate",t),a&&r.append("endDate",a),(await M.get(`/appointments/stats/overview?${r.toString()}`)).data}async getAppointmentsByDateRange(t,a){return(await M.get(`/appointments/date-range?startDate=${t}&endDate=${a}`)).data}async getTodayAppointments(){return(await M.get("/appointments/today")).data}async getUpcomingAppointments(t=7){return(await M.get(`/appointments/upcoming?days=${t}`)).data}async confirmAppointment(t){return(await M.post(`/appointments/${t}/confirm`)).data}async cancelAppointment(t,a){return(await M.post(`/appointments/${t}/cancel`,{reason:a})).data}async markAsNoShow(t){return(await M.post(`/appointments/${t}/no-show`)).data}async assignTechnician(t,a){return(await M.post(`/appointments/${t}/assign-technician`,{technicianId:a})).data}async getAvailableTimeSlots(t,a){const r=new URLSearchParams({date:t});return a&&r.append("serviceId",a),(await M.get(`/appointments/available-slots?${r.toString()}`)).data}}const Om=new NM,Wf=Y("appointments/deleteAppointment",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Om.deleteAppointment(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete appointment")}});Y("appointments/updateAppointment",async({id:s,appointmentData:t},{rejectWithValue:a})=>{var r,n;try{return(await Om.updateAppointment(s,t)).data}catch(i){const l=((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update appointment";return a(l)}});function wM({appointment:s,onEdit:t,onView:a,onDelete:r}){var u;const n=Ue(),[i,l]=b.useState(!1);console.log("AppointmentCard rendering with appointment:",{id:s.id,customerName:s.customerName,vehicleInfo:s.vehicleInfo,serviceType:s.serviceType,scheduledDate:s.scheduledDate,scheduledTime:s.scheduledTime,status:s.status,priority:s.priority});const o=async()=>{if(window.confirm("Are you sure you want to delete this appointment? This action cannot be undone.")){l(!0);try{await n(Wf(s.id)).unwrap()}catch(m){console.error("Failed to delete appointment:",m)}finally{l(!1)}}},c=m=>{switch(m){case"confirmed":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no-show":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=m=>{switch(m){case"urgent":return"border-l-red-500";case"high":return"border-l-orange-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-green-500";default:return"border-l-gray-400"}};try{return e.jsxs("div",{className:`bg-white rounded-lg shadow-md p-4 text-sm border-l-4 ${d(s.priority||"medium")} hover:shadow-lg transition-shadow`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.customerName||"Unknown Customer"}),e.jsx("p",{className:"text-gray-600 text-xs",children:s.vehicleInfo||"Unknown Vehicle"})]}),e.jsxs("div",{className:"flex gap-1",children:[a&&e.jsx("button",{onClick:()=>a(s),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"View details",children:e.jsx(Jr,{className:"w-4 h-4"})}),t&&e.jsx("button",{onClick:()=>t(s),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit appointment",children:e.jsx(nr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r?()=>r(s):o,disabled:i,className:"p-1 text-gray-400 hover:text-red-600 transition-colors disabled:opacity-50",title:"Delete appointment",children:e.jsx(Ls,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Date & Time:"}),e.jsxs("span",{className:"font-medium",children:[s.scheduledDate||"No date"," at ",s.scheduledTime||"No time"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsx("span",{className:"font-medium",children:typeof s.serviceType=="string"?s.serviceType:((u=s.serviceType)==null?void 0:u.name)||"Unknown Service"})]}),s.technicianName&&s.technicianName.trim()&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Technician:"}),e.jsx("span",{className:"font-medium",children:s.technicianName})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Duration:"}),e.jsxs("span",{className:"font-medium",children:[s.estimatedDuration||0," min"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(s.status||"scheduled")}`,children:(s.status||"scheduled").replace("-"," ")})]}),s.notes&&s.notes.trim()&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600 text-xs",children:"Notes:"}),e.jsx("p",{className:"text-gray-800 text-xs mt-1",children:s.notes})]})]})]})}catch(m){return console.error("Error rendering AppointmentCard:",m,s),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-sm",children:[e.jsx("div",{className:"text-red-600 font-medium mb-2",children:"Error displaying appointment"}),e.jsxs("div",{className:"text-red-500 text-xs",children:[e.jsxs("div",{children:["ID: ",s.id||"Unknown"]}),e.jsxs("div",{children:["Customer: ",s.customerName||"Unknown"]}),e.jsxs("div",{children:["Error: ",m instanceof Error?m.message:"Unknown error"]})]})]})}}function _u({onClose:s,onSave:t,isLoading:a=!1,appointment:r,isEditing:n=!1,selectedDate:i,selectedTime:l}){const[o,c]=b.useState([]),[d,u]=b.useState([]),[m,h]=b.useState({customer:"",email:"",phone:"",businessName:"",vehicle:"",vehicleId:"",vin:"",licensePlate:"",scheduledDate:i?i.toISOString().split("T")[0]:"",scheduledTime:l||"09:00",serviceType:"",serviceTypeId:"",notes:"",priority:"medium",estimatedDuration:60,status:"scheduled",technicianId:"",technicianName:"",customerType:"existing",existingCustomerId:"",date:i?i.toISOString().split("T")[0]:"",time:l||"09:00"}),[y,g]=b.useState({}),[j,v]=b.useState(!1),[x,f]=b.useState([]),[p,N]=b.useState(!1),[w,S]=b.useState(!1),[C,T]=b.useState([]),_=Ue(),[F,D]=b.useState([]),[R,U]=b.useState([]),[O,E]=b.useState([]),[W,Z]=b.useState(!1);b.useRef(null),b.useEffect(()=>{var k,H,Q,J,L,se;if(n&&r){console.log("Editing appointment data:",r),console.log("Appointment scheduledDate:",r.scheduledDate),console.log("Appointment scheduledTime:",r.scheduledTime),console.log("Appointment date field:",r.date),console.log("Appointment time field:",r.time);let K,ae="",ce="";const te=r.scheduledDate||r.date,ve=r.scheduledTime||r.time;if(te&&ve){if(ce=ve,ce.includes(":")){const cs=ce.split(":");cs.length>=2&&(ce=`${cs[0].padStart(2,"0")}:${cs[1].padStart(2,"0")}`)}ae=te,ae.includes("T")&&(ae=ae.split("T")[0]),K=new Date(`${ae}T${ce}`),isNaN(K.getTime())&&(console.warn("Invalid appointment date, using fallback:",{scheduledDate:r.scheduledDate,scheduledTime:r.scheduledTime,processedDate:ae,processedTime:ce,combined:`${ae}T${ce}`}),K=new Date,K.setDate(K.getDate()+1),K.setHours(9,0,0,0))}else console.warn("Missing appointment date/time, using fallback"),K=new Date,K.setDate(K.getDate()+1),K.setHours(9,0,0,0);if(ce=r.scheduledTime||"09:00",ce.includes(":")){const cs=ce.split(":");cs.length>=2&&(ce=`${cs[0].padStart(2,"0")}:${cs[1].padStart(2,"0")}`)}console.log("Setting form with appointment data:",{originalDate:r.scheduledDate,originalTime:r.scheduledTime,alternativeDate:r.date,alternativeTime:r.time,processedDate:ae||K.toISOString().split("T")[0],processedTime:ce,technicianId:r.technicianId,technicianObject:r.technician,technicianIdFromObject:(k=r.technician)==null?void 0:k._id,technicianName:r.technicianName,technicianNameFromObject:(H=r.technician)==null?void 0:H.name,appointment:r});let ge="",xt="";typeof r.serviceType=="object"&&r.serviceType!==null?(ge=r.serviceType.name||"",xt=r.serviceType._id||""):typeof r.serviceType=="string"&&(xt=r.serviceType,ge=""),console.log("Service type processing:",{original:r.serviceType,extractedName:ge,extractedId:xt,isObject:typeof r.serviceType=="object"}),h({customer:r.customerName,email:"",phone:"",businessName:"",vehicle:r.vehicleInfo||"",vehicleId:r.vehicleId||"",vin:((Q=r.vehicle)==null?void 0:Q.vin)||"",licensePlate:((J=r.vehicle)==null?void 0:J.licensePlate)||"",scheduledDate:ae||K.toISOString().split("T")[0],scheduledTime:ce,serviceType:ge,serviceTypeId:xt,notes:r.notes||"",priority:r.priority,estimatedDuration:r.estimatedDuration,status:r.status,technicianId:r.technicianId||((L=r.technician)==null?void 0:L._id)||r.technician||"",technicianName:r.technicianName||((se=r.technician)==null?void 0:se.name)||r.technicianName||"",customerType:"existing",existingCustomerId:r.customerId,date:ae||K.toISOString().split("T")[0],time:ce})}else{let K;if(i){K=new Date(i);const[ae,ce]=(l||"09:00").split(":").map(Number);K.setHours(ae,ce,0,0)}else K=new Date,K.setDate(K.getDate()+1),K.setHours(9,0,0,0);h(ae=>({...ae,scheduledDate:K.toISOString().split("T")[0],scheduledTime:l||K.toTimeString().slice(0,5)}))}},[n,r,i,l]),b.useEffect(()=>{n&&console.log("Form state updated:",{technicianId:m.technicianId,technicianName:m.technicianName,techniciansCount:F.length,serviceType:m.serviceType,serviceTypeId:m.serviceTypeId})},[m.technicianId,m.technicianName,F.length,m.serviceType,m.serviceTypeId,n]),b.useEffect(()=>{if(n&&m.serviceType&&!m.serviceTypeId&&Array.isArray(o)&&o.length>0){const k=o.find(H=>H.name===m.serviceType);k&&(console.log("Auto-setting serviceTypeId:",k._id||k.id),h(H=>({...H,serviceTypeId:k._id||k.id||""})))}},[m.serviceType,o,n]),b.useEffect(()=>{n&&r&&r.vehicleId&&ie(r.vehicleId),n&&r&&r.customerId&&(de(r.customerId),z(r.customerId))},[n,r]),b.useEffect(()=>{I(),$(),A(),G()},[]),b.useEffect(()=>{(async()=>{try{let H=[];if(n){const[J,L]=await Promise.all([fetch(`${Lt.CUSTOMERS}/technicians?isActive=true`,{headers:Ot()}),fetch(`${Lt.CUSTOMERS}/technicians?isActive=false`,{headers:Ot()})]);if(J.ok){const se=await J.json();se.success&&H.push(...se.data.technicians||[])}if(L.ok){const se=await L.json();se.success&&H.push(...se.data.technicians||[])}}else{const J=await fetch(`${Lt.CUSTOMERS}/technicians`,{headers:Ot()});if(J.ok){const L=await J.json();L.success&&(H=L.data.technicians||[])}}console.log("Loaded technicians:",H);const Q=Array.isArray(H)?H:[];D(Q)}catch(H){console.error("Error loading technicians:",H),D([])}finally{D(H=>Array.isArray(H)?H:[])}})()},[n,r]);const I=async()=>{var k;try{const H=await fetch(`${Lt.APPOINTMENTS}/vehicles`,{headers:Ot()});if(H.ok){const Q=await H.json();if(Q.success){const J=Array.isArray((k=Q.data)==null?void 0:k.vehicles)?Q.data.vehicles:[];T(J)}}}catch(H){console.warn("Failed to load vehicles:",H),T([])}finally{T(H=>Array.isArray(H)?H:[])}},$=async()=>{var k;try{const H=await fetch(`${Lt.APPOINTMENTS}/customers?limit=100`,{headers:Ot()});if(H.ok){const Q=await H.json();if(Q.success){const J=Array.isArray((k=Q.data)==null?void 0:k.customers)?Q.data.customers:[];U(J)}}}catch(H){console.warn("Failed to load customers:",H),U([])}finally{U(H=>Array.isArray(H)?H:[])}},A=async()=>{try{console.log("Loading service types..."),console.log("API endpoint:",`${Lt.SERVICES}/types`),console.log("Auth headers:",Ot());const k=await fetch(`${Lt.SERVICES}/types`,{headers:Ot()});if(console.log("Service types response status:",k.status),console.log("Service types response headers:",k.headers),k.ok){const H=await k.json();if(console.log("Service types response data:",H),H.success){console.log("Loaded service types:",H.data);const Q=Array.isArray(H.data)?H.data:[];if(console.log("Setting service types state:",Q),c(Q),n&&m.serviceType&&!m.serviceTypeId){console.log("Looking for matching service:",{serviceType:m.serviceType,serviceTypeId:m.serviceTypeId,availableServices:Q.map(L=>({id:L._id||L.id,name:L.name}))});const J=Q.find(L=>L.name===m.serviceType);J?(console.log("Found matching service for ID:",J),h(L=>({...L,serviceTypeId:J._id||J.id||""}))):console.log("No matching service found for:",m.serviceType)}if(n&&m.serviceTypeId&&!m.serviceType){console.log("Looking for matching service by ID:",{serviceTypeId:m.serviceTypeId,serviceType:m.serviceType,availableServices:Q.map(L=>({id:L._id||L.id,name:L.name}))});const J=Q.find(L=>(L._id||L.id)===m.serviceTypeId);J?(console.log("Found matching service by ID:",J),h(L=>({...L,serviceType:J.name||""}))):console.log("No matching service found for ID:",m.serviceTypeId)}}else console.error("Service types response not successful:",H),c([])}else{console.error("Failed to load service types:",k.status,k.statusText);const H=await k.text();console.error("Error response body:",H),c([])}}catch(k){console.warn("Failed to load service types:",k),console.error("Error details:",k),c([])}finally{c(k=>Array.isArray(k)?k:[])}},G=async()=>{try{const k=await fetch(`${Lt.SERVICES}/vehicle-makes`,{headers:Ot()});if(k.ok){const H=await k.json();if(H.success){const Q=Array.isArray(H.data)?H.data:[];u(Q)}}}catch(k){console.warn("Failed to load vehicle makes:",k),u([])}finally{u(k=>Array.isArray(k)?k:[])}},z=async k=>{var H;try{Z(!0);const Q=await fetch(`${Lt.APPOINTMENTS}/vehicles?customer=${k}`,{headers:Ot()});if(Q.ok){const J=await Q.json();if(J.success){const L=Array.isArray((H=J.data)==null?void 0:H.vehicles)?J.data.vehicles:[];E(L)}}}catch(Q){console.warn("Failed to load customer vehicles:",Q),E([])}finally{Z(!1),E(Q=>Array.isArray(Q)?Q:[])}},ie=async k=>{var H,Q;try{const J=await fetch(`${Lt.APPOINTMENTS}/vehicles?limit=1000`,{headers:Ot()});if(J.ok){const se=await J.json();if(se.success&&((H=se.data)!=null&&H.vehicles)){const ae=(Array.isArray(se.data.vehicles)?se.data.vehicles:[]).find(ce=>ce.id===k);if(ae){h(ce=>({...ce,vin:ae.vin||"",licensePlate:ae.licensePlate||""}));return}}}const L=await fetch(`${Lt.APPOINTMENTS}/vehicles?search=${k}`,{headers:Ot()});if(L.ok){const se=await L.json();if(se.success&&((Q=se.data)!=null&&Q.vehicles)){const ae=(Array.isArray(se.data.vehicles)?se.data.vehicles:[]).find(ce=>ce.id===k);ae&&h(ce=>({...ce,vin:ae.vin||"",licensePlate:ae.licensePlate||""}))}}}catch(J){console.warn("Failed to load vehicle details:",J)}},de=async k=>{var H;try{const Q=await fetch(`${Lt.CUSTOMERS}/${k}`,{headers:Ot()});if(Q.ok){const J=await Q.json();if(J.success&&((H=J.data)!=null&&H.customer)){const L=J.data.customer;h(se=>({...se,email:L.email||"",phone:L.phone||"",businessName:L.businessName||""}))}}}catch(Q){console.warn("Failed to load customer details:",Q)}};b.useEffect(()=>{const k=H=>{H.key==="Escape"&&s()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[s]),b.useEffect(()=>{if(m.vehicle&&m.customerType==="existing"){const k=m.vehicle.toLowerCase().trim(),H=(d||[]).filter(ae=>ae.toLowerCase().includes(k)),Q=k.match(/\b(19|20)\d{2}\b/),J=new Date().getFullYear();Q?parseInt(Q[0]):Array.from({length:30},(ae,ce)=>J-ce);const L=[];Q&&L.push(...H.map(ae=>`${Q[0]} ${ae}`));const se=Array.from({length:10},(ae,ce)=>J-ce);L.push(...H.flatMap(ae=>se.map(ce=>`${ce} ${ae}`)));const K=Array.from(new Set(L)).slice(0,15);f(K),v(K.length>0)}else v(!1)},[m.vehicle,m.customerType,d]);const xe=k=>{const{name:H,value:Q}=k.target;if(H==="date"&&k.target.type==="datetime-local"){const[J,L]=Q.split("T");h(se=>({...se,scheduledDate:J,scheduledTime:L||"09:00"}))}else if(H==="serviceType"){const J=o.find(L=>(L._id||L.id)===Q);J&&h(L=>({...L,serviceType:J.name,serviceTypeId:J._id||J.id,estimatedDuration:J.estimatedDuration||60}))}else if(H==="estimatedDuration"){const J=parseInt(Q)||0;h(L=>({...L,[H]:J}))}else h(J=>({...J,[H]:Q}));y[H]&&g(J=>({...J,[H]:void 0}))},he=k=>{if(k){const H=(O||[]).find(Q=>Q.id===k);H&&h(Q=>({...Q,vehicle:`${H.year} ${H.make} ${H.model}`,vehicleId:H.id,vin:H.vin||"",licensePlate:H.licensePlate||""}))}else h(H=>({...H,vehicle:"",vehicleId:"",vin:"",licensePlate:""}))},Pe=()=>{const k={};return m.existingCustomerId||(k.existingCustomerId="Please select an existing customer"),m.vehicleId||(k.vehicle="Please select a vehicle for this customer"),m.scheduledDate?new Date(`${m.scheduledDate}T${m.scheduledTime}`)<new Date&&(k.date="Please select a future date and time"):k.date="Appointment date and time is required",m.serviceTypeId||(k.serviceType="Service type is required"),(m.estimatedDuration<15||m.estimatedDuration>480)&&(k.estimatedDuration="Estimated duration must be between 15 and 480 minutes"),g(k),Object.keys(k).length===0},ee=async k=>{try{if(!Ye.isAuthenticated())throw new Error("Please login to create appointments");try{if(!(await fetch("http://localhost:3001/api/health")).ok)throw new Error("Backend server is not accessible")}catch{throw new Error("Backend server is not running. Please start the server with: npm run server")}let H=null;if(!k.existingCustomerId)throw new Error("Please select an existing customer");H=k.existingCustomerId;let Q=k.vehicleId;if(!Q)throw new Error("Please select a vehicle for this customer");const J=k.serviceTypeId;if(!J)throw new Error("Please select a valid service type");const L=Ye.getCurrentUserFromStorage(),se=(L==null?void 0:L.id)||null;if(!H)throw new Error("Failed to create or find customer. Please try again.");if(!Q)throw new Error("Failed to create or find vehicle. Please try again.");if(!se)throw new Error("User authentication required. Please login again.");const K={vehicle:Q,serviceType:J,scheduledDate:k.scheduledDate,scheduledTime:k.scheduledTime,estimatedDuration:k.estimatedDuration,assignedTo:se,priority:k.priority,status:k.status};k.serviceType&&k.serviceType.trim()&&(K.serviceDescription=k.serviceType.trim()),(!n||!(r!=null&&r.id))&&(K.customerId=H),k.technicianId&&k.technicianId.trim()&&(K.technician=k.technicianId),k.notes&&k.notes.trim()&&(K.notes=k.notes.trim(),K.customerNotes=k.notes.trim()),console.log("Sending appointment data:",K),console.log("Service type details:",{serviceType:K.serviceType,serviceDescription:K.serviceDescription,originalServiceType:k.serviceType,originalServiceTypeId:k.serviceTypeId});const ae=n&&(r!=null&&r.id)?`${Lt.APPOINTMENTS}/${r.id}`:Lt.APPOINTMENTS,ce=await fetch(ae,{method:n&&(r!=null&&r.id)?"PUT":"POST",headers:Ot(),body:JSON.stringify(K)});if(console.log("Response status:",ce.status),console.log("Response headers:",ce.headers),!ce.ok){const ve=await ce.json().catch(()=>({}));throw console.error("Appointment creation failed:",ve),new Error(ve.message||`Failed to save appointment (${ce.status})`)}const te=await ce.json();return console.log("Appointment saved successfully:",te),n&&(r!=null&&r.id)?P.success("Appointment updated successfully!"):P.success("Appointment saved to database successfully!"),te}catch(H){throw console.error("Error saving appointment to database:",H),P.error(H instanceof Error?H.message:"Failed to save appointment to database"),H}},Ce=async()=>{if(!(r!=null&&r.id)){P.error("No appointment to delete");return}if(window.confirm("Are you sure you want to delete this appointment? This action cannot be undone.")){S(!0);try{await _(Wf(r.id)).unwrap(),s()}catch(k){console.error("Failed to delete appointment:",k)}finally{S(!1)}}},V=async()=>{if(console.log("Form submission - current form state:",{serviceType:m.serviceType,serviceTypeId:m.serviceTypeId,isEditing:n,appointmentId:r==null?void 0:r.id}),!!Pe())try{N(!0);try{const k=await ee(m),H=n&&(r!=null&&r.id)?"Appointment updated and saved to database!":"Appointment created and saved to database!";P.success(H),console.log("Saving appointment data to parent:",k),t(k.data.appointment)}catch(k){if(console.warn("Database save failed:",k),k instanceof Error&&k.message.includes("login")){P.error("Please login to save appointments to the database"),setTimeout(()=>{window.location.href="/admin/login"},2e3);return}else if(k instanceof Error&&k.message.includes("Backend server")){P.error("Backend server is not running. Please start the server and try again.");return}else P.error("Database unavailable. Appointment saved locally."),t(m)}}catch(k){console.error("Error in handleSubmit:",k),P.error("Failed to create appointment. Please try again.")}finally{N(!1)}},Se=k=>{h(H=>({...H,customer:k.name,email:k.email,phone:k.phone||"",existingCustomerId:k.id,customerType:"existing"})),z(k.id),h(H=>({...H,vehicle:"",vehicleId:"",vin:"",licensePlate:""}))};return b.useEffect(()=>{},[m.email,m.customerType]),e.jsx(pe,{isOpen:!0,onClose:s,title:n?"Edit Appointment":"New Appointment",submitText:a||p?n?"Updating...":"Saving...":n?"Update Appointment":"Create Appointment",onSubmit:V,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Customer & Vehicle Selection"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Select Customer *"}),e.jsxs("select",{value:m.existingCustomerId,onChange:k=>{const H=k.target.value;if(H){const Q=(R||[]).find(J=>J.id===H);Q&&Se(Q)}else h(Q=>({...Q,customer:"",email:"",phone:"",existingCustomerId:"",vehicle:"",vehicleId:"",vin:"",licensePlate:""})),E([])},className:"form-select",required:!0,children:[e.jsx("option",{value:"",children:"Select a customer"}),(R||[]).map(k=>e.jsxs("option",{value:k.id,children:[k.name," - ",k.email]},k.id))]}),y.existingCustomerId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.existingCustomerId})]}),m.existingCustomerId&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Select Vehicle *"}),e.jsxs("select",{value:m.vehicleId,onChange:k=>he(k.target.value),className:"form-select",disabled:W,required:!0,children:[e.jsx("option",{value:"",children:W?"Loading vehicles...":"Select a vehicle"}),(O||[]).map(k=>e.jsxs("option",{value:k.id,children:[k.year," ",k.make," ",k.model," - ",k.licensePlate||"No Plate"]},k.id))]}),W&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Loading customer vehicles..."}),!W&&O.length===0&&m.existingCustomerId&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No vehicles found for this customer"}),y.vehicle&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.vehicle})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Appointment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Date *"}),e.jsx("input",{type:"date",name:"scheduledDate",className:"form-input",onChange:xe,value:m.scheduledDate,disabled:a||p,required:!0}),y.scheduledDate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.scheduledDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Time *"}),e.jsx("input",{type:"time",name:"scheduledTime",className:"form-input",onChange:xe,value:m.scheduledTime,disabled:a||p,required:!0}),y.scheduledTime&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.scheduledTime})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Service Type *"}),e.jsxs("select",{name:"serviceType",className:"form-select",onChange:xe,value:m.serviceTypeId,disabled:a||p,required:!0,children:[e.jsx("option",{value:"",children:"Select service type"}),(o||[]).map(k=>e.jsx("option",{value:k._id||k.id,children:k.name},k._id||k.id))]}),y.serviceType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.serviceType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{name:"priority",className:"form-select",onChange:xe,value:m.priority,disabled:a||p,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Estimated Duration (minutes) *"}),e.jsx("input",{type:"number",name:"estimatedDuration",min:"15",max:"480",placeholder:"60",className:"form-input",onChange:xe,value:m.estimatedDuration,disabled:a||p,required:!0}),y.estimatedDuration&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.estimatedDuration}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Duration between 15 minutes and 8 hours"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",className:"form-select",onChange:xe,value:m.status,disabled:a||p,children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{name:"notes",placeholder:"Any special instructions or notes",className:"form-textarea",rows:3,onChange:xe,value:m.notes,disabled:a||p})]})]}),n&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:Ce,disabled:a||p||w,className:"px-6 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Deleting...":"Delete Appointment"})})]})})}const SM={data:[{id:"apt1",customerId:"1",customerName:"John Smith",vehicleId:"v1",vehicleInfo:"2020 Toyota Camry",scheduledDate:"2025-08-05",scheduledTime:"09:00",estimatedDuration:30,serviceType:"Oil Change",description:"Regular oil change and filter replacement",status:"confirmed",technicianId:"t1",technicianName:"Mike Johnson",priority:"medium",createdDate:"2025-08-01",notes:"Customer prefers synthetic oil"},{id:"apt2",customerId:"2",customerName:"Lisa Brown",vehicleId:"v2",vehicleInfo:"2019 Ford Escape",scheduledDate:"2025-08-06",scheduledTime:"14:30",estimatedDuration:45,serviceType:"Tire Rotation",description:"Rotate all four tires and check pressure",status:"scheduled",technicianId:"t2",technicianName:"Tom Wilson",priority:"low",createdDate:"2025-08-02"},{id:"apt3",customerId:"1",customerName:"John Smith",vehicleId:"v1",vehicleInfo:"2020 Toyota Camry",scheduledDate:"2025-08-07",scheduledTime:"10:00",estimatedDuration:60,serviceType:"Brake Inspection",description:"Complete brake system inspection",status:"scheduled",priority:"high",createdDate:"2025-08-03",notes:"Customer reported squeaking noise"}],loading:!1,error:null,selectedAppointment:null},h2=Rt({name:"appointments",initialState:SM,reducers:{addAppointment:(s,t)=>{s.data.push(t.payload)},removeAppointment:(s,t)=>{s.data=s.data.filter(a=>a.id!==t.payload)},updateAppointment:(s,t)=>{const a=s.data.findIndex(r=>r.id===t.payload.id);a!==-1&&(s.data[a]=t.payload)},setAppointments:(s,t)=>{s.data=t.payload,s.loading=!1,s.error=null},setSelectedAppointment:(s,t)=>{s.selectedAppointment=t.payload},updateAppointmentStatus:(s,t)=>{const a=s.data.findIndex(r=>r.id===t.payload.id);a!==-1&&(s.data[a].status=t.payload.status)},setLoading:(s,t)=>{s.loading=t.payload},setError:(s,t)=>{s.error=t.payload,s.loading=!1}}}),{addAppointment:s0,removeAppointment:H7,updateAppointment:Tv,setAppointments:a0,setSelectedAppointment:W7,updateAppointmentStatus:q7,setLoading:Pv,setError:Y7}=h2.actions,CM=h2.reducer;function kM({appointments:s}){const t=Ue(),[a,r]=b.useState(new Date),[n,i]=b.useState("month"),[l,o]=b.useState(null),[c,d]=b.useState("09:00"),[u,m]=b.useState(!1),[h,y]=b.useState(!1),[g,j]=b.useState(null),[v,x]=b.useState(!1),[f,p]=b.useState(0),[N,w]=b.useState(null),[S,C]=b.useState(!1),[T,_]=b.useState(null),F=b.useRef(null),D=je(L=>L.appointments.data),R=s||D,U=async()=>{var L,se,K;try{console.log("Loading appointments from backend...");const ae=await Om.getAppointments();if(ae.success){if(!ae.data.appointments||ae.data.appointments.length===0){console.log("No appointments found, clearing Redux state"),t(a0([]));return}console.log(`Found ${ae.data.appointments.length} appointments`);const ce=ae.data.appointments.map(te=>{const ve=te.customer||{_id:"",name:"Unknown Customer"},ge=te.vehicle||{make:"",model:"",year:"",vin:"",licensePlate:"",mileage:0},xt=te.technician||{_id:"",name:""},cs=te.scheduledDate?new Date(te.scheduledDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];return{id:te._id||`apt-${Date.now()}`,customerId:ve._id||"",customerName:ve.name||"Unknown Customer",vehicleId:ge._id||ge.vin||"",vehicleInfo:ge.fullName||(ge.year&&ge.make&&ge.model?`${ge.year} ${ge.make} ${ge.model}`:"Vehicle info unavailable"),scheduledDate:cs,scheduledTime:te.scheduledTime||"09:00",estimatedDuration:te.estimatedDuration||60,serviceType:te.serviceType||"General Service",description:te.serviceDescription||te.serviceType||"General Service",status:te.status||"scheduled",technicianId:xt._id||void 0,technicianName:xt.name||void 0,priority:te.priority||"medium",createdDate:te.createdAt?new Date(te.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],notes:te.notes||"",vehicle:{id:ge._id||ge.vin||"",year:ge.year?parseInt(ge.year.toString()):0,make:ge.make||"",model:ge.model||"",vin:ge.vin||"",licensePlate:ge.licensePlate||"",mileage:ge.mileage||0}}});console.log("Dispatching transformed appointments to Redux:",ce.length),t(a0(ce))}else console.error("Failed to load appointments:",ae),P.error("Failed to load appointments")}catch(ae){console.error("Error loading appointments:",ae),((L=ae.response)==null?void 0:L.status)===401?P.error("Please log in to view appointments. Using local data."):((se=ae.response)==null?void 0:se.status)===403?P.error("You do not have permission to view appointments. Using local data."):ae.code==="NETWORK_ERROR"||(K=ae.message)!=null&&K.includes("fetch")?P.error("Cannot connect to server. Using local data."):P.error("Error loading appointments. Using local data.")}};b.useEffect(()=>{U()},[t,f]),b.useEffect(()=>{console.log("Appointments updated:",{count:R.length,refreshTrigger:f,appointments:R.map(L=>({id:L.id,customerName:L.customerName,scheduledDate:L.scheduledDate}))})},[R,f]);const O=L=>{const se=new Date(a);n==="month"?se.setMonth(a.getMonth()+(L==="next"?1:-1)):n==="week"?se.setDate(a.getDate()+(L==="next"?7:-7)):se.setDate(a.getDate()+(L==="next"?1:-1)),r(se)},E=L=>{const se=L.toISOString().split("T")[0],K=R.filter(ae=>ae.scheduledDate&&ae.scheduledDate===se);return f>0&&console.log(`Filtering appointments for ${se}:`,{totalAppointments:R.length,filteredCount:K.length,refreshTrigger:f}),K},W=b.useMemo(()=>{const L=a.getFullYear(),se=a.getMonth(),K=new Date(L,se,1),ae=new Date(L,se+1,0),ce=new Date(K),te=new Date(ae);ce.setDate(ce.getDate()-ce.getDay()),te.setDate(te.getDate()+(6-te.getDay()));const ve=[],ge=new Date(ce);for(;ge<=te;)ve.push({date:new Date(ge),isCurrentMonth:ge.getMonth()===se,isToday:ge.toDateString()===new Date().toDateString(),appointments:E(ge)}),ge.setDate(ge.getDate()+1);return ve},[a,R]),Z=b.useMemo(()=>{const L=new Date(a);L.setDate(a.getDate()-a.getDay());const se=[];for(let K=0;K<7;K++){const ae=new Date(L);ae.setDate(L.getDate()+K),se.push({date:ae,isToday:ae.toDateString()===new Date().toDateString(),appointments:E(ae)})}return se},[a,R]),I=L=>{switch(L){case"confirmed":return"bg-green-500";case"scheduled":return"bg-blue-500";case"in-progress":return"bg-yellow-500";case"completed":return"bg-gray-500";case"cancelled":return"bg-red-500";case"no-show":return"bg-red-400";default:return"bg-gray-400"}},$=L=>{switch(L){case"urgent":return"border-l-red-600";case"high":return"border-l-orange-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-green-500";default:return"border-l-gray-400"}},A=L=>{if(!L)return"--:-- --";const[se,K]=L.split(":"),ae=parseInt(se),ce=ae>=12?"PM":"AM";return`${ae%12||12}:${K} ${ce}`},G=L=>typeof L=="string"?L:L&&typeof L=="object"&&L.name?L.name:"Unknown Service",z=L=>{j(L),y(!0)},ie=async(L,se)=>{if(se.stopPropagation(),window.confirm("Are you sure you want to delete this appointment? This action cannot be undone."))try{await t(Wf(L.id)).unwrap(),h&&(y(!1),j(null)),P.success("Appointment deleted successfully!"),await new Promise(K=>setTimeout(K,100)),await U(),p(K=>K+1)}catch(K){console.error("Failed to delete appointment:",K),P.error("Failed to delete appointment. Please try again.")}},de=(L,se)=>{o(L),d(se||"09:00"),m(!0)},xe=async L=>{var se,K,ae,ce,te,ve;try{if(x(!0),L._id){const cr={id:L._id,customerId:((se=L.customer)==null?void 0:se._id)||L.customer,customerName:((K=L.customer)==null?void 0:K.name)||L.customerName,vehicleId:((ae=L.vehicle)==null?void 0:ae._id)||L.vehicle,vehicleInfo:((ce=L.vehicle)==null?void 0:ce.fullName)||L.vehicleInfo,scheduledDate:new Date(L.scheduledDate).toISOString().split("T")[0],scheduledTime:L.scheduledTime,estimatedDuration:L.estimatedDuration,serviceType:L.serviceType,description:L.serviceDescription,status:L.status,priority:L.priority,createdDate:new Date(L.createdAt).toISOString().split("T")[0],notes:L.notes||"",technicianId:((te=L.technician)==null?void 0:te._id)||L.technicianId,technicianName:((ve=L.technician)==null?void 0:ve.name)||L.technicianName};t(s0(cr)),m(!1),await U();return}if(!L.customer||!L.vehicle||!L.date||!L.serviceType){P.error("Please fill in all required fields");return}let ge,xt;ge=L.scheduledDate||L.date,xt=L.scheduledTime||L.time||c||"09:00";const cs={id:`apt${Date.now()}`,customerId:`customer${Date.now()}`,customerName:L.customer,vehicleId:`vehicle${Date.now()}`,vehicleInfo:L.vehicle,scheduledDate:ge,scheduledTime:xt,estimatedDuration:L.estimatedDuration||60,serviceType:L.serviceType,description:L.serviceType,status:L.status||"scheduled",priority:L.priority||"medium",createdDate:new Date().toISOString().split("T")[0],notes:L.notes||"",technicianId:L.technicianId||void 0,technicianName:L.technicianName||void 0};await new Promise(cr=>setTimeout(cr,500)),t(s0(cs)),m(!1),await U()}catch(ge){console.error("Error creating appointment:",ge),P.error("Failed to create appointment. Please try again.")}finally{x(!1)}},he=async L=>{try{if(!g)return;const se={...g,...L};await new Promise(K=>setTimeout(K,500)),t(Tv(se)),P.success("Appointment updated successfully!"),y(!1),j(null),await U()}catch(se){console.error("Error updating appointment:",se),P.error("Failed to update appointment. Please try again.")}},Pe=(L,se)=>{L.dataTransfer.effectAllowed="move",L.dataTransfer.setData("text/plain",se.id),w(se),C(!0);const K=L.target;K.style.opacity="0.5",K.style.transform="rotate(5deg) scale(1.05)",K.style.transition="all 0.2s ease",F.current&&L.dataTransfer.setDragImage(F.current,0,0)},ee=()=>{C(!1),w(null),_(null),document.querySelectorAll('[draggable="true"]').forEach(se=>{const K=se;K.style.opacity="",K.style.transform="",K.style.transition=""})},Ce=(L,se)=>{L.preventDefault(),L.dataTransfer.dropEffect="move",_(se);const K=L.currentTarget;K.classList.contains("drag-over")||(K.classList.add("drag-over"),K.style.backgroundColor="#dbeafe",K.style.borderColor="#3b82f6",K.style.transform="scale(1.02)",K.style.transition="all 0.2s ease")},V=L=>{const se=L.currentTarget;se.classList.remove("drag-over"),se.style.backgroundColor="",se.style.borderColor="",se.style.transform="",se.style.transition=""},Se=async(L,se)=>{L.preventDefault();const K=L.currentTarget;if(K.classList.remove("drag-over"),K.style.backgroundColor="",K.style.borderColor="",K.style.transform="",K.style.transition="",!N)return;const ae=se.toISOString().split("T")[0];if(N.scheduledDate===ae){_(null);return}try{const te={...N,scheduledDate:ae},ve={scheduledDate:new Date(ae).toISOString()};console.log("Sending update data:",ve);const xt=await(await fetch(`/api/appointments/${N.id}`,{method:"PUT",headers:Ot(),body:JSON.stringify(ve)})).json();xt.success?(t(Tv(te)),P.success("Appointment moved successfully!"),await U()):P.error(xt.message||"Failed to move appointment")}catch(te){console.error("Error moving appointment:",te),P.error("Failed to move appointment. Please try again.")}_(null),document.querySelectorAll(".drag-over").forEach(te=>{const ve=te;ve.classList.remove("drag-over"),ve.style.backgroundColor="",ve.style.borderColor="",ve.style.transform="",ve.style.transition=""})},k=()=>{m(!1),y(!1),j(null),p(L=>L+1)},H=()=>e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(L=>e.jsx("div",{className:"p-2 text-center font-medium text-gray-500 text-sm",children:L},L)),W.map((L,se)=>e.jsxs("div",{className:`min-h-24 p-1 border border-gray-200 cursor-pointer hover:bg-gray-50 ${L.isCurrentMonth?"bg-white":"bg-gray-50 text-gray-400"} ${L.isToday?"bg-blue-50 border-blue-200":""} ${T&&T.toDateString()===L.date.toDateString()?"bg-blue-100 border-blue-300":""}`,onClick:()=>de(L.date),onDragOver:K=>Ce(K,L.date),onDragLeave:V,onDrop:K=>Se(K,L.date),children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${L.isToday?"text-blue-600":""}`,children:L.date.getDate()}),e.jsxs("div",{className:"space-y-1",children:[L.appointments.filter(K=>K.customerName&&K.serviceType).slice(0,2).map(K=>e.jsxs("div",{className:`text-xs p-1 rounded border-l-2 ${$(K.priority)} bg-gray-100 truncate cursor-pointer hover:bg-gray-200 ${S&&(N==null?void 0:N.id)===K.id?"opacity-50":""}`,title:`${K.customerName} - ${G(K.serviceType)}`,draggable:!0,onDragStart:ae=>Pe(ae,K),onDragEnd:ee,onClick:ae=>{ae.stopPropagation(),z(K)},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${I(K.status)}`}),e.jsx("span",{className:"font-medium",children:A(K.scheduledTime)})]}),e.jsx("div",{className:"truncate",children:K.customerName})]},K.id)),(()=>{const K=L.appointments.filter(ae=>ae.customerName&&ae.serviceType);return K.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 font-medium",children:["+",K.length-2," more"]})})(),L.appointments.filter(K=>K.customerName&&K.serviceType).length===0&&L.isCurrentMonth&&e.jsx("div",{className:"text-xs text-gray-400 text-center mt-2 opacity-0 hover:opacity-100 transition-opacity",children:"Click to add appointment"})]})]},se))]}),Q=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[e.jsx("div",{className:"p-2 text-sm font-medium text-gray-500"}),Z.map((L,se)=>e.jsxs("div",{className:"p-2 text-center",children:[e.jsx("div",{className:`text-sm font-medium ${L.isToday?"text-blue-600":"text-gray-700"}`,children:L.date.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-bold ${L.isToday?"text-blue-600":"text-gray-900"}`,children:L.date.getDate()})]},se))]}),e.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[e.jsx("div",{className:"space-y-2",children:Array.from({length:12},(L,se)=>se+8).map(L=>e.jsx("div",{className:"h-16 text-xs text-gray-500 text-right pr-2 pt-1",children:A(`${L.toString().padStart(2,"0")}:00`)},L))}),Z.map((L,se)=>e.jsx("div",{className:"space-y-2",children:Array.from({length:12},(K,ae)=>ae+8).map(K=>{const ae=`${K.toString().padStart(2,"0")}:00`,ce=L.appointments.filter(te=>te.scheduledTime&&te.scheduledTime.startsWith(K.toString().padStart(2,"0")));return e.jsxs("div",{className:`h-16 border border-gray-100 relative cursor-pointer hover:bg-gray-50 transition-colors ${T&&T.toDateString()===L.date.toDateString()?"bg-blue-100 border-blue-300":""}`,onClick:()=>de(L.date,ae),title:`Click to add appointment at ${A(ae)}`,onDragOver:te=>Ce(te,L.date),onDragLeave:V,onDrop:te=>Se(te,L.date),children:[ce.filter(te=>te.customerName&&te.serviceType).map((te,ve)=>e.jsxs("div",{className:`absolute inset-1 p-1 rounded text-xs cursor-pointer hover:bg-opacity-90 ${$(te.priority)} bg-blue-100 ${S&&(N==null?void 0:N.id)===te.id?"opacity-50":""}`,onClick:ge=>{ge.stopPropagation(),z(te)},title:`${te.customerName} - ${G(te.serviceType)}`,draggable:!0,onDragStart:ge=>Pe(ge,te),onDragEnd:ee,children:[e.jsx("div",{className:"font-medium truncate",children:te.customerName}),e.jsx("div",{className:"text-gray-600 truncate",children:G(te.serviceType)})]},te.id)),ce.length===0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"text-xs text-gray-400",children:"+"})}),e.jsx("div",{ref:F,className:"fixed -top-1000 left-0 w-56 p-3 bg-white border-2 border-blue-400 rounded-lg shadow-xl pointer-events-none opacity-0",style:{zIndex:-1},children:N&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("div",{className:"font-semibold text-blue-700",children:N.customerName})]}),e.jsx("div",{className:"text-gray-700 font-medium",children:G(N.serviceType)}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["⏰ ",A(N.scheduledTime)]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["📅 ",N.scheduledDate]})]}),e.jsx("div",{className:"mt-2 text-xs text-blue-600 font-medium",children:"Drop to reschedule appointment"})]})})]},K)})},se))]})]}),J=()=>{const L=E(a),se=Array.from({length:24},(K,ae)=>ae);return e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-4",children:a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"space-y-1",children:se.map(K=>{const ae=`${K.toString().padStart(2,"0")}:00`,ce=L.filter(te=>te.scheduledTime&&te.scheduledTime.startsWith(K.toString().padStart(2,"0")));return e.jsxs("div",{className:"flex border-b border-gray-100",children:[e.jsx("div",{className:"w-20 p-2 text-sm text-gray-500 font-medium",children:A(ae)}),e.jsxs("div",{className:`flex-1 p-2 min-h-12 cursor-pointer hover:bg-gray-50 transition-colors ${T&&T.toDateString()===a.toDateString()?"bg-blue-100":""}`,onClick:()=>de(a,ae),title:`Click to add appointment at ${A(ae)}`,onDragOver:te=>Ce(te,a),onDragLeave:V,onDrop:te=>Se(te,a),children:[ce.filter(te=>te.customerName&&te.serviceType).map(te=>e.jsxs("div",{className:`p-3 mb-2 rounded-lg border-l-4 ${$(te.priority)} bg-white shadow-sm cursor-pointer hover:shadow-md transition-shadow ${S&&(N==null?void 0:N.id)===te.id?"opacity-50":""}`,onClick:ve=>{ve.stopPropagation(),z(te)},draggable:!0,onDragStart:ve=>Pe(ve,te),onDragEnd:ee,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:te.customerName}),e.jsx("p",{className:"text-sm text-gray-600",children:G(te.serviceType)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${te.status==="confirmed"?"bg-green-100 text-green-800":te.status==="scheduled"?"bg-blue-100 text-blue-800":te.status==="in-progress"?"bg-yellow-100 text-yellow-800":te.status==="completed"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:te.status}),e.jsx("button",{onClick:ve=>ie(te,ve),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete appointment",children:e.jsx(Ls,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($t,{className:"w-4 h-4"}),e.jsxs("span",{children:[A(te.scheduledTime)," (",te.estimatedDuration,"min)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B1,{className:"w-4 h-4"}),e.jsx("span",{children:te.vehicleInfo})]}),te.technicianName&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ia,{className:"w-4 h-4"}),e.jsx("span",{children:te.technicianName})]})]}),te.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:te.description})]},te.id)),ce.length===0&&e.jsx("div",{className:"flex items-center justify-center h-12 text-gray-400 opacity-0 hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"text-sm",children:"Click to add appointment"})})]})]},K)})})]})};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(hs,{className:"w-6 h-6"}),"Appointment Calendar"]}),e.jsxs("div",{className:"text-lg font-medium text-gray-600",children:[n==="month"&&a.toLocaleDateString("en-US",{month:"long",year:"numeric"}),n==="week"&&`Week of ${a.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,n==="day"&&a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["month","week","day"].map(L=>e.jsx("button",{onClick:()=>i(L),className:`px-3 py-1 rounded text-sm font-medium capitalize ${n===L?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:L},L))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O("prev"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(KT,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>r(new Date),className:"px-3 py-1 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg",children:"Today"}),e.jsx("button",{onClick:()=>O("next"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(GT,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:()=>{m(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"+ New Appointment"})]})]}),e.jsxs("div",{className:"p-6",children:[s&&s.length!==(D==null?void 0:D.length)&&e.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing ",e.jsx("strong",{children:s.length})," filtered appointments (of ",(D==null?void 0:D.length)||0," total)"]})]})}),s&&s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(hs,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No appointments found"}),e.jsx("p",{className:"text-gray-400",children:"Try adjusting your search terms or filters."})]}),(!s||s.length>0)&&e.jsxs(e.Fragment,{children:[n==="month"&&H(),n==="week"&&Q(),n==="day"&&J()]})]}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),[{status:"scheduled",color:"bg-blue-500",label:"Scheduled"},{status:"confirmed",color:"bg-green-500",label:"Confirmed"},{status:"in-progress",color:"bg-yellow-500",label:"In Progress"},{status:"completed",color:"bg-gray-500",label:"Completed"}].map(({status:L,color:se,label:K})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${se}`}),e.jsx("span",{className:"text-gray-600",children:K})]},L))]})}),u&&e.jsx(_u,{onClose:k,onSave:xe,isLoading:v,selectedDate:l||void 0,selectedTime:c}),h&&g&&e.jsx(_u,{onClose:k,onSave:he,isLoading:v,appointment:g,isEditing:!0}),e.jsx("div",{ref:F,className:"fixed -top-1000 left-0 w-48 p-2 bg-white border border-gray-300 rounded shadow-lg pointer-events-none opacity-0",style:{zIndex:-1},children:N&&e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:N.customerName}),e.jsx("div",{className:"text-gray-600",children:G(N.serviceType)}),e.jsx("div",{className:"text-xs text-gray-500",children:A(N.scheduledTime)})]})})]})}function _M(){var ee,Ce;const s=Ue(),[t,a]=b.useState("calendar"),[r,n]=b.useState("all"),[i,l]=b.useState("all"),[o,c]=b.useState(""),[d,u]=b.useState(!1),[m,h]=b.useState(!1),[y,g]=b.useState(!1),[j,v]=b.useState(!1),[x,f]=b.useState(null),[p,N]=b.useState(!1),[w,S]=b.useState(!0),[C,T]=b.useState(!1),_=je(V=>V.appointments.data),F=je(V=>V.appointments.loading),[D,R]=b.useState([]),U=async()=>{try{const V=await fetch(`${Lt.CUSTOMERS}/technicians`,{headers:Ot()});if(V.ok){const Se=await V.json();Se.success&&R(Se.data.technicians||[])}}catch(V){console.error("Error loading technicians:",V),R([])}};b.useEffect(()=>{O(),U()},[]);const O=async()=>{try{S(!0),s(Pv(!0));const V=await Om.getAppointments({status:r!=="all"?r:void 0,technicianId:i!=="all"?i:void 0});if(V.success){console.log("Appointments API response:",V.data);const Se=(V.data.appointments||[]).map((k,H)=>{var Q,J,L,se,K;try{let ae="Unknown Customer";k.customer?typeof k.customer=="string"?ae=k.customer:k.customer.name?ae=k.customer.name:(Q=k.customer.contactPerson)!=null&&Q.name?ae=k.customer.contactPerson.name:k.customer.businessName&&(ae=k.customer.businessName):k.customerName&&(ae=k.customerName);let ce="Unknown Vehicle";k.vehicle?typeof k.vehicle=="string"?ce=k.vehicle:k.vehicle.year&&k.vehicle.make&&k.vehicle.model&&(ce=`${k.vehicle.year} ${k.vehicle.make} ${k.vehicle.model}`):k.vehicleInfo&&(ce=k.vehicleInfo);let te="Unknown Service";return k.serviceType?typeof k.serviceType=="string"?te=k.serviceType:k.serviceType.name?te=k.serviceType.name:k.serviceType.category&&(te=k.serviceType.category):k.serviceDescription?te=k.serviceDescription:k.service&&(te=k.service),{id:k._id||k.id||`apt_${Date.now()}_${Math.random()}`,customerId:((J=k.customer)==null?void 0:J._id)||k.customerId||"",customerName:ae||"Unknown Customer",vehicleId:((L=k.vehicle)==null?void 0:L._id)||k.vehicleId||"",vehicleInfo:ce||"Unknown Vehicle",scheduledDate:k.scheduledDate?new Date(k.scheduledDate).toISOString().split("T")[0]:k.date||new Date().toISOString().split("T")[0],scheduledTime:k.scheduledTime||k.time||"09:00",estimatedDuration:k.estimatedDuration||60,serviceType:te||"Unknown Service",description:k.serviceDescription||k.description||te||"No description",status:k.status||"scheduled",technicianId:((se=k.technician)==null?void 0:se._id)||k.technicianId||"",technicianName:((K=k.technician)==null?void 0:K.name)||k.technicianName||"",priority:k.priority||"medium",createdDate:k.createdAt?new Date(k.createdAt).toISOString().split("T")[0]:k.createdDate||new Date().toISOString().split("T")[0],notes:k.notes||""}}catch(ae){return console.error(`Error transforming appointment at index ${H}:`,ae,k),{id:`error_apt_${H}_${Date.now()}`,customerId:"",customerName:"Error Loading Customer",vehicleId:"",vehicleInfo:"Error Loading Vehicle",scheduledDate:new Date().toISOString().split("T")[0],scheduledTime:"09:00",estimatedDuration:60,serviceType:"Error Loading Service",description:"Error loading appointment data",status:"scheduled",technicianId:"",technicianName:"",priority:"medium",createdDate:new Date().toISOString().split("T")[0],notes:"Error occurred while loading this appointment"}}});console.log("Transformed appointments:",Se),console.log("Sample appointment for search testing:",Se[0]),s(a0(Se))}else console.error("Appointments API error:",V),P.error(V.message||"Failed to fetch appointments")}catch(V){console.error("Error fetching appointments:",V),P.error("Failed to load appointments")}finally{S(!1),s(Pv(!1))}};b.useEffect(()=>{O()},[r,i]);const E=(_&&Array.isArray(_)?_:[]).filter(V=>{var Se,k,H,Q,J,L,se;try{if(r!=="all"&&V.status!==r||i!=="all"&&V.technicianId!==i)return!1;if(o&&o.trim()){const K=o.toLowerCase().trim(),ae=((Se=V.customerName)==null?void 0:Se.toLowerCase().includes(K))||!1,ce=((k=V.vehicleInfo)==null?void 0:k.toLowerCase().includes(K))||!1,te=(typeof V.serviceType=="string"?V.serviceType.toLowerCase().includes(K):((Q=(H=V.serviceType)==null?void 0:H.name)==null?void 0:Q.toLowerCase().includes(K))||!1)||!1,ve=((J=V.technicianName)==null?void 0:J.toLowerCase().includes(K))||!1,ge=((L=V.notes)==null?void 0:L.toLowerCase().includes(K))||!1,xt=((se=V.description)==null?void 0:se.toLowerCase().includes(K))||!1;if(o&&(ae||ce||te||ve||ge||xt)&&console.log("Search match found:",{searchTerm:o,appointmentId:V.id,customerName:V.customerName,vehicleInfo:V.vehicleInfo,serviceType:V.serviceType,technicianName:V.technicianName,matches:{customerNameMatch:ae,vehicleInfoMatch:ce,serviceTypeMatch:te,technicianNameMatch:ve,notesMatch:ge,descriptionMatch:xt}}),!ae&&!ce&&!te&&!ve&&!ge&&!xt)return!1}return!0}catch(K){return console.error("Error filtering appointment:",K,V),!0}});o&&o.trim()&&console.log("Search results:",{searchTerm:o.trim(),totalAppointments:(_==null?void 0:_.length)||0,filteredCount:E.length,searchFields:["customerName","vehicleInfo","serviceType","technicianName","notes","description"]}),i!=="all"&&console.log("Technician filter active:",{filterValue:i,totalAppointments:_.length,filteredCount:E.length,appointmentsWithTechnician:(_&&Array.isArray(_)?_:[]).filter(V=>V.technicianId).map(V=>({id:V.id,technicianId:V.technicianId,technicianName:V.technicianName}))});const W=Array.from(new Set((_&&Array.isArray(_)?_:[]).map(V=>V.status))),Z=async V=>{try{if(N(!0),!V.customer||!V.vehicle||!V.scheduledDate||!V.scheduledTime||!V.serviceType){P.error("Please fill in all required fields");return}const Se={id:V._id||`apt${Date.now()}`,customerId:V.customerId,customerName:V.customer,vehicleId:V.vehicleId,vehicleInfo:V.vehicle,scheduledDate:V.scheduledDate,scheduledTime:V.scheduledTime,estimatedDuration:60,serviceType:V.serviceType,description:V.serviceType,status:"scheduled",priority:"medium",createdDate:new Date().toISOString().split("T")[0],notes:V.notes||"",technicianId:V.technicianId||(D.length>0?D[0].id:void 0),technicianName:V.technicianName||(D.length>0?D[0].name:void 0)};s(s0(Se)),P.success("Appointment created successfully!"),u(!1),O()}catch(Se){console.error("Error creating appointment:",Se),P.error("Failed to create appointment. Please try again.")}finally{N(!1)}},I=()=>{u(!1)},$=V=>{console.log("Editing appointment:",V),console.log("Appointment ID:",V.id),f(V),h(!0)},A=async V=>{var Se;try{N(!0),console.log("Update appointment data received:",V);let k={};if(V.scheduledDate&&V.scheduledTime){let J=V.serviceType;typeof V.serviceType=="object"&&V.serviceType!==null&&(J=V.serviceType._id||V.serviceType.id),k={scheduledDate:V.scheduledDate,scheduledTime:V.scheduledTime,serviceType:J,technicianId:V.technicianId||void 0,priority:V.priority||"medium",estimatedDuration:V.estimatedDuration||60},V.notes&&V.notes.trim()&&(k.notes=V.notes.trim())}else if(V.date)k={scheduledDate:V.date.split("T")[0],scheduledTime:((Se=V.date.split("T")[1])==null?void 0:Se.substring(0,5))||"09:00",serviceType:V.serviceTypeId||V.serviceType,technicianId:V.technicianId||void 0,priority:V.priority||"medium",estimatedDuration:V.estimatedDuration||60},V.notes&&V.notes.trim()&&(k.notes=V.notes.trim());else{if(!V.scheduledDate||!V.scheduledTime){P.error("Date and time are required");return}let J=V.serviceType;typeof V.serviceType=="object"&&V.serviceType!==null&&(J=V.serviceType._id||V.serviceType.id),k={scheduledDate:V.scheduledDate,scheduledTime:V.scheduledTime,serviceType:J,technicianId:V.technicianId||void 0,priority:V.priority||"medium",estimatedDuration:V.estimatedDuration||60},V.notes&&V.notes.trim()&&(k.notes=V.notes.trim())}console.log("Sending update payload:",k),console.log("Service type processing:",{original:V.serviceType,extractedId:k.serviceType,isObject:typeof V.serviceType=="object"}),console.log("Updating appointment ID:",x==null?void 0:x.id);const H=await fetch(`${Lt.APPOINTMENTS}/${x==null?void 0:x.id}`,{method:"PUT",headers:Ot(),body:JSON.stringify(k)});console.log("Response status:",H.status),console.log("Response headers:",H.headers);const Q=await H.json();console.log("Response result:",Q),Q.success?(P.success("Appointment updated successfully!"),h(!1),f(null),O()):P.error(Q.message||"Failed to update appointment")}catch(k){console.error("Error updating appointment:",k),P.error("Failed to update appointment. Please try again.")}finally{N(!1)}},G=V=>{f(V),g(!0)},z=V=>{f(V),v(!0)},ie=async()=>{if(!(x!=null&&x.id)){P.error("No appointment selected for deletion");return}try{T(!0);const Se=await(await fetch(`${Lt.APPOINTMENTS}/${x.id}`,{method:"DELETE",headers:Ot()})).json();Se.success?(P.success("Appointment deleted successfully!"),v(!1),f(null),O()):P.error(Se.message||"Failed to delete appointment")}catch(V){console.error("Error deleting appointment:",V),P.error("Failed to delete appointment. Please try again.")}finally{T(!1)}},de=()=>{h(!1),f(null)},xe=()=>{g(!1),f(null)},he=()=>{v(!1),f(null)},Pe=V=>{V.preventDefault()};return w?e.jsx("div",{className:"loading-container",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-text",children:"Loading appointments..."})]})}):e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Appointment Management"}),e.jsx("p",{className:"text-secondary-600",children:"Schedule and manage customer appointments"})]}),e.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[e.jsx(_s,{className:"w-5 h-5 mr-2"}),"New Appointment"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600",children:(_==null?void 0:_.length)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(hs,{className:"w-6 h-6 text-primary-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Confirmed"}),e.jsx("p",{className:"text-3xl font-bold text-success-600",children:(_&&Array.isArray(_)?_:[]).filter(V=>V.status==="confirmed").length})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(In,{className:"w-6 h-6 text-success-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-warning-600",children:(_&&Array.isArray(_)?_:[]).filter(V=>V.status==="in-progress").length})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx($t,{className:"w-6 h-6 text-warning-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:(_&&Array.isArray(_)?_:[]).filter(V=>V.status==="completed").length})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(iP,{className:"w-6 h-6 text-info-600"})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Or,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:"Search & Filters"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-secondary-100 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>a("calendar"),className:`p-2 rounded-lg transition-all duration-200 ${t==="calendar"?"bg-primary-600 text-white shadow-sm":"text-secondary-600 hover:text-secondary-900 hover:bg-white"}`,title:"Calendar View",children:e.jsx(hs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a("grid"),className:`p-2 rounded-lg transition-all duration-200 ${t==="grid"?"bg-primary-600 text-white shadow-sm":"text-secondary-600 hover:text-secondary-900 hover:bg-white"}`,title:"Grid View",children:e.jsx(lv,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>{O(),U()},className:"p-2 text-secondary-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200",title:"Refresh data",children:e.jsx(_i,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary-400",children:e.jsx(Or,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"Search by customer, vehicle, service, technician, or notes...",value:o,onChange:V=>c(V.target.value),className:"form-input w-full pl-12 pr-4 py-4",autoComplete:"off"}),o&&e.jsx("button",{type:"button",onClick:()=>c(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-secondary-400 hover:text-secondary-600",children:"✕"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:r,onChange:V=>n(V.target.value),className:"form-input w-full",children:[e.jsx("option",{value:"all",children:"All Status"}),(W&&Array.isArray(W)?W:[]).map(V=>e.jsx("option",{value:V,className:"capitalize",children:V.replace("-"," ")},V))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Technician"}),e.jsxs("select",{value:i,onChange:V=>l(V.target.value),className:"form-input w-full",children:[e.jsx("option",{value:"all",children:"All Technicians"}),(D&&Array.isArray(D)?D:[]).map(V=>e.jsx("option",{value:V.id||V._id,children:V.name},V.id||V._id))]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-secondary-200",children:[e.jsxs("div",{className:"text-sm text-secondary-500",children:[E.length," appointment",E.length!==1?"s":""," found"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{c(""),n("all"),l("all")},className:"btn-outline",children:"Clear All"}),e.jsx("button",{onClick:Pe,className:"btn-primary",children:"Apply Filters"})]})]})]})]}),o&&e.jsx("div",{className:"card bg-gradient-to-r from-primary-50 to-info-50 border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary-500 to-info-500 rounded-xl flex items-center justify-center",children:e.jsx(Or,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-primary-700",children:"Search Results"}),e.jsx("div",{className:"w-1 h-1 bg-primary-400 rounded-full"}),e.jsxs("span",{className:"text-sm text-primary-600",children:['"',o,'"']})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-lg font-bold text-primary-800",children:[E.length," appointment",E.length!==1?"s":""," found"]}),t==="calendar"&&e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-medium",children:"Calendar view"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{c(""),n("all"),l("all")},className:"btn-outline text-primary-600 hover:text-primary-800 hover:bg-primary-50",children:[e.jsx(_i,{className:"w-4 h-4"}),"Clear All"]}),e.jsx("button",{onClick:()=>c(""),className:"btn-primary",children:"✕ Clear Search"})]})]})}),t==="calendar"?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(hs,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-secondary-900",children:"Calendar View"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"Interactive calendar for appointment scheduling"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-semibold",children:[E.length," appointment",E.length!==1?"s":""]})})]})}),e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-100 overflow-hidden",children:e.jsx(kM,{appointments:E})})})]}):e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(lv,{className:"w-5 h-5 text-success-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-secondary-900",children:"Appointments Grid"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"Card-based view of all appointments"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full"}),e.jsx("span",{className:"text-sm text-secondary-600",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-warning-500 rounded-full"}),e.jsx("span",{className:"text-sm text-secondary-600",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-info-500 rounded-full"}),e.jsx("span",{className:"text-sm text-secondary-600",children:"Completed"})]})]})]})}),e.jsx("div",{className:"p-8",children:F?e.jsx("div",{className:"flex items-center justify-center py-24",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 border-4 border-transparent border-t-primary-400 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsx("h3",{className:"text-lg font-semibold text-secondary-700 mb-2",children:"Loading Appointments"}),e.jsx("p",{className:"text-secondary-500",children:"Please wait while we fetch your data..."})]})}):E.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-700 text-sm font-bold",children:E.length})}),e.jsxs("span",{className:"text-lg font-semibold text-secondary-900",children:[E.length," appointment",E.length!==1?"s":""," found"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-secondary-500",children:[e.jsx("span",{children:"Showing all results"}),e.jsx("div",{className:"w-1 h-1 bg-secondary-400 rounded-full"}),e.jsx("span",{children:"Grid view"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:E.map((V,Se)=>e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary-600 to-info-600 rounded-2xl blur opacity-0 group-hover:opacity-20 transition duration-500"}),e.jsx("div",{className:"relative",children:e.jsx(wM,{appointment:V,onEdit:$,onView:G,onDelete:z})})]},V.id))})]}):e.jsxs("div",{className:"text-center py-24",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-secondary-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(hs,{className:"w-12 h-12 text-secondary-400"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-primary-700 text-xs font-bold",children:"!"})})]}),e.jsx("h3",{className:"text-2xl font-bold text-secondary-700 mb-4",children:"No appointments found"}),e.jsx("p",{className:"text-secondary-500 mb-8 max-w-md mx-auto leading-relaxed",children:o||r!=="all"||i!=="all"?"Try adjusting your filters or search terms to find appointments.":"Get started by creating your first appointment to begin scheduling."}),!o&&r==="all"&&i==="all"&&e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("button",{onClick:()=>u(!0),className:"btn-primary px-8 py-4",children:[e.jsx(_s,{className:"w-6 h-6"}),"Create First Appointment"]}),e.jsxs("button",{onClick:()=>{c(""),n("all"),l("all")},className:"btn-outline px-6 py-4",children:[e.jsx(_i,{className:"w-5 h-5"}),"Reset Filters"]})]})]})})]}),d&&e.jsx(_u,{onClose:I,onSave:Z,isLoading:p}),m&&x&&e.jsx(_u,{appointment:x,isEditing:!0,onClose:de,onSave:A,isLoading:p}),y&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-primary-600 p-6 rounded-t-3xl",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Appointment Details"}),e.jsx("button",{onClick:xe,className:"text-white/80 hover:text-white p-2 rounded-xl hover:bg-white/20 transition-all duration-200",children:"✕"})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-2",children:"Customer"}),e.jsx("p",{className:"text-lg font-semibold text-secondary-900",children:x.customerName})]}),e.jsxs("div",{className:"bg-success-50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-2",children:"Vehicle"}),e.jsx("p",{className:"text-lg font-semibold text-secondary-900",children:x.vehicleInfo})]}),e.jsxs("div",{className:"bg-info-50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-2",children:"Date & Time"}),e.jsxs("p",{className:"text-lg font-semibold text-secondary-900",children:[x.scheduledDate," at ",x.scheduledTime]})]}),e.jsxs("div",{className:"bg-warning-50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-2",children:"Service"}),e.jsx("p",{className:"text-lg font-semibold text-secondary-900",children:typeof x.serviceType=="string"?x.serviceType:((ee=x.serviceType)==null?void 0:ee.name)||"Unknown Service"})]}),e.jsxs("div",{className:"bg-secondary-50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-2",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-semibold ${x.status==="confirmed"?"bg-success-100 text-success-800 border border-success-200":x.status==="in-progress"?"bg-warning-100 text-warning-800 border border-warning-200":x.status==="completed"?"bg-info-100 text-info-800 border border-info-200":"bg-secondary-100 text-secondary-800 border border-secondary-200"}`,children:(Ce=x.status)==null?void 0:Ce.replace("-"," ")})]}),e.jsxs("div",{className:"bg-error-50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-2",children:"Priority"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-semibold ${x.priority==="high"?"bg-error-100 text-error-800 border border-error-200":x.priority==="medium"?"bg-warning-100 text-warning-800 border border-warning-200":"bg-success-100 text-success-800 border border-success-200"}`,children:x.priority})]}),x.technicianName&&e.jsxs("div",{className:"bg-primary-50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-2",children:"Technician"}),e.jsx("p",{className:"text-lg font-semibold text-secondary-900",children:x.technicianName})]}),e.jsxs("div",{className:"bg-info-50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-2",children:"Duration"}),e.jsxs("p",{className:"text-lg font-semibold text-secondary-900",children:[x.estimatedDuration," min"]})]})]}),x.notes&&e.jsxs("div",{className:"bg-secondary-50 p-6 rounded-2xl",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-700 mb-3",children:"Notes"}),e.jsx("p",{className:"text-secondary-900 leading-relaxed",children:x.notes})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 p-6 bg-secondary-50 rounded-b-3xl",children:[e.jsx("button",{onClick:xe,className:"btn-outline",children:"Close"}),e.jsx("button",{onClick:()=>{g(!1),$(x)},className:"btn-primary",children:"Edit Appointment"})]})]})}),j&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"bg-error-600 p-6 rounded-t-3xl",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(Ls,{className:"h-8 w-8 text-white"})})}),e.jsx("h3",{className:"text-xl font-bold text-white text-center",children:"Delete Appointment"})]}),e.jsxs("div",{className:"p-8 text-center",children:[e.jsxs("p",{className:"text-secondary-700 mb-4",children:["Are you sure you want to delete the appointment for"," ",e.jsx("span",{className:"font-semibold text-secondary-900",children:x.customerName}),"?"]}),e.jsx("p",{className:"text-sm text-secondary-500 mb-6",children:"This action cannot be undone and will permanently remove the appointment from the system."})]}),e.jsxs("div",{className:"flex gap-4 p-6 bg-secondary-50 rounded-b-3xl",children:[e.jsx("button",{onClick:he,disabled:C,className:"btn-outline flex-1",children:"Cancel"}),e.jsx("button",{onClick:ie,disabled:C,className:"btn-error flex-1 flex items-center justify-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 animate-spin border-2 border-white border-t-transparent rounded-full"}),"Deleting..."]}):"Delete Appointment"})]})]})})]})}class AM{constructor(){oe(this,"requestCounts",new Map);oe(this,"lastReset",new Map);oe(this,"WINDOW_MS",15*60*1e3)}trackRequest(t){const a=Date.now(),r=this.getKey(t),n=this.lastReset.get(r)||0;a-n>this.WINDOW_MS&&(this.requestCounts.set(r,0),this.lastReset.set(r,a));const i=this.requestCounts.get(r)||0;this.requestCounts.set(r,i+1),console.log(`Rate Limit Tracker: ${t} - ${i+1} requests in current window`)}getRequestCount(t){const a=this.getKey(t);return this.requestCounts.get(a)||0}getTimeUntilReset(t){const a=this.getKey(t),n=(this.lastReset.get(a)||0)+this.WINDOW_MS;return Math.max(0,n-Date.now())}isApproachingLimit(t,a=80){const r=this.getRequestCount(t),n=this.getLimitForEndpoint(t);return r/n*100>=a}getRateLimitInfo(t){const a=this.getRequestCount(t),r=this.getLimitForEndpoint(t),n=this.getTimeUntilReset(t);return{remaining:Math.max(0,r-a),reset:Date.now()+n,limit:r,retryAfter:n>0?`${Math.ceil(n/1e3)} seconds`:void 0}}getLimitForEndpoint(t){return t.includes("/auth")?5:100}getKey(t){return t.split("?")[0]}reset(){this.requestCounts.clear(),this.lastReset.clear()}getTrackedEndpoints(){return Array.from(this.requestCounts.keys())}debug(){console.group("Rate Limit Manager Debug Info"),console.log("Tracked endpoints:",this.getTrackedEndpoints()),this.getTrackedEndpoints().forEach(t=>{const a=this.getRateLimitInfo(t);console.log(`${t}:`,{requests:this.getRequestCount(t),remaining:a.remaining,limit:a.limit,timeUntilReset:`${Math.ceil(a.reset-Date.now())/1e3}s`})}),console.groupEnd()}}const Dv=new AM,ct={async getCustomers(s={}){const t=new URLSearchParams;Object.entries(s).forEach(([n,i])=>{i!==void 0&&i!==""&&t.append(n,i.toString())});const a=`/customers?${t.toString()}`;Dv.trackRequest(a),console.log("customerService.getCustomers: Making API call to /customers with params:",t.toString());const r=await le(M.get(a));return console.log("customerService.getCustomers: API response:",r),r},async getCustomer(s){const t=`/customers/${s}`;return Dv.trackRequest(t),await le(M.get(t))},async createCustomer(s){return await le(M.post("/customers",s))},async updateCustomer(s,t){return await le(M.put(`/customers/${s}`,t))},async deleteCustomer(s){return await le(M.delete(`/customers/${s}`))},async addVehicle(s,t){return await le(M.post(`/customers/${s}/vehicles`,t))},async updateVehicle(s,t,a){return await le(M.put(`/customers/${s}/vehicles/${t}`,a))},async deleteVehicle(s,t){return await le(M.delete(`/customers/${s}/vehicles/${t}`))},async addServiceHistory(s,t){return await le(M.post(`/customers/${s}/service-history`,t))},async addCommunicationLog(s,t){return await le(M.post(`/customers/${s}/communication-log`,t))},async getCustomerStats(){return await le(M.get("/customers/stats/overview"))},async searchCustomers(s){return await le(M.get(`/customers/search?q=${encodeURIComponent(s)}`))},async getCustomerPayments(s,t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([n,i])=>{i!==void 0&&i!==""&&a.append(n,i.toString())}),await le(M.get(`/customers/${s}/payments?${a.toString()}`))},async addPayment(s,t){return await le(M.post(`/customers/${s}/payments`,t))},async updatePayment(s,t,a){return await le(M.put(`/customers/${s}/payments/${t}`,a))},async deletePayment(s,t){return await le(M.delete(`/customers/${s}/payments/${t}`))},async getCustomerArrangements(s,t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([n,i])=>{i!==void 0&&i!==""&&a.append(n,i.toString())}),await le(M.get(`/customers/${s}/arrangements?${a.toString()}`))},async addArrangement(s,t){return await le(M.post(`/customers/${s}/arrangements`,t))},async updateArrangement(s,t,a){return await le(M.put(`/customers/${s}/arrangements/${t}`,a))},async deleteArrangement(s,t){return await le(M.delete(`/customers/${s}/arrangements/${t}`))},async getCustomerTowing(s,t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([n,i])=>{i!==void 0&&i!==""&&a.append(n,i.toString())}),await le(M.get(`/customers/${s}/towing?${a.toString()}`))},async addTowing(s,t){return await le(M.post(`/customers/${s}/towing`,t))},async updateTowing(s,t,a){return await le(M.put(`/customers/${s}/towing/${t}`,a))},async deleteTowing(s,t){return await le(M.delete(`/customers/${s}/towing/${t}`))},async getCustomerCallLogs(s,t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([n,i])=>{i!==void 0&&i!==""&&a.append(n,i.toString())}),await le(M.get(`/customers/${s}/call-logs?${a.toString()}`))},async addCallLog(s,t){return await le(M.post(`/customers/${s}/call-logs`,t))},async updateCallLog(s,t,a){return await le(M.put(`/customers/${s}/call-logs/${t}`,a))},async deleteCallLog(s,t){return await le(M.delete(`/customers/${s}/call-logs/${t}`))}},zt=Y("customers/fetchCustomers",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await ct.getCustomers(s)).data}catch(n){return console.error("fetchCustomers: Error:",n),t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch customers")}}),ia=Y("customers/fetchCustomer",async(s,{rejectWithValue:t})=>{var a,r;try{const n=await ct.getCustomer(s);return console.log("fetchCustomer response:",n),n.data&&typeof n.data=="object"&&"customer"in n.data?n.data.customer:n.data?n.data:n}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch customer")}}),Rn=Y("customers/createCustomer",async(s,{rejectWithValue:t})=>{var a,r;try{const n=await ct.createCustomer(s);return n.data&&typeof n.data=="object"&&"customer"in n.data?n.data.customer:n.data||n}catch(n){const i=((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create customer";return t(i)}}),Ln=Y("customers/updateCustomer",async({id:s,customerData:t},{rejectWithValue:a})=>{var r,n;try{const i=await ct.updateCustomer(s,t);return i.data&&typeof i.data=="object"&&"customer"in i.data?i.data.customer:i.data||i}catch(i){const l=((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update customer";return a(l)}}),On=Y("customers/deleteCustomer",async(s,{rejectWithValue:t})=>{var a,r;try{return await ct.deleteCustomer(s),s}catch(n){const i=((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete customer";return t(i)}}),Ja=Y("customers/fetchStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await ct.getCustomerStats()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch customer stats")}}),Mi=Y("customers/searchCustomers",async(s,{rejectWithValue:t})=>{var a,r,n;try{const i=await ct.searchCustomers(s);return((a=i.data)==null?void 0:a.customers)||i.data||[]}catch(i){return t(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to search customers")}}),TM={list:[],selectedCustomer:null,stats:null,loading:!1,error:null,pagination:null,searchResults:[],searchLoading:!1};Rt({name:"customers",initialState:TM,reducers:{clearError:s=>{s.error=null},clearSelectedCustomer:s=>{s.selectedCustomer=null},clearSearchResults:s=>{s.searchResults=[]},setSelectedCustomer:(s,t)=>{s.selectedCustomer=t.payload}},extraReducers:s=>{s.addCase(zt.pending,t=>{t.loading=!0,t.error=null}).addCase(zt.fulfilled,(t,a)=>{t.loading=!1,t.list=a.payload.customers,t.pagination=a.payload.pagination}).addCase(zt.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(ia.pending,t=>{t.loading=!0,t.error=null}).addCase(ia.fulfilled,(t,a)=>{t.loading=!1,t.selectedCustomer=a.payload}).addCase(ia.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Rn.pending,t=>{t.loading=!0,t.error=null}).addCase(Rn.fulfilled,(t,a)=>{t.loading=!1,t.list.unshift(a.payload),t.pagination&&(t.pagination.totalCustomers+=1)}).addCase(Rn.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Ln.pending,t=>{t.loading=!0,t.error=null}).addCase(Ln.fulfilled,(t,a)=>{var n;t.loading=!1;const r=t.list.findIndex(i=>i._id===a.payload._id);r!==-1&&(t.list[r]=a.payload),((n=t.selectedCustomer)==null?void 0:n._id)===a.payload._id&&(t.selectedCustomer=a.payload)}).addCase(Ln.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(On.pending,t=>{t.loading=!0,t.error=null}).addCase(On.fulfilled,(t,a)=>{var r;t.loading=!1,t.list=t.list.filter(n=>n._id!==a.payload),t.pagination&&(t.pagination.totalCustomers-=1),((r=t.selectedCustomer)==null?void 0:r._id)===a.payload&&(t.selectedCustomer=null)}).addCase(On.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Ja.pending,t=>{t.loading=!0,t.error=null}).addCase(Ja.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload}).addCase(Ja.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Mi.pending,t=>{t.searchLoading=!0,t.error=null}).addCase(Mi.fulfilled,(t,a)=>{t.searchLoading=!1,t.searchResults=a.payload}).addCase(Mi.rejected,(t,a)=>{t.searchLoading=!1,t.error=a.payload})}});class PM{async getServiceCatalog(t={}){const a=new URLSearchParams;Object.entries(t).forEach(([n,i])=>{i!=null&&a.append(n,i.toString())});const r=await le(M.get(`/services/catalog?${a.toString()}`));return console.log("getServiceCatalog API response:",r),r}async getServiceCatalogItem(t){return le(M.get(`/services/catalog/${t}`))}async createServiceCatalogItem(t){return le(M.post("/services/catalog",t))}async updateServiceCatalogItem(t,a){return le(M.put(`/services/catalog/${t}`,a))}async deleteServiceCatalogItem(t){return le(M.delete(`/services/catalog/${t}`))}async getServiceCatalogStats(){const t=await le(M.get("/services/catalog/stats/overview"));return console.log("getServiceCatalogStats API response:",t),t}async getWorkOrders(t={}){const a=new URLSearchParams;Object.entries(t).forEach(([n,i])=>{i!=null&&a.append(n,i.toString())});const r=await le(M.get(`/services/workorders?${a.toString()}`));return console.log("getWorkOrders API response:",r),r}async getWorkOrder(t){return le(M.get(`/services/workorders/${t}`))}async createWorkOrder(t){return le(M.post("/services/workorders",t))}async updateWorkOrder(t,a){return le(M.put(`/services/workorders/${t}`,a))}async deleteWorkOrder(t){return le(M.delete(`/services/workorders/${t}`))}async updateWorkOrderStatus(t,a){return le(M.patch(`/services/workorders/${t}/status`,{status:a}))}async assignTechnician(t,a){return le(M.post(`/services/workorders/${t}/assign-technician`,{technicianId:a}))}async getWorkOrderStats(t,a){const r=new URLSearchParams;t&&r.append("startDate",t),a&&r.append("endDate",a);const n=await le(M.get(`/services/workorders/stats/overview?${r.toString()}`));return console.log("getWorkOrderStats API response:",n),n}async getTechnicians(t={}){const a=new URLSearchParams;Object.entries(t).forEach(([n,i])=>{i!=null&&a.append(n,i.toString())});const r=await le(M.get(`/services/technicians?${a.toString()}`));return console.log("getTechnicians API response:",r),r}async getTechnician(t){return le(M.get(`/services/technicians/${t}`))}async createTechnician(t){return le(M.post("/services/technicians",t))}async updateTechnician(t,a){return le(M.put(`/services/technicians/${t}`,a))}async deleteTechnician(t){return le(M.delete(`/services/technicians/${t}`))}async getTechnicianStats(){const t=await le(M.get("/services/technicians/stats/overview"));return console.log("getTechnicianStats API response:",t),t}async getAvailableTechnicians(t,a){const r=new URLSearchParams({date:t});a&&r.append("timeSlot",a);const n=await le(M.get(`/services/technicians/available?${r.toString()}`));return console.log("getAvailableTechnicians API response:",n),n}async getServiceCategories(){const t=await le(M.get("/services/categories"));return console.log("getServiceCategories API response:",t),t}async getSpecializations(){const t=await le(M.get("/services/specializations"));return console.log("getSpecializations API response:",t),t}}const ht=new PM,Br=Y("services/fetchServiceCatalog",async(s={},{rejectWithValue:t})=>{var a,r;try{return await ht.getServiceCatalog(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch service catalog")}}),DM=Y("services/fetchServiceCatalogItem",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.getServiceCatalogItem(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch service item")}}),MM=Y("services/createServiceCatalogItem",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.createServiceCatalogItem(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create service")}}),EM=Y("services/updateServiceCatalogItem",async({id:s,data:t},{rejectWithValue:a})=>{var r,n;try{return await ht.updateServiceCatalogItem(s,t)}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update service")}}),IM=Y("services/deleteServiceCatalogItem",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.deleteServiceCatalogItem(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete service")}}),xd=Y("services/fetchServiceCatalogStats",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.getServiceCatalogStats()}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch service stats")}}),Ur=Y("services/fetchWorkOrders",async(s={},{rejectWithValue:t})=>{var a,r;try{return await ht.getWorkOrders(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch work orders")}}),RM=Y("services/fetchWorkOrder",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.getWorkOrder(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch work order")}}),LM=Y("services/createWorkOrder",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.createWorkOrder(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create work order")}}),x2=Y("services/updateWorkOrder",async({id:s,data:t},{rejectWithValue:a})=>{var r,n;try{return await ht.updateWorkOrder(s,t)}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update work order")}}),OM=Y("services/deleteWorkOrder",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.deleteWorkOrder(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete work order")}}),FM=Y("services/updateWorkOrderStatus",async({id:s,status:t},{rejectWithValue:a})=>{var r,n;try{return await ht.updateWorkOrderStatus(s,t)}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update work order status")}}),$M=Y("services/assignTechnician",async({workOrderId:s,technicianId:t},{rejectWithValue:a})=>{var r,n;try{return await ht.assignTechnician(s,t)}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to assign technician")}}),pd=Y("services/fetchWorkOrderStats",async({startDate:s,endDate:t}={},{rejectWithValue:a})=>{var r,n;try{return await ht.getWorkOrderStats(s,t)}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch work order stats")}}),Fn=Y("services/fetchTechnicians",async(s={},{rejectWithValue:t})=>{var a,r;try{return await ht.getTechnicians(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch technicians")}}),zM=Y("services/fetchTechnician",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.getTechnician(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch technician")}}),BM=Y("services/createTechnician",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.createTechnician(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create technician")}}),UM=Y("services/updateTechnician",async({id:s,data:t},{rejectWithValue:a})=>{var r,n;try{return await ht.updateTechnician(s,t)}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update technician")}}),VM=Y("services/deleteTechnician",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.deleteTechnician(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete technician")}}),fd=Y("services/fetchTechnicianStats",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.getTechnicianStats()}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch technician stats")}}),HM=Y("services/fetchAvailableTechnicians",async({date:s,timeSlot:t},{rejectWithValue:a})=>{var r,n;try{return await ht.getAvailableTechnicians(s,t)}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch available technicians")}}),p2=Y("services/fetchServiceCategories",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.getServiceCategories()}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch service categories")}}),f2=Y("services/fetchSpecializations",async(s,{rejectWithValue:t})=>{var a,r;try{return await ht.getSpecializations()}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch specializations")}}),WM={catalog:[],catalogStats:null,catalogLoading:!1,catalogError:null,workOrders:[],workOrderStats:null,workOrdersLoading:!1,workOrdersError:null,technicians:[],technicianStats:null,techniciansLoading:!1,techniciansError:null,categories:[],specializations:[],generalLoading:!1,generalError:null},qM=Rt({name:"services",initialState:WM,reducers:{clearServicesError:s=>{s.catalogError=null,s.workOrdersError=null,s.techniciansError=null,s.generalError=null},clearServiceCatalog:s=>{s.catalog=[],s.catalogStats=null},clearWorkOrders:s=>{s.workOrders=[],s.workOrderStats=null},clearTechnicians:s=>{s.technicians=[],s.technicianStats=null}},extraReducers:s=>{s.addCase(Br.pending,t=>{t.catalogLoading=!0,t.catalogError=null}).addCase(Br.fulfilled,(t,a)=>{var i;t.catalogLoading=!1;const r=a.payload;console.log("fetchServiceCatalog.fulfilled payload:",r);const n=Array.isArray(r)?r:Array.isArray((i=r==null?void 0:r.data)==null?void 0:i.services)?r.data.services:Array.isArray(r==null?void 0:r.data)?r.data:Array.isArray(r==null?void 0:r.services)?r.services:[];console.log("fetchServiceCatalog.fulfilled normalized:",n),t.catalog=n}).addCase(Br.rejected,(t,a)=>{t.catalogLoading=!1,t.catalogError=a.payload}).addCase(DM.fulfilled,(t,a)=>{var l;const r=a.payload,n=((l=r==null?void 0:r.data)==null?void 0:l.service)||r,i=t.catalog.findIndex(o=>o._id===n._id);i!==-1?t.catalog[i]=n:t.catalog.push(n)}).addCase(MM.fulfilled,(t,a)=>{var i;const r=a.payload,n=((i=r==null?void 0:r.data)==null?void 0:i.service)||r;t.catalog.push(n)}).addCase(EM.fulfilled,(t,a)=>{var l;const r=a.payload,n=((l=r==null?void 0:r.data)==null?void 0:l.service)||r,i=t.catalog.findIndex(o=>o._id===n._id);i!==-1&&(t.catalog[i]=n)}).addCase(IM.fulfilled,(t,a)=>{t.catalog=t.catalog.filter(r=>r._id!==a.payload)}).addCase(xd.fulfilled,(t,a)=>{const r=a.payload;t.catalogStats=(r==null?void 0:r.data)||r}),s.addCase(Ur.pending,t=>{t.workOrdersLoading=!0,t.workOrdersError=null}).addCase(Ur.fulfilled,(t,a)=>{var i;t.workOrdersLoading=!1;const r=a.payload;console.log("fetchWorkOrders.fulfilled payload:",r);const n=Array.isArray(r)?r:Array.isArray((i=r==null?void 0:r.data)==null?void 0:i.workOrders)?r.data.workOrders:Array.isArray(r==null?void 0:r.data)?r.data:Array.isArray(r==null?void 0:r.workOrders)?r.workOrders:[];console.log("fetchWorkOrders.fulfilled normalized:",n),t.workOrders=n}).addCase(Ur.rejected,(t,a)=>{t.workOrdersLoading=!1,t.workOrdersError=a.payload}).addCase(RM.fulfilled,(t,a)=>{var l;const r=a.payload,n=((l=r==null?void 0:r.data)==null?void 0:l.workOrder)||r,i=t.workOrders.findIndex(o=>o._id===n._id);i!==-1?t.workOrders[i]=n:t.workOrders.push(n)}).addCase(LM.fulfilled,(t,a)=>{var i;const r=a.payload,n=((i=r==null?void 0:r.data)==null?void 0:i.workOrder)||r;t.workOrders.push(n)}).addCase(x2.fulfilled,(t,a)=>{var l;const r=a.payload,n=((l=r==null?void 0:r.data)==null?void 0:l.workOrder)||r,i=t.workOrders.findIndex(o=>o._id===n._id);i!==-1&&(t.workOrders[i]=n)}).addCase(OM.fulfilled,(t,a)=>{t.workOrders=t.workOrders.filter(r=>r._id!==a.payload)}).addCase(FM.fulfilled,(t,a)=>{var l;const r=a.payload,n=((l=r==null?void 0:r.data)==null?void 0:l.workOrder)||r,i=t.workOrders.findIndex(o=>o._id===n._id);i!==-1&&(t.workOrders[i]=n)}).addCase($M.fulfilled,(t,a)=>{var l;const r=a.payload,n=((l=r==null?void 0:r.data)==null?void 0:l.workOrder)||r,i=t.workOrders.findIndex(o=>o._id===n._id);i!==-1&&(t.workOrders[i]=n)}).addCase(pd.fulfilled,(t,a)=>{const r=a.payload;t.workOrderStats=(r==null?void 0:r.data)||r}),s.addCase(Fn.pending,t=>{t.techniciansLoading=!0,t.techniciansError=null}).addCase(Fn.fulfilled,(t,a)=>{var i;t.techniciansLoading=!1;const r=a.payload;console.log("fetchTechnicians.fulfilled payload:",r);const n=Array.isArray(r)?r:Array.isArray((i=r==null?void 0:r.data)==null?void 0:i.technicians)?r.data.technicians:Array.isArray(r==null?void 0:r.data)?r.data:Array.isArray(r==null?void 0:r.technicians)?r.technicians:[];console.log("fetchTechnicians.fulfilled normalized:",n),t.technicians=n}).addCase(Fn.rejected,(t,a)=>{t.techniciansLoading=!1,t.techniciansError=a.payload}).addCase(zM.fulfilled,(t,a)=>{var l;const r=a.payload,n=((l=r==null?void 0:r.data)==null?void 0:l.technician)||r,i=t.technicians.findIndex(o=>o._id===n._id);i!==-1?t.technicians[i]=n:t.technicians.push(n)}).addCase(BM.fulfilled,(t,a)=>{var i;const r=a.payload,n=((i=r==null?void 0:r.data)==null?void 0:i.technician)||r;t.technicians.push(n)}).addCase(UM.fulfilled,(t,a)=>{var l;const r=a.payload,n=((l=r==null?void 0:r.data)==null?void 0:l.technician)||r,i=t.technicians.findIndex(o=>o._id===n._id);i!==-1&&(t.technicians[i]=n)}).addCase(VM.fulfilled,(t,a)=>{t.technicians=t.technicians.filter(r=>r._id!==a.payload)}).addCase(fd.fulfilled,(t,a)=>{const r=a.payload;t.technicianStats=(r==null?void 0:r.data)||r}).addCase(HM.fulfilled,(t,a)=>{const r=a.payload,n=Array.isArray(r==null?void 0:r.data)?r.data:Array.isArray(r)?r:[];console.log("Available technicians:",n)}),s.addCase(p2.fulfilled,(t,a)=>{const r=a.payload;t.categories=Array.isArray(r==null?void 0:r.data)?r.data:Array.isArray(r)?r:[]}).addCase(f2.fulfilled,(t,a)=>{const r=a.payload;t.specializations=Array.isArray(r==null?void 0:r.data)?r.data:Array.isArray(r)?r:[]})}}),YM=qM.reducer;function KM({isOpen:s,onClose:t,onSave:a,task:r,isLoading:n=!1}){const i=Ue(),{list:l}=je(j=>j.customers),{technicians:o}=je(j=>j.services),[c,d]=b.useState({title:"",description:"",type:"follow_up",priority:"medium",assignedTo:"",customer:void 0,dueDate:""}),[u,m]=b.useState({});b.useEffect(()=>{s&&(i(zt({limit:100})),i(Fn({limit:100})))},[s,i]),b.useEffect(()=>{var j;d(r?{title:r.title,description:r.description||"",type:r.type,priority:r.priority,assignedTo:typeof r.assignedTo=="string"?r.assignedTo:r.assignedTo._id,customer:typeof r.customer=="string"?r.customer:((j=r.customer)==null?void 0:j._id)||void 0,dueDate:r.dueDate.split("T")[0]}:{title:"",description:"",type:"follow_up",priority:"medium",assignedTo:"",customer:void 0,dueDate:""}),m({})},[r,s]);const h=()=>{const j={};return c.title.trim()||(j.title="Title is required"),c.assignedTo||(j.assignedTo="Assigned to is required"),c.dueDate||(j.dueDate="Due date is required"),m(j),Object.keys(j).length===0},y=j=>{if(j.preventDefault(),h()){const v={...c};(!v.customer||v.customer.trim()==="")&&delete v.customer,a(v)}},g=(j,v)=>{d(x=>({...x,[j]:v})),u[j]&&m(x=>({...x,[j]:""}))};return s?e.jsx(pe,{isOpen:s,onClose:t,title:r?"Edit Task":"Add New Task",submitText:"Save",onSubmit:y,isLoading:n,children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Task Title *"}),e.jsx("input",{type:"text",value:c.title,onChange:j=>g("title",j.target.value),className:`form-input ${u.title?"border-red-500":""}`,placeholder:"Enter task title",required:!0}),u.title&&e.jsx("p",{className:"form-error",children:u.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:j=>g("description",j.target.value),rows:3,className:"form-textarea",placeholder:"Enter task description"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Task Type"}),e.jsxs("select",{value:c.type,onChange:j=>g("type",j.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"follow_up",children:"Follow Up"}),e.jsx("option",{value:"marketing",children:"Marketing"}),e.jsx("option",{value:"sales",children:"Sales"}),e.jsx("option",{value:"collections",children:"Collections"}),e.jsx("option",{value:"appointments",children:"Appointments"}),e.jsx("option",{value:"research",children:"Research"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{value:c.priority,onChange:j=>g("priority",j.target.value),className:"form-select",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Assigned To *"}),e.jsxs("select",{value:c.assignedTo,onChange:j=>g("assignedTo",j.target.value),className:`form-select ${u.assignedTo?"border-red-500":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select technician"}),o.map(j=>e.jsx("option",{value:j._id,children:j.name},j._id))]}),u.assignedTo&&e.jsx("p",{className:"form-error",children:u.assignedTo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Customer"}),e.jsxs("select",{value:c.customer||"",onChange:j=>g("customer",j.target.value),className:"form-select",children:[e.jsx("option",{value:"",children:"Select customer (optional)"}),l.map(j=>e.jsxs("option",{value:j._id,children:[j.firstName," ",j.lastName]},j._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Due Date *"}),e.jsx("input",{type:"date",value:c.dueDate,onChange:j=>g("dueDate",j.target.value),className:`form-input ${u.dueDate?"border-red-500":""}`,required:!0}),u.dueDate&&e.jsx("p",{className:"form-error",children:u.dueDate})]})]})}):null}const GM=({task:s,isOpen:t,onClose:a,onDelete:r})=>{const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{try{i(!0),o(null),await r(s._id),a()}catch(d){o(d instanceof Error?d.message:"Failed to delete task")}finally{i(!1)}};return s?e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Task",submitText:"Delete Task",onSubmit:c,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-4 space-y-4",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the task."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Task Title:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Description:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.description?s.description.substring(0,50)+"...":"No description"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Priority:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.priority})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Due Date:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.dueDate?new Date(s.dueDate).toLocaleDateString():"No due date"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Assigned To:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.assignedTo||"Unassigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Created:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this task will also affect:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Task tracking and progress"}),e.jsx("li",{children:"Workflow management"}),e.jsx("li",{children:"Team collaboration"}),e.jsx("li",{children:"Project timelines"}),e.jsx("li",{children:"Performance metrics"})]})]})]})}):null};function XM({task:s,onStatusUpdate:t,isLoading:a=!1}){const[r,n]=b.useState(!1),i=c=>{switch(c){case"completed":return e.jsx(ki,{className:"w-4 h-4"});case"in_progress":return e.jsx($t,{className:"w-4 h-4"});case"cancelled":return e.jsx(Ai,{className:"w-4 h-4"});default:return e.jsx($t,{className:"w-4 h-4"})}},l=c=>{switch(c){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=c=>{t(s._id,c),n(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!r),disabled:a,className:`px-2 py-1 text-xs font-semibold rounded-full ${l(s.status)} hover:opacity-80 transition-opacity flex items-center gap-1`,children:[i(s.status),s.status.replace("_"," ")]}),r&&e.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[120px]",children:e.jsxs("div",{className:"py-1",children:[s.status!=="pending"&&e.jsxs("button",{onClick:()=>o("pending"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),"Pending"]}),s.status!=="in_progress"&&e.jsxs("button",{onClick:()=>o("in_progress"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),"In Progress"]}),s.status!=="completed"&&e.jsxs("button",{onClick:()=>o("completed"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ki,{className:"w-4 h-4"}),"Completed"]}),s.status!=="cancelled"&&e.jsxs("button",{onClick:()=>o("cancelled"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Ai,{className:"w-4 h-4"}),"Cancelled"]})]})}),r&&e.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>n(!1)})]})}const Js={async getTasks(s={}){const t=new URLSearchParams;return Object.entries(s).forEach(([r,n])=>{n!==void 0&&n!==""&&t.append(r,n.toString())}),await le(M.get(`/tasks?${t.toString()}`))},async getTask(s){return await le(M.get(`/tasks/${s}`))},async createTask(s){return await le(M.post("/tasks",s))},async updateTask(s,t){return await le(M.put(`/tasks/${s}`,t))},async deleteTask(s){return await le(M.delete(`/tasks/${s}`))},async updateTaskStatus(s,t){return await le(M.put(`/tasks/${s}`,{status:t}))},async updateTaskProgress(s,t){return await le(M.put(`/tasks/${s}`,{progress:t}))},async addTaskNote(s,t){return await le(M.post(`/tasks/${s}/notes`,{content:t}))},async getTaskStats(){return await le(M.get("/tasks/stats/overview"))},async getDailyProgress(s){const t=s?`?date=${s}`:"";return await le(M.get(`/tasks/daily-progress${t}`))},async getTasksByType(s){return await le(M.get(`/tasks/type/${s}`))},async getOverdueTasks(){return await le(M.get("/tasks/overdue"))},async getMyTasks(s={}){const t=new URLSearchParams;return Object.entries(s).forEach(([r,n])=>{n!==void 0&&n!==""&&t.append(r,n.toString())}),await le(M.get(`/tasks/my-tasks?${t.toString()}`))},async bulkUpdateTasks(s,t){return await le(M.put("/tasks/bulk-update",{taskIds:s,updates:t}))},async searchTasks(s){return await le(M.get(`/tasks/search?q=${encodeURIComponent(s)}`))}},Ha=Y("tasks/fetchTasks",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await Js.getTasks(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch tasks")}}),Vh=Y("tasks/fetchTask",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Js.getTask(s)).data.task}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch task")}}),gd=Y("tasks/createTask",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Js.createTask(s)).data.task}catch(n){const i=((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create task";return t(i)}}),ql=Y("tasks/updateTask",async({id:s,taskData:t},{rejectWithValue:a})=>{var r,n;try{return(await Js.updateTask(s,t)).data.task}catch(i){const l=((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update task";return a(l)}}),yd=Y("tasks/deleteTask",async(s,{rejectWithValue:t})=>{var a,r;try{return await Js.deleteTask(s),s}catch(n){const i=((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete task";return t(i)}}),QM=Y("tasks/updateStatus",async({id:s,status:t},{rejectWithValue:a})=>{var r,n;try{return(await Js.updateTaskStatus(s,t)).data.task}catch(i){const l=((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update task status";return a(l)}}),JM=Y("tasks/updateProgress",async({id:s,progress:t},{rejectWithValue:a})=>{var r,n;try{return(await Js.updateTaskProgress(s,t)).data.task}catch(i){const l=((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update task progress";return a(l)}}),ZM=Y("tasks/addNote",async({id:s,note:t},{rejectWithValue:a})=>{var r,n;try{return(await Js.addTaskNote(s,t)).data.task}catch(i){const l=((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to add note";return a(l)}}),vr=Y("tasks/fetchStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Js.getTaskStats()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch task stats")}}),Hh=Y("tasks/fetchDailyProgress",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Js.getDailyProgress(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch daily progress")}}),Wh=Y("tasks/fetchMyTasks",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await Js.getMyTasks(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch my tasks")}}),qh=Y("tasks/searchTasks",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Js.searchTasks(s)).data.tasks}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to search tasks")}}),eE={list:[],currentTask:null,stats:null,dailyProgress:null,myTasks:[],searchResults:[],loading:!1,error:null,pagination:null,searchLoading:!1},tE=Rt({name:"tasks",initialState:eE,reducers:{clearError:s=>{s.error=null},clearCurrentTask:s=>{s.currentTask=null},clearSearchResults:s=>{s.searchResults=[]},setCurrentTask:(s,t)=>{s.currentTask=t.payload}},extraReducers:s=>{s.addCase(Ha.pending,t=>{t.loading=!0,t.error=null}).addCase(Ha.fulfilled,(t,a)=>{t.loading=!1,t.list=a.payload.tasks,t.pagination=a.payload.pagination}).addCase(Ha.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Vh.pending,t=>{t.loading=!0,t.error=null}).addCase(Vh.fulfilled,(t,a)=>{t.loading=!1,t.currentTask=a.payload}).addCase(Vh.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(gd.pending,t=>{t.loading=!0,t.error=null}).addCase(gd.fulfilled,(t,a)=>{t.loading=!1,t.list.unshift(a.payload),t.pagination&&(t.pagination.totalTasks+=1)}).addCase(gd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(ql.pending,t=>{t.loading=!0,t.error=null}).addCase(ql.fulfilled,(t,a)=>{var i;t.loading=!1;const r=t.list.findIndex(l=>l._id===a.payload._id);r!==-1&&(t.list[r]=a.payload),((i=t.currentTask)==null?void 0:i._id)===a.payload._id&&(t.currentTask=a.payload);const n=t.myTasks.findIndex(l=>l._id===a.payload._id);n!==-1&&(t.myTasks[n]=a.payload)}).addCase(ql.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(yd.pending,t=>{t.loading=!0,t.error=null}).addCase(yd.fulfilled,(t,a)=>{var r;t.loading=!1,t.list=t.list.filter(n=>n._id!==a.payload),t.myTasks=t.myTasks.filter(n=>n._id!==a.payload),t.pagination&&(t.pagination.totalTasks-=1),((r=t.currentTask)==null?void 0:r._id)===a.payload&&(t.currentTask=null)}).addCase(yd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(QM.fulfilled,(t,a)=>{var i;const r=t.list.findIndex(l=>l._id===a.payload._id);r!==-1&&(t.list[r]=a.payload),((i=t.currentTask)==null?void 0:i._id)===a.payload._id&&(t.currentTask=a.payload);const n=t.myTasks.findIndex(l=>l._id===a.payload._id);n!==-1&&(t.myTasks[n]=a.payload)}),s.addCase(JM.fulfilled,(t,a)=>{var i;const r=t.list.findIndex(l=>l._id===a.payload._id);r!==-1&&(t.list[r]=a.payload),((i=t.currentTask)==null?void 0:i._id)===a.payload._id&&(t.currentTask=a.payload);const n=t.myTasks.findIndex(l=>l._id===a.payload._id);n!==-1&&(t.myTasks[n]=a.payload)}),s.addCase(ZM.fulfilled,(t,a)=>{var i;const r=t.list.findIndex(l=>l._id===a.payload._id);r!==-1&&(t.list[r]=a.payload),((i=t.currentTask)==null?void 0:i._id)===a.payload._id&&(t.currentTask=a.payload);const n=t.myTasks.findIndex(l=>l._id===a.payload._id);n!==-1&&(t.myTasks[n]=a.payload)}),s.addCase(vr.pending,t=>{t.loading=!0,t.error=null}).addCase(vr.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload}).addCase(vr.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Hh.pending,t=>{t.loading=!0,t.error=null}).addCase(Hh.fulfilled,(t,a)=>{t.loading=!1,t.dailyProgress=a.payload}).addCase(Hh.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Wh.pending,t=>{t.loading=!0,t.error=null}).addCase(Wh.fulfilled,(t,a)=>{t.loading=!1,t.myTasks=a.payload.tasks,t.pagination=a.payload.pagination}).addCase(Wh.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(qh.pending,t=>{t.searchLoading=!0,t.error=null}).addCase(qh.fulfilled,(t,a)=>{t.searchLoading=!1,t.searchResults=a.payload}).addCase(qh.rejected,(t,a)=>{t.searchLoading=!1,t.error=a.payload})}}),sE=tE.reducer;function aE(){var O,E,W,Z;const s=Ue(),[t,a]=b.useState("all"),[r,n]=b.useState("all"),[i,l]=b.useState(""),[o,c]=b.useState(!0),[d,u]=b.useState(!1),[m,h]=b.useState(!1),[y,g]=b.useState(null),[j,v]=b.useState(!1),{list:x,loading:f,stats:p}=je(I=>I.tasks);b.useEffect(()=>{(async()=>{try{c(!0),await Promise.all([s(Ha({status:t!=="all"?t:void 0,priority:r!=="all"?r:void 0,search:i||void 0})),s(vr())])}catch($){console.error("Error loading tasks:",$),P.error("Failed to load tasks")}finally{c(!1)}})()},[s]),b.useEffect(()=>{o||s(Ha({status:t!=="all"?t:void 0,priority:r!=="all"?r:void 0,search:i||void 0}))},[t,r,i,s]);const N=x||[];b.useEffect(()=>{x&&x.length>0&&console.log("Tasks with customer data:",x.map(I=>({id:I._id,title:I.title,customer:I.customer,customerType:typeof I.customer})))},[x]);const w=async I=>{try{v(!0),y?(await s(ql({id:y._id,taskData:I})),P.success("Task updated successfully!")):(await s(gd(I)),P.success("Task created successfully!")),u(!1),g(null),s(Ha({status:t!=="all"?t:void 0,priority:r!=="all"?r:void 0,search:i||void 0})),s(vr())}catch($){console.error("Error saving task:",$),P.error("Failed to save task")}finally{v(!1)}},S=async I=>{try{v(!0),await s(yd(I)),P.success("Task deleted successfully!"),h(!1),g(null),s(Ha({status:t!=="all"?t:void 0,priority:r!=="all"?r:void 0,search:i||void 0})),s(vr())}catch($){console.error("Error deleting task:",$),P.error("Failed to delete task")}finally{v(!1)}},C=async(I,$)=>{try{await s(ql({id:I,taskData:{status:$}})),P.success("Task status updated successfully!"),s(Ha({status:t!=="all"?t:void 0,priority:r!=="all"?r:void 0,search:i||void 0})),s(vr())}catch(A){console.error("Error updating task status:",A),P.error("Failed to update task status")}},T=I=>{g(I),u(!0)},_=I=>{g(I),h(!0)},F=()=>{g(null),u(!0)},D=I=>{switch(I){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},R=I=>{switch(I){case"maintenance":return e.jsx(vt,{className:"w-4 h-4"});case"repair":return e.jsx(ot,{className:"w-4 h-4"});case"inspection":return e.jsx(ke,{className:"w-4 h-4"});case"follow_up":return e.jsx(Vt,{className:"w-4 h-4"});case"marketing":return e.jsx(be,{className:"w-4 h-4"});case"sales":return e.jsx(be,{className:"w-4 h-4"});case"collections":return e.jsx(be,{className:"w-4 h-4"});case"appointments":return e.jsx(be,{className:"w-4 h-4"});case"research":return e.jsx(ot,{className:"w-4 h-4"});case"other":return e.jsx(vt,{className:"w-4 h-4"});default:return e.jsx(be,{className:"w-4 h-4"})}},U=I=>new Date(I).toLocaleDateString();return o?e.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600 border-2 border-blue-600 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})}):e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Task Management"}),e.jsx("p",{className:"text-secondary-600",children:"Organize and track your team's tasks and projects"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{s(Ha({})),s(vr())},className:"btn-secondary",children:[e.jsx(Ea,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:F,className:"btn-primary",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Add Task"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Tasks"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600",children:((O=p==null?void 0:p.overview)==null?void 0:O.totalTasks)||(x==null?void 0:x.length)||0}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Active"})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(Mh,{className:"w-6 h-6 text-primary-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Pending Tasks"}),e.jsx("p",{className:"text-3xl font-bold text-warning-600",children:((E=p==null?void 0:p.overview)==null?void 0:E.pendingTasks)||N.filter(I=>I.status==="pending").length}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Needs Attention"})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx(vt,{className:"w-6 h-6 text-warning-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:((W=p==null?void 0:p.overview)==null?void 0:W.inProgressTasks)||N.filter(I=>I.status==="in_progress").length}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Ongoing"})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(Ve,{className:"w-6 h-6 text-info-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-success-600",children:((Z=p==null?void 0:p.overview)==null?void 0:Z.completedTasks)||N.filter(I=>I.status==="completed").length}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Success"})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(ke,{className:"w-6 h-6 text-success-600"})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"w-4 h-4 text-primary-600"}),e.jsx("h3",{className:"text-base font-semibold text-secondary-900",children:"Search & Filters"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary-400",children:e.jsx(Rs,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"Search tasks by title, description, or customer...",value:i,onChange:I=>l(I.target.value),className:"form-input w-full pl-12 pr-4 py-3"})]}),e.jsxs("select",{value:t,onChange:I=>a(I.target.value),className:"form-input lg:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:r,onChange:I=>n(I.target.value),className:"form-input lg:w-48",children:[e.jsx("option",{value:"all",children:"All Priority"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"p-6 border-b border-secondary-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mh,{className:"w-4 h-4 text-primary-600"}),e.jsx("h3",{className:"text-base font-semibold text-secondary-900",children:"Task List"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[N.length," task",N.length!==1?"s":""," found"]})]})}),e.jsxs("div",{className:"p-6",children:[f?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ld,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-indigo-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})}):e.jsx("div",{className:"space-y-4",children:N.map(I=>e.jsxs("div",{className:"group bg-white rounded-xl border border-gray-200 hover:border-indigo-300 hover:shadow-lg transition-all duration-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1",children:R(I.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:I.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:I.description}),e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-500 text-sm",children:I.customer?typeof I.customer=="string"?`Customer ID: ${I.customer}`:`Customer: ${I.customer.businessName||I.customer.name||"Unknown"}`:"No customer assigned"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Assigned to: ",e.jsx("strong",{className:"text-gray-700",children:typeof I.assignedTo=="string"?I.assignedTo:I.assignedTo.name})]}),e.jsxs("span",{className:"capitalize",children:["Type: ",e.jsx("strong",{className:"text-gray-700",children:I.type.replace("-"," ")})]}),I.progress!==void 0&&e.jsxs("span",{children:["Progress: ",e.jsxs("strong",{className:"text-gray-700",children:[I.progress,"%"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${D(I.priority)}`,children:I.priority}),e.jsx(XM,{task:I,onStatusUpdate:C,isLoading:j})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsxs("span",{children:["Due: ",U(I.dueDate)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(I),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200",title:"Edit task",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(I),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete task",children:e.jsx(rt,{className:"w-4 h-4"})})]})]})]},I._id))}),!f&&N.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Mh,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters or create a new task."}),e.jsxs("button",{onClick:F,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold transition-all duration-200",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Create First Task"]})]})]}),e.jsx(KM,{isOpen:d,onClose:()=>{u(!1),g(null)},onSave:w,task:y,isLoading:j}),y&&e.jsx(GM,{isOpen:m,onClose:()=>{h(!1),g(null)},onDelete:S,task:y})]})}function rE({isOpen:s,onClose:t,onSave:a,promotion:r,isLoading:n=!1}){const[i,l]=b.useState({title:"",description:"",type:"discount",discountValue:0,discountType:"percentage",startDate:"",endDate:"",status:"scheduled",targetAudience:"",maxUsage:void 0,conditions:""}),[o,c]=b.useState({});b.useEffect(()=>{l(r?{title:r.title,description:r.description,type:r.type,discountValue:r.discountValue,discountType:r.discountType,startDate:r.startDate.split("T")[0],endDate:r.endDate.split("T")[0],status:r.status,targetAudience:r.targetAudience,maxUsage:r.maxUsage,conditions:r.conditions||""}:{title:"",description:"",type:"discount",discountValue:0,discountType:"percentage",startDate:"",endDate:"",status:"scheduled",targetAudience:"",maxUsage:void 0,conditions:""}),c({})},[r,s]);const d=(h,y)=>{l(g=>({...g,[h]:y})),o[h]&&c(g=>({...g,[h]:""}))},u=()=>{const h={};return i.title.trim()||(h.title="Title is required"),i.description.trim()||(h.description="Description is required"),i.targetAudience.trim()||(h.targetAudience="Target audience is required"),i.startDate||(h.startDate="Start date is required"),i.endDate||(h.endDate="End date is required"),i.startDate&&i.endDate&&i.startDate>=i.endDate&&(h.endDate="End date must be after start date"),i.discountValue<0&&(h.discountValue="Discount value cannot be negative"),i.discountType==="percentage"&&i.discountValue>100&&(h.discountValue="Percentage cannot exceed 100%"),i.maxUsage!==void 0&&i.maxUsage<1&&(h.maxUsage="Max usage must be at least 1"),c(h),Object.keys(h).length===0},m=()=>{u()&&a(i)};return s?e.jsx(pe,{isOpen:s,onClose:t,title:r?"Edit Promotion":"Create New Promotion",submitText:r?"Update Promotion":"Create Promotion",onSubmit:m,submitColor:"bg-blue-600",size:"lg",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:i.title,onChange:h=>d("title",h.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter promotion title"}),o.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{value:i.type,onChange:h=>d("type",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"discount",children:"Discount"}),e.jsx("option",{value:"service",children:"Service"}),e.jsx("option",{value:"referral",children:"Referral"}),e.jsx("option",{value:"seasonal",children:"Seasonal"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:i.description,onChange:h=>d("description",h.target.value),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter promotion description"}),o.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type *"}),e.jsxs("select",{value:i.discountType,onChange:h=>d("discountType",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Value *"}),e.jsx("input",{type:"number",value:i.discountValue,onChange:h=>d("discountValue",parseFloat(h.target.value)||0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.discountValue?"border-red-500":"border-gray-300"}`,placeholder:i.discountType==="percentage"?"0-100":"0",min:"0",max:i.discountType==="percentage"?"100":void 0}),o.discountValue&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.discountValue})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{value:i.status,onChange:h=>d("status",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"ended",children:"Ended"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",value:i.startDate,onChange:h=>d("startDate",h.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.startDate?"border-red-500":"border-gray-300"}`}),o.startDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),e.jsx("input",{type:"date",value:i.endDate,onChange:h=>d("endDate",h.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.endDate?"border-red-500":"border-gray-300"}`}),o.endDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.endDate})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Audience *"}),e.jsx("input",{type:"text",value:i.targetAudience,onChange:h=>d("targetAudience",h.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.targetAudience?"border-red-500":"border-gray-300"}`,placeholder:"e.g., All Customers, Students, etc."}),o.targetAudience&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.targetAudience})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Usage (Optional)"}),e.jsx("input",{type:"number",value:i.maxUsage||"",onChange:h=>d("maxUsage",h.target.value?parseInt(h.target.value):0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.maxUsage?"border-red-500":"border-gray-300"}`,placeholder:"Leave empty for unlimited",min:"1"}),o.maxUsage&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.maxUsage})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conditions (Optional)"}),e.jsx("textarea",{value:i.conditions,onChange:h=>d("conditions",h.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter any special conditions or requirements"})]})]})}):null}const nE=({promotion:s,isOpen:t,onClose:a,onDelete:r})=>{const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{try{i(!0),o(null),await r(s._id),a()}catch(d){o(d instanceof Error?d.message:"Failed to delete promotion")}finally{i(!1)}};return e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Promotion",submitText:"Delete Promotion",onSubmit:c,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-4 space-y-4",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the promotion."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Title:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Type:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Discount:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.discountType==="percentage"?`${s.discountValue}%`:`$${s.discountValue}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Start Date:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.startDate?new Date(s.startDate).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"End Date:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.endDate?new Date(s.endDate).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Target Audience:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.targetAudience})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Usage Count:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.usageCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Max Usage:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.maxUsage?s.maxUsage:"Unlimited"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Created:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Description:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 max-w-xs truncate",children:s.description||"N/A"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this promotion will also affect:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Active customer discounts"}),e.jsx("li",{children:"Promotion tracking data"}),e.jsx("li",{children:"Sales analytics"}),e.jsx("li",{children:"Customer loyalty programs"}),e.jsx("li",{children:"Marketing campaign effectiveness"})]})]})]})})},ln={async getPromotions(s={}){const t=new URLSearchParams;return Object.entries(s).forEach(([r,n])=>{n!==void 0&&n!==""&&t.append(r,n.toString())}),await le(M.get(`/promotions?${t.toString()}`))},async getPromotion(s){return await le(M.get(`/promotions/${s}`))},async createPromotion(s){return await le(M.post("/promotions",s))},async updatePromotion(s,t){return await le(M.put(`/promotions/${s}`,t))},async deletePromotion(s){return await le(M.delete(`/promotions/${s}`))},async updatePromotionStatus(s,t){return await le(M.put(`/promotions/${s}/status`,{status:t}))},async getPromotionStats(){return await le(M.get("/promotions/stats/overview"))},async getActivePromotions(){return await le(M.get("/promotions/active"))},async searchPromotions(s){return await le(M.get(`/promotions?search=${encodeURIComponent(s)}`))}},br=Y("promotions/fetchPromotions",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await ln.getPromotions(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch promotions")}}),Yh=Y("promotions/fetchPromotion",async(s,{rejectWithValue:t})=>{var a,r;try{return(await ln.getPromotion(s)).data.promotion}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch promotion")}}),vd=Y("promotions/createPromotion",async(s,{rejectWithValue:t})=>{var a,r;try{return(await ln.createPromotion(s)).data.promotion}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create promotion")}}),bd=Y("promotions/updatePromotion",async({id:s,promotionData:t},{rejectWithValue:a})=>{var r,n;try{return(await ln.updatePromotion(s,t)).data.promotion}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update promotion")}}),jd=Y("promotions/deletePromotion",async(s,{rejectWithValue:t})=>{var a,r;try{return await ln.deletePromotion(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete promotion")}}),Nd=Y("promotions/updatePromotionStatus",async({id:s,status:t},{rejectWithValue:a})=>{var r,n;try{return(await ln.updatePromotionStatus(s,t)).data.promotion}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update promotion status")}}),kn=Y("promotions/fetchPromotionStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await ln.getPromotionStats()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch promotion stats")}}),Kh=Y("promotions/fetchActivePromotions",async(s,{rejectWithValue:t})=>{var a,r;try{return(await ln.getActivePromotions()).data.activePromotions}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch active promotions")}}),iE={list:[],current:null,active:[],stats:null,loading:!1,error:null,pagination:null},lE=Rt({name:"promotions",initialState:iE,reducers:{clearError:s=>{s.error=null},clearCurrent:s=>{s.current=null},clearActive:s=>{s.active=[]}},extraReducers:s=>{s.addCase(br.pending,t=>{t.loading=!0,t.error=null}).addCase(br.fulfilled,(t,a)=>{t.loading=!1,t.list=a.payload.promotions,t.pagination=a.payload.pagination}).addCase(br.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(Yh.pending,t=>{t.loading=!0,t.error=null}).addCase(Yh.fulfilled,(t,a)=>{t.loading=!1,t.current=a.payload}).addCase(Yh.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(vd.pending,t=>{t.loading=!0,t.error=null}).addCase(vd.fulfilled,(t,a)=>{t.loading=!1,t.list.unshift(a.payload)}).addCase(vd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(bd.pending,t=>{t.loading=!0,t.error=null}).addCase(bd.fulfilled,(t,a)=>{var n;t.loading=!1;const r=t.list.findIndex(i=>i._id===a.payload._id);r!==-1&&(t.list[r]=a.payload),((n=t.current)==null?void 0:n._id)===a.payload._id&&(t.current=a.payload)}).addCase(bd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(jd.pending,t=>{t.loading=!0,t.error=null}).addCase(jd.fulfilled,(t,a)=>{var r;t.loading=!1,t.list=t.list.filter(n=>n._id!==a.payload),((r=t.current)==null?void 0:r._id)===a.payload&&(t.current=null)}).addCase(jd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(Nd.pending,t=>{t.loading=!0,t.error=null}).addCase(Nd.fulfilled,(t,a)=>{var n;t.loading=!1;const r=t.list.findIndex(i=>i._id===a.payload._id);r!==-1&&(t.list[r]=a.payload),((n=t.current)==null?void 0:n._id)===a.payload._id&&(t.current=a.payload)}).addCase(Nd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(kn.pending,t=>{t.loading=!0,t.error=null}).addCase(kn.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload}).addCase(kn.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(Kh.pending,t=>{t.loading=!0,t.error=null}).addCase(Kh.fulfilled,(t,a)=>{t.loading=!1,t.active=a.payload}).addCase(Kh.rejected,(t,a)=>{t.loading=!1,t.error=a.payload})}}),oE=lE.reducer;function cE(){var E,W,Z,I;const s=Ue(),[t,a]=b.useState("all"),[r,n]=b.useState("all"),[i,l]=b.useState(""),[o,c]=b.useState(!0),[d,u]=b.useState(!1),[m,h]=b.useState(!1),[y,g]=b.useState(null),[j,v]=b.useState(!1),{list:x,loading:f,stats:p}=je($=>$.promotions);b.useEffect(()=>{(async()=>{try{c(!0),await Promise.all([s(br({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0})),s(kn())])}catch(A){console.error("Error loading promotions:",A),P.error("Failed to load promotions")}finally{c(!1)}})()},[s]),b.useEffect(()=>{o||s(br({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0}))},[t,r,i,s]);const N=x||[],w=async $=>{try{v(!0),y?(await s(bd({id:y._id,promotionData:$})),P.success("Promotion updated successfully!")):(await s(vd($)),P.success("Promotion created successfully!")),u(!1),g(null),s(br({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0})),s(kn())}catch(A){console.error("Error saving promotion:",A),P.error("Failed to save promotion")}finally{v(!1)}},S=async $=>{try{v(!0),await s(jd($)),P.success("Promotion deleted successfully!"),h(!1),g(null),s(br({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0})),s(kn())}catch(A){console.error("Error deleting promotion:",A),P.error("Failed to delete promotion")}finally{v(!1)}},C=async($,A)=>{try{await s(Nd({id:$,status:A})),P.success("Promotion status updated successfully!"),s(br({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0})),s(kn())}catch(G){console.error("Error updating promotion status:",G),P.error("Failed to update promotion status")}},T=$=>{g($),u(!0)},_=$=>{g($),h(!0)},F=()=>{g(null),u(!0)},D=$=>{switch($){case"active":return"status-active";case"scheduled":return"status-pending";case"ended":return"status-inactive";case"paused":return"status-pending";default:return"status-inactive"}},R=$=>{switch($){case"discount":return"bg-primary-100 text-primary-800";case"service":return"bg-info-100 text-info-800";case"referral":return"bg-success-100 text-success-800";case"seasonal":return"bg-warning-100 text-warning-800";default:return"bg-secondary-100 text-secondary-800"}},U=($,A)=>A?$/A*100:0,O=$=>new Date($).toLocaleDateString();return o?e.jsx("div",{className:"min-h-screen bg-secondary-50 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary-600 border-2 border-primary-600 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-secondary-600",children:"Loading promotions..."})]})}):e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Marketing & Promotions"}),e.jsx("p",{className:"text-secondary-600",children:"Manage marketing campaigns and promotional offers"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:F,className:"btn-primary",children:[e.jsx(_s,{className:"w-4 h-4"}),"Create Promotion"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Active Promotions"}),e.jsx("p",{className:"text-3xl font-bold text-success-600",children:((E=p==null?void 0:p.overview)==null?void 0:E.activePromotions)||N.filter($=>$.status==="active"&&$.isActive!==!1).length})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(iv,{className:"w-6 h-6 text-success-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Usage"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:((W=p==null?void 0:p.overview)==null?void 0:W.totalUsage)||N.filter($=>$.isActive!==!1).reduce(($,A)=>$+A.usageCount,0)})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(U1,{className:"w-6 h-6 text-info-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Scheduled"}),e.jsx("p",{className:"text-3xl font-bold text-warning-600",children:((Z=p==null?void 0:p.overview)==null?void 0:Z.scheduledPromotions)||N.filter($=>$.status==="scheduled"&&$.isActive!==!1).length})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx(hs,{className:"w-6 h-6 text-warning-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Avg Savings"}),e.jsxs("p",{className:"text-3xl font-bold text-primary-600",children:["$",Math.round(((I=p==null?void 0:p.overview)==null?void 0:I.avgDiscountValue)||0)]})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(Do,{className:"w-6 h-6 text-primary-600"})})]})})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search promotions...",value:i,onChange:$=>l($.target.value),className:"form-input w-full pl-10 pr-4 py-2"})]}),e.jsxs("select",{value:t,onChange:$=>a($.target.value),className:"form-input",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"ended",children:"Ended"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsxs("select",{value:r,onChange:$=>n($.target.value),className:"form-input",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"discount",children:"Discount"}),e.jsx("option",{value:"service",children:"Service"}),e.jsx("option",{value:"referral",children:"Referral"}),e.jsx("option",{value:"seasonal",children:"Seasonal"})]})]}),e.jsx("div",{className:"grid-responsive",children:N.map($=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:$.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`status-badge ${R($.type)}`,children:$.type}),e.jsx("span",{className:`status-badge ${D($.status)}`,children:$.status})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T($),className:"p-2 text-secondary-400 hover:text-primary-600 transition-colors",title:"Edit promotion",children:e.jsx(nr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_($),className:"p-2 text-secondary-400 hover:text-error-600 transition-colors",title:"Delete promotion",children:e.jsx(Ls,{className:"w-4 h-4"})}),$.status==="active"?e.jsx("button",{onClick:()=>C($._id,"paused"),className:"p-2 text-secondary-400 hover:text-warning-600 transition-colors",title:"Pause promotion",children:e.jsx($1,{className:"w-4 h-4"})}):$.status==="paused"?e.jsx("button",{onClick:()=>C($._id,"active"),className:"p-2 text-secondary-400 hover:text-success-600 transition-colors",title:"Activate promotion",children:e.jsx(z1,{className:"w-4 h-4"})}):null]})]}),e.jsx("p",{className:"text-secondary-600 text-sm mb-4",children:$.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-secondary-500",children:"Discount"}),e.jsx("span",{className:"font-medium text-secondary-900",children:$.discountType==="percentage"?`${$.discountValue}% off`:$.discountValue===0?"Free":`$${$.discountValue} off`})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-secondary-500",children:"Valid Period"}),e.jsxs("span",{className:"font-medium text-secondary-900",children:[O($.startDate)," - ",O($.endDate)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-secondary-500",children:"Target"}),e.jsx("span",{className:"font-medium text-secondary-900",children:$.targetAudience})]}),$.maxUsage&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-secondary-500",children:"Usage"}),e.jsxs("span",{className:"font-medium text-secondary-900",children:[$.usageCount,"/",$.maxUsage]})]}),e.jsx("div",{className:"w-full bg-secondary-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${U($.usageCount,$.maxUsage)}%`}})})]}),$.conditions&&e.jsxs("div",{className:"text-xs text-secondary-500 bg-secondary-50 p-2 rounded",children:[e.jsx("strong",{children:"Conditions:"})," ",$.conditions]})]})]},$._id))}),!f&&N.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx(iv,{className:"empty-state-icon"}),e.jsx("h3",{className:"empty-state-title",children:"No promotions found"}),e.jsx("p",{className:"empty-state-description",children:"Try adjusting your filters or create a new promotion."})]}),e.jsx(rE,{isOpen:d,onClose:()=>{u(!1),g(null)},onSave:w,promotion:y,isLoading:j}),y&&e.jsx(nE,{isOpen:m,onClose:()=>{h(!1),g(null)},onDelete:S,promotion:y})]})}const _n=Y("communicationLogs/fetchCommunicationLogs",async(s={},{rejectWithValue:t})=>{try{const a=await ct.getCustomers(s),r=[];return a.data.customers.forEach(n=>{n.communicationLog&&Array.isArray(n.communicationLog)&&n.communicationLog.forEach(i=>{r.push({...i,customerId:n._id,customerName:n.name})})}),r}catch(a){return t(a.message||"Failed to fetch communication logs")}}),wd=Y("communicationLogs/fetchCommunicationStats",async(s,{rejectWithValue:t})=>{try{const a=await ct.getCustomers({}),r=[];return a.data.customers.forEach(i=>{i.communicationLog&&Array.isArray(i.communicationLog)&&r.push(...i.communicationLog)}),{totalLogs:r.length,byType:{phone:r.filter(i=>i.type==="phone").length,email:r.filter(i=>i.type==="email").length,"in-person":r.filter(i=>i.type==="in-person").length,sms:r.filter(i=>i.type==="sms").length},byDirection:{inbound:r.filter(i=>i.direction==="inbound").length,outbound:r.filter(i=>i.direction==="outbound").length}}}catch(a){return t(a.message||"Failed to fetch communication stats")}}),Sd=Y("communicationLogs/createCommunicationLog",async({customerId:s,logData:t},{rejectWithValue:a})=>{try{return(await ct.addCommunicationLog(s,t)).data}catch(r){return a(r.message||"Failed to create communication log")}}),Cd=Y("communicationLogs/updateCommunicationLog",async({customerId:s,logId:t,logData:a},{rejectWithValue:r})=>{try{return{customerId:s,logId:t,...a}}catch(n){return r(n.message||"Failed to update communication log")}}),kd=Y("communicationLogs/deleteCommunicationLog",async({customerId:s,logId:t},{rejectWithValue:a})=>{try{return{customerId:s,logId:t}}catch(r){return a(r.message||"Failed to delete communication log")}});function dE({onClose:s,onSave:t,isLoading:a=!1}){const[r,n]=b.useState({customerId:"",customerName:"",date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),type:"phone",direction:"outbound",subject:"",content:"",outcome:"resolved",employeeName:"",priority:"medium",relatedService:""}),{list:i=[]}=je(u=>u.customers),l=Ue();b.useEffect(()=>{(!i||i.length===0)&&l(zt({}))},[l,i]);const o=(u,m)=>{n(h=>({...h,[u]:m}))},c=u=>{const m=i.find(h=>h._id===u||h.id===u);n(h=>({...h,customerId:u,customerName:(m==null?void 0:m.name)||""}))},d=()=>{if(!r.customerId||!r.subject||!r.content||!r.employeeName){alert("Please fill in all required fields.");return}t(r)};return e.jsx(pe,{isOpen:!0,title:"Log Communication",onClose:s,onSubmit:d,submitText:a?"Creating...":"Log Communication",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{value:r.customerId,onChange:u=>c(u.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"",children:"Select a customer"}),i.map(u=>e.jsx("option",{value:u._id,children:u.name},u._id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Date *"}),e.jsx("input",{type:"date",value:r.date,onChange:u=>o("date",u.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Time *"}),e.jsx("input",{type:"time",value:r.time,onChange:u=>o("time",u.target.value),className:"form-input",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Type *"}),e.jsxs("select",{value:r.type,onChange:u=>o("type",u.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"in-person",children:"In-Person"}),e.jsx("option",{value:"sms",children:"SMS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Direction *"}),e.jsxs("select",{value:r.direction,onChange:u=>o("direction",u.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"inbound",children:"Inbound"}),e.jsx("option",{value:"outbound",children:"Outbound"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Subject *"}),e.jsx("input",{type:"text",value:r.subject,onChange:u=>o("subject",u.target.value),placeholder:"Brief description",className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Content *"}),e.jsx("textarea",{value:r.content,onChange:u=>o("content",u.target.value),placeholder:"Detailed notes",rows:4,className:"form-textarea",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Outcome *"}),e.jsxs("select",{value:r.outcome,onChange:u=>o("outcome",u.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"follow-up-needed",children:"Follow-up Needed"}),e.jsx("option",{value:"appointment-scheduled",children:"Appointment Scheduled"}),e.jsx("option",{value:"no-answer",children:"No Answer"}),e.jsx("option",{value:"callback-requested",children:"Callback Requested"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Priority *"}),e.jsxs("select",{value:r.priority,onChange:u=>o("priority",u.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Employee Name *"}),e.jsx("input",{type:"text",value:r.employeeName,onChange:u=>o("employeeName",u.target.value),placeholder:"Who handled this",className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Related Service"}),e.jsx("input",{type:"text",value:r.relatedService,onChange:u=>o("relatedService",u.target.value),placeholder:"e.g., Oil Change",className:"form-input"})]})]})]})})}function uE({onClose:s,onSave:t,isLoading:a=!1,log:r}){const n=()=>typeof r.customerId=="object"&&r.customerId!==null?r.customerId._id||r.customerId.id:r.customerId,i=()=>typeof r.customerId=="object"&&r.customerId!==null?r.customerId.name||"":r.customerName||"",[l,o]=b.useState({customerId:n(),customerName:i(),date:r.date,time:r.time||"09:00",type:r.type,direction:r.direction,subject:r.subject||"",content:r.content,outcome:r.outcome||"resolved",employeeName:r.employeeName,priority:r.priority||"medium",relatedService:r.relatedService||""}),{list:c=[]}=je(y=>y.customers),d=Ue();b.useEffect(()=>{(!c||c.length===0)&&d(zt({}))},[d,c]),b.useEffect(()=>{o({customerId:n(),customerName:i(),date:r.date,time:r.time||"09:00",type:r.type,direction:r.direction,subject:r.subject||"",content:r.content,outcome:r.outcome||"resolved",employeeName:r.employeeName,priority:r.priority||"medium",relatedService:r.relatedService||""})},[r]);const u=(y,g)=>{o(j=>({...j,[y]:g}))},m=y=>{const g=c.find(j=>j._id===y||j.id===y);o(j=>({...j,customerId:y,customerName:(g==null?void 0:g.name)||""}))},h=()=>{if(!l.customerId||!l.date||!l.content||!l.employeeName){alert("Please fill in all required fields.");return}t(l)};return e.jsx(pe,{isOpen:!0,onClose:s,title:"Edit Communication Log",onSubmit:h,submitText:a?"Updating...":"Update Communication Log",children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{value:l.customerId,onChange:y=>m(y.target.value),className:"form-select",children:[e.jsx("option",{value:"",children:"Select a customer"}),c.map(y=>e.jsx("option",{value:y._id,children:y.name},y._id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Date *"}),e.jsx("input",{type:"date",value:l.date,onChange:y=>u("date",y.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Time"}),e.jsx("input",{type:"time",value:l.time,onChange:y=>u("time",y.target.value),className:"form-input"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Type *"}),e.jsxs("select",{value:l.type,onChange:y=>u("type",y.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"in-person",children:"In-Person"}),e.jsx("option",{value:"sms",children:"SMS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Direction *"}),e.jsxs("select",{value:l.direction,onChange:y=>u("direction",y.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"inbound",children:"Inbound"}),e.jsx("option",{value:"outbound",children:"Outbound"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Subject"}),e.jsx("input",{type:"text",value:l.subject,onChange:y=>u("subject",y.target.value),placeholder:"Enter subject",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Content *"}),e.jsx("textarea",{value:l.content,onChange:y=>u("content",y.target.value),placeholder:"Enter communication content",rows:4,className:"form-textarea",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Outcome"}),e.jsxs("select",{value:l.outcome,onChange:y=>u("outcome",y.target.value),className:"form-select",children:[e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"follow-up-needed",children:"Follow-up Needed"}),e.jsx("option",{value:"appointment-scheduled",children:"Appointment Scheduled"}),e.jsx("option",{value:"no-answer",children:"No Answer"}),e.jsx("option",{value:"callback-requested",children:"Callback Requested"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{value:l.priority,onChange:y=>u("priority",y.target.value),className:"form-select",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Employee Name *"}),e.jsx("input",{type:"text",value:l.employeeName,onChange:y=>u("employeeName",y.target.value),placeholder:"Enter employee name",className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Related Service"}),e.jsx("input",{type:"text",value:l.relatedService,onChange:y=>u("relatedService",y.target.value),placeholder:"Enter related service",className:"form-input"})]})]})]})})}function mE({isOpen:s,onClose:t,onConfirm:a,isLoading:r=!1}){return e.jsx(pe,{isOpen:s,onClose:t,title:"Confirm Delete",icon:e.jsx(Ct,{className:"w-5 h-5"}),submitText:r?"Deleting...":"Delete",onSubmit:a,submitColor:"bg-red-600",children:e.jsx("div",{className:"p-4 space-y-4",children:e.jsx("p",{className:"text-secondary-600",children:"Are you sure you want to delete this communication log? This action cannot be undone."})})})}function hE({isOpen:s,onClose:t,log:a,getCustomerName:r,getTypeIcon:n}){return e.jsx(pe,{isOpen:s,onClose:t,title:"Communication Details",icon:e.jsx(Al,{className:"w-5 h-5"}),children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Customer"}),e.jsx("p",{className:"text-secondary-900",children:r(a.customerId)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Employee"}),e.jsx("p",{className:"text-secondary-900",children:a.employeeName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Date"}),e.jsx("p",{className:"text-secondary-900",children:a.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Type"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n(a.type),e.jsx("span",{className:"text-sm text-secondary-900 capitalize",children:a.type})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Subject"}),e.jsx("p",{className:"text-secondary-900",children:a.subject||"No Subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Content"}),e.jsx("p",{className:"text-secondary-900 bg-secondary-50 p-3 rounded-lg",children:a.content})]})]})})}function xE(){const[s,t]=b.useState("all"),[a,r]=b.useState(""),[n,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState(null),[h,y]=b.useState(null),g=Ue(),{logs:j,stats:v,loading:x}=je(D=>D.communicationLogs),f=je(D=>D.customers.list);b.useEffect(()=>{g(_n({})),g(wd()),g(zt({}))},[g]);const p=j.filter(D=>{const R=s==="all"||D.type===s,U=D.content.toLowerCase().includes(a.toLowerCase())||(D.subject||"").toLowerCase().includes(a.toLowerCase());return R&&U}),N=D=>{switch(D){case"phone":return e.jsx(bs,{className:"w-4 h-4"});case"email":return e.jsx(Yt,{className:"w-4 h-4"});case"in-person":return e.jsx(Ia,{className:"w-4 h-4"});case"sms":return e.jsx(Al,{className:"w-4 h-4"});default:return e.jsx(Al,{className:"w-4 h-4"})}},w=D=>{switch(D){case"phone":return"bg-success-100 text-success-800";case"email":return"bg-info-100 text-info-800";case"in-person":return"bg-warning-100 text-warning-800";case"sms":return"bg-primary-100 text-primary-800";default:return"bg-secondary-100 text-secondary-800"}},S=D=>{const R=D.customerId;g(Sd({customerId:R,logData:D})).then(U=>{U.meta.requestStatus==="fulfilled"&&(o(!1),g(_n({})))})},C=D=>{m(D),d(!0)},T=D=>{if(!u)return;const R=u.id||u._id;let U;typeof u.customerId=="object"&&u.customerId!==null?U=u.customerId._id||u.customerId.id:U=u.customerId,g(Cd({customerId:U,logId:R,logData:D})).then(O=>{O.meta.requestStatus==="fulfilled"&&(d(!1),m(null),g(_n({})))})},_=D=>{const R=j.find(O=>O.id===D||O._id===D);if(!R)return;let U;typeof R.customerId=="object"&&R.customerId!==null?U=R.customerId._id||R.customerId.id:U=R.customerId,g(kd({customerId:U,logId:D})).then(O=>{O.meta.requestStatus==="fulfilled"&&(y(null),g(_n({})))})},F=D=>{if(console.log("=== getCustomerName Debug ==="),console.log("Looking for customer with ID/Object:",D),console.log("Type of customerId:",typeof D),typeof D=="object"&&D!==null&&D.name)return console.log("✅ CustomerId is a customer object, returning name:",D.name),D.name;if(typeof D=="string"){if(console.log("CustomerId is string, searching in customer list..."),console.log("Available customers count:",f.length),f.length===0)return console.log("⚠️ No customers loaded yet!"),"Loading...";const R=f.find(U=>U.id===D||U._id===D);return R?console.log("✅ Found customer:",R):(console.log("❌ Customer not found for ID:",D),console.log("Available customer IDs:",f.map(U=>U.id||U._id))),(R==null?void 0:R.name)||"Unknown Customer"}return console.log("❌ CustomerId is neither string nor valid object:",D),"Unknown Customer"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Customer Communication Logs"}),e.jsx("p",{className:"text-secondary-600",children:"Track and manage all customer interactions"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>o(!0),className:"btn-primary",children:[e.jsx(_s,{className:"w-4 h-4"}),"Log Communication"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Contacts"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600",children:j.length})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(Al,{className:"w-6 h-6 text-primary-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Phone Calls"}),e.jsx("p",{className:"text-3xl font-bold text-success-600",children:j.filter(D=>D.type==="phone").length})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(bs,{className:"w-6 h-6 text-success-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Emails"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:j.filter(D=>D.type==="email").length})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(Yt,{className:"w-6 h-6 text-info-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"In-Person"}),e.jsx("p",{className:"text-3xl font-bold text-warning-600",children:j.filter(D=>D.type==="in-person").length})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx(Ia,{className:"w-6 h-6 text-warning-600"})})]})})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Or,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search communications...",value:a,onChange:D=>r(D.target.value),className:"form-input w-full pl-12 pr-4 py-3"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(eP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400 w-4 h-4"}),e.jsxs("select",{value:s,onChange:D=>t(D.target.value),className:"form-input pl-10 pr-8 py-3 min-w-[160px]",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"in-person",children:"In-Person"}),e.jsx("option",{value:"sms",children:"SMS"})]})]})]})})}),e.jsx("div",{className:"card",children:x?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary-600 border-2 border-primary-600 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-secondary-600",children:"Loading communication logs..."})]})}):e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Type"}),e.jsx("th",{className:"table-header-cell",children:"Subject"}),e.jsx("th",{className:"table-header-cell",children:"Customer"}),e.jsx("th",{className:"table-header-cell",children:"Employee"}),e.jsx("th",{className:"table-header-cell",children:"Date"}),e.jsx("th",{className:"table-header-cell",children:"Direction"}),e.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),e.jsx("tbody",{className:"table-body",children:p.map(D=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${w(D.type)}`,children:N(D.type)}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:D.type})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-secondary-900",children:D.subject||"No Subject"}),e.jsx("div",{className:"text-sm text-secondary-600 truncate max-w-xs",children:D.content})]})}),e.jsx("td",{className:"table-cell",children:e.jsx("div",{className:"font-medium text-secondary-900",children:F(D.customerId)})}),e.jsx("td",{className:"table-cell",children:e.jsx("div",{className:"font-medium text-secondary-900",children:D.employeeName})}),e.jsx("td",{className:"table-cell",children:e.jsx("div",{className:"text-sm text-secondary-900",children:D.date})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center gap-1",children:[D.direction==="inbound"?e.jsx(qT,{className:"w-4 h-4 text-success-600"}):e.jsx(YT,{className:"w-4 h-6 text-info-600"}),e.jsx("span",{className:"text-sm text-secondary-700 capitalize",children:D.direction})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(D),className:"p-2 text-primary-600 hover:text-primary-800 hover:bg-primary-50 rounded-lg transition-all duration-200",title:"View Details",children:e.jsx(Jr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(D),className:"p-2 text-secondary-600 hover:text-secondary-800 hover:bg-secondary-50 rounded-lg transition-all duration-200",title:"Edit",children:"Edit"}),e.jsx("button",{onClick:()=>y(D.id||D._id),className:"p-2 text-error-600 hover:text-error-800 hover:bg-error-50 rounded-lg transition-all duration-200",title:"Delete",children:"Delete"})]})})]},D.id))})]}),p.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-secondary-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Al,{className:"w-8 h-8 text-secondary-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 mb-2",children:"No communication logs found"}),e.jsx("p",{className:"text-secondary-600",children:"Try adjusting your filters or log a new communication."})]})]})})]}),n&&e.jsx(hE,{isOpen:!!n,onClose:()=>i(null),log:n,getCustomerName:F,getTypeIcon:N}),l&&e.jsx(dE,{onClose:()=>o(!1),onSave:S,isLoading:x}),c&&u&&e.jsx(uE,{onClose:()=>{d(!1),m(null)},onSave:T,isLoading:x,log:u}),h&&e.jsx(mE,{isOpen:!!h,onClose:()=>y(null),onConfirm:()=>_(h),isLoading:x})]})}function Mv({isOpen:s,onClose:t,onSubmit:a,formData:r,handleInputChange:n,isSubmitting:i,isEditing:l}){return e.jsx(pe,{isOpen:s,onClose:t,onSubmit:a,title:l?"Edit Campaign":"Create New Campaign",icon:e.jsx(Yt,{className:"w-5 h-5"}),submitText:i?l?"Updating...":"Creating...":l?"Update Campaign":"Create Campaign",children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 border-b border-secondary-200 pb-2",children:"Campaign Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Campaign Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:o=>n("name",o.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Subject Line *"}),e.jsx("input",{type:"text",value:r.subject,onChange:o=>n("subject",o.target.value),className:"form-input",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 border-b border-secondary-200 pb-2",children:"Sender Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"From Name *"}),e.jsx("input",{type:"text",value:r.settings.fromName,onChange:o=>n("settings.fromName",o.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"From Email *"}),e.jsx("input",{type:"email",value:r.settings.fromEmail,onChange:o=>n("settings.fromEmail",o.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Reply To"}),e.jsx("input",{type:"email",value:r.settings.replyTo,onChange:o=>n("settings.replyTo",o.target.value),className:"form-input"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 border-b border-secondary-200 pb-2",children:"Campaign Content"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"HTML Content"}),e.jsx("textarea",{value:r.content.html,onChange:o=>n("content.html",o.target.value),rows:6,className:"form-textarea",placeholder:"<h1>Hello World</h1>"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Plain Text Content"}),e.jsx("textarea",{value:r.content.plainText,onChange:o=>n("content.plainText",o.target.value),rows:4,className:"form-textarea",placeholder:"Hello World"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 border-b border-secondary-200 pb-2",children:"Recipient List"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"List ID *"}),e.jsx("input",{type:"text",value:r.recipients.listId,onChange:o=>n("recipients.listId",o.target.value),className:"form-input",placeholder:"e.g., list123456",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"List Name"}),e.jsx("input",{type:"text",value:r.recipients.listName,onChange:o=>n("recipients.listName",o.target.value),className:"form-input",placeholder:"e.g., Newsletter Subscribers"})]})]})]})]})})}function pE(){const[s,t]=b.useState([]),[a,r]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState(null),[h,y]=b.useState(!1),[g,j]=b.useState({name:"",subject:"",type:"regular",content:{html:"",plainText:""},settings:{fromName:"",fromEmail:"",replyTo:""},recipients:{listId:"",listName:"",recipientCount:0}});b.useEffect(()=>{v()},[]);const v=async()=>{try{r(!0);const D=await M.get("/mailchimp/campaigns");D.data.success&&t(D.data.data.campaigns)}catch(D){console.error("Error fetching campaigns:",D),P.error("Failed to fetch campaigns")}finally{r(!1)}},x=async D=>{var R,U;D.preventDefault(),y(!0);try{(await M.post("/mailchimp/campaigns",g)).data.success&&(P.success("Campaign created successfully"),i(!1),T(),v())}catch(O){console.error("Error creating campaign:",O),P.error(((U=(R=O.response)==null?void 0:R.data)==null?void 0:U.message)||"Failed to create campaign")}finally{y(!1)}},f=async D=>{var R,U;if(D.preventDefault(),!!u){y(!0);try{(await M.put(`/mailchimp/campaigns/${u._id}`,g)).data.success&&(P.success("Campaign updated successfully"),o(!1),T(),v())}catch(O){console.error("Error updating campaign:",O),P.error(((U=(R=O.response)==null?void 0:R.data)==null?void 0:U.message)||"Failed to update campaign")}finally{y(!1)}}},p=async()=>{var D,R;if(u){y(!0);try{(await M.delete(`/mailchimp/campaigns/${u._id}`)).data.success&&(P.success("Campaign deleted successfully"),d(!1),m(null),v())}catch(U){console.error("Error deleting campaign:",U),P.error(((R=(D=U.response)==null?void 0:D.data)==null?void 0:R.message)||"Failed to delete campaign")}finally{y(!1)}}},N=async D=>{try{(await M.post(`/mailchimp/campaigns/${D}/send`)).data.success&&(P.success("Campaign sent successfully"),v())}catch{P.error("Failed to send campaign")}},w=()=>{T(),i(!0)},S=D=>{m(D),j({name:D.name,subject:D.subject,type:D.type,content:D.content,settings:D.settings,recipients:D.recipients}),o(!0)},C=D=>{m(D),d(!0)},T=()=>{j({name:"",subject:"",type:"regular",content:{html:"",plainText:""},settings:{fromName:"",fromEmail:"",replyTo:""},recipients:{listId:"",listName:"",recipientCount:0}})},_=(D,R)=>{if(D.includes(".")){const[U,O]=D.split(".");j(E=>({...E,[U]:{...E[U],[O]:R}}))}else j(U=>({...U,[D]:R}))},F=D=>{switch(D){case"sent":return"status-success";case"sending":return"status-info";case"save":return"status-secondary";case"schedule":return"status-warning";default:return"status-secondary"}};return e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsx("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"MailChimp Integration"}),e.jsx("p",{className:"text-secondary-600",children:"Manage email marketing campaigns and automation"})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-secondary-900",children:"Marketing Campaigns"}),e.jsxs("button",{onClick:w,className:"btn-primary",children:[e.jsx(_s,{className:"h-5 w-5 mr-2"}),"Create Campaign"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Campaign"}),e.jsx("th",{className:"table-header-cell",children:"Status"}),e.jsx("th",{className:"table-header-cell",children:"Recipients"}),e.jsx("th",{className:"table-header-cell",children:"Performance"}),e.jsx("th",{className:"table-header-cell",children:"Created"}),e.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),e.jsx("tbody",{children:a?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-secondary-500",children:"Loading campaigns..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-secondary-500",children:"No campaigns found"})}):s.map(D=>e.jsxs("tr",{className:"hover:bg-secondary-50",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:D.name}),e.jsx("div",{className:"text-sm text-secondary-500",children:D.subject})]})}),e.jsx("td",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${F(D.status)}`,children:D.status})}),e.jsx("td",{className:"table-cell text-sm text-secondary-900",children:D.recipients.recipientCount.toLocaleString()}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"text-sm text-secondary-900",children:[e.jsxs("div",{children:["Opens: ",D.analytics.opens]}),e.jsxs("div",{children:["Clicks: ",D.analytics.clicks]})]})}),e.jsx("td",{className:"table-cell text-sm text-secondary-500",children:new Date(D.createdAt).toLocaleDateString()}),e.jsx("td",{className:"table-cell text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>S(D),className:"text-primary-600 hover:text-primary-900 transition-colors",title:"Edit Campaign",children:e.jsx(nr,{className:"w-4 h-4"})}),D.status==="save"&&e.jsx("button",{onClick:()=>N(D._id),className:"text-success-600 hover:text-success-900 transition-colors",title:"Send Campaign",children:e.jsx(F1,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(D),className:"text-error-600 hover:text-error-900 transition-colors",title:"Delete Campaign",children:e.jsx(Ls,{className:"w-4 h-4"})})]})})]},D._id))})]})})]}),n&&e.jsx(Mv,{isOpen:n,onClose:()=>i(!1),onSubmit:x,isSubmitting:h,formData:g,handleInputChange:_,isEditing:!1}),l&&u&&e.jsx(Mv,{isOpen:l,onClose:()=>o(!1),onSubmit:f,isSubmitting:h,formData:g,handleInputChange:_,isEditing:!0}),c&&u&&e.jsx(pe,{isOpen:c,onClose:()=>d(!1),onSubmit:p,title:"Delete Campaign",icon:e.jsx(Ls,{className:"w-5 h-5"}),submitText:h?"Deleting...":"Delete Campaign",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("p",{className:"text-secondary-600 mb-4",children:["Are you sure you want to delete the campaign ",e.jsxs("strong",{children:['"',u.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-secondary-500",children:"This action cannot be undone."})]})})]})}const tc={async getCampaigns(s={}){const t=new URLSearchParams;return Object.entries(s).forEach(([r,n])=>{n!==void 0&&n!==""&&t.append(r,n.toString())}),await le(M.get(`/marketing/campaigns?${t.toString()}`))},async createCampaign(s){return await le(M.post("/marketing/campaigns",s))},async deleteCampaign(s){return await le(M.delete(`/marketing/campaigns/${s}`))},async updateCampaignStatus(s,t){return await le(M.put(`/marketing/campaigns/${s}/status`,{status:t}))},async getCampaignStats(){return await le(M.get("/marketing/campaigns/stats/overview"))}},An=Y("marketing/fetchCampaigns",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await tc.getCampaigns(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch campaigns")}}),_d=Y("marketing/createCampaign",async(s,{rejectWithValue:t})=>{var a,r;try{return(await tc.createCampaign(s)).data.campaign}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create campaign")}}),Ad=Y("marketing/deleteCampaign",async(s,{rejectWithValue:t})=>{var a,r;try{return await tc.deleteCampaign(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete campaign")}}),Td=Y("marketing/updateCampaignStatus",async({id:s,status:t},{rejectWithValue:a})=>{var r,n;try{return(await tc.updateCampaignStatus(s,t)).data.campaign}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update campaign status")}}),Tn=Y("marketing/fetchCampaignStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await tc.getCampaignStats()).data.overview}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch campaign stats")}}),fE={campaigns:[],stats:null,loading:!1,error:null,pagination:null},gE=Rt({name:"marketing",initialState:fE,reducers:{clearError:s=>{s.error=null}},extraReducers:s=>{s.addCase(An.pending,t=>{t.loading=!0,t.error=null}).addCase(An.fulfilled,(t,a)=>{t.loading=!1,t.campaigns=a.payload.campaigns,t.pagination=a.payload.pagination}).addCase(An.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(_d.pending,t=>{t.loading=!0,t.error=null}).addCase(_d.fulfilled,(t,a)=>{t.loading=!1,t.campaigns.unshift(a.payload)}).addCase(_d.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(Ad.pending,t=>{t.loading=!0,t.error=null}).addCase(Ad.fulfilled,(t,a)=>{t.loading=!1,t.campaigns=t.campaigns.filter(r=>r._id!==a.payload)}).addCase(Ad.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(Td.pending,t=>{t.loading=!0,t.error=null}).addCase(Td.fulfilled,(t,a)=>{t.loading=!1;const r=t.campaigns.findIndex(n=>n._id===a.payload._id);r!==-1&&(t.campaigns[r]=a.payload)}).addCase(Td.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(Tn.pending,t=>{t.loading=!0,t.error=null}).addCase(Tn.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload}).addCase(Tn.rejected,(t,a)=>{t.loading=!1,t.error=a.payload})}}),yE=gE.reducer;function vE({isOpen:s,onClose:t,onSave:a,isLoading:r=!1}){const[n,i]=b.useState({name:"",type:"email",subject:"",content:"",recipients:[]}),[l,o]=b.useState({}),c=(m,h)=>{i(y=>({...y,[m]:h})),l[m]&&o(y=>({...y,[m]:""}))},d=()=>{var h;const m={};return n.name.trim()||(m.name="Campaign name is required"),n.content.trim()||(m.content="Content is required"),n.type==="email"&&!((h=n.subject)!=null&&h.trim())&&(m.subject="Subject is required for email campaigns"),o(m),Object.keys(m).length===0},u=()=>{var h;if(!d())return;const m={...n};(m.type!=="email"||!((h=m.subject)!=null&&h.trim()))&&delete m.subject,a(m)};return e.jsx(pe,{isOpen:s,onClose:t,onSubmit:u,title:"Create New Campaign",icon:e.jsx(Yt,{className:"w-5 h-5"}),submitText:r?"Creating...":"Create Campaign",children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 border-b border-secondary-200 pb-2",children:"Campaign Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Campaign Name *"}),e.jsx("input",{type:"text",value:n.name,onChange:m=>c("name",m.target.value),className:`form-input ${l.name?"border-error-500 focus:border-error-500 focus:ring-error-500":""}`,placeholder:"Enter campaign name"}),l.name&&e.jsx("p",{className:"text-error-500 text-sm mt-1",children:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Campaign Type *"}),e.jsxs("select",{value:n.type,onChange:m=>c("type",m.target.value),className:"form-select",children:[e.jsx("option",{value:"email",children:"Email Campaign"}),e.jsx("option",{value:"sms",children:"SMS Campaign"}),e.jsx("option",{value:"mailchimp",children:"MailChimp Campaign"})]})]})]})]}),n.type==="email"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 border-b border-secondary-200 pb-2",children:"Email Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Subject Line *"}),e.jsx("input",{type:"text",value:n.subject||"",onChange:m=>c("subject",m.target.value),className:`form-input ${l.subject?"border-error-500 focus:border-error-500 focus:ring-error-500":""}`,placeholder:"Enter email subject"}),l.subject&&e.jsx("p",{className:"text-error-500 text-sm mt-1",children:l.subject})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 border-b border-secondary-200 pb-2",children:"Campaign Content"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Content *"}),e.jsx("textarea",{value:n.content,onChange:m=>c("content",m.target.value),rows:6,className:`form-textarea ${l.content?"border-error-500 focus:border-error-500 focus:ring-error-500":""}`,placeholder:`Enter your ${n.type} content here...`}),l.content&&e.jsx("p",{className:"text-error-500 text-sm mt-1",children:l.content})]})]})]})})}const bE=({campaign:s,isOpen:t,onClose:a,onDelete:r})=>{const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{try{i(!0),o(null),await r(s._id),a()}catch(d){o(d instanceof Error?d.message:"Failed to delete marketing campaign")}finally{i(!1)}};return e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Marketing Campaign",submitText:"Delete Campaign",onSubmit:c,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-4 space-y-4",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the marketing campaign."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Name:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Type:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Subject:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.subject||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Recipients:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.recipientCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Sent:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.sentCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Opened:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.openedCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Clicked:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.clickedCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Created By:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.createdBy.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Created:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Content Preview:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 max-w-xs truncate",children:s.content?s.content.substring(0,50)+"...":"N/A"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this marketing campaign will also affect:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Campaign performance data"}),e.jsx("li",{children:"Marketing analytics"}),e.jsx("li",{children:"Customer engagement metrics"}),e.jsx("li",{children:"Recipient lists"}),e.jsx("li",{children:"ROI calculations"})]})]})]})})};function jE(){const s=Ue(),[t,a]=b.useState("all"),[r,n]=b.useState("all"),[i,l]=b.useState(""),[o,c]=b.useState(!1),[d,u]=b.useState(!1),[m,h]=b.useState(null),[y,g]=b.useState(!1),{campaigns:j,stats:v,loading:x}=je(_=>_.marketing);b.useEffect(()=>{(async()=>{try{await Promise.all([s(An({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0})),s(Tn())])}catch(F){console.error("Error loading marketing data:",F),P.error("Failed to load marketing data")}})()},[s]),b.useEffect(()=>{x||s(An({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0}))},[t,r,i,s]);const f=async _=>{try{g(!0),await s(_d(_)),P.success("Campaign created successfully!"),c(!1),s(An({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0})),s(Tn())}catch(F){console.error("Error creating campaign:",F),P.error("Failed to create campaign")}finally{g(!1)}},p=_=>{h(_),u(!0)},N=async _=>{try{g(!0),await s(Ad(_)),P.success("Campaign deleted successfully!"),u(!1),h(null),s(An({status:t!=="all"?t:void 0,type:r!=="all"?r:void 0,search:i||void 0})),s(Tn())}catch(F){console.error("Error deleting campaign:",F),P.error("Failed to delete campaign")}finally{g(!1)}},w=async(_,F)=>{try{await s(Td({id:_,status:F})),P.success("Campaign status updated successfully!"),s(Tn())}catch(D){console.error("Error updating campaign status:",D),P.error("Failed to update campaign status")}},S=_=>{switch(_){case"sent":return e.jsx(ke,{className:"w-5 h-5 text-success-500"});case"scheduled":return e.jsx(vt,{className:"w-5 h-5 text-info-500"});case"draft":return e.jsx(Tt,{className:"w-5 h-5 text-secondary-500"});case"failed":return e.jsx(Ta,{className:"w-5 h-5 text-error-500"});default:return e.jsx(ot,{className:"w-5 h-5 text-warning-500"})}},C=_=>{switch(_){case"sent":return"status-active";case"scheduled":return"status-pending";case"draft":return"status-inactive";case"failed":return"status-inactive";default:return"status-pending"}},T=_=>{switch(_){case"email":return e.jsx(jt,{className:"w-5 h-5 text-info-500"});case"sms":return e.jsx(kt,{className:"w-5 h-5 text-success-500"});case"mailchimp":return e.jsx(nt,{className:"w-5 h-5 text-primary-500"});default:return e.jsx(jt,{className:"w-5 h-5 text-secondary-500"})}};return x?e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-text",children:"Loading marketing data..."})]})}):e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsx("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Marketing Dashboard"}),e.jsx("p",{className:"text-secondary-600",children:"Manage marketing campaigns and track performance"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-info-100 rounded-xl mx-auto mb-4",children:e.jsx(jt,{className:"w-6 h-6 text-info-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:(v==null?void 0:v.totalCampaigns)||0}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Total Campaigns"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-success-100 rounded-xl mx-auto mb-4",children:e.jsx(nt,{className:"w-6 h-6 text-success-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Recipients"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:((v==null?void 0:v.totalRecipients)||0).toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Total Recipients"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-primary-100 rounded-xl mx-auto mb-4",children:e.jsx(Qs,{className:"w-6 h-6 text-primary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Delivery"}),e.jsxs("p",{className:"text-2xl font-bold text-secondary-900",children:[v!=null&&v.totalRecipients&&v.totalRecipients>0?(v.totalSent/v.totalRecipients*100).toFixed(1):"0.0","%"]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Delivery Rate"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-warning-100 rounded-xl mx-auto mb-4",children:e.jsx(St,{className:"w-6 h-6 text-warning-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Open Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-secondary-900",children:[v!=null&&v.totalSent&&v.totalSent>0?(v.totalOpened/v.totalSent*100).toFixed(1):"0.0","%"]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Open Rate"})})]})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:t,onChange:_=>a(_.target.value),className:"form-input",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Type"}),e.jsxs("select",{value:r,onChange:_=>n(_.target.value),className:"form-input",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"mailchimp",children:"MailChimp"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Search"}),e.jsx("input",{type:"text",value:i,onChange:_=>l(_.target.value),placeholder:"Search campaigns...",className:"form-input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{a("all"),n("all"),l("")},className:"btn-secondary w-full",children:"Clear Filters"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("button",{onClick:()=>c(!0),className:"card p-6 text-left hover:bg-secondary-50 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx(jt,{className:"w-6 h-6 text-info-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-secondary-900",children:"Create Email Campaign"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"Send to your customer list"})]})]})}),e.jsx("button",{onClick:()=>c(!0),className:"card p-6 text-left hover:bg-secondary-50 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx(kt,{className:"w-6 h-6 text-success-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-secondary-900",children:"Send SMS"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"Quick text message"})]})]})}),e.jsx("button",{onClick:()=>c(!0),className:"card p-6 text-left hover:bg-secondary-50 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx(lt,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-secondary-900",children:"Create Template"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"Design reusable templates"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-medium text-secondary-900",children:"Recent Campaigns"}),e.jsxs("button",{onClick:()=>c(!0),className:"btn-primary",children:[e.jsx(Ze,{className:"h-5 w-5 mr-2"}),"Create Campaign"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Campaign"}),e.jsx("th",{className:"table-header-cell",children:"Type"}),e.jsx("th",{className:"table-header-cell",children:"Status"}),e.jsx("th",{className:"table-header-cell",children:"Recipients"}),e.jsx("th",{className:"table-header-cell",children:"Performance"}),e.jsx("th",{className:"table-header-cell",children:"Created"}),e.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),e.jsx("tbody",{children:j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-secondary-500",children:"No campaigns found. Create your first campaign to get started."})}):j.map(_=>e.jsxs("tr",{className:"hover:bg-secondary-50",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:_.name}),e.jsx("div",{className:"text-sm text-secondary-500",children:_.type})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center",children:[T(_.type),e.jsx("span",{className:"ml-2 text-sm text-secondary-900 capitalize",children:_.type})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center",children:[S(_.status),e.jsx("span",{className:`ml-2 status-badge ${C(_.status)}`,children:_.status})]})}),e.jsx("td",{className:"table-cell text-sm text-secondary-900",children:_.recipientCount.toLocaleString()}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"text-sm text-secondary-900",children:[_.sentCount," sent",_.openedCount>0&&` • ${_.openedCount} opened`,_.clickedCount>0&&` • ${_.clickedCount} clicked`]})}),e.jsx("td",{className:"table-cell text-sm text-secondary-500",children:new Date(_.createdAt).toLocaleDateString()}),e.jsx("td",{className:"table-cell text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>w(_._id,"sent"),disabled:_.status==="sent",className:"text-info-600 hover:text-info-900 disabled:text-secondary-400 transition-colors",children:e.jsx(ec,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{P.success("View campaign details - Coming soon!")},className:"text-secondary-600 hover:text-secondary-900 transition-colors",title:"View Details",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{P.success("Edit campaign - Coming soon!")},className:"text-secondary-600 hover:text-secondary-900 transition-colors",title:"Edit Campaign",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(_),className:"text-error-600 hover:text-error-900 transition-colors",children:e.jsx(rt,{className:"w-4 h-4"})})]})})]},_._id))})]})})]}),e.jsx(vE,{isOpen:o,onClose:()=>c(!1),onSave:f,isLoading:y}),m&&e.jsx(bE,{isOpen:d,onClose:()=>{u(!1),h(null)},onDelete:N,campaign:m})]})}class NE{async sendSMS(t){return(await M.post("/sms/send",t)).data}async sendBulkSMS(t){return(await M.post("/sms/bulk",t)).data}async getHistory(t={},a=1,r=20){const n=new URLSearchParams;return t.status&&n.append("status",t.status),t.to&&n.append("to",t.to),n.append("page",a.toString()),n.append("limit",r.toString()),(await M.get(`/sms/history?${n.toString()}`)).data}async getAnalytics(){return(await M.get("/sms/analytics")).data}async getTemplates(t={}){const a=new URLSearchParams;return t.category&&a.append("category",t.category),(await M.get(`/sms/templates?${a.toString()}`)).data}async createTemplate(t){return(await M.post("/sms/templates",t)).data}async useTemplate(t,a){return(await M.post(`/sms/templates/${t}/use`,a)).data}}const gl=new NE;function wE(){const[s,t]=b.useState([]),[a,r]=b.useState([]),[n,i]=b.useState({totalSent:0,delivered:0,failed:0,pending:0,deliveryRate:0,totalCost:0}),[l,o]=b.useState(!0),[c,d]=b.useState("send"),[u,m]=b.useState({to:"",message:"",scheduledAt:"",priority:"normal"}),[h,y]=b.useState({recipients:"",message:"",scheduledAt:"",priority:"normal"});b.useEffect(()=>{g()},[]);const g=async()=>{var N;try{o(!0);const[w,S,C]=await Promise.all([gl.getTemplates().catch(()=>({success:!0,data:[]})),gl.getAnalytics().catch(()=>({success:!0,data:{overview:n}})),gl.getHistory().catch(()=>({data:[],pagination:{currentPage:1,totalPages:1,totalRecords:0,hasNext:!1,hasPrev:!1}}))]);t(w.data||[]),r(C.data||[]),(N=S.data)!=null&&N.overview&&i(S.data.overview)}catch(w){console.error("Error loading SMS data:",w),P.error("Failed to load SMS data")}finally{o(!1)}},j=async N=>{if(N.preventDefault(),!u.to||!u.message){P.error("Please fill in all required fields");return}try{(await gl.sendSMS({to:u.to,message:u.message,scheduledAt:u.scheduledAt||void 0,priority:u.priority})).success&&(P.success("SMS sent successfully"),m({to:"",message:"",scheduledAt:"",priority:"normal"}),g())}catch(w){console.error("Error sending SMS:",w),P.error("Failed to send SMS")}},v=async N=>{if(N.preventDefault(),!h.recipients||!h.message){P.error("Please fill in all required fields");return}const w=h.recipients.split(",").map(S=>S.trim()).filter(S=>S);if(w.length===0){P.error("Please enter at least one valid phone number");return}try{(await gl.sendBulkSMS({recipients:w.map(C=>({phone:C})),message:h.message,scheduledAt:h.scheduledAt||void 0,priority:h.priority})).success&&(P.success(`Bulk SMS sent to ${w.length} recipients`),y({recipients:"",message:"",scheduledAt:"",priority:"normal"}),g())}catch(S){console.error("Error sending bulk SMS:",S),P.error("Failed to send bulk SMS")}},x=N=>{m(w=>({...w,message:N.message}))},f=N=>{switch(N){case"delivered":return e.jsx(In,{className:"w-5 h-5 text-success-500"});case"sent":return e.jsx($t,{className:"w-5 h-5 text-info-500"});case"failed":return e.jsx(ju,{className:"w-5 h-5 text-error-500"});default:return e.jsx(Ct,{className:"w-5 h-5 text-warning-500"})}},p=N=>{switch(N){case"delivered":return"status-success";case"sent":return"status-info";case"failed":return"status-error";default:return"status-warning"}};return l?e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-text",children:"Loading SMS data..."})]})}):e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsx("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"SMS Management"}),e.jsx("p",{className:"text-secondary-600",children:"Send SMS messages and manage templates"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-info-100 rounded-xl mx-auto mb-4",children:e.jsx(bs,{className:"w-6 h-6 text-info-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:n.totalSent}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Total Sent"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-success-100 rounded-xl mx-auto mb-4",children:e.jsx(In,{className:"w-6 h-6 text-success-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Delivered"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:n.delivered}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Delivered"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-error-100 rounded-xl mx-auto mb-4",children:e.jsx(ju,{className:"w-6 h-6 text-error-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:n.failed}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Failed"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-primary-100 rounded-xl mx-auto mb-4",children:e.jsx(bu,{className:"w-6 h-6 text-primary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-secondary-900",children:[n.deliveryRate.toFixed(1),"%"]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Delivery Rate"})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-4 border-b border-secondary-200",children:e.jsx("nav",{className:"flex space-x-1",children:[{id:"send",label:"Send SMS",icon:bs},{id:"templates",label:"Templates",icon:Mf},{id:"history",label:"History",icon:$t},{id:"analytics",label:"Analytics",icon:bu}].map(N=>e.jsxs("button",{onClick:()=>d(N.id),className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${c===N.id?"bg-primary-100 text-primary-700 border border-primary-300":"text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100"}`,children:[e.jsx(N.icon,{className:"w-5 h-5 mr-2"}),N.label]},N.id))})}),e.jsxs("div",{className:"p-6",children:[c==="send"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-4",children:"Send Single SMS"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:u.to,onChange:N=>m(w=>({...w,to:N.target.value})),className:"form-input",placeholder:"+1234567890",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Message *"}),e.jsx("textarea",{value:u.message,onChange:N=>m(w=>({...w,message:N.target.value})),rows:4,className:"form-textarea",placeholder:"Enter your message...",maxLength:1600,required:!0}),e.jsxs("p",{className:"text-xs text-secondary-500 mt-1",children:[u.message.length,"/1600 characters"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Schedule (Optional)"}),e.jsx("input",{type:"datetime-local",value:u.scheduledAt,onChange:N=>m(w=>({...w,scheduledAt:N.target.value})),className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{value:u.priority,onChange:N=>m(w=>({...w,priority:N.target.value})),className:"form-select",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("button",{type:"submit",className:"btn-primary w-full",children:[e.jsx(F1,{className:"w-5 h-5 mr-2"}),"Send SMS"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-4",children:"Send Bulk SMS"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone Numbers *"}),e.jsx("textarea",{value:h.recipients,onChange:N=>y(w=>({...w,recipients:N.target.value})),rows:3,className:"form-textarea",placeholder:"+1234567890, +1234567891, +1234567892",required:!0}),e.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"Separate multiple phone numbers with commas"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Message *"}),e.jsx("textarea",{value:h.message,onChange:N=>y(w=>({...w,message:N.target.value})),rows:4,className:"form-textarea",placeholder:"Enter your message...",maxLength:1600,required:!0}),e.jsxs("p",{className:"text-xs text-secondary-500 mt-1",children:[h.message.length,"/1600 characters"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Schedule (Optional)"}),e.jsx("input",{type:"datetime-local",value:h.scheduledAt,onChange:N=>y(w=>({...w,scheduledAt:N.target.value})),className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{value:h.priority,onChange:N=>y(w=>({...w,priority:N.target.value})),className:"form-select",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("button",{type:"submit",className:"btn-success w-full",children:[e.jsx(U1,{className:"w-5 h-5 mr-2"}),"Send Bulk SMS"]})]})]})]}),c==="templates"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"page-subtitle",children:"SMS Templates"}),e.jsxs("button",{className:"btn-primary",children:[e.jsx(_s,{className:"h-5 w-5 mr-2"}),"Create Template"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(N=>e.jsxs("div",{className:"card hover-lift",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:N.name}),e.jsx("span",{className:"status-badge bg-primary-100 text-primary-800",children:N.category})]}),e.jsx("p",{className:"text-sm text-secondary-600 mb-4 line-clamp-3",children:N.message}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>x(N),className:"text-primary-600 hover:text-primary-800 text-sm font-medium transition-colors",children:"Use Template"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-secondary-600 hover:text-secondary-800 transition-colors",children:e.jsx(Jr,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-secondary-600 hover:text-secondary-800 transition-colors",children:e.jsx(nr,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-error-600 hover:text-error-800 transition-colors",children:e.jsx(Ls,{className:"w-4 h-4"})})]})]})]},N._id))})]}),c==="history"&&e.jsxs("div",{children:[e.jsx("h3",{className:"page-subtitle mb-6",children:"SMS History"}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Phone"}),e.jsx("th",{className:"table-header-cell",children:"Message"}),e.jsx("th",{className:"table-header-cell",children:"Status"}),e.jsx("th",{className:"table-header-cell",children:"Sent At"}),e.jsx("th",{className:"table-header-cell",children:"Delivered At"})]})}),e.jsx("tbody",{className:"table-body",children:a.map(N=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{className:"table-cell whitespace-nowrap text-secondary-900",children:N.to}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"text-sm text-secondary-900 max-w-xs truncate",children:N.message}),N.errorMessage&&e.jsxs("div",{className:"text-xs text-error-600 mt-1",children:["Error: ",N.errorMessage]})]}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[f(N.status),e.jsx("span",{className:`ml-2 status-badge ${p(N.status)}`,children:N.status})]})}),e.jsx("td",{className:"table-cell whitespace-nowrap text-secondary-500",children:N.sentAt?new Date(N.sentAt).toLocaleString():"-"}),e.jsx("td",{className:"table-cell whitespace-nowrap text-secondary-500",children:N.deliveredAt?new Date(N.deliveredAt).toLocaleString():"-"})]},N._id))})]})})]}),c==="analytics"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-6",children:"SMS Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-secondary-900 mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Total Sent"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:n.totalSent})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Delivered"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:n.delivered})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Failed"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:n.failed})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Delivery Rate"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:[n.deliveryRate.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-secondary-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:a.slice(0,5).map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-900",children:N.to}),e.jsxs("p",{className:"text-xs text-secondary-500",children:[N.message.substring(0,50),"..."]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center",children:[f(N.status),e.jsx("span",{className:`ml-1 status-badge ${p(N.status)}`,children:N.status})]}),e.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:N.sentAt?new Date(N.sentAt).toLocaleDateString():"-"})]})]},N._id))})]})]})]})]})]})]})}function SE(){const s=Zi(),[t,a]=b.useState([]),[r,n]=b.useState(null),[i,l]=b.useState(!0),[o,c]=b.useState(!1),[d,u]=b.useState(""),[m,h]=b.useState(null),[y,g]=b.useState({status:"",category:"",priority:"",search:"",page:1,limit:20}),[j,v]=b.useState({currentPage:1,totalPages:1,totalChats:0,hasNextPage:!1,hasPrevPage:!1});b.useEffect(()=>{x()},[]),b.useEffect(()=>{m&&f()},[y,m]);const x=()=>{if(!Ye.isAuthenticated()){P.error("Please login to access chat management"),s("/auth/login");return}const R=Ye.getCurrentUserFromStorage();if(!R){P.error("User information not found"),s("/auth/login");return}if(R.role!=="super_admin"&&R.role!=="admin"){P.error("Access denied. Admin privileges required."),s("/auth/login");return}h(R)},f=async()=>{var R,U,O,E;try{l(!0);const W=new URLSearchParams;Object.entries(y).forEach(([I,$])=>{$&&$!==""&&W.append(I,$.toString())});const Z=await M.get(`/chat?${W}`);Z.data.success&&(a(Z.data.data.chats),v(Z.data.data.pagination))}catch(W){console.error("Error fetching chats:",W),((R=W.response)==null?void 0:R.status)===401?(P.error("Session expired. Please login again."),s("/auth/login")):((U=W.response)==null?void 0:U.status)===403?P.error("Access denied. You don't have permission to view chats."):P.error(((E=(O=W.response)==null?void 0:O.data)==null?void 0:E.message)||"Failed to fetch chats")}finally{l(!1)}},p=async R=>{try{if(!(m!=null&&m.id)){P.error("User not authenticated");return}const U=await M.put(`/chat/${R}/assign`,{assignedTo:m.id,reason:"Manual assignment"});U.data.success&&(P.success("Chat assigned successfully"),f(),(r==null?void 0:r._id)===R&&n(U.data.data.chat))}catch(U){console.error("Error assigning chat:",U),P.error("Failed to assign chat")}},N=async R=>{try{const U=await M.put(`/chat/${R}/resolve`,{notes:"Chat resolved by admin"});U.data.success&&(P.success("Chat resolved successfully"),f(),(r==null?void 0:r._id)===R&&n(U.data.data.chat))}catch(U){console.error("Error resolving chat:",U),P.error("Failed to resolve chat")}},w=async R=>{try{const U=await M.put(`/chat/${R}/close`);U.data.success&&(P.success("Chat closed successfully"),f(),(r==null?void 0:r._id)===R&&n(U.data.data.chat))}catch(U){console.error("Error closing chat:",U),P.error("Failed to close chat")}},S=async()=>{if(!(!r||!d.trim()))try{c(!0);const R=await M.post(`/chat/${r._id}/messages`,{content:d.trim(),messageType:"text"});R.data.success&&(u(""),r&&n({...r,messages:[...r.messages,R.data.data.message],lastActivity:new Date().toISOString()}),P.success("Message sent successfully"))}catch(R){console.error("Error sending message:",R),P.error("Failed to send message")}finally{c(!1)}},C=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),S())},T=R=>{switch(R){case"waiting":return"status-pending";case"active":return"status-active";case"resolved":return"status-active";case"closed":return"status-inactive";default:return"status-inactive"}},_=R=>{switch(R){case"urgent":return"bg-error-100 text-error-800";case"high":return"bg-warning-100 text-warning-800";case"medium":return"bg-primary-100 text-primary-800";case"low":return"bg-success-100 text-success-800";default:return"bg-secondary-100 text-secondary-800"}},F=R=>{switch(R){case"service":return"bg-primary-100 text-primary-800";case"billing":return"bg-info-100 text-info-800";case"technical":return"bg-warning-100 text-warning-800";case"complaint":return"bg-error-100 text-error-800";case"other":return"bg-secondary-100 text-secondary-800";default:return"bg-success-100 text-success-800"}},D=R=>{const U=new Date(R);return(new Date().getTime()-U.getTime())/(1e3*60*60)<24?U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):U.toLocaleDateString()};return m?e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsx("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Live Chat Management"}),e.jsx("p",{className:"text-secondary-600",children:"Manage customer conversations and support tickets"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-primary-100 rounded-xl mx-auto mb-4",children:e.jsx(Ut,{className:"w-6 h-6 text-primary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:j.totalChats}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Total Chats"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-warning-100 rounded-xl mx-auto mb-4",children:e.jsx(vt,{className:"w-6 h-6 text-warning-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Waiting"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:t.filter(R=>R.status==="waiting").length}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Waiting"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-success-100 rounded-xl mx-auto mb-4",children:e.jsx(ke,{className:"w-6 h-6 text-success-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:t.filter(R=>R.status==="active").length}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Active"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-info-100 rounded-xl mx-auto mb-4",children:e.jsx(nt,{className:"w-6 h-6 text-info-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:t.filter(R=>R.status==="resolved").length}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Resolved"})})]})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:y.status,onChange:R=>g(U=>({...U,status:R.target.value,page:1})),className:"form-input",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"waiting",children:"Waiting"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Category"}),e.jsxs("select",{value:y.category,onChange:R=>g(U=>({...U,category:R.target.value,page:1})),className:"form-input",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"service",children:"Service"}),e.jsx("option",{value:"billing",children:"Billing"}),e.jsx("option",{value:"technical",children:"Technical"}),e.jsx("option",{value:"complaint",children:"Complaint"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{value:y.priority,onChange:R=>g(U=>({...U,priority:R.target.value,page:1})),className:"form-input",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Search"}),e.jsx("input",{type:"text",value:y.search,onChange:R=>g(U=>({...U,search:R.target.value,page:1})),placeholder:"Search chats...",className:"form-input"})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsx("h2",{className:"text-lg font-medium text-secondary-900",children:"Active Conversations"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Customer"}),e.jsx("th",{className:"table-header-cell",children:"Subject"}),e.jsx("th",{className:"table-header-cell",children:"Status"}),e.jsx("th",{className:"table-header-cell",children:"Priority"}),e.jsx("th",{className:"table-header-cell",children:"Last Activity"}),e.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),e.jsx("tbody",{children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-secondary-500",children:"Loading chats..."})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-secondary-500",children:"No chats found"})}):t.map(R=>e.jsxs("tr",{className:"hover:bg-secondary-50",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:R.customer.name}),e.jsx("div",{className:"text-sm text-secondary-500",children:R.customer.email||R.customer.phone})]})}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"text-sm text-secondary-900",children:R.subject||"No subject"}),e.jsx("div",{className:"text-sm text-secondary-500",children:R.category})]}),e.jsx("td",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${T(R.status)}`,children:R.status})}),e.jsx("td",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${_(R.priority)}`,children:R.priority})}),e.jsx("td",{className:"table-cell text-sm text-secondary-500",children:new Date(R.lastActivity).toLocaleDateString()}),e.jsx("td",{className:"table-cell text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>n(R),className:"text-secondary-600 hover:text-secondary-900 transition-colors",title:"View Chat",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(R._id),className:"text-primary-600 hover:text-primary-900 transition-colors",title:"Assign Chat",children:e.jsx(sv,{className:"w-4 h-4"})})]})})]},R._id))})]})})]}),e.jsx("div",{className:"lg:col-span-2",children:r?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-4 border-b border-secondary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:r.customer.name}),e.jsxs("p",{className:"text-sm text-secondary-500",children:[r.customer.email&&`${r.customer.email} • `,r.customer.phone&&`${r.customer.phone} • `,"Session: ",r.customer.sessionId.slice(-8)]}),r.assignedTo&&e.jsxs("p",{className:"text-sm text-info-600 mt-1",children:["Assigned to: ",r.assignedTo.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`status-badge ${T(r.status)}`,children:r.status}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(r.priority)}`,children:r.priority}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F(r.category)}`,children:r.category})]})]})}),e.jsx("div",{className:"h-96 overflow-y-auto custom-scrollbar p-4 space-y-4",children:r.messages.map((R,U)=>e.jsx("div",{className:`flex ${R.sender.name==="Customer"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${R.sender.name==="Customer"?"bg-secondary-100 text-secondary-900":R.messageType==="system"?"bg-warning-100 text-warning-800":"bg-primary-600 text-white"}`,children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:R.sender.name}),e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:R.content}),R.attachments&&R.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:R.attachments.map((O,E)=>e.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-primary-600 hover:underline",children:["📎 ",O.filename]},E))}),e.jsx("div",{className:`text-xs mt-1 ${R.sender.name==="Customer"?"text-secondary-500":"text-primary-100"}`,children:D(R.createdAt)})]})},R._id||U))}),r.status!=="closed"&&r.status!=="resolved"&&e.jsx("div",{className:"p-4 border-t border-secondary-200",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("textarea",{value:d,onChange:R=>u(R.target.value),onKeyPress:C,placeholder:"Type your message...",className:"input-field flex-1 resize-none",rows:2}),e.jsx("button",{onClick:S,disabled:!d.trim()||o,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:e.jsx(ec,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"p-4 border-t border-secondary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r.status==="waiting"&&e.jsxs("button",{onClick:()=>p(r._id),className:"btn-primary",children:[e.jsx(sv,{className:"h-4 w-4 mr-1"}),"Assign to Me"]}),r.status==="active"&&e.jsxs("button",{onClick:()=>N(r._id),className:"btn-success",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),"Resolve"]}),r.status!=="closed"&&e.jsxs("button",{onClick:()=>w(r._id),className:"btn-secondary",children:[e.jsx(Ta,{className:"h-4 w-4 mr-1"}),"Close"]})]}),e.jsxs("div",{className:"text-sm text-secondary-500",children:["Started ",new Date(r.createdAt).toLocaleDateString(),r.rating&&e.jsxs("span",{className:"ml-2",children:["• Rating: ",r.rating.score,"/5"]})]})]})})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx(Ut,{className:"empty-state-icon"}),e.jsx("h3",{className:"empty-state-title",children:"Select a Chat"}),e.jsx("p",{className:"empty-state-description",children:"Choose a chat from the list to view the conversation"})]})})]}):e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-text",children:"Loading..."})]})})}function CE(){const s=Zi(),[t,a]=b.useState([]),[r,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState({keywords:"",location:"",radius:25,category:""}),[d,u]=b.useState({status:"",priority:"",assignedTo:"",search:""}),[m,h]=b.useState({currentPage:1,totalPages:1,totalRecords:0,hasNextPage:!1,hasPrevPage:!1}),[y,g]=b.useState(!1),[j,v]=b.useState(!1),[x,f]=b.useState(!1),[p,N]=b.useState(null),[w,S]=b.useState({method:"phone",outcome:"no_answer",notes:""}),[C,T]=b.useState({status:"new",priority:"medium",notes:""});b.useEffect(()=>{_()},[]),b.useEffect(()=>{i&&F()},[d,m.currentPage,i]);const _=()=>{if(!Ye.isAuthenticated()){P.error("Please login to access YellowPages management"),s("/auth/login");return}const z=Ye.getCurrentUserFromStorage();if(!z){P.error("User information not found"),s("/auth/login");return}if(z.role!=="super_admin"&&z.role!=="admin"){P.error("Access denied. Admin privileges required."),s("/auth/login");return}l(z)},F=async()=>{var z,ie,de,xe;try{n(!0);const he=new URLSearchParams({...d,page:m.currentPage.toString(),limit:"10"}),Pe=await M.get(`/yellowpages?${he}`);Pe.data.success&&(a(Pe.data.data.yellowPagesData),h(Pe.data.data.pagination))}catch(he){console.error("Error fetching YellowPages records:",he),((z=he.response)==null?void 0:z.status)===401?(P.error("Session expired. Please login again."),s("/auth/login")):((ie=he.response)==null?void 0:ie.status)===403?P.error("Access denied. You don't have permission to view YellowPages data."):P.error(((xe=(de=he.response)==null?void 0:de.data)==null?void 0:xe.message)||"Failed to fetch records")}finally{n(!1)}},D=async()=>{var z;try{n(!0);const ie=await M.post("/yellowpages/search",o);ie.data.success&&(a(ie.data.data.results),P.success(`Found ${ie.data.data.results.length} businesses`))}catch(ie){console.error("Error searching YellowPages:",ie),((z=ie.response)==null?void 0:z.status)===401?(P.error("Session expired. Please login again."),s("/auth/login")):P.error("Failed to search YellowPages")}finally{n(!1)}},R=async()=>{var z;if(p)try{(await M.put(`/yellowpages/${p._id}/lead`,C)).data.success&&(P.success("Lead information updated successfully"),v(!1),F())}catch(ie){console.error("Error updating lead:",ie),((z=ie.response)==null?void 0:z.status)===401?(P.error("Session expired. Please login again."),s("/auth/login")):P.error("Failed to update lead information")}},U=async()=>{var z;if(p)try{(await M.post(`/yellowpages/${p._id}/contact-attempt`,w)).data.success&&(P.success("Contact attempt added successfully"),f(!1),S({method:"phone",outcome:"no_answer",notes:""}),F())}catch(ie){console.error("Error adding contact attempt:",ie),((z=ie.response)==null?void 0:z.status)===401?(P.error("Session expired. Please login again."),s("/auth/login")):P.error("Failed to add contact attempt")}},O=z=>{N(z),g(!0)},E=z=>{N(z),T({status:z.leadInfo.status,priority:z.leadInfo.priority,notes:z.leadInfo.notes||""}),v(!0)},W=z=>{N(z),f(!0)},Z=z=>{switch(z){case"new":return"status-info";case"contacted":return"status-warning";case"interested":return"status-success";case"not_interested":return"status-error";case"converted":return"status-primary";case"lost":return"status-secondary";default:return"status-secondary"}},I=z=>{switch(z){case"urgent":return"bg-error-100 text-error-800";case"high":return"bg-warning-100 text-warning-800";case"medium":return"bg-primary-100 text-primary-800";case"low":return"bg-success-100 text-success-800";default:return"bg-secondary-100 text-secondary-800"}},$=z=>{switch(z){case"phone":return"bg-info-100 text-info-800";case"email":return"bg-success-100 text-success-800";case"in_person":return"bg-primary-100 text-primary-800";case"social_media":return"bg-warning-100 text-warning-800";default:return"bg-secondary-100 text-secondary-800"}},A=z=>{switch(z){case"converted":return"bg-success-100 text-success-800";case"interested":return"bg-info-100 text-info-800";case"follow_up_needed":return"bg-warning-100 text-warning-800";case"not_interested":return"bg-error-100 text-error-800";case"spoke_to_decision_maker":return"bg-primary-100 text-primary-800";default:return"bg-secondary-100 text-secondary-800"}},G=z=>new Date(z).toLocaleDateString();return i?e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsx("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Yellow Pages Management"}),e.jsx("p",{className:"text-secondary-600",children:"Manage business leads and contact information"})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Keywords"}),e.jsx("input",{type:"text",value:o.keywords,onChange:z=>c(ie=>({...ie,keywords:z.target.value})),placeholder:"Business name, services...",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Location"}),e.jsx("input",{type:"text",value:o.location,onChange:z=>c(ie=>({...ie,location:z.target.value})),placeholder:"City, state, or zip",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Category"}),e.jsxs("select",{value:o.category,onChange:z=>c(ie=>({...ie,category:z.target.value})),className:"form-input",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"automotive",children:"Automotive"}),e.jsx("option",{value:"restaurant",children:"Restaurant"}),e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"healthcare",children:"Healthcare"}),e.jsx("option",{value:"professional",children:"Professional Services"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:D,className:"btn-primary w-full",children:[e.jsx(Or,{className:"w-4 h-4 mr-2"}),"Search"]})})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:d.status,onChange:z=>u(ie=>({...ie,status:z.target.value,page:1})),className:"form-input",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"interested",children:"Interested"}),e.jsx("option",{value:"not_interested",children:"Not Interested"}),e.jsx("option",{value:"converted",children:"Converted"}),e.jsx("option",{value:"lost",children:"Lost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{value:d.priority,onChange:z=>u(ie=>({...ie,priority:z.target.value,page:1})),className:"form-input",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Assigned To"}),e.jsxs("select",{value:d.assignedTo,onChange:z=>u(ie=>({...ie,assignedTo:z.target.value,page:1})),className:"form-input",children:[e.jsx("option",{value:"",children:"All Users"}),e.jsx("option",{value:"unassigned",children:"Unassigned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Search"}),e.jsx("input",{type:"text",value:d.search,onChange:z=>u(ie=>({...ie,search:z.target.value,page:1})),placeholder:"Search records...",className:"form-input"})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-medium text-secondary-900",children:"Business Records"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{onClick:()=>{c({keywords:"",location:"",radius:25,category:""}),u({status:"",priority:"",assignedTo:"",search:""}),h({...m,currentPage:1})},className:"btn-secondary",children:[e.jsx(_i,{className:"w-4 h-4 mr-2"}),"Clear All"]})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Business"}),e.jsx("th",{className:"table-header-cell",children:"Contact"}),e.jsx("th",{className:"table-header-cell",children:"Location"}),e.jsx("th",{className:"table-header-cell",children:"Status"}),e.jsx("th",{className:"table-header-cell",children:"Priority"}),e.jsx("th",{className:"table-header-cell",children:"Lead Score"}),e.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),e.jsx("tbody",{children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-secondary-500",children:"Loading records..."})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-secondary-500",children:"No records found"})}):t.map(z=>e.jsxs("tr",{className:"hover:bg-secondary-50",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:z.businessName}),e.jsx("div",{className:"text-sm text-secondary-500",children:z.category})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"text-sm text-secondary-900",children:[z.contact.phone&&e.jsx("div",{children:z.contact.phone}),z.contact.email&&e.jsx("div",{children:z.contact.email}),z.contact.website&&e.jsx("div",{children:z.contact.website})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"text-sm text-secondary-900",children:[z.address.city&&z.address.state&&e.jsxs("div",{children:[z.address.city,", ",z.address.state]}),z.address.zipCode&&e.jsx("div",{children:z.address.zipCode})]})}),e.jsx("td",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${Z(z.leadInfo.status)}`,children:z.leadInfo.status.replace("_"," ")})}),e.jsx("td",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${I(z.leadInfo.priority)}`,children:z.leadInfo.priority})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((ie,de)=>e.jsx(nP,{className:`w-4 h-4 ${de<Math.floor(z.leadQualityScore/2)?"text-warning-500":"text-secondary-300"}`},de))}),e.jsx("span",{className:"ml-2 text-sm text-secondary-600",children:z.leadQualityScore.toFixed(1)})]})}),e.jsx("td",{className:"table-cell text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>O(z),className:"text-secondary-600 hover:text-secondary-900 transition-colors",title:"View Details",children:e.jsx(Jr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(z),className:"text-primary-600 hover:text-primary-900 transition-colors",title:"Edit Record",children:e.jsx(nr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>W(z),className:"text-success-600 hover:text-success-900 transition-colors",title:"Contact Business",children:e.jsx(bs,{className:"w-4 h-4"})})]})})]},z._id))})]})}),m.totalPages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>h({...m,currentPage:m.currentPage-1}),disabled:!m.hasPrevPage,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",m.currentPage," of ",m.totalPages]}),e.jsx("button",{onClick:()=>h({...m,currentPage:m.currentPage+1}),disabled:!m.hasNextPage,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(m.currentPage-1)*10+1," to ",Math.min(m.currentPage*10,m.totalRecords)," of ",m.totalRecords," records"]})]})})]}),y&&p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Business Details"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ai,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:p.businessName}),e.jsx("p",{className:"text-sm text-gray-600",children:p.category})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Contact Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[p.contact.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),p.contact.phone]}),p.contact.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),p.contact.email]}),p.contact.website&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(tP,{className:"h-4 w-4 mr-2"}),e.jsx("a",{href:p.contact.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:p.contact.website})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Address"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[p.address.street&&e.jsx("div",{children:p.address.street}),e.jsxs("div",{children:[p.address.city,", ",p.address.state," ",p.address.zipCode]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Z(p.leadInfo.status)}`,children:p.leadInfo.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Priority:"}),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I(p.leadInfo.priority)}`,children:p.leadInfo.priority})]}),p.leadInfo.assignedTo&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Assigned to:"}),e.jsx("span",{className:"ml-2",children:p.leadInfo.assignedTo.name})]}),p.leadInfo.notes&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Notes:"}),e.jsx("p",{className:"mt-1 text-sm",children:p.leadInfo.notes})]})]})]}),p.leadInfo.contactAttempts.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Contact Attempts"}),e.jsx("div",{className:"space-y-2",children:p.leadInfo.contactAttempts.map((z,ie)=>e.jsxs("div",{className:"border rounded p-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$(z.method)}`,children:z.method}),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(z.outcome)}`,children:z.outcome})]}),e.jsx("span",{className:"text-gray-500",children:G(z.date)})]}),z.notes&&e.jsx("p",{className:"mt-2 text-gray-600",children:z.notes})]},ie))})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Close"})})]})}),j&&p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Lead Information"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ai,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:C.status,onChange:z=>T({...C,status:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"interested",children:"Interested"}),e.jsx("option",{value:"not_interested",children:"Not Interested"}),e.jsx("option",{value:"converted",children:"Converted"}),e.jsx("option",{value:"lost",children:"Lost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:C.priority,onChange:z=>T({...C,priority:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:C.notes,onChange:z=>T({...C,notes:z.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Add notes about this lead..."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:R,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Lead"})]})]})}),x&&p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add Contact Attempt"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ai,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Method"}),e.jsxs("select",{value:w.method,onChange:z=>S({...w,method:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"in_person",children:"In Person"}),e.jsx("option",{value:"social_media",children:"Social Media"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outcome"}),e.jsxs("select",{value:w.outcome,onChange:z=>S({...w,outcome:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"no_answer",children:"No Answer"}),e.jsx("option",{value:"left_message",children:"Left Message"}),e.jsx("option",{value:"spoke_to_decision_maker",children:"Spoke to Decision Maker"}),e.jsx("option",{value:"not_interested",children:"Not Interested"}),e.jsx("option",{value:"interested",children:"Interested"}),e.jsx("option",{value:"follow_up_needed",children:"Follow Up Needed"}),e.jsx("option",{value:"converted",children:"Converted"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:w.notes,onChange:z=>S({...w,notes:z.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Add notes about this contact attempt..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Follow Up (Optional)"}),e.jsx("input",{type:"date",value:w.nextFollowUp,onChange:z=>S({...w,nextFollowUp:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:U,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Add Contact Attempt"})]})]})})]}):e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-text",children:"Loading..."})]})})}function kE(){const s=Ue(),{list:t,loading:a,pagination:r,stats:n}=je(p=>p.customers),[i,l]=b.useState("grid"),[o,c]=b.useState(1),[d,u]=b.useState(""),[m,h]=b.useState({status:"",city:"",state:"",sortBy:"createdAt",sortOrder:"desc"});b.useEffect(()=>{s(zt({page:o,limit:8,...m})),s(Ja())},[s,o,m]);const y=()=>{s(zt({page:1,limit:8,search:d,...m})),c(1)},g=(p,N)=>{h(w=>({...w,[p]:N})),c(1)},j=p=>{c(p)},v=async(p,N)=>{if(window.confirm(`Are you sure you want to delete ${N}? This action cannot be undone.`))try{await s(On(p)).unwrap(),P.success("Customer deleted successfully"),s(zt({page:o,limit:8,...m})),s(Ja())}catch{P.error("Failed to delete customer")}},x=p=>{if(!p)return"N/A";const N=[];return p.street&&N.push(p.street),p.city&&N.push(p.city),p.state&&N.push(p.state),p.zipCode&&N.push(p.zipCode),N.length>0?N.join(", "):"N/A"},f=(t&&Array.isArray(t)?t:[]).filter(p=>{var S,C,T;const N=d.toLowerCase(),w=x(p.address).toLowerCase();return(((S=p.businessName)==null?void 0:S.toLowerCase())||((C=p.name)==null?void 0:C.toLowerCase())||"").includes(N)||(p.phone||"").includes(d)||(((T=p.email)==null?void 0:T.toLowerCase())||"").includes(N)||w.includes(N)});return e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Customer Management"}),e.jsx("p",{className:"text-secondary-600",children:"Manage and organize your customer database"})]}),e.jsxs(me,{to:"/admin/dashboard/customers/new",className:"btn-primary",children:[e.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Add New Customer"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-primary-100 rounded-xl mx-auto mb-4",children:e.jsx(nt,{className:"w-6 h-6 text-primary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:(n==null?void 0:n.totalCustomers)||0}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Total Customers"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-success-100 rounded-xl mx-auto mb-4",children:e.jsx(nt,{className:"w-6 h-6 text-success-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:(n==null?void 0:n.activeCustomers)||0}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Active Customers"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-info-100 rounded-xl mx-auto mb-4",children:e.jsx(nt,{className:"w-6 h-6 text-info-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:(n==null?void 0:n.customersThisMonth)||0}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"New This Month"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-warning-100 rounded-xl mx-auto mb-4",children:e.jsx(nt,{className:"w-6 h-6 text-warning-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Vehicles"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:(n==null?void 0:n.totalVehicles)||0}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Total Vehicles"})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"w-4 h-4 text-blue-600"}),e.jsx("h3",{className:"text-base font-semibold text-gray-800",children:"Search & Filters"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm",children:[e.jsx("button",{onClick:()=>l("grid"),className:`p-1.5 rounded-md transition-all duration-200 ${i==="grid"?"bg-blue-100 text-blue-600":"text-gray-600 hover:text-gray-900"}`,title:"Grid View",children:e.jsx(A1,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>l("list"),className:`p-1.5 rounded-md transition-all duration-200 ${i==="list"?"bg-primary-100 text-primary-600":"text-secondary-600 hover:text-secondary-900"}`,title:"List View",children:e.jsx(E1,{className:"w-3.5 h-3.5"})})]}),e.jsx("button",{onClick:()=>{s(zt({page:o,limit:8,...m})),s(Ja())},className:"p-1.5 text-secondary-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200",title:"Refresh data",children:e.jsx(Ea,{className:"w-3.5 h-3.5"})})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary-400",children:e.jsx(Rs,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"Search customers by name, email, phone, or address...",value:d,onChange:p=>u(p.target.value),onKeyPress:p=>p.key==="Enter"&&y(),className:"form-input pl-12 pr-4"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:m.status,onChange:p=>g("status",p.target.value),className:"form-input",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"prospect",children:"Prospect"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"City"}),e.jsx("input",{type:"text",placeholder:"Filter by city",value:m.city,onChange:p=>g("city",p.target.value),className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"State"}),e.jsx("input",{type:"text",placeholder:"Filter by state",value:m.state,onChange:p=>g("state",p.target.value),className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Sort By"}),e.jsxs("select",{value:m.sortBy,onChange:p=>g("sortBy",p.target.value),className:"form-input",children:[e.jsx("option",{value:"createdAt",children:"Date Created"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"businessName",children:"Business Name"}),e.jsx("option",{value:"email",children:"Email"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[f.length," customer",f.length!==1?"s":""," found"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{u(""),h({status:"",city:"",state:"",sortBy:"createdAt",sortOrder:"desc"})},className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-200 text-sm font-medium",children:"Clear All"}),e.jsx("button",{onClick:y,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl",children:"Apply Filters"})]})]})]})]}),a?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-blue-400 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]})}):e.jsxs("div",{className:"space-y-6",children:[i==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.map(p=>{var N;return e.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:p.name}),p.businessName&&e.jsx("p",{className:"text-sm text-gray-600",children:p.businessName})]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(me,{to:`/admin/dashboard/customers/${p._id}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Details",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx(me,{to:`/admin/dashboard/customers/${p._id}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"Edit Customer",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(p._id||p.id||"",p.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Customer",children:e.jsx(rt,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-blue-50 transition-colors",children:[e.jsx(jt,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Email"}),e.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:p.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-blue-50 transition-colors",children:[e.jsx(kt,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:p.phone||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-blue-50 transition-colors",children:[e.jsx(pa,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Address"}),e.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:x(p.address)})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${p.status==="active"?"bg-emerald-100 text-emerald-800 border border-emerald-200":p.status==="inactive"?"bg-red-100 text-red-800 border border-red-200":"bg-amber-100 text-amber-800 border border-amber-200"}`,children:p.status}),e.jsxs("span",{className:"text-xs text-gray-500",children:[((N=p.vehicles)==null?void 0:N.length)||0," vehicles"]})]})]})]},p._id)})}):e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:p.name}),p.businessName&&e.jsx("div",{className:"text-sm text-gray-500",children:p.businessName})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:p.email}),e.jsx("div",{className:"text-sm text-gray-500",children:p.phone||"No phone"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:x(p.address)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${p.status==="active"?"bg-emerald-100 text-emerald-800 border border-emerald-200":p.status==="inactive"?"bg-red-100 text-red-800 border border-red-200":"bg-amber-100 text-amber-800 border border-amber-200"}`,children:p.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{to:`/admin/dashboard/customers/${p._id||p.id||""}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"View Details",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx(me,{to:`/admin/dashboard/customers/${p._id||p.id||""}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"Edit Customer",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(p._id||p.id||"",p.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Customer",children:e.jsx(rt,{className:"w-4 h-4"})})]})})]},p._id))})]})})}),r&&r.totalPages>1&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(o-1),disabled:o===1,className:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:r.totalPages},(p,N)=>N+1).map(p=>e.jsx("button",{onClick:()=>j(p),className:`px-6 py-3 rounded-xl transition-all duration-200 shadow-lg ${p===o?"bg-gradient-to-r from-primary-600 to-primary-700 text-white":"text-secondary-700 bg-white border border-secondary-200 hover:bg-secondary-50"}`,children:p},p)),e.jsx("button",{onClick:()=>j(o+1),disabled:o===r.totalPages,className:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]}),e.jsx("div",{className:"md:hidden fixed bottom-6 right-6",children:e.jsx(me,{to:"/admin/dashboard/customers/new",className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-full shadow-xl hover:shadow-2xl transition-all duration-200 hover-lift",children:e.jsx(Ze,{className:"w-7 h-7"})})})]})}function _E({customer:s,onEditVehicle:t,onDeleteVehicle:a,onAddVehicle:r}){var i,l,o,c,d,u,m,h,y,g,j,v,x,f,p,N;const n=(w,S)=>w[S]||w.createdAt||w.updatedAt||new Date().toISOString();return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(kt,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Contact Information"})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-blue-50 transition-colors",children:[e.jsx(kt,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Phone"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.phone||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-blue-50 transition-colors",children:[e.jsx(jt,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Email"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.email||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-blue-50 transition-colors",children:[e.jsx(pa,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Address"}),e.jsx("p",{className:"font-semibold text-gray-800",children:(i=s.address)!=null&&i.street||(l=s.address)!=null&&l.city||(o=s.address)!=null&&o.state?`${((c=s.address)==null?void 0:c.street)||""}${(d=s.address)!=null&&d.street&&((u=s.address)!=null&&u.city||(m=s.address)!=null&&m.state)?", ":""}${((h=s.address)==null?void 0:h.city)||""}${(y=s.address)!=null&&y.city&&((g=s.address)!=null&&g.state)?", ":""}${((j=s.address)==null?void 0:j.state)||""}${(v=s.address)!=null&&v.zipCode?` ${s.address.zipCode}`:""}`:"N/A"})]})]}),s.businessName&&e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-blue-50 transition-colors",children:[e.jsx(Pm,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Business Name"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.businessName})]})]})]})]}),e.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center",children:e.jsx(be,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Account Details"})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-emerald-50 transition-colors",children:[e.jsx(be,{className:"w-5 h-5 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Customer Since"}),e.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n(s,"dateCreated")).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-emerald-50 transition-colors",children:[e.jsx(be,{className:"w-5 h-5 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Last Updated"}),e.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n(s,"updatedAt")).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-emerald-50 transition-colors",children:[e.jsx(Fe,{className:"w-5 h-5 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Total Vehicles"}),e.jsx("p",{className:"font-semibold text-gray-800",children:((x=s.vehicles)==null?void 0:x.length)||0})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-emerald-50 transition-colors",children:[e.jsx(it,{className:"w-5 h-5 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Service Records"}),e.jsx("p",{className:"font-semibold text-gray-800",children:((f=s.serviceHistory)==null?void 0:f.length)||0})]})]})]})]}),e.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx(ts,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Quick Stats"})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl text-white",children:[e.jsx("p",{className:"text-2xl font-bold",children:((p=s.vehicles)==null?void 0:p.length)||0}),e.jsx("p",{className:"text-sm opacity-90",children:"Vehicles"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl text-white",children:[e.jsx("p",{className:"text-2xl font-bold",children:((N=s.serviceHistory)==null?void 0:N.length)||0}),e.jsx("p",{className:"text-sm opacity-90",children:"Services"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl text-white",children:[e.jsx("p",{className:"text-2xl font-bold",children:s.status==="active"?"Active":"Inactive"}),e.jsx("p",{className:"text-sm opacity-90",children:"Status"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(Fe,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Vehicles"})]}),e.jsx("button",{onClick:r,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl text-sm font-semibold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"+ Add Vehicle"})]})}),e.jsx("div",{className:"p-6",children:s.vehicles&&s.vehicles.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.vehicles.map(w=>e.jsxs("div",{className:"group bg-gray-50 hover:bg-white border border-gray-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-300 hover:shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-bold text-gray-800 text-lg mb-2",children:[w.year," ",w.make," ",w.model]}),e.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 text-xs font-medium rounded-full border border-blue-200",children:w.color})]}),e.jsxs("div",{className:"flex gap-2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t&&e.jsx("button",{onClick:()=>t(w),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"Edit Vehicle",children:e.jsx(Tt,{className:"w-4 h-4"})}),a&&e.jsx("button",{onClick:()=>a(w),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Vehicle",children:e.jsx(rt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"VIN:"}),e.jsx("span",{className:"font-mono text-xs",children:w.vin})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"License:"}),e.jsx("span",{className:"font-mono text-xs",children:w.licensePlate})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Mileage:"}),e.jsxs("span",{className:"font-mono text-xs",children:[w.mileage.toLocaleString()," miles"]})]}),w.status&&e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${w.status==="active"?"bg-emerald-100 text-emerald-800 border border-emerald-200":w.status==="inactive"?"bg-red-100 text-red-800 border border-red-200":"bg-amber-100 text-amber-800 border border-amber-200"}`,children:w.status})]})]})]},w._id||w.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Fe,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Vehicles Registered"}),e.jsx("p",{className:"text-gray-400",children:"This customer hasn't registered any vehicles yet."})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center",children:e.jsx(it,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Recent Service History"})]}),e.jsx("button",{className:"px-4 py-2 text-emerald-600 hover:text-emerald-700 text-sm font-semibold hover:bg-emerald-50 rounded-xl transition-all duration-200 border border-emerald-200 hover:border-emerald-300",children:"View All"})]})}),e.jsx("div",{className:"p-6",children:s.serviceHistory&&s.serviceHistory.length>0?e.jsx("div",{className:"space-y-4",children:s.serviceHistory.slice(0,3).map(w=>e.jsxs("div",{className:"group bg-gray-50 hover:bg-white border border-gray-200 hover:border-emerald-300 rounded-xl p-5 transition-all duration-300 hover:shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-800 text-lg mb-1",children:w.serviceType}),e.jsx("p",{className:"text-gray-600",children:w.description})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:["$",w.totalCost.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(w.date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 pt-3 border-t border-gray-200",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Technician: ",w.technician]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Vehicle: ",w.vehicleId]})]})]})]},w._id||w.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(it,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Service History"}),e.jsx("p",{className:"text-gray-400",children:"No service records available for this customer."})]})})]}),s.notes&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-amber-500 to-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(lt,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Notes"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.notes})})})]})]})}function sc({currentPage:s,totalPages:t,setCurrentPage:a}){return e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsx("button",{onClick:()=>a(s-1),disabled:s===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50 hover:bg-gray-300",children:"Prev"}),[...Array(t)].map((r,n)=>e.jsx("button",{onClick:()=>a(n+1),className:`px-3 py-1 rounded transition ${s===n+1?"bg-blue-600 text-white":"bg-white border hover:bg-blue-100"}`,children:n+1},n)),e.jsx("button",{onClick:()=>a(s+1),disabled:s===t,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50 hover:bg-gray-300",children:"Next"})]})}function AE({customerId:s,onClose:t,onSuccess:a}){const[r,n]=b.useState(""),[i,l]=b.useState(new Date().toISOString().split("T")[0]),[o,c]=b.useState(""),[d,u]=b.useState(""),[m,h]=b.useState(!1),y=async()=>{var g,j;if(!r||!o){P.error("Please fill all required fields");return}h(!0);try{await ct.addPayment(s,{amount:parseFloat(r),date:i||new Date().toISOString(),method:o,notes:d||void 0}),P.success("Payment added successfully!"),a(),t()}catch(v){const x=((j=(g=v.response)==null?void 0:g.data)==null?void 0:j.message)||"Failed to add payment";P.error(x)}finally{h(!1)}};return e.jsx(pe,{isOpen:!0,onClose:t,title:"Post Payment",icon:e.jsx(ma,{className:"w-5 h-5"}),submitText:"Post Payment",submitColor:"bg-green-600",onSubmit:y,children:e.jsxs("div",{className:"p-6 grid gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Amount ($) *"}),e.jsx("input",{type:"number",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:bg-white",value:r,onChange:g=>n(g.target.value),required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date"}),e.jsx("input",{type:"date",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:bg-white",value:i,onChange:g=>l(g.target.value)})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Payment Method *"}),e.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:bg-white",value:o,onChange:g=>c(g.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"card",children:"Card"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),e.jsx("textarea",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:bg-white resize-none",rows:3,value:d,onChange:g=>u(g.target.value)})]})]})})}function TE({customer:s}){const[t,a]=b.useState([]),[r,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(1),[d,u]=b.useState({currentPage:1,totalPages:1,totalPayments:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{const f=s._id||s.id;if(!f){P.error("Customer ID is required");return}n(!0);try{const p=await ct.getCustomerPayments(f,{page:o,limit:m,sortBy:"date",sortOrder:"desc"});a(p.data.payments),u(p.data.pagination)}catch(p){P.error("Failed to fetch payments"),console.error("Error fetching payments:",p)}finally{n(!1)}};b.useEffect(()=>{h()},[s._id,s.id,o]);const y=f=>{c(f)},g=()=>{h()},j=async f=>{if(!window.confirm("Are you sure you want to delete this payment?"))return;const p=s._id||s.id;if(!p){P.error("Customer ID is required");return}try{await ct.deletePayment(p,f),P.success("Payment deleted successfully"),h()}catch(N){P.error("Failed to delete payment"),console.error("Error deleting payment:",N)}},v=f=>({cash:"Cash",card:"Card",check:"Check",bank_transfer:"Bank Transfer",online:"Online",other:"Other"})[f]||f,x=f=>{switch(f){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{children:[i&&e.jsx(AE,{customerId:s._id||s.id||"",onClose:()=>l(!1),onSuccess:g}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"text-green-600 w-5 h-5"})}),"Payment History",d.totalPayments>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalPayments," payments)"]})]}),e.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Payment"})]}),r?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:t.map(f=>e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-bold text-green-700 text-xl",children:["$",f.amount.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:"text-xs bg-gray-100 px-3 py-1.5 rounded-lg",children:v(f.method)}),e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-lg ${x(f.status)}`,children:f.status})]})]}),e.jsx("button",{onClick:()=>j(f._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Payment",children:e.jsx(rt,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📅 ",new Date(f.date).toLocaleDateString()]}),f.reference&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Ref: ",f.reference]}),f.notes&&e.jsx("p",{className:"text-sm italic text-gray-500",children:f.notes})]},f._id))}),d.totalPages>1&&e.jsx(sc,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:y})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:"💰"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No payments found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't made any payments yet."}),e.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[e.jsx(Me,{className:"w-5 h-5"}),"Add First Payment"]})]})]})}function PE({customerId:s,onClose:t,onSuccess:a}){const[r,n]=b.useState(""),[i,l]=b.useState(""),[o,c]=b.useState("pending"),[d,u]=b.useState("installment"),[m,h]=b.useState(""),[y,g]=b.useState(!1),j=async()=>{var v,x;if(!r||!i){P.error("Please fill all required fields");return}g(!0);try{await ct.addArrangement(s,{amount:parseFloat(r),dueDate:i,status:o,type:d,notes:m||void 0}),P.success("Arrangement added successfully!"),a(),t()}catch(f){const p=((x=(v=f.response)==null?void 0:v.data)==null?void 0:x.message)||"Failed to add arrangement";P.error(p)}finally{g(!1)}};return e.jsx(pe,{isOpen:!0,onClose:t,title:"New Payment Arrangement",icon:e.jsx(lt,{className:"w-5 h-5"}),submitText:"Create Arrangement",submitColor:"bg-green-600",onSubmit:j,children:e.jsxs("div",{className:"p-6 grid gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Amount ($) *"}),e.jsx("input",{type:"number",value:r,onChange:v=>n(v.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Due Date *"}),e.jsx("input",{type:"date",value:i,onChange:v=>l(v.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Type"}),e.jsxs("select",{value:d,onChange:v=>u(v.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"installment",children:"Installment"}),e.jsx("option",{value:"payment_plan",children:"Payment Plan"}),e.jsx("option",{value:"deferred",children:"Deferred"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),e.jsxs("select",{value:o,onChange:v=>c(v.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),e.jsx("textarea",{rows:3,value:m,onChange:v=>h(v.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 hover:bg-white resize-none"})]})]})})}function DE({customer:s}){const[t,a]=b.useState([]),[r,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(1),[d,u]=b.useState({currentPage:1,totalPages:1,totalArrangements:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{const f=s._id||s.id;if(!f){P.error("Customer ID is required");return}n(!0);try{const p=await ct.getCustomerArrangements(f,{page:o,limit:m,sortBy:"date",sortOrder:"desc"});a(p.data.arrangements),u(p.data.pagination)}catch(p){P.error("Failed to fetch arrangements"),console.error("Error fetching arrangements:",p)}finally{n(!1)}};b.useEffect(()=>{h()},[s._id,s.id,o]);const y=f=>{c(f)},g=()=>{h()},j=async f=>{if(!window.confirm("Are you sure you want to delete this arrangement?"))return;const p=s._id||s.id;if(!p){P.error("Customer ID is required");return}try{await ct.deleteArrangement(p,f),P.success("Arrangement deleted successfully"),h()}catch(N){P.error("Failed to delete arrangement"),console.error("Error deleting arrangement:",N)}},v=f=>({installment:"Installment",payment_plan:"Payment Plan",deferred:"Deferred",other:"Other"})[f]||f,x=f=>{switch(f){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{children:[i&&e.jsx(PE,{customerId:s._id||s.id||"",onClose:()=>l(!1),onSuccess:g}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(lt,{className:"text-purple-600 w-5 h-5"})}),"Payment Arrangements",d.totalArrangements>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalArrangements," arrangements)"]})]}),e.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Arrangement"})]}),r?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:t.map(f=>e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-bold text-green-700 text-xl",children:["$",f.amount.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:"text-xs bg-gray-100 px-3 py-1.5 rounded-lg",children:v(f.type)}),e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-lg ${x(f.status)}`,children:f.status})]})]}),e.jsx("button",{onClick:()=>j(f._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Arrangement",children:e.jsx(rt,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📅 ",new Date(f.date).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Due: ",new Date(f.dueDate).toLocaleDateString()]}),f.notes&&e.jsx("p",{className:"text-sm italic text-gray-500",children:f.notes})]},f._id))}),d.totalPages>1&&e.jsx(sc,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:y})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:"📋"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No arrangements found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't made any payment arrangements yet."}),e.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add First Arrangement"]})]})]})}function ME({customerId:s,onClose:t,onSuccess:a}){const[r,n]=b.useState(""),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,u]=b.useState(""),[m,h]=b.useState("60"),[y,g]=b.useState("medium"),[j,v]=b.useState("scheduled"),[x,f]=b.useState(""),[p,N]=b.useState(""),[w,S]=b.useState([]);b.useEffect(()=>{(async()=>{try{const _=await fetch(`${Lt.CUSTOMERS}/technicians`,{headers:Ot()});if(_.ok){const F=await _.json();F.success&&S(F.data.technicians||[])}}catch(_){console.error("Error loading technicians:",_),S([])}})()},[]);const C=()=>{if(!r||!i||!o||!d){alert("Please complete all required fields.");return}console.log({date:r,time:i,serviceType:o,vehicle:d,estimatedDuration:m,priority:y,status:j,notes:x,technicianId:p}),t()};return e.jsx(pe,{isOpen:!0,onClose:t,title:"New Appointment",icon:e.jsx(be,{className:"w-5 h-5"}),submitText:"Create Appointment",submitColor:"bg-blue-600",onSubmit:C,children:e.jsxs("div",{className:"p-6 grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 block flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-indigo-600"}),"Date *"]}),e.jsx("input",{type:"date",value:r,onChange:T=>n(T.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 block flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-indigo-600"}),"Time *"]}),e.jsx("input",{type:"time",value:i,onChange:T=>l(T.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",required:!0})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Service Type *"}),e.jsxs("select",{value:o,onChange:T=>c(T.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Service"}),e.jsx("option",{value:"oil_change",children:"Oil Change"}),e.jsx("option",{value:"brake_service",children:"Brake Service"}),e.jsx("option",{value:"tire_rotation",children:"Tire Rotation"}),e.jsx("option",{value:"transmission_service",children:"Transmission Service"}),e.jsx("option",{value:"engine_repair",children:"Engine Repair"}),e.jsx("option",{value:"electrical_repair",children:"Electrical Repair"}),e.jsx("option",{value:"diagnostic",children:"Diagnostic"}),e.jsx("option",{value:"inspection",children:"Inspection"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"emergency_repair",children:"Emergency Repair"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 block flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-indigo-600"}),"Assign Technician"]}),e.jsxs("select",{value:p,onChange:T=>N(T.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"",children:"Select a technician (optional)"}),w.filter(T=>T.isActive).map(T=>e.jsxs("option",{value:T.id||T._id,children:[T.name," - ",Array.isArray(T.specializations)?T.specializations.join(", "):T.specializations]},T.id||T._id))]})]}),e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 mb-2 block flex items-center gap-2",children:[e.jsx(Xr,{className:"w-4 h-4 text-indigo-600"}),"Vehicle *"]}),e.jsx("input",{type:"text",placeholder:"e.g., 2020 Toyota Camry",value:d,onChange:T=>u(T.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Duration (minutes)"}),e.jsx("input",{type:"number",min:"15",max:"480",value:m,onChange:T=>h(T.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Priority"}),e.jsxs("select",{value:y,onChange:T=>g(T.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),e.jsxs("select",{value:j,onChange:T=>v(T.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),e.jsx("textarea",{rows:3,value:x,onChange:T=>f(T.target.value),placeholder:"Any special instructions or notes...",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:bg-white resize-none"})]})]})})}function EE({customer:s}){const[t,a]=b.useState([]),[r,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(1),[d,u]=b.useState({currentPage:1,totalPages:1,totalAppointments:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{n(!0);try{const f=await le(M.get(`/appointments?customer=${s._id}&page=${o}&limit=${m}&sortBy=date&sortOrder=desc`));a(f.data.appointments),u(f.data.pagination)}catch(f){P.error("Failed to fetch appointments"),console.error("Error fetching appointments:",f)}finally{n(!1)}};b.useEffect(()=>{h()},[s._id,o]);const y=f=>{c(f)},g=()=>{h()},j=async f=>{if(window.confirm("Are you sure you want to delete this appointment?"))try{await le(M.delete(`/appointments/${f}`)),P.success("Appointment deleted successfully"),h()}catch(p){P.error("Failed to delete appointment"),console.error("Error deleting appointment:",p)}},v=f=>{switch(f){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=(f,p)=>{try{const N=new Date(f);return isNaN(N.getTime())?{date:"Invalid Date",time:p||"TBD"}:{date:N.toLocaleDateString(),time:p||"TBD"}}catch(N){return console.error("Error formatting date/time:",N),{date:"Invalid Date",time:p||"TBD"}}};return e.jsxs("div",{children:[i&&e.jsx(ME,{customerId:s._id||s.id||"",onClose:()=>l(!1),onSuccess:g}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(be,{className:"text-indigo-600 w-5 h-5"})}),"Appointments",d.totalAppointments>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalAppointments," appointments)"]})]}),e.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Appointment"})]}),r?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:t.map(f=>{var p;try{const{date:N,time:w}=x(f.scheduledDate,f.scheduledTime);return e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium ${v(f.status||"scheduled")}`,children:f.status||"scheduled"}),f.serviceType&&e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded-lg",children:typeof f.serviceType=="string"?f.serviceType:((p=f.serviceType)==null?void 0:p.name)||"Unknown Service"})]})}),e.jsx("button",{onClick:()=>j(f._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Appointment",children:e.jsx(rt,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📅 ",N," • ",w]}),f.vehicle&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["🚗 ",f.vehicle.year||"N/A"," ",f.vehicle.make||"Unknown"," ",f.vehicle.model||"Unknown"]}),f.technician&&f.technician.name&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["👨‍🔧 ",f.technician.name]}),f.notes&&f.notes.trim()&&e.jsx("p",{className:"text-sm italic text-gray-500",children:f.notes})]},f._id)}catch(N){return console.error("Error rendering appointment:",N,f),e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg",children:[e.jsx("p",{className:"text-sm text-red-600",children:"Error displaying appointment"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",f._id]})]},f._id)}})}),d.totalPages>1&&e.jsx(sc,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:y})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:"📅"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No appointments found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't scheduled any appointments yet."}),e.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[e.jsx(be,{className:"w-5 h-5"}),"Schedule First Appointment"]})]})]})}function IE({customerId:s,onClose:t,onSuccess:a}){const[r,n]=b.useState(new Date().toISOString().split("T")[0]),[i,l]=b.useState("scheduled"),[o,c]=b.useState(""),[d,u]=b.useState(""),[m,h]=b.useState(""),[y,g]=b.useState(""),[j,v]=b.useState(""),[x,f]=b.useState(!1),p=async()=>{var N,w;if(!o){P.error("Please fill all required fields");return}f(!0);try{await ct.addTowing(s,{date:r||new Date().toISOString(),location:o,destination:d||void 0,status:i,cost:m?parseFloat(m):0,vehicle:y||void 0,notes:j||void 0}),P.success("Towing record added successfully!"),a(),t()}catch(S){const C=((w=(N=S.response)==null?void 0:N.data)==null?void 0:w.message)||"Failed to add towing record";P.error(C)}finally{f(!1)}};return e.jsx(pe,{isOpen:!0,onClose:t,title:"New Towing Service",icon:e.jsx(Xr,{className:"w-5 h-5"}),submitText:"Schedule Towing",submitColor:"bg-orange-600",onSubmit:p,children:e.jsxs("div",{className:"p-6 grid gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date"}),e.jsx("input",{type:"date",value:r,onChange:N=>n(N.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),e.jsxs("select",{value:i,onChange:N=>l(N.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white",children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Cost ($)"}),e.jsx("input",{type:"number",value:m,onChange:N=>h(N.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white",min:"0",step:"0.01"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Location *"}),e.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Destination"}),e.jsx("input",{type:"text",value:d,onChange:N=>u(N.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Vehicle"}),e.jsx("input",{type:"text",value:y,onChange:N=>g(N.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),e.jsx("textarea",{rows:3,value:j,onChange:N=>v(N.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 hover:bg-white resize-none"})]})]})})}function RE({customer:s}){const[t,a]=b.useState([]),[r,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(1),[d,u]=b.useState({currentPage:1,totalPages:1,totalTowingRecords:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{const x=s._id||s.id;if(!x){P.error("Customer ID is required");return}n(!0);try{const f=await ct.getCustomerTowing(x,{page:o,limit:m,sortBy:"date",sortOrder:"desc"});a(f.data.towingRecords),u(f.data.pagination)}catch(f){P.error("Failed to fetch towing records"),console.error("Error fetching towing records:",f)}finally{n(!1)}};b.useEffect(()=>{h()},[s._id,s.id,o]);const y=x=>{c(x)},g=()=>{h()},j=async x=>{if(!window.confirm("Are you sure you want to delete this towing record?"))return;const f=s._id||s.id;if(!f){P.error("Customer ID is required");return}try{await ct.deleteTowing(f,x),P.success("Towing record deleted successfully"),h()}catch(p){P.error("Failed to delete towing record"),console.error("Error deleting towing record:",p)}},v=x=>{switch(x){case"completed":return"bg-green-100 text-green-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{children:[i&&e.jsx(IE,{customerId:s._id||s.id||"",onClose:()=>l(!1),onSuccess:g}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Xr,{className:"text-orange-600 w-5 h-5"})}),"Towing Records",d.totalTowingRecords>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalTowingRecords," records)"]})]}),e.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Tow"})]}),r?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:t.map(x=>e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:x.location}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium ${v(x.status)}`,children:x.status}),x.cost>0&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-3 py-1.5 rounded-lg",children:["$",x.cost.toFixed(2)]})]})]}),e.jsx("button",{onClick:()=>j(x._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Towing Record",children:e.jsx(rt,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📅 ",new Date(x.date).toLocaleDateString()]}),x.destination&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["To: ",x.destination]}),x.vehicle&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Vehicle: ",x.vehicle]}),x.notes&&e.jsx("p",{className:"text-sm italic text-gray-500",children:x.notes})]},x._id))}),d.totalPages>1&&e.jsx(sc,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:y})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:"🚛"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No towing records found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't had any towing services yet."}),e.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[e.jsx(Xr,{className:"w-5 h-5"}),"Add First Towing Record"]})]})]})}function LE({customerId:s,onClose:t,onSuccess:a}){const[r,n]=b.useState(new Date().toISOString().split("T")[0]),[i,l]=b.useState("inbound"),[o,c]=b.useState(""),[d,u]=b.useState(""),[m,h]=b.useState(""),[y,g]=b.useState(""),[j,v]=b.useState(!1),[x,f]=b.useState(""),[p,N]=b.useState(!1),w=async()=>{var S,C;if(!i){P.error("Please fill all required fields");return}N(!0);try{let T=0;if(o){const _=o.split(":");_.length===2?T=parseInt(_[0])*60+parseInt(_[1]):T=parseInt(o)*60}await ct.addCallLog(s,{date:r||new Date().toISOString(),type:i,duration:T,phoneNumber:d||void 0,summary:m||void 0,notes:y||void 0,followUpRequired:j,followUpDate:x||void 0}),P.success("Call log added successfully!"),a(),t()}catch(T){const _=((C=(S=T.response)==null?void 0:S.data)==null?void 0:C.message)||"Failed to add call log";P.error(_)}finally{N(!1)}};return e.jsx(pe,{isOpen:!0,onClose:t,title:"New Call Log",icon:e.jsx(kt,{className:"w-5 h-5"}),submitText:"Log Call",submitColor:"bg-blue-600",onSubmit:w,children:e.jsxs("div",{className:"p-6 grid gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date"}),e.jsx("input",{type:"date",value:r,onChange:S=>n(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Call Type *"}),e.jsxs("select",{value:i,onChange:S=>l(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white",required:!0,children:[e.jsx("option",{value:"inbound",children:"Inbound"}),e.jsx("option",{value:"outbound",children:"Outbound"}),e.jsx("option",{value:"missed",children:"Missed"}),e.jsx("option",{value:"voicemail",children:"Voicemail"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Duration (MM:SS)"}),e.jsx("input",{type:"text",value:o,onChange:S=>c(S.target.value),placeholder:"e.g. 05:30",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Phone Number"}),e.jsx("input",{type:"text",value:d,onChange:S=>u(S.target.value),placeholder:"e.g. (555) 123-4567",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Summary"}),e.jsx("input",{type:"text",value:m,onChange:S=>h(S.target.value),placeholder:"Brief summary of the call",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Follow-up Required"}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:S=>v(S.target.checked),className:"mr-3 w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500 focus:ring-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Mark for follow-up"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Follow-up Date"}),e.jsx("input",{type:"date",value:x,onChange:S=>f(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed",disabled:!j})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Notes"}),e.jsx("textarea",{value:y,onChange:S=>g(S.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 hover:bg-white resize-none",rows:3,placeholder:"Detailed notes about the call..."})]})]})})}function OE({customer:s}){const[t,a]=b.useState([]),[r,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(1),[d,u]=b.useState({currentPage:1,totalPages:1,totalCallLogs:0,hasNextPage:!1,hasPrevPage:!1}),m=8,h=async()=>{const p=s._id||s.id;if(!p){P.error("Customer ID is required");return}n(!0);try{const N=await ct.getCustomerCallLogs(p,{page:o,limit:m,sortBy:"date",sortOrder:"desc"});a(N.data.callLogs),u(N.data.pagination)}catch(N){P.error("Failed to fetch call logs"),console.error("Error fetching call logs:",N)}finally{n(!1)}};b.useEffect(()=>{h()},[s._id,s.id,o]);const y=p=>{c(p)},g=()=>{h()},j=async p=>{if(!window.confirm("Are you sure you want to delete this call log?"))return;const N=s._id||s.id;if(!N){P.error("Customer ID is required");return}try{await ct.deleteCallLog(N,p),P.success("Call log deleted successfully"),h()}catch(w){P.error("Failed to delete call log"),console.error("Error deleting call log:",w)}},v=p=>({inbound:"Inbound",outbound:"Outbound",missed:"Missed",voicemail:"Voicemail"})[p]||p,x=p=>{const N=Math.floor(p/60),w=p%60;return`${N}:${w.toString().padStart(2,"0")}`},f=p=>{switch(p){case"inbound":return"bg-green-100 text-green-700";case"outbound":return"bg-blue-100 text-blue-700";case"missed":return"bg-red-100 text-red-700";case"voicemail":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return e.jsxs("div",{children:[i&&e.jsx(LE,{customerId:s._id||s.id||"",onClose:()=>l(!1),onSuccess:g}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-100 rounded-lg",children:e.jsx(kt,{className:"text-teal-600 w-5 h-5"})}),"Call Logs",d.totalCallLogs>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.totalCallLogs," calls)"]})]}),e.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white rounded-xl text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"+ Add Call"})]}),r?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})}):t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:t.map(p=>e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium ${f(p.type)}`,children:v(p.type)}),e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-3 py-1.5 rounded-lg",children:x(p.duration)})]}),p.followUpRequired&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-3 py-1.5 rounded-lg",children:"Follow-up Required"})]}),e.jsx("button",{onClick:()=>j(p._id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Delete Call Log",children:e.jsx(rt,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📅 ",new Date(p.date).toLocaleDateString()]}),p.phoneNumber&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📞 ",p.phoneNumber]}),p.summary&&e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:p.summary}),p.notes&&e.jsx("p",{className:"text-sm italic text-gray-500",children:p.notes}),p.followUpDate&&e.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:["🔄 Follow-up: ",new Date(p.followUpDate).toLocaleDateString()]})]},p._id))}),d.totalPages>1&&e.jsx(sc,{currentPage:d.currentPage,totalPages:d.totalPages,setCurrentPage:y})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-6",children:"📞"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No call logs found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"This customer hasn't had any calls logged yet."}),e.jsxs("button",{onClick:()=>l(!0),className:"px-8 py-4 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white rounded-xl inline-flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[e.jsx(kt,{className:"w-5 h-5"}),"Add First Call Log"]})]})]})}function FE({customer:s,isOpen:t,onClose:a,onSuccess:r}){var y,g,j,v;const n=Ue(),[i,l]=b.useState(!1),[o,c]=b.useState({name:s.name||"",email:s.email||"",phone:s.phone||"",businessName:s.businessName||"",address:{street:((y=s.address)==null?void 0:y.street)||"",city:((g=s.address)==null?void 0:g.city)||"",state:((j=s.address)==null?void 0:j.state)||"",zipCode:((v=s.address)==null?void 0:v.zipCode)||""},status:s.status||"active"});b.useEffect(()=>{var x,f,p,N;s&&c({name:s.name||"",email:s.email||"",phone:s.phone||"",businessName:s.businessName||"",address:{street:((x=s.address)==null?void 0:x.street)||"",city:((f=s.address)==null?void 0:f.city)||"",state:((p=s.address)==null?void 0:p.state)||"",zipCode:((N=s.address)==null?void 0:N.zipCode)||""},status:s.status||"active"})},[s]);const d=x=>{const f=x.replace(/\D/g,"");return f.length<=3?f:f.length<=6?`(${f.slice(0,3)}) ${f.slice(3)}`:`(${f.slice(0,3)}) ${f.slice(3,6)}-${f.slice(6,10)}`},u=(x,f)=>{if(x.includes(".")){const[p,N]=x.split(".");p==="address"&&c(w=>({...w,address:{...w.address,[N]:f}}))}else c(p=>({...p,[x]:f}))},m=x=>{const f=d(x.target.value);u("phone",f)},h=async()=>{l(!0);try{const x={...o,phone:o.phone?o.phone.replace(/\D/g,""):""},f=s._id||s.id;if(!f){P.error("Customer ID is required");return}await n(Ln({id:f,customerData:x})).unwrap(),P.success("Customer updated successfully!"),r==null||r(),a()}catch(x){console.error("Update customer error:",x),P.error(x.message||"Failed to update customer. Please try again.")}finally{l(!1)}};return e.jsx(pe,{isOpen:t,onClose:a,title:"Edit Customer",submitText:"Update Customer",onSubmit:h,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-100 pb-2",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Contact Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(Vt,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:o.name,onChange:x=>u("name",x.target.value),className:"form-input pl-10",placeholder:"Enter contact name",required:!0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Business Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(Pm,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:o.businessName,onChange:x=>u("businessName",x.target.value),className:"form-input pl-10",placeholder:"Enter business name",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(jt,{className:"w-4 h-4"})}),e.jsx("input",{type:"email",value:o.email,onChange:x=>u("email",x.target.value),className:"form-input pl-10",placeholder:"Enter email address",required:!0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(kt,{className:"w-4 h-4"})}),e.jsx("input",{type:"tel",value:o.phone,onChange:m,className:"form-input pl-10",placeholder:"(555) 123-4567",required:!0})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-100 pb-2",children:"Address Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Street Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(pa,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:o.address.street,onChange:x=>u("address.street",x.target.value),className:"form-input pl-10",placeholder:"Enter street address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"City"}),e.jsx("input",{type:"text",value:o.address.city,onChange:x=>u("address.city",x.target.value),className:"form-input",placeholder:"Enter city"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"State"}),e.jsx("input",{type:"text",value:o.address.state,onChange:x=>u("address.state",x.target.value),className:"form-input",placeholder:"Enter state"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"ZIP Code"}),e.jsx("input",{type:"text",value:o.address.zipCode,onChange:x=>u("address.zipCode",x.target.value),className:"form-input",placeholder:"Enter ZIP code"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:o.status,onChange:x=>u("status",x.target.value),className:"form-select",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]})})}const $E=({customer:s,isOpen:t,onClose:a,onDelete:r})=>{var d,u,m,h,y;const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{try{i(!0),o(null),await r(s.id),a()}catch(g){o(g instanceof Error?g.message:"Failed to delete customer")}finally{i(!1)}};return e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Customer",submitText:"Delete Customer",onSubmit:c,isLoading:n,submitButtonVariant:"error",children:e.jsxs("div",{className:"p-4 space-y-4",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the customer and all associated data."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Customer Name:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:[s.firstName," ",s.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Address:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:[(d=s.address)==null?void 0:d.street,", ",(u=s.address)==null?void 0:u.city,", ",(m=s.address)==null?void 0:m.state," ",(h=s.address)==null?void 0:h.zipCode]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Vehicles:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:[((y=s.vehicles)==null?void 0:y.length)||0," vehicle(s)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.isActive?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this customer will also remove:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"All vehicle records"}),e.jsx("li",{children:"Service history"}),e.jsx("li",{children:"Appointment records"}),e.jsx("li",{children:"Payment history"}),e.jsx("li",{children:"Communication logs"})]})]})]})})};function zE({customer:s,isOpen:t,onClose:a,onSuccess:r}){Ue();const[n,i]=b.useState(!1),[l,o]=b.useState({make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",mileage:0,color:""}),c=(u,m)=>{o(h=>({...h,[u]:m}))},d=async()=>{i(!0);try{const u=s._id||s.id;if(!u)throw new Error("Customer ID is required");const m=await ct.addVehicle(u,l);if(m.success)P.success("Vehicle added successfully!"),r==null||r(),a(),o({make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",mileage:0,color:""});else throw new Error(m.message||"Failed to add vehicle")}catch(u){console.error("Add vehicle error:",u),P.error(u.message||"Failed to add vehicle")}finally{i(!1)}};return e.jsx(pe,{isOpen:t,onClose:a,title:`Add Vehicle to ${s.name}`,submitText:"Add Vehicle",onSubmit:d,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Make *"}),e.jsx("input",{type:"text",value:l.make,onChange:u=>c("make",u.target.value),className:"form-input",required:!0,placeholder:"e.g., Toyota"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Model *"}),e.jsx("input",{type:"text",value:l.model,onChange:u=>c("model",u.target.value),className:"form-input",required:!0,placeholder:"e.g., Camry"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("input",{type:"number",value:l.year,onChange:u=>c("year",parseInt(u.target.value)),className:"form-input pl-10",required:!0,min:"1900",max:new Date().getFullYear()+1})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Color *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(UA,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:l.color,onChange:u=>c("color",u.target.value),className:"form-input pl-10",required:!0,placeholder:"e.g., Red"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"VIN (Vehicle Identification Number) *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(T1,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:l.vin,onChange:u=>c("vin",u.target.value.toUpperCase()),className:"form-input pl-10",required:!0,placeholder:"17-character VIN",maxLength:17})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"License Plate *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(Pf,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:l.licensePlate,onChange:u=>c("licensePlate",u.target.value.toUpperCase()),className:"form-input pl-10",required:!0,placeholder:"License plate number"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Mileage *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(Gn,{className:"w-4 h-4"})}),e.jsx("input",{type:"number",value:l.mileage,onChange:u=>c("mileage",parseInt(u.target.value)),className:"form-input pl-10",min:"0",placeholder:"0",required:!0})]})]})]})})}function BE({customer:s,vehicle:t,isOpen:a,onClose:r,onSuccess:n}){const[i,l]=b.useState({make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",mileage:0,color:"",status:"active"}),[o,c]=b.useState(!1);b.useEffect(()=>{t&&l({make:t.make||"",model:t.model||"",year:t.year||new Date().getFullYear(),vin:t.vin||"",licensePlate:t.licensePlate||"",mileage:t.mileage||0,color:t.color||"",status:t.status||"active"})},[t]);const d=m=>{const{name:h,value:y}=m.target;l(g=>({...g,[h]:h==="year"||h==="mileage"?parseInt(y)||0:y}))},u=async()=>{var m,h;c(!0);try{await ct.updateVehicle(s._id,t._id,i),P.success("Vehicle updated successfully!"),n(),r()}catch(y){const g=((h=(m=y.response)==null?void 0:m.data)==null?void 0:h.message)||"Failed to update vehicle";P.error(g)}finally{c(!1)}};return e.jsx(pe,{isOpen:a,onClose:r,title:"Edit Vehicle",submitText:"Update Vehicle",onSubmit:u,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Make *"}),e.jsx("input",{type:"text",name:"make",value:i.make,onChange:d,className:"form-input",required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Model *"}),e.jsx("input",{type:"text",name:"model",value:i.model,onChange:d,className:"form-input",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:i.year,onChange:d,className:"form-input",required:!0,min:"1900",max:new Date().getFullYear()+1})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Color *"}),e.jsx("input",{type:"text",name:"color",value:i.color,onChange:d,className:"form-input",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"VIN *"}),e.jsx("input",{type:"text",name:"vin",value:i.vin,onChange:d,className:"form-input",required:!0,maxLength:17})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"License Plate *"}),e.jsx("input",{type:"text",name:"licensePlate",value:i.licensePlate,onChange:d,className:"form-input",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Mileage *"}),e.jsx("input",{type:"number",name:"mileage",value:i.mileage,onChange:d,className:"form-input",required:!0,min:"0"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",value:i.status,onChange:d,className:"form-select",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]})]})})}const UE=({vehicle:s,isOpen:t,onClose:a,onDelete:r})=>{var d;const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{try{i(!0),o(null),await r(s.id),a()}catch(u){o(u instanceof Error?u.message:"Failed to delete vehicle")}finally{i(!1)}};return e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Vehicle",submitText:"Delete Vehicle",onSubmit:c,isLoading:n,submitButtonVariant:"error",children:e.jsxs("div",{className:"p-4 space-y-4",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the vehicle."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Vehicle:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:[s.year," ",s.make," ",s.model]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"VIN:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.vin})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"License Plate:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.licensePlate})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Color:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.color})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Mileage:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:[(d=s.mileage)==null?void 0:d.toLocaleString()," miles"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Engine:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.engine})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this vehicle will also remove:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Service history"}),e.jsx("li",{children:"Appointment records"}),e.jsx("li",{children:"Maintenance logs"}),e.jsx("li",{children:"Repair records"})]})]})]})})},VE=[{key:"Overview",label:"Overview",icon:Vt,color:"from-blue-500 to-indigo-500"},{key:"Payments",label:"Payments",icon:Me,color:"from-emerald-500 to-teal-500"},{key:"Arrangements",label:"Arrangements",icon:lt,color:"from-purple-500 to-pink-500"},{key:"Appointments",label:"Appointments",icon:be,color:"from-orange-500 to-red-500"},{key:"Towing",label:"Towing",icon:Xr,color:"from-amber-500 to-yellow-500"},{key:"Call Logs",label:"Call Logs",icon:kt,color:"from-cyan-500 to-blue-500"}];function HE(){const{id:s}=Sw(),t=Ue(),[a,r]=b.useState("Overview"),[n,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState(!1),[h,y]=b.useState(!1),[g,j]=b.useState(null),{selectedCustomer:v,loading:x,error:f}=je(N=>N.customers);if(b.useEffect(()=>{s&&t(ia(s))},[t,s]),x)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-blue-400 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Loading Customer Information"}),e.jsx("p",{className:"text-gray-500",children:"Please wait while we fetch the details..."})]})]})});if(f)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:e.jsx("div",{className:"max-w-md mx-auto mt-20",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center border border-red-100",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Hi,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Error Loading Customer"}),e.jsx("p",{className:"text-red-600 font-medium mb-4",children:f}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Try Again"})]})})});if(!v)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:e.jsx("div",{className:"max-w-md mx-auto mt-20",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Vt,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Customer Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The customer you're looking for doesn't exist or has been removed."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Go Back"})]})})});let p=v;return v&&typeof v=="object"&&"customer"in v&&v.customer&&(p=v.customer),!p._id||!p.name?(console.error("Invalid customer data:",p),console.error("Original customer object:",v),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:e.jsx("div",{className:"max-w-md mx-auto mt-20",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center border border-red-100",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Xt,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Invalid Customer Data"}),e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Some required information is missing."}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please check the console for debugging information."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Go Back"})]})})})):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("div",{className:"p-6",children:e.jsxs("button",{onClick:()=>window.history.back(),className:"inline-flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors duration-200 mb-6 group",children:[e.jsx(b1,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform duration-200"}),e.jsx("span",{className:"font-medium",children:"Back to Customers"})]})}),e.jsx("div",{className:"px-6 mb-8",children:e.jsxs("div",{className:"min-h-48 flex flex-col lg:flex-row justify-between items-start lg:items-center p-8",children:[e.jsxs("div",{className:"flex items-center space-x-6 mb-6 lg:mb-0",children:[e.jsx("div",{className:"w-24 h-24 bg-secondary-100 rounded-full flex items-center justify-center border border-secondary-200",children:e.jsx(Vt,{className:"w-12 h-12 text-secondary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-secondary-900 mb-3",children:p.name||p.businessName||"Unnamed Customer"}),e.jsxs("div",{className:"space-y-2",children:[p.businessName&&p.name!==p.businessName&&e.jsxs("p",{className:"text-secondary-600 text-lg",children:["Contact: ",p.name]}),e.jsxs("p",{className:"text-secondary-500 text-sm",children:["Customer ID: ",p._id||"N/A"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:()=>i(!0),className:"btn-primary px-6 py-3",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Edit Customer"]}),e.jsxs("button",{onClick:()=>d(!0),className:"btn-success px-6 py-3",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Add Vehicle"]}),e.jsxs("button",{onClick:()=>o(!0),className:"btn-error px-6 py-3",children:[e.jsx(rt,{className:"w-4 h-4"}),"Delete Customer"]})]})]})}),e.jsx("div",{className:"px-6 mb-8",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl px-6 py-4 border border-gray-100 overflow-x-auto",children:e.jsx("nav",{className:"flex gap-2 whitespace-nowrap",children:VE.map(({key:N,label:w,icon:S})=>e.jsxs("button",{onClick:()=>r(N),className:`tab-button-alt ${a===N?"tab-button-alt-active":"tab-button-alt-inactive"}`,children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:w})]},N))})})}),e.jsx("div",{className:"px-6 pb-8",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[a==="Overview"&&e.jsx(_E,{customer:p,onEditVehicle:N=>{j(N),m(!0)},onDeleteVehicle:N=>{j(N),y(!0)},onAddVehicle:()=>d(!0)}),a==="Payments"&&e.jsx("div",{className:"min-h-[400px]",children:e.jsx(TE,{customer:p})}),a==="Arrangements"&&e.jsx("div",{className:"min-h-[400px]",children:e.jsx(DE,{customer:p})}),a==="Appointments"&&e.jsx("div",{className:"min-h-[400px]",children:e.jsx(EE,{customer:p})}),a==="Towing"&&e.jsx("div",{className:"min-h-[400px]",children:e.jsx(RE,{customer:p})}),a==="Call Logs"&&e.jsx("div",{className:"min-h-[400px]",children:e.jsx(OE,{customer:p})})]})})}),p&&e.jsxs(e.Fragment,{children:[e.jsx(FE,{customer:p,isOpen:n,onClose:()=>i(!1),onSuccess:()=>{s&&t(ia(s))}}),e.jsx($E,{customer:p,isOpen:l,onClose:()=>o(!1)}),e.jsx(zE,{customer:p,isOpen:c,onClose:()=>d(!1),onSuccess:()=>{s&&t(ia(s))}}),g&&e.jsxs(e.Fragment,{children:[e.jsx(BE,{customer:p,vehicle:g,isOpen:u,onClose:()=>{m(!1),j(null)},onSuccess:()=>{s&&t(ia(s))}}),e.jsx(UE,{customer:p,vehicle:g,isOpen:h,onClose:()=>{y(!1),j(null)},onSuccess:()=>{s&&t(ia(s))}})]})]})]})}function WE({title:s,icon:t}){return e.jsxs("div",{className:"flex items-center mb-6",children:[t&&e.jsx(t,{className:"h-8 w-8 text-primary-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-secondary-900",children:s})]})}function qE(){const s=Zi(),t=Ue(),[a,r]=b.useState(!1),[n,i]=b.useState({name:"",email:"",phone:"",businessName:"",address:{street:"",city:"",state:"",zipCode:""},status:"active",notes:""}),l=c=>{const{name:d,value:u}=c.target;if(d.startsWith("address.")){const m=d.split(".")[1];i(h=>({...h,address:{...h.address,[m]:u}}))}else i(m=>({...m,[d]:u}))},o=async c=>{if(c.preventDefault(),!n.name||!n.email||!n.phone){P.error("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){P.error("Please enter a valid email address");return}if(n.phone.length<10){P.error("Please enter a valid phone number");return}r(!0);try{await t(Rn({name:n.name,email:n.email,phone:n.phone,businessName:n.businessName,address:n.address,status:n.status,notes:n.notes})).unwrap(),P.success("Customer created successfully!"),s("/admin/dashboard/customers")}catch(u){P.error(u.message||"Failed to create customer")}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-secondary-50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{onClick:()=>s("/admin/dashboard/customers"),className:"btn-secondary flex items-center gap-2",children:[e.jsx(b1,{className:"w-4 h-4"}),"Back to Customers"]})}),e.jsx("div",{className:"border-b border-secondary-200 pb-4",children:e.jsx(WE,{title:"Add New Customer"})})]}),e.jsx("div",{className:"card p-8",children:e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-secondary-900 flex items-center gap-3 border-b border-secondary-200 pb-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(Vt,{className:"w-5 h-5 text-blue-600"})}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Full Name *"}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:l,required:!0,className:"form-input",placeholder:"Enter customer's full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Business Name"}),e.jsx("input",{type:"text",name:"businessName",value:n.businessName,onChange:l,className:"form-input",placeholder:"Enter business name (optional)"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-secondary-900 flex items-center gap-3 border-b border-secondary-200 pb-2",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg",children:e.jsx(jt,{className:"w-5 h-5 text-green-600"})}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:l,required:!0,className:"form-input",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:l,required:!0,className:"form-input",placeholder:"Enter phone number"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-secondary-900 flex items-center gap-3 border-b border-secondary-200 pb-2",children:[e.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg",children:e.jsx(pa,{className:"w-5 h-5 text-red-600"})}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"form-label",children:"Street Address"}),e.jsx("input",{type:"text",name:"address.street",value:n.address.street,onChange:l,className:"form-input",placeholder:"Enter street address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"City"}),e.jsx("input",{type:"text",name:"address.city",value:n.address.city,onChange:l,className:"form-input",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"State"}),e.jsx("input",{type:"text",name:"address.state",value:n.address.state,onChange:l,className:"form-input",placeholder:"Enter state"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ZIP Code"}),e.jsx("input",{type:"text",name:"address.zipCode",value:n.address.zipCode,onChange:l,className:"form-input",placeholder:"Enter ZIP code"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-secondary-900 flex items-center gap-3 border-b border-secondary-200 pb-2",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:e.jsx(Pm,{className:"w-5 h-5 text-purple-600"})}),"Additional Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",value:n.status,onChange:l,className:"form-select",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"prospect",children:"Prospect"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{name:"notes",value:n.notes,onChange:l,rows:3,className:"form-textarea",placeholder:"Enter any additional notes about this customer"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-8 border-t border-secondary-200",children:[e.jsx("button",{type:"button",onClick:()=>s("/admin/dashboard/customers"),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(sT,{className:"w-4 h-4"}),"Create Customer"]})})]})]})})]})})}class YE{async getBusinessClients(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([n,i])=>{i!=null&&a.append(n,i.toString())}),(await M.get(`/business-clients?${a.toString()}`)).data.data}async getBusinessClient(t){return(await M.get(`/business-clients/${t}`)).data.data.businessClient}async createBusinessClient(t){return(await M.post("/business-clients",t)).data.data.businessClient}async updateBusinessClient(t,a){return(await M.put(`/business-clients/${t}`,a)).data.data.businessClient}async deleteBusinessClient(t){await M.delete(`/business-clients/${t}`)}async activateBusinessClient(t,a){return(await M.post(`/business-clients/${t}/activate`,a)).data.data.businessClient}async suspendBusinessClient(t){return(await M.post(`/business-clients/${t}/suspend`)).data.data.businessClient}async getBusinessClientStats(){return(await M.get("/business-clients/stats/overview")).data.data}getSubscriptionDaysRemaining(t){if(!t.subscription.endDate)return null;const a=new Date,n=new Date(t.subscription.endDate).getTime()-a.getTime();return Math.ceil(n/(1e3*60*60*24))}isSubscriptionExpired(t){return t.subscription.endDate?new Date>new Date(t.subscription.endDate):!1}isSubscriptionActive(t){return["active","trial"].includes(t.subscription.status)}getSubscriptionStatusColor(t){switch(t){case"active":return"text-green-600 bg-green-100";case"trial":return"text-blue-600 bg-blue-100";case"suspended":return"text-red-600 bg-red-100";case"cancelled":return"text-gray-600 bg-gray-100";case"expired":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}}getBusinessTypeLabel(t){return{auto_repair:"Auto Repair",tire_shop:"Tire Shop",oil_change:"Oil Change",brake_shop:"Brake Shop",general_repair:"General Repair",dealership:"Dealership",specialty_shop:"Specialty Shop",other:"Other"}[t]||t}getPlanLabel(t){return{basic:"Basic",professional:"Professional",enterprise:"Enterprise",custom:"Custom"}[t]||t}formatCurrency(t,a="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(t)}formatDate(t,a="MM/DD/YYYY"){const r=new Date(t),n=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getDate().toString().padStart(2,"0"),l=r.getFullYear();return a.replace("MM",n).replace("DD",i).replace("YYYY",l.toString())}}const Ts=new YE;function KE({isOpen:s,onClose:t,onSuccess:a}){var m,h,y,g,j;const[r,n]=b.useState(!1),[i,l]=b.useState({businessName:"",businessType:"auto_repair",contactPerson:{name:"",title:"",email:"",phone:""},address:{street:"",city:"",state:"",zipCode:"",country:"USA"},businessInfo:{yearsInBusiness:void 0,employeeCount:void 0,website:"",hours:"",services:[],specialties:[],certifications:[]},subscription:{plan:"basic",billingCycle:"monthly",monthlyFee:0,features:[]},branding:{primaryColor:"#3B82F6",secondaryColor:"#1F2937",companyName:"",tagline:"",customDomain:""},settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/DD/YYYY",timeFormat:"12h",notifications:{email:!0,sms:!0,push:!0}},status:"pending",source:"direct",notes:""}),o=(v,x)=>{l(f=>({...f,[v]:x}))},c=(v,x)=>{l(f=>({...f,contactPerson:{...f.contactPerson,[v]:x}}))},d=(v,x)=>{l(f=>({...f,address:{...f.address,[v]:x}}))},u=async()=>{var x,f,p,N,w;if(!i.businessName||!i.contactPerson.name||!i.contactPerson.email){P.error("Please fill in all required fields");return}const v={...i,businessInfo:{...i.businessInfo,website:((x=i.businessInfo)==null?void 0:x.website)||void 0,hours:((f=i.businessInfo)==null?void 0:f.hours)||void 0},branding:{...i.branding,companyName:((p=i.branding)==null?void 0:p.companyName)||void 0,tagline:((N=i.branding)==null?void 0:N.tagline)||void 0,customDomain:((w=i.branding)==null?void 0:w.customDomain)||void 0},notes:i.notes||void 0};try{n(!0),await Ts.createBusinessClient(v),P.success("Business client created successfully"),a(),t(),l({businessName:"",businessType:"auto_repair",contactPerson:{name:"",title:"",email:"",phone:""},address:{street:"",city:"",state:"",zipCode:"",country:"USA"},businessInfo:{yearsInBusiness:void 0,employeeCount:void 0,website:"",hours:"",services:[],specialties:[],certifications:[]},subscription:{plan:"basic",billingCycle:"monthly",monthlyFee:0,features:[]},branding:{primaryColor:"#3B82F6",secondaryColor:"#1F2937",companyName:"",tagline:"",customDomain:""},settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/DD/YYYY",timeFormat:"12h",notifications:{email:!0,sms:!0,push:!0}},status:"pending",source:"direct",notes:""})}catch(S){console.error("Error creating business client:",S),P.error("Failed to create business client")}finally{n(!1)}};return s?e.jsx(pe,{isOpen:s,onClose:t,title:"Add New Business Client",submitText:"Create Business Client",onSubmit:u,submitColor:"bg-blue-600",size:"xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(j1,{className:"w-4 h-4 mr-2"}),"Business Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Business Name *"}),e.jsx("input",{type:"text",value:i.businessName,onChange:v=>o("businessName",v.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Business Type"}),e.jsxs("select",{value:i.businessType,onChange:v=>o("businessType",v.target.value),className:"form-select",children:[e.jsx("option",{value:"auto_repair",children:"Auto Repair"}),e.jsx("option",{value:"tire_shop",children:"Tire Shop"}),e.jsx("option",{value:"oil_change",children:"Oil Change"}),e.jsx("option",{value:"brake_shop",children:"Brake Shop"}),e.jsx("option",{value:"general_repair",children:"General Repair"}),e.jsx("option",{value:"dealership",children:"Dealership"}),e.jsx("option",{value:"specialty_shop",children:"Specialty Shop"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Website"}),e.jsx("input",{type:"url",value:((m=i.businessInfo)==null?void 0:m.website)||"",onChange:v=>o("businessInfo",{...i.businessInfo,website:v.target.value}),className:"form-input",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Business Hours"}),e.jsx("input",{type:"text",value:((h=i.businessInfo)==null?void 0:h.hours)||"",onChange:v=>o("businessInfo",{...i.businessInfo,hours:v.target.value}),className:"form-input",placeholder:"Mon-Fri 8AM-6PM, Sat 9AM-4PM"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Contact Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Contact Name *"}),e.jsx("input",{type:"text",value:i.contactPerson.name,onChange:v=>c("name",v.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Title"}),e.jsx("input",{type:"text",value:i.contactPerson.title,onChange:v=>c("title",v.target.value),className:"form-input",placeholder:"Manager, Owner, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email *"}),e.jsx("input",{type:"email",value:i.contactPerson.email,onChange:v=>c("email",v.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone *"}),e.jsx("input",{type:"tel",value:i.contactPerson.phone,onChange:v=>c("phone",v.target.value),className:"form-input",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(pa,{className:"w-4 h-4 mr-2"}),"Address Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Street Address *"}),e.jsx("input",{type:"text",value:i.address.street,onChange:v=>d("street",v.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"City *"}),e.jsx("input",{type:"text",value:i.address.city,onChange:v=>d("city",v.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"State *"}),e.jsx("input",{type:"text",value:i.address.state,onChange:v=>d("state",v.target.value),className:"form-input",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ZIP Code *"}),e.jsx("input",{type:"text",value:i.address.zipCode,onChange:v=>d("zipCode",v.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Country"}),e.jsx("input",{type:"text",value:i.address.country,onChange:v=>d("country",v.target.value),className:"form-input"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Subscription Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Plan"}),e.jsxs("select",{value:(y=i.subscription)==null?void 0:y.plan,onChange:v=>o("subscription",{...i.subscription,plan:v.target.value}),className:"form-select",children:[e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"enterprise",children:"Enterprise"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Billing Cycle"}),e.jsxs("select",{value:(g=i.subscription)==null?void 0:g.billingCycle,onChange:v=>o("subscription",{...i.subscription,billingCycle:v.target.value}),className:"form-select",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"annually",children:"Annually"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Monthly Fee ($)"}),e.jsx("input",{type:"number",value:((j=i.subscription)==null?void 0:j.monthlyFee)||0,onChange:v=>o("subscription",{...i.subscription,monthlyFee:parseFloat(v.target.value)||0}),className:"form-input",min:"0",step:"0.01"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:v=>o("notes",v.target.value),rows:3,className:"form-textarea",placeholder:"Additional notes about this business client..."})]})]})}):null}function GE({isOpen:s,onClose:t,businessClient:a}){var r,n,i,l,o,c,d;return!s||!a?null:e.jsx(pe,{isOpen:s,onClose:t,title:"Business Client Details",icon:e.jsx(j1,{className:"w-5 h-5"}),children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Business Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.businessName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Contact Person"}),e.jsx("p",{className:"text-gray-900",children:(r=a.contactPerson)==null?void 0:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:(n=a.contactPerson)==null?void 0:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:(i=a.contactPerson)==null?void 0:i.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsxs("p",{className:"text-gray-900",children:[(l=a.address)==null?void 0:l.street,", ",(o=a.address)==null?void 0:o.city,", ",(c=a.address)==null?void 0:c.state," ",(d=a.address)==null?void 0:d.zipCode]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${a.status==="active"?"bg-green-100 text-green-800":a.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:a.status})]})]})})}function XE({isOpen:s,onClose:t,onSuccess:a,businessClient:r}){var h,y,g,j,v,x,f;const[n,i]=b.useState(!1),[l,o]=b.useState({businessName:"",businessType:"auto_repair",contactPerson:{name:"",title:"",email:"",phone:""},address:{street:"",city:"",state:"",zipCode:"",country:"USA"},businessInfo:{website:"",hours:""},subscription:{plan:"basic",billingCycle:"monthly",monthlyFee:0},branding:{primaryColor:"#3B82F6",secondaryColor:"#1F2937",companyName:"",tagline:""},settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/DD/YYYY",timeFormat:"12h"},status:"pending",notes:""});b.useEffect(()=>{var p,N,w,S,C,T,_,F,D,R,U,O,E,W,Z,I,$,A,G,z,ie,de;r&&o({businessName:r.businessName||"",businessType:r.businessType||"auto_repair",contactPerson:{name:((p=r.contactPerson)==null?void 0:p.name)||"",title:((N=r.contactPerson)==null?void 0:N.title)||"",email:((w=r.contactPerson)==null?void 0:w.email)||"",phone:((S=r.contactPerson)==null?void 0:S.phone)||""},address:{street:((C=r.address)==null?void 0:C.street)||"",city:((T=r.address)==null?void 0:T.city)||"",state:((_=r.address)==null?void 0:_.state)||"",zipCode:((F=r.address)==null?void 0:F.zipCode)||"",country:((D=r.address)==null?void 0:D.country)||"USA"},businessInfo:{website:((R=r.businessInfo)==null?void 0:R.website)||"",hours:((U=r.businessInfo)==null?void 0:U.hours)||""},subscription:{plan:((O=r.subscription)==null?void 0:O.plan)||"basic",billingCycle:((E=r.subscription)==null?void 0:E.billingCycle)||"monthly",monthlyFee:((W=r.subscription)==null?void 0:W.monthlyFee)||0},branding:{primaryColor:((Z=r.branding)==null?void 0:Z.primaryColor)||"#3B82F6",secondaryColor:((I=r.branding)==null?void 0:I.secondaryColor)||"#1F2937",companyName:(($=r.branding)==null?void 0:$.companyName)||"",tagline:((A=r.branding)==null?void 0:A.tagline)||""},settings:{timezone:((G=r.settings)==null?void 0:G.timezone)||"America/New_York",currency:((z=r.settings)==null?void 0:z.currency)||"USD",dateFormat:((ie=r.settings)==null?void 0:ie.dateFormat)||"MM/DD/YYYY",timeFormat:((de=r.settings)==null?void 0:de.timeFormat)||"12h"},status:r.status||"pending",notes:r.notes||""})},[r]);const c=(p,N)=>{o(w=>({...w,[p]:N}))},d=(p,N)=>{o(w=>({...w,contactPerson:{...w.contactPerson||{name:"",title:"",email:"",phone:""},[p]:N}}))},u=(p,N)=>{o(w=>({...w,address:{...w.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},[p]:N}}))},m=async()=>{if(!l.businessName||!l.contactPerson.name||!l.contactPerson.email){P.error("Please fill in all required fields");return}if(!(r!=null&&r._id)){P.error("Business client ID is missing");return}try{i(!0),await Ts.updateBusinessClient(r._id,l),P.success("Business client updated successfully"),a(),t()}catch(p){console.error("Error updating business client:",p),P.error("Failed to update business client")}finally{i(!1)}};return!s||!r?null:e.jsx(pe,{isOpen:s,onClose:t,title:"Edit Business Client",submitText:"Update Business Client",onSubmit:m,submitColor:"bg-blue-600",size:"lg",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Business Name *"}),e.jsx("input",{type:"text",value:l.businessName,onChange:p=>c("businessName",p.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Contact Name *"}),e.jsx("input",{type:"text",value:((h=l.contactPerson)==null?void 0:h.name)||"",onChange:p=>d("name",p.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email *"}),e.jsx("input",{type:"email",value:((y=l.contactPerson)==null?void 0:y.email)||"",onChange:p=>d("email",p.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone *"}),e.jsx("input",{type:"tel",value:((g=l.contactPerson)==null?void 0:g.phone)||"",onChange:p=>d("phone",p.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Street Address *"}),e.jsx("input",{type:"text",value:((j=l.address)==null?void 0:j.street)||"",onChange:p=>u("street",p.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"City *"}),e.jsx("input",{type:"text",value:((v=l.address)==null?void 0:v.city)||"",onChange:p=>u("city",p.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"State *"}),e.jsx("input",{type:"text",value:((x=l.address)==null?void 0:x.state)||"",onChange:p=>u("state",p.target.value),className:"form-input",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ZIP Code *"}),e.jsx("input",{type:"text",value:((f=l.address)==null?void 0:f.zipCode)||"",onChange:p=>u("zipCode",p.target.value),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:l.status,onChange:p=>c("status",p.target.value),className:"form-select",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})]})]})})}function QE(){const[s,t]=b.useState([]),[a,r]=b.useState({totalClients:0,activeClients:0,trialClients:0,suspendedClients:0,newThisMonth:0,expiringThisMonth:0,monthlyRecurringRevenue:0}),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState({page:1,limit:10,sortBy:"createdAt",sortOrder:"desc"}),[u,m]=b.useState({currentPage:1,totalPages:1,totalItems:0,hasNextPage:!1,hasPrevPage:!1,limit:10}),[h,y]=b.useState({isOpen:!1,title:"",message:"",type:"danger",onConfirm:()=>{}}),[g,j]=b.useState(!1),[v,x]=b.useState(!1),[f,p]=b.useState(!1),[N,w]=b.useState(null);b.useEffect(()=>{S(),C()},[c]);const S=async()=>{try{i(!0),o(null);const A=await Ts.getBusinessClients(c);t(A.businessClients),m(A.pagination)}catch(A){console.error("Error loading business clients:",A),o("Failed to load business clients"),P.error("Failed to load business clients")}finally{i(!1)}},C=async()=>{try{const A=await Ts.getBusinessClientStats();r(A)}catch(A){console.error("Error loading stats:",A)}},T=(A,G)=>{d(z=>({...z,[A]:G,page:1}))},_=A=>{d(G=>({...G,page:A}))},F=async A=>{try{await Ts.activateBusinessClient(A,{}),P.success("Business client activated successfully"),S(),C()}catch(G){console.error("Error activating business client:",G),P.error("Failed to activate business client")}},D=async A=>{try{await Ts.suspendBusinessClient(A),P.success("Business client suspended successfully"),S(),C()}catch(G){console.error("Error suspending business client:",G),P.error("Failed to suspend business client")}},R=async A=>{try{await Ts.deleteBusinessClient(A),P.success("Business client deleted successfully"),S(),C()}catch(G){console.error("Error deleting business client:",G),P.error("Failed to delete business client")}},U=A=>{const G=s.find(z=>z._id===A);G&&(w(G),x(!0))},O=A=>{const G=s.find(z=>z._id===A);G&&(w(G),p(!0))},E=()=>{j(!0)},W=(A,G,z,ie)=>{y({isOpen:!0,title:A,message:G,type:z,onConfirm:ie})},Z=A=>{switch(A){case"active":return e.jsx(In,{className:"w-5 h-5 text-success-500"});case"pending":return e.jsx($t,{className:"w-5 h-5 text-warning-500"});case"suspended":return e.jsx(ju,{className:"w-5 h-5 text-error-500"});case"inactive":return e.jsx(Ct,{className:"w-5 h-5 text-secondary-500"});default:return e.jsx(Ct,{className:"w-5 h-5 text-secondary-500"})}},I=A=>{switch(A){case"active":return"status-success";case"pending":return"status-warning";case"suspended":return"status-error";case"inactive":return"status-secondary";default:return"status-secondary"}},$=A=>Ts.getSubscriptionStatusColor(A);return n&&s.length===0?e.jsx("div",{className:"min-h-screen bg-secondary-50 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary-600 border-2 border-primary-600 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-secondary-600",children:"Loading business clients..."})]})}):e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Business Clients"}),e.jsx("p",{className:"text-secondary-600",children:"Manage business partnerships and corporate accounts"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>j(!0),className:"btn-primary",children:[e.jsx(_s,{className:"w-5 h-5 mr-2"}),"Add Business Client"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Clients"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600",children:a.totalClients})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(nv,{className:"w-6 h-6 text-primary-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Active Clients"}),e.jsx("p",{className:"text-3xl font-bold text-success-600",children:a.activeClients})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(In,{className:"w-6 h-6 text-success-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Trial Clients"}),e.jsx("p",{className:"text-3xl font-bold text-warning-600",children:a.trialClients})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx($t,{className:"w-6 h-6 text-warning-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Monthly Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:Ts.formatCurrency(a.monthlyRecurringRevenue)})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(Do,{className:"w-6 h-6 text-info-600"})})]})})]}),l&&e.jsx("div",{className:"mb-6 bg-error-50 border border-error-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(Ct,{className:"w-5 h-5 text-error-400 mt-0.5"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-error-800",children:l}),e.jsx("button",{onClick:()=>{o(null),S()},className:"mt-2 text-sm text-error-600 hover:text-error-500 underline",children:"Try again"})]})]})}),e.jsxs("div",{className:"card mb-6",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search business clients...",value:c.search||"",onChange:A=>T("search",A.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:c.status||"",onChange:A=>T("status",A.target.value),className:"select-field",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("select",{value:c.businessType||"",onChange:A=>T("businessType",A.target.value),className:"select-field",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"auto_repair",children:"Auto Repair"}),e.jsx("option",{value:"tire_shop",children:"Tire Shop"}),e.jsx("option",{value:"oil_change",children:"Oil Change"}),e.jsx("option",{value:"brake_shop",children:"Brake Shop"}),e.jsx("option",{value:"general_repair",children:"General Repair"}),e.jsx("option",{value:"dealership",children:"Dealership"}),e.jsx("option",{value:"specialty_shop",children:"Specialty Shop"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsxs("select",{value:c.subscriptionStatus||"",onChange:A=>T("subscriptionStatus",A.target.value),className:"select-field",children:[e.jsx("option",{value:"",children:"All Subscriptions"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"trial",children:"Trial"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"expired",children:"Expired"})]})]}),e.jsxs("button",{onClick:E,className:"btn-primary",children:[e.jsx(_s,{className:"h-5 w-5 mr-2"}),"Add Business Client"]})]})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Business"}),e.jsx("th",{className:"table-header-cell",children:"Contact"}),e.jsx("th",{className:"table-header-cell",children:"Status"}),e.jsx("th",{className:"table-header-cell",children:"Subscription"}),e.jsx("th",{className:"table-header-cell",children:"Location"}),e.jsx("th",{className:"table-header-cell",children:"Created"}),e.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"table-body",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"table-cell text-center text-secondary-500",children:n?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"loading-spinner mr-2"}),"Loading business clients..."]}):e.jsxs("div",{children:[e.jsx(nv,{className:"w-12 h-12 text-secondary-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-secondary-900 mb-2",children:"No business clients found"}),e.jsx("p",{className:"text-secondary-500 mb-4",children:"Get started by creating your first business client."}),e.jsxs("button",{onClick:E,className:"btn-primary",children:[e.jsx(_s,{className:"h-5 w-5 mr-2"}),"Add Business Client"]})]})})}):s.map(A=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:A.businessName}),e.jsx("div",{className:"text-sm text-secondary-500",children:Ts.getBusinessTypeLabel(A.businessType)})]})}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:A.contactPerson.name}),e.jsx("div",{className:"text-sm text-secondary-500",children:A.contactPerson.email}),e.jsx("div",{className:"text-sm text-secondary-500",children:A.contactPerson.phone})]})}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[Z(A.status),e.jsx("span",{className:`ml-2 status-badge ${I(A.status)}`,children:A.status})]})}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:Ts.getPlanLabel(A.subscription.plan)}),e.jsx("div",{className:"text-sm text-secondary-500",children:Ts.formatCurrency(A.subscription.monthlyFee)}),e.jsx("span",{className:`status-badge ${$(A.subscription.status)}`,children:A.subscription.status})]})}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-secondary-900",children:[e.jsxs("div",{children:[A.address.city,", ",A.address.state]}),e.jsx("div",{className:"text-secondary-500",children:A.address.zipCode})]})}),e.jsx("td",{className:"table-cell whitespace-nowrap text-sm text-secondary-500",children:Ts.formatDate(A.createdAt)}),e.jsx("td",{className:"table-cell whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>U(A._id),className:"text-primary-600 hover:text-primary-900 transition-colors",title:"View details",children:e.jsx(Jr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>O(A._id),className:"text-secondary-600 hover:text-secondary-900 transition-colors",title:"Edit client",children:e.jsx(nr,{className:"w-4 h-4"})}),A.subscription.status==="trial"&&e.jsx("button",{onClick:()=>W("Activate Client",`Are you sure you want to activate ${A.businessName}?`,"success",()=>F(A._id)),className:"text-success-600 hover:text-success-900 transition-colors",title:"Activate client",children:e.jsx(In,{className:"w-4 h-4"})}),A.subscription.status==="active"&&e.jsx("button",{onClick:()=>W("Suspend Client",`Are you sure you want to suspend ${A.businessName}?`,"warning",()=>D(A._id)),className:"text-warning-600 hover:text-warning-900 transition-colors",title:"Suspend client",children:e.jsx(ju,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>W("Delete Client",`Are you sure you want to delete ${A.businessName}? This action cannot be undone.`,"danger",()=>R(A._id)),className:"text-error-600 hover:text-error-900 transition-colors",title:"Delete client",children:e.jsx(Ls,{className:"w-4 h-4"})})]})})]},A._id))})]})}),u.totalPages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-secondary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-secondary-700",children:["Showing ",(u.currentPage-1)*u.limit+1," to"," ",Math.min(u.currentPage*u.limit,u.totalItems)," of"," ",u.totalItems," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>_(u.currentPage-1),disabled:!u.hasPrevPage,className:"px-3 py-1 text-sm border border-secondary-300 rounded-md hover:bg-secondary-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1 text-sm text-secondary-700",children:["Page ",u.currentPage," of ",u.totalPages]}),e.jsx("button",{onClick:()=>_(u.currentPage+1),disabled:!u.hasNextPage,className:"px-3 py-1 text-sm border border-secondary-300 rounded-md hover:bg-secondary-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})]}),e.jsx(Im,{isOpen:h.isOpen,title:h.title,message:h.message,type:h.type,onConfirm:()=>{h.onConfirm(),y(A=>({...A,isOpen:!1}))},onCancel:()=>y(A=>({...A,isOpen:!1}))}),e.jsx(KE,{isOpen:g,onClose:()=>j(!1),onSuccess:()=>{S(),C()}}),e.jsx(GE,{isOpen:v,onClose:()=>{x(!1),w(null)},businessClient:N}),e.jsx(XE,{isOpen:f,onClose:()=>{p(!1),w(null)},onSuccess:()=>{p(!1),w(null),S(),C()},businessClient:N})]})}const JE=({isOpen:s,onClose:t,onSubmit:a})=>{const[r,n]=b.useState({name:"",description:"",laborRate:0,estimatedDuration:0,category:"",isActive:!0}),[i,l]=b.useState(!1),[o,c]=b.useState(null),d=async()=>{try{l(!0),c(null),await a(r),t(),n({name:"",description:"",laborRate:0,estimatedDuration:0,category:"",isActive:!0})}catch(h){c(h instanceof Error?h.message:"Failed to create service")}finally{l(!1)}},u=h=>{const{name:y,value:g,type:j}=h.target;n(v=>({...v,[y]:j==="number"?parseFloat(g)||0:g}))},m=h=>{n(y=>({...y,[h.target.name]:h.target.checked}))};return e.jsx(pe,{isOpen:s,onClose:t,title:"Add New Service",submitText:"Create Service",onSubmit:d,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-8 space-y-8",children:[o&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:o}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Service Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:u,required:!0,className:"form-input",placeholder:"Enter service name"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"category",className:"form-label",children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:r.category,onChange:u,className:"form-select",children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"repair",children:"Repair"}),e.jsx("option",{value:"diagnostic",children:"Diagnostic"}),e.jsx("option",{value:"inspection",children:"Inspection"}),e.jsx("option",{value:"emergency",children:"Emergency"}),e.jsx("option",{value:"preventive",children:"Preventive"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:u,rows:4,className:"form-textarea",placeholder:"Enter service description"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"laborRate",className:"form-label",children:"Labor Rate ($/hr) *"}),e.jsx("input",{type:"number",id:"laborRate",name:"laborRate",value:r.laborRate,onChange:u,required:!0,min:"0",step:"0.01",className:"form-input",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"estimatedDuration",className:"form-label",children:"Estimated Duration (hours)"}),e.jsx("input",{type:"number",id:"estimatedDuration",name:"estimatedDuration",value:r.estimatedDuration,onChange:u,min:"0",step:"0.5",className:"form-input",placeholder:"2.0"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:r.isActive,onChange:m,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-secondary-700",children:"Service is active and available for booking"})]})]})})},ZE=({service:s,isOpen:t,onClose:a,onSubmit:r})=>{const[n,i]=b.useState({name:"",description:"",laborRate:0,estimatedDuration:0,category:"",isActive:!0}),[l,o]=b.useState(!1),[c,d]=b.useState(null);b.useEffect(()=>{s&&i({name:s.name||"",description:s.description||"",laborRate:s.laborRate||0,estimatedDuration:s.estimatedDuration||0,category:s.category||"",isActive:s.isActive!==void 0?s.isActive:!0})},[s]);const u=async()=>{if(s)try{o(!0),d(null),await r(s._id,n),a()}catch(y){d(y instanceof Error?y.message:"Failed to update service")}finally{o(!1)}},m=y=>{const{name:g,value:j,type:v}=y.target;i(x=>({...x,[g]:v==="number"?parseFloat(j)||0:j}))},h=y=>{i(g=>({...g,[y.target.name]:y.target.checked}))};return s?e.jsx(pe,{isOpen:t,onClose:a,title:"Edit Service",submitText:"Update Service",onSubmit:u,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-8 space-y-8",children:[c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:c}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Service Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:m,required:!0,className:"form-input",placeholder:"Enter service name"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"category",className:"form-label",children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:n.category,onChange:m,className:"form-select",children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"repair",children:"Repair"}),e.jsx("option",{value:"diagnostic",children:"Diagnostic"}),e.jsx("option",{value:"inspection",children:"Inspection"}),e.jsx("option",{value:"emergency",children:"Emergency"}),e.jsx("option",{value:"preventive",children:"Preventive"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:m,rows:4,className:"form-textarea",placeholder:"Enter service description"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"laborRate",className:"form-label",children:"Labor Rate ($/hr) *"}),e.jsx("input",{type:"number",id:"laborRate",name:"laborRate",value:n.laborRate,onChange:m,required:!0,min:"0",step:"0.01",className:"form-input",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"estimatedDuration",className:"form-label",children:"Estimated Duration (hours)"}),e.jsx("input",{type:"number",id:"estimatedDuration",name:"estimatedDuration",value:n.estimatedDuration,onChange:m,min:"0",step:"0.5",className:"form-input",placeholder:"2.0"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:n.isActive,onChange:h,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-secondary-700",children:"Service is active and available for booking"})]})]})}):null},e8=({service:s,isOpen:t,onClose:a,onDelete:r})=>{const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{if(s)try{i(!0),o(null),await r(s._id),a()}catch(d){o(d instanceof Error?d.message:"Failed to delete service")}finally{i(!1)}};return s?e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Service",submitText:"Delete Service",onSubmit:c,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-6 space-y-6",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:l}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-7 h-7 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900 text-lg",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600 mt-1",children:"This action cannot be undone. This will permanently delete the service."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-6 rounded-lg border border-secondary-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Service Name:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.name||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Category:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.category||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Labor Rate:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["$",s.laborRate?s.laborRate.toFixed(2):"0.00","/hr"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.isActive?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-6 py-4 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this service will also affect:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Service catalog"}),e.jsx("li",{children:"Work orders using this service"}),e.jsx("li",{children:"Customer bookings"}),e.jsx("li",{children:"Pricing calculations"})]})]})]})}):null},t8=({isOpen:s,onClose:t,onSubmit:a})=>{const[r,n]=b.useState({workOrderNumber:"",customerName:"",vehicleInfo:"",description:"",estimatedHours:0,priority:"medium",status:"pending",assignedTechnician:"",dueDate:""}),[i,l]=b.useState(!1),[o,c]=b.useState(null),d=async()=>{try{l(!0),c(null),await a(r),t(),n({workOrderNumber:"",customerName:"",vehicleInfo:"",description:"",estimatedHours:0,priority:"medium",status:"pending",assignedTechnician:"",dueDate:""})}catch(m){c(m instanceof Error?m.message:"Failed to create work order")}finally{l(!1)}},u=m=>{const{name:h,value:y,type:g}=m.target;n(j=>({...j,[h]:g==="number"?parseFloat(y)||0:y}))};return e.jsx(pe,{isOpen:s,onClose:t,title:"Add New Work Order",submitText:i?"Creating...":"Create Work Order",onSubmit:d,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-6 space-y-6",children:[o&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:o}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"workOrderNumber",className:"form-label",children:"Work Order Number *"}),e.jsx("input",{type:"text",id:"workOrderNumber",name:"workOrderNumber",value:r.workOrderNumber,onChange:u,required:!0,className:"form-input",placeholder:"Enter work order number"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customerName",className:"form-label",children:"Customer Name *"}),e.jsx("input",{type:"text",id:"customerName",name:"customerName",value:r.customerName,onChange:u,required:!0,className:"form-input",placeholder:"Enter customer name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vehicleInfo",className:"form-label",children:"Vehicle Information *"}),e.jsx("input",{type:"text",id:"vehicleInfo",name:"vehicleInfo",value:r.vehicleInfo,onChange:u,required:!0,className:"form-input",placeholder:"Enter vehicle make, model, year"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Work Description *"}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:u,rows:3,className:"form-textarea",placeholder:"Describe the work to be performed",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"estimatedHours",className:"form-label",children:"Estimated Hours"}),e.jsx("input",{type:"number",id:"estimatedHours",name:"estimatedHours",value:r.estimatedHours,onChange:u,min:"0",step:"0.5",className:"form-input",placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"form-label",children:"Priority"}),e.jsxs("select",{id:"priority",name:"priority",value:r.priority,onChange:u,className:"form-select",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),e.jsxs("select",{id:"status",name:"status",value:r.status,onChange:u,className:"form-select",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"assignedTechnician",className:"form-label",children:"Assigned Technician"}),e.jsx("input",{type:"text",id:"assignedTechnician",name:"assignedTechnician",value:r.assignedTechnician,onChange:u,className:"form-input",placeholder:"Enter technician name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",className:"form-label",children:"Due Date"}),e.jsx("input",{type:"date",id:"dueDate",name:"dueDate",value:r.dueDate,onChange:u,className:"form-input"})]})]})]})})};function s8({workOrder:s,onClose:t,onSuccess:a}){var j;const r=Ue(),{catalog:n,technicians:i}=je(v=>v.services);je(v=>v.customers);const[l,o]=b.useState(!1),[c,d]=b.useState({services:[],technicianId:"",priority:"medium",estimatedStartDate:"",estimatedCompletionDate:"",actualStartDate:"",actualCompletionDate:"",notes:"",customerNotes:""});b.useEffect(()=>{var v;s&&d({services:s.services.map(x=>({service:x.service._id,description:x.description||"",laborHours:x.laborHours,laborRate:x.laborRate,parts:x.parts||[],totalCost:x.totalCost})),technicianId:((v=s.technician)==null?void 0:v._id)||"",priority:s.priority,estimatedStartDate:s.estimatedStartDate||"",estimatedCompletionDate:s.estimatedCompletionDate||"",actualStartDate:s.actualStartDate||"",actualCompletionDate:s.actualCompletionDate||"",notes:s.notes||"",customerNotes:s.customerNotes||""})},[s]);const u=(v,x)=>{d(f=>({...f,[v]:x}))},m=(v,x,f)=>{d(p=>{var N;return{...p,services:((N=p.services)==null?void 0:N.map((w,S)=>S===v?{...w,[x]:f}:w))||[]}})},h=()=>{d(v=>({...v,services:[...v.services||[],{service:"",description:"",laborHours:1,laborRate:120,parts:[],totalCost:0}]}))},y=v=>{d(x=>{var f;return{...x,services:((f=x.services)==null?void 0:f.filter((p,N)=>N!==v))||[]}})},g=async()=>{if(!(s!=null&&s._id)){P.error("Work order ID is missing");return}if(!c.services||c.services.length===0){P.error("Please add at least one service");return}o(!0);try{await r(x2({id:s._id,data:c})).unwrap(),P.success("Work order updated successfully"),a(),t()}catch(v){console.error("Failed to update work order:",v),P.error(v.message||"Failed to update work order")}finally{o(!1)}};return s?e.jsx(pe,{isOpen:!0,title:"Edit Work Order",icon:e.jsx(Tt,{className:"w-5 h-5"}),onClose:t,onSubmit:g,submitText:l?"Updating...":"Update Work Order",submitColor:"bg-gradient-to-r from-blue-600 to-indigo-600",children:e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Services *"}),e.jsxs("div",{className:"space-y-4",children:[(j=c.services)==null?void 0:j.map((v,x)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Service ",x+1]}),e.jsx("button",{type:"button",onClick:()=>y(x),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(rt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Service Type"}),e.jsxs("select",{value:v.service,onChange:f=>m(x,"service",f.target.value),className:"form-select text-sm",children:[e.jsx("option",{value:"",children:"Select Service"}),n==null?void 0:n.map(f=>e.jsx("option",{value:f._id,children:f.name},f._id))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Labor Hours"}),e.jsx("input",{type:"number",value:v.laborHours,onChange:f=>m(x,"laborHours",parseFloat(f.target.value)),className:"form-input text-sm",min:"0.5",step:"0.5"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Labor Rate ($/hr)"}),e.jsx("input",{type:"number",value:v.laborRate,onChange:f=>m(x,"laborRate",parseFloat(f.target.value)),className:"form-input text-sm",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Total Cost"}),e.jsx("input",{type:"number",value:v.totalCost,onChange:f=>m(x,"totalCost",parseFloat(f.target.value)),className:"form-input text-sm",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Description"}),e.jsx("textarea",{value:v.description,onChange:f=>m(x,"description",f.target.value),className:"form-textarea text-sm",rows:2,placeholder:"Service description..."})]})]},x)),e.jsxs("button",{type:"button",onClick:h,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-gray-400 hover:text-gray-800 hover:bg-gray-50 transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Add Service"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Technician"}),e.jsxs("select",{value:c.technicianId,onChange:v=>u("technicianId",v.target.value),className:"form-select",children:[e.jsx("option",{value:"",children:"Select Technician"}),i==null?void 0:i.filter(v=>v.isActive).map(v=>e.jsxs("option",{value:v._id,children:[v.name," - $",v.hourlyRate,"/hr"]},v._id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{value:c.priority,onChange:v=>u("priority",v.target.value),className:"form-select",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Estimated Start Date"}),e.jsx("input",{type:"datetime-local",value:c.estimatedStartDate,onChange:v=>u("estimatedStartDate",v.target.value),className:"form-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Estimated Completion Date"}),e.jsx("input",{type:"datetime-local",value:c.estimatedCompletionDate,onChange:v=>u("estimatedCompletionDate",v.target.value),className:"form-input"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:v=>u("notes",v.target.value),className:"form-textarea",rows:3,placeholder:"Internal notes about the work order..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:"Customer Notes"}),e.jsx("textarea",{value:c.customerNotes,onChange:v=>u("customerNotes",v.target.value),className:"form-textarea",rows:3,placeholder:"Notes visible to the customer..."})]})]})}):null}const a8=({workOrder:s,isOpen:t,onClose:a,onDelete:r})=>{var d;const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{if(s)try{i(!0),o(null),await r(s._id),a()}catch(u){o(u instanceof Error?u.message:"Failed to delete work order")}finally{i(!1)}};return s?e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Work Order",submitText:"Delete Work Order",onSubmit:c,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-6 space-y-6",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:l}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-7 h-7 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900 text-lg",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600 mt-1",children:"This action cannot be undone. This will permanently delete the work order."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-6 rounded-lg border border-secondary-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Work Order Number:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["#",s.workOrderNumber||"N/A"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Customer:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:((d=s.customer)==null?void 0:d.name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Vehicle:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.vehicle?`${s.vehicle.make||"N/A"} ${s.vehicle.model||"N/A"} (${s.vehicle.year||"N/A"})`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.status||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Priority:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.priority||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Total Cost:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["$",s.totalCost?s.totalCost.toFixed(2):"0.00"]})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-6 py-4 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this work order will also affect:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Customer service history"}),e.jsx("li",{children:"Technician assignments"}),e.jsx("li",{children:"Parts inventory"}),e.jsx("li",{children:"Financial records"}),e.jsx("li",{children:"Service scheduling"})]})]})]})}):null},r8=({isOpen:s,onClose:t,onSubmit:a})=>{const[r,n]=b.useState({firstName:"",lastName:"",email:"",phone:"",specialization:"",hourlyRate:0,isActive:!0}),[i,l]=b.useState(!1),[o,c]=b.useState(null),d=async()=>{try{l(!0),c(null),await a(r),t(),n({firstName:"",lastName:"",email:"",phone:"",specialization:"",hourlyRate:0,isActive:!0})}catch(h){c(h instanceof Error?h.message:"Failed to create technician")}finally{l(!1)}},u=h=>{const{name:y,value:g,type:j}=h.target;n(v=>({...v,[y]:j==="number"?parseFloat(g)||0:g}))},m=h=>{n(y=>({...y,[h.target.name]:h.target.checked}))};return e.jsx(pe,{isOpen:s,onClose:t,title:"Add New Technician",submitText:i?"Creating...":"Create Technician",onSubmit:d,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-6 space-y-6",children:[o&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:o}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"form-label",children:"First Name *"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:u,required:!0,className:"form-input",placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"form-label",children:"Last Name *"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:u,required:!0,className:"form-input",placeholder:"Enter last name"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email *"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Enter email address",value:r.email,onChange:u,required:!0,className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"form-label",children:"Phone *"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:u,required:!0,className:"form-input",placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"specialization",className:"form-label",children:"Specialization"}),e.jsxs("select",{id:"specialization",name:"specialization",value:r.specialization,onChange:u,className:"form-select",children:[e.jsx("option",{value:"",children:"Select specialization"}),e.jsx("option",{value:"engine",children:"Engine"}),e.jsx("option",{value:"transmission",children:"Transmission"}),e.jsx("option",{value:"electrical",children:"Electrical"}),e.jsx("option",{value:"brakes",children:"Brakes"}),e.jsx("option",{value:"suspension",children:"Suspension"}),e.jsx("option",{value:"diagnostic",children:"Diagnostic"}),e.jsx("option",{value:"general",children:"General"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"hourlyRate",className:"form-label",children:"Hourly Rate ($/hr) *"}),e.jsx("input",{type:"number",id:"hourlyRate",name:"hourlyRate",value:r.hourlyRate,onChange:u,required:!0,min:"0",step:"0.01",className:"form-input",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:r.isActive,onChange:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-secondary-700",children:"Technician is active and available for work"})]})]})})},n8=({technician:s,isOpen:t,onClose:a,onSubmit:r})=>{const[n,i]=b.useState({name:"",email:"",phone:"",specialization:[],hourlyRate:0,isActive:!0}),[l,o]=b.useState(!1),[c,d]=b.useState(null);b.useEffect(()=>{s&&i({name:s.name||"",email:s.email||"",phone:s.phone||"",specialization:s.specialization||[],hourlyRate:s.hourlyRate||0,isActive:s.isActive!==void 0?s.isActive:!0})},[s]);const u=async()=>{if(s)try{o(!0),d(null),await r(s._id,n),a()}catch(g){d(g instanceof Error?g.message:"Failed to update technician")}finally{o(!1)}},m=g=>{const{name:j,value:v,type:x}=g.target;i(f=>({...f,[j]:x==="number"?parseFloat(v)||0:v}))},h=g=>{const j=g.target.value;i(v=>({...v,specialization:j?j.split(",").map(x=>x.trim()).filter(x=>x.length>0):[]}))},y=g=>{i(j=>({...j,[g.target.name]:g.target.checked}))};return s?e.jsx(pe,{isOpen:t,onClose:a,title:"Edit Technician",submitText:"Update Technician",onSubmit:u,submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-8 space-y-8",children:[c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:c}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:m,required:!0,className:"form-input",placeholder:"Enter name"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:m,required:!0,className:"form-input",placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"phone",className:"form-label",children:"Phone *"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:m,required:!0,className:"form-input",placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"specialization",className:"form-label",children:"Specialization"}),e.jsx("input",{type:"text",id:"specialization",name:"specialization",value:n.specialization.join(", "),onChange:h,className:"form-input",placeholder:"Enter specializations (comma-separated)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"hourlyRate",className:"form-label",children:"Hourly Rate ($/hr) *"}),e.jsx("input",{type:"number",id:"hourlyRate",name:"hourlyRate",value:n.hourlyRate,onChange:m,required:!0,min:"0",step:"0.01",className:"form-input",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"isActive",className:"form-label",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:n.isActive,onChange:y,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-secondary-700",children:"Technician is active and available for work"})]})]})]})]})}):null},i8=({technician:s,isOpen:t,onClose:a,onDelete:r})=>{const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{if(s)try{i(!0),o(null),await r(s._id),a()}catch(d){o(d instanceof Error?d.message:"Failed to delete technician")}finally{i(!1)}};return s?e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Technician",submitText:"Delete Technician",onSubmit:c,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-6 space-y-6",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:l}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-7 h-7 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900 text-lg",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600 mt-1",children:"This action cannot be undone. This will permanently delete the technician."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-6 rounded-lg border border-secondary-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Name:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.name||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.email||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.phone||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Specialization:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.specialization&&s.specialization.length>0?s.specialization.join(", "):"None specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Hourly Rate:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["$",s.hourlyRate?s.hourlyRate.toFixed(2):"0.00","/hr"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.isActive?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-6 py-4 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this technician will also affect:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Work order assignments"}),e.jsx("li",{children:"Service scheduling"}),e.jsx("li",{children:"Performance tracking"}),e.jsx("li",{children:"Team management"})]})]})]})}):null};function l8(){var ds;const[s,t]=b.useState("catalog"),[a,r]=b.useState(""),[n,i]=b.useState("all"),[l,o]=b.useState("all");b.useState(!1);const[c,d]=b.useState("grid"),[u,m]=b.useState(!1),[h,y]=b.useState(!1),[g,j]=b.useState(!1),[v,x]=b.useState(null),[f,p]=b.useState(!1),[N,w]=b.useState(!1),[S,C]=b.useState(!1),[T,_]=b.useState(null),[F,D]=b.useState(!1),[R,U]=b.useState(!1),[O,E]=b.useState(!1),[W,Z]=b.useState(null),{catalog:I,workOrders:$,technicians:A,catalogLoading:G,workOrdersLoading:z,techniciansLoading:ie,catalogStats:de,workOrderStats:xe,technicianStats:he,categories:Pe,specializations:ee,catalogError:Ce,workOrdersError:V,techniciansError:Se}=je(q=>q.services),k=Ue();b.useEffect(()=>{console.log("Loading services data..."),k(Br({})),k(Ur({})),k(Fn({})),k(xd()),k(pd({})),k(fd()),k(p2()),k(f2())},[k]);const H=(Array.isArray(I)?I:[]).filter(q=>{const De=(q.name||"").toLowerCase().includes(a.toLowerCase())||(q.description||"").toLowerCase().includes(a.toLowerCase()),us=n==="all"||q.category===n;return De&&us&&q.isActive}),Q=(Array.isArray($)?$:[]).filter(q=>l==="all"||q.status===l),J=(()=>{if(Array.isArray(Pe)&&Pe.length>0)return Pe;if(Array.isArray(I)&&I.length>0){const q=new Set(I.map(De=>De.category).filter(Boolean));return Array.from(q)}return[]})(),L=Array.isArray(J)?J:[],se=()=>{m(!0)},K=q=>{x(q),y(!0)},ae=q=>{x(q),j(!0)},ce=()=>{k(Br({})),k(xd())},te=async q=>{try{m(!1),ce()}catch(De){throw console.error("Error creating service:",De),De}},ve=async(q,De)=>{try{y(!1),x(null),ce()}catch(us){throw console.error("Error updating service:",us),us}},ge=async q=>{try{j(!1),x(null),ce()}catch(De){throw console.error("Error deleting service:",De),De}},xt=async q=>{try{p(!1),nl()}catch(De){throw console.error("Error creating work order:",De),De}},cs=async q=>{try{C(!1),_(null),nl()}catch(De){throw console.error("Error deleting work order:",De),De}},cr=async q=>{try{D(!1),il()}catch(De){throw console.error("Error creating technician:",De),De}},Wm=async(q,De)=>{try{U(!1),Z(null),il()}catch(us){throw console.error("Error updating technician:",us),us}},qm=async q=>{try{E(!1),Z(null),il()}catch(De){throw console.error("Error deleting technician:",De),De}},rl=()=>{p(!0)},Ym=q=>{_(q),w(!0)},Km=q=>{_(q),C(!0)},nl=()=>{k(Ur({})),k(pd({}))},Gm=()=>{D(!0)},il=()=>{k(Fn({})),k(fd())},Xm=Array.isArray(I)?I.length:0,Qm=Array.isArray(I)?I.filter(q=>q.isActive).length:0,Jm=Array.isArray($)?$.length:0,Zm=Array.isArray($)?$.filter(q=>q.status==="pending").length:0,B=Array.isArray(A)?A.length:0,Re=Array.isArray(A)?A.filter(q=>q.isActive).length:0,Le=q=>{switch(q==null?void 0:q.toLowerCase()){case"active":case"completed":return"status-active";case"pending":case"scheduled":return"status-pending";case"in-progress":return"status-in-progress";case"cancelled":case"inactive":return"status-inactive";default:return"status-pending"}},tt=()=>{k(Br({})),k(Ur({})),k(Fn({})),k(xd()),k(pd({})),k(fd())};return e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Service Management"}),e.jsx("p",{className:"text-secondary-600",children:"Manage services, work orders, and technicians"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:tt,className:"btn-secondary",children:[e.jsx(Ea,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:()=>{s==="catalog"?se():s==="workorders"?rl():s==="technicians"&&D(!0)},className:"btn-primary",children:[e.jsx(Ze,{className:"w-5 h-5"}),s==="catalog"?"Add Service":s==="workorders"?"Add Work Order":"Add Technician"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Services"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600",children:Xm}),e.jsxs("p",{className:"text-sm text-secondary-500",children:["Active: ",Qm]})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(it,{className:"w-6 h-6 text-primary-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Work Orders"}),e.jsx("p",{className:"text-3xl font-bold text-success-600",children:Jm}),e.jsxs("p",{className:"text-sm text-secondary-500",children:["Pending: ",Zm]})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(Cn,{className:"w-6 h-6 text-success-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Technicians"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:B}),e.jsxs("p",{className:"text-sm text-secondary-500",children:["Active: ",Re]})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(nt,{className:"w-6 h-6 text-info-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-warning-600",children:["$",((ds=de==null?void 0:de.totalRevenue)==null?void 0:ds.toLocaleString())||"0"]}),e.jsxs("p",{className:"text-sm text-secondary-500",children:["+",(de==null?void 0:de.monthlyGrowth)||0,"% this month"]})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx(Ve,{className:"w-6 h-6 text-warning-600"})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"w-4 h-4 text-primary-600"}),e.jsx("h3",{className:"text-base font-semibold text-secondary-900",children:"Service Management"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex bg-secondary-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>d("grid"),className:`p-1.5 rounded-md transition-all duration-200 ${c==="grid"?"bg-primary-600 text-white":"text-secondary-600 hover:text-secondary-900 hover:bg-white"}`,title:"Grid View",children:e.jsx(A1,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>d("list"),className:`p-1.5 rounded-md transition-all duration-200 ${c==="list"?"bg-primary-600 text-white":"text-secondary-600 hover:text-secondary-900 hover:bg-white"}`,title:"List View",children:e.jsx(E1,{className:"w-3.5 h-3.5"})})]})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("button",{onClick:()=>t("catalog"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${s==="catalog"?"bg-primary-100 text-primary-700 border border-primary-300":"text-secondary-600 hover:bg-secondary-100 hover:text-secondary-900"}`,children:[e.jsx(it,{className:"w-4 h-4"}),"Service Catalog"]}),e.jsxs("button",{onClick:()=>t("workorders"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${s==="workorders"?"bg-primary-100 text-primary-700 border border-primary-300":"text-secondary-600 hover:bg-secondary-100 hover:text-secondary-900"}`,children:[e.jsx(Cn,{className:"w-4 h-4"}),"Work Orders"]}),e.jsxs("button",{onClick:()=>t("technicians"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${s==="technicians"?"bg-primary-100 text-primary-700 border border-primary-300":"text-secondary-600 hover:bg-secondary-100 hover:text-secondary-900"}`,children:[e.jsx(nt,{className:"w-4 h-4"}),"Technicians"]})]}),e.jsx("div",{className:"bg-gradient-to-r from-secondary-50 to-secondary-100 rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary-400",children:e.jsx(Rs,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:a,onChange:q=>r(q.target.value),className:"form-input w-full pl-12 pr-4 py-3"})]}),s==="catalog"&&e.jsx("div",{className:"lg:w-64",children:e.jsxs("select",{value:n,onChange:q=>i(q.target.value),className:"form-select w-full",children:[e.jsx("option",{value:"all",children:"All Categories"}),L.map(q=>e.jsx("option",{value:q,children:q},q))]})}),s==="workorders"&&e.jsx("div",{className:"lg:w-64",children:e.jsxs("select",{value:l,onChange:q=>o(q.target.value),className:"form-select w-full",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[s==="catalog"&&e.jsx("div",{className:"space-y-6",children:G?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ld,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading service catalog..."})]})}):H.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-secondary-800",children:[H.length," service",H.length!==1?"s":""," found"]})}),c==="grid"?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(q=>e.jsxs("div",{className:"card p-6 hover:shadow-md transition-all duration-200",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-secondary-900 mb-2",children:q.name}),e.jsx("p",{className:"text-sm text-secondary-600 mb-3",children:q.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:`status-badge ${Le(q.isActive?"active":"inactive")}`,children:q.isActive?"Active":"Inactive"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:q.category})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-secondary-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsxs("span",{children:["$",q.laborRate||"N/A"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vt,{className:"w-4 h-4"}),e.jsxs("span",{children:[q.estimatedDuration||"N/A"," min"]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-secondary-100",children:[e.jsxs("button",{onClick:()=>K(q),className:"btn-ghost btn-sm text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100",title:"Edit Service",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>ae(q),className:"btn-ghost btn-sm text-red-500 hover:text-red-700 hover:bg-red-50",title:"Delete Service",children:[e.jsx(rt,{className:"w-4 h-4"}),"Delete"]})]})]},q._id))}):e.jsx("div",{className:"space-y-3",children:H.map(q=>e.jsx("div",{className:"card p-4 hover:bg-secondary-50 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(it,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-secondary-900",children:q.name}),e.jsx("p",{className:"text-sm text-secondary-600",children:q.category})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["$",q.laborRate||"N/A"]}),e.jsx("span",{className:`status-badge ${Le(q.isActive?"active":"inactive")}`,children:q.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>K(q),className:"btn-ghost btn-sm text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>ae(q),className:"btn-ghost btn-sm text-red-500 hover:text-red-700 hover:bg-red-50",children:[e.jsx(rt,{className:"w-4 h-4"}),"Delete"]})]})]})]})},q._id))})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(it,{className:"w-8 h-8"})}),e.jsx("h3",{className:"empty-state-title",children:"No services found"}),e.jsx("p",{className:"empty-state-description",children:"Get started by adding your first service"}),e.jsxs("button",{onClick:se,className:"btn-primary",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Add Service"]})]})}),s==="workorders"&&e.jsx("div",{className:"space-y-6",children:z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ld,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-secondary-600",children:"Loading work orders..."})]})}):Q.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-secondary-800",children:[Q.length," work order",Q.length!==1?"s":""," found"]})}),e.jsx("div",{className:"space-y-3",children:Q.map(q=>e.jsx("div",{className:"card p-4 hover:bg-secondary-50 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Cn,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-secondary-900",children:q.workOrderNumber||"Untitled"}),e.jsx("p",{className:"text-sm text-secondary-600",children:q.notes||"No description"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`status-badge ${Le(q.status)}`,children:q.status}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>Ym(q),className:"btn-ghost btn-sm text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>Km(q),className:"btn-ghost btn-sm text-red-500 hover:text-red-700 hover:bg-red-50",children:[e.jsx(rt,{className:"w-4 h-4"}),"Delete"]})]})]})]})},q._id))})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(Cn,{className:"w-8 h-8"})}),e.jsx("h3",{className:"empty-state-title",children:"No work orders found"}),e.jsx("p",{className:"empty-state-description",children:"Get started by creating your first work order"}),e.jsxs("button",{onClick:rl,className:"btn-primary",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Add Work Order"]})]})}),s==="technicians"&&e.jsx("div",{className:"space-y-6",children:ie?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ld,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-secondary-600",children:"Loading technicians..."})]})}):(Array.isArray(A)?A:[]).length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-secondary-800",children:[(Array.isArray(A)?A:[]).length," technician",(Array.isArray(A)?A:[]).length!==1?"s":""," found"]})}),e.jsx("div",{className:"space-y-3",children:(Array.isArray(A)?A:[]).map(q=>e.jsx("div",{className:"card p-4 hover:bg-secondary-50 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(nt,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-normal text-secondary-900",children:q.name}),e.jsx("p",{className:"text-sm text-secondary-600",children:q.specialization})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`status-badge ${Le(q.isActive?"active":"inactive")}`,children:q.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{Z(q),U(!0)},className:"btn-ghost btn-sm text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100",title:"Edit Technician",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{Z(q),E(!0)},className:"btn-ghost btn-sm text-red-500 hover:text-red-700 hover:bg-red-50",title:"Delete Technician",children:e.jsx(rt,{className:"w-4 h-4"})})]})]})]})},q._id))})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(nt,{className:"w-8 h-8"})}),e.jsx("h3",{className:"empty-state-title",children:"No technicians found"}),e.jsx("p",{className:"empty-state-description",children:"Get started by adding your first technician"}),e.jsxs("button",{onClick:Gm,className:"btn-primary",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Add Technician"]})]})})]})]})]}),e.jsx(JE,{isOpen:u,onClose:()=>m(!1),onSubmit:te}),e.jsx(ZE,{isOpen:h,service:v,onClose:()=>{y(!1),x(null)},onSubmit:ve}),e.jsx(e8,{isOpen:g,service:v,onClose:()=>{j(!1),x(null)},onDelete:ge}),e.jsx(t8,{isOpen:f,onClose:()=>p(!1),onSubmit:xt}),N&&T&&e.jsx(s8,{workOrder:T,onClose:()=>{w(!1),_(null)},onSuccess:nl}),e.jsx(a8,{isOpen:S,workOrder:T,onClose:()=>{C(!1),_(null)},onDelete:cs}),e.jsx(r8,{isOpen:F,onClose:()=>D(!1),onSubmit:cr}),e.jsx(n8,{isOpen:R,technician:W,onClose:()=>{U(!1),Z(null)},onSubmit:Wm}),e.jsx(i8,{isOpen:O,technician:W,onClose:()=>{E(!1),Z(null)},onDelete:qm})]})}const o8=async()=>(await M.get("/system-admin/health")).data,c8=async()=>(await M.get("/system-admin/system/info")).data,d8=async()=>(await M.get("/system-admin/system/database")).data,Ev=s=>{if(s===0)return"0 B";const t=1024,a=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(s)/Math.log(t));return`${parseFloat((s/Math.pow(t,r)).toFixed(2))} ${a[r]}`},u8=s=>{const t=Math.floor(s/86400),a=Math.floor(s%86400/3600),r=Math.floor(s%3600/60);return t>0?`${t}d ${a}h ${r}m`:a>0?`${a}h ${r}m`:`${r}m`},m8=s=>{switch(s){case"healthy":case"completed":case"running":return"text-green-600";case"warning":case"in_progress":return"text-yellow-600";case"critical":case"failed":case"error":case"stopped":return"text-red-600";case"pending":return"text-blue-600";default:return"text-gray-600"}},h8=()=>{const[s,t]=b.useState("overview"),[a,r]=b.useState(!1),[n,i]=b.useState(null),[l,o]=b.useState(null),[c,d]=b.useState(null);b.useEffect(()=>{u()},[]);const u=async()=>{r(!0);try{const[g,j,v]=await Promise.all([o8(),c8(),d8()]);i(g.data.current),o(j.data),d(v.data)}catch(g){console.error("Error loading system data:",g),P.error("Failed to load system data")}finally{r(!1)}},m=[{id:"overview",label:"Overview",icon:e.jsx(bu,{className:"w-5 h-5"})},{id:"system",label:"System Info",icon:e.jsx(rP,{className:"w-5 h-5"})}],h=()=>{var g,j,v,x,f,p,N,w,S;return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-primary-100 rounded-xl mx-auto mb-4",children:e.jsx(bu,{className:"w-6 h-6 text-primary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"System Status"}),e.jsx("p",{className:`text-2xl font-bold ${m8((n==null?void 0:n.status)||"unknown")}`,children:(n==null?void 0:n.status)||"Unknown"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"System Status"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-info-100 rounded-xl mx-auto mb-4",children:e.jsx(JT,{className:"w-6 h-6 text-info-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"CPU Usage"}),e.jsxs("p",{className:"text-2xl font-bold text-secondary-900",children:[((v=(j=(g=n==null?void 0:n.metrics)==null?void 0:g.cpu)==null?void 0:j.usage)==null?void 0:v.toFixed(1))||"0","%"]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"CPU Usage"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-success-100 rounded-xl mx-auto mb-4",children:e.jsx(QT,{className:"w-6 h-6 text-success-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Memory Usage"}),e.jsxs("p",{className:"text-2xl font-bold text-secondary-900",children:[((p=(f=(x=n==null?void 0:n.metrics)==null?void 0:x.memory)==null?void 0:f.usage)==null?void 0:p.toFixed(1))||"0","%"]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Memory Usage"})})]}),e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-warning-100 rounded-xl mx-auto mb-4",children:e.jsx(XT,{className:"w-6 h-6 text-warning-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600",children:"Disk Usage"}),e.jsxs("p",{className:"text-2xl font-bold text-secondary-900",children:[((S=(w=(N=n==null?void 0:n.metrics)==null?void 0:N.disk)==null?void 0:w.usage)==null?void 0:S.toFixed(1))||"0","%"]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-secondary-600",children:"Disk Usage"})})]})]})})},y=()=>{var g,j,v,x,f,p;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-4",children:"System Information"}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Platform"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:l.platform})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Architecture"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:l.arch})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Release"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:l.release})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Hostname"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:l.hostname})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Uptime"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:u8(l.uptime)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Total Memory"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:Ev(l.totalMemory)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Free Memory"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:Ev(l.freeMemory)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"CPU Cores"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:l.cpus})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Node Version"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:l.nodeVersion})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Environment"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:l.environment})]})]})]})]}),c&&e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-4",children:"Database Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Database Name"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:c.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Version"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:c.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Collections"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:((g=c.storage)==null?void 0:g.collections)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Documents"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:(((j=c.storage)==null?void 0:j.objects)||0).toLocaleString()})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Current Connections"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:((v=c.connections)==null?void 0:v.current)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Available Connections"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:((x=c.connections)==null?void 0:x.available)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Total Queries"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:(((f=c.operations)==null?void 0:f.query)||0).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Total Updates"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:(((p=c.operations)==null?void 0:p.update)||0).toLocaleString()})]})]})]})]})]})};return e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsx("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"System Administration"}),e.jsx("p",{className:"text-secondary-600",children:"Monitor system health and view system information"})]})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"p-4 border-b border-secondary-200",children:e.jsx("nav",{className:"flex space-x-1",children:m.map(g=>e.jsxs("button",{onClick:()=>t(g.id),className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${s===g.id?"bg-primary-100 text-primary-700 border border-primary-300":"text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100"}`,children:[g.icon,e.jsx("span",{children:g.label})]},g.id))})})}),e.jsx("div",{className:"min-h-96",children:a?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96",children:[e.jsx("div",{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary-600 border-2 border-primary-600 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-secondary-600",children:"Loading system data..."})]}):e.jsxs(e.Fragment,{children:[s==="overview"&&h(),s==="system"&&y()]})})]})};class x8{async getReminders(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/reminders?${a.toString()}`)}async getReminder(t){return M.get(`/reminders/${t}`)}async createReminder(t){return M.post("/reminders",t)}async updateReminder(t,a){return M.put(`/reminders/${t}`,a)}async deleteReminder(t){return M.delete(`/reminders/${t}`)}async markAsSent(t){return M.post(`/reminders/${t}/mark-sent`)}async acknowledgeReminder(t,a){return M.post(`/reminders/${t}/acknowledge`,{notes:a})}async completeReminder(t,a){return M.post(`/reminders/${t}/complete`,{notes:a})}async cancelReminder(t,a){return M.post(`/reminders/${t}/cancel`,{reason:a})}async getUpcomingReminders(t=7,a){const r=new URLSearchParams({days:t.toString()});return a&&r.append("assignedTo",a),M.get(`/reminders/upcoming/list?${r.toString()}`)}async getOverdueReminders(t){const a=new URLSearchParams;return t&&a.append("assignedTo",t),M.get(`/reminders/overdue/list?${a.toString()}`)}async getReminderStats(t,a){const r=new URLSearchParams;return t&&r.append("startDate",t),a&&r.append("endDate",a),M.get(`/reminders/stats/overview?${r.toString()}`)}async createBulkReminders(t){return M.post("/reminders/bulk",{reminders:t})}async getTemplates(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/reminders/templates?${a.toString()}`)}async getTemplate(t){return M.get(`/reminders/templates/${t}`)}async createTemplate(t){return M.post("/reminders/templates",t)}async updateTemplate(t,a){return M.put(`/reminders/templates/${t}`,a)}async deleteTemplate(t){return M.delete(`/reminders/templates/${t}`)}async toggleTemplate(t){return M.patch(`/reminders/templates/${t}/toggle`)}async getNotificationSettings(){return M.get("/reminders/notification-settings")}async updateNotificationSettings(t){return M.put("/reminders/notification-settings",t)}async generateFromTemplate(t,a){return M.post(`/reminders/generate-from-template/${t}`,a)}async generateServiceDueReminders(t,a,r){return M.post("/reminders/generate-service-due",{customerId:t,serviceType:a,dueDate:r})}async generateFollowUpReminders(t,a,r){return M.post("/reminders/generate-follow-up",{customerId:t,appointmentId:a,followUpDate:r})}async generatePaymentReminders(t,a){return M.post("/reminders/generate-payment",{invoiceId:t,dueDate:a})}async scheduleReminder(t,a){return M.post(`/reminders/${t}/schedule`,{scheduleDate:a})}async rescheduleReminder(t,a){return M.post(`/reminders/${t}/reschedule`,{newDate:a})}async sendReminderNotification(t,a){return M.post(`/reminders/${t}/send-notification`,{method:a})}async sendBulkNotifications(t,a){return M.post("/reminders/bulk/send-notifications",{reminderIds:t,method:a})}async getReminderAnalytics(t,a){const r=new URLSearchParams;return t&&r.append("startDate",t),a&&r.append("endDate",a),M.get(`/reminders/analytics?${r.toString()}`)}async getCustomerReminderHistory(t){return M.get(`/reminders/customer/${t}/history`)}async searchReminders(t,a){const r=new URLSearchParams({query:t});return a&&Object.entries(a).forEach(([n,i])=>{i!=null&&r.append(n,i.toString())}),M.get(`/reminders/search?${r.toString()}`)}async duplicateReminder(t){return M.post(`/reminders/${t}/duplicate`)}async archiveReminder(t){return M.post(`/reminders/${t}/archive`)}async unarchiveReminder(t){return M.post(`/reminders/${t}/unarchive`)}async getArchivedReminders(t){const a=new URLSearchParams;return t&&Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/reminders/archived?${a.toString()}`)}}const gs=new x8,Ca=Y("reminders/fetchReminders",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.getReminders()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch reminders")}}),Yl=Y("reminders/createReminder",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.createReminder(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create reminder")}}),Ei=Y("reminders/updateReminder",async({id:s,reminderData:t},{rejectWithValue:a})=>{var r,n;try{return(await gs.updateReminder(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update reminder")}}),Kl=Y("reminders/deleteReminder",async(s,{rejectWithValue:t})=>{var a,r;try{return await gs.deleteReminder(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete reminder")}}),p8=Y("reminders/markSent",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.markAsSent(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to mark reminder as sent")}}),f8=Y("reminders/cancelReminder",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.cancelReminder(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to cancel reminder")}}),Gh=Y("reminders/fetchStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.getReminderStats()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch reminder stats")}}),g8=Y("reminders/fetchUpcoming",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.getUpcomingReminders()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch upcoming reminders")}}),y8=Y("reminders/fetchOverdue",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.getOverdueReminders()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch overdue reminders")}}),la=Y("reminders/fetchTemplates",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.getTemplates()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch reminder templates")}}),Gl=Y("reminders/createTemplate",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.createTemplate(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create reminder template")}}),Ii=Y("reminders/updateTemplate",async({id:s,templateData:t},{rejectWithValue:a})=>{var r,n;try{return(await gs.updateTemplate(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update reminder template")}}),Xl=Y("reminders/deleteTemplate",async(s,{rejectWithValue:t})=>{var a,r;try{return await gs.deleteTemplate(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete reminder template")}}),$n=Y("reminders/fetchNotificationSettings",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.getNotificationSettings()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch notification settings")}}),g2=Y("reminders/updateNotificationSettings",async(s,{rejectWithValue:t})=>{var a,r;try{return(await gs.updateNotificationSettings(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to update notification settings")}}),v8={reminders:[],templates:[],notificationSettings:null,upcomingReminders:[],overdueReminders:[],stats:null,remindersLoading:!1,templatesLoading:!1,settingsLoading:!1,statsLoading:!1,error:null};Rt({name:"reminders",initialState:v8,reducers:{clearRemindersError:s=>{s.error=null},clearReminders:s=>{s.reminders=[]},clearTemplates:s=>{s.templates=[]}},extraReducers:s=>{s.addCase(Ca.pending,t=>{t.remindersLoading=!0,t.error=null}).addCase(Ca.fulfilled,(t,a)=>{t.remindersLoading=!1,t.reminders=a.payload}).addCase(Ca.rejected,(t,a)=>{t.remindersLoading=!1,t.error=a.payload}).addCase(Yl.fulfilled,(t,a)=>{t.reminders.push(a.payload)}).addCase(Ei.fulfilled,(t,a)=>{const r=t.reminders.findIndex(n=>n.id===a.payload.id);r!==-1&&(t.reminders[r]=a.payload)}).addCase(Kl.fulfilled,(t,a)=>{t.reminders=t.reminders.filter(r=>r.id!==a.payload)}).addCase(p8.fulfilled,(t,a)=>{const r=t.reminders.findIndex(n=>n.id===a.payload.id);r!==-1&&(t.reminders[r]=a.payload)}).addCase(markReminderAcknowledged.fulfilled,(t,a)=>{const r=t.reminders.findIndex(n=>n.id===a.payload.id);r!==-1&&(t.reminders[r]=a.payload)}).addCase(markReminderCompleted.fulfilled,(t,a)=>{const r=t.reminders.findIndex(n=>n.id===a.payload.id);r!==-1&&(t.reminders[r]=a.payload)}).addCase(f8.fulfilled,(t,a)=>{const r=t.reminders.findIndex(n=>n.id===a.payload.id);r!==-1&&(t.reminders[r]=a.payload)}),s.addCase(la.pending,t=>{t.templatesLoading=!0,t.error=null}).addCase(la.fulfilled,(t,a)=>{t.templatesLoading=!1,t.templates=a.payload}).addCase(la.rejected,(t,a)=>{t.templatesLoading=!1,t.error=a.payload}).addCase(Gl.fulfilled,(t,a)=>{t.templates.push(a.payload)}).addCase(Ii.fulfilled,(t,a)=>{const r=t.templates.findIndex(n=>n.id===a.payload.id);r!==-1&&(t.templates[r]=a.payload)}).addCase(Xl.fulfilled,(t,a)=>{t.templates=t.templates.filter(r=>r.id!==a.payload)}),s.addCase($n.pending,t=>{t.settingsLoading=!0,t.error=null}).addCase($n.fulfilled,(t,a)=>{t.settingsLoading=!1,t.notificationSettings=a.payload}).addCase($n.rejected,(t,a)=>{t.settingsLoading=!1,t.error=a.payload}).addCase(g2.fulfilled,(t,a)=>{t.notificationSettings=a.payload}),s.addCase(g8.fulfilled,(t,a)=>{t.upcomingReminders=a.payload}).addCase(y8.fulfilled,(t,a)=>{t.overdueReminders=a.payload}),s.addCase(Gh.pending,t=>{t.statsLoading=!0}).addCase(Gh.fulfilled,(t,a)=>{t.statsLoading=!1,t.stats=a.payload}).addCase(Gh.rejected,t=>{t.statsLoading=!1})}});function b8({onClose:s,onSave:t,isLoading:a=!1}){const[r,n]=b.useState({title:"",description:"",type:"appointment",priority:"medium",dueDate:"",reminderDate:"",customerId:"",notificationMethods:["email"],notes:""}),{list:i=[]}=je(u=>u.customers),l=Ue();b.useEffect(()=>{(!i||i.length===0)&&l(zt({}))},[l,i]);const o=(u,m)=>{n(h=>({...h,[u]:m}))},c=u=>{n(m=>({...m,customerId:u}))},d=()=>{if(!r.title||!r.dueDate||!r.reminderDate||!r.customerId){alert("Please fill in all required fields including customer selection.");return}t(r)};return e.jsx(pe,{isOpen:!0,onClose:s,onSubmit:d,title:"Create New Reminder",icon:e.jsx($t,{className:"w-5 h-5"}),submitText:a?"Creating...":"Create Reminder",children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{value:r.customerId,onChange:u=>c(u.target.value),className:"form-select",children:[e.jsx("option",{value:"",children:"Select a customer"}),i&&i.length>0?i.map(u=>e.jsxs("option",{value:u._id,children:[u.name," - ",u.email]},u._id)):e.jsx("option",{value:"",disabled:!0,children:"No customers available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Reminder Type *"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"appointment",label:"Appointment",icon:e.jsx(hs,{className:"w-4 h-4"})},{value:"service_due",label:"Service Due",icon:e.jsx($t,{className:"w-4 h-4"})},{value:"follow_up",label:"Follow-up",icon:e.jsx(Ia,{className:"w-4 h-4"})},{value:"payment",label:"Payment Due",icon:e.jsx(Yt,{className:"w-4 h-4"})}].map(u=>e.jsxs("button",{type:"button",onClick:()=>o("type",u.value),className:`p-3 border rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${r.type===u.value?"border-primary-500 bg-primary-50 text-primary-700":"border-secondary-300 text-secondary-700 hover:border-secondary-400"}`,children:[u.icon,u.label]},u.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Title *"}),e.jsx("input",{type:"text",value:r.title,onChange:u=>o("title",u.target.value),className:"form-input",placeholder:"Enter reminder title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{value:r.description||"",onChange:u=>o("description",u.target.value),rows:3,className:"form-textarea",placeholder:"Enter reminder description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),e.jsx("input",{type:"date",value:r.dueDate,onChange:u=>o("dueDate",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Date *"}),e.jsx("input",{type:"date",value:r.reminderDate,onChange:u=>o("reminderDate",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Methods *"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{const u=r.notificationMethods.includes("email")?r.notificationMethods.filter(m=>m!=="email"):[...r.notificationMethods,"email"];o("notificationMethods",u)},className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${r.notificationMethods.includes("email")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[e.jsx(Yt,{className:"w-4 h-4"}),"Email"]}),e.jsxs("button",{type:"button",onClick:()=>{const u=r.notificationMethods.includes("sms")?r.notificationMethods.filter(m=>m!=="sms"):[...r.notificationMethods,"sms"];o("notificationMethods",u)},className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${r.notificationMethods.includes("sms")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[e.jsx(bs,{className:"w-4 h-4"}),"SMS"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:r.priority,onChange:u=>o("priority",u.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:r.notes,onChange:u=>o("notes",u.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes..."})]})]})})}function j8({onClose:s,onSave:t,isLoading:a=!1,reminder:r}){var m;const[n,i]=b.useState({title:r.title||r.message||"",description:r.description||"",type:r.type==="service-due"?"service_due":r.type==="follow-up"?"follow_up":r.type==="payment-due"?"payment":r.type==="service_due"?"service_due":r.type==="follow_up"?"follow_up":r.type==="payment"?"payment":"appointment",priority:r.priority||"medium",dueDate:r.dueDate?r.dueDate.split("T")[0]:r.scheduledDate?r.scheduledDate.split("T")[0]:"",reminderDate:r.reminderDate?r.reminderDate.split("T")[0]:r.scheduledDate?r.scheduledDate.split("T")[0]:"",customerId:((m=r.customer)==null?void 0:m._id)||r.customerId||r.customerId||"",notificationMethods:r.notificationMethods||(r.method==="phone"?["sms"]:r.method==="email"?["email"]:r.method==="sms"?["sms"]:["email"]),notes:r.notes||""}),{list:l=[]}=je(h=>h.customers),o=Ue();b.useEffect(()=>{(!l||l.length===0)&&o(zt({}))},[o,l]),b.useEffect(()=>{console.log("EditReminderModal - Available customers:",l),console.log("EditReminderModal - Current form data:",n)},[l,n]),b.useEffect(()=>{var h,y;console.log("EditReminderModal - Reminder data:",r),console.log("EditReminderModal - Customer data:",r.customer),console.log("EditReminderModal - Customer ID:",((h=r.customer)==null?void 0:h._id)||r.customerId||r.customerId),i({title:r.title||r.message||"",description:r.description||"",type:r.type==="service-due"?"service_due":r.type==="follow-up"?"follow_up":r.type==="payment-due"?"payment":r.type==="service_due"?"service_due":r.type==="follow_up"?"follow_up":r.type==="payment"?"payment":"appointment",priority:r.priority||"medium",dueDate:r.dueDate?r.dueDate.split("T")[0]:r.scheduledDate?r.scheduledDate.split("T")[0]:"",reminderDate:r.reminderDate?r.reminderDate.split("T")[0]:r.scheduledDate?r.scheduledDate.split("T")[0]:"",customerId:((y=r.customer)==null?void 0:y._id)||r.customerId||r.customerId||"",notificationMethods:r.notificationMethods||(r.method==="phone"?["sms"]:r.method==="email"?["email"]:r.method==="sms"?["sms"]:["email"]),notes:r.notes||""})},[r]);const c=(h,y)=>{i(g=>({...g,[h]:y}))},d=h=>{i(y=>({...y,customerId:h}))},u=()=>{if(!n.title||!n.dueDate||!n.reminderDate||!n.customerId){alert("Please fill in all required fields including customer selection.");return}t(n)};return e.jsx(pe,{isOpen:!0,onClose:s,onSubmit:u,title:"Edit Reminder",icon:e.jsx($t,{className:"w-5 h-5"}),submitText:a?"Updating...":"Update Reminder",children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Customer *"}),e.jsxs("select",{value:n.customerId,onChange:h=>d(h.target.value),className:"form-select",children:[e.jsx("option",{value:"",children:"Select a customer"}),l&&l.length>0?l.map(h=>e.jsxs("option",{value:h._id,children:[h.name," - ",h.email]},h._id)):e.jsx("option",{value:"",disabled:!0,children:"No customers available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Reminder Type *"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"appointment",label:"Appointment",icon:e.jsx(hs,{className:"w-4 h-4"})},{value:"service_due",label:"Service Due",icon:e.jsx($t,{className:"w-4 h-4"})},{value:"follow_up",label:"Follow-up",icon:e.jsx(Ia,{className:"w-4 h-4"})},{value:"payment",label:"Payment Due",icon:e.jsx(Yt,{className:"w-4 h-4"})}].map(h=>e.jsxs("button",{type:"button",onClick:()=>c("type",h.value),className:`p-3 border rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${n.type===h.value?"border-primary-500 bg-primary-50 text-primary-700":"border-secondary-300 text-secondary-700 hover:border-secondary-400"}`,children:[h.icon,h.label]},h.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Title *"}),e.jsx("input",{type:"text",value:n.title,onChange:h=>c("title",h.target.value),className:"form-input",placeholder:"Enter reminder title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{value:n.description||"",onChange:h=>c("description",h.target.value),rows:3,className:"form-textarea",placeholder:"Enter reminder description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),e.jsx("input",{type:"date",value:n.dueDate,onChange:h=>c("dueDate",h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Date *"}),e.jsx("input",{type:"date",value:n.reminderDate,onChange:h=>c("reminderDate",h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Methods *"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{const h=n.notificationMethods.includes("email")?n.notificationMethods.filter(y=>y!=="email"):[...n.notificationMethods,"email"];c("notificationMethods",h)},className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${n.notificationMethods.includes("email")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[e.jsx(Yt,{className:"w-4 h-4"}),"Email"]}),e.jsxs("button",{type:"button",onClick:()=>{const h=n.notificationMethods.includes("sms")?n.notificationMethods.filter(y=>y!=="sms"):[...n.notificationMethods,"sms"];c("notificationMethods",h)},className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${n.notificationMethods.includes("sms")?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[e.jsx(bs,{className:"w-4 h-4"}),"SMS"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:n.priority,onChange:h=>c("priority",h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:n.notes,onChange:h=>c("notes",h.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes..."})]})]})})}function N8({onClose:s,onSave:t,isLoading:a=!1,template:r,isEditing:n=!1}){const[i,l]=b.useState({name:"",type:"appointment",subject:"",message:"",timing:{value:24,unit:"hours",when:"before"},methods:["email"],isActive:!0});b.useEffect(()=>{r&&n&&l({name:r.name,type:r.type,subject:r.subject,message:r.message,timing:r.timing,methods:r.methods,isActive:r.isActive})},[r,n]);const o=(m,h)=>{l(y=>({...y,[m]:h}))},c=(m,h)=>{l(y=>({...y,timing:{...y.timing,[m]:h}}))},d=m=>{l(h=>({...h,methods:h.methods.includes(m)?h.methods.filter(y=>y!==m):[...h.methods,m]}))},u=()=>{if(!i.name||!i.subject||!i.message){alert("Please fill in all required fields.");return}if(i.methods.length===0){alert("Please select at least one notification method.");return}t(i)};return e.jsx(pe,{isOpen:!0,onClose:s,onSubmit:u,title:n?"Edit Template":"Create New Template",icon:e.jsx(Mf,{className:"w-5 h-5"}),submitText:a?n?"Updating...":"Creating...":n?"Update Template":"Create Template",children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Template Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:m=>o("name",m.target.value),className:"form-input",placeholder:"e.g., Appointment Reminder - 24 Hours"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Template Type *"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"appointment",label:"Appointment",icon:e.jsx(hs,{className:"w-4 h-4"})},{value:"service-due",label:"Service Due",icon:e.jsx($t,{className:"w-4 h-4"})},{value:"follow-up",label:"Follow-up",icon:e.jsx(Ia,{className:"w-4 h-4"})},{value:"payment-due",label:"Payment Due",icon:e.jsx(Yt,{className:"w-4 h-4"})}].map(m=>e.jsxs("button",{type:"button",onClick:()=>o("type",m.value),className:`p-3 border rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${i.type===m.value?"border-primary-500 bg-primary-50 text-primary-700":"border-secondary-300 text-secondary-700 hover:border-secondary-400"}`,children:[m.icon,m.label]},m.value))})]}),e.jsxs("div",{className:"bg-secondary-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-secondary-700 mb-3",children:"Timing Configuration"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-secondary-600 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:i.timing.value,onChange:m=>c("value",parseInt(m.target.value)),min:"1",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-secondary-600 mb-1",children:"Unit"}),e.jsxs("select",{value:i.timing.unit,onChange:m=>c("unit",m.target.value),className:"form-select",children:[e.jsx("option",{value:"minutes",children:"Minutes"}),e.jsx("option",{value:"hours",children:"Hours"}),e.jsx("option",{value:"days",children:"Days"}),e.jsx("option",{value:"weeks",children:"Weeks"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-secondary-600 mb-1",children:"When"}),e.jsxs("select",{value:i.timing.when,onChange:m=>c("when",m.target.value),className:"form-select",children:[e.jsx("option",{value:"before",children:"Before"}),e.jsx("option",{value:"after",children:"After"})]})]})]}),e.jsxs("p",{className:"text-xs text-secondary-500 mt-2",children:["Example: ",i.timing.value," ",i.timing.unit," ",i.timing.when," the event"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Notification Methods *"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>d("email"),className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${i.methods.includes("email")?"border-primary-500 bg-primary-50 text-primary-700":"border-secondary-300 text-secondary-700 hover:border-secondary-400"}`,children:[e.jsx(Yt,{className:"w-4 h-4"}),"Email"]}),e.jsxs("button",{type:"button",onClick:()=>d("sms"),className:`flex items-center gap-2 px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${i.methods.includes("sms")?"border-primary-500 bg-primary-50 text-primary-700":"border-secondary-300 text-secondary-700 hover:border-secondary-400"}`,children:[e.jsx(bs,{className:"w-4 h-4"}),"SMS"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Subject *"}),e.jsx("input",{type:"text",value:i.subject,onChange:m=>o("subject",m.target.value),className:"form-input",placeholder:"e.g., Appointment Reminder - {{businessName}}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Message Template *"}),e.jsx("textarea",{value:i.message,onChange:m=>o("message",m.target.value),rows:8,className:"form-textarea",placeholder:"Enter the message template with placeholders like {{customerName}}, {{appointmentDate}}, etc."}),e.jsxs("div",{className:"mt-2 text-xs text-secondary-500",children:[e.jsx("p",{className:"font-medium mb-1",children:"Available placeholders:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("span",{children:["• ","{{customerName}}"," - Customer's full name"]}),e.jsxs("span",{children:["• ","{{businessName}}"," - Your business name"]}),e.jsxs("span",{children:["• ","{{appointmentDate}}"," - Appointment date"]}),e.jsxs("span",{children:["• ","{{appointmentTime}}"," - Appointment time"]}),e.jsxs("span",{children:["• ","{{serviceType}}"," - Type of service"]}),e.jsxs("span",{children:["• ","{{businessPhone}}"," - Business phone"]}),e.jsxs("span",{children:["• ","{{vehicleInfo}}"," - Vehicle details"]}),e.jsxs("span",{children:["• ","{{technicianName}}"," - Technician name"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700",children:"Active Status"}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Enable this template for automatic reminders"})]}),e.jsx("button",{onClick:()=>o("isActive",!i.isActive),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${i.isActive?"bg-primary-600":"bg-secondary-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${i.isActive?"translate-x-6":"translate-x-1"}`})})]})]})})}function w8({onClose:s,onConfirm:t,title:a,message:r,itemName:n,isLoading:i=!1}){return b.useEffect(()=>{const l=o=>{o.key==="Escape"&&s()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[s]),e.jsx(pe,{isOpen:!0,onClose:s,title:a,icon:e.jsx(Ct,{className:"w-5 h-5"}),submitText:i?"Deleting...":"Delete",onSubmit:t,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:r}),n&&e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Item to delete:"})," ",n]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This action cannot be undone. The item will be permanently deleted."]})})]})})}function S8(){const[s,t]=b.useState("reminders"),[a,r]=b.useState("all"),[n,i]=b.useState("all"),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState(!1),[h,y]=b.useState(!1),[g,j]=b.useState(null),[v,x]=b.useState(null),[f,p]=b.useState(null),[N,w]=b.useState({emailEnabled:!1,smsEnabled:!1,emailProvider:{smtp:"",port:"",username:"",password:""},smsProvider:{apiKey:""},businessInfo:{name:"",phone:"",email:"",website:"",address:""}}),{reminders:S,templates:C,settings:T={emailEnabled:!1,smsEnabled:!1,emailProvider:{smtp:"",port:587,username:"",password:""},smsProvider:{apiKey:"",serviceName:"twilio"},businessInfo:{name:"",phone:"",email:"",address:"",website:""}},loading:_}=je(k=>k.reminders),F=Ue();b.useEffect(()=>{F(Ca()),F(la()),F($n())},[F]),b.useEffect(()=>{var k,H,Q,J,L,se,K,ae,ce,te,ve;T&&w({emailEnabled:T.emailEnabled||!1,smsEnabled:T.smsEnabled||!1,emailProvider:{smtp:((k=T.emailProvider)==null?void 0:k.smtp)||"",port:((Q=(H=T.emailProvider)==null?void 0:H.port)==null?void 0:Q.toString())||"587",username:((J=T.emailProvider)==null?void 0:J.username)||"",password:((L=T.emailProvider)==null?void 0:L.password)||""},smsProvider:{apiKey:((se=T.smsProvider)==null?void 0:se.apiKey)||""},businessInfo:{name:((K=T.businessInfo)==null?void 0:K.name)||"",phone:((ae=T.businessInfo)==null?void 0:ae.phone)||"",email:((ce=T.businessInfo)==null?void 0:ce.email)||"",website:((te=T.businessInfo)==null?void 0:te.website)||"",address:((ve=T.businessInfo)==null?void 0:ve.address)||""}})},[T]);const D=S.filter(k=>!(a!=="all"&&k.status!==a||n!=="all"&&k.type!==n));b.useEffect(()=>{console.log("Current reminders state:",S),console.log("Filtered reminders:",D)},[S,D]);const R=(k,H)=>{F(Ei({id:k,reminderData:{status:H}}))},U=(k,H)=>{p({type:"reminder",id:k,name:H}),y(!0)},O=(k,H)=>{p({type:"template",id:k,name:H}),y(!0)},E=k=>{x(k),d(!0)},W=k=>{j(k),m(!0)},Z=k=>{const H={title:k.title,description:k.description,type:k.type,priority:k.priority,dueDate:k.dueDate,reminderDate:k.reminderDate,customerId:k.customerId,notificationMethods:k.notificationMethods,notes:k.notes||""};console.log("Creating reminder with data:",H),F(Yl(H)).then(Q=>{console.log("Create reminder result:",Q),Q.meta.requestStatus==="fulfilled"&&(console.log("Reminder created successfully, refreshing list..."),F(Ca()))}),o(!1)},I=k=>{if(!v)return;const H={title:k.title,description:k.description,type:k.type,priority:k.priority,dueDate:k.dueDate,reminderDate:k.reminderDate,customerId:k.customerId,notificationMethods:k.notificationMethods,notes:k.notes||""};console.log("Updating reminder with data:",H),F(Ei({id:v._id||v.id,reminderData:H})).then(Q=>{console.log("Update reminder result:",Q),Q.meta.requestStatus==="fulfilled"&&(console.log("Reminder updated successfully, refreshing list..."),F(Ca()))}),d(!1),x(null)},$=k=>{g?(console.log("Updating template with data:",k),F(Ii({id:g.id,templateData:k})).then(H=>{console.log("Update template result:",H),H.meta.requestStatus==="fulfilled"&&(console.log("Template updated successfully, refreshing list..."),F(la()))}),j(null)):(console.log("Creating template with data:",k),F(Gl(k)).then(H=>{console.log("Create template result:",H),H.meta.requestStatus==="fulfilled"&&(console.log("Template created successfully, refreshing list..."),F(la()))})),m(!1)},A=()=>{f&&(f.type==="reminder"?(console.log("Deleting reminder:",f.id),F(Kl(f.id)).then(k=>{console.log("Delete reminder result:",k),k.meta.requestStatus==="fulfilled"&&(console.log("Reminder deleted successfully, refreshing list..."),F(Ca()))})):(console.log("Deleting template:",f.id),F(Xl(f.id)).then(k=>{console.log("Delete template result:",k),k.meta.requestStatus==="fulfilled"&&(console.log("Template deleted successfully, refreshing list..."),F(la()))})),p(null),y(!1))},G=k=>{const H=C.find(Q=>Q.id===k);H&&(console.log("Toggling template:",k,"isActive:",!H.isActive),F(Ii({id:k,templateData:{isActive:!H.isActive}})).then(Q=>{console.log("Toggle template result:",Q),Q.meta.requestStatus==="fulfilled"&&(console.log("Template toggled successfully, refreshing list..."),F(la()))}))},z=(k,H)=>{w(Q=>({...Q,[k]:H}))},ie=(k,H)=>{w(Q=>({...Q,emailProvider:{...Q.emailProvider,[k]:H}}))},de=(k,H)=>{w(Q=>({...Q,smsProvider:{...Q.smsProvider,[k]:H}}))},xe=(k,H)=>{w(Q=>({...Q,businessInfo:{...Q.businessInfo,[k]:H}}))},he=()=>{const k={emailNotifications:{enabled:N.emailEnabled,types:["appointment","service-due","follow-up","payment-due"],frequency:"immediate"},smsNotifications:{enabled:N.smsEnabled,types:["appointment","service-due","follow-up","payment-due"],phoneNumber:N.businessInfo.phone},pushNotifications:{enabled:!1,types:["appointment","service-due"]},inAppNotifications:{enabled:!0,types:["appointment","service-due","follow-up","payment-due"]},quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00",timezone:"UTC"}};F(g2(k))},Pe=k=>{switch(k){case"pending":return"status-pending";case"sent":return"status-active";case"acknowledged":return"status-active";case"completed":return"status-active";case"cancelled":return"status-inactive";case"delivered":return"status-active";case"failed":return"status-inactive";default:return"status-inactive"}},ee=k=>{switch(k){case"appointment":return e.jsx($t,{className:"w-4 h-4"});case"service-due":return e.jsx(Hp,{className:"w-4 h-4"});case"follow-up":return e.jsx(ki,{className:"w-4 h-4"});case"payment-due":return e.jsx(Vp,{className:"w-4 h-4"});default:return e.jsx(Vp,{className:"w-4 h-4"})}},Ce=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Active Reminders"}),e.jsx("p",{className:"text-secondary-600",children:"Manage and track customer notifications"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"btn-secondary",children:[e.jsx(_i,{className:"w-4 h-4"}),"Process Queue"]}),e.jsxs("button",{onClick:()=>o(!0),className:"btn-primary",children:[e.jsx(_s,{className:"w-4 h-4"}),"Create Reminder"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("select",{value:a,onChange:k=>r(k.target.value),className:"form-input",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:n,onChange:k=>i(k.target.value),className:"form-input",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"appointment",children:"Appointment"}),e.jsx("option",{value:"service-due",children:"Service Due"}),e.jsx("option",{value:"follow-up",children:"Follow-up"}),e.jsx("option",{value:"payment-due",children:"Payment Due"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold text-warning-600",children:S.filter(k=>k.status==="pending").length})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx($t,{className:"w-6 h-6 text-warning-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Sent Today"}),e.jsx("p",{className:"text-3xl font-bold text-success-600",children:S.filter(k=>k.status==="sent").length})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(ki,{className:"w-6 h-6 text-success-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Failed"}),e.jsx("p",{className:"text-3xl font-bold text-error-600",children:S.filter(k=>k.status==="failed").length})]}),e.jsx("div",{className:"w-12 h-12 bg-error-100 rounded-xl flex items-center justify-center",children:e.jsx(Ai,{className:"w-6 h-6 text-error-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Active Templates"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:C.filter(k=>k.isActive).length})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(Mf,{className:"w-6 h-6 text-info-600"})})]})})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Customer"}),e.jsx("th",{className:"table-header-cell",children:"Title"}),e.jsx("th",{className:"table-header-cell",children:"Due Date"}),e.jsx("th",{className:"table-header-cell",children:"Method"}),e.jsx("th",{className:"table-header-cell",children:"Status"}),e.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),e.jsx("tbody",{className:"table-body",children:D.map(k=>{var H;return e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(Ia,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:((H=k.customer)==null?void 0:H.name)||k.customerName||"Unknown Customer"}),e.jsx("div",{className:"text-sm text-secondary-500 capitalize",children:(k.type||"").replace("-"," ")})]})]})}),e.jsx("td",{className:"table-cell",children:e.jsx("div",{className:"text-sm text-secondary-900 max-w-xs truncate",children:k.title||k.message||"No title"})}),e.jsxs("td",{className:"table-cell",children:[e.jsx("div",{className:"text-sm text-secondary-900",children:new Date(k.dueDate||k.scheduledDate).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-secondary-500",children:new Date(k.dueDate||k.scheduledDate).toLocaleTimeString()})]}),e.jsx("td",{className:"table-cell",children:e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const Q=k.notificationMethods||[k.method],J=Q.includes("email"),L=Q.includes("sms");if(J&&L)return e.jsxs(e.Fragment,{children:[e.jsx(Yt,{className:"w-4 h-4 text-info-500"}),e.jsx(bs,{className:"w-4 h-4 text-success-500"}),e.jsx("span",{className:"text-sm text-secondary-900",children:"Email, SMS"})]});if(J)return e.jsxs(e.Fragment,{children:[e.jsx(Yt,{className:"w-4 h-4 text-info-500"}),e.jsx("span",{className:"text-sm text-secondary-900",children:"Email"})]});if(L)return e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"w-4 h-4 text-success-500"}),e.jsx("span",{className:"text-sm text-secondary-900",children:"SMS"})]});{const se=k.method||"email";return e.jsxs(e.Fragment,{children:[se==="email"?e.jsx(Yt,{className:"w-4 h-4 text-info-500"}):e.jsx(bs,{className:"w-4 h-4 text-success-500"}),e.jsx("span",{className:"text-sm text-secondary-900 capitalize",children:se})]})}})()})}),e.jsx("td",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${Pe(k.status)}`,children:k.status})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-primary-600 hover:text-primary-900 transition-colors",title:"View details",children:e.jsx(Jr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(k),className:"text-warning-600 hover:text-warning-900 transition-colors",title:"Edit reminder",children:e.jsx(nr,{className:"w-4 h-4"})}),k.status==="pending"&&e.jsx("button",{onClick:()=>R(k._id||k.id,"sent"),className:"text-success-600 hover:text-success-900 transition-colors",title:"Mark as sent",children:e.jsx(ki,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var Q;return U(k._id||k.id,((Q=k.customer)==null?void 0:Q.name)||k.customerName||"Unknown Customer")},className:"text-error-600 hover:text-error-900 transition-colors",title:"Delete reminder",children:e.jsx(Ls,{className:"w-4 h-4"})})]})})]},k._id||k.id)})})]})})})]}),V=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Reminder Templates"}),e.jsx("p",{className:"text-secondary-600",children:"Manage automated reminder templates"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>m(!0),className:"btn-primary",children:[e.jsx(_s,{className:"w-4 h-4"}),"Create Template"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(k=>{var H,Q,J;return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ee(k.type),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:k.name}),e.jsxs("span",{className:"text-sm text-secondary-500 capitalize",children:[(k.type||"").replace("-"," ")," reminder"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>G(k.id),className:`p-2 rounded-lg transition-colors ${k.isActive?"text-success-600 bg-success-100 hover:bg-success-200":"text-secondary-400 bg-secondary-100 hover:bg-secondary-200"}`,title:k.isActive?"Disable template":"Enable template",children:k.isActive?e.jsx(z1,{className:"w-4 h-4"}):e.jsx($1,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-secondary-400 hover:text-primary-600 transition-colors",children:e.jsx(Hp,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-700",children:"Timing"}),e.jsxs("p",{className:"text-sm text-secondary-600",children:[((H=k.timing)==null?void 0:H.value)||0," ",((Q=k.timing)==null?void 0:Q.unit)||"hours"," ",((J=k.timing)==null?void 0:J.when)||"before"," event"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-700",children:"Methods"}),e.jsx("div",{className:"flex gap-2 mt-1",children:(k.methods||[]).map(L=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs bg-secondary-100 text-secondary-700 px-2 py-1 rounded",children:[L==="email"?e.jsx(Yt,{className:"w-3 h-3"}):e.jsx(bs,{className:"w-3 h-3"}),L]},L))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-700",children:"Subject"}),e.jsx("p",{className:"text-sm text-secondary-600 truncate",children:k.subject||"No subject"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-700",children:"Message Preview"}),e.jsx("p",{className:"text-sm text-secondary-600 line-clamp-3",children:k.message||"No message"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-secondary-200 flex justify-between items-center",children:[e.jsx("span",{className:`status-badge ${k.isActive?"status-active":"status-inactive"}`,children:k.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>W(k),className:"btn-ghost btn-sm",children:[e.jsx(nr,{className:"w-3 h-3"}),"Edit"]}),e.jsxs("button",{onClick:()=>O(k.id,k.name||"Unknown Template"),className:"btn-ghost btn-sm text-error-600 hover:text-error-900",children:[e.jsx(Ls,{className:"w-3 h-3"}),"Delete"]})]})]})]},k.id)})})]}),Se=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Notification Settings"}),e.jsx("p",{className:"text-secondary-600",children:"Configure email and SMS notification providers"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Yt,{className:"w-6 h-6 text-info-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:"Email Configuration"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"SMTP settings for email notifications"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700",children:"Enable Email"}),e.jsx("button",{onClick:()=>z("emailEnabled",!N.emailEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${N.emailEnabled?"bg-primary-600":"bg-secondary-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${N.emailEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"SMTP Server"}),e.jsx("input",{type:"text",value:N.emailProvider.smtp,onChange:k=>ie("smtp",k.target.value),className:"form-input",placeholder:"smtp.gmail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Port"}),e.jsx("input",{type:"number",value:N.emailProvider.port,onChange:k=>ie("port",k.target.value),className:"form-input",placeholder:"587"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Username"}),e.jsx("input",{type:"email",value:N.emailProvider.username,onChange:k=>ie("username",k.target.value),className:"form-input",placeholder:"your-email@gmail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",value:N.emailProvider.password,onChange:k=>ie("password",k.target.value),className:"form-input",placeholder:"••••••••"})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(bs,{className:"w-6 h-6 text-success-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:"SMS Configuration"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"SMS provider settings"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700",children:"Enable SMS"}),e.jsx("button",{onClick:()=>z("smsEnabled",!N.smsEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${N.smsEnabled?"bg-success-600":"bg-secondary-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${N.smsEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Service Provider"}),e.jsxs("select",{className:"form-select",children:[e.jsx("option",{value:"twilio",children:"Twilio"}),e.jsx("option",{value:"nexmo",children:"Nexmo"}),e.jsx("option",{value:"aws-sns",children:"AWS SNS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"API Key"}),e.jsx("input",{type:"password",value:N.smsProvider.apiKey,onChange:k=>de("apiKey",k.target.value),className:"form-input",placeholder:"••••••••••••••••"})]}),e.jsx("div",{className:"p-4 bg-warning-50 border border-warning-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-warning-800",children:[e.jsx("strong",{children:"Note:"})," SMS notifications require a valid API key from your chosen provider. Charges may apply based on your provider's pricing."]})})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 mb-4",children:"Business Information"}),e.jsx("p",{className:"text-sm text-secondary-600 mb-6",children:"This information will be used in reminder templates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Business Name"}),e.jsx("input",{type:"text",value:N.businessInfo.name,onChange:k=>xe("name",k.target.value),className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone Number"}),e.jsx("input",{type:"tel",value:N.businessInfo.phone,onChange:k=>xe("phone",k.target.value),className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",value:N.businessInfo.email,onChange:k=>xe("email",k.target.value),className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Website (Optional)"}),e.jsx("input",{type:"url",value:N.businessInfo.website||"",onChange:k=>xe("website",k.target.value),className:"form-input"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("textarea",{value:N.businessInfo.address,onChange:k=>xe("address",k.target.value),className:"form-textarea",rows:2})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:he,className:"btn-primary",children:"Save Settings"})})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsx("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Reminders & Notifications"}),e.jsx("p",{className:"text-secondary-600",children:"Manage automated reminders and notification settings"})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"tab-header",children:e.jsx("nav",{className:"tab-buttons",children:[{key:"reminders",label:"Active Reminders",count:S.length},{key:"templates",label:"Templates",count:C.length},{key:"settings",label:"Settings",count:0}].map(k=>e.jsxs("button",{onClick:()=>t(k.key),className:`tab-button ${s===k.key?"tab-button-active":"tab-button-inactive"}`,children:[k.label," ",k.count>0&&`(${k.count})`]},k.key))})}),e.jsxs("div",{className:"p-6",children:[s==="reminders"&&Ce(),s==="templates"&&V(),s==="settings"&&Se()]})]})]}),l&&e.jsx(b8,{onClose:()=>o(!1),onSave:Z,isLoading:_}),c&&v&&e.jsx(j8,{onClose:()=>{d(!1),x(null)},onSave:I,isLoading:_,reminder:v}),u&&e.jsx(N8,{onClose:()=>{m(!1),j(null)},onSave:$,isLoading:_,template:g||void 0,isEditing:!!g}),h&&f&&e.jsx(w8,{onClose:()=>{y(!1),p(null)},onConfirm:A,title:`Delete ${f.type==="reminder"?"Reminder":"Template"}`,message:`Are you sure you want to delete this ${f.type}? This action cannot be undone.`,itemName:f.name,isLoading:_})]})}class C8{async getInventoryItems(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/inventory/items?${a.toString()}`)}async getInventoryItem(t){return M.get(`/inventory/items/${t}`)}async createInventoryItem(t){return M.post("/inventory/items",t)}async updateInventoryItem(t,a){return M.put(`/inventory/items/${t}`,a)}async deleteInventoryItem(t){return M.delete(`/inventory/items/${t}`)}async adjustStock(t,a,r,n){return M.post(`/inventory/items/${t}/adjust-stock`,{quantity:a,reason:r,notes:n})}async getLowStockItems(){return M.get("/inventory/items/low-stock")}async getOutOfStockItems(){return M.get("/inventory/items/out-of-stock")}async getInventoryStats(){return M.get("/inventory/items/stats/overview")}async getTransactions(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/inventory/transactions?${a.toString()}`)}async getTransaction(t){return M.get(`/inventory/transactions/${t}`)}async createTransaction(t){return M.post("/inventory/transactions",t)}async getTransactionStats(t,a){const r=new URLSearchParams;return t&&r.append("startDate",t),a&&r.append("endDate",a),M.get(`/inventory/transactions/stats/overview?${r.toString()}`)}async getPurchaseOrders(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/inventory/purchase-orders?${a.toString()}`)}async getPurchaseOrder(t){return M.get(`/inventory/purchase-orders/${t}`)}async createPurchaseOrder(t){return M.post("/inventory/purchase-orders",t)}async updatePurchaseOrder(t,a){return M.put(`/inventory/purchase-orders/${t}`,a)}async deletePurchaseOrder(t){return M.delete(`/inventory/purchase-orders/${t}`)}async updatePurchaseOrderStatus(t,a){return M.patch(`/inventory/purchase-orders/${t}/status`,{status:a})}async receivePurchaseOrder(t,a){return M.post(`/inventory/purchase-orders/${t}/receive`,{receivedItems:a})}async getPurchaseOrderStats(t,a){const r=new URLSearchParams;return t&&r.append("startDate",t),a&&r.append("endDate",a),M.get(`/inventory/purchase-orders/stats/overview?${r.toString()}`)}async getSuppliers(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/inventory/suppliers?${a.toString()}`)}async getSupplier(t){return M.get(`/inventory/suppliers/${t}`)}async createSupplier(t){return M.post("/inventory/suppliers",t)}async updateSupplier(t,a){return M.put(`/inventory/suppliers/${t}`,a)}async deleteSupplier(t){return M.delete(`/inventory/suppliers/${t}`)}async getCategories(){return M.get("/inventory/categories")}async getLocations(){return M.get("/inventory/locations")}async exportInventory(t="csv"){return M.get(`/inventory/export?format=${t}`)}async importInventory(t){const a=new FormData;return a.append("file",t),M.post("/inventory/import",a,{headers:{"Content-Type":"multipart/form-data"}})}}const _t=new C8,Za=Y("inventory/fetchItems",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await _t.getInventoryItems(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch inventory items")}}),qf=Y("inventory/createInventoryItem",async(s,{rejectWithValue:t})=>{var a,r;try{return(await _t.createInventoryItem(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create inventory item")}}),Yf=Y("inventory/updateInventoryItem",async({id:s,itemData:t},{rejectWithValue:a})=>{var r,n;try{return(await _t.updateInventoryItem(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update inventory item")}}),Kf=Y("inventory/deleteInventoryItem",async(s,{rejectWithValue:t})=>{var a,r;try{return await _t.deleteInventoryItem(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete inventory item")}}),k8=Y("inventory/adjustStock",async({id:s,adjustmentData:t},{rejectWithValue:a})=>{var r,n;try{return(await _t.adjustStock(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to adjust stock")}}),Ql=Y("inventory/fetchStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await _t.getInventoryStats()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch inventory stats")}}),Vr=Y("inventory/fetchTransactions",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await _t.getTransactions(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch transactions")}}),_8=Y("inventory/createTransaction",async(s,{rejectWithValue:t})=>{var a,r;try{return(await _t.createTransaction(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create transaction")}}),y2=Y("inventory/fetchTransactionStats",async({startDate:s,endDate:t}={},{rejectWithValue:a})=>{var r,n;try{return(await _t.getTransactionStats(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch transaction stats")}}),Da=Y("inventory/fetchPurchaseOrders",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await _t.getPurchaseOrders(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch purchase orders")}}),Gf=Y("inventory/createPurchaseOrder",async(s,{rejectWithValue:t})=>{var a,r;try{return(await _t.createPurchaseOrder(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create purchase order")}}),Xf=Y("inventory/updatePurchaseOrder",async({id:s,purchaseOrderData:t},{rejectWithValue:a})=>{var r,n;try{return(await _t.updatePurchaseOrder(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update purchase order")}}),Qf=Y("inventory/deletePurchaseOrder",async(s,{rejectWithValue:t})=>{var a,r;try{return await _t.deletePurchaseOrder(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete purchase order")}}),A8=Y("inventory/receivePurchaseOrder",async({id:s,receivedItems:t},{rejectWithValue:a})=>{var r,n;try{return(await _t.receivePurchaseOrder(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to receive purchase order")}}),r0=Y("inventory/fetchPurchaseOrderStats",async({startDate:s,endDate:t}={},{rejectWithValue:a})=>{var r,n;try{return(await _t.getPurchaseOrderStats(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch purchase order stats")}}),Hr=Y("inventory/fetchSuppliers",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await _t.getSuppliers(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch suppliers")}}),Jf=Y("inventory/createSupplier",async(s,{rejectWithValue:t})=>{var a,r;try{return(await _t.createSupplier(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create supplier")}}),Zf=Y("inventory/updateSupplier",async({id:s,supplierData:t},{rejectWithValue:a})=>{var r,n;try{return(await _t.updateSupplier(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update supplier")}}),v2=Y("inventory/deleteSupplier",async(s,{rejectWithValue:t})=>{var a,r;try{return await _t.deleteSupplier(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete supplier")}}),Jl=Y("inventory/fetchCategories",async(s,{rejectWithValue:t})=>{var a,r;try{return(await _t.getCategories()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch categories")}}),Zl=Y("inventory/fetchLocations",async(s,{rejectWithValue:t})=>{var a,r;try{return(await _t.getLocations()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch locations")}}),T8={items:[],transactions:[],suppliers:[],purchaseOrders:[],categories:[],locations:[],stats:null,transactionStats:null,purchaseOrderStats:null,itemsLoading:!1,transactionsLoading:!1,suppliersLoading:!1,purchaseOrdersLoading:!1,statsLoading:!1,error:null};Rt({name:"inventory",initialState:T8,reducers:{clearInventoryError:s=>{s.error=null},clearInventoryItems:s=>{s.items=[]},clearInventoryTransactions:s=>{s.transactions=[]},clearSuppliers:s=>{s.suppliers=[]},clearPurchaseOrders:s=>{s.purchaseOrders=[]}},extraReducers:s=>{s.addCase(Za.pending,t=>{t.itemsLoading=!0,t.error=null}).addCase(Za.fulfilled,(t,a)=>{t.itemsLoading=!1,t.items=a.payload.data||a.payload}).addCase(Za.rejected,(t,a)=>{t.itemsLoading=!1,t.error=a.payload}).addCase(qf.fulfilled,(t,a)=>{t.items.push(a.payload)}).addCase(Yf.fulfilled,(t,a)=>{const r=t.items.findIndex(n=>n._id===a.payload._id);r!==-1&&(t.items[r]=a.payload)}).addCase(Kf.fulfilled,(t,a)=>{t.items=t.items.filter(r=>r._id!==a.payload)}).addCase(k8.fulfilled,(t,a)=>{const r=t.items.findIndex(n=>n._id===a.payload._id);r!==-1&&(t.items[r]=a.payload)}),s.addCase(Vr.pending,t=>{t.transactionsLoading=!0,t.error=null}).addCase(Vr.fulfilled,(t,a)=>{t.transactionsLoading=!1,t.transactions=a.payload.data||a.payload}).addCase(Vr.rejected,(t,a)=>{t.transactionsLoading=!1,t.error=a.payload}).addCase(_8.fulfilled,(t,a)=>{t.transactions.unshift(a.payload)}),s.addCase(Da.pending,t=>{t.purchaseOrdersLoading=!0,t.error=null}).addCase(Da.fulfilled,(t,a)=>{t.purchaseOrdersLoading=!1,t.purchaseOrders=a.payload.data||a.payload}).addCase(Da.rejected,(t,a)=>{t.purchaseOrdersLoading=!1,t.error=a.payload}).addCase(Gf.fulfilled,(t,a)=>{t.purchaseOrders.push(a.payload)}).addCase(Xf.fulfilled,(t,a)=>{const r=t.purchaseOrders.findIndex(n=>n._id===a.payload._id);r!==-1&&(t.purchaseOrders[r]=a.payload)}).addCase(Qf.fulfilled,(t,a)=>{t.purchaseOrders=t.purchaseOrders.filter(r=>r._id!==a.payload)}).addCase(A8.fulfilled,(t,a)=>{const r=t.purchaseOrders.findIndex(n=>n._id===a.payload._id);r!==-1&&(t.purchaseOrders[r]=a.payload)}),s.addCase(Hr.pending,t=>{t.suppliersLoading=!0,t.error=null}).addCase(Hr.fulfilled,(t,a)=>{t.suppliersLoading=!1,t.suppliers=a.payload.data||a.payload}).addCase(Hr.rejected,(t,a)=>{t.suppliersLoading=!1,t.error=a.payload}).addCase(Jf.fulfilled,(t,a)=>{t.suppliers.push(a.payload)}).addCase(Zf.fulfilled,(t,a)=>{const r=t.suppliers.findIndex(n=>n._id===a.payload._id);r!==-1&&(t.suppliers[r]=a.payload)}).addCase(v2.fulfilled,(t,a)=>{t.suppliers=t.suppliers.filter(r=>r._id!==a.payload)}),s.addCase(Ql.pending,t=>{t.statsLoading=!0}).addCase(Ql.fulfilled,(t,a)=>{t.statsLoading=!1,t.stats=a.payload}).addCase(Ql.rejected,t=>{t.statsLoading=!1}).addCase(y2.fulfilled,(t,a)=>{t.transactionStats=a.payload}).addCase(r0.fulfilled,(t,a)=>{t.purchaseOrderStats=a.payload}),s.addCase(Jl.fulfilled,(t,a)=>{t.categories=a.payload}).addCase(Zl.fulfilled,(t,a)=>{t.locations=a.payload})}});function P8({isOpen:s,onClose:t,item:a,mode:r}){const n=Ue(),{suppliers:i,categories:l,locations:o}=je(x=>x.inventory),[c,d]=b.useState({name:"",description:"",partNumber:"",category:"",subcategory:"",brand:"",model:"",year:"",location:"",quantityOnHand:0,minStockLevel:0,maxStockLevel:0,reorderPoint:0,costPrice:0,sellingPrice:0,supplierId:"",isActive:!0}),[u,m]=b.useState({}),[h,y]=b.useState(!1);b.useEffect(()=>{d(a&&r==="edit"?{name:a.name,description:a.description,partNumber:a.partNumber,category:a.category,subcategory:a.subcategory||"",brand:a.brand||"",model:a.model||"",year:a.year||"",location:a.location,quantityOnHand:a.quantityOnHand,minStockLevel:a.minStockLevel,maxStockLevel:a.maxStockLevel,reorderPoint:a.reorderPoint||0,costPrice:a.costPrice,sellingPrice:a.sellingPrice,supplierId:typeof a.supplier=="object"&&a.supplier?a.supplier._id||a.supplier.id:a.supplier,isActive:a.isActive}:{name:"",description:"",partNumber:"",category:"",subcategory:"",brand:"",model:"",year:"",location:"",quantityOnHand:0,minStockLevel:0,maxStockLevel:0,reorderPoint:0,costPrice:0,sellingPrice:0,supplierId:"",isActive:!0}),m({})},[a,r,s]);const g=()=>{const x={};return c.name.trim()||(x.name="Name is required"),c.partNumber.trim()||(x.partNumber="Part number is required"),c.category||(x.category="Category is required"),c.location||(x.location="Location is required"),c.supplierId||(x.supplierId="Supplier is required"),c.costPrice<0&&(x.costPrice="Cost price must be positive"),c.sellingPrice<0&&(x.sellingPrice="Selling price must be positive"),c.quantityOnHand<0&&(x.quantityOnHand="Quantity must be positive"),c.minStockLevel<0&&(x.minStockLevel="Minimum stock level must be positive"),c.maxStockLevel<c.minStockLevel&&(x.maxStockLevel="Maximum stock level must be greater than minimum"),m(x),Object.keys(x).length===0},j=async()=>{if(g()){y(!0);try{if(r==="add")await n(qf(c)).unwrap(),P.success("Inventory item created successfully!");else{if(!(a!=null&&a._id)){P.error("Item ID is missing");return}const x={...c};await n(Yf({id:a._id,itemData:x})).unwrap(),P.success("Inventory item updated successfully!")}t()}catch(x){P.error(x.message||"Failed to save inventory item")}finally{y(!1)}}},v=(x,f)=>{d(p=>({...p,[x]:f})),u[x]&&m(p=>({...p,[x]:""}))};return s?e.jsx(pe,{isOpen:s,onClose:t,title:r==="add"?"Add New Inventory Item":"Edit Inventory Item",submitText:r==="add"?"Add Item":"Update Item",onSubmit:j,submitColor:"bg-blue-600",size:"xl",children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:c.name,onChange:x=>v("name",x.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.name?"border-red-500":"border-gray-200"}`,placeholder:"Enter item name"}),u.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Number *"}),e.jsx("input",{type:"text",value:c.partNumber,onChange:x=>v("partNumber",x.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.partNumber?"border-red-500":"border-gray-200"}`,placeholder:"Enter part number"}),u.partNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.partNumber})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:x=>v("description",x.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter item description"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{value:c.category,onChange:x=>v("category",x.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.category?"border-red-500":"border-gray-200"}`,children:[e.jsx("option",{value:"",children:"Select category"}),(l&&Array.isArray(l)?l:[]).map(x=>e.jsx("option",{value:x,children:x},x))]}),u.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory"}),e.jsx("input",{type:"text",value:c.subcategory,onChange:x=>v("subcategory",x.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter subcategory"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),e.jsx("input",{type:"text",value:c.brand,onChange:x=>v("brand",x.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter brand"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),e.jsx("input",{type:"text",value:c.model,onChange:x=>v("model",x.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter model"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("input",{type:"text",value:c.year,onChange:x=>v("year",x.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter year"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),e.jsxs("select",{value:c.location,onChange:x=>v("location",x.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.location?"border-red-500":"border-gray-200"}`,children:[e.jsx("option",{value:"",children:"Select location"}),(o&&Array.isArray(o)?o:[]).map(x=>e.jsx("option",{value:x,children:x},x))]}),u.location&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier *"}),e.jsxs("select",{value:c.supplierId,onChange:x=>v("supplierId",x.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.supplierId?"border-red-500":"border-gray-200"}`,children:[e.jsx("option",{value:"",children:"Select supplier"}),(i&&Array.isArray(i)?i:[]).map(x=>e.jsx("option",{value:x._id,children:x.name},x._id))]}),u.supplierId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.supplierId})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock *"}),e.jsx("input",{type:"number",value:c.quantityOnHand,onChange:x=>v("quantityOnHand",parseInt(x.target.value)||0),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.quantityOnHand?"border-red-500":"border-gray-200"}`,min:"0"}),u.quantityOnHand&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.quantityOnHand})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock Level"}),e.jsx("input",{type:"number",value:c.minStockLevel,onChange:x=>v("minStockLevel",parseInt(x.target.value)||0),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.minStockLevel?"border-red-500":"border-gray-200"}`,min:"0"}),u.minStockLevel&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.minStockLevel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Stock Level"}),e.jsx("input",{type:"number",value:c.maxStockLevel,onChange:x=>v("maxStockLevel",parseInt(x.target.value)||0),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.maxStockLevel?"border-red-500":"border-gray-200"}`,min:"0"}),u.maxStockLevel&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.maxStockLevel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder Point"}),e.jsx("input",{type:"number",value:c.reorderPoint,onChange:x=>v("reorderPoint",parseInt(x.target.value)||0),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Price *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-gray-500",children:"$"}),e.jsx("input",{type:"number",value:c.costPrice,onChange:x=>v("costPrice",parseFloat(x.target.value)||0),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.costPrice?"border-red-500":"border-gray-200"}`,min:"0",step:"0.01"})]}),u.costPrice&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.costPrice})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Price *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-gray-500",children:"$"}),e.jsx("input",{type:"number",value:c.sellingPrice,onChange:x=>v("sellingPrice",parseFloat(x.target.value)||0),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${u.sellingPrice?"border-red-500":"border-gray-200"}`,min:"0",step:"0.01"})]}),u.sellingPrice&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.sellingPrice})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.isActive,onChange:x=>v("isActive",x.target.checked),className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-md"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})})]})}):null}const D8=({item:s,isOpen:t,onClose:a,onDelete:r})=>{var d,u;const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{try{i(!0),o(null),await r(s._id),a()}catch(m){o(m instanceof Error?m.message:"Failed to delete inventory item")}finally{i(!1)}};return s?e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Inventory Item",submitText:"Delete Item",onSubmit:c,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-4 space-y-4",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the inventory item."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Item Name:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"SKU:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.sku})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Category:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.category})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Current Stock:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.quantity})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Unit Price:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["$",((d=s.unitPrice)==null?void 0:d.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Supplier:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:((u=s.supplier)==null?void 0:u.name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Location:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.location||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Created:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this inventory item will also remove:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Stock history"}),e.jsx("li",{children:"Purchase order references"}),e.jsx("li",{children:"Usage records"}),e.jsx("li",{children:"Cost tracking data"}),e.jsx("li",{children:"Inventory adjustments"})]})]})]})}):null};function M8({isOpen:s,onClose:t,supplier:a,mode:r}){const n=Ue(),[i,l]=b.useState({name:"",contactPerson:"",email:"",phone:"",address:{street:"",city:"",state:"",zipCode:"",country:"USA"},website:"",paymentTerms:"",rating:0,notes:"",isActive:!0}),[o,c]=b.useState({}),[d,u]=b.useState(!1);b.useEffect(()=>{var g;l(a&&r==="edit"?{name:a.name,contactPerson:((g=a.contactPerson)==null?void 0:g.name)||"",email:a.email,phone:a.phone,address:a.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},website:a.website||"",paymentTerms:a.paymentTerms,rating:a.rating,notes:a.notes||"",isActive:a.isActive}:{name:"",contactPerson:"",email:"",phone:"",address:{street:"",city:"",state:"",zipCode:"",country:"USA"},website:"",paymentTerms:"",rating:0,notes:"",isActive:!0}),c({})},[a,r,s]);const m=()=>{var j;const g={};return i.name.trim()||(g.name="Name is required"),i.contactPerson.trim()||(g.contactPerson="Contact person is required"),i.email.trim()||(g.email="Email is required"),i.phone.trim()||(g.phone="Phone is required"),(j=i.address.street)!=null&&j.trim()||(g.address="Street address is required"),i.paymentTerms.trim()||(g.paymentTerms="Payment terms is required"),(i.rating<0||i.rating>5)&&(g.rating="Rating must be between 0 and 5"),c(g),Object.keys(g).length===0},h=async g=>{if(g.preventDefault(),!!m()){u(!0);try{if(r==="add")await n(Jf(i)).unwrap();else if(a){const j={...i};await n(Zf({id:a._id||a.id,supplierData:j})).unwrap()}t()}catch(j){console.error("Error saving supplier:",j)}finally{u(!1)}}},y=(g,j)=>{l(v=>({...v,[g]:j})),o[g]&&c(v=>({...v,[g]:""}))};return s?e.jsx(pe,{isOpen:s,onClose:t,title:r==="add"?"Add New Supplier":"Edit Supplier",submitText:r==="add"?"Add Supplier":"Save Changes",onSubmit:h,submitColor:"bg-blue-600",size:"xl",children:e.jsxs("form",{onSubmit:h,className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:g=>y("name",g.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${o.name?"border-red-500":"border-gray-200"}`,placeholder:"Enter company name"}),o.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),e.jsx("input",{type:"text",value:i.contactPerson,onChange:g=>y("contactPerson",g.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${o.contactPerson?"border-red-500":"border-gray-200"}`,placeholder:"Enter contact person name"}),o.contactPerson&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.contactPerson})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:i.email,onChange:g=>y("email",g.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${o.email?"border-red-500":"border-gray-200"}`,placeholder:"Enter email address"}),o.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",value:i.phone,onChange:g=>y("phone",g.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${o.phone?"border-red-500":"border-gray-200"}`,placeholder:"Enter phone number"}),o.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.phone})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",value:i.address.street,onChange:g=>y("address",{...i.address,street:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter street address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",value:i.address.city,onChange:g=>y("address",{...i.address,city:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),e.jsx("input",{type:"text",value:i.address.state,onChange:g=>y("address",{...i.address,state:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter state/province"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP/Postal Code"}),e.jsx("input",{type:"text",value:i.address.zipCode,onChange:g=>y("address",{...i.address,zipCode:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter ZIP/postal code"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsx("input",{type:"text",value:i.address.country,onChange:g=>y("address",{...i.address,country:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter country"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsx("input",{type:"url",value:i.website,onChange:g=>y("website",g.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter company website"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms *"}),e.jsx("input",{type:"text",value:i.paymentTerms,onChange:g=>y("paymentTerms",g.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${o.paymentTerms?"border-red-500":"border-gray-200"}`,placeholder:"e.g., Net 30, COD, etc."}),o.paymentTerms&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.paymentTerms})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:g=>y("notes",g.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter any additional notes"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.isActive,onChange:g=>y("isActive",g.target.checked),className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-md"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})})]})}):null}const E8=({supplier:s,isOpen:t,onClose:a,onDelete:r})=>{var d,u,m,h;const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{try{i(!0),o(null),await r(s.id),a()}catch(y){o(y instanceof Error?y.message:"Failed to delete supplier")}finally{i(!1)}};return e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Supplier",submitText:"Delete Supplier",onSubmit:c,isLoading:n,submitButtonVariant:"error",children:e.jsxs("div",{className:"p-4 space-y-4",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the supplier."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Supplier Name:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Contact Person:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.contactPerson})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Address:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:[(d=s.address)==null?void 0:d.street,", ",(u=s.address)==null?void 0:u.city,", ",(m=s.address)==null?void 0:m.state," ",(h=s.address)==null?void 0:h.zipCode]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.isActive?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this supplier will also affect:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Associated inventory items"}),e.jsx("li",{children:"Purchase order history"}),e.jsx("li",{children:"Cost tracking data"}),e.jsx("li",{children:"Supplier performance metrics"})]})]})]})})};function I8({isOpen:s,onClose:t,purchaseOrder:a,mode:r}){const n=Ue(),{suppliers:i,items:l}=je(p=>p.inventory),[o,c]=b.useState({poNumber:"",supplierId:"",items:[],expectedDeliveryDate:new Date().toISOString().split("T")[0],tax:0,shipping:0,notes:""}),[d,u]=b.useState({}),[m,h]=b.useState(!1);b.useEffect(()=>{if(a&&r==="edit"){console.log("Editing purchase order:",a);const p=(a.items||[]).map(w=>{console.log("Processing item:",w);let S="";return typeof w=="object"?w.item?S=typeof w.item=="object"?w.item._id||w.item.id:w.item:w._id&&(S=w._id):typeof w=="string"&&(S=w),{itemId:S,quantity:typeof w=="object"&&w.quantity||1,unitPrice:typeof w=="object"&&w.unitPrice||0}});let N="";typeof a.supplier=="object"&&a.supplier?N=a.supplier._id||a.supplier.id:N=a.supplier||"",c({poNumber:a.poNumber||"",supplierId:N,items:p,expectedDeliveryDate:a.expectedDate?a.expectedDate.split("T")[0]:new Date().toISOString().split("T")[0],tax:a.tax||0,shipping:a.shipping||0,notes:a.notes||""})}else c({poNumber:"",supplierId:"",items:[],expectedDeliveryDate:new Date().toISOString().split("T")[0],tax:0,shipping:0,notes:""});u({})},[a,r,s]);const y=()=>{const p={};return o.supplierId.trim()||(p.supplierId="Supplier is required"),o.expectedDeliveryDate||(p.expectedDeliveryDate="Expected delivery date is required"),o.items.length===0&&(p.items="At least one item is required"),u(p),Object.keys(p).length===0},g=async()=>{if(y()){h(!0);try{if(r==="add")await n(Gf(o)).unwrap(),P.success("Purchase order created successfully!");else{if(!(a!=null&&a.id)){P.error("Purchase order ID is missing");return}const p={...o};await n(Xf({id:a.id,purchaseOrderData:p})).unwrap(),P.success("Purchase order updated successfully!")}n(Da({})),t()}catch(p){console.error("Error saving purchase order:",p),P.error(p.message||"Failed to save purchase order")}finally{h(!1)}}},j=(p,N)=>{c(w=>({...w,[p]:N})),d[p]&&u(w=>({...w,[p]:""}))},v=()=>{const p={itemId:"",quantity:1,unitPrice:0};c(N=>({...N,items:[...N.items,p]}))},x=p=>{c(N=>({...N,items:N.items.filter((w,S)=>S!==p)}))},f=(p,N,w)=>{c(S=>{const C=[...S.items];return C[p]={...C[p],[N]:w},{...S,items:C}})};return s?e.jsx(pe,{isOpen:s,onClose:t,title:r==="add"?"Create Purchase Order":"Edit Purchase Order",submitText:r==="add"?"Create PO":"Save Changes",onSubmit:g,submitColor:"bg-blue-600",size:"xl",children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PO Number"}),e.jsx("input",{type:"text",value:o.poNumber,onChange:p=>j("poNumber",p.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier *"}),e.jsxs("select",{value:o.supplierId,onChange:p=>j("supplierId",p.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${d.supplierId?"border-red-500":"border-gray-200"}`,children:[e.jsx("option",{value:"",children:"Select supplier"}),(i&&Array.isArray(i)?i:[]).map(p=>{const N=p._id||p.id;return e.jsx("option",{value:N,children:p.name},N)})]}),d.supplierId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.supplierId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),e.jsx("input",{type:"date",value:o.expectedDeliveryDate,onChange:p=>j("expectedDeliveryDate",p.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white ${d.expectedDeliveryDate?"border-red-500":"border-gray-200"}`}),d.expectedDeliveryDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.expectedDeliveryDate})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-gray-500",children:"$"}),e.jsx("input",{type:"number",value:o.tax,onChange:p=>j("tax",parseFloat(p.target.value)||0),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",min:"0",step:"0.01"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Cost"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-gray-500",children:"$"}),e.jsx("input",{type:"number",value:o.shipping,onChange:p=>j("shipping",parseFloat(p.target.value)||0),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",min:"0",step:"0.01"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:o.notes,onChange:p=>j("notes",p.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Additional notes for this purchase order..."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Items"}),e.jsxs("button",{type:"button",onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Add Item"]})]}),o.items.map((p,N)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 mb-4 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Item ",N+1]}),e.jsx("button",{type:"button",onClick:()=>x(N),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",children:e.jsx(rt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item *"}),e.jsxs("select",{value:p.itemId,onChange:w=>f(N,"itemId",w.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white hover:bg-gray-50",children:[e.jsx("option",{value:"",children:"Select item"}),(l&&Array.isArray(l)?l:[]).map(w=>{const S=w._id||w.id;return e.jsxs("option",{value:S,children:[w.name," - ",w.partNumber]},S)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),e.jsx("input",{type:"number",value:p.quantity,onChange:w=>f(N,"quantity",parseInt(w.target.value)||0),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white hover:bg-gray-50",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price *"}),e.jsx("input",{type:"number",value:p.unitPrice,onChange:w=>f(N,"unitPrice",parseFloat(w.target.value)||0),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white hover:bg-gray-50",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Price"}),e.jsx("input",{type:"number",value:p.quantity*p.unitPrice,readOnly:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-100"})]})]})]},N))]}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["Total: $",(o.items.reduce((p,N)=>p+N.quantity*N.unitPrice,0)+(o.tax||0)+(o.shipping||0)).toFixed(2)]})})})})]})}):null}const R8=({purchaseOrder:s,isOpen:t,onClose:a,onDelete:r})=>{var d,u,m;const[n,i]=b.useState(!1),[l,o]=b.useState(null),c=async()=>{try{i(!0),o(null),await r(s._id),a()}catch(h){o(h instanceof Error?h.message:"Failed to delete purchase order")}finally{i(!1)}};return s?e.jsx(pe,{isOpen:t,onClose:a,title:"Delete Purchase Order",submitText:"Delete Purchase Order",onSubmit:c,submitColor:"bg-red-600",children:e.jsxs("div",{className:"p-4 space-y-4",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the purchase order."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"PO Number:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["#",s.poNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Supplier:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:((d=s.supplier)==null?void 0:d.name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Order Date:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.orderDate?new Date(s.orderDate).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Expected Delivery:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.expectedDelivery?new Date(s.expectedDelivery).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Total Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["$",((u=s.totalAmount)==null?void 0:u.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Items:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:[((m=s.items)==null?void 0:m.length)||0," item(s)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Created:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ Warning:"}),e.jsx("p",{children:"Deleting this purchase order will also remove:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"All line items"}),e.jsx("li",{children:"Delivery tracking"}),e.jsx("li",{children:"Payment records"}),e.jsx("li",{children:"Inventory adjustments"}),e.jsx("li",{children:"Supplier order history"})]})]})]})}):null},_c=(s,t)=>[t.join(","),...s.map(r=>t.map(n=>{const i=r[n]||r[n.toLowerCase()]||"";return typeof i=="string"&&(i.includes(",")||i.includes('"'))?`"${i.replace(/"/g,'""')}"`:i}).join(","))].join(`
`),Ac=(s,t)=>{const a=new Blob([s],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),n=URL.createObjectURL(a);r.setAttribute("href",n),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)};function L8(){const[s,t]=b.useState("inventory"),[a,r]=b.useState(""),[n,i]=b.useState("all"),[l,o]=b.useState("all"),[c,d]=b.useState("all"),[u,m]=b.useState(!1),[h,y]=b.useState(!1),[g,j]=b.useState(null),[v,x]=b.useState("add"),[f,p]=b.useState(!1),[N,w]=b.useState(!1),[S,C]=b.useState(null),[T,_]=b.useState("add"),[F,D]=b.useState(!1),[R,U]=b.useState(!1),[O,E]=b.useState(null),[W,Z]=b.useState("add"),{items:I,transactions:$,suppliers:A,purchaseOrders:G,categories:z,locations:ie,loading:de,error:xe}=je(B=>B.inventory),he=Ue();b.useEffect(()=>{he(Za({})),he(Vr({})),he(Hr({})),he(Da({})),he(Ql()),he(y2({})),he(r0({})),he(Jl()),he(Zl())},[he]);const Pe=()=>{const B=new Date().toISOString().split("T")[0];switch(s){case"inventory":ee(B);break;case"transactions":Ce(B);break;case"suppliers":V(B);break;case"purchase-orders":Se(B);break}},ee=B=>{const Re=(I&&Array.isArray(I)?I:[]).filter(q=>q.isActive),Le=["Name","Part Number","Description","Category","Location","Supplier","Quantity On Hand","Min Stock Level","Max Stock Level","Cost Price","Selling Price","Total Value","Status"],tt=Re.map(q=>({Name:q.name||"","Part Number":q.partNumber||"",Description:q.description||"",Category:q.category||"",Location:typeof q.location=="object"&&q.location?`${q.location.warehouse||""} ${q.location.shelf||""} ${q.location.bin||""}`.trim():q.location||"",Supplier:typeof q.supplier=="object"&&q.supplier?q.supplier.name:q.supplier||"","Quantity On Hand":q.currentStock||0,"Min Stock Level":q.minimumStock||0,"Max Stock Level":q.maximumStock||0,"Cost Price":q.costPrice||0,"Selling Price":q.sellingPrice||0,"Total Value":((q.currentStock||0)*(q.costPrice||0)).toFixed(2),Status:se(q).status})),ds=_c(tt,Le);Ac(ds,`inventory-items-${B}.csv`)},Ce=B=>{const Re=($&&Array.isArray($)?$:[]).slice(0,1e3),Le=["Date","Time","Item Name","Part Number","Type","Quantity","Unit Cost","Total Cost","Reference","Notes","Employee"],tt=Re.map(q=>{const De=(I&&Array.isArray(I)?I:[]).find(gg=>(gg._id||gg.id)===q.itemId),us=new Date(q.date);return{Date:us.toLocaleDateString(),Time:us.toLocaleTimeString(),"Item Name":(De==null?void 0:De.name)||"Unknown Item","Part Number":(De==null?void 0:De.partNumber)||"N/A",Type:q.type,Quantity:q.quantity,"Unit Cost":q.unitCost||0,"Total Cost":q.totalCost||0,Reference:q.reference,Notes:q.notes||"",Employee:q.employeeName}}),ds=_c(tt,Le);Ac(ds,`inventory-transactions-${B}.csv`)},V=B=>{const Re=(A&&Array.isArray(A)?A:[]).filter(q=>q.isActive),Le=["Name","Contact Person","Email","Phone","Address","Website","Payment Terms","Rating","Notes","Item Count"],tt=Re.map(q=>{var De;return{Name:q.name,"Contact Person":((De=q.contactPerson)==null?void 0:De.name)||"",Email:q.email,Phone:q.phone,Address:typeof q.address=="object"&&q.address?`${q.address.street||""}, ${q.address.city||""}, ${q.address.state||""} ${q.address.zipCode||""}`:q.address||"",Website:q.website||"","Payment Terms":q.paymentTerms,Rating:q.rating,Notes:q.notes||"","Item Count":(I&&Array.isArray(I)?I:[]).filter(us=>typeof us.supplier=="object"&&us.supplier?us.supplier.name===q.name:us.supplier===q.name).length}}),ds=_c(tt,Le);Ac(ds,`suppliers-${B}.csv`)},Se=B=>{const Re=G&&Array.isArray(G)?G:[],Le=["PO Number","Supplier","Order Date","Expected Date","Items Count","Subtotal","Tax","Shipping","Total","Status","Notes"],tt=Re.map(q=>({"PO Number":q.poNumber||q.id,Supplier:q.supplierName||"","Order Date":new Date(q.orderDate).toLocaleDateString(),"Expected Date":q.expectedDate?new Date(q.expectedDate).toLocaleDateString():"","Items Count":(q.items&&Array.isArray(q.items)?q.items:[]).length,Subtotal:q.subtotal||0,Tax:q.tax||0,Shipping:q.shipping||0,Total:q.total||0,Status:q.status,Notes:q.notes||""})),ds=_c(tt,Le);Ac(ds,`purchase-orders-${B}.csv`)},k=(I&&Array.isArray(I)?I:[]).filter(B=>{const Re=(B.name||"").toLowerCase().includes(a.toLowerCase())||(B.partNumber||"").toLowerCase().includes(a.toLowerCase()),Le=n==="all"||B.category===n,tt=l==="all"||(typeof B.location=="object"&&B.location?`${B.location.warehouse||""} ${B.location.shelf||""} ${B.location.bin||""}`.trim()===l:B.location===l),ds=c==="all"||c==="low"&&(B.currentStock||0)<=(B.minimumStock||0)||c==="out"&&(B.currentStock||0)===0||c==="overstock"&&(B.currentStock||0)>(B.maximumStock||0);return Re&&Le&&tt&&ds&&B.isActive}),H=(I&&Array.isArray(I)?I:[]).filter(B=>(B.currentStock||0)<=(B.minimumStock||0)&&B.isActive),Q=(I&&Array.isArray(I)?I:[]).filter(B=>(B.currentStock||0)===0&&B.isActive),J=(I&&Array.isArray(I)?I:[]).reduce((B,Re)=>{const Le=Re.currentStock||0,tt=Re.costPrice||0;return B+Le*tt},0),L=(G&&Array.isArray(G)?G:[]).filter(B=>B.status==="sent"||B.status==="confirmed"),se=B=>{const Re=B.currentStock||0,Le=B.minimumStock||0,tt=B.maximumStock||0;return Re===0?{status:"Out of Stock",color:"text-red-600 bg-red-100"}:Re<=Le?{status:"Low Stock",color:"text-yellow-600 bg-yellow-100"}:Re>tt?{status:"Overstock",color:"text-purple-600 bg-purple-100"}:{status:"In Stock",color:"text-green-600 bg-green-100"}},K=()=>{x("add"),j(null),m(!0)},ae=B=>{x("edit"),j(B),m(!0)},ce=B=>{j(B),y(!0)},te=()=>{m(!1),j(null)},ve=()=>{y(!1),j(null)},ge=async B=>{try{await he(Kf(B)),he(Za({})),he(Ql()),y(!1),j(null)}catch(Re){console.error("Error deleting inventory item:",Re)}},xt=()=>{_("add"),C(null),p(!0)},cs=B=>{_("edit"),C(B),p(!0)},cr=B=>{C(B),w(!0)},Wm=()=>{p(!1),C(null)},qm=()=>{w(!1),C(null)},rl=()=>{Z("add"),E(null),D(!0)},Ym=B=>{Z("edit"),E(B),D(!0)},Km=B=>{E(B),U(!0)},nl=()=>{D(!1),E(null)},Gm=()=>{U(!1),E(null)},il=async B=>{try{await he(Qf(B)),he(Da({})),he(r0({})),U(!1),E(null)}catch(Re){console.error("Error deleting purchase order:",Re)}},Xm=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Inventory Management"}),e.jsx("p",{className:"text-gray-600",children:"Track parts, supplies, and stock levels"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Pe,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:K,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Add Item"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(I&&Array.isArray(I)?I:[]).filter(B=>B.isActive).length})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(od,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:H.length})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx(ot,{className:"w-6 h-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Q.length})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx(Em,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",J.toLocaleString()]})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(Ve,{className:"w-6 h-6 text-green-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search parts...",value:a,onChange:B=>r(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})}),e.jsx("div",{children:e.jsxs("select",{value:n,onChange:B=>i(B.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"all",children:"All Categories"}),z&&Array.isArray(z)&&z.map(B=>e.jsx("option",{value:B,children:B},B))]})}),e.jsx("div",{children:e.jsxs("select",{value:l,onChange:B=>o(B.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"all",children:"All Locations"}),ie&&Array.isArray(ie)&&ie.map(B=>e.jsx("option",{value:B,children:B},B))]})}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:B=>d(B.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"all",children:"All Stock Levels"}),e.jsx("option",{value:"low",children:"Low Stock"}),e.jsx("option",{value:"out",children:"Out of Stock"}),e.jsx("option",{value:"overstock",children:"Overstock"})]})}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>{r(""),i("all"),o("all"),d("all")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg flex items-center justify-center gap-2",children:[e.jsx(Ea,{className:"w-4 h-4"}),"Reset"]})})]})}),de?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Part Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Levels"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pricing"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((B,Re)=>{const Le=se(B);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["#",B.partNumber||"N/A"]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:B.description||""})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[e.jsx(Pf,{className:"w-3 h-3"}),B.category||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(pa,{className:"w-3 h-3"}),typeof B.location=="object"&&B.location?`${B.location.warehouse||""} ${B.location.shelf||""} ${B.location.bin||""}`.trim():B.location||"N/A"]}),e.jsx("div",{className:"text-xs text-gray-400",children:typeof B.supplier=="object"&&B.supplier?B.supplier.name:B.supplier||"N/A"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["On Hand: ",B.currentStock||0]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",B.minimumStock||0," | Max: ",B.maximumStock||0]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(B.currentStock||0)<=(B.minimumStock||0)?"bg-red-500":(B.currentStock||0)>(B.maximumStock||0)?"bg-purple-500":"bg-green-500"}`,style:{width:`${Math.min((B.currentStock||0)/(B.maximumStock||1)*100,100)}%`}})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:["Cost: $",(B.costPrice||0).toFixed(2)]}),e.jsxs("div",{className:"text-sm text-gray-900",children:["Sell: $",(B.sellingPrice||0).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Value: $",((B.currentStock||0)*(B.costPrice||0)).toFixed(2)]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Le.color}`,children:Le.status})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",title:"View details",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ae(B),className:"text-gray-600 hover:text-gray-900",title:"Edit",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ce(B),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(rt,{className:"w-4 h-4"})})]})})]},B._id||B.id||`item-${Re}`)})})]})})})]}),Qm=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Inventory Transactions"}),e.jsx("p",{className:"text-gray-600",children:"Track all inventory movements and adjustments"})]}),e.jsxs("button",{onClick:Pe,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),"Export"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:($&&Array.isArray($)?$:[]).slice(0,50).map((B,Re)=>{const Le=(I&&Array.isArray(I)?I:[]).find(tt=>(tt._id||tt.id)===B.itemId);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(B.date).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(B.date).toLocaleTimeString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(Le==null?void 0:Le.name)||"Unknown Item"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["#",(Le==null?void 0:Le.partNumber)||"N/A"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${B.type==="purchase"?"bg-green-100 text-green-800":B.type==="usage"?"bg-red-100 text-red-800":B.type==="adjustment"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:B.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`text-sm font-medium ${B.quantity>0?"text-green-600":"text-red-600"}`,children:[B.quantity>0?"+":"",B.quantity]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:B.totalCost?`$${(B.totalCost||0).toFixed(2)}`:B.unitCost?`$${(B.unitCost||0).toFixed(2)} ea`:"-"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:B.reference}),B.notes&&e.jsx("div",{className:"text-xs text-gray-500",children:B.notes})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:B.employeeName})})]},B.id||`transaction-${Re}`)})})]})})})]}),Jm=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Suppliers"}),e.jsx("p",{className:"text-gray-600",children:"Manage your parts suppliers and vendors"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Pe,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:xt,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Add Supplier"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(A&&Array.isArray(A)?A:[]).filter(B=>B.isActive).map((B,Re)=>{var Le;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:B.name}),e.jsx("p",{className:"text-sm text-gray-600",children:((Le=B.contactPerson)==null?void 0:Le.name)||"N/A"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((tt,ds)=>e.jsx("div",{className:`w-3 h-3 rounded-full ${ds<B.rating?"bg-yellow-400":"bg-gray-200"}`},ds))})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4",children:"📧"}),e.jsx("span",{className:"text-gray-600",children:B.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4",children:"📞"}),e.jsx("span",{className:"text-gray-600",children:B.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4",children:"💰"}),e.jsx("span",{className:"text-gray-600",children:B.paymentTerms})]})]}),B.notes&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600",children:B.notes})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[(I&&Array.isArray(I)?I:[]).filter(tt=>typeof tt.supplier=="object"&&tt.supplier?tt.supplier.name===B.name:tt.supplier===B.name).length," items"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>cs(B),className:"text-blue-600 hover:text-blue-900 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>cr(B),className:"text-red-600 hover:text-red-900 text-sm",children:"Delete"})]})]})]},B.id||`supplier-${Re}`)})})]}),Zm=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Purchase Orders"}),e.jsx("p",{className:"text-gray-600",children:"Track and manage purchase orders"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Pe,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:rl,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Create PO"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PO Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expected Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(G&&Array.isArray(G)?G:[]).map((B,Re)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",B.poNumber||B.id]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:typeof B.supplier=="object"&&B.supplier?B.supplier.name:B.supplierName||B.supplier||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(B.orderDate).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:B.expectedDate?new Date(B.expectedDate).toLocaleDateString():"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[(B.items&&Array.isArray(B.items)?B.items:[]).length," items"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",(B.total||0).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${B.status==="draft"?"bg-gray-100 text-gray-800":B.status==="sent"?"bg-blue-100 text-blue-800":B.status==="confirmed"?"bg-yellow-100 text-yellow-800":B.status==="received"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:B.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Ym(B),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Km(B),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(rt,{className:"w-4 h-4"})})]})})]},B.id||`po-${Re}`))})]})})})]});return e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Inventory Management"}),e.jsx("p",{className:"text-secondary-600",children:"Manage inventory, suppliers, and purchase orders"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{const B=new Date().toISOString().split("T")[0];s==="inventory"?ee(B):s==="transactions"?Ce(B):s==="suppliers"?V(B):s==="purchase-orders"&&Se(B)},className:"btn-secondary",children:[e.jsx(ns,{className:"w-4 h-4"}),"Export"]}),s!=="transactions"&&e.jsxs("button",{onClick:()=>{console.log("Button clicked, activeTab:",s),s==="inventory"?(console.log("Calling handleAddItem"),K()):s==="suppliers"?(console.log("Calling handleAddSupplier"),xt()):s==="purchase-orders"&&(console.log("Calling handleAddPurchaseOrder"),rl())},className:"btn-primary",children:[e.jsx(Ze,{className:"w-5 h-5"}),s==="inventory"?"Add Item":s==="suppliers"?"Add Supplier":"Add Purchase Order"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Items"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600",children:(I&&Array.isArray(I)?I:[]).filter(B=>B.isActive).length}),e.jsxs("p",{className:"text-sm text-secondary-500",children:["$",(I&&Array.isArray(I)?I:[]).reduce((B,Re)=>B+(Re.totalValue||0),0).toLocaleString()]})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(od,{className:"w-6 h-6 text-primary-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Transactions"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:($&&Array.isArray($)?$:[]).length}),e.jsx("p",{className:"text-sm text-secondary-500",children:"This Month"})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(Cn,{className:"w-6 h-6 text-info-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Active Suppliers"}),e.jsx("p",{className:"text-3xl font-bold text-success-600",children:(A&&Array.isArray(A)?A:[]).filter(B=>B.isActive).length}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Partners"})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(nt,{className:"w-6 h-6 text-success-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Purchase Orders"}),e.jsx("p",{className:"text-3xl font-bold text-warning-600",children:(G&&Array.isArray(G)?G:[]).length}),e.jsxs("p",{className:"text-sm text-secondary-500",children:["Pending: ",L.length]})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx(cT,{className:"w-6 h-6 text-warning-600"})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"w-4 h-4 text-primary-600"}),e.jsx("h3",{className:"text-base font-semibold text-secondary-900",children:"Inventory Management"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{he(Za({})),he(Vr({})),he(Hr({})),he(Da({}))},className:"p-1.5 text-secondary-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200",title:"Refresh data",children:e.jsx(Ea,{className:"w-3.5 h-3.5"})})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex space-x-2 mb-6",children:[{key:"inventory",label:"Inventory",count:(I&&Array.isArray(I)?I:[]).filter(B=>B.isActive).length,icon:od},{key:"transactions",label:"Transactions",count:($&&Array.isArray($)?$:[]).length,icon:Cn},{key:"suppliers",label:"Suppliers",count:(A&&Array.isArray(A)?A:[]).filter(B=>B.isActive).length,icon:nt},{key:"purchase-orders",label:"Purchase Orders",count:(G&&Array.isArray(G)?G:[]).length,icon:Xr}].map(B=>e.jsxs("button",{onClick:()=>t(B.key),className:`tab-button-alt ${s===B.key?"tab-button-alt-active":"tab-button-alt-inactive"}`,children:[e.jsx(B.icon,{className:"w-4 h-4"}),B.label," (",B.count,")"]},B.key))}),e.jsxs("div",{className:"bg-white overflow-hidden",children:[s==="inventory"&&Xm(),s==="transactions"&&Qm(),s==="suppliers"&&Jm(),s==="purchase-orders"&&Zm()]})]})]}),e.jsx(P8,{isOpen:u,onClose:te,item:g,mode:v}),g&&e.jsx(D8,{isOpen:h,onClose:ve,onDelete:ge,item:g}),e.jsx(M8,{isOpen:f,onClose:Wm,supplier:S,mode:T}),S&&e.jsx(E8,{isOpen:N,onClose:qm,supplier:S}),e.jsx(I8,{isOpen:F,onClose:nl,purchaseOrder:O,mode:W}),O&&e.jsx(R8,{isOpen:R,onClose:Gm,onDelete:il,purchaseOrder:O})]})}class O8{async getInvoices(t={}){const a=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/invoices?${a.toString()}`)}async getInvoice(t){return M.get(`/invoices/${t}`)}async createInvoice(t){return M.post("/invoices",t)}async updateInvoice(t,a){return M.put(`/invoices/${t}`,a)}async deleteInvoice(t){return M.delete(`/invoices/${t}`)}async sendInvoice(t){return M.post(`/invoices/${t}/send`)}async downloadInvoicePDF(t){return M.get(`/invoices/${t}/pdf`,{responseType:"arraybuffer"})}async sendInvoiceEmail(t){return M.post(`/invoices/${t}/send-email`)}async addPayment(t,a){return M.post(`/invoices/${t}/payments`,a)}async getInvoiceStats(t,a){const r=new URLSearchParams;return t&&r.append("startDate",t),a&&r.append("endDate",a),M.get(`/invoices/stats/overview?${r.toString()}`)}async generateInvoiceFromWorkOrder(t){return M.post("/invoices/generate-from-workorder",{workOrderId:t})}async generateInvoiceFromAppointment(t){return M.post("/invoices/generate-from-appointment",{appointmentId:t})}async getInvoiceTemplates(){return M.get("/invoices/templates")}async createInvoiceTemplate(t){return M.post("/invoices/templates",t)}async updateInvoiceTemplate(t,a){return M.put(`/invoices/templates/${t}`,a)}async deleteInvoiceTemplate(t){return M.delete(`/invoices/templates/${t}`)}async exportInvoice(t,a="pdf"){return M.get(`/invoices/${t}/export?format=${a}`)}async printInvoice(t){return M.get(`/invoices/${t}/print`)}async sendBulkInvoices(t){return M.post("/invoices/bulk/send",{invoiceIds:t})}async exportBulkInvoices(t,a="pdf"){return M.post("/invoices/bulk/export",{invoiceIds:t,format:a})}async sendPaymentReminder(t){return M.post(`/invoices/${t}/send-reminder`)}async sendBulkReminders(t){return M.post("/invoices/bulk/send-reminders",{invoiceIds:t})}async getPaymentAnalytics(t,a){const r=new URLSearchParams;return t&&r.append("startDate",t),a&&r.append("endDate",a),M.get(`/invoices/analytics/payments?${r.toString()}`)}async getCustomerPaymentHistory(t){return M.get(`/invoices/customer/${t}/payment-history`)}async getInvoiceSettings(){return M.get("/invoices/settings")}async updateInvoiceSettings(t){return M.put("/invoices/settings",t)}async generateInvoiceNumber(){return M.get("/invoices/generate-number")}async validateInvoiceNumber(t){return M.post("/invoices/validate-number",{invoiceNumber:t})}async searchInvoices(t,a){const r=new URLSearchParams({query:t});return a&&Object.entries(a).forEach(([n,i])=>{i!=null&&r.append(n,i.toString())}),M.get(`/invoices/search?${r.toString()}`)}async duplicateInvoice(t){return M.post(`/invoices/${t}/duplicate`)}async archiveInvoice(t){return M.post(`/invoices/${t}/archive`)}async unarchiveInvoice(t){return M.post(`/invoices/${t}/unarchive`)}async getArchivedInvoices(t){const a=new URLSearchParams;return t&&Object.entries(t).forEach(([r,n])=>{n!=null&&a.append(r,n.toString())}),M.get(`/invoices/archived?${a.toString()}`)}async markAsOverdue(){return M.post("/invoices/mark-overdue")}}const Zs=new O8,eo=Y("invoices/fetchInvoices",async(s={},{rejectWithValue:t})=>{var a,r;try{return(await Zs.getInvoices(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch invoices")}}),to=Y("invoices/fetchInvoiceStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Zs.getInvoiceStats()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch invoice stats")}}),Pd=Y("invoices/fetchPaymentStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Zs.getPaymentStats()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch payment stats")}}),Dd=Y("invoices/fetchInvoiceTemplates",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Zs.getInvoiceTemplates()).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch invoice templates")}}),Md=Y("invoices/markAsOverdue",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Zs.markAsOverdue(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to mark invoice as overdue")}}),F8=Y("invoices/downloadInvoicePDF",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Zs.downloadInvoicePDF(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to download invoice PDF")}}),$8=Y("invoices/sendInvoiceEmail",async({id:s,emailData:t},{rejectWithValue:a})=>{var r,n;try{return(await Zs.sendInvoiceEmail(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to send invoice email")}}),Ed=Y("invoices/createInvoice",async(s,{rejectWithValue:t})=>{var a,r;try{return(await Zs.createInvoice(s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create invoice")}}),Id=Y("invoices/updateInvoice",async({id:s,invoiceData:t},{rejectWithValue:a})=>{var r,n;try{return(await Zs.updateInvoice(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update invoice")}}),Xh=Y("invoices/deleteInvoice",async(s,{rejectWithValue:t})=>{var a,r;try{return await Zs.deleteInvoice(s),s}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete invoice")}}),Qh=Y("invoices/sendInvoice",async({id:s,emailData:t},{rejectWithValue:a})=>{var r,n;try{return(await Zs.sendInvoice(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to send invoice")}}),Rd=Y("invoices/addPayment",async({id:s,paymentData:t},{rejectWithValue:a})=>{var r,n;try{return(await Zs.addPayment(s,t)).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to add payment")}}),eg={async getVehicles(s={}){const t=new URLSearchParams;return Object.entries(s).forEach(([r,n])=>{n!==void 0&&n!==""&&t.append(r,n.toString())}),await le(M.get(`/customers/vehicles/all?${t.toString()}`))},async getVehicle(s){return await le(M.get(`/customers/vehicles/${s}`))},async getCustomerVehicles(s){return await le(M.get(`/customers/${s}/vehicles`))}},so=Y("vehicles/fetchVehicles",async(s={},{rejectWithValue:t})=>{var a,r;try{return await eg.getVehicles(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch vehicles")}}),z8=Y("vehicles/fetchVehicle",async(s,{rejectWithValue:t})=>{var a,r;try{return await eg.getVehicle(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch vehicle")}}),B8=Y("vehicles/fetchCustomerVehicles",async(s,{rejectWithValue:t})=>{var a,r;try{return await eg.getCustomerVehicles(s)}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch customer vehicles")}}),U8={list:[],selectedVehicle:null,loading:!1,error:null,pagination:null},V8=Rt({name:"vehicles",initialState:U8,reducers:{clearVehicles:s=>{s.list=[],s.selectedVehicle=null,s.pagination=null},setSelectedVehicle:(s,t)=>{s.selectedVehicle=t.payload}},extraReducers:s=>{s.addCase(so.pending,t=>{t.loading=!0,t.error=null}).addCase(so.fulfilled,(t,a)=>{var i,l;t.loading=!1;const r=a.payload,n=((i=r==null?void 0:r.data)==null?void 0:i.vehicles)||(r==null?void 0:r.vehicles)||[];t.list=n,t.pagination=((l=r==null?void 0:r.data)==null?void 0:l.pagination)||(r==null?void 0:r.pagination)||null}).addCase(so.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}).addCase(z8.fulfilled,(t,a)=>{var i;const r=a.payload,n=((i=r==null?void 0:r.data)==null?void 0:i.vehicle)||(r==null?void 0:r.vehicle);if(n){const l=t.list.findIndex(o=>o._id===n._id);l!==-1?t.list[l]=n:t.list.push(n)}}).addCase(B8.fulfilled,(t,a)=>{var i;const r=a.payload;(((i=r==null?void 0:r.data)==null?void 0:i.vehicles)||(r==null?void 0:r.vehicles)||[]).forEach(l=>{const o=t.list.findIndex(c=>c._id===l._id);o!==-1?t.list[o]=l:t.list.push(l)})})}}),H8=V8.reducer;function W8({onClose:s,onSuccess:t}){const a=Ue(),[r,n]=b.useState(!1),[i,l]=b.useState(""),o=je(f=>f.customers.list);je(f=>f.services.workOrders),je(f=>f.services.catalog),je(f=>f.services.catalogLoading);const c=je(f=>f.vehicles.list);je(f=>f.vehicles.loading);const[d,u]=b.useState({customerId:"",invoiceNumber:"",dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],vehicleId:"",serviceType:"",items:[{description:"",quantity:1,unitPrice:0,total:0}],subtotal:0,tax:0,total:0,notes:""}),m=c.filter(f=>{var p;return((p=f.customer)==null?void 0:p._id)===d.customerId});b.useEffect(()=>{a(zt()),a(Ur({})),a(Br({})),a(so({}))},[a]);const h=(f,p)=>{u(N=>({...N,[f]:p}))},y=(f,p,N)=>{const w=[...d.items];if(w[f]={...w[f],[p]:N},p==="quantity"||p==="unitPrice"){const S=w[f];w[f]={...S,total:S.quantity*S.unitPrice}}u(S=>({...S,items:w,subtotal:w.reduce((C,T)=>C+T.total,0),total:w.reduce((C,T)=>C+T.total,0)+d.tax}))},g=()=>{u(f=>({...f,items:[...f.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},j=f=>{if(d.items.length>1){const p=d.items.filter((N,w)=>w!==f);u(N=>({...N,items:p,subtotal:p.reduce((w,S)=>w+S.total,0),total:p.reduce((w,S)=>w+S.total,0)+d.tax}))}},v=f=>{u(p=>({...p,customerId:f,vehicleId:""}))},x=async f=>{if(f.preventDefault(),!d.customerId){l("Please select a customer");return}if(d.items.some(p=>!p.description||p.unitPrice<=0)){l("Please fill in all item details");return}if(!d.serviceType){l("Please enter a service type");return}if(!d.vehicleId){l("Please select a vehicle");return}n(!0),l("");try{await a(Ed(d)).unwrap(),t(),s()}catch(p){l(p.message||"Failed to create invoice")}finally{n(!1)}};return e.jsx(pe,{isOpen:!0,onClose:s,title:"Create New Invoice",submitText:"Create Invoice",onSubmit:x,isLoading:r,children:e.jsxs("div",{className:"p-4 space-y-6",children:[i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Ia,{className:"w-4 h-4 inline mr-2"}),"Customer"]}),e.jsxs("select",{value:d.customerId,onChange:f=>v(f.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"",children:"Select Customer"}),(o&&Array.isArray(o)?o:[]).map(f=>e.jsx("option",{value:f._id,children:f.name},f._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Mo,{className:"w-4 h-4 inline mr-2"}),"Invoice Number"]}),e.jsx("input",{type:"text",value:d.invoiceNumber,onChange:f=>h("invoiceNumber",f.target.value),className:"form-input",placeholder:"Auto-generated"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(hs,{className:"w-4 h-4 inline mr-2"}),"Vehicle"]}),e.jsxs("select",{value:d.vehicleId,onChange:f=>h("vehicleId",f.target.value),className:"form-select",required:!0,disabled:!d.customerId,children:[e.jsx("option",{value:"",children:"Select Vehicle"}),m.map(f=>e.jsxs("option",{value:f._id,children:[f.year," ",f.make," ",f.model]},f._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Mo,{className:"w-4 h-4 inline mr-2"}),"Service Type"]}),e.jsx("input",{type:"text",value:d.serviceType,onChange:f=>h("serviceType",f.target.value),className:"form-input",placeholder:"e.g., Oil Change, Brake Service",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(hs,{className:"w-4 h-4 inline mr-2"}),"Due Date"]}),e.jsx("input",{type:"date",value:d.dueDate,onChange:f=>h("dueDate",f.target.value),className:"form-input"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-secondary-900",children:"Invoice Items"}),e.jsxs("button",{type:"button",onClick:g,className:"btn-secondary btn-sm",children:[e.jsx(_s,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),e.jsx("div",{className:"space-y-4",children:d.items.map((f,p)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end p-4 border border-secondary-200 rounded-lg",children:[e.jsxs("div",{className:"col-span-5",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("input",{type:"text",value:f.description,onChange:N=>y(p,"description",N.target.value),className:"form-input",placeholder:"Item description",required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"form-label",children:"Qty"}),e.jsx("input",{type:"number",value:f.quantity,onChange:N=>y(p,"quantity",parseInt(N.target.value)||0),className:"form-input",min:"1",required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"form-label",children:"Unit Price"}),e.jsx("input",{type:"number",value:f.unitPrice,onChange:N=>y(p,"unitPrice",parseFloat(N.target.value)||0),className:"form-input",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"form-label",children:"Total"}),e.jsx("input",{type:"number",value:f.total,className:"form-input bg-secondary-50",readOnly:!0})]}),e.jsx("div",{className:"col-span-1",children:d.items.length>1&&e.jsx("button",{type:"button",onClick:()=>j(p),className:"btn-error btn-sm",children:e.jsx(Ls,{className:"w-4 h-4"})})})]},p))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-secondary-600",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["$",d.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-secondary-600",children:"Tax:"}),e.jsx("input",{type:"number",value:d.tax,onChange:f=>h("tax",parseFloat(f.target.value)||0),className:"form-input w-24 text-right",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",d.total.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{value:d.notes,onChange:f=>h("notes",f.target.value),className:"form-textarea",rows:3,placeholder:"Additional notes for the invoice..."})]})]})})}function q8({invoice:s,onClose:t,onSuccess:a}){const r=Ue(),[n,i]=b.useState(!1),[l,o]=b.useState(""),c=je(p=>p.customers.list);je(p=>p.services.workOrders),je(p=>p.services.catalog),je(p=>p.services.catalogLoading);const d=je(p=>p.vehicles.list);je(p=>p.vehicles.loading);const[u,m]=b.useState({customerId:"",invoiceNumber:"",dueDate:"",vehicleId:"",serviceType:"",items:[],subtotal:0,tax:0,total:0,status:"draft",notes:""});b.useEffect(()=>{r(zt()),r(Ur({})),r(Br({})),r(so({}))},[r]),b.useEffect(()=>{var p;s&&m({customerId:((p=s.customer)==null?void 0:p._id)||"",invoiceNumber:s.invoiceNumber||"",dueDate:s.dueDate?new Date(s.dueDate).toISOString().split("T")[0]:"",vehicleId:s.vehicleId||"",serviceType:s.serviceType||"",items:s.items||[],subtotal:s.subtotal||0,tax:s.tax||0,total:s.total||0,status:s.status,notes:s.notes||""})},[s]);const h=(p,N)=>{m(w=>({...w,[p]:N}))},y=(p,N,w)=>{const S=[...u.items];if(S[p]={...S[p],[N]:w},N==="quantity"||N==="unitPrice"){const C=S[p];S[p]={...C,total:C.quantity*C.unitPrice}}m(C=>({...C,items:S,subtotal:S.reduce((T,_)=>T+_.total,0),total:S.reduce((T,_)=>T+_.total,0)+u.tax}))},g=()=>{m(p=>({...p,items:[...p.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},j=p=>{if(u.items.length>1){const N=u.items.filter((w,S)=>S!==p);m(w=>({...w,items:N,subtotal:N.reduce((S,C)=>S+C.total,0),total:N.reduce((S,C)=>S+C.total,0)+u.tax}))}},v=p=>{m(N=>({...N,customerId:p,vehicleId:""}))},x=async p=>{if(p.preventDefault(),!u.customerId){o("Please select a customer");return}if(u.items.some(N=>!N.description||N.unitPrice<=0)){o("Please fill in all item details");return}if(!u.serviceType){o("Please enter a service type");return}if(!u.vehicleId){o("Please select a vehicle");return}i(!0),o("");try{s&&(await r(Id({id:s._id,invoiceData:u})).unwrap(),a(),t())}catch(N){o(N.message||"Failed to update invoice")}finally{i(!1)}};if(!s)return null;const f=d.filter(p=>{var N;return((N=p.customer)==null?void 0:N._id)===u.customerId});return e.jsx(pe,{isOpen:!0,onClose:t,title:"Edit Invoice",submitText:"Update Invoice",onSubmit:x,isLoading:n,children:e.jsxs("div",{className:"p-4 space-y-6",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Ia,{className:"w-4 h-4 inline mr-2"}),"Customer"]}),e.jsxs("select",{value:u.customerId,onChange:p=>v(p.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"",children:"Select Customer"}),(c&&Array.isArray(c)?c:[]).map(p=>e.jsx("option",{value:p._id,children:p.name},p._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Mo,{className:"w-4 h-4 inline mr-2"}),"Invoice Number"]}),e.jsx("input",{type:"text",value:u.invoiceNumber,onChange:p=>h("invoiceNumber",p.target.value),className:"form-input",placeholder:"Auto-generated"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(hs,{className:"w-4 h-4 inline mr-2"}),"Vehicle"]}),e.jsxs("select",{value:u.vehicleId,onChange:p=>h("vehicleId",p.target.value),className:"form-select",required:!0,disabled:!u.customerId,children:[e.jsx("option",{value:"",children:"Select Vehicle"}),f.map(p=>e.jsxs("option",{value:p._id,children:[p.year," ",p.make," ",p.model]},p._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Mo,{className:"w-4 h-4 inline mr-2"}),"Service Type"]}),e.jsx("input",{type:"text",value:u.serviceType,onChange:p=>h("serviceType",p.target.value),className:"form-input",placeholder:"e.g., Oil Change, Brake Service",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:u.status,onChange:p=>h("status",p.target.value),className:"form-select",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:[e.jsx(hs,{className:"w-4 h-4 inline mr-2"}),"Due Date"]}),e.jsx("input",{type:"date",value:u.dueDate,onChange:p=>h("dueDate",p.target.value),className:"form-input"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-secondary-900",children:"Invoice Items"}),e.jsxs("button",{type:"button",onClick:g,className:"btn-secondary btn-sm",children:[e.jsx(_s,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),e.jsx("div",{className:"space-y-4",children:u.items.map((p,N)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end p-4 border border-secondary-200 rounded-lg",children:[e.jsxs("div",{className:"col-span-5",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("input",{type:"text",value:p.description,onChange:w=>y(N,"description",w.target.value),className:"form-input",placeholder:"Item description",required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"form-label",children:"Qty"}),e.jsx("input",{type:"number",value:p.quantity,onChange:w=>y(N,"quantity",parseInt(w.target.value)||0),className:"form-input",min:"1",required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"form-label",children:"Unit Price"}),e.jsx("input",{type:"number",value:p.unitPrice,onChange:w=>y(N,"unitPrice",parseFloat(w.target.value)||0),className:"form-input",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"form-label",children:"Total"}),e.jsx("input",{type:"number",value:p.total,className:"form-input bg-secondary-50",readOnly:!0})]}),e.jsx("div",{className:"col-span-1",children:u.items.length>1&&e.jsx("button",{type:"button",onClick:()=>j(N),className:"btn-error btn-sm",children:e.jsx(Ls,{className:"w-4 h-4"})})})]},N))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-secondary-600",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["$",u.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-secondary-600",children:"Tax:"}),e.jsx("input",{type:"number",value:u.tax,onChange:p=>h("tax",parseFloat(p.target.value)||0),className:"form-input w-24 text-right",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",u.total.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{value:u.notes,onChange:p=>h("notes",p.target.value),className:"form-textarea",rows:3,placeholder:"Additional notes for the invoice..."})]})]})})}const Y8=({invoice:s,onClose:t,onDelete:a})=>{var c;const[r,n]=b.useState(!1),[i,l]=b.useState(null),o=async()=>{try{n(!0),l(null),await a(s.id),t()}catch(d){l(d instanceof Error?d.message:"Failed to delete invoice")}finally{n(!1)}};return e.jsx(pe,{isOpen:!0,onClose:t,title:"Delete Invoice",submitText:"Delete Invoice",onSubmit:o,isLoading:r,submitButtonVariant:"error",children:e.jsxs("div",{className:"p-4 space-y-4",children:[i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900",children:"Are you sure?"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"This action cannot be undone. This will permanently delete the invoice."})]})]}),e.jsx("div",{className:"bg-secondary-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Invoice Number:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["#",s.invoiceNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Customer:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:(c=s.customer)==null?void 0:c.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["$",s.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Status:"}),e.jsx("span",{className:"text-sm font-medium text-secondary-900 capitalize",children:s.status})]})]})})]})})};function K8({isOpen:s,onClose:t,invoice:a,paymentAmount:r,setPaymentAmount:n,paymentMethod:i,setPaymentMethod:l,onConfirm:o,isLoading:c=!1}){var u;if(!a)return null;const d=a.total-(a.paidAmount||0);return e.jsx(pe,{isOpen:s,onClose:t,title:"Record Payment",icon:e.jsx(Do,{className:"w-5 h-5"}),submitText:c?"Recording...":"Record Payment",onSubmit:()=>o(a._id),submitColor:"bg-blue-600",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Invoice: #",a.invoiceNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Customer: ",(u=a.customer)==null?void 0:u.name]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Amount Due: $",d.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Payment Amount"}),e.jsx("input",{type:"number",step:"0.01",value:r,onChange:m=>n(m.target.value),className:"form-input",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Payment Method"}),e.jsxs("select",{value:i,onChange:m=>l(m.target.value),className:"form-select",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"credit_card",children:"Credit Card"}),e.jsx("option",{value:"debit_card",children:"Debit Card"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]})})}function G8(){const[s,t]=b.useState("invoices"),[a,r]=b.useState("all"),[n,i]=b.useState(""),[l,o]=b.useState(null),[c,d]=b.useState(!1),[u,m]=b.useState(""),[h,y]=b.useState("cash"),[g,j]=b.useState(!1),[v,x]=b.useState(!1),[f,p]=b.useState(!1),{invoices:N,templates:w,stats:S,paymentStats:C,loading:T,settings:_}=je(ee=>ee.invoices);je(ee=>ee.customers.list),je(ee=>ee.services.workOrders);const F=Ue();b.useEffect(()=>{F(eo()),F(to()),F(Pd()),F(Dd())},[F]);const D=(N||[]).filter(ee=>{var Se;const Ce=(((Se=ee.customer)==null?void 0:Se.name)||"").toLowerCase().includes(n.toLowerCase())||(ee.invoiceNumber||"").toLowerCase().includes(n.toLowerCase()),V=a==="all"||ee.status===a;return Ce&&V}),R=(N||[]).length,U=(N||[]).filter(ee=>ee.status==="paid").length,O=(N||[]).filter(ee=>ee.status==="overdue").length,E=(N||[]).filter(ee=>ee.status==="paid").reduce((ee,Ce)=>ee+(Ce.total||0),0),W=(N||[]).filter(ee=>ee.status!=="paid"&&ee.status!=="cancelled").reduce((ee,Ce)=>ee+((Ce.total||0)-(Ce.paidAmount||0)),0),Z=ee=>{switch(ee){case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},I=ee=>{if(!u||parseFloat(u)<=0){P.error("Please enter a valid payment amount");return}F(Rd({invoiceId:ee,paymentData:{amount:parseFloat(u),paymentMethod:h,date:new Date().toISOString()}})),d(!1),o(null),m(""),y("cash")},$=ee=>{const Ce=N.find(V=>V._id===ee);Ce&&(o(Ce),p(!0))},A=ee=>{o(ee),d(!0),m(""),y("cash")},G=()=>{d(!1),o(null),m(""),y("cash")},z=ee=>{F(F8(ee))},ie=ee=>{F($8(ee))},de=()=>{F(eo()),F(to())},xe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Invoices"}),e.jsx("p",{className:"text-secondary-600",children:"Manage customer invoices and payments"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>F(Md()),className:"btn-secondary",children:[e.jsx(_i,{className:"w-4 h-4"}),"Update Overdue"]}),e.jsxs("button",{onClick:()=>j(!0),className:"btn-primary",children:[e.jsx(_s,{className:"w-4 h-4"}),"Create Invoice"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"card p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Mo,{className:"w-6 h-6 text-secondary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Invoices"}),e.jsx("p",{className:"text-3xl font-bold text-secondary-900",children:R})]})}),e.jsx("div",{className:"card p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-xl flex items-center justify-center mb-3",children:e.jsx(ki,{className:"w-6 h-6 text-secondary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Paid Invoices"}),e.jsx("p",{className:"text-3xl font-bold text-secondary-900",children:U})]})}),e.jsx("div",{className:"card p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Ct,{className:"w-6 h-6 text-secondary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Overdue Invoices"}),e.jsx("p",{className:"text-3xl font-bold text-secondary-900",children:O})]})}),e.jsx("div",{className:"card p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Do,{className:"w-6 h-6 text-secondary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-secondary-900",children:["$",E.toLocaleString()]}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Collected"})]})}),e.jsx("div",{className:"card p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-xl flex items-center justify-center mb-3",children:e.jsx($t,{className:"w-6 h-6 text-secondary-600"})}),e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Outstanding"}),e.jsxs("p",{className:"text-3xl font-bold text-secondary-900",children:["$",W.toLocaleString()]}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Pending"})]})})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Or,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"}),e.jsx("input",{type:"text",placeholder:"Search invoices...",value:n,onChange:ee=>i(ee.target.value),className:"form-input w-full pl-10 pr-4 py-2"})]}),e.jsxs("select",{value:a,onChange:ee=>r(ee.target.value),className:"form-input",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-container",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Invoice Details"}),e.jsx("th",{className:"table-header-cell",children:"Customer & Vehicle"}),e.jsx("th",{className:"table-header-cell",children:"Dates"}),e.jsx("th",{className:"table-header-cell",children:"Amount"}),e.jsx("th",{className:"table-header-cell",children:"Status"}),e.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),e.jsx("tbody",{className:"table-body",children:D.map(ee=>{var Ce;return e.jsxs("tr",{className:"table-row hover:bg-secondary-50",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-secondary-900",children:["#",ee.invoiceNumber]}),e.jsxs("div",{className:"text-sm text-secondary-600",children:["WO: ",ee.workOrder||"N/A"]}),ee.notes&&e.jsx("div",{className:"text-xs text-secondary-500 mt-1 max-w-xs truncate",children:ee.notes})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:(Ce=ee.customer)==null?void 0:Ce.name}),e.jsx("div",{className:"text-sm text-secondary-600",children:ee.vehicle?`${ee.vehicle.year} ${ee.vehicle.make} ${ee.vehicle.model}`:"Vehicle info not available"})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-secondary-900",children:["Created: ",new Date(ee.issueDate).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-secondary-600",children:["Due: ",new Date(ee.dueDate).toLocaleDateString()]}),ee.paidDate&&e.jsxs("div",{className:"text-sm text-green-600",children:["Paid: ",new Date(ee.paidDate).toLocaleDateString()]})]})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-secondary-900",children:["$",ee.total.toFixed(2)]}),ee.paidAmount>0&&ee.paidAmount<ee.total&&e.jsxs("div",{className:"text-sm text-blue-600",children:["Paid: $",ee.paidAmount.toFixed(2)]}),ee.status==="paid"&&e.jsx("div",{className:"text-xs text-green-600 font-medium",children:ee.paymentMethod})]})}),e.jsx("td",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${Z(ee.status)}`,children:ee.status})}),e.jsx("td",{className:"table-cell text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-secondary-600 hover:text-secondary-900",title:"View invoice",children:e.jsx(Jr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(ee._id),className:"text-secondary-600 hover:text-secondary-900",title:"Download PDF",children:e.jsx(ZT,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ie(ee._id),className:"text-secondary-600 hover:text-secondary-900",title:"Send email",children:e.jsx(Yt,{className:"w-4 h-4"})}),ee.status!=="paid"&&e.jsx("button",{onClick:()=>A(ee),className:"text-secondary-600 hover:text-secondary-900",title:"Record payment",children:e.jsx(Do,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{o(ee),x(!0)},className:"text-secondary-600 hover:text-secondary-900",title:"Edit",children:e.jsx(nr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(ee._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ls,{className:"w-4 h-4"})})]})})]},ee._id)})})]})})})]}),he=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Payment History"}),e.jsx("p",{className:"text-gray-600",children:"Track all payments received"})]})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-container",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"Payment Date"}),e.jsx("th",{className:"table-header-cell",children:"Invoice"}),e.jsx("th",{className:"table-header-cell",children:"Customer"}),e.jsx("th",{className:"table-header-cell",children:"Amount"}),e.jsx("th",{className:"table-header-cell",children:"Method"}),e.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),e.jsx("tbody",{className:"table-body",children:(N||[]).filter(ee=>ee.status==="paid"&&ee.paidDate).sort((ee,Ce)=>new Date(Ce.paidDate).getTime()-new Date(ee.paidDate).getTime()).map(ee=>{var Ce;return e.jsxs("tr",{className:"table-row hover:bg-secondary-50",children:[e.jsxs("td",{className:"table-cell whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-secondary-900",children:new Date(ee.paidDate).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-secondary-500",children:new Date(ee.paidDate).toLocaleTimeString()})]}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-secondary-900",children:["#",ee.invoiceNumber]})}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-secondary-900",children:(Ce=ee.customer)==null?void 0:Ce.name})}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["$",ee.paidAmount.toFixed(2)]})}),e.jsx("td",{className:"table-cell whitespace-nowrap",children:e.jsx("span",{className:"status-badge status-secondary capitalize",children:ee.paymentMethod})}),e.jsx("td",{className:"table-cell whitespace-nowrap text-sm font-medium",children:e.jsx("button",{className:"text-secondary-600 hover:text-secondary-900",children:e.jsx(Jr,{className:"w-4 h-4"})})})]},ee._id)})})]})})})]}),Pe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Invoice Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure invoice templates and defaults"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-800 mb-4",children:"Company Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Company Name"}),e.jsx("input",{type:"text",value:_.companyInfo.name,className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("textarea",{value:_.companyInfo.address,className:"form-textarea",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone"}),e.jsx("input",{type:"tel",value:_.companyInfo.phone,className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",value:_.companyInfo.email,className:"form-input"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Tax ID"}),e.jsx("input",{type:"text",value:_.companyInfo.taxId||"",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"License #"}),e.jsx("input",{type:"text",value:_.companyInfo.license||"",className:"form-input"})]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-800 mb-4",children:"Invoice Defaults"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Tax Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",value:_.invoiceDefaults.taxRate,className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Payment Terms"}),e.jsxs("select",{className:"form-select",children:[e.jsx("option",{value:"Net 30",children:"Net 30"}),e.jsx("option",{value:"Net 15",children:"Net 15"}),e.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"}),e.jsx("option",{value:"Net 60",children:"Net 60"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Invoice Prefix"}),e.jsx("input",{type:"text",value:_.invoiceDefaults.invoicePrefix,className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Next Invoice #"}),e.jsx("input",{type:"number",value:_.invoiceDefaults.nextInvoiceNumber,className:"form-input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Late Fee Penalty (%)"}),e.jsx("input",{type:"number",step:"0.1",value:_.invoiceDefaults.lateFeePenalty||0,className:"form-input"})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-800 mb-4",children:"Accepted Payment Methods"}),e.jsx("div",{className:"space-y-3",children:Object.entries(_.paymentMethods||{cash:!0,check:!0,creditCard:!0,bankTransfer:!0,online:!0}).map(([ee,Ce])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700 capitalize",children:ee.replace(/([A-Z])/g," $1").trim()}),e.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full ${Ce?"bg-blue-600":"bg-secondary-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${Ce?"translate-x-6":"translate-x-1"}`})})]},ee))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-800 mb-4",children:"Template Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:_.template.primaryColor||_.template.headerColor,className:"w-12 h-10 border border-secondary-300 rounded"}),e.jsx("input",{type:"text",value:_.template.primaryColor||_.template.headerColor,className:"form-input flex-1"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700",children:"Show Company Logo"}),e.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full ${_.template.showCompanyLogo||_.template.includeLogo?"bg-blue-600":"bg-secondary-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${_.template.showCompanyLogo||_.template.includeLogo?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700",children:"Show Tax Breakdown"}),e.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full ${_.template.showTaxBreakdown?"bg-blue-600":"bg-secondary-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${_.template.showTaxBreakdown?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700",children:"Show Labor Details"}),e.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full ${_.template.showLaborDetails?"bg-blue-600":"bg-secondary-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${_.template.showLaborDetails?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Footer Text"}),e.jsx("textarea",{value:_.template.footerText,className:"form-textarea",rows:3})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"btn-primary",children:"Save Settings"})})]});return e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsx("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Invoices & Billing"}),e.jsx("p",{className:"text-secondary-600",children:"Manage customer invoices and payments"})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"tab-header",children:e.jsx("nav",{className:"tab-buttons",children:[{key:"invoices",label:"Invoices",count:(N||[]).length},{key:"payments",label:"Payments",count:(N||[]).filter(ee=>ee.status==="paid").length},{key:"settings",label:"Settings",count:0}].map(ee=>e.jsxs("button",{onClick:()=>t(ee.key),className:`tab-button ${s===ee.key?"tab-button-active":"tab-button-inactive"}`,children:[ee.label," ",ee.count>0&&`(${ee.count})`]},ee.key))})}),e.jsxs("div",{className:"p-6",children:[s==="invoices"&&xe(),s==="payments"&&he(),s==="settings"&&Pe()]})]}),c&&l&&e.jsx(K8,{isOpen:c,onClose:G,invoice:l,paymentAmount:u,setPaymentAmount:m,paymentMethod:h,setPaymentMethod:y,onConfirm:I,isLoading:T}),g&&e.jsx(W8,{onClose:()=>j(!1),onSuccess:de}),v&&e.jsx(q8,{invoice:l,onClose:()=>{x(!1),o(null)},onSuccess:de}),f&&e.jsx(Y8,{invoice:l,onClose:()=>{p(!1),o(null)},onSuccess:de})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ac(s){return s+.5|0}const Sr=(s,t,a)=>Math.max(Math.min(s,a),t);function Dl(s){return Sr(ac(s*2.55),0,255)}function Wr(s){return Sr(ac(s*255),0,255)}function Wa(s){return Sr(ac(s/2.55)/100,0,1)}function Iv(s){return Sr(ac(s*100),0,100)}const Bs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},n0=[..."0123456789ABCDEF"],X8=s=>n0[s&15],Q8=s=>n0[(s&240)>>4]+n0[s&15],Tc=s=>(s&240)>>4===(s&15),J8=s=>Tc(s.r)&&Tc(s.g)&&Tc(s.b)&&Tc(s.a);function Z8(s){var t=s.length,a;return s[0]==="#"&&(t===4||t===5?a={r:255&Bs[s[1]]*17,g:255&Bs[s[2]]*17,b:255&Bs[s[3]]*17,a:t===5?Bs[s[4]]*17:255}:(t===7||t===9)&&(a={r:Bs[s[1]]<<4|Bs[s[2]],g:Bs[s[3]]<<4|Bs[s[4]],b:Bs[s[5]]<<4|Bs[s[6]],a:t===9?Bs[s[7]]<<4|Bs[s[8]]:255})),a}const eI=(s,t)=>s<255?t(s):"";function tI(s){var t=J8(s)?X8:Q8;return s?"#"+t(s.r)+t(s.g)+t(s.b)+eI(s.a,t):void 0}const sI=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function b2(s,t,a){const r=t*Math.min(a,1-a),n=(i,l=(i+s/30)%12)=>a-r*Math.max(Math.min(l-3,9-l,1),-1);return[n(0),n(8),n(4)]}function aI(s,t,a){const r=(n,i=(n+s/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function rI(s,t,a){const r=b2(s,1,.5);let n;for(t+a>1&&(n=1/(t+a),t*=n,a*=n),n=0;n<3;n++)r[n]*=1-t-a,r[n]+=t;return r}function nI(s,t,a,r,n){return s===n?(t-a)/r+(t<a?6:0):t===n?(a-s)/r+2:(s-t)/r+4}function tg(s){const a=s.r/255,r=s.g/255,n=s.b/255,i=Math.max(a,r,n),l=Math.min(a,r,n),o=(i+l)/2;let c,d,u;return i!==l&&(u=i-l,d=o>.5?u/(2-i-l):u/(i+l),c=nI(a,r,n,u,i),c=c*60+.5),[c|0,d||0,o]}function sg(s,t,a,r){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,a,r)).map(Wr)}function ag(s,t,a){return sg(b2,s,t,a)}function iI(s,t,a){return sg(rI,s,t,a)}function lI(s,t,a){return sg(aI,s,t,a)}function j2(s){return(s%360+360)%360}function oI(s){const t=sI.exec(s);let a=255,r;if(!t)return;t[5]!==r&&(a=t[6]?Dl(+t[5]):Wr(+t[5]));const n=j2(+t[2]),i=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?r=iI(n,i,l):t[1]==="hsv"?r=lI(n,i,l):r=ag(n,i,l),{r:r[0],g:r[1],b:r[2],a}}function cI(s,t){var a=tg(s);a[0]=j2(a[0]+t),a=ag(a),s.r=a[0],s.g=a[1],s.b=a[2]}function dI(s){if(!s)return;const t=tg(s),a=t[0],r=Iv(t[1]),n=Iv(t[2]);return s.a<255?`hsla(${a}, ${r}%, ${n}%, ${Wa(s.a)})`:`hsl(${a}, ${r}%, ${n}%)`}const Rv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Lv={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function uI(){const s={},t=Object.keys(Lv),a=Object.keys(Rv);let r,n,i,l,o;for(r=0;r<t.length;r++){for(l=o=t[r],n=0;n<a.length;n++)i=a[n],o=o.replace(i,Rv[i]);i=parseInt(Lv[l],16),s[o]=[i>>16&255,i>>8&255,i&255]}return s}let Pc;function mI(s){Pc||(Pc=uI(),Pc.transparent=[0,0,0,0]);const t=Pc[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const hI=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function xI(s){const t=hI.exec(s);let a=255,r,n,i;if(t){if(t[7]!==r){const l=+t[7];a=t[8]?Dl(l):Sr(l*255,0,255)}return r=+t[1],n=+t[3],i=+t[5],r=255&(t[2]?Dl(r):Sr(r,0,255)),n=255&(t[4]?Dl(n):Sr(n,0,255)),i=255&(t[6]?Dl(i):Sr(i,0,255)),{r,g:n,b:i,a}}}function pI(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${Wa(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Jh=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,ni=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function fI(s,t,a){const r=ni(Wa(s.r)),n=ni(Wa(s.g)),i=ni(Wa(s.b));return{r:Wr(Jh(r+a*(ni(Wa(t.r))-r))),g:Wr(Jh(n+a*(ni(Wa(t.g))-n))),b:Wr(Jh(i+a*(ni(Wa(t.b))-i))),a:s.a+a*(t.a-s.a)}}function Dc(s,t,a){if(s){let r=tg(s);r[t]=Math.max(0,Math.min(r[t]+r[t]*a,t===0?360:1)),r=ag(r),s.r=r[0],s.g=r[1],s.b=r[2]}}function N2(s,t){return s&&Object.assign(t||{},s)}function Ov(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Wr(s[3]))):(t=N2(s,{r:0,g:0,b:0,a:1}),t.a=Wr(t.a)),t}function gI(s){return s.charAt(0)==="r"?xI(s):oI(s)}class Lo{constructor(t){if(t instanceof Lo)return t;const a=typeof t;let r;a==="object"?r=Ov(t):a==="string"&&(r=Z8(t)||mI(t)||gI(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=N2(this._rgb);return t&&(t.a=Wa(t.a)),t}set rgb(t){this._rgb=Ov(t)}rgbString(){return this._valid?pI(this._rgb):void 0}hexString(){return this._valid?tI(this._rgb):void 0}hslString(){return this._valid?dI(this._rgb):void 0}mix(t,a){if(t){const r=this.rgb,n=t.rgb;let i;const l=a===i?.5:a,o=2*l-1,c=r.a-n.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;i=1-d,r.r=255&d*r.r+i*n.r+.5,r.g=255&d*r.g+i*n.g+.5,r.b=255&d*r.b+i*n.b+.5,r.a=l*r.a+(1-l)*n.a,this.rgb=r}return this}interpolate(t,a){return t&&(this._rgb=fI(this._rgb,t._rgb,a)),this}clone(){return new Lo(this.rgb)}alpha(t){return this._rgb.a=Wr(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=ac(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Dc(this._rgb,2,t),this}darken(t){return Dc(this._rgb,2,-t),this}saturate(t){return Dc(this._rgb,1,t),this}desaturate(t){return Dc(this._rgb,1,-t),this}rotate(t){return cI(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function $a(){}const yI=(()=>{let s=0;return()=>s++})();function Ie(s){return s==null}function Qe(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ae(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function gt(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function Ps(s,t){return gt(s)?s:t}function we(s,t){return typeof s>"u"?t:s}const vI=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,w2=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function Ke(s,t,a){if(s&&typeof s.call=="function")return s.apply(a,t)}function $e(s,t,a,r){let n,i,l;if(Qe(s))if(i=s.length,r)for(n=i-1;n>=0;n--)t.call(a,s[n],n);else for(n=0;n<i;n++)t.call(a,s[n],n);else if(Ae(s))for(l=Object.keys(s),i=l.length,n=0;n<i;n++)t.call(a,s[l[n]],l[n])}function Au(s,t){let a,r,n,i;if(!s||!t||s.length!==t.length)return!1;for(a=0,r=s.length;a<r;++a)if(n=s[a],i=t[a],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function Tu(s){if(Qe(s))return s.map(Tu);if(Ae(s)){const t=Object.create(null),a=Object.keys(s),r=a.length;let n=0;for(;n<r;++n)t[a[n]]=Tu(s[a[n]]);return t}return s}function S2(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function bI(s,t,a,r){if(!S2(s))return;const n=t[s],i=a[s];Ae(n)&&Ae(i)?Oo(n,i,r):t[s]=Tu(i)}function Oo(s,t,a){const r=Qe(t)?t:[t],n=r.length;if(!Ae(s))return s;a=a||{};const i=a.merger||bI;let l;for(let o=0;o<n;++o){if(l=r[o],!Ae(l))continue;const c=Object.keys(l);for(let d=0,u=c.length;d<u;++d)i(c[d],s,l,a)}return s}function ao(s,t){return Oo(s,t,{merger:jI})}function jI(s,t,a){if(!S2(s))return;const r=t[s],n=a[s];Ae(r)&&Ae(n)?ao(r,n):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=Tu(n))}const Fv={"":s=>s,x:s=>s.x,y:s=>s.y};function NI(s){const t=s.split("."),a=[];let r="";for(const n of t)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(a.push(r),r="");return a}function wI(s){const t=NI(s);return a=>{for(const r of t){if(r==="")break;a=a&&a[r]}return a}}function Qn(s,t){return(Fv[t]||(Fv[t]=wI(t)))(s)}function rg(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Fo=s=>typeof s<"u",en=s=>typeof s=="function",$v=(s,t)=>{if(s.size!==t.size)return!1;for(const a of s)if(!t.has(a))return!1;return!0};function SI(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const Oe=Math.PI,et=2*Oe,CI=et+Oe,Pu=Number.POSITIVE_INFINITY,kI=Oe/180,Nt=Oe/2,dn=Oe/4,zv=Oe*2/3,Cr=Math.log10,Ma=Math.sign;function ro(s,t,a){return Math.abs(s-t)<a}function Bv(s){const t=Math.round(s);s=ro(s,t,s/1e3)?t:s;const a=Math.pow(10,Math.floor(Cr(s))),r=s/a;return(r<=1?1:r<=2?2:r<=5?5:10)*a}function _I(s){const t=[],a=Math.sqrt(s);let r;for(r=1;r<a;r++)s%r===0&&(t.push(r),t.push(s/r));return a===(a|0)&&t.push(a),t.sort((n,i)=>n-i).pop(),t}function AI(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function $o(s){return!AI(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function TI(s,t){const a=Math.round(s);return a-t<=s&&a+t>=s}function C2(s,t,a){let r,n,i;for(r=0,n=s.length;r<n;r++)i=s[r][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function ka(s){return s*(Oe/180)}function ng(s){return s*(180/Oe)}function Uv(s){if(!gt(s))return;let t=1,a=0;for(;Math.round(s*t)/t!==s;)t*=10,a++;return a}function k2(s,t){const a=t.x-s.x,r=t.y-s.y,n=Math.sqrt(a*a+r*r);let i=Math.atan2(r,a);return i<-.5*Oe&&(i+=et),{angle:i,distance:n}}function i0(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function PI(s,t){return(s-t+CI)%et-Oe}function ss(s){return(s%et+et)%et}function zo(s,t,a,r){const n=ss(s),i=ss(t),l=ss(a),o=ss(i-n),c=ss(l-n),d=ss(n-i),u=ss(n-l);return n===i||n===l||r&&i===l||o>c&&d<u}function is(s,t,a){return Math.max(t,Math.min(a,s))}function DI(s){return is(s,-32768,32767)}function Ka(s,t,a,r=1e-6){return s>=Math.min(t,a)-r&&s<=Math.max(t,a)+r}function ig(s,t,a){a=a||(l=>s[l]<t);let r=s.length-1,n=0,i;for(;r-n>1;)i=n+r>>1,a(i)?n=i:r=i;return{lo:n,hi:r}}const Pn=(s,t,a,r)=>ig(s,a,r?n=>{const i=s[n][t];return i<a||i===a&&s[n+1][t]===a}:n=>s[n][t]<a),MI=(s,t,a)=>ig(s,a,r=>s[r][t]>=a);function EI(s,t,a){let r=0,n=s.length;for(;r<n&&s[r]<t;)r++;for(;n>r&&s[n-1]>a;)n--;return r>0||n<s.length?s.slice(r,n):s}const _2=["push","pop","shift","splice","unshift"];function II(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),_2.forEach(a=>{const r="_onData"+rg(a),n=s[a];Object.defineProperty(s,a,{configurable:!0,enumerable:!1,value(...i){const l=n.apply(this,i);return s._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...i)}),l}})})}function Vv(s,t){const a=s._chartjs;if(!a)return;const r=a.listeners,n=r.indexOf(t);n!==-1&&r.splice(n,1),!(r.length>0)&&(_2.forEach(i=>{delete s[i]}),delete s._chartjs)}function A2(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const T2=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function P2(s,t){let a=[],r=!1;return function(...n){a=n,r||(r=!0,T2.call(window,()=>{r=!1,s.apply(t,a)}))}}function RI(s,t){let a;return function(...r){return t?(clearTimeout(a),a=setTimeout(s,t,r)):s.apply(this,r),t}}const lg=s=>s==="start"?"left":s==="end"?"right":"center",es=(s,t,a)=>s==="start"?t:s==="end"?a:(t+a)/2,LI=(s,t,a,r)=>s===(r?"left":"right")?a:s==="center"?(t+a)/2:t;function OI(s,t,a){const r=t.length;let n=0,i=r;if(s._sorted){const{iScale:l,vScale:o,_parsed:c}=s,d=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,u=l.axis,{min:m,max:h,minDefined:y,maxDefined:g}=l.getUserBounds();if(y){if(n=Math.min(Pn(c,u,m).lo,a?r:Pn(t,u,l.getPixelForValue(m)).lo),d){const j=c.slice(0,n+1).reverse().findIndex(v=>!Ie(v[o.axis]));n-=Math.max(0,j)}n=is(n,0,r-1)}if(g){let j=Math.max(Pn(c,l.axis,h,!0).hi+1,a?0:Pn(t,u,l.getPixelForValue(h),!0).hi+1);if(d){const v=c.slice(j-1).findIndex(x=>!Ie(x[o.axis]));j+=Math.max(0,v)}i=is(j,n,r)-n}else i=r-n}return{start:n,count:i}}function FI(s){const{xScale:t,yScale:a,_scaleRanges:r}=s,n={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!r)return s._scaleRanges=n,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==a.min||r.ymax!==a.max;return Object.assign(r,n),i}const Mc=s=>s===0||s===1,Hv=(s,t,a)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*et/a)),Wv=(s,t,a)=>Math.pow(2,-10*s)*Math.sin((s-t)*et/a)+1,no={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*Nt)+1,easeOutSine:s=>Math.sin(s*Nt),easeInOutSine:s=>-.5*(Math.cos(Oe*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>Mc(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>Mc(s)?s:Hv(s,.075,.3),easeOutElastic:s=>Mc(s)?s:Wv(s,.075,.3),easeInOutElastic(s){return Mc(s)?s:s<.5?.5*Hv(s*2,.1125,.45):.5+.5*Wv(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-no.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?no.easeInBounce(s*2)*.5:no.easeOutBounce(s*2-1)*.5+.5};function og(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function qv(s){return og(s)?s:new Lo(s)}function Zh(s){return og(s)?s:new Lo(s).saturate(.5).darken(.1).hexString()}const $I=["x","y","borderWidth","radius","tension"],zI=["color","borderColor","backgroundColor"];function BI(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:zI},numbers:{type:"number",properties:$I}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function UI(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Yv=new Map;function VI(s,t){t=t||{};const a=s+JSON.stringify(t);let r=Yv.get(a);return r||(r=new Intl.NumberFormat(s,t),Yv.set(a,r)),r}function Fm(s,t,a){return VI(t,a).format(s)}const D2={values(s){return Qe(s)?s:""+s},numeric(s,t,a){if(s===0)return"0";const r=this.chart.options.locale;let n,i=s;if(a.length>1){const d=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=HI(s,a)}const l=Cr(Math.abs(i)),o=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:n,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),Fm(s,r,c)},logarithmic(s,t,a){if(s===0)return"0";const r=a[t].significand||s/Math.pow(10,Math.floor(Cr(s)));return[1,2,3,5,10,15].includes(r)||t>.8*a.length?D2.numeric.call(this,s,t,a):""}};function HI(s,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&s!==Math.floor(s)&&(a=s-Math.floor(s)),a}var $m={formatters:D2};function WI(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$m.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Jn=Object.create(null),l0=Object.create(null);function io(s,t){if(!t)return s;const a=t.split(".");for(let r=0,n=a.length;r<n;++r){const i=a[r];s=s[i]||(s[i]=Object.create(null))}return s}function ex(s,t,a){return typeof t=="string"?Oo(io(s,t),a):Oo(io(s,""),t)}class qI{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,n)=>Zh(n.backgroundColor),this.hoverBorderColor=(r,n)=>Zh(n.borderColor),this.hoverColor=(r,n)=>Zh(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return ex(this,t,a)}get(t){return io(this,t)}describe(t,a){return ex(l0,t,a)}override(t,a){return ex(Jn,t,a)}route(t,a,r,n){const i=io(this,t),l=io(this,r),o="_"+a;Object.defineProperties(i,{[o]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[o],d=l[n];return Ae(c)?Object.assign({},d,c):we(c,d)},set(c){this[o]=c}}})}apply(t){t.forEach(a=>a(this))}}var yt=new qI({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[BI,UI,WI]);function YI(s){return!s||Ie(s.size)||Ie(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Du(s,t,a,r,n){let i=t[n];return i||(i=t[n]=s.measureText(n).width,a.push(n)),i>r&&(r=i),r}function KI(s,t,a,r){r=r||{};let n=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(n=r.data={},i=r.garbageCollect=[],r.font=t),s.save(),s.font=t;let l=0;const o=a.length;let c,d,u,m,h;for(c=0;c<o;c++)if(m=a[c],m!=null&&!Qe(m))l=Du(s,n,i,l,m);else if(Qe(m))for(d=0,u=m.length;d<u;d++)h=m[d],h!=null&&!Qe(h)&&(l=Du(s,n,i,l,h));s.restore();const y=i.length/2;if(y>a.length){for(c=0;c<y;c++)delete n[i[c]];i.splice(0,y)}return l}function un(s,t,a){const r=s.currentDevicePixelRatio,n=a!==0?Math.max(a/2,.5):0;return Math.round((t-n)*r)/r+n}function Kv(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function o0(s,t,a,r){M2(s,t,a,r,null)}function M2(s,t,a,r,n){let i,l,o,c,d,u,m,h;const y=t.pointStyle,g=t.rotation,j=t.radius;let v=(g||0)*kI;if(y&&typeof y=="object"&&(i=y.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){s.save(),s.translate(a,r),s.rotate(v),s.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),s.restore();return}if(!(isNaN(j)||j<=0)){switch(s.beginPath(),y){default:n?s.ellipse(a,r,n/2,j,0,0,et):s.arc(a,r,j,0,et),s.closePath();break;case"triangle":u=n?n/2:j,s.moveTo(a+Math.sin(v)*u,r-Math.cos(v)*j),v+=zv,s.lineTo(a+Math.sin(v)*u,r-Math.cos(v)*j),v+=zv,s.lineTo(a+Math.sin(v)*u,r-Math.cos(v)*j),s.closePath();break;case"rectRounded":d=j*.516,c=j-d,l=Math.cos(v+dn)*c,m=Math.cos(v+dn)*(n?n/2-d:c),o=Math.sin(v+dn)*c,h=Math.sin(v+dn)*(n?n/2-d:c),s.arc(a-m,r-o,d,v-Oe,v-Nt),s.arc(a+h,r-l,d,v-Nt,v),s.arc(a+m,r+o,d,v,v+Nt),s.arc(a-h,r+l,d,v+Nt,v+Oe),s.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*j,u=n?n/2:c,s.rect(a-u,r-c,2*u,2*c);break}v+=dn;case"rectRot":m=Math.cos(v)*(n?n/2:j),l=Math.cos(v)*j,o=Math.sin(v)*j,h=Math.sin(v)*(n?n/2:j),s.moveTo(a-m,r-o),s.lineTo(a+h,r-l),s.lineTo(a+m,r+o),s.lineTo(a-h,r+l),s.closePath();break;case"crossRot":v+=dn;case"cross":m=Math.cos(v)*(n?n/2:j),l=Math.cos(v)*j,o=Math.sin(v)*j,h=Math.sin(v)*(n?n/2:j),s.moveTo(a-m,r-o),s.lineTo(a+m,r+o),s.moveTo(a+h,r-l),s.lineTo(a-h,r+l);break;case"star":m=Math.cos(v)*(n?n/2:j),l=Math.cos(v)*j,o=Math.sin(v)*j,h=Math.sin(v)*(n?n/2:j),s.moveTo(a-m,r-o),s.lineTo(a+m,r+o),s.moveTo(a+h,r-l),s.lineTo(a-h,r+l),v+=dn,m=Math.cos(v)*(n?n/2:j),l=Math.cos(v)*j,o=Math.sin(v)*j,h=Math.sin(v)*(n?n/2:j),s.moveTo(a-m,r-o),s.lineTo(a+m,r+o),s.moveTo(a+h,r-l),s.lineTo(a-h,r+l);break;case"line":l=n?n/2:Math.cos(v)*j,o=Math.sin(v)*j,s.moveTo(a-l,r-o),s.lineTo(a+l,r+o);break;case"dash":s.moveTo(a,r),s.lineTo(a+Math.cos(v)*(n?n/2:j),r+Math.sin(v)*j);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function Ga(s,t,a){return a=a||.5,!t||s&&s.x>t.left-a&&s.x<t.right+a&&s.y>t.top-a&&s.y<t.bottom+a}function zm(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Bm(s){s.restore()}function GI(s,t,a,r,n){if(!t)return s.lineTo(a.x,a.y);if(n==="middle"){const i=(t.x+a.x)/2;s.lineTo(i,t.y),s.lineTo(i,a.y)}else n==="after"!=!!r?s.lineTo(t.x,a.y):s.lineTo(a.x,t.y);s.lineTo(a.x,a.y)}function XI(s,t,a,r){if(!t)return s.lineTo(a.x,a.y);s.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?a.cp2x:a.cp1x,r?a.cp2y:a.cp1y,a.x,a.y)}function QI(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),Ie(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function JI(s,t,a,r,n){if(n.strikethrough||n.underline){const i=s.measureText(r),l=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,d=a+i.actualBoundingBoxDescent,u=n.strikethrough?(c+d)/2:d;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(l,u),s.lineTo(o,u),s.stroke()}}function ZI(s,t){const a=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=a}function Zn(s,t,a,r,n,i={}){const l=Qe(t)?t:[t],o=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(s.save(),s.font=n.string,QI(s,i),c=0;c<l.length;++c)d=l[c],i.backdrop&&ZI(s,i.backdrop),o&&(i.strokeColor&&(s.strokeStyle=i.strokeColor),Ie(i.strokeWidth)||(s.lineWidth=i.strokeWidth),s.strokeText(d,a,r,i.maxWidth)),s.fillText(d,a,r,i.maxWidth),JI(s,a,r,d,i),r+=Number(n.lineHeight);s.restore()}function Bo(s,t){const{x:a,y:r,w:n,h:i,radius:l}=t;s.arc(a+l.topLeft,r+l.topLeft,l.topLeft,1.5*Oe,Oe,!0),s.lineTo(a,r+i-l.bottomLeft),s.arc(a+l.bottomLeft,r+i-l.bottomLeft,l.bottomLeft,Oe,Nt,!0),s.lineTo(a+n-l.bottomRight,r+i),s.arc(a+n-l.bottomRight,r+i-l.bottomRight,l.bottomRight,Nt,0,!0),s.lineTo(a+n,r+l.topRight),s.arc(a+n-l.topRight,r+l.topRight,l.topRight,0,-Nt,!0),s.lineTo(a+l.topLeft,r)}const eR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tR=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function sR(s,t){const a=(""+s).match(eR);if(!a||a[1]==="normal")return t*1.2;switch(s=+a[2],a[3]){case"px":return s;case"%":s/=100;break}return t*s}const aR=s=>+s||0;function cg(s,t){const a={},r=Ae(t),n=r?Object.keys(t):t,i=Ae(s)?r?l=>we(s[l],s[t[l]]):l=>s[l]:()=>s;for(const l of n)a[l]=aR(i(l));return a}function E2(s){return cg(s,{top:"y",right:"x",bottom:"y",left:"x"})}function zn(s){return cg(s,["topLeft","topRight","bottomLeft","bottomRight"])}function os(s){const t=E2(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function It(s,t){s=s||{},t=t||yt.font;let a=we(s.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let r=we(s.style,t.style);r&&!(""+r).match(tR)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:we(s.family,t.family),lineHeight:sR(we(s.lineHeight,t.lineHeight),a),size:a,style:r,weight:we(s.weight,t.weight),string:""};return n.string=YI(n),n}function Ec(s,t,a,r){let n=!0,i,l,o;for(i=0,l=s.length;i<l;++i)if(o=s[i],o!==void 0&&(t!==void 0&&typeof o=="function"&&(o=o(t),n=!1),a!==void 0&&Qe(o)&&(o=o[a%o.length],n=!1),o!==void 0))return r&&!n&&(r.cacheable=!1),o}function rR(s,t,a){const{min:r,max:n}=s,i=w2(t,(n-r)/2),l=(o,c)=>a&&o===0?0:o+c;return{min:l(r,-Math.abs(i)),max:l(n,i)}}function on(s,t){return Object.assign(Object.create(s),t)}function dg(s,t=[""],a,r,n=()=>s[0]){const i=a||s;typeof r>"u"&&(r=O2("_fallback",s));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:i,_fallback:r,_getTarget:n,override:o=>dg([o,...s],t,i,r)};return new Proxy(l,{deleteProperty(o,c){return delete o[c],delete o._keys,delete s[0][c],!0},get(o,c){return R2(o,c,()=>mR(c,t,s,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(o,c){return Xv(o).includes(c)},ownKeys(o){return Xv(o)},set(o,c,d){const u=o._storage||(o._storage=n());return o[c]=u[c]=d,delete o._keys,!0}})}function qi(s,t,a,r){const n={_cacheable:!1,_proxy:s,_context:t,_subProxy:a,_stack:new Set,_descriptors:I2(s,r),setContext:i=>qi(s,i,a,r),override:i=>qi(s.override(i),t,a,r)};return new Proxy(n,{deleteProperty(i,l){return delete i[l],delete s[l],!0},get(i,l,o){return R2(i,l,()=>iR(i,l,o))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(s,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,l)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(i,l){return Reflect.has(s,l)},ownKeys(){return Reflect.ownKeys(s)},set(i,l,o){return s[l]=o,delete i[l],!0}})}function I2(s,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:r=t.indexable,_allKeys:n=t.allKeys}=s;return{allKeys:n,scriptable:a,indexable:r,isScriptable:en(a)?a:()=>a,isIndexable:en(r)?r:()=>r}}const nR=(s,t)=>s?s+rg(t):t,ug=(s,t)=>Ae(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function R2(s,t,a){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const r=a();return s[t]=r,r}function iR(s,t,a){const{_proxy:r,_context:n,_subProxy:i,_descriptors:l}=s;let o=r[t];return en(o)&&l.isScriptable(t)&&(o=lR(t,o,s,a)),Qe(o)&&o.length&&(o=oR(t,o,s,l.isIndexable)),ug(t,o)&&(o=qi(o,n,i&&i[t],l)),o}function lR(s,t,a,r){const{_proxy:n,_context:i,_subProxy:l,_stack:o}=a;if(o.has(s))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+s);o.add(s);let c=t(i,l||r);return o.delete(s),ug(s,c)&&(c=mg(n._scopes,n,s,c)),c}function oR(s,t,a,r){const{_proxy:n,_context:i,_subProxy:l,_descriptors:o}=a;if(typeof i.index<"u"&&r(s))return t[i.index%t.length];if(Ae(t[0])){const c=t,d=n._scopes.filter(u=>u!==c);t=[];for(const u of c){const m=mg(d,n,s,u);t.push(qi(m,i,l&&l[s],o))}}return t}function L2(s,t,a){return en(s)?s(t,a):s}const cR=(s,t)=>s===!0?t:typeof s=="string"?Qn(t,s):void 0;function dR(s,t,a,r,n){for(const i of t){const l=cR(a,i);if(l){s.add(l);const o=L2(l._fallback,a,n);if(typeof o<"u"&&o!==a&&o!==r)return o}else if(l===!1&&typeof r<"u"&&a!==r)return null}return!1}function mg(s,t,a,r){const n=t._rootScopes,i=L2(t._fallback,a,r),l=[...s,...n],o=new Set;o.add(r);let c=Gv(o,l,a,i||a,r);return c===null||typeof i<"u"&&i!==a&&(c=Gv(o,l,i,c,r),c===null)?!1:dg(Array.from(o),[""],n,i,()=>uR(t,a,r))}function Gv(s,t,a,r,n){for(;a;)a=dR(s,t,a,r,n);return a}function uR(s,t,a){const r=s._getTarget();t in r||(r[t]={});const n=r[t];return Qe(n)&&Ae(a)?a:n||{}}function mR(s,t,a,r){let n;for(const i of t)if(n=O2(nR(i,s),a),typeof n<"u")return ug(s,n)?mg(a,r,s,n):n}function O2(s,t){for(const a of t){if(!a)continue;const r=a[s];if(typeof r<"u")return r}}function Xv(s){let t=s._keys;return t||(t=s._keys=hR(s._scopes)),t}function hR(s){const t=new Set;for(const a of s)for(const r of Object.keys(a).filter(n=>!n.startsWith("_")))t.add(r);return Array.from(t)}const xR=Number.EPSILON||1e-14,Yi=(s,t)=>t<s.length&&!s[t].skip&&s[t],F2=s=>s==="x"?"y":"x";function pR(s,t,a,r){const n=s.skip?t:s,i=t,l=a.skip?t:a,o=i0(i,n),c=i0(l,i);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const m=r*d,h=r*u;return{previous:{x:i.x-m*(l.x-n.x),y:i.y-m*(l.y-n.y)},next:{x:i.x+h*(l.x-n.x),y:i.y+h*(l.y-n.y)}}}function fR(s,t,a){const r=s.length;let n,i,l,o,c,d=Yi(s,0);for(let u=0;u<r-1;++u)if(c=d,d=Yi(s,u+1),!(!c||!d)){if(ro(t[u],0,xR)){a[u]=a[u+1]=0;continue}n=a[u]/t[u],i=a[u+1]/t[u],o=Math.pow(n,2)+Math.pow(i,2),!(o<=9)&&(l=3/Math.sqrt(o),a[u]=n*l*t[u],a[u+1]=i*l*t[u])}}function gR(s,t,a="x"){const r=F2(a),n=s.length;let i,l,o,c=Yi(s,0);for(let d=0;d<n;++d){if(l=o,o=c,c=Yi(s,d+1),!o)continue;const u=o[a],m=o[r];l&&(i=(u-l[a])/3,o[`cp1${a}`]=u-i,o[`cp1${r}`]=m-i*t[d]),c&&(i=(c[a]-u)/3,o[`cp2${a}`]=u+i,o[`cp2${r}`]=m+i*t[d])}}function yR(s,t="x"){const a=F2(t),r=s.length,n=Array(r).fill(0),i=Array(r);let l,o,c,d=Yi(s,0);for(l=0;l<r;++l)if(o=c,c=d,d=Yi(s,l+1),!!c){if(d){const u=d[t]-c[t];n[l]=u!==0?(d[a]-c[a])/u:0}i[l]=o?d?Ma(n[l-1])!==Ma(n[l])?0:(n[l-1]+n[l])/2:n[l-1]:n[l]}fR(s,n,i),gR(s,i,t)}function Ic(s,t,a){return Math.max(Math.min(s,a),t)}function vR(s,t){let a,r,n,i,l,o=Ga(s[0],t);for(a=0,r=s.length;a<r;++a)l=i,i=o,o=a<r-1&&Ga(s[a+1],t),i&&(n=s[a],l&&(n.cp1x=Ic(n.cp1x,t.left,t.right),n.cp1y=Ic(n.cp1y,t.top,t.bottom)),o&&(n.cp2x=Ic(n.cp2x,t.left,t.right),n.cp2y=Ic(n.cp2y,t.top,t.bottom)))}function bR(s,t,a,r,n){let i,l,o,c;if(t.spanGaps&&(s=s.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")yR(s,n);else{let d=r?s[s.length-1]:s[0];for(i=0,l=s.length;i<l;++i)o=s[i],c=pR(d,o,s[Math.min(i+1,l-(r?0:1))%l],t.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}t.capBezierPoints&&vR(s,a)}function hg(){return typeof window<"u"&&typeof document<"u"}function xg(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Mu(s,t,a){let r;return typeof s=="string"?(r=parseInt(s,10),s.indexOf("%")!==-1&&(r=r/100*t.parentNode[a])):r=s,r}const Um=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function jR(s,t){return Um(s).getPropertyValue(t)}const NR=["top","right","bottom","left"];function Bn(s,t,a){const r={};a=a?"-"+a:"";for(let n=0;n<4;n++){const i=NR[n];r[i]=parseFloat(s[t+"-"+i+a])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const wR=(s,t,a)=>(s>0||t>0)&&(!a||!a.shadowRoot);function SR(s,t){const a=s.touches,r=a&&a.length?a[0]:s,{offsetX:n,offsetY:i}=r;let l=!1,o,c;if(wR(n,i,s.target))o=n,c=i;else{const d=t.getBoundingClientRect();o=r.clientX-d.left,c=r.clientY-d.top,l=!0}return{x:o,y:c,box:l}}function yn(s,t){if("native"in s)return s;const{canvas:a,currentDevicePixelRatio:r}=t,n=Um(a),i=n.boxSizing==="border-box",l=Bn(n,"padding"),o=Bn(n,"border","width"),{x:c,y:d,box:u}=SR(s,a),m=l.left+(u&&o.left),h=l.top+(u&&o.top);let{width:y,height:g}=t;return i&&(y-=l.width+o.width,g-=l.height+o.height),{x:Math.round((c-m)/y*a.width/r),y:Math.round((d-h)/g*a.height/r)}}function CR(s,t,a){let r,n;if(t===void 0||a===void 0){const i=s&&xg(s);if(!i)t=s.clientWidth,a=s.clientHeight;else{const l=i.getBoundingClientRect(),o=Um(i),c=Bn(o,"border","width"),d=Bn(o,"padding");t=l.width-d.width-c.width,a=l.height-d.height-c.height,r=Mu(o.maxWidth,i,"clientWidth"),n=Mu(o.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:r||Pu,maxHeight:n||Pu}}const Rc=s=>Math.round(s*10)/10;function kR(s,t,a,r){const n=Um(s),i=Bn(n,"margin"),l=Mu(n.maxWidth,s,"clientWidth")||Pu,o=Mu(n.maxHeight,s,"clientHeight")||Pu,c=CR(s,t,a);let{width:d,height:u}=c;if(n.boxSizing==="content-box"){const h=Bn(n,"border","width"),y=Bn(n,"padding");d-=y.width+h.width,u-=y.height+h.height}return d=Math.max(0,d-i.width),u=Math.max(0,r?d/r:u-i.height),d=Rc(Math.min(d,l,c.maxWidth)),u=Rc(Math.min(u,o,c.maxHeight)),d&&!u&&(u=Rc(d/2)),(t!==void 0||a!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,d=Rc(Math.floor(u*r))),{width:d,height:u}}function Qv(s,t,a){const r=t||1,n=Math.floor(s.height*r),i=Math.floor(s.width*r);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const l=s.canvas;return l.style&&(a||!l.style.height&&!l.style.width)&&(l.style.height=`${s.height}px`,l.style.width=`${s.width}px`),s.currentDevicePixelRatio!==r||l.height!==n||l.width!==i?(s.currentDevicePixelRatio=r,l.height=n,l.width=i,s.ctx.setTransform(r,0,0,r,0,0),!0):!1}const _R=function(){let s=!1;try{const t={get passive(){return s=!0,!1}};hg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s}();function Jv(s,t){const a=jR(s,t),r=a&&a.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function vn(s,t,a,r){return{x:s.x+a*(t.x-s.x),y:s.y+a*(t.y-s.y)}}function AR(s,t,a,r){return{x:s.x+a*(t.x-s.x),y:r==="middle"?a<.5?s.y:t.y:r==="after"?a<1?s.y:t.y:a>0?t.y:s.y}}function TR(s,t,a,r){const n={x:s.cp2x,y:s.cp2y},i={x:t.cp1x,y:t.cp1y},l=vn(s,n,a),o=vn(n,i,a),c=vn(i,t,a),d=vn(l,o,a),u=vn(o,c,a);return vn(d,u,a)}const PR=function(s,t){return{x(a){return s+s+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,r){return a-r},leftForLtr(a,r){return a-r}}},DR=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function Ri(s,t,a){return s?PR(t,a):DR()}function $2(s,t){let a,r;(t==="ltr"||t==="rtl")&&(a=s.canvas.style,r=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),s.prevTextDirection=r)}function z2(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function B2(s){return s==="angle"?{between:zo,compare:PI,normalize:ss}:{between:Ka,compare:(t,a)=>t-a,normalize:t=>t}}function Zv({start:s,end:t,count:a,loop:r,style:n}){return{start:s%a,end:t%a,loop:r&&(t-s+1)%a===0,style:n}}function MR(s,t,a){const{property:r,start:n,end:i}=a,{between:l,normalize:o}=B2(r),c=t.length;let{start:d,end:u,loop:m}=s,h,y;if(m){for(d+=c,u+=c,h=0,y=c;h<y&&l(o(t[d%c][r]),n,i);++h)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:m,style:s.style}}function U2(s,t,a){if(!a)return[s];const{property:r,start:n,end:i}=a,l=t.length,{compare:o,between:c,normalize:d}=B2(r),{start:u,end:m,loop:h,style:y}=MR(s,t,a),g=[];let j=!1,v=null,x,f,p;const N=()=>c(n,p,x)&&o(n,p)!==0,w=()=>o(i,x)===0||c(i,p,x),S=()=>j||N(),C=()=>!j||w();for(let T=u,_=u;T<=m;++T)f=t[T%l],!f.skip&&(x=d(f[r]),x!==p&&(j=c(x,n,i),v===null&&S()&&(v=o(x,n)===0?T:_),v!==null&&C()&&(g.push(Zv({start:v,end:T,loop:h,count:l,style:y})),v=null),_=T,p=x));return v!==null&&g.push(Zv({start:v,end:m,loop:h,count:l,style:y})),g}function V2(s,t){const a=[],r=s.segments;for(let n=0;n<r.length;n++){const i=U2(r[n],s.points,t);i.length&&a.push(...i)}return a}function ER(s,t,a,r){let n=0,i=t-1;if(a&&!r)for(;n<t&&!s[n].skip;)n++;for(;n<t&&s[n].skip;)n++;for(n%=t,a&&(i+=n);i>n&&s[i%t].skip;)i--;return i%=t,{start:n,end:i}}function IR(s,t,a,r){const n=s.length,i=[];let l=t,o=s[t],c;for(c=t+1;c<=a;++c){const d=s[c%n];d.skip||d.stop?o.skip||(r=!1,i.push({start:t%n,end:(c-1)%n,loop:r}),t=l=d.stop?c:null):(l=c,o.skip&&(t=c)),o=d}return l!==null&&i.push({start:t%n,end:l%n,loop:r}),i}function RR(s,t){const a=s.points,r=s.options.spanGaps,n=a.length;if(!n)return[];const i=!!s._loop,{start:l,end:o}=ER(a,n,i,r);if(r===!0)return eb(s,[{start:l,end:o,loop:i}],a,t);const c=o<l?o+n:o,d=!!s._fullLoop&&l===0&&o===n-1;return eb(s,IR(a,l,c,d),a,t)}function eb(s,t,a,r){return!r||!r.setContext||!a?t:LR(s,t,a,r)}function LR(s,t,a,r){const n=s._chart.getContext(),i=tb(s.options),{_datasetIndex:l,options:{spanGaps:o}}=s,c=a.length,d=[];let u=i,m=t[0].start,h=m;function y(g,j,v,x){const f=o?-1:1;if(g!==j){for(g+=c;a[g%c].skip;)g-=f;for(;a[j%c].skip;)j+=f;g%c!==j%c&&(d.push({start:g%c,end:j%c,loop:v,style:x}),u=x,m=j%c)}}for(const g of t){m=o?m:g.start;let j=a[m%c],v;for(h=m+1;h<=g.end;h++){const x=a[h%c];v=tb(r.setContext(on(n,{type:"segment",p0:j,p1:x,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:l}))),OR(v,u)&&y(m,h-1,g.loop,u),j=x,u=v}m<h-1&&y(m,h-1,g.loop,u)}return d}function tb(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function OR(s,t){if(!t)return!1;const a=[],r=function(n,i){return og(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(s,r)!==JSON.stringify(t,r)}function Lc(s,t,a){return s.options.clip?s[a]:t[a]}function FR(s,t){const{xScale:a,yScale:r}=s;return a&&r?{left:Lc(a,t,"left"),right:Lc(a,t,"right"),top:Lc(r,t,"top"),bottom:Lc(r,t,"bottom")}:t}function H2(s,t){const a=t._clip;if(a.disabled)return!1;const r=FR(t,s.chartArea);return{left:a.left===!1?0:r.left-(a.left===!0?0:a.left),right:a.right===!1?s.width:r.right+(a.right===!0?0:a.right),top:a.top===!1?0:r.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?s.height:r.bottom+(a.bottom===!0?0:a.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class $R{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,r,n){const i=a.listeners[n],l=a.duration;i.forEach(o=>o({chart:t,initial:a.initial,numSteps:l,currentStep:Math.min(r-a.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=T2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const i=r.items;let l=i.length-1,o=!1,c;for(;l>=0;--l)c=i[l],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(t),o=!0):(i[l]=i[i.length-1],i.pop());o&&(n.draw(),this._notify(n,r,t,"progress")),i.length||(r.running=!1,this._notify(n,r,t,"complete"),r.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let r=a.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,r)),r}listen(t,a,r){this._getAnims(t).listeners[a].push(r)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((r,n)=>Math.max(r,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const r=a.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var za=new $R;const sb="transparent",zR={boolean(s,t,a){return a>.5?t:s},color(s,t,a){const r=qv(s||sb),n=r.valid&&qv(t||sb);return n&&n.valid?n.mix(r,a).hexString():t},number(s,t,a){return s+(t-s)*a}};class BR{constructor(t,a,r,n){const i=a[r];n=Ec([t.to,n,i,t.from]);const l=Ec([t.from,i,n]);this._active=!0,this._fn=t.fn||zR[t.type||typeof l],this._easing=no[t.easing]||no.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=r,this._from=l,this._to=n,this._promises=void 0}active(){return this._active}update(t,a,r){if(this._active){this._notify(!1);const n=this._target[this._prop],i=r-this._start,l=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Ec([t.to,a,n,t.from]),this._from=Ec([t.from,n,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,r=this._duration,n=this._prop,i=this._from,l=this._loop,o=this._to;let c;if(this._active=i!==o&&(l||a<r),!this._active){this._target[n]=o,this._notify(!0);return}if(a<0){this._target[n]=i;return}c=a/r%2,c=l&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,o,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,r)=>{t.push({res:a,rej:r})})}_notify(t){const a=t?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][a]()}}class W2{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!Ae(t))return;const a=Object.keys(yt.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const i=t[n];if(!Ae(i))return;const l={};for(const o of a)l[o]=i[o];(Qe(i.properties)&&i.properties||[n]).forEach(o=>{(o===n||!r.has(o))&&r.set(o,l)})})}_animateOptions(t,a){const r=a.options,n=VR(t,r);if(!n)return[];const i=this._createAnimations(n,r);return r.$shared&&UR(t.options.$animations,r).then(()=>{t.options=r},()=>{}),i}_createAnimations(t,a){const r=this._properties,n=[],i=t.$animations||(t.$animations={}),l=Object.keys(a),o=Date.now();let c;for(c=l.length-1;c>=0;--c){const d=l[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(t,a));continue}const u=a[d];let m=i[d];const h=r.get(d);if(m)if(h&&m.active()){m.update(h,u,o);continue}else m.cancel();if(!h||!h.duration){t[d]=u;continue}i[d]=m=new BR(h,t,d,u),n.push(m)}return n}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const r=this._createAnimations(t,a);if(r.length)return za.add(this._chart,r),!0}}function UR(s,t){const a=[],r=Object.keys(t);for(let n=0;n<r.length;n++){const i=s[r[n]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function VR(s,t){if(!t)return;let a=s.options;if(!a){s.options=t;return}return a.$shared&&(s.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function ab(s,t){const a=s&&s.options||{},r=a.reverse,n=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:r?i:n,end:r?n:i}}function HR(s,t,a){if(a===!1)return!1;const r=ab(s,a),n=ab(t,a);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}function WR(s){let t,a,r,n;return Ae(s)?(t=s.top,a=s.right,r=s.bottom,n=s.left):t=a=r=n=s,{top:t,right:a,bottom:r,left:n,disabled:s===!1}}function q2(s,t){const a=[],r=s._getSortedDatasetMetas(t);let n,i;for(n=0,i=r.length;n<i;++n)a.push(r[n].index);return a}function rb(s,t,a,r={}){const n=s.keys,i=r.mode==="single";let l,o,c,d;if(t===null)return;let u=!1;for(l=0,o=n.length;l<o;++l){if(c=+n[l],c===a){if(u=!0,r.all)continue;break}d=s.values[c],gt(d)&&(i||t===0||Ma(t)===Ma(d))&&(t+=d)}return!u&&!r.all?0:t}function qR(s,t){const{iScale:a,vScale:r}=t,n=a.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",l=Object.keys(s),o=new Array(l.length);let c,d,u;for(c=0,d=l.length;c<d;++c)u=l[c],o[c]={[n]:u,[i]:s[u]};return o}function tx(s,t){const a=s&&s.options.stacked;return a||a===void 0&&t.stack!==void 0}function YR(s,t,a){return`${s.id}.${t.id}.${a.stack||a.type}`}function KR(s){const{min:t,max:a,minDefined:r,maxDefined:n}=s.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:n?a:Number.POSITIVE_INFINITY}}function GR(s,t,a){const r=s[t]||(s[t]={});return r[a]||(r[a]={})}function nb(s,t,a,r){for(const n of t.getMatchingVisibleMetas(r).reverse()){const i=s[n.index];if(a&&i>0||!a&&i<0)return n.index}return null}function ib(s,t){const{chart:a,_cachedMeta:r}=s,n=a._stacks||(a._stacks={}),{iScale:i,vScale:l,index:o}=r,c=i.axis,d=l.axis,u=YR(i,l,r),m=t.length;let h;for(let y=0;y<m;++y){const g=t[y],{[c]:j,[d]:v}=g,x=g._stacks||(g._stacks={});h=x[d]=GR(n,u,j),h[o]=v,h._top=nb(h,l,!0,r.type),h._bottom=nb(h,l,!1,r.type);const f=h._visualValues||(h._visualValues={});f[o]=v}}function sx(s,t){const a=s.scales;return Object.keys(a).filter(r=>a[r].axis===t).shift()}function XR(s,t){return on(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function QR(s,t,a){return on(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function yl(s,t){const a=s.controller.index,r=s.vScale&&s.vScale.axis;if(r){t=t||s._parsed;for(const n of t){const i=n._stacks;if(!i||i[r]===void 0||i[r][a]===void 0)return;delete i[r][a],i[r]._visualValues!==void 0&&i[r]._visualValues[a]!==void 0&&delete i[r]._visualValues[a]}}}const ax=s=>s==="reset"||s==="none",lb=(s,t)=>t?s:Object.assign({},s),JR=(s,t,a)=>s&&!t.hidden&&t._stacked&&{keys:q2(a,!0),values:null};class Un{constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=tx(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&yl(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,r=this.getDataset(),n=(m,h,y,g)=>m==="x"?h:m==="r"?g:y,i=a.xAxisID=we(r.xAxisID,sx(t,"x")),l=a.yAxisID=we(r.yAxisID,sx(t,"y")),o=a.rAxisID=we(r.rAxisID,sx(t,"r")),c=a.indexAxis,d=a.iAxisID=n(c,i,l,o),u=a.vAxisID=n(c,l,i,o);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(l),a.rScale=this.getScaleForId(o),a.iScale=this.getScaleForId(d),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Vv(this._data,this),t._stacked&&yl(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),r=this._data;if(Ae(a)){const n=this._cachedMeta;this._data=qR(a,n)}else if(r!==a){if(r){Vv(r,this);const n=this._cachedMeta;yl(n),n._parsed=[]}a&&Object.isExtensible(a)&&II(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const i=a._stacked;a._stacked=tx(a.vScale,a),a.stack!==r.stack&&(n=!0,yl(a),a.stack=r.stack),this._resyncElements(t),(n||i!==a._stacked)&&(ib(this,a._parsed),a._stacked=tx(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:r,_data:n}=this,{iScale:i,_stacked:l}=r,o=i.axis;let c=t===0&&a===n.length?!0:r._sorted,d=t>0&&r._parsed[t-1],u,m,h;if(this._parsing===!1)r._parsed=n,r._sorted=!0,h=n;else{Qe(n[t])?h=this.parseArrayData(r,n,t,a):Ae(n[t])?h=this.parseObjectData(r,n,t,a):h=this.parsePrimitiveData(r,n,t,a);const y=()=>m[o]===null||d&&m[o]<d[o];for(u=0;u<a;++u)r._parsed[u+t]=m=h[u],c&&(y()&&(c=!1),d=m);r._sorted=c}l&&ib(this,h)}parsePrimitiveData(t,a,r,n){const{iScale:i,vScale:l}=t,o=i.axis,c=l.axis,d=i.getLabels(),u=i===l,m=new Array(n);let h,y,g;for(h=0,y=n;h<y;++h)g=h+r,m[h]={[o]:u||i.parse(d[g],g),[c]:l.parse(a[g],g)};return m}parseArrayData(t,a,r,n){const{xScale:i,yScale:l}=t,o=new Array(n);let c,d,u,m;for(c=0,d=n;c<d;++c)u=c+r,m=a[u],o[c]={x:i.parse(m[0],u),y:l.parse(m[1],u)};return o}parseObjectData(t,a,r,n){const{xScale:i,yScale:l}=t,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let u,m,h,y;for(u=0,m=n;u<m;++u)h=u+r,y=a[h],d[u]={x:i.parse(Qn(y,o),h),y:l.parse(Qn(y,c),h)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,r){const n=this.chart,i=this._cachedMeta,l=a[t.axis],o={keys:q2(n,!0),values:a._stacks[t.axis]._visualValues};return rb(o,l,i.index,{mode:r})}updateRangeFromParsed(t,a,r,n){const i=r[a.axis];let l=i===null?NaN:i;const o=n&&r._stacks[a.axis];n&&o&&(n.values=o,l=rb(n,i,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,a){const r=this._cachedMeta,n=r._parsed,i=r._sorted&&t===r.iScale,l=n.length,o=this._getOtherScale(t),c=JR(a,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:m}=KR(o);let h,y;function g(){y=n[h];const j=y[o.axis];return!gt(y[t.axis])||u>j||m<j}for(h=0;h<l&&!(!g()&&(this.updateRangeFromParsed(d,t,y,c),i));++h);if(i){for(h=l-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(d,t,y,c);break}}return d}getAllParsedValues(t){const a=this._cachedMeta._parsed,r=[];let n,i,l;for(n=0,i=a.length;n<i;++n)l=a[n][t.axis],gt(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,r=a.iScale,n=a.vScale,i=this.getParsed(t);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=WR(we(this.options.clip,HR(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,r=this._cachedMeta,n=r.data||[],i=a.chartArea,l=[],o=this._drawStart||0,c=this._drawCount||n.length-o,d=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(t,i,o,c),u=o;u<o+c;++u){const m=n[u];m.hidden||(m.active&&d?l.push(m):m.draw(t,i))}for(u=0;u<l.length;++u)l[u].draw(t,i)}getStyle(t,a){const r=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,a,r){const n=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];i=l.$context||(l.$context=QR(this.getContext(),t,l)),i.parsed=this.getParsed(t),i.raw=n.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=XR(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=r,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",r){const n=a==="active",i=this._cachedDataOpts,l=t+"-"+a,o=i[l],c=this.enableOptionSharing&&Fo(r);if(o)return lb(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),m=n?[`${t}Hover`,"hover",t,""]:[t,""],h=d.getOptionScopes(this.getDataset(),u),y=Object.keys(yt.elements[t]),g=()=>this.getContext(r,n,a),j=d.resolveNamedOptions(h,y,g,m);return j.$shared&&(j.$shared=c,i[l]=Object.freeze(lb(j,c))),j}_resolveAnimations(t,a,r){const n=this.chart,i=this._cachedDataOpts,l=`animation-${a}`,o=i[l];if(o)return o;let c;if(n.options.animation!==!1){const u=this.chart.config,m=u.datasetAnimationScopeKeys(this._type,a),h=u.getOptionScopes(this.getDataset(),m);c=u.createResolver(h,this.getContext(t,r,a))}const d=new W2(n,c&&c.animations);return c&&c._cacheable&&(i[l]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||ax(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const r=this.resolveDataElementOptions(t,a),n=this._sharedOptions,i=this.getSharedOptions(r),l=this.includeOptions(a,i)||i!==n;return this.updateSharedOptions(i,a,r),{sharedOptions:i,includeOptions:l}}updateElement(t,a,r,n){ax(n)?Object.assign(t,r):this._resolveAnimations(a,n).update(t,r)}updateSharedOptions(t,a,r){t&&!ax(a)&&this._resolveAnimations(void 0,a).update(t,r)}_setStyle(t,a,r,n){t.active=n;const i=this.getStyle(a,n);this._resolveAnimations(a,r,n).update(t,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,a,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,r=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const n=r.length,i=a.length,l=Math.min(i,n);l&&this.parse(0,l),i>n?this._insertElements(n,i-n,t):i<n&&this._removeElements(i,n-i)}_insertElements(t,a,r=!0){const n=this._cachedMeta,i=n.data,l=t+a;let o;const c=d=>{for(d.length+=a,o=d.length-1;o>=l;o--)d[o]=d[o-a]};for(c(i),o=t;o<l;++o)i[o]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(t,a),r&&this.updateElements(i,t,a,"reset")}updateElements(t,a,r,n){}_removeElements(t,a){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(t,a);r._stacked&&yl(r,n)}r.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,r,n]=t;this[a](r,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}oe(Un,"defaults",{}),oe(Un,"datasetElementType",null),oe(Un,"dataElementType",null);function ZR(s,t){if(!s._cache.$bar){const a=s.getMatchingVisibleMetas(t);let r=[];for(let n=0,i=a.length;n<i;n++)r=r.concat(a[n].controller.getAllParsedValues(s));s._cache.$bar=A2(r.sort((n,i)=>n-i))}return s._cache.$bar}function eL(s){const t=s.iScale,a=ZR(t,s.type);let r=t._length,n,i,l,o;const c=()=>{l===32767||l===-32768||(Fo(o)&&(r=Math.min(r,Math.abs(l-o)||r)),o=l)};for(n=0,i=a.length;n<i;++n)l=t.getPixelForValue(a[n]),c();for(o=void 0,n=0,i=t.ticks.length;n<i;++n)l=t.getPixelForTick(n),c();return r}function tL(s,t,a,r){const n=a.barThickness;let i,l;return Ie(n)?(i=t.min*a.categoryPercentage,l=a.barPercentage):(i=n*r,l=1),{chunk:i/r,ratio:l,start:t.pixels[s]-i/2}}function sL(s,t,a,r){const n=t.pixels,i=n[s];let l=s>0?n[s-1]:null,o=s<n.length-1?n[s+1]:null;const c=a.categoryPercentage;l===null&&(l=i-(o===null?t.end-t.start:o-i)),o===null&&(o=i+i-l);const d=i-(i-Math.min(l,o))/2*c;return{chunk:Math.abs(o-l)/2*c/r,ratio:a.barPercentage,start:d}}function aL(s,t,a,r){const n=a.parse(s[0],r),i=a.parse(s[1],r),l=Math.min(n,i),o=Math.max(n,i);let c=l,d=o;Math.abs(l)>Math.abs(o)&&(c=o,d=l),t[a.axis]=d,t._custom={barStart:c,barEnd:d,start:n,end:i,min:l,max:o}}function Y2(s,t,a,r){return Qe(s)?aL(s,t,a,r):t[a.axis]=a.parse(s,r),t}function ob(s,t,a,r){const n=s.iScale,i=s.vScale,l=n.getLabels(),o=n===i,c=[];let d,u,m,h;for(d=a,u=a+r;d<u;++d)h=t[d],m={},m[n.axis]=o||n.parse(l[d],d),c.push(Y2(h,m,i,d));return c}function rx(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function rL(s,t,a){return s!==0?Ma(s):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function nL(s){let t,a,r,n,i;return s.horizontal?(t=s.base>s.x,a="left",r="right"):(t=s.base<s.y,a="bottom",r="top"),t?(n="end",i="start"):(n="start",i="end"),{start:a,end:r,reverse:t,top:n,bottom:i}}function iL(s,t,a,r){let n=t.borderSkipped;const i={};if(!n){s.borderSkipped=i;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:o,reverse:c,top:d,bottom:u}=nL(s);n==="middle"&&a&&(s.enableBorderRadius=!0,(a._top||0)===r?n=d:(a._bottom||0)===r?n=u:(i[cb(u,l,o,c)]=!0,n=d)),i[cb(n,l,o,c)]=!0,s.borderSkipped=i}function cb(s,t,a,r){return r?(s=lL(s,t,a),s=db(s,a,t)):s=db(s,t,a),s}function lL(s,t,a){return s===t?a:s===a?t:s}function db(s,t,a){return s==="start"?t:s==="end"?a:s}function oL(s,{inflateAmount:t},a){s.inflateAmount=t==="auto"?a===1?.33:0:t}class Ld extends Un{parsePrimitiveData(t,a,r,n){return ob(t,a,r,n)}parseArrayData(t,a,r,n){return ob(t,a,r,n)}parseObjectData(t,a,r,n){const{iScale:i,vScale:l}=t,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?o:c,u=l.axis==="x"?o:c,m=[];let h,y,g,j;for(h=r,y=r+n;h<y;++h)j=a[h],g={},g[i.axis]=i.parse(Qn(j,d),h),m.push(Y2(Qn(j,u),g,l,h));return m}updateRangeFromParsed(t,a,r,n){super.updateRangeFromParsed(t,a,r,n);const i=r._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:r,vScale:n}=a,i=this.getParsed(t),l=i._custom,o=rx(l)?"["+l.start+", "+l.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,r,n){const i=n==="reset",{index:l,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:m,includeOptions:h}=this._getSharedOptions(a,n);for(let y=a;y<a+r;y++){const g=this.getParsed(y),j=i||Ie(g[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(y),v=this._calculateBarIndexPixels(y,u),x=(g._stacks||{})[o.axis],f={horizontal:d,base:j.base,enableBorderRadius:!x||rx(g._custom)||l===x._top||l===x._bottom,x:d?j.head:v.center,y:d?v.center:j.head,height:d?v.size:Math.abs(j.size),width:d?Math.abs(j.size):v.size};h&&(f.options=m||this.resolveDataElementOptions(y,t[y].active?"active":n));const p=f.options||t[y].options;iL(f,p,x,l),oL(f,p,u.ratio),this.updateElement(t[y],y,f,n)}}_getStacks(t,a){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,l=[],o=this._cachedMeta.controller.getParsed(a),c=o&&o[r.axis],d=u=>{const m=u._parsed.find(y=>y[r.axis]===c),h=m&&m[u.vScale.axis];if(Ie(h)||isNaN(h))return!0};for(const u of n)if(!(a!==void 0&&d(u))&&((i===!1||l.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&l.push(u.stack),u.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[we(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,r){const n=this._getStacks(t,r),i=a!==void 0?n.indexOf(a):-1;return i===-1?n.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,r=a.iScale,n=[];let i,l;for(i=0,l=a.data.length;i<l;++i)n.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const o=t.barThickness;return{min:o||eL(a),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:r,index:n},options:{base:i,minBarLength:l}}=this,o=i||0,c=this.getParsed(t),d=c._custom,u=rx(d);let m=c[a.axis],h=0,y=r?this.applyStack(a,c,r):m,g,j;y!==m&&(h=y-m,y=m),u&&(m=d.barStart,y=d.barEnd-d.barStart,m!==0&&Ma(m)!==Ma(d.barEnd)&&(h=0),h+=m);const v=!Ie(i)&&!u?i:h;let x=a.getPixelForValue(v);if(this.chart.getDataVisibility(t)?g=a.getPixelForValue(h+y):g=x,j=g-x,Math.abs(j)<l){j=rL(j,a,o)*l,m===o&&(x-=j/2);const f=a.getPixelForDecimal(0),p=a.getPixelForDecimal(1),N=Math.min(f,p),w=Math.max(f,p);x=Math.max(Math.min(x,w),N),g=x+j,r&&!u&&(c._stacks[a.axis]._visualValues[n]=a.getValueForPixel(g)-a.getValueForPixel(x))}if(x===a.getPixelForValue(o)){const f=Ma(j)*a.getLineWidthForValue(o)/2;x+=f,j-=f}return{size:j,base:x,head:g,center:g+j/2}}_calculateBarIndexPixels(t,a){const r=a.scale,n=this.options,i=n.skipNull,l=we(n.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(a.grouped){const u=i?this._getStackCount(t):a.stackCount,m=n.barThickness==="flex"?sL(t,a,n,u*d):tL(t,a,n,u*d),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,y=this._getAxis().indexOf(we(h,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+y;o=m.start+m.chunk*g+m.chunk/2,c=Math.min(l,m.chunk*m.ratio)}else o=r.getPixelForValue(this.getParsed(t)[r.axis],t),c=Math.min(l,a.min*a.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const t=this._cachedMeta,a=t.vScale,r=t.data,n=r.length;let i=0;for(;i<n;++i)this.getParsed(i)[a.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}oe(Ld,"id","bar"),oe(Ld,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),oe(Ld,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function cL(s,t,a){let r=1,n=1,i=0,l=0;if(t<et){const o=s,c=o+t,d=Math.cos(o),u=Math.sin(o),m=Math.cos(c),h=Math.sin(c),y=(p,N,w)=>zo(p,o,c,!0)?1:Math.max(N,N*a,w,w*a),g=(p,N,w)=>zo(p,o,c,!0)?-1:Math.min(N,N*a,w,w*a),j=y(0,d,m),v=y(Nt,u,h),x=g(Oe,d,m),f=g(Oe+Nt,u,h);r=(j-x)/2,n=(v-f)/2,i=-(j+x)/2,l=-(v+f)/2}return{ratioX:r,ratioY:n,offsetX:i,offsetY:l}}class Ml extends Un{constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const r=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=r;else{let i=c=>+r[c];if(Ae(r[t])){const{key:c="value"}=this._parsing;i=d=>+Qn(r[d],c)}let l,o;for(l=t,o=t+a;l<o;++l)n._parsed[l]=i(l)}}_getRotation(){return ka(this.options.rotation-90)}_getCircumference(){return ka(this.options.circumference)}_getRotationExtents(){let t=et,a=-et;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,i=n._getRotation(),l=n._getCircumference();t=Math.min(t,i),a=Math.max(a,i+l)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:r}=a,n=this._cachedMeta,i=n.data,l=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-l)/2,0),c=Math.min(vI(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:m}=this._getRotationExtents(),{ratioX:h,ratioY:y,offsetX:g,offsetY:j}=cL(m,u,c),v=(r.width-l)/h,x=(r.height-l)/y,f=Math.max(Math.min(v,x)/2,0),p=w2(this.options.radius,f),N=Math.max(p*c,0),w=(p-N)/this._getVisibleDatasetWeightTotal();this.offsetX=g*p,this.offsetY=j*p,n.total=this.calculateTotal(),this.outerRadius=p-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const r=this.options,n=this._cachedMeta,i=this._getCircumference();return a&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*i/et)}updateElements(t,a,r,n){const i=n==="reset",l=this.chart,o=l.chartArea,d=l.options.animation,u=(o.left+o.right)/2,m=(o.top+o.bottom)/2,h=i&&d.animateScale,y=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:j,includeOptions:v}=this._getSharedOptions(a,n);let x=this._getRotation(),f;for(f=0;f<a;++f)x+=this._circumference(f,i);for(f=a;f<a+r;++f){const p=this._circumference(f,i),N=t[f],w={x:u+this.offsetX,y:m+this.offsetY,startAngle:x,endAngle:x+p,circumference:p,outerRadius:g,innerRadius:y};v&&(w.options=j||this.resolveDataElementOptions(f,N.active?"active":n)),x+=p,this.updateElement(N,f,w,n)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let r=0,n;for(n=0;n<a.length;n++){const i=t._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!a[n].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?et*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=Fm(a._parsed[t],r.options.locale);return{label:n[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const r=this.chart;let n,i,l,o,c;if(!t){for(n=0,i=r.data.datasets.length;n<i;++n)if(r.isDatasetVisible(n)){l=r.getDatasetMeta(n),t=l.data,o=l.controller;break}}if(!t)return 0;for(n=0,i=t.length;n<i;++n)c=o.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let r=0,n=t.length;r<n;++r){const i=this.resolveDataElementOptions(r);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(a+=this._getRingWeight(r));return a}_getRingWeight(t){return Math.max(we(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}oe(Ml,"id","doughnut"),oe(Ml,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),oe(Ml,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),oe(Ml,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data;if(a.labels.length&&a.datasets.length){const{labels:{pointStyle:r,color:n}}=t.legend.options;return a.labels.map((i,l)=>{const c=t.getDatasetMeta(0).controller.getStyle(l);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,a,r){r.chart.toggleDataVisibility(a.index),r.chart.update()}}}});class Od extends Un{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:r,data:n=[],_dataset:i}=a,l=this.chart._animationsDisabled;let{start:o,count:c}=OI(a,n,l);this._drawStart=o,this._drawCount=c,FI(a)&&(o=0,c=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=n;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:d},t),this.updateElements(n,o,c,t)}updateElements(t,a,r,n){const i=n==="reset",{iScale:l,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:m}=this._getSharedOptions(a,n),h=l.axis,y=o.axis,{spanGaps:g,segment:j}=this.options,v=$o(g)?g:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||i||n==="none",f=a+r,p=t.length;let N=a>0&&this.getParsed(a-1);for(let w=0;w<p;++w){const S=t[w],C=x?S:{};if(w<a||w>=f){C.skip=!0;continue}const T=this.getParsed(w),_=Ie(T[y]),F=C[h]=l.getPixelForValue(T[h],w),D=C[y]=i||_?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,T,c):T[y],w);C.skip=isNaN(F)||isNaN(D)||_,C.stop=w>0&&Math.abs(T[h]-N[h])>v,j&&(C.parsed=T,C.raw=d.data[w]),m&&(C.options=u||this.resolveDataElementOptions(w,S.active?"active":n)),x||this.updateElement(S,w,C,n),N=T}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,r=a.options&&a.options.borderWidth||0,n=t.data||[];if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}oe(Od,"id","line"),oe(Od,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),oe(Od,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function mn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pg{constructor(t){oe(this,"options");this.options=t||{}}static override(t){Object.assign(pg.prototype,t)}init(){}formats(){return mn()}parse(){return mn()}format(){return mn()}add(){return mn()}diff(){return mn()}startOf(){return mn()}endOf(){return mn()}}var dL={_date:pg};function uL(s,t,a,r){const{controller:n,data:i,_sorted:l}=s,o=n._cachedMeta.iScale,c=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&l&&i.length){const d=o._reversePixels?MI:Pn;if(r){if(n._sharedOptions){const u=i[0],m=typeof u.getRange=="function"&&u.getRange(t);if(m){const h=d(i,t,a-m),y=d(i,t,a+m);return{lo:h.lo,hi:y.hi}}}}else{const u=d(i,t,a);if(c){const{vScale:m}=n._cachedMeta,{_parsed:h}=s,y=h.slice(0,u.lo+1).reverse().findIndex(j=>!Ie(j[m.axis]));u.lo-=Math.max(0,y);const g=h.slice(u.hi).findIndex(j=>!Ie(j[m.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:i.length-1}}function rc(s,t,a,r,n){const i=s.getSortedVisibleDatasetMetas(),l=a[t];for(let o=0,c=i.length;o<c;++o){const{index:d,data:u}=i[o],{lo:m,hi:h}=uL(i[o],t,l,n);for(let y=m;y<=h;++y){const g=u[y];g.skip||r(g,d,y)}}}function mL(s){const t=s.indexOf("x")!==-1,a=s.indexOf("y")!==-1;return function(r,n){const i=t?Math.abs(r.x-n.x):0,l=a?Math.abs(r.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function nx(s,t,a,r,n){const i=[];return!n&&!s.isPointInArea(t)||rc(s,a,t,function(o,c,d){!n&&!Ga(o,s.chartArea,0)||o.inRange(t.x,t.y,r)&&i.push({element:o,datasetIndex:c,index:d})},!0),i}function hL(s,t,a,r){let n=[];function i(l,o,c){const{startAngle:d,endAngle:u}=l.getProps(["startAngle","endAngle"],r),{angle:m}=k2(l,{x:t.x,y:t.y});zo(m,d,u)&&n.push({element:l,datasetIndex:o,index:c})}return rc(s,a,t,i),n}function xL(s,t,a,r,n,i){let l=[];const o=mL(a);let c=Number.POSITIVE_INFINITY;function d(u,m,h){const y=u.inRange(t.x,t.y,n);if(r&&!y)return;const g=u.getCenterPoint(n);if(!(!!i||s.isPointInArea(g))&&!y)return;const v=o(t,g);v<c?(l=[{element:u,datasetIndex:m,index:h}],c=v):v===c&&l.push({element:u,datasetIndex:m,index:h})}return rc(s,a,t,d),l}function ix(s,t,a,r,n,i){return!i&&!s.isPointInArea(t)?[]:a==="r"&&!r?hL(s,t,a,n):xL(s,t,a,r,n,i)}function ub(s,t,a,r,n){const i=[],l=a==="x"?"inXRange":"inYRange";let o=!1;return rc(s,a,t,(c,d,u)=>{c[l]&&c[l](t[a],n)&&(i.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(t.x,t.y,n))}),r&&!o?[]:i}var pL={evaluateInteractionItems:rc,modes:{index(s,t,a,r){const n=yn(t,s),i=a.axis||"x",l=a.includeInvisible||!1,o=a.intersect?nx(s,n,i,r,l):ix(s,n,i,!1,r,l),c=[];return o.length?(s.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,m=d.data[u];m&&!m.skip&&c.push({element:m,datasetIndex:d.index,index:u})}),c):[]},dataset(s,t,a,r){const n=yn(t,s),i=a.axis||"xy",l=a.includeInvisible||!1;let o=a.intersect?nx(s,n,i,r,l):ix(s,n,i,!1,r,l);if(o.length>0){const c=o[0].datasetIndex,d=s.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(s,t,a,r){const n=yn(t,s),i=a.axis||"xy",l=a.includeInvisible||!1;return nx(s,n,i,r,l)},nearest(s,t,a,r){const n=yn(t,s),i=a.axis||"xy",l=a.includeInvisible||!1;return ix(s,n,i,a.intersect,r,l)},x(s,t,a,r){const n=yn(t,s);return ub(s,n,"x",a.intersect,r)},y(s,t,a,r){const n=yn(t,s);return ub(s,n,"y",a.intersect,r)}}};const K2=["left","top","right","bottom"];function vl(s,t){return s.filter(a=>a.pos===t)}function mb(s,t){return s.filter(a=>K2.indexOf(a.pos)===-1&&a.box.axis===t)}function bl(s,t){return s.sort((a,r)=>{const n=t?r:a,i=t?a:r;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function fL(s){const t=[];let a,r,n,i,l,o;for(a=0,r=(s||[]).length;a<r;++a)n=s[a],{position:i,options:{stack:l,stackWeight:o=1}}=n,t.push({index:a,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:l&&i+l,stackWeight:o});return t}function gL(s){const t={};for(const a of s){const{stack:r,pos:n,stackWeight:i}=a;if(!r||!K2.includes(n))continue;const l=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return t}function yL(s,t){const a=gL(s),{vBoxMaxWidth:r,hBoxMaxHeight:n}=t;let i,l,o;for(i=0,l=s.length;i<l;++i){o=s[i];const{fullSize:c}=o.box,d=a[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*r:c&&t.availableWidth,o.height=n):(o.width=r,o.height=u?u*n:c&&t.availableHeight)}return a}function vL(s){const t=fL(s),a=bl(t.filter(d=>d.box.fullSize),!0),r=bl(vl(t,"left"),!0),n=bl(vl(t,"right")),i=bl(vl(t,"top"),!0),l=bl(vl(t,"bottom")),o=mb(t,"x"),c=mb(t,"y");return{fullSize:a,leftAndTop:r.concat(i),rightAndBottom:n.concat(c).concat(l).concat(o),chartArea:vl(t,"chartArea"),vertical:r.concat(n).concat(c),horizontal:i.concat(l).concat(o)}}function hb(s,t,a,r){return Math.max(s[a],t[a])+Math.max(s[r],t[r])}function G2(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function bL(s,t,a,r){const{pos:n,box:i}=a,l=s.maxPadding;if(!Ae(n)){a.size&&(s[n]-=a.size);const m=r[a.stack]||{size:0,count:1};m.size=Math.max(m.size,a.horizontal?i.height:i.width),a.size=m.size/m.count,s[n]+=a.size}i.getPadding&&G2(l,i.getPadding());const o=Math.max(0,t.outerWidth-hb(l,s,"left","right")),c=Math.max(0,t.outerHeight-hb(l,s,"top","bottom")),d=o!==s.w,u=c!==s.h;return s.w=o,s.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function jL(s){const t=s.maxPadding;function a(r){const n=Math.max(t[r]-s[r],0);return s[r]+=n,n}s.y+=a("top"),s.x+=a("left"),a("right"),a("bottom")}function NL(s,t){const a=t.maxPadding;function r(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(l=>{i[l]=Math.max(t[l],a[l])}),i}return r(s?["left","right"]:["top","bottom"])}function El(s,t,a,r){const n=[];let i,l,o,c,d,u;for(i=0,l=s.length,d=0;i<l;++i){o=s[i],c=o.box,c.update(o.width||t.w,o.height||t.h,NL(o.horizontal,t));const{same:m,other:h}=bL(t,a,o,r);d|=m&&n.length,u=u||h,c.fullSize||n.push(o)}return d&&El(n,t,a,r)||u}function Oc(s,t,a,r,n){s.top=a,s.left=t,s.right=t+r,s.bottom=a+n,s.width=r,s.height=n}function xb(s,t,a,r){const n=a.padding;let{x:i,y:l}=t;for(const o of s){const c=o.box,d=r[o.stack]||{count:1,placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const m=t.w*u,h=d.size||c.height;Fo(d.start)&&(l=d.start),c.fullSize?Oc(c,n.left,l,a.outerWidth-n.right-n.left,h):Oc(c,t.left+d.placed,l,m,h),d.start=l,d.placed+=m,l=c.bottom}else{const m=t.h*u,h=d.size||c.width;Fo(d.start)&&(i=d.start),c.fullSize?Oc(c,i,n.top,h,a.outerHeight-n.bottom-n.top):Oc(c,i,t.top+d.placed,h,m),d.start=i,d.placed+=m,i=c.right}}t.x=i,t.y=l}var qs={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},s.boxes.push(t)},removeBox(s,t){const a=s.boxes?s.boxes.indexOf(t):-1;a!==-1&&s.boxes.splice(a,1)},configure(s,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(s,t,a,r){if(!s)return;const n=os(s.options.layout.padding),i=Math.max(t-n.width,0),l=Math.max(a-n.height,0),o=vL(s.boxes),c=o.vertical,d=o.horizontal;$e(s.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const u=c.reduce((j,v)=>v.box.options&&v.box.options.display===!1?j:j+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:a,padding:n,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/u,hBoxMaxHeight:l/2}),h=Object.assign({},n);G2(h,os(r));const y=Object.assign({maxPadding:h,w:i,h:l,x:n.left,y:n.top},n),g=yL(c.concat(d),m);El(o.fullSize,y,m,g),El(c,y,m,g),El(d,y,m,g)&&El(c,y,m,g),jL(y),xb(o.leftAndTop,y,m,g),y.x+=y.w,y.y+=y.h,xb(o.rightAndBottom,y,m,g),s.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},$e(o.chartArea,j=>{const v=j.box;Object.assign(v,s.chartArea),v.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class X2{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,r){}removeEventListener(t,a,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,r,n){return a=Math.max(0,a||t.width),r=r||t.height,{width:a,height:Math.max(0,n?Math.floor(a/n):r)}}isAttached(t){return!0}updateConfig(t){}}class wL extends X2{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Fd="$chartjs",SL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pb=s=>s===null||s==="";function CL(s,t){const a=s.style,r=s.getAttribute("height"),n=s.getAttribute("width");if(s[Fd]={initial:{height:r,width:n,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",pb(n)){const i=Jv(s,"width");i!==void 0&&(s.width=i)}if(pb(r))if(s.style.height==="")s.height=s.width/(t||2);else{const i=Jv(s,"height");i!==void 0&&(s.height=i)}return s}const Q2=_R?{passive:!0}:!1;function kL(s,t,a){s&&s.addEventListener(t,a,Q2)}function _L(s,t,a){s&&s.canvas&&s.canvas.removeEventListener(t,a,Q2)}function AL(s,t){const a=SL[s.type]||s.type,{x:r,y:n}=yn(s,t);return{type:a,chart:t,native:s,x:r!==void 0?r:null,y:n!==void 0?n:null}}function Eu(s,t){for(const a of s)if(a===t||a.contains(t))return!0}function TL(s,t,a){const r=s.canvas,n=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||Eu(o.addedNodes,r),l=l&&!Eu(o.removedNodes,r);l&&a()});return n.observe(document,{childList:!0,subtree:!0}),n}function PL(s,t,a){const r=s.canvas,n=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||Eu(o.removedNodes,r),l=l&&!Eu(o.addedNodes,r);l&&a()});return n.observe(document,{childList:!0,subtree:!0}),n}const Uo=new Map;let fb=0;function J2(){const s=window.devicePixelRatio;s!==fb&&(fb=s,Uo.forEach((t,a)=>{a.currentDevicePixelRatio!==s&&t()}))}function DL(s,t){Uo.size||window.addEventListener("resize",J2),Uo.set(s,t)}function ML(s){Uo.delete(s),Uo.size||window.removeEventListener("resize",J2)}function EL(s,t,a){const r=s.canvas,n=r&&xg(r);if(!n)return;const i=P2((o,c)=>{const d=n.clientWidth;a(o,c),d<n.clientWidth&&a()},window),l=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return l.observe(n),DL(s,i),l}function lx(s,t,a){a&&a.disconnect(),t==="resize"&&ML(s)}function IL(s,t,a){const r=s.canvas,n=P2(i=>{s.ctx!==null&&a(AL(i,s))},s);return kL(r,t,n),n}class RL extends X2{acquireContext(t,a){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(CL(t,a),r):null}releaseContext(t){const a=t.canvas;if(!a[Fd])return!1;const r=a[Fd].initial;["height","width"].forEach(i=>{const l=r[i];Ie(l)?a.removeAttribute(i):a.setAttribute(i,l)});const n=r.style||{};return Object.keys(n).forEach(i=>{a.style[i]=n[i]}),a.width=a.width,delete a[Fd],!0}addEventListener(t,a,r){this.removeEventListener(t,a);const n=t.$proxies||(t.$proxies={}),l={attach:TL,detach:PL,resize:EL}[a]||IL;n[a]=l(t,a,r)}removeEventListener(t,a){const r=t.$proxies||(t.$proxies={}),n=r[a];if(!n)return;({attach:lx,detach:lx,resize:lx}[a]||_L)(t,a,n),r[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,r,n){return kR(t,a,r,n)}isAttached(t){const a=t&&xg(t);return!!(a&&a.isConnected)}}function LL(s){return!hg()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?wL:RL}class fa{constructor(){oe(this,"x");oe(this,"y");oe(this,"active",!1);oe(this,"options");oe(this,"$animations")}tooltipPosition(t){const{x:a,y:r}=this.getProps(["x","y"],t);return{x:a,y:r}}hasValue(){return $o(this.x)&&$o(this.y)}getProps(t,a){const r=this.$animations;if(!a||!r)return this;const n={};return t.forEach(i=>{n[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),n}}oe(fa,"defaults",{}),oe(fa,"defaultRoutes");function OL(s,t){const a=s.options.ticks,r=FL(s),n=Math.min(a.maxTicksLimit||r,r),i=a.major.enabled?zL(t):[],l=i.length,o=i[0],c=i[l-1],d=[];if(l>n)return BL(t,d,i,l/n),d;const u=$L(i,t,n);if(l>0){let m,h;const y=l>1?Math.round((c-o)/(l-1)):null;for(Fc(t,d,u,Ie(y)?0:o-y,o),m=0,h=l-1;m<h;m++)Fc(t,d,u,i[m],i[m+1]);return Fc(t,d,u,c,Ie(y)?t.length:c+y),d}return Fc(t,d,u),d}function FL(s){const t=s.options.offset,a=s._tickSize(),r=s._length/a+(t?0:1),n=s._maxLength/a;return Math.floor(Math.min(r,n))}function $L(s,t,a){const r=UL(s),n=t.length/a;if(!r)return Math.max(n,1);const i=_I(r);for(let l=0,o=i.length-1;l<o;l++){const c=i[l];if(c>n)return c}return Math.max(n,1)}function zL(s){const t=[];let a,r;for(a=0,r=s.length;a<r;a++)s[a].major&&t.push(a);return t}function BL(s,t,a,r){let n=0,i=a[0],l;for(r=Math.ceil(r),l=0;l<s.length;l++)l===i&&(t.push(s[l]),n++,i=a[n*r])}function Fc(s,t,a,r,n){const i=we(r,0),l=Math.min(we(n,s.length),s.length);let o=0,c,d,u;for(a=Math.ceil(a),n&&(c=n-r,a=c/Math.floor(c/a)),u=i;u<0;)o++,u=Math.round(i+o*a);for(d=Math.max(i,0);d<l;d++)d===u&&(t.push(s[d]),o++,u=Math.round(i+o*a))}function UL(s){const t=s.length;let a,r;if(t<2)return!1;for(r=s[0],a=1;a<t;++a)if(s[a]-s[a-1]!==r)return!1;return r}const VL=s=>s==="left"?"right":s==="right"?"left":s,gb=(s,t,a)=>t==="top"||t==="left"?s[t]+a:s[t]-a,yb=(s,t)=>Math.min(t||s,s);function vb(s,t){const a=[],r=s.length/t,n=s.length;let i=0;for(;i<n;i+=r)a.push(s[Math.floor(i)]);return a}function HL(s,t,a){const r=s.ticks.length,n=Math.min(t,r-1),i=s._startPixel,l=s._endPixel,o=1e-6;let c=s.getPixelForTick(n),d;if(!(a&&(r===1?d=Math.max(c-i,l-c):t===0?d=(s.getPixelForTick(1)-c)/2:d=(c-s.getPixelForTick(n-1))/2,c+=n<t?d:-d,c<i-o||c>l+o)))return c}function WL(s,t){$e(s,a=>{const r=a.gc,n=r.length/2;let i;if(n>t){for(i=0;i<n;++i)delete a.data[r[i]];r.splice(0,n)}})}function jl(s){return s.drawTicks?s.tickLength:0}function bb(s,t){if(!s.display)return 0;const a=It(s.font,t),r=os(s.padding);return(Qe(s.text)?s.text.length:1)*a.lineHeight+r.height}function qL(s,t){return on(s,{scale:t,type:"scale"})}function YL(s,t,a){return on(s,{tick:a,index:t,type:"tick"})}function KL(s,t,a){let r=lg(s);return(a&&t!=="right"||!a&&t==="right")&&(r=VL(r)),r}function GL(s,t,a,r){const{top:n,left:i,bottom:l,right:o,chart:c}=s,{chartArea:d,scales:u}=c;let m=0,h,y,g;const j=l-n,v=o-i;if(s.isHorizontal()){if(y=es(r,i,o),Ae(a)){const x=Object.keys(a)[0],f=a[x];g=u[x].getPixelForValue(f)+j-t}else a==="center"?g=(d.bottom+d.top)/2+j-t:g=gb(s,a,t);h=o-i}else{if(Ae(a)){const x=Object.keys(a)[0],f=a[x];y=u[x].getPixelForValue(f)-v+t}else a==="center"?y=(d.left+d.right)/2-v+t:y=gb(s,a,t);g=es(r,l,n),m=a==="left"?-Nt:Nt}return{titleX:y,titleY:g,maxWidth:h,rotation:m}}class ai extends fa{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:r,_suggestedMax:n}=this;return t=Ps(t,Number.POSITIVE_INFINITY),a=Ps(a,Number.NEGATIVE_INFINITY),r=Ps(r,Number.POSITIVE_INFINITY),n=Ps(n,Number.NEGATIVE_INFINITY),{min:Ps(t,r),max:Ps(a,n),minDefined:gt(t),maxDefined:gt(a)}}getMinMax(t){let{min:a,max:r,minDefined:n,maxDefined:i}=this.getUserBounds(),l;if(n&&i)return{min:a,max:r};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)l=o[c].controller.getMinMax(this,t),n||(a=Math.min(a,l.min)),i||(r=Math.max(r,l.max));return a=i&&a>r?r:a,r=n&&a>r?a:r,{min:Ps(a,Ps(r,a)),max:Ps(r,Ps(a,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ke(this.options.beforeUpdate,[this])}update(t,a,r){const{beginAtZero:n,grace:i,ticks:l}=this.options,o=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=rR(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?vb(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=OL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,r;this.isHorizontal()?(a=this.left,r=this.right):(a=this.top,r=this.bottom,t=!t),this._startPixel=a,this._endPixel=r,this._reversePixels=t,this._length=r-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ke(this.options.afterUpdate,[this])}beforeSetDimensions(){Ke(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ke(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ke(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ke(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let r,n,i;for(r=0,n=t.length;r<n;r++)i=t[r],i.label=Ke(a.callback,[i.value,r,t],this)}afterTickToLabelConversion(){Ke(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ke(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,r=yb(this.ticks.length,t.ticks.maxTicksLimit),n=a.minRotation||0,i=a.maxRotation;let l=n,o,c,d;if(!this._isVisible()||!a.display||n>=i||r<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),m=u.widest.width,h=u.highest.height,y=is(this.chart.width-m,0,this.maxWidth);o=t.offset?this.maxWidth/r:y/(r-1),m+6>o&&(o=y/(r-(t.offset?.5:1)),c=this.maxHeight-jl(t.grid)-a.padding-bb(t.title,this.chart.options.font),d=Math.sqrt(m*m+h*h),l=ng(Math.min(Math.asin(is((u.highest.height+6)/o,-1,1)),Math.asin(is(c/d,-1,1))-Math.asin(is(h/d,-1,1)))),l=Math.max(n,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ke(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ke(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:r,title:n,grid:i}}=this,l=this._isVisible(),o=this.isHorizontal();if(l){const c=bb(n,a.options.font);if(o?(t.width=this.maxWidth,t.height=jl(i)+c):(t.height=this.maxHeight,t.width=jl(i)+c),r.display&&this.ticks.length){const{first:d,last:u,widest:m,highest:h}=this._getLabelSizes(),y=r.padding*2,g=ka(this.labelRotation),j=Math.cos(g),v=Math.sin(g);if(o){const x=r.mirror?0:v*m.width+j*h.height;t.height=Math.min(this.maxHeight,t.height+x+y)}else{const x=r.mirror?0:j*m.width+v*h.height;t.width=Math.min(this.maxWidth,t.width+x+y)}this._calculatePadding(d,u,v,j)}}this._handleMargins(),o?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,r,n){const{ticks:{align:i,padding:l},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,y=0;c?d?(h=n*t.width,y=r*a.height):(h=r*t.height,y=n*a.width):i==="start"?y=a.width:i==="end"?h=t.width:i!=="inner"&&(h=t.width/2,y=a.width/2),this.paddingLeft=Math.max((h-u+l)*this.width/(this.width-u),0),this.paddingRight=Math.max((y-m+l)*this.width/(this.width-m),0)}else{let u=a.height/2,m=t.height/2;i==="start"?(u=0,m=t.height):i==="end"&&(u=a.height,m=0),this.paddingTop=u+l,this.paddingBottom=m+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ke(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,r;for(a=0,r=t.length;a<r;a++)Ie(t[a].label)&&(t.splice(a,1),r--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let r=this.ticks;a<r.length&&(r=vb(r,a)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,r){const{ctx:n,_longestTextCache:i}=this,l=[],o=[],c=Math.floor(a/yb(a,r));let d=0,u=0,m,h,y,g,j,v,x,f,p,N,w;for(m=0;m<a;m+=c){if(g=t[m].label,j=this._resolveTickFontOptions(m),n.font=v=j.string,x=i[v]=i[v]||{data:{},gc:[]},f=j.lineHeight,p=N=0,!Ie(g)&&!Qe(g))p=Du(n,x.data,x.gc,p,g),N=f;else if(Qe(g))for(h=0,y=g.length;h<y;++h)w=g[h],!Ie(w)&&!Qe(w)&&(p=Du(n,x.data,x.gc,p,w),N+=f);l.push(p),o.push(N),d=Math.max(p,d),u=Math.max(N,u)}WL(i,a);const S=l.indexOf(d),C=o.indexOf(u),T=_=>({width:l[_]||0,height:o[_]||0});return{first:T(0),last:T(a-1),widest:T(S),highest:T(C),widths:l,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return DI(this._alignToPixels?un(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const r=a[t];return r.$context||(r.$context=YL(this.getContext(),t,r))}return this.$context||(this.$context=qL(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=ka(this.labelRotation),r=Math.abs(Math.cos(a)),n=Math.abs(Math.sin(a)),i=this._getLabelSizes(),l=t.autoSkipPadding||0,o=i?i.widest.width+l:0,c=i?i.highest.height+l:0;return this.isHorizontal()?c*r>o*n?o/r:c/n:c*n<o*r?c/r:o/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,r=this.chart,n=this.options,{grid:i,position:l,border:o}=n,c=i.offset,d=this.isHorizontal(),m=this.ticks.length+(c?1:0),h=jl(i),y=[],g=o.setContext(this.getContext()),j=g.display?g.width:0,v=j/2,x=function(W){return un(r,W,j)};let f,p,N,w,S,C,T,_,F,D,R,U;if(l==="top")f=x(this.bottom),C=this.bottom-h,_=f-v,D=x(t.top)+v,U=t.bottom;else if(l==="bottom")f=x(this.top),D=t.top,U=x(t.bottom)-v,C=f+v,_=this.top+h;else if(l==="left")f=x(this.right),S=this.right-h,T=f-v,F=x(t.left)+v,R=t.right;else if(l==="right")f=x(this.left),F=t.left,R=x(t.right)-v,S=f+v,T=this.left+h;else if(a==="x"){if(l==="center")f=x((t.top+t.bottom)/2+.5);else if(Ae(l)){const W=Object.keys(l)[0],Z=l[W];f=x(this.chart.scales[W].getPixelForValue(Z))}D=t.top,U=t.bottom,C=f+v,_=C+h}else if(a==="y"){if(l==="center")f=x((t.left+t.right)/2);else if(Ae(l)){const W=Object.keys(l)[0],Z=l[W];f=x(this.chart.scales[W].getPixelForValue(Z))}S=f-v,T=S-h,F=t.left,R=t.right}const O=we(n.ticks.maxTicksLimit,m),E=Math.max(1,Math.ceil(m/O));for(p=0;p<m;p+=E){const W=this.getContext(p),Z=i.setContext(W),I=o.setContext(W),$=Z.lineWidth,A=Z.color,G=I.dash||[],z=I.dashOffset,ie=Z.tickWidth,de=Z.tickColor,xe=Z.tickBorderDash||[],he=Z.tickBorderDashOffset;N=HL(this,p,c),N!==void 0&&(w=un(r,N,$),d?S=T=F=R=w:C=_=D=U=w,y.push({tx1:S,ty1:C,tx2:T,ty2:_,x1:F,y1:D,x2:R,y2:U,width:$,color:A,borderDash:G,borderDashOffset:z,tickWidth:ie,tickColor:de,tickBorderDash:xe,tickBorderDashOffset:he}))}return this._ticksLength=m,this._borderValue=f,y}_computeLabelItems(t){const a=this.axis,r=this.options,{position:n,ticks:i}=r,l=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:m}=i,h=jl(r.grid),y=h+u,g=m?-u:y,j=-ka(this.labelRotation),v=[];let x,f,p,N,w,S,C,T,_,F,D,R,U="middle";if(n==="top")S=this.bottom-g,C=this._getXAxisLabelAlignment();else if(n==="bottom")S=this.top+g,C=this._getXAxisLabelAlignment();else if(n==="left"){const E=this._getYAxisLabelAlignment(h);C=E.textAlign,w=E.x}else if(n==="right"){const E=this._getYAxisLabelAlignment(h);C=E.textAlign,w=E.x}else if(a==="x"){if(n==="center")S=(t.top+t.bottom)/2+y;else if(Ae(n)){const E=Object.keys(n)[0],W=n[E];S=this.chart.scales[E].getPixelForValue(W)+y}C=this._getXAxisLabelAlignment()}else if(a==="y"){if(n==="center")w=(t.left+t.right)/2-y;else if(Ae(n)){const E=Object.keys(n)[0],W=n[E];w=this.chart.scales[E].getPixelForValue(W)}C=this._getYAxisLabelAlignment(h).textAlign}a==="y"&&(c==="start"?U="top":c==="end"&&(U="bottom"));const O=this._getLabelSizes();for(x=0,f=o.length;x<f;++x){p=o[x],N=p.label;const E=i.setContext(this.getContext(x));T=this.getPixelForTick(x)+i.labelOffset,_=this._resolveTickFontOptions(x),F=_.lineHeight,D=Qe(N)?N.length:1;const W=D/2,Z=E.color,I=E.textStrokeColor,$=E.textStrokeWidth;let A=C;l?(w=T,C==="inner"&&(x===f-1?A=this.options.reverse?"left":"right":x===0?A=this.options.reverse?"right":"left":A="center"),n==="top"?d==="near"||j!==0?R=-D*F+F/2:d==="center"?R=-O.highest.height/2-W*F+F:R=-O.highest.height+F/2:d==="near"||j!==0?R=F/2:d==="center"?R=O.highest.height/2-W*F:R=O.highest.height-D*F,m&&(R*=-1),j!==0&&!E.showLabelBackdrop&&(w+=F/2*Math.sin(j))):(S=T,R=(1-D)*F/2);let G;if(E.showLabelBackdrop){const z=os(E.backdropPadding),ie=O.heights[x],de=O.widths[x];let xe=R-z.top,he=0-z.left;switch(U){case"middle":xe-=ie/2;break;case"bottom":xe-=ie;break}switch(C){case"center":he-=de/2;break;case"right":he-=de;break;case"inner":x===f-1?he-=de:x>0&&(he-=de/2);break}G={left:he,top:xe,width:de+z.width,height:ie+z.height,color:E.backdropColor}}v.push({label:N,font:_,textOffset:R,options:{rotation:j,color:Z,strokeColor:I,strokeWidth:$,textAlign:A,textBaseline:U,translation:[w,S],backdrop:G}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-ka(this.labelRotation))return t==="top"?"left":"right";let n="center";return a.align==="start"?n="left":a.align==="end"?n="right":a.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:r,mirror:n,padding:i}}=this.options,l=this._getLabelSizes(),o=t+i,c=l.widest.width;let d,u;return a==="left"?n?(u=this.right+i,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u=this.left)):a==="right"?n?(u=this.left+i,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:r,top:n,width:i,height:l}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(r,n,i,l),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const n=this.ticks.findIndex(i=>i.value===t);return n>=0?a.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const a=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,l;const o=(c,d,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(a.display)for(i=0,l=n.length;i<l;++i){const c=n[i];a.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:r,grid:n}}=this,i=r.setContext(this.getContext()),l=r.display?i.width:0;if(!l)return;const o=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,m,h;this.isHorizontal()?(d=un(t,this.left,l)-l/2,u=un(t,this.right,o)+o/2,m=h=c):(m=un(t,this.top,l)-l/2,h=un(t,this.bottom,o)+o/2,d=u=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(d,m),a.lineTo(u,h),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,n=this._computeLabelArea();n&&zm(r,n);const i=this.getLabelItems(t);for(const l of i){const o=l.options,c=l.font,d=l.label,u=l.textOffset;Zn(r,d,0,u,c,o)}n&&Bm(r)}drawTitle(){const{ctx:t,options:{position:a,title:r,reverse:n}}=this;if(!r.display)return;const i=It(r.font),l=os(r.padding),o=r.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||Ae(a)?(c+=l.bottom,Qe(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=l.top;const{titleX:d,titleY:u,maxWidth:m,rotation:h}=GL(this,c,a,o);Zn(t,r.text,0,0,i,{color:r.color,maxWidth:m,rotation:h,textAlign:KL(o,a,n),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,r=we(t.grid&&t.grid.z,-1),n=we(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ai.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let i,l;for(i=0,l=a.length;i<l;++i){const o=a[i];o[r]===this.id&&(!t||o.type===t)&&n.push(o)}return n}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return It(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class $c{constructor(t,a,r){this.type=t,this.scope=a,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let r;JL(a)&&(r=this.register(a));const n=this.items,i=t.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in n||(n[i]=t,XL(t,l,r),this.override&&yt.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const a=this.items,r=t.id,n=this.scope;r in a&&delete a[r],n&&r in yt[n]&&(delete yt[n][r],this.override&&delete Jn[r])}}function XL(s,t,a){const r=Oo(Object.create(null),[a?yt.get(a):{},yt.get(t),s.defaults]);yt.set(t,r),s.defaultRoutes&&QL(t,s.defaultRoutes),s.descriptors&&yt.describe(t,s.descriptors)}function QL(s,t){Object.keys(t).forEach(a=>{const r=a.split("."),n=r.pop(),i=[s].concat(r).join("."),l=t[a].split("."),o=l.pop(),c=l.join(".");yt.route(i,n,c,o)})}function JL(s){return"id"in s&&"defaults"in s}class ZL{constructor(){this.controllers=new $c(Un,"datasets",!0),this.elements=new $c(fa,"elements"),this.plugins=new $c(Object,"plugins"),this.scales=new $c(ai,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,r){[...a].forEach(n=>{const i=r||this._getRegistryForType(n);r||i.isForType(n)||i===this.plugins&&n.id?this._exec(t,i,n):$e(n,l=>{const o=r||this._getRegistryForType(l);this._exec(t,o,l)})})}_exec(t,a,r){const n=rg(t);Ke(r["before"+n],[],r),a[t](r),Ke(r["after"+n],[],r)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const r=this._typedRegistries[a];if(r.isForType(t))return r}return this.plugins}_get(t,a,r){const n=a.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return n}}var wa=new ZL;class e9{constructor(){this._init=[]}notify(t,a,r,n){a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=n?this._descriptors(t).filter(n):this._descriptors(t),l=this._notify(i,t,a,r);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),l}_notify(t,a,r,n){n=n||{};for(const i of t){const l=i.plugin,o=l[r],c=[a,n,i.options];if(Ke(o,c,l)===!1&&n.cancelable)return!1}return!0}invalidate(){Ie(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const r=t&&t.config,n=we(r.options&&r.options.plugins,{}),i=t9(r);return n===!1&&!a?[]:a9(t,i,n,a)}_notifyStateChanges(t){const a=this._oldCache||[],r=this._cache,n=(i,l)=>i.filter(o=>!l.some(c=>o.plugin.id===c.plugin.id));this._notify(n(a,r),t,"stop"),this._notify(n(r,a),t,"start")}}function t9(s){const t={},a=[],r=Object.keys(wa.plugins.items);for(let i=0;i<r.length;i++)a.push(wa.getPlugin(r[i]));const n=s.plugins||[];for(let i=0;i<n.length;i++){const l=n[i];a.indexOf(l)===-1&&(a.push(l),t[l.id]=!0)}return{plugins:a,localIds:t}}function s9(s,t){return!t&&s===!1?null:s===!0?{}:s}function a9(s,{plugins:t,localIds:a},r,n){const i=[],l=s.getContext();for(const o of t){const c=o.id,d=s9(r[c],n);d!==null&&i.push({plugin:o,options:r9(s.config,{plugin:o,local:a[c]},d,l)})}return i}function r9(s,{plugin:t,local:a},r,n){const i=s.pluginScopeKeys(t),l=s.getOptionScopes(r,i);return a&&t.defaults&&l.push(t.defaults),s.createResolver(l,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function c0(s,t){const a=yt.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function n9(s,t){let a=s;return s==="_index_"?a=t:s==="_value_"&&(a=t==="x"?"y":"x"),a}function i9(s,t){return s===t?"_index_":"_value_"}function jb(s){if(s==="x"||s==="y"||s==="r")return s}function l9(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function d0(s,...t){if(jb(s))return s;for(const a of t){const r=a.axis||l9(a.position)||s.length>1&&jb(s[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function Nb(s,t,a){if(a[t+"AxisID"]===s)return{axis:t}}function o9(s,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(r=>r.xAxisID===s||r.yAxisID===s);if(a.length)return Nb(s,"x",a[0])||Nb(s,"y",a[0])}return{}}function c9(s,t){const a=Jn[s.type]||{scales:{}},r=t.scales||{},n=c0(s.type,t),i=Object.create(null);return Object.keys(r).forEach(l=>{const o=r[l];if(!Ae(o))return console.error(`Invalid scale configuration for scale: ${l}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const c=d0(l,o,o9(l,s),yt.scales[o.type]),d=i9(c,n),u=a.scales||{};i[l]=ao(Object.create(null),[{axis:c},o,u[c],u[d]])}),s.data.datasets.forEach(l=>{const o=l.type||s.type,c=l.indexAxis||c0(o,t),u=(Jn[o]||{}).scales||{};Object.keys(u).forEach(m=>{const h=n9(m,c),y=l[h+"AxisID"]||h;i[y]=i[y]||Object.create(null),ao(i[y],[{axis:h},r[y],u[m]])})}),Object.keys(i).forEach(l=>{const o=i[l];ao(o,[yt.scales[o.type],yt.scale])}),i}function Z2(s){const t=s.options||(s.options={});t.plugins=we(t.plugins,{}),t.scales=c9(s,t)}function eS(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function d9(s){return s=s||{},s.data=eS(s.data),Z2(s),s}const wb=new Map,tS=new Set;function zc(s,t){let a=wb.get(s);return a||(a=t(),wb.set(s,a),tS.add(a)),a}const Nl=(s,t,a)=>{const r=Qn(t,a);r!==void 0&&s.add(r)};class u9{constructor(t){this._config=d9(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=eS(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Z2(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return zc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return zc(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return zc(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,r=this.type;return zc(`${r}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const r=this._scopeCache;let n=r.get(t);return(!n||a)&&(n=new Map,r.set(t,n)),n}getOptionScopes(t,a,r){const{options:n,type:i}=this,l=this._cachedScopes(t,r),o=l.get(a);if(o)return o;const c=new Set;a.forEach(u=>{t&&(c.add(t),u.forEach(m=>Nl(c,t,m))),u.forEach(m=>Nl(c,n,m)),u.forEach(m=>Nl(c,Jn[i]||{},m)),u.forEach(m=>Nl(c,yt,m)),u.forEach(m=>Nl(c,l0,m))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),tS.has(a)&&l.set(a,d),d}chartOptionScopes(){const{options:t,type:a}=this;return[t,Jn[a]||{},yt.datasets[a]||{},{type:a},yt,l0]}resolveNamedOptions(t,a,r,n=[""]){const i={$shared:!0},{resolver:l,subPrefixes:o}=Sb(this._resolverCache,t,n);let c=l;if(h9(l,a)){i.$shared=!1,r=en(r)?r():r;const d=this.createResolver(t,r,o);c=qi(l,r,d)}for(const d of a)i[d]=c[d];return i}createResolver(t,a,r=[""],n){const{resolver:i}=Sb(this._resolverCache,t,r);return Ae(a)?qi(i,a,void 0,n):i}}function Sb(s,t,a){let r=s.get(t);r||(r=new Map,s.set(t,r));const n=a.join();let i=r.get(n);return i||(i={resolver:dg(t,a),subPrefixes:a.filter(o=>!o.toLowerCase().includes("hover"))},r.set(n,i)),i}const m9=s=>Ae(s)&&Object.getOwnPropertyNames(s).some(t=>en(s[t]));function h9(s,t){const{isScriptable:a,isIndexable:r}=I2(s);for(const n of t){const i=a(n),l=r(n),o=(l||i)&&s[n];if(i&&(en(o)||m9(o))||l&&Qe(o))return!0}return!1}var x9="4.5.0";const p9=["top","bottom","left","right","chartArea"];function Cb(s,t){return s==="top"||s==="bottom"||p9.indexOf(s)===-1&&t==="x"}function kb(s,t){return function(a,r){return a[s]===r[s]?a[t]-r[t]:a[s]-r[s]}}function _b(s){const t=s.chart,a=t.options.animation;t.notifyPlugins("afterRender"),Ke(a&&a.onComplete,[s],t)}function f9(s){const t=s.chart,a=t.options.animation;Ke(a&&a.onProgress,[s],t)}function sS(s){return hg()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const $d={},Ab=s=>{const t=sS(s);return Object.values($d).filter(a=>a.canvas===t).pop()};function g9(s,t,a){const r=Object.keys(s);for(const n of r){const i=+n;if(i>=t){const l=s[n];delete s[n],(a>0||i>t)&&(s[i+a]=l)}}}function y9(s,t,a,r){return!a||s.type==="mouseout"?null:r?t:s}var mr;let nc=(mr=class{static register(...t){wa.add(...t),Tb()}static unregister(...t){wa.remove(...t),Tb()}constructor(t,a){const r=this.config=new u9(a),n=sS(t),i=Ab(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||LL(n)),this.platform.updateConfig(r);const o=this.platform.acquireContext(n,l.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=yI(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new e9,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=RI(m=>this.update(m),l.resizeDelay||0),this._dataChanges=[],$d[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}za.listen(this,"complete",_b),za.listen(this,"progress",f9),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:r,height:n,_aspectRatio:i}=this;return Ie(t)?a&&i?i:n?r/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return wa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Qv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Kv(this.canvas,this.ctx),this}stop(){return za.stop(this),this}resize(t,a){za.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const r=this.options,n=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(n,t,a,i),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Qv(this,o,!0)&&(this.notifyPlugins("resize",{size:l}),Ke(r.onResize,[this,l],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};$e(a,(r,n)=>{r.id=n})}buildOrUpdateScales(){const t=this.options,a=t.scales,r=this.scales,n=Object.keys(r).reduce((l,o)=>(l[o]=!1,l),{});let i=[];a&&(i=i.concat(Object.keys(a).map(l=>{const o=a[l],c=d0(l,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),$e(i,l=>{const o=l.options,c=o.id,d=d0(c,o),u=we(o.type,l.dtype);(o.position===void 0||Cb(o.position,d)!==Cb(l.dposition))&&(o.position=l.dposition),n[c]=!0;let m=null;if(c in r&&r[c].type===u)m=r[c];else{const h=wa.getScale(u);m=new h({id:c,type:u,ctx:this.ctx,chart:this}),r[m.id]=m}m.init(o,t)}),$e(n,(l,o)=>{l||delete r[o]}),$e(r,l=>{qs.configure(this,l,l.options),qs.addBox(this,l)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,r=t.length;if(t.sort((n,i)=>n.index-i.index),r>a){for(let n=a;n<r;++n)this._destroyDatasetMeta(n);t.splice(a,r-a)}this._sortedMetasets=t.slice(0).sort(kb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((r,n)=>{a.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=a.length;r<n;r++){const i=a[r];let l=this.getDatasetMeta(r);const o=i.type||this.config.type;if(l.type&&l.type!==o&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=o,l.indexAxis=i.indexAxis||c0(o,this.options),l.order=i.order||0,l.index=r,l.label=""+i.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{const c=wa.getController(o),{datasetElementType:d,dataElementType:u}=yt.datasets[o];Object.assign(c,{dataElementType:wa.getElement(u),datasetElementType:d&&wa.getElement(d)}),l.controller=new c(this,r),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){$e(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const r=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:m}=this.getDatasetMeta(d),h=!n&&i.indexOf(m)===-1;m.buildOrUpdateElements(h),l=Math.max(+m.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),n||$e(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(kb("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){$e(this.scales,t=>{qs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!$v(a,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:i}of a){const l=r==="_removeElements"?-i:i;g9(t,n,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,r=i=>new Set(t.filter(l=>l[0]===i).map((l,o)=>o+","+l.splice(1).join(","))),n=r(0);for(let i=1;i<a;i++)if(!$v(n,r(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;qs.update(this,this.width,this.height,t);const a=this.chartArea,r=a.width<=0||a.height<=0;this._layers=[],$e(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,r=this.data.datasets.length;a<r;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,r=this.data.datasets.length;a<r;++a)this._updateDataset(a,en(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const r=this.getDatasetMeta(t),n={meta:r,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(a),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(za.has(this)?this.attached&&!za.running(this)&&za.start(this):(this.draw(),_b({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,r=[];let n,i;for(n=0,i=a.length;n<i;++n){const l=a[n];(!t||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,r={meta:t,index:t.index,cancelable:!0},n=H2(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(n&&zm(a,n),t.controller.draw(),n&&Bm(a),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return Ga(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,r,n){const i=pL.modes[a];return typeof i=="function"?i(this,t,r,n):[]}getDatasetMeta(t){const a=this.data.datasets[t],r=this._metasets;let n=r.filter(i=>i&&i._dataset===a).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=on(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!a.hidden}setDatasetVisibility(t,a){const r=this.getDatasetMeta(t);r.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,r){const n=r?"show":"hide",i=this.getDatasetMeta(t),l=i.controller._resolveAnimations(void 0,n);Fo(a)?(i.data[a].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),l.update(i,{visible:r}),this.update(o=>o.datasetIndex===t?n:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),za.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Kv(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete $d[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,r=(i,l)=>{a.addEventListener(this,i,l),t[i]=l},n=(i,l,o)=>{i.offsetX=l,i.offsetY=o,this._eventHandler(i)};$e(this.options.events,i=>r(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,r=(c,d)=>{a.addEventListener(this,c,d),t[c]=d},n=(c,d)=>{t[c]&&(a.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let l;const o=()=>{n("attach",o),this.attached=!0,this.resize(),r("resize",i),r("detach",l)};l=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),r("attach",o)},a.isAttached(this.canvas)?o():l()}unbindEvents(){$e(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},$e(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,r){const n=r?"set":"remove";let i,l,o,c;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),o=0,c=t.length;o<c;++o){l=t[o];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[n+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],r=t.map(({datasetIndex:i,index:l})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[l],index:l}});!Au(r,a)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,a))}notifyPlugins(t,a,r){return this._plugins.notify(this,t,a,r)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,r){const n=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(m=>u.datasetIndex===m.datasetIndex&&u.index===m.index)),l=i(a,t),o=r?t:i(t,a);l.length&&this.updateHoverStyle(l,n.mode,!1),o.length&&n.mode&&this.updateHoverStyle(o,n.mode,!0)}_eventHandler(t,a){const r={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},n=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;const i=this._handleEvent(t,a,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(i||r.changed)&&this.render(),this}_handleEvent(t,a,r){const{_active:n=[],options:i}=this,l=a,o=this._getActiveElements(t,n,r,l),c=SI(t),d=y9(t,this._lastEvent,r,c);r&&(this._lastEvent=null,Ke(i.onHover,[t,o,this],this),c&&Ke(i.onClick,[t,o,this],this));const u=!Au(o,n);return(u||a)&&(this._active=o,this._updateHoverStyles(o,n,a)),this._lastEvent=d,u}_getActiveElements(t,a,r,n){if(t.type==="mouseout")return[];if(!r)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,n)}},oe(mr,"defaults",yt),oe(mr,"instances",$d),oe(mr,"overrides",Jn),oe(mr,"registry",wa),oe(mr,"version",x9),oe(mr,"getChart",Ab),mr);function Tb(){return $e(nc.instances,s=>s._plugins.invalidate())}function v9(s,t,a){const{startAngle:r,x:n,y:i,outerRadius:l,innerRadius:o,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,m=Math.min(d/l,ss(r-a));if(s.beginPath(),s.arc(n,i,l-d/2,r+m/2,a-m/2),o>0){const h=Math.min(d/o,ss(r-a));s.arc(n,i,o+d/2,a-h/2,r+h/2,!0)}else{const h=Math.min(d/2,l*ss(r-a));if(u==="round")s.arc(n,i,h,a-Oe/2,r+Oe/2,!0);else if(u==="bevel"){const y=2*h*h,g=-y*Math.cos(a+Oe/2)+n,j=-y*Math.sin(a+Oe/2)+i,v=y*Math.cos(r+Oe/2)+n,x=y*Math.sin(r+Oe/2)+i;s.lineTo(g,j),s.lineTo(v,x)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function b9(s,t,a){const{startAngle:r,pixelMargin:n,x:i,y:l,outerRadius:o,innerRadius:c}=t;let d=n/o;s.beginPath(),s.arc(i,l,o,r-d,a+d),c>n?(d=n/c,s.arc(i,l,c,a+d,r-d,!0)):s.arc(i,l,n,a+Nt,r-Nt),s.closePath(),s.clip()}function j9(s){return cg(s,["outerStart","outerEnd","innerStart","innerEnd"])}function N9(s,t,a,r){const n=j9(s.options.borderRadius),i=(a-t)/2,l=Math.min(i,r*t/2),o=c=>{const d=(a-Math.min(i,c))*r/2;return is(c,0,Math.min(i,d))};return{outerStart:o(n.outerStart),outerEnd:o(n.outerEnd),innerStart:is(n.innerStart,0,l),innerEnd:is(n.innerEnd,0,l)}}function ii(s,t,a,r){return{x:a+s*Math.cos(t),y:r+s*Math.sin(t)}}function Iu(s,t,a,r,n,i){const{x:l,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=t,m=Math.max(t.outerRadius+r+a-d,0),h=u>0?u+r+a+d:0;let y=0;const g=n-c;if(r){const E=u>0?u-r:0,W=m>0?m-r:0,Z=(E+W)/2,I=Z!==0?g*Z/(Z+r):g;y=(g-I)/2}const j=Math.max(.001,g*m-a/Oe)/m,v=(g-j)/2,x=c+v+y,f=n-v-y,{outerStart:p,outerEnd:N,innerStart:w,innerEnd:S}=N9(t,h,m,f-x),C=m-p,T=m-N,_=x+p/C,F=f-N/T,D=h+w,R=h+S,U=x+w/D,O=f-S/R;if(s.beginPath(),i){const E=(_+F)/2;if(s.arc(l,o,m,_,E),s.arc(l,o,m,E,F),N>0){const $=ii(T,F,l,o);s.arc($.x,$.y,N,F,f+Nt)}const W=ii(R,f,l,o);if(s.lineTo(W.x,W.y),S>0){const $=ii(R,O,l,o);s.arc($.x,$.y,S,f+Nt,O+Math.PI)}const Z=(f-S/h+(x+w/h))/2;if(s.arc(l,o,h,f-S/h,Z,!0),s.arc(l,o,h,Z,x+w/h,!0),w>0){const $=ii(D,U,l,o);s.arc($.x,$.y,w,U+Math.PI,x-Nt)}const I=ii(C,x,l,o);if(s.lineTo(I.x,I.y),p>0){const $=ii(C,_,l,o);s.arc($.x,$.y,p,x-Nt,_)}}else{s.moveTo(l,o);const E=Math.cos(_)*m+l,W=Math.sin(_)*m+o;s.lineTo(E,W);const Z=Math.cos(F)*m+l,I=Math.sin(F)*m+o;s.lineTo(Z,I)}s.closePath()}function w9(s,t,a,r,n){const{fullCircles:i,startAngle:l,circumference:o}=t;let c=t.endAngle;if(i){Iu(s,t,a,r,c,n);for(let d=0;d<i;++d)s.fill();isNaN(o)||(c=l+(o%et||et))}return Iu(s,t,a,r,c,n),s.fill(),c}function S9(s,t,a,r,n){const{fullCircles:i,startAngle:l,circumference:o,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:m,borderDashOffset:h,borderRadius:y}=c,g=c.borderAlign==="inner";if(!d)return;s.setLineDash(m||[]),s.lineDashOffset=h,g?(s.lineWidth=d*2,s.lineJoin=u||"round"):(s.lineWidth=d,s.lineJoin=u||"bevel");let j=t.endAngle;if(i){Iu(s,t,a,r,j,n);for(let v=0;v<i;++v)s.stroke();isNaN(o)||(j=l+(o%et||et))}g&&b9(s,t,j),c.selfJoin&&j-l>=Oe&&y===0&&u!=="miter"&&v9(s,t,j),i||(Iu(s,t,a,r,j,n),s.stroke())}class vi extends fa{constructor(a){super();oe(this,"circumference");oe(this,"endAngle");oe(this,"fullCircles");oe(this,"innerRadius");oe(this,"outerRadius");oe(this,"pixelMargin");oe(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,a&&Object.assign(this,a)}inRange(a,r,n){const i=this.getProps(["x","y"],n),{angle:l,distance:o}=k2(i,{x:a,y:r}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:m,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),y=(this.options.spacing+this.options.borderWidth)/2,g=we(h,d-c),j=zo(l,c,d)&&c!==d,v=g>=et||j,x=Ka(o,u+y,m+y);return v&&x}getCenterPoint(a){const{x:r,y:n,startAngle:i,endAngle:l,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],a),{offset:d,spacing:u}=this.options,m=(i+l)/2,h=(o+c+u+d)/2;return{x:r+Math.cos(m)*h,y:n+Math.sin(m)*h}}tooltipPosition(a){return this.getCenterPoint(a)}draw(a){const{options:r,circumference:n}=this,i=(r.offset||0)/4,l=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=n>et?Math.floor(n/et):0,n===0||this.innerRadius<0||this.outerRadius<0)return;a.save();const c=(this.startAngle+this.endAngle)/2;a.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(Oe,n||0)),u=i*d;a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,w9(a,this,u,l,o),S9(a,this,u,l,o),a.restore()}}oe(vi,"id","arc"),oe(vi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),oe(vi,"defaultRoutes",{backgroundColor:"backgroundColor"}),oe(vi,"descriptors",{_scriptable:!0,_indexable:a=>a!=="borderDash"});function aS(s,t,a=t){s.lineCap=we(a.borderCapStyle,t.borderCapStyle),s.setLineDash(we(a.borderDash,t.borderDash)),s.lineDashOffset=we(a.borderDashOffset,t.borderDashOffset),s.lineJoin=we(a.borderJoinStyle,t.borderJoinStyle),s.lineWidth=we(a.borderWidth,t.borderWidth),s.strokeStyle=we(a.borderColor,t.borderColor)}function C9(s,t,a){s.lineTo(a.x,a.y)}function k9(s){return s.stepped?GI:s.tension||s.cubicInterpolationMode==="monotone"?XI:C9}function rS(s,t,a={}){const r=s.length,{start:n=0,end:i=r-1}=a,{start:l,end:o}=t,c=Math.max(n,l),d=Math.min(i,o),u=n<l&&i<l||n>o&&i>o;return{count:r,start:c,loop:t.loop,ilen:d<c&&!u?r+d-c:d-c}}function _9(s,t,a,r){const{points:n,options:i}=t,{count:l,start:o,loop:c,ilen:d}=rS(n,a,r),u=k9(i);let{move:m=!0,reverse:h}=r||{},y,g,j;for(y=0;y<=d;++y)g=n[(o+(h?d-y:y))%l],!g.skip&&(m?(s.moveTo(g.x,g.y),m=!1):u(s,j,g,h,i.stepped),j=g);return c&&(g=n[(o+(h?d:0))%l],u(s,j,g,h,i.stepped)),!!c}function A9(s,t,a,r){const n=t.points,{count:i,start:l,ilen:o}=rS(n,a,r),{move:c=!0,reverse:d}=r||{};let u=0,m=0,h,y,g,j,v,x;const f=N=>(l+(d?o-N:N))%i,p=()=>{j!==v&&(s.lineTo(u,v),s.lineTo(u,j),s.lineTo(u,x))};for(c&&(y=n[f(0)],s.moveTo(y.x,y.y)),h=0;h<=o;++h){if(y=n[f(h)],y.skip)continue;const N=y.x,w=y.y,S=N|0;S===g?(w<j?j=w:w>v&&(v=w),u=(m*u+N)/++m):(p(),s.lineTo(N,w),g=S,m=0,j=v=w),x=w}p()}function u0(s){const t=s.options,a=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?A9:_9}function T9(s){return s.stepped?AR:s.tension||s.cubicInterpolationMode==="monotone"?TR:vn}function P9(s,t,a,r){let n=t._path;n||(n=t._path=new Path2D,t.path(n,a,r)&&n.closePath()),aS(s,t.options),s.stroke(n)}function D9(s,t,a,r){const{segments:n,options:i}=t,l=u0(t);for(const o of n)aS(s,i,o.style),s.beginPath(),l(s,t,o,{start:a,end:a+r-1})&&s.closePath(),s.stroke()}const M9=typeof Path2D=="function";function E9(s,t,a,r){M9&&!t.options.segment?P9(s,t,a,r):D9(s,t,a,r)}class Xa extends fa{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;bR(this._points,r,t,n,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=RR(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,r=t.length;return r&&a[t[r-1].end]}interpolate(t,a){const r=this.options,n=t[a],i=this.points,l=V2(this,{property:a,start:n,end:n});if(!l.length)return;const o=[],c=T9(r);let d,u;for(d=0,u=l.length;d<u;++d){const{start:m,end:h}=l[d],y=i[m],g=i[h];if(y===g){o.push(y);continue}const j=Math.abs((n-y[a])/(g[a]-y[a])),v=c(y,g,j,r.stepped);v[a]=t[a],o.push(v)}return o.length===1?o[0]:o}pathSegment(t,a,r){return u0(this)(t,this,a,r)}path(t,a,r){const n=this.segments,i=u0(this);let l=this._loop;a=a||0,r=r||this.points.length-a;for(const o of n)l&=i(t,this,o,{start:a,end:a+r-1});return!!l}draw(t,a,r,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),E9(t,this,r,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}oe(Xa,"id","line"),oe(Xa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),oe(Xa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),oe(Xa,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Pb(s,t,a,r){const n=s.options,{[a]:i}=s.getProps([a],r);return Math.abs(t-i)<n.radius+n.hitRadius}class lo extends fa{constructor(a){super();oe(this,"parsed");oe(this,"skip");oe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,a&&Object.assign(this,a)}inRange(a,r,n){const i=this.options,{x:l,y:o}=this.getProps(["x","y"],n);return Math.pow(a-l,2)+Math.pow(r-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(a,r){return Pb(this,a,"x",r)}inYRange(a,r){return Pb(this,a,"y",r)}getCenterPoint(a){const{x:r,y:n}=this.getProps(["x","y"],a);return{x:r,y:n}}size(a){a=a||this.options||{};let r=a.radius||0;r=Math.max(r,r&&a.hoverRadius||0);const n=r&&a.borderWidth||0;return(r+n)*2}draw(a,r){const n=this.options;this.skip||n.radius<.1||!Ga(this,r,this.size(n)/2)||(a.strokeStyle=n.borderColor,a.lineWidth=n.borderWidth,a.fillStyle=n.backgroundColor,o0(a,n,this.x,this.y))}getRange(){const a=this.options||{};return a.radius+a.hitRadius}}oe(lo,"id","point"),oe(lo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),oe(lo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function nS(s,t){const{x:a,y:r,base:n,width:i,height:l}=s.getProps(["x","y","base","width","height"],t);let o,c,d,u,m;return s.horizontal?(m=l/2,o=Math.min(a,n),c=Math.max(a,n),d=r-m,u=r+m):(m=i/2,o=a-m,c=a+m,d=Math.min(r,n),u=Math.max(r,n)),{left:o,top:d,right:c,bottom:u}}function kr(s,t,a,r){return s?0:is(t,a,r)}function I9(s,t,a){const r=s.options.borderWidth,n=s.borderSkipped,i=E2(r);return{t:kr(n.top,i.top,0,a),r:kr(n.right,i.right,0,t),b:kr(n.bottom,i.bottom,0,a),l:kr(n.left,i.left,0,t)}}function R9(s,t,a){const{enableBorderRadius:r}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,i=zn(n),l=Math.min(t,a),o=s.borderSkipped,c=r||Ae(n);return{topLeft:kr(!c||o.top||o.left,i.topLeft,0,l),topRight:kr(!c||o.top||o.right,i.topRight,0,l),bottomLeft:kr(!c||o.bottom||o.left,i.bottomLeft,0,l),bottomRight:kr(!c||o.bottom||o.right,i.bottomRight,0,l)}}function L9(s){const t=nS(s),a=t.right-t.left,r=t.bottom-t.top,n=I9(s,a/2,r/2),i=R9(s,a/2,r/2);return{outer:{x:t.left,y:t.top,w:a,h:r,radius:i},inner:{x:t.left+n.l,y:t.top+n.t,w:a-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function ox(s,t,a,r){const n=t===null,i=a===null,o=s&&!(n&&i)&&nS(s,r);return o&&(n||Ka(t,o.left,o.right))&&(i||Ka(a,o.top,o.bottom))}function O9(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function F9(s,t){s.rect(t.x,t.y,t.w,t.h)}function cx(s,t,a={}){const r=s.x!==a.x?-t:0,n=s.y!==a.y?-t:0,i=(s.x+s.w!==a.x+a.w?t:0)-r,l=(s.y+s.h!==a.y+a.h?t:0)-n;return{x:s.x+r,y:s.y+n,w:s.w+i,h:s.h+l,radius:s.radius}}class oo extends fa{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:r,backgroundColor:n}}=this,{inner:i,outer:l}=L9(this),o=O9(l.radius)?Bo:F9;t.save(),(l.w!==i.w||l.h!==i.h)&&(t.beginPath(),o(t,cx(l,a,i)),t.clip(),o(t,cx(i,-a,l)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),o(t,cx(i,a)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,a,r){return ox(this,t,a,r)}inXRange(t,a){return ox(this,t,null,a)}inYRange(t,a){return ox(this,null,t,a)}getCenterPoint(t){const{x:a,y:r,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+n)/2:a,y:i?r:(r+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}oe(oo,"id","bar"),oe(oo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),oe(oo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $9(s,t,a){const r=s.segments,n=s.points,i=t.points,l=[];for(const o of r){let{start:c,end:d}=o;d=Vm(c,d,n);const u=m0(a,n[c],n[d],o.loop);if(!t.segments){l.push({source:o,target:u,start:n[c],end:n[d]});continue}const m=V2(t,u);for(const h of m){const y=m0(a,i[h.start],i[h.end],h.loop),g=U2(o,n,y);for(const j of g)l.push({source:j,target:h,start:{[a]:Db(u,y,"start",Math.max)},end:{[a]:Db(u,y,"end",Math.min)}})}}return l}function m0(s,t,a,r){if(r)return;let n=t[s],i=a[s];return s==="angle"&&(n=ss(n),i=ss(i)),{property:s,start:n,end:i}}function z9(s,t){const{x:a=null,y:r=null}=s||{},n=t.points,i=[];return t.segments.forEach(({start:l,end:o})=>{o=Vm(l,o,n);const c=n[l],d=n[o];r!==null?(i.push({x:c.x,y:r}),i.push({x:d.x,y:r})):a!==null&&(i.push({x:a,y:c.y}),i.push({x:a,y:d.y}))}),i}function Vm(s,t,a){for(;t>s;t--){const r=a[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function Db(s,t,a,r){return s&&t?r(s[a],t[a]):s?s[a]:t?t[a]:0}function iS(s,t){let a=[],r=!1;return Qe(s)?(r=!0,a=s):a=z9(s,t),a.length?new Xa({points:a,options:{tension:0},_loop:r,_fullLoop:r}):null}function Mb(s){return s&&s.fill!==!1}function B9(s,t,a){let n=s[t].fill;const i=[t];let l;if(!a)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!gt(n))return n;if(l=s[n],!l)return!1;if(l.visible)return n;i.push(n),n=l.fill}return!1}function U9(s,t,a){const r=q9(s);if(Ae(r))return isNaN(r.value)?!1:r;let n=parseFloat(r);return gt(n)&&Math.floor(n)===n?V9(r[0],t,n,a):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function V9(s,t,a,r){return(s==="-"||s==="+")&&(a=t+a),a===t||a<0||a>=r?!1:a}function H9(s,t){let a=null;return s==="start"?a=t.bottom:s==="end"?a=t.top:Ae(s)?a=t.getPixelForValue(s.value):t.getBasePixel&&(a=t.getBasePixel()),a}function W9(s,t,a){let r;return s==="start"?r=a:s==="end"?r=t.options.reverse?t.min:t.max:Ae(s)?r=s.value:r=t.getBaseValue(),r}function q9(s){const t=s.options,a=t.fill;let r=we(a&&a.target,a);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Y9(s){const{scale:t,index:a,line:r}=s,n=[],i=r.segments,l=r.points,o=K9(t,a);o.push(iS({x:null,y:t.bottom},r));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)G9(n,l[u],o)}return new Xa({points:n,options:{}})}function K9(s,t){const a=[],r=s.getMatchingVisibleMetas("line");for(let n=0;n<r.length;n++){const i=r[n];if(i.index===t)break;i.hidden||a.unshift(i.dataset)}return a}function G9(s,t,a){const r=[];for(let n=0;n<a.length;n++){const i=a[n],{first:l,last:o,point:c}=X9(i,t,"x");if(!(!c||l&&o)){if(l)r.unshift(c);else if(s.push(c),!o)break}}s.push(...r)}function X9(s,t,a){const r=s.interpolate(t,a);if(!r)return{};const n=r[a],i=s.segments,l=s.points;let o=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],m=l[u.start][a],h=l[u.end][a];if(Ka(n,m,h)){o=n===m,c=n===h;break}}return{first:o,last:c,point:r}}class lS{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,a,r){const{x:n,y:i,radius:l}=this;return a=a||{start:0,end:et},t.arc(n,i,l,a.end,a.start,!0),!r.bounds}interpolate(t){const{x:a,y:r,radius:n}=this,i=t.angle;return{x:a+Math.cos(i)*n,y:r+Math.sin(i)*n,angle:i}}}function Q9(s){const{chart:t,fill:a,line:r}=s;if(gt(a))return J9(t,a);if(a==="stack")return Y9(s);if(a==="shape")return!0;const n=Z9(s);return n instanceof lS?n:iS(n,r)}function J9(s,t){const a=s.getDatasetMeta(t);return a&&s.isDatasetVisible(t)?a.dataset:null}function Z9(s){return(s.scale||{}).getPointPositionForValue?tO(s):eO(s)}function eO(s){const{scale:t={},fill:a}=s,r=H9(a,t);if(gt(r)){const n=t.isHorizontal();return{x:n?r:null,y:n?null:r}}return null}function tO(s){const{scale:t,fill:a}=s,r=t.options,n=t.getLabels().length,i=r.reverse?t.max:t.min,l=W9(a,t,i),o=[];if(r.grid.circular){const c=t.getPointPositionForValue(0,i);return new lS({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(l)})}for(let c=0;c<n;++c)o.push(t.getPointPositionForValue(c,l));return o}function dx(s,t,a){const r=Q9(t),{chart:n,index:i,line:l,scale:o,axis:c}=t,d=l.options,u=d.fill,m=d.backgroundColor,{above:h=m,below:y=m}=u||{},g=n.getDatasetMeta(i),j=H2(n,g);r&&l.points.length&&(zm(s,a),sO(s,{line:l,target:r,above:h,below:y,area:a,scale:o,axis:c,clip:j}),Bm(s))}function sO(s,t){const{line:a,target:r,above:n,below:i,area:l,scale:o,clip:c}=t,d=a._loop?"angle":t.axis;s.save();let u=i;i!==n&&(d==="x"?(Eb(s,r,l.top),ux(s,{line:a,target:r,color:n,scale:o,property:d,clip:c}),s.restore(),s.save(),Eb(s,r,l.bottom)):d==="y"&&(Ib(s,r,l.left),ux(s,{line:a,target:r,color:i,scale:o,property:d,clip:c}),s.restore(),s.save(),Ib(s,r,l.right),u=n)),ux(s,{line:a,target:r,color:u,scale:o,property:d,clip:c}),s.restore()}function Eb(s,t,a){const{segments:r,points:n}=t;let i=!0,l=!1;s.beginPath();for(const o of r){const{start:c,end:d}=o,u=n[c],m=n[Vm(c,d,n)];i?(s.moveTo(u.x,u.y),i=!1):(s.lineTo(u.x,a),s.lineTo(u.x,u.y)),l=!!t.pathSegment(s,o,{move:l}),l?s.closePath():s.lineTo(m.x,a)}s.lineTo(t.first().x,a),s.closePath(),s.clip()}function Ib(s,t,a){const{segments:r,points:n}=t;let i=!0,l=!1;s.beginPath();for(const o of r){const{start:c,end:d}=o,u=n[c],m=n[Vm(c,d,n)];i?(s.moveTo(u.x,u.y),i=!1):(s.lineTo(a,u.y),s.lineTo(u.x,u.y)),l=!!t.pathSegment(s,o,{move:l}),l?s.closePath():s.lineTo(a,m.y)}s.lineTo(a,t.first().y),s.closePath(),s.clip()}function ux(s,t){const{line:a,target:r,property:n,color:i,scale:l,clip:o}=t,c=$9(a,r,n);for(const{source:d,target:u,start:m,end:h}of c){const{style:{backgroundColor:y=i}={}}=d,g=r!==!0;s.save(),s.fillStyle=y,aO(s,l,o,g&&m0(n,m,h)),s.beginPath();const j=!!a.pathSegment(s,d);let v;if(g){j?s.closePath():Rb(s,r,h,n);const x=!!r.pathSegment(s,u,{move:j,reverse:!0});v=j&&x,v||Rb(s,r,m,n)}s.closePath(),s.fill(v?"evenodd":"nonzero"),s.restore()}}function aO(s,t,a,r){const n=t.chart.chartArea,{property:i,start:l,end:o}=r||{};if(i==="x"||i==="y"){let c,d,u,m;i==="x"?(c=l,d=n.top,u=o,m=n.bottom):(c=n.left,d=l,u=n.right,m=o),s.beginPath(),a&&(c=Math.max(c,a.left),u=Math.min(u,a.right),d=Math.max(d,a.top),m=Math.min(m,a.bottom)),s.rect(c,d,u-c,m-d),s.clip()}}function Rb(s,t,a,r){const n=t.interpolate(a,r);n&&s.lineTo(n.x,n.y)}var rO={id:"filler",afterDatasetsUpdate(s,t,a){const r=(s.data.datasets||[]).length,n=[];let i,l,o,c;for(l=0;l<r;++l)i=s.getDatasetMeta(l),o=i.dataset,c=null,o&&o.options&&o instanceof Xa&&(c={visible:s.isDatasetVisible(l),index:l,fill:U9(o,l,r),chart:s,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=c,n.push(c);for(l=0;l<r;++l)c=n[l],!(!c||c.fill===!1)&&(c.fill=B9(n,l,a.propagate))},beforeDraw(s,t,a){const r=a.drawTime==="beforeDraw",n=s.getSortedVisibleDatasetMetas(),i=s.chartArea;for(let l=n.length-1;l>=0;--l){const o=n[l].$filler;o&&(o.line.updateControlPoints(i,o.axis),r&&o.fill&&dx(s.ctx,o,i))}},beforeDatasetsDraw(s,t,a){if(a.drawTime!=="beforeDatasetsDraw")return;const r=s.getSortedVisibleDatasetMetas();for(let n=r.length-1;n>=0;--n){const i=r[n].$filler;Mb(i)&&dx(s.ctx,i,s.chartArea)}},beforeDatasetDraw(s,t,a){const r=t.meta.$filler;!Mb(r)||a.drawTime!=="beforeDatasetDraw"||dx(s.ctx,r,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Lb=(s,t)=>{let{boxHeight:a=t,boxWidth:r=t}=s;return s.usePointStyle&&(a=Math.min(a,t),r=s.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:a,itemHeight:Math.max(t,a)}},nO=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class Ob extends fa{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,r){this.maxWidth=t,this.maxHeight=a,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=Ke(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(r=>t.filter(r,this.chart.data))),t.sort&&(a=a.sort((r,n)=>t.sort(r,n,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,n=It(r.font),i=n.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=Lb(r,i);let d,u;a.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(l,i,o,c)+10):(u=this.maxHeight,d=this._fitCols(l,n,o,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,a,r,n){const{ctx:i,maxWidth:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+o;let m=t;i.textAlign="left",i.textBaseline="middle";let h=-1,y=-u;return this.legendItems.forEach((g,j)=>{const v=r+a/2+i.measureText(g.text).width;(j===0||d[d.length-1]+v+2*o>l)&&(m+=u,d[d.length-(j>0?0:1)]=0,y+=u,h++),c[j]={left:0,top:y,row:h,width:v,height:n},d[d.length-1]+=v+o}),m}_fitCols(t,a,r,n){const{ctx:i,maxHeight:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=l-t;let m=o,h=0,y=0,g=0,j=0;return this.legendItems.forEach((v,x)=>{const{itemWidth:f,itemHeight:p}=iO(r,a,i,v,n);x>0&&y+p+2*o>u&&(m+=h+o,d.push({width:h,height:y}),g+=h+o,j++,h=y=0),c[x]={left:g,top:y,col:j,width:f,height:p},h=Math.max(h,f),y+=p+o}),m+=h,d.push({width:h,height:y}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:r,labels:{padding:n},rtl:i}}=this,l=Ri(i,this.left,this.width);if(this.isHorizontal()){let o=0,c=es(r,this.left+n,this.right-this.lineWidths[o]);for(const d of a)o!==d.row&&(o=d.row,c=es(r,this.left+n,this.right-this.lineWidths[o])),d.top+=this.top+t+n,d.left=l.leftForLtr(l.x(c),d.width),c+=d.width+n}else{let o=0,c=es(r,this.top+t+n,this.bottom-this.columnSizes[o].height);for(const d of a)d.col!==o&&(o=d.col,c=es(r,this.top+t+n,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+n,d.left=l.leftForLtr(l.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;zm(t,this),this._draw(),Bm(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:r,ctx:n}=this,{align:i,labels:l}=t,o=yt.color,c=Ri(t.rtl,this.left,this.width),d=It(l.font),{padding:u}=l,m=d.size,h=m/2;let y;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:g,boxHeight:j,itemHeight:v}=Lb(l,m),x=function(S,C,T){if(isNaN(g)||g<=0||isNaN(j)||j<0)return;n.save();const _=we(T.lineWidth,1);if(n.fillStyle=we(T.fillStyle,o),n.lineCap=we(T.lineCap,"butt"),n.lineDashOffset=we(T.lineDashOffset,0),n.lineJoin=we(T.lineJoin,"miter"),n.lineWidth=_,n.strokeStyle=we(T.strokeStyle,o),n.setLineDash(we(T.lineDash,[])),l.usePointStyle){const F={radius:j*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:_},D=c.xPlus(S,g/2),R=C+h;M2(n,F,D,R,l.pointStyleWidth&&g)}else{const F=C+Math.max((m-j)/2,0),D=c.leftForLtr(S,g),R=zn(T.borderRadius);n.beginPath(),Object.values(R).some(U=>U!==0)?Bo(n,{x:D,y:F,w:g,h:j,radius:R}):n.rect(D,F,g,j),n.fill(),_!==0&&n.stroke()}n.restore()},f=function(S,C,T){Zn(n,T.text,S,C+v/2,d,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},p=this.isHorizontal(),N=this._computeTitleHeight();p?y={x:es(i,this.left+u,this.right-r[0]),y:this.top+u+N,line:0}:y={x:this.left+u,y:es(i,this.top+N+u,this.bottom-a[0].height),line:0},$2(this.ctx,t.textDirection);const w=v+u;this.legendItems.forEach((S,C)=>{n.strokeStyle=S.fontColor,n.fillStyle=S.fontColor;const T=n.measureText(S.text).width,_=c.textAlign(S.textAlign||(S.textAlign=l.textAlign)),F=g+h+T;let D=y.x,R=y.y;c.setWidth(this.width),p?C>0&&D+F+u>this.right&&(R=y.y+=w,y.line++,D=y.x=es(i,this.left+u,this.right-r[y.line])):C>0&&R+w>this.bottom&&(D=y.x=D+a[y.line].width+u,y.line++,R=y.y=es(i,this.top+N+u,this.bottom-a[y.line].height));const U=c.x(D);if(x(U,R,S),D=LI(_,D+g+h,p?D+F:this.right,t.rtl),f(c.x(D),R,S),p)y.x+=F+u;else if(typeof S.text!="string"){const O=d.lineHeight;y.y+=oS(S,O)+u}else y.y+=w}),z2(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,r=It(a.font),n=os(a.padding);if(!a.display)return;const i=Ri(t.rtl,this.left,this.width),l=this.ctx,o=a.position,c=r.size/2,d=n.top+c;let u,m=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+d,m=es(t.align,m,this.right-h);else{const g=this.columnSizes.reduce((j,v)=>Math.max(j,v.height),0);u=d+es(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const y=es(o,m,m+h);l.textAlign=i.textAlign(lg(o)),l.textBaseline="middle",l.strokeStyle=a.color,l.fillStyle=a.color,l.font=r.string,Zn(l,a.text,y,u,r)}_computeTitleHeight(){const t=this.options.title,a=It(t.font),r=os(t.padding);return t.display?a.lineHeight+r.height:0}_getLegendItemAt(t,a){let r,n,i;if(Ka(t,this.left,this.right)&&Ka(a,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(n=i[r],Ka(t,n.left,n.left+n.width)&&Ka(a,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(t){const a=this.options;if(!cO(t.type,a))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,i=nO(n,r);n&&!i&&Ke(a.onLeave,[t,n,this],this),this._hoveredItem=r,r&&!i&&Ke(a.onHover,[t,r,this],this)}else r&&Ke(a.onClick,[t,r,this],this)}}function iO(s,t,a,r,n){const i=lO(r,s,t,a),l=oO(n,r,t.lineHeight);return{itemWidth:i,itemHeight:l}}function lO(s,t,a,r){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((i,l)=>i.length>l.length?i:l)),t+a.size/2+r.measureText(n).width}function oO(s,t,a){let r=s;return typeof t.text!="string"&&(r=oS(t,a)),r}function oS(s,t){const a=s.text?s.text.length:0;return t*a}function cO(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var cS={id:"legend",_element:Ob,start(s,t,a){const r=s.legend=new Ob({ctx:s.ctx,options:a,chart:s});qs.configure(s,r,a),qs.addBox(s,r)},stop(s){qs.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,a){const r=s.legend;qs.configure(s,r,a),r.options=a},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,a){const r=t.datasetIndex,n=a.chart;n.isDatasetVisible(r)?(n.hide(r),t.hidden=!0):(n.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:a,pointStyle:r,textAlign:n,color:i,useBorderRadius:l,borderRadius:o}}=s.legend.options;return s._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(a?0:void 0),u=os(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:l&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class dS extends fa{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const n=Qe(r.text)?r.text.length:1;this._padding=os(r.padding);const i=n*It(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:r,bottom:n,right:i,options:l}=this,o=l.align;let c=0,d,u,m;return this.isHorizontal()?(u=es(o,r,i),m=a+t,d=i-r):(l.position==="left"?(u=r+t,m=es(o,n,a),c=Oe*-.5):(u=i-t,m=es(o,a,n),c=Oe*.5),d=n-a),{titleX:u,titleY:m,maxWidth:d,rotation:c}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const r=It(a.font),i=r.lineHeight/2+this._padding.top,{titleX:l,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(i);Zn(t,a.text,0,0,r,{color:a.color,maxWidth:c,rotation:d,textAlign:lg(a.align),textBaseline:"middle",translation:[l,o]})}}function dO(s,t){const a=new dS({ctx:s.ctx,options:t,chart:s});qs.configure(s,a,t),qs.addBox(s,a),s.titleBlock=a}var uO={id:"title",_element:dS,start(s,t,a){dO(s,a)},stop(s){const t=s.titleBlock;qs.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,a){const r=s.titleBlock;qs.configure(s,r,a),r.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Il={average(s){if(!s.length)return!1;let t,a,r=new Set,n=0,i=0;for(t=0,a=s.length;t<a;++t){const o=s[t].element;if(o&&o.hasValue()){const c=o.tooltipPosition();r.add(c.x),n+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((o,c)=>o+c)/r.size,y:n/i}},nearest(s,t){if(!s.length)return!1;let a=t.x,r=t.y,n=Number.POSITIVE_INFINITY,i,l,o;for(i=0,l=s.length;i<l;++i){const c=s[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=i0(t,d);u<n&&(n=u,o=c)}}if(o){const c=o.tooltipPosition();a=c.x,r=c.y}return{x:a,y:r}}};function ja(s,t){return t&&(Qe(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function Ba(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function mO(s,t){const{element:a,datasetIndex:r,index:n}=t,i=s.getDatasetMeta(r).controller,{label:l,value:o}=i.getLabelAndValue(n);return{chart:s,label:l,parsed:i.getParsed(n),raw:s.data.datasets[r].data[n],formattedValue:o,dataset:i.getDataset(),dataIndex:n,datasetIndex:r,element:a}}function Fb(s,t){const a=s.chart.ctx,{body:r,footer:n,title:i}=s,{boxWidth:l,boxHeight:o}=t,c=It(t.bodyFont),d=It(t.titleFont),u=It(t.footerFont),m=i.length,h=n.length,y=r.length,g=os(t.padding);let j=g.height,v=0,x=r.reduce((N,w)=>N+w.before.length+w.lines.length+w.after.length,0);if(x+=s.beforeBody.length+s.afterBody.length,m&&(j+=m*d.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),x){const N=t.displayColors?Math.max(o,c.lineHeight):c.lineHeight;j+=y*N+(x-y)*c.lineHeight+(x-1)*t.bodySpacing}h&&(j+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let f=0;const p=function(N){v=Math.max(v,a.measureText(N).width+f)};return a.save(),a.font=d.string,$e(s.title,p),a.font=c.string,$e(s.beforeBody.concat(s.afterBody),p),f=t.displayColors?l+2+t.boxPadding:0,$e(r,N=>{$e(N.before,p),$e(N.lines,p),$e(N.after,p)}),f=0,a.font=u.string,$e(s.footer,p),a.restore(),v+=g.width,{width:v,height:j}}function hO(s,t){const{y:a,height:r}=t;return a<r/2?"top":a>s.height-r/2?"bottom":"center"}function xO(s,t,a,r){const{x:n,width:i}=r,l=a.caretSize+a.caretPadding;if(s==="left"&&n+i+l>t.width||s==="right"&&n-i-l<0)return!0}function pO(s,t,a,r){const{x:n,width:i}=a,{width:l,chartArea:{left:o,right:c}}=s;let d="center";return r==="center"?d=n<=(o+c)/2?"left":"right":n<=i/2?d="left":n>=l-i/2&&(d="right"),xO(d,s,t,a)&&(d="center"),d}function $b(s,t,a){const r=a.yAlign||t.yAlign||hO(s,a);return{xAlign:a.xAlign||t.xAlign||pO(s,t,a,r),yAlign:r}}function fO(s,t){let{x:a,width:r}=s;return t==="right"?a-=r:t==="center"&&(a-=r/2),a}function gO(s,t,a){let{y:r,height:n}=s;return t==="top"?r+=a:t==="bottom"?r-=n+a:r-=n/2,r}function zb(s,t,a,r){const{caretSize:n,caretPadding:i,cornerRadius:l}=s,{xAlign:o,yAlign:c}=a,d=n+i,{topLeft:u,topRight:m,bottomLeft:h,bottomRight:y}=zn(l);let g=fO(t,o);const j=gO(t,c,d);return c==="center"?o==="left"?g+=d:o==="right"&&(g-=d):o==="left"?g-=Math.max(u,h)+n:o==="right"&&(g+=Math.max(m,y)+n),{x:is(g,0,r.width-t.width),y:is(j,0,r.height-t.height)}}function Bc(s,t,a){const r=os(a.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-r.right:s.x+r.left}function Bb(s){return ja([],Ba(s))}function yO(s,t,a){return on(s,{tooltip:t,tooltipItems:a,type:"tooltip"})}function Ub(s,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?s.override(a):s}const uS={beforeTitle:$a,title(s){if(s.length>0){const t=s[0],a=t.chart.data.labels,r=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return a[t.dataIndex]}return""},afterTitle:$a,beforeBody:$a,beforeLabel:$a,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const a=s.formattedValue;return Ie(a)||(t+=a),t},labelColor(s){const a=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const a=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:$a,afterBody:$a,beforeFooter:$a,footer:$a,afterFooter:$a};function ys(s,t,a,r){const n=s[t].call(a,r);return typeof n>"u"?uS[t].call(a,r):n}class h0 extends fa{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&a.options.animation&&r.animations,i=new W2(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=yO(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:r}=a,n=ys(r,"beforeTitle",this,t),i=ys(r,"title",this,t),l=ys(r,"afterTitle",this,t);let o=[];return o=ja(o,Ba(n)),o=ja(o,Ba(i)),o=ja(o,Ba(l)),o}getBeforeBody(t,a){return Bb(ys(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:r}=a,n=[];return $e(t,i=>{const l={before:[],lines:[],after:[]},o=Ub(r,i);ja(l.before,Ba(ys(o,"beforeLabel",this,i))),ja(l.lines,ys(o,"label",this,i)),ja(l.after,Ba(ys(o,"afterLabel",this,i))),n.push(l)}),n}getAfterBody(t,a){return Bb(ys(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:r}=a,n=ys(r,"beforeFooter",this,t),i=ys(r,"footer",this,t),l=ys(r,"afterFooter",this,t);let o=[];return o=ja(o,Ba(n)),o=ja(o,Ba(i)),o=ja(o,Ba(l)),o}_createItems(t){const a=this._active,r=this.chart.data,n=[],i=[],l=[];let o=[],c,d;for(c=0,d=a.length;c<d;++c)o.push(mO(this.chart,a[c]));return t.filter&&(o=o.filter((u,m,h)=>t.filter(u,m,h,r))),t.itemSort&&(o=o.sort((u,m)=>t.itemSort(u,m,r))),$e(o,u=>{const m=Ub(t.callbacks,u);n.push(ys(m,"labelColor",this,u)),i.push(ys(m,"labelPointStyle",this,u)),l.push(ys(m,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=o,o}update(t,a){const r=this.options.setContext(this.getContext()),n=this._active;let i,l=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const o=Il[r.position].call(this,n,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const c=this._size=Fb(this,r),d=Object.assign({},o,c),u=$b(this.chart,r,d),m=zb(r,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,r,n){const i=this.getCaretPosition(t,r,n);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,r){const{xAlign:n,yAlign:i}=this,{caretSize:l,cornerRadius:o}=r,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:m}=zn(o),{x:h,y}=t,{width:g,height:j}=a;let v,x,f,p,N,w;return i==="center"?(N=y+j/2,n==="left"?(v=h,x=v-l,p=N+l,w=N-l):(v=h+g,x=v+l,p=N-l,w=N+l),f=v):(n==="left"?x=h+Math.max(c,u)+l:n==="right"?x=h+g-Math.max(d,m)-l:x=this.caretX,i==="top"?(p=y,N=p-l,v=x-l,f=x+l):(p=y+j,N=p+l,v=x+l,f=x-l),w=p),{x1:v,x2:x,x3:f,y1:p,y2:N,y3:w}}drawTitle(t,a,r){const n=this.title,i=n.length;let l,o,c;if(i){const d=Ri(r.rtl,this.x,this.width);for(t.x=Bc(this,r.titleAlign,r),a.textAlign=d.textAlign(r.titleAlign),a.textBaseline="middle",l=It(r.titleFont),o=r.titleSpacing,a.fillStyle=r.titleColor,a.font=l.string,c=0;c<i;++c)a.fillText(n[c],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+o,c+1===i&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,a,r,n,i){const l=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=i,u=It(i.bodyFont),m=Bc(this,"left",i),h=n.x(m),y=c<u.lineHeight?(u.lineHeight-c)/2:0,g=a.y+y;if(i.usePointStyle){const j={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},v=n.leftForLtr(h,d)+d/2,x=g+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,o0(t,j,v,x),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,o0(t,j,v,x)}else{t.lineWidth=Ae(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const j=n.leftForLtr(h,d),v=n.leftForLtr(n.xPlus(h,1),d-2),x=zn(l.borderRadius);Object.values(x).some(f=>f!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Bo(t,{x:j,y:g,w:d,h:c,radius:x}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),Bo(t,{x:v,y:g+1,w:d-2,h:c-2,radius:x}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(j,g,d,c),t.strokeRect(j,g,d,c),t.fillStyle=l.backgroundColor,t.fillRect(v,g+1,d-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,a,r){const{body:n}=this,{bodySpacing:i,bodyAlign:l,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=r,m=It(r.bodyFont);let h=m.lineHeight,y=0;const g=Ri(r.rtl,this.x,this.width),j=function(T){a.fillText(T,g.x(t.x+y),t.y+h/2),t.y+=h+i},v=g.textAlign(l);let x,f,p,N,w,S,C;for(a.textAlign=l,a.textBaseline="middle",a.font=m.string,t.x=Bc(this,v,r),a.fillStyle=r.bodyColor,$e(this.beforeBody,j),y=o&&v!=="right"?l==="center"?d/2+u:d+2+u:0,N=0,S=n.length;N<S;++N){for(x=n[N],f=this.labelTextColors[N],a.fillStyle=f,$e(x.before,j),p=x.lines,o&&p.length&&(this._drawColorBox(a,t,N,g,r),h=Math.max(m.lineHeight,c)),w=0,C=p.length;w<C;++w)j(p[w]),h=m.lineHeight;$e(x.after,j)}y=0,h=m.lineHeight,$e(this.afterBody,j),t.y-=i}drawFooter(t,a,r){const n=this.footer,i=n.length;let l,o;if(i){const c=Ri(r.rtl,this.x,this.width);for(t.x=Bc(this,r.footerAlign,r),t.y+=r.footerMarginTop,a.textAlign=c.textAlign(r.footerAlign),a.textBaseline="middle",l=It(r.footerFont),a.fillStyle=r.footerColor,a.font=l.string,o=0;o<i;++o)a.fillText(n[o],c.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+r.footerSpacing}}drawBackground(t,a,r,n){const{xAlign:i,yAlign:l}=this,{x:o,y:c}=t,{width:d,height:u}=r,{topLeft:m,topRight:h,bottomLeft:y,bottomRight:g}=zn(n.cornerRadius);a.fillStyle=n.backgroundColor,a.strokeStyle=n.borderColor,a.lineWidth=n.borderWidth,a.beginPath(),a.moveTo(o+m,c),l==="top"&&this.drawCaret(t,a,r,n),a.lineTo(o+d-h,c),a.quadraticCurveTo(o+d,c,o+d,c+h),l==="center"&&i==="right"&&this.drawCaret(t,a,r,n),a.lineTo(o+d,c+u-g),a.quadraticCurveTo(o+d,c+u,o+d-g,c+u),l==="bottom"&&this.drawCaret(t,a,r,n),a.lineTo(o+y,c+u),a.quadraticCurveTo(o,c+u,o,c+u-y),l==="center"&&i==="left"&&this.drawCaret(t,a,r,n),a.lineTo(o,c+m),a.quadraticCurveTo(o,c,o+m,c),a.closePath(),a.fill(),n.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,r=this.$animations,n=r&&r.x,i=r&&r.y;if(n||i){const l=Il[t.position].call(this,this._active,this._eventPosition);if(!l)return;const o=this._size=Fb(this,t),c=Object.assign({},l,this._size),d=$b(a,t,c),u=zb(t,c,d,a);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(a);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=os(a.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(i,t,n,a),$2(t,a.textDirection),i.y+=l.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),z2(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const r=this._active,n=t.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),i=!Au(r,n),l=this._positionChanged(n,a);(i||l)&&(this._active=n,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,r=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],l=this._getActiveElements(t,i,a,r),o=this._positionChanged(l,t),c=a||!Au(l,i)||o;return c&&(this._active=l,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),c}_getActiveElements(t,a,r,n){const i=this.options;if(t.type==="mouseout")return[];if(!n)return a.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,i.mode,i,r);return i.reverse&&l.reverse(),l}_positionChanged(t,a){const{caretX:r,caretY:n,options:i}=this,l=Il[i.position].call(this,t,a);return l!==!1&&(r!==l.x||n!==l.y)}}oe(h0,"positioners",Il);var mS={id:"tooltip",_element:h0,positioners:Il,afterInit(s,t,a){a&&(s.tooltip=new h0({chart:s,options:a}))},beforeUpdate(s,t,a){s.tooltip&&s.tooltip.initialize(a)},reset(s,t,a){s.tooltip&&s.tooltip.initialize(a)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",a)}},afterEvent(s,t){if(s.tooltip){const a=t.replay;s.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:uS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const vO=(s,t,a,r)=>(typeof t=="string"?(a=s.push(t)-1,r.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function bO(s,t,a,r){const n=s.indexOf(t);if(n===-1)return vO(s,t,a,r);const i=s.lastIndexOf(t);return n!==i?a:n}const jO=(s,t)=>s===null?null:is(Math.round(s),0,t);function Vb(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class Ru extends ai{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const r=this.getLabels();for(const{index:n,label:i}of a)r[n]===i&&r.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(Ie(t))return null;const r=this.getLabels();return a=isFinite(a)&&r[a]===t?a:bO(r,t,we(a,t),this._addedLabels),jO(a,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),a||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const t=this.min,a=this.max,r=this.options.offset,n=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let l=t;l<=a;l++)n.push({value:l});return n}getLabelForValue(t){return Vb.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}oe(Ru,"id","category"),oe(Ru,"defaults",{ticks:{callback:Vb}});function NO(s,t){const a=[],{bounds:n,step:i,min:l,max:o,precision:c,count:d,maxTicks:u,maxDigits:m,includeBounds:h}=s,y=i||1,g=u-1,{min:j,max:v}=t,x=!Ie(l),f=!Ie(o),p=!Ie(d),N=(v-j)/(m+1);let w=Bv((v-j)/g/y)*y,S,C,T,_;if(w<1e-14&&!x&&!f)return[{value:j},{value:v}];_=Math.ceil(v/w)-Math.floor(j/w),_>g&&(w=Bv(_*w/g/y)*y),Ie(c)||(S=Math.pow(10,c),w=Math.ceil(w*S)/S),n==="ticks"?(C=Math.floor(j/w)*w,T=Math.ceil(v/w)*w):(C=j,T=v),x&&f&&i&&TI((o-l)/i,w/1e3)?(_=Math.round(Math.min((o-l)/w,u)),w=(o-l)/_,C=l,T=o):p?(C=x?l:C,T=f?o:T,_=d-1,w=(T-C)/_):(_=(T-C)/w,ro(_,Math.round(_),w/1e3)?_=Math.round(_):_=Math.ceil(_));const F=Math.max(Uv(w),Uv(C));S=Math.pow(10,Ie(c)?F:c),C=Math.round(C*S)/S,T=Math.round(T*S)/S;let D=0;for(x&&(h&&C!==l?(a.push({value:l}),C<l&&D++,ro(Math.round((C+D*w)*S)/S,l,Hb(l,N,s))&&D++):C<l&&D++);D<_;++D){const R=Math.round((C+D*w)*S)/S;if(f&&R>o)break;a.push({value:R})}return f&&h&&T!==o?a.length&&ro(a[a.length-1].value,o,Hb(o,N,s))?a[a.length-1].value=o:a.push({value:o}):(!f||T===o)&&a.push({value:T}),a}function Hb(s,t,{horizontal:a,minRotation:r}){const n=ka(r),i=(a?Math.sin(n):Math.cos(n))||.001,l=.75*t*(""+s).length;return Math.min(t/i,l)}class Lu extends ai{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return Ie(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this;const l=c=>n=a?n:c,o=c=>i=r?i:c;if(t){const c=Ma(n),d=Ma(i);c<0&&d<0?o(0):c>0&&d>0&&l(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);o(i+c),t||l(n-c)}this.min=n,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:r}=t,n;return r?(n=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),a=a||11),a&&(n=Math.min(a,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,l=NO(n,i);return t.bounds==="ticks"&&C2(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let a=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const n=(r-a)/Math.max(t.length-1,1)/2;a-=n,r+=n}this._startValue=a,this._endValue=r,this._valueRange=r-a}getLabelForValue(t){return Fm(t,this.chart.options.locale,this.options.ticks.format)}}class Ou extends Lu{determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=gt(t)?t:0,this.max=gt(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,r=ka(this.options.ticks.minRotation),n=(t?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}oe(Ou,"id","linear"),oe(Ou,"defaults",{ticks:{callback:$m.formatters.numeric}});const Vo=s=>Math.floor(Cr(s)),hn=(s,t)=>Math.pow(10,Vo(s)+t);function Wb(s){return s/Math.pow(10,Vo(s))===1}function qb(s,t,a){const r=Math.pow(10,a),n=Math.floor(s/r);return Math.ceil(t/r)-n}function wO(s,t){const a=t-s;let r=Vo(a);for(;qb(s,t,r)>10;)r++;for(;qb(s,t,r)<10;)r--;return Math.min(r,Vo(s))}function SO(s,{min:t,max:a}){t=Ps(s.min,t);const r=[],n=Vo(t);let i=wO(t,a),l=i<0?Math.pow(10,Math.abs(i)):1;const o=Math.pow(10,i),c=n>i?Math.pow(10,n):0,d=Math.round((t-c)*l)/l,u=Math.floor((t-c)/o/10)*o*10;let m=Math.floor((d-u)/Math.pow(10,i)),h=Ps(s.min,Math.round((c+u+m*Math.pow(10,i))*l)/l);for(;h<a;)r.push({value:h,major:Wb(h),significand:m}),m>=10?m=m<15?15:20:m++,m>=20&&(i++,m=2,l=i>=0?1:l),h=Math.round((c+u+m*Math.pow(10,i))*l)/l;const y=Ps(s.max,h);return r.push({value:y,major:Wb(y),significand:m}),r}class Yb extends ai{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,a){const r=Lu.prototype.parse.apply(this,[t,a]);if(r===0){this._zero=!0;return}return gt(r)&&r>0?r:null}determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=gt(t)?Math.max(0,t):null,this.max=gt(a)?Math.max(0,a):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!gt(this._userMin)&&(this.min=t===hn(this.min,0)?hn(this.min,-1):hn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let r=this.min,n=this.max;const i=o=>r=t?r:o,l=o=>n=a?n:o;r===n&&(r<=0?(i(1),l(10)):(i(hn(r,-1)),l(hn(n,1)))),r<=0&&i(hn(n,-1)),n<=0&&l(hn(r,1)),this.min=r,this.max=n}buildTicks(){const t=this.options,a={min:this._userMin,max:this._userMax},r=SO(a,this);return t.bounds==="ticks"&&C2(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(t){return t===void 0?"0":Fm(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Cr(t),this._valueRange=Cr(this.max)-Cr(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Cr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const a=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+a*this._valueRange)}}oe(Yb,"id","logarithmic"),oe(Yb,"defaults",{ticks:{callback:$m.formatters.logarithmic,major:{enabled:!0}}});function x0(s){const t=s.ticks;if(t.display&&s.display){const a=os(t.backdropPadding);return we(t.font&&t.font.size,yt.font.size)+a.height}return 0}function CO(s,t,a){return a=Qe(a)?a:[a],{w:KI(s,t.string,a),h:a.length*t.lineHeight}}function Kb(s,t,a,r,n){return s===r||s===n?{start:t-a/2,end:t+a/2}:s<r||s>n?{start:t-a,end:t}:{start:t,end:t+a}}function kO(s){const t={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},a=Object.assign({},t),r=[],n=[],i=s._pointLabels.length,l=s.options.pointLabels,o=l.centerPointLabels?Oe/i:0;for(let c=0;c<i;c++){const d=l.setContext(s.getPointLabelContext(c));n[c]=d.padding;const u=s.getPointPosition(c,s.drawingArea+n[c],o),m=It(d.font),h=CO(s.ctx,m,s._pointLabels[c]);r[c]=h;const y=ss(s.getIndexAngle(c)+o),g=Math.round(ng(y)),j=Kb(g,u.x,h.w,0,180),v=Kb(g,u.y,h.h,90,270);_O(a,t,y,j,v)}s.setCenterPoint(t.l-a.l,a.r-t.r,t.t-a.t,a.b-t.b),s._pointLabelItems=PO(s,r,n)}function _O(s,t,a,r,n){const i=Math.abs(Math.sin(a)),l=Math.abs(Math.cos(a));let o=0,c=0;r.start<t.l?(o=(t.l-r.start)/i,s.l=Math.min(s.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/i,s.r=Math.max(s.r,t.r+o)),n.start<t.t?(c=(t.t-n.start)/l,s.t=Math.min(s.t,t.t-c)):n.end>t.b&&(c=(n.end-t.b)/l,s.b=Math.max(s.b,t.b+c))}function AO(s,t,a){const r=s.drawingArea,{extra:n,additionalAngle:i,padding:l,size:o}=a,c=s.getPointPosition(t,r+n+l,i),d=Math.round(ng(ss(c.angle+Nt))),u=EO(c.y,o.h,d),m=DO(d),h=MO(c.x,o.w,m);return{visible:!0,x:c.x,y:u,textAlign:m,left:h,top:u,right:h+o.w,bottom:u+o.h}}function TO(s,t){if(!t)return!0;const{left:a,top:r,right:n,bottom:i}=s;return!(Ga({x:a,y:r},t)||Ga({x:a,y:i},t)||Ga({x:n,y:r},t)||Ga({x:n,y:i},t))}function PO(s,t,a){const r=[],n=s._pointLabels.length,i=s.options,{centerPointLabels:l,display:o}=i.pointLabels,c={extra:x0(i)/2,additionalAngle:l?Oe/n:0};let d;for(let u=0;u<n;u++){c.padding=a[u],c.size=t[u];const m=AO(s,u,c);r.push(m),o==="auto"&&(m.visible=TO(m,d),m.visible&&(d=m))}return r}function DO(s){return s===0||s===180?"center":s<180?"left":"right"}function MO(s,t,a){return a==="right"?s-=t:a==="center"&&(s-=t/2),s}function EO(s,t,a){return a===90||a===270?s-=t/2:(a>270||a<90)&&(s-=t),s}function IO(s,t,a){const{left:r,top:n,right:i,bottom:l}=a,{backdropColor:o}=t;if(!Ie(o)){const c=zn(t.borderRadius),d=os(t.backdropPadding);s.fillStyle=o;const u=r-d.left,m=n-d.top,h=i-r+d.width,y=l-n+d.height;Object.values(c).some(g=>g!==0)?(s.beginPath(),Bo(s,{x:u,y:m,w:h,h:y,radius:c}),s.fill()):s.fillRect(u,m,h,y)}}function RO(s,t){const{ctx:a,options:{pointLabels:r}}=s;for(let n=t-1;n>=0;n--){const i=s._pointLabelItems[n];if(!i.visible)continue;const l=r.setContext(s.getPointLabelContext(n));IO(a,l,i);const o=It(l.font),{x:c,y:d,textAlign:u}=i;Zn(a,s._pointLabels[n],c,d+o.lineHeight/2,o,{color:l.color,textAlign:u,textBaseline:"middle"})}}function hS(s,t,a,r){const{ctx:n}=s;if(a)n.arc(s.xCenter,s.yCenter,t,0,et);else{let i=s.getPointPosition(0,t);n.moveTo(i.x,i.y);for(let l=1;l<r;l++)i=s.getPointPosition(l,t),n.lineTo(i.x,i.y)}}function LO(s,t,a,r,n){const i=s.ctx,l=t.circular,{color:o,lineWidth:c}=t;!l&&!r||!o||!c||a<0||(i.save(),i.strokeStyle=o,i.lineWidth=c,i.setLineDash(n.dash||[]),i.lineDashOffset=n.dashOffset,i.beginPath(),hS(s,a,l,r),i.closePath(),i.stroke(),i.restore())}function OO(s,t,a){return on(s,{label:a,index:t,type:"pointLabel"})}class Uc extends Lu{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=os(x0(this.options)/2),a=this.width=this.maxWidth-t.width,r=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+a/2+t.left),this.yCenter=Math.floor(this.top+r/2+t.top),this.drawingArea=Math.floor(Math.min(a,r)/2)}determineDataLimits(){const{min:t,max:a}=this.getMinMax(!1);this.min=gt(t)&&!isNaN(t)?t:0,this.max=gt(a)&&!isNaN(a)?a:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/x0(this.options))}generateTickLabels(t){Lu.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((a,r)=>{const n=Ke(this.options.pointLabels.callback,[a,r],this);return n||n===0?n:""}).filter((a,r)=>this.chart.getDataVisibility(r))}fit(){const t=this.options;t.display&&t.pointLabels.display?kO(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,a,r,n){this.xCenter+=Math.floor((t-a)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,a,r,n))}getIndexAngle(t){const a=et/(this._pointLabels.length||1),r=this.options.startAngle||0;return ss(t*a+ka(r))}getDistanceFromCenterForValue(t){if(Ie(t))return NaN;const a=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*a:(t-this.min)*a}getValueForDistanceFromCenter(t){if(Ie(t))return NaN;const a=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-a:this.min+a}getPointLabelContext(t){const a=this._pointLabels||[];if(t>=0&&t<a.length){const r=a[t];return OO(this.getContext(),t,r)}}getPointPosition(t,a,r=0){const n=this.getIndexAngle(t)-Nt+r;return{x:Math.cos(n)*a+this.xCenter,y:Math.sin(n)*a+this.yCenter,angle:n}}getPointPositionForValue(t,a){return this.getPointPosition(t,this.getDistanceFromCenterForValue(a))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:a,top:r,right:n,bottom:i}=this._pointLabelItems[t];return{left:a,top:r,right:n,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:a}}=this.options;if(t){const r=this.ctx;r.save(),r.beginPath(),hS(this,this.getDistanceFromCenterForValue(this._endValue),a,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}drawGrid(){const t=this.ctx,a=this.options,{angleLines:r,grid:n,border:i}=a,l=this._pointLabels.length;let o,c,d;if(a.pointLabels.display&&RO(this,l),n.display&&this.ticks.forEach((u,m)=>{if(m!==0||m===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(m),y=n.setContext(h),g=i.setContext(h);LO(this,y,c,l,g)}}),r.display){for(t.save(),o=l-1;o>=0;o--){const u=r.setContext(this.getPointLabelContext(o)),{color:m,lineWidth:h}=u;!h||!m||(t.lineWidth=h,t.strokeStyle=m,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(a.reverse?this.min:this.max),d=this.getPointPosition(o,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,a=this.options,r=a.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let i,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((o,c)=>{if(c===0&&this.min>=0&&!a.reverse)return;const d=r.setContext(this.getContext(c)),u=It(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){t.font=u.string,l=t.measureText(o.label).width,t.fillStyle=d.backdropColor;const m=os(d.backdropPadding);t.fillRect(-l/2-m.left,-i-u.size/2-m.top,l+m.width,u.size+m.height)}Zn(t,o.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}}oe(Uc,"id","radialLinear"),oe(Uc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$m.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),oe(Uc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),oe(Uc,"descriptors",{angleLines:{_fallback:"grid"}});const Hm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},js=Object.keys(Hm);function Gb(s,t){return s-t}function Xb(s,t){if(Ie(t))return null;const a=s._adapter,{parser:r,round:n,isoWeekday:i}=s._parseOpts;let l=t;return typeof r=="function"&&(l=r(l)),gt(l)||(l=typeof r=="string"?a.parse(l,r):a.parse(l)),l===null?null:(n&&(l=n==="week"&&($o(i)||i===!0)?a.startOf(l,"isoWeek",i):a.startOf(l,n)),+l)}function Qb(s,t,a,r){const n=js.length;for(let i=js.indexOf(s);i<n-1;++i){const l=Hm[js[i]],o=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((a-t)/(o*l.size))<=r)return js[i]}return js[n-1]}function FO(s,t,a,r,n){for(let i=js.length-1;i>=js.indexOf(a);i--){const l=js[i];if(Hm[l].common&&s._adapter.diff(n,r,l)>=t-1)return l}return js[a?js.indexOf(a):0]}function $O(s){for(let t=js.indexOf(s)+1,a=js.length;t<a;++t)if(Hm[js[t]].common)return js[t]}function Jb(s,t,a){if(!a)s[t]=!0;else if(a.length){const{lo:r,hi:n}=ig(a,t),i=a[r]>=t?a[r]:a[n];s[i]=!0}}function zO(s,t,a,r){const n=s._adapter,i=+n.startOf(t[0].value,r),l=t[t.length-1].value;let o,c;for(o=i;o<=l;o=+n.add(o,1,r))c=a[o],c>=0&&(t[c].major=!0);return t}function Zb(s,t,a){const r=[],n={},i=t.length;let l,o;for(l=0;l<i;++l)o=t[l],n[o]=l,r.push({value:o,major:!1});return i===0||!a?r:zO(s,r,n,a)}class Ho extends ai{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const r=t.time||(t.time={}),n=this._adapter=new dL._date(t.adapters.date);n.init(a),ao(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:Xb(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,r=t.time.unit||"day";let{min:n,max:i,minDefined:l,maxDefined:o}=this.getUserBounds();function c(d){!l&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!o&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!l||!o)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=gt(n)&&!isNaN(n)?n:+a.startOf(Date.now(),r),i=gt(i)&&!isNaN(i)?i:+a.endOf(Date.now(),r)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],r=t[t.length-1]),{min:a,max:r}}buildTicks(){const t=this.options,a=t.time,r=t.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,l=this.max,o=EI(n,i,l);return this._unit=a.unit||(r.autoSkip?Qb(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):FO(this,o.length,a.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:$O(this._unit),this.initOffsets(n),t.reverse&&o.reverse(),Zb(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,r=0,n,i;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?a=1-n:a=(this.getDecimalForValue(t[1])-n)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?r=i:r=(i-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;a=is(a,0,l),r=is(r,0,l),this._offsets={start:a,end:r,factor:1/(a+1+r)}}_generate(){const t=this._adapter,a=this.min,r=this.max,n=this.options,i=n.time,l=i.unit||Qb(i.minUnit,a,r,this._getLabelCapacity(a)),o=we(n.ticks.stepSize,1),c=l==="week"?i.isoWeekday:!1,d=$o(c)||c===!0,u={};let m=a,h,y;if(d&&(m=+t.startOf(m,"isoWeek",c)),m=+t.startOf(m,d?"day":l),t.diff(r,a,l)>1e5*o)throw new Error(a+" and "+r+" are too far apart with stepSize of "+o+" "+l);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(h=m,y=0;h<r;h=+t.add(h,o,l),y++)Jb(u,h,g);return(h===r||n.bounds==="ticks"||y===1)&&Jb(u,h,g),Object.keys(u).sort(Gb).map(j=>+j)}getLabelForValue(t){const a=this._adapter,r=this.options.time;return r.tooltipFormat?a.format(t,r.tooltipFormat):a.format(t,r.displayFormats.datetime)}format(t,a){const n=this.options.time.displayFormats,i=this._unit,l=a||n[i];return this._adapter.format(t,l)}_tickFormatFunction(t,a,r,n){const i=this.options,l=i.ticks.callback;if(l)return Ke(l,[t,a,r],this);const o=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],m=d&&o[d],h=r[a],y=d&&m&&h&&h.major;return this._adapter.format(t,n||(y?m:u))}generateTickLabels(t){let a,r,n;for(a=0,r=t.length;a<r;++a)n=t[a],n.label=this._tickFormatFunction(n.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+r)*a.factor)}getValueForPixel(t){const a=this._offsets,r=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,r=this.ctx.measureText(t).width,n=ka(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(n),l=Math.sin(n),o=this._resolveTickFontOptions(0).size;return{w:r*i+o*l,h:r*l+o*i}}_getLabelCapacity(t){const a=this.options.time,r=a.displayFormats,n=r[a.unit]||r.millisecond,i=this._tickFormatFunction(t,0,Zb(this,[t],this._majorUnit),n),l=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],a,r;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(a=0,r=n.length;a<r;++a)t=t.concat(n[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,r;if(t.length)return t;const n=this.getLabels();for(a=0,r=n.length;a<r;++a)t.push(Xb(this,n[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return A2(t.sort(Gb))}}oe(Ho,"id","time"),oe(Ho,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Vc(s,t,a){let r=0,n=s.length-1,i,l,o,c;a?(t>=s[r].pos&&t<=s[n].pos&&({lo:r,hi:n}=Pn(s,"pos",t)),{pos:i,time:o}=s[r],{pos:l,time:c}=s[n]):(t>=s[r].time&&t<=s[n].time&&({lo:r,hi:n}=Pn(s,"time",t)),{time:i,pos:o}=s[r],{time:l,pos:c}=s[n]);const d=l-i;return d?o+(c-o)*(t-i)/d:o}class ej extends Ho{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=Vc(a,this.min),this._tableRange=Vc(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:r}=this,n=[],i=[];let l,o,c,d,u;for(l=0,o=t.length;l<o;++l)d=t[l],d>=a&&d<=r&&n.push(d);if(n.length<2)return[{time:a,pos:0},{time:r,pos:1}];for(l=0,o=n.length;l<o;++l)u=n[l+1],c=n[l-1],d=n[l],Math.round((u+c)/2)!==d&&i.push({time:d,pos:l/(o-1)});return i}_generate(){const t=this.min,a=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(a)||r.length===1)&&r.push(a),r.sort((n,i)=>n-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),r=this.getLabelTimestamps();return a.length&&r.length?t=this.normalize(a.concat(r)):t=a.length?a:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Vc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,r=this.getDecimalForPixel(t)/a.factor-a.end;return Vc(this._table,r*this._tableRange+this._minPos,!0)}}oe(ej,"id","timeseries"),oe(ej,"defaults",Ho.defaults);const xS="label";function tj(s,t){typeof s=="function"?s(t):s&&(s.current=t)}function BO(s,t){const a=s.options;a&&t&&Object.assign(a,t)}function pS(s,t){s.labels=t}function fS(s,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xS;const r=[];s.datasets=t.map(n=>{const i=s.datasets.find(l=>l[a]===n[a]);return!i||!n.data||r.includes(i)?{...n}:(r.push(i),Object.assign(i,n),i)})}function UO(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xS;const a={labels:[],datasets:[]};return pS(a,s.labels),fS(a,s.datasets,t),a}function VO(s,t){const{height:a=150,width:r=300,redraw:n=!1,datasetIdKey:i,type:l,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:m,...h}=s,y=b.useRef(null),g=b.useRef(null),j=()=>{y.current&&(g.current=new nc(y.current,{type:l,data:UO(o,i),options:c&&{...c},plugins:d}),tj(t,g.current))},v=()=>{tj(t,null),g.current&&(g.current.destroy(),g.current=null)};return b.useEffect(()=>{!n&&g.current&&c&&BO(g.current,c)},[n,c]),b.useEffect(()=>{!n&&g.current&&pS(g.current.config.data,o.labels)},[n,o.labels]),b.useEffect(()=>{!n&&g.current&&o.datasets&&fS(g.current.config.data,o.datasets,i)},[n,o.datasets]),b.useEffect(()=>{g.current&&(n?(v(),setTimeout(j)):g.current.update(m))},[n,c,o.labels,o.datasets,m]),b.useEffect(()=>{g.current&&(v(),setTimeout(j))},[l]),b.useEffect(()=>(j(),()=>v()),[]),oa.createElement("canvas",{ref:y,role:"img",height:a,width:r,...h},u)}const HO=b.forwardRef(VO);function fg(s,t){return nc.register(t),b.forwardRef((a,r)=>oa.createElement(HO,{...a,ref:r,type:s}))}const p0=fg("line",Od),f0=fg("bar",Ld),g0=fg("doughnut",Ml);nc.register(vi,mS,cS,Ru,Ou,oo,Xa,lo,Ho);function WO(){const[s,t]=b.useState("overview"),[a,r]=b.useState("30d"),[n,i]=b.useState(""),[l,o]=b.useState(""),[c,d]=b.useState(!1),u=je(O=>O.customers.list),m=je(O=>O.appointments.data),{catalog:h,workOrders:y,technicians:g}=je(O=>O.services),j=je(O=>O.invoices.invoices),v=je(O=>O.inventory.items),x=()=>{const O=new Date;let E;switch(a){case"7d":E=new Date(O.getTime()-7*24*60*60*1e3);break;case"30d":E=new Date(O.getTime()-30*24*60*60*1e3);break;case"90d":E=new Date(O.getTime()-90*24*60*60*1e3);break;case"1y":E=new Date(O.getTime()-365*24*60*60*1e3);break;case"custom":E=n?new Date(n):new Date(O.getTime()-30*24*60*60*1e3);break;default:E=new Date(O.getTime()-30*24*60*60*1e3)}const W=a==="custom"&&l?new Date(l):O;return{startDate:E,endDate:W}},f=b.useMemo(()=>{const{startDate:O,endDate:E}=x(),W=j.filter(J=>{const L=new Date(J.date||J.createdAt);return L>=O&&L<=E}),Z=m.filter(J=>{const L=new Date(J.date||J.createdAt);return L>=O&&L<=E}),I=y.filter(J=>{const L=new Date(J.date||J.createdAt);return L>=O&&L<=E}),$=W.reduce((J,L)=>J+(L.total||0),0),A=W.filter(J=>J.status==="paid").reduce((J,L)=>J+(L.total||0),0),G=$-A,z=W.length>0?$/W.length:0,ie=I.filter(J=>J.status==="completed").length,de=I.length,xe=de>0?I.reduce((J,L)=>J+(L.total||0),0)/de:0,he=u.length,Pe=u.filter(J=>{const L=J.lastVisit||J.updatedAt;return L&&new Date(L)>=O}).length,ee=u.filter(J=>{const L=J.dateCreated||J.createdAt;return L&&new Date(L)>=O}).length,Ce=he>0?Pe/he*100:0,V=Z.length,Se=Z.filter(J=>J.status==="completed").length,k=Z.filter(J=>J.status==="cancelled").length,H=Z.filter(J=>J.status==="no-show").length,Q=V>0?Se/V*100:0;return{revenue:{total:$,paid:A,outstanding:G,avgInvoice:z},services:{completed:ie,total:de,avgValue:xe,completionRate:de>0?ie/de*100:0},customers:{total:he,active:Pe,new:ee,retentionRate:Ce},appointments:{total:V,completed:Se,cancelled:k,noShow:H,completionRate:Q}}},[u,m,y,j,a,n,l]),N=(()=>{const{startDate:O,endDate:E}=x(),W=[],Z=new Date(O);for(;Z<=E;)W.push(Z.toLocaleDateString("en-US",{month:"short"})),Z.setMonth(Z.getMonth()+1);const I=W.map(z=>j.filter(de=>new Date(de.date||de.createdAt).toLocaleDateString("en-US",{month:"short"})===z).reduce((de,xe)=>de+(xe.total||0),0)),$=[...new Set(y.map(z=>z.serviceType||"Other"))],A=$.map(z=>y.filter(ie=>(ie.serviceType||"Other")===z).length),G=W.map(z=>u.filter(de=>new Date(de.dateCreated||de.createdAt).toLocaleDateString("en-US",{month:"short"})===z).length);return{revenue:{labels:W,datasets:[{label:"Revenue",data:I,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},serviceDistribution:{labels:$,datasets:[{data:A,backgroundColor:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#6b7280"]}]},customerGrowth:{labels:W,datasets:[{label:"New Customers",data:G,backgroundColor:"#10b981",borderRadius:4}]}}})(),w=async()=>{d(!0);try{const{startDate:O,endDate:E}=x(),W={reportType:s,dateRange:{start:O.toISOString(),end:E.toISOString(),display:`${O.toLocaleDateString()} - ${E.toLocaleDateString()}`},metrics:f,technicianMetrics:C,chartData:N,generatedAt:new Date().toISOString(),summary:{totalCustomers:u.length,totalAppointments:m.length,totalInvoices:j.length,totalWorkOrders:y.length,totalInventory:v.length,totalRevenue:f.revenue.total,totalServices:f.services.total}},I=[{type:"application/json",extension:"json",name:"JSON Report"},{type:"text/csv",extension:"csv",name:"CSV Report"}][0];let $,A;I.extension==="csv"||($=JSON.stringify(W,null,2),A=`${s}-report-${new Date().toISOString().split("T")[0]}.json`);const G=new Blob([$],{type:I.type}),z=URL.createObjectURL(G),ie=document.createElement("a");ie.href=z,ie.download=A,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),URL.revokeObjectURL(z),console.log(`Report exported successfully: ${A}`)}catch(O){console.error("Export failed:",O),alert("Export failed. Please try again.")}finally{d(!1)}},S=O=>{const{metrics:E,technicianMetrics:W,summary:Z}=O;let I=`Report Type,Value
`;return I+=`Date Range,${O.dateRange.display}
`,I+=`Generated At,${new Date(O.generatedAt).toLocaleString()}

`,I+=`Revenue Metrics
`,I+=`Metric,Value
`,I+=`Total Revenue,$${E.revenue.total.toLocaleString()}
`,I+=`Paid Revenue,$${E.revenue.paid.toLocaleString()}
`,I+=`Outstanding Revenue,$${E.revenue.outstanding.toLocaleString()}
`,I+=`Average Invoice Value,$${E.revenue.avgInvoice.toFixed(2)}

`,I+=`Service Metrics
`,I+=`Metric,Value
`,I+=`Total Services,${E.services.total}
`,I+=`Completed Services,${E.services.completed}
`,I+=`Completion Rate,${E.services.completionRate.toFixed(1)}%
`,I+=`Average Service Value,$${E.services.avgValue.toFixed(2)}

`,I+=`Customer Metrics
`,I+=`Metric,Value
`,I+=`Total Customers,${E.customers.total}
`,I+=`Active Customers,${E.customers.active}
`,I+=`New Customers,${E.customers.new}
`,I+=`Retention Rate,${E.customers.retentionRate.toFixed(1)}%

`,W.length>0&&(I+=`Technician Performance
`,I+=`Name,Services Completed,Total Revenue,Average Service Value,Completion Rate
`,W.forEach($=>{I+=`${$.name},${$.servicesCompleted},$${$.totalRevenue.toLocaleString()},$${$.avgServiceValue.toFixed(2)},${$.completionRate.toFixed(1)}%
`})),I},C=b.useMemo(()=>g.map(O=>{const E=y.filter($=>$.technicianId===O.id),W=E.filter($=>$.status==="completed").length,Z=E.reduce(($,A)=>$+(A.total||0),0),I=W>0?Z/W:0;return{...O,servicesCompleted:W,totalRevenue:Z,avgServiceValue:I,completionRate:E.length>0?W/E.length*100:0}}),[g,y]),T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",f.revenue.total.toLocaleString()]}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"This period"})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Customers"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.customers.active}),e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[f.customers.retentionRate.toFixed(1),"% retention"]})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(nt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Services Completed"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:f.services.completed}),e.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:[f.services.completionRate.toFixed(1),"% completion rate"]})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(xa,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Service Value"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["$",f.services.avgValue.toFixed(0)]}),e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Per service"})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx(Ve,{className:"w-6 h-6 text-yellow-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Revenue Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(p0,{data:N.revenue,options:{maintainAspectRatio:!1}})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Service Distribution"}),e.jsx("div",{className:"h-64",children:e.jsx(g0,{data:N.serviceDistribution,options:{maintainAspectRatio:!1}})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[f.appointments.completionRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Appointment Completion Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["$",f.revenue.avgInvoice.toFixed(0)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Average Invoice Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:f.customers.new}),e.jsx("div",{className:"text-sm text-gray-600",children:"New Customers This Period"})]})]})]})]}),_=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["$",f.revenue.total.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This period"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Paid Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["$",f.revenue.paid.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[f.revenue.total>0?(f.revenue.paid/f.revenue.total*100).toFixed(1):0,"% of total"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Outstanding"}),e.jsxs("p",{className:"text-3xl font-bold text-yellow-600",children:["$",f.revenue.outstanding.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Pending collection"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Revenue Trend"}),e.jsx("div",{className:"h-80",children:e.jsx(p0,{data:N.revenue,options:{maintainAspectRatio:!1}})})]})]}),F=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:f.customers.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:f.customers.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Customers"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:f.customers.new}),e.jsx("div",{className:"text-sm text-gray-600",children:"New Customers"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-yellow-600",children:[f.customers.retentionRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Retention Rate"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Customer Growth"}),e.jsx("div",{className:"h-80",children:e.jsx(f0,{data:N.customerGrowth,options:{maintainAspectRatio:!1}})})]})]}),D=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:f.services.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Services"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:f.services.completed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[f.services.completionRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-yellow-600",children:["$",f.services.avgValue.toFixed(0)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Service Value"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Service Distribution"}),e.jsx("div",{className:"h-80",children:e.jsx(g0,{data:N.serviceDistribution,options:{maintainAspectRatio:!1}})})]})]}),R=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:g.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Technicians"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:C.reduce((O,E)=>O+E.servicesCompleted,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Services"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:["$",C.reduce((O,E)=>O+E.totalRevenue,0).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-yellow-600",children:[C.length>0?(C.reduce((O,E)=>O+E.completionRate,0)/C.length).toFixed(1):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Completion Rate"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Technician Performance Comparison"}),e.jsx("div",{className:"h-80",children:e.jsx(f0,{data:{labels:C.map(O=>O.name),datasets:[{label:"Services Completed",data:C.map(O=>O.servicesCompleted),backgroundColor:"#8b5cf6",borderRadius:4},{label:"Revenue Generated",data:C.map(O=>O.totalRevenue),backgroundColor:"#f59e0b",borderRadius:4}]},options:{maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:function(O,E,W){return E===0?O:"$"+O.toLocaleString()}}}}}})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Individual Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:C.map(O=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:O.name}),e.jsx("div",{className:`w-3 h-3 rounded-full ${O.completionRate>=90?"bg-green-500":O.completionRate>=75?"bg-yellow-500":"bg-red-500"}`})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Services:"}),e.jsx("span",{className:"font-medium",children:O.servicesCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["$",O.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg/Service:"}),e.jsxs("span",{className:"font-medium",children:["$",O.avgServiceValue.toFixed(0)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Completion:"}),e.jsxs("span",{className:"font-medium",children:[O.completionRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Performance"}),e.jsx("span",{children:O.completionRate>=90?"Excellent":O.completionRate>=75?"Good":"Needs Improvement"})]})})]})]},O.id))})]})]}),U=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:v.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:v.filter(O=>(O.quantity||0)>0).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"In Stock"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:v.filter(O=>(O.quantity||0)<=(O.minQuantity||0)).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Low Stock"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:["$",v.reduce((O,E)=>O+(E.quantity||0)*(E.price||0),0).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Value"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Low Stock Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Min Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.filter(O=>(O.quantity||0)<=(O.minQuantity||0)).map(O=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:O.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.quantity||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.minQuantity||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${(O.quantity||0)===0?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:(O.quantity||0)===0?"Out of Stock":"Low Stock"})})]},O.id))})]})})]})]});return e.jsxs("div",{className:"min-h-screen bg-secondary-50 p-6 space-y-8",children:[e.jsxs("div",{className:"min-h-32 flex flex-col lg:flex-row justify-between items-start lg:items-center p-6",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-2",children:"Reports & Analytics"}),e.jsx("p",{className:"text-secondary-600",children:"Comprehensive business insights and performance metrics"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-secondary-700",children:"Date Range:"}),e.jsxs("select",{value:a,onChange:O=>r(O.target.value),className:"form-input",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"}),e.jsx("option",{value:"custom",children:"Custom range"})]})]}),a==="custom"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:n,onChange:O=>i(O.target.value),className:"form-input",placeholder:"Start Date"}),e.jsx("span",{className:"text-secondary-500",children:"to"}),e.jsx("input",{type:"date",value:l,onChange:O=>o(O.target.value),className:"form-input",placeholder:"End Date"})]}),e.jsxs("button",{onClick:w,disabled:c,className:"btn-primary",title:"Export current report data",children:[e.jsx(ns,{className:"w-4 h-4"}),c?"Exporting...":"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-success-600",children:["$",f.revenue.total.toLocaleString()]}),e.jsx("p",{className:"text-sm text-secondary-500",children:"This Period"})]}),e.jsx("div",{className:"w-12 h-12 bg-success-100 rounded-xl flex items-center justify-center",children:e.jsx(Me,{className:"w-6 h-6 text-success-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Active Customers"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600",children:f.customers.active}),e.jsx("p",{className:"text-sm text-secondary-500",children:"This Period"})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:e.jsx(nt,{className:"w-6 h-6 text-primary-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Services Completed"}),e.jsx("p",{className:"text-3xl font-bold text-info-600",children:f.services.completed}),e.jsx("p",{className:"text-sm text-secondary-500",children:"This Period"})]}),e.jsx("div",{className:"w-12 h-12 bg-info-100 rounded-xl flex items-center justify-center",children:e.jsx(xa,{className:"w-6 h-6 text-info-600"})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Completion Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-warning-600",children:[f.services.completionRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Service Success"})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-xl flex items-center justify-center",children:e.jsx(Ve,{className:"w-6 h-6 text-warning-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"overview",label:"Overview",icon:Qs},{key:"revenue",label:"Revenue",icon:Me},{key:"customers",label:"Customers",icon:nt},{key:"services",label:"Services",icon:Xt},{key:"technicians",label:"Technicians",icon:nt},{key:"inventory",label:"Inventory",icon:Xr}].map(O=>e.jsxs("button",{onClick:()=>t(O.key),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-all duration-200 ${s===O.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(O.icon,{className:"w-4 h-4"}),O.label]},O.key))})}),e.jsxs("div",{className:"p-6",children:[s==="overview"&&T(),s==="revenue"&&_(),s==="customers"&&F(),s==="services"&&D(),s==="technicians"&&R(),s==="inventory"&&U()]})]})]})}const qO=()=>Vw(),YO=Lw,KO={stats:null,loading:!1,error:null,realTimeEnabled:!0,lastUpdate:null,customReports:[]},zd=Y("dashboard/fetchStats",async s=>{const t=s?new URLSearchParams(s).toString():"";return(await M.get(`/dashboard/stats${t?`?${t}`:""}`)).data}),GO=Y("dashboard/generateReport",async s=>(await M.post("/dashboard/reports",s)).data);Y("dashboard/exportData",async s=>(await M.get(`/dashboard/export?format=${s}`,{responseType:"blob"})).data);const XO=Y("dashboard/realTimeUpdates",async(s,{getState:t})=>(await M.get("/dashboard/realtime")).data),QO=Rt({name:"dashboard",initialState:KO,reducers:{setRealTimeEnabled:(s,t)=>{s.realTimeEnabled=t.payload},updateLastUpdate:s=>{s.lastUpdate=new Date().toISOString()},addCustomReport:(s,t)=>{s.customReports.push(t.payload)},clearError:s=>{s.error=null},simulateRealTimeUpdate:s=>{s.stats&&(s.stats={...s.stats,totalCustomers:s.stats.totalCustomers+Math.floor(Math.random()*3)-1,totalAppointments:s.stats.totalAppointments+Math.floor(Math.random()*2),totalRevenue:s.stats.totalRevenue+Math.floor(Math.random()*100),pendingTasks:s.stats.pendingTasks+Math.floor(Math.random()*2)-1},s.lastUpdate=new Date().toISOString())}},extraReducers:s=>{s.addCase(zd.pending,t=>{t.loading=!0,t.error=null}).addCase(zd.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload,t.lastUpdate=new Date().toISOString()}).addCase(zd.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to fetch dashboard stats"}).addCase(GO.fulfilled,(t,a)=>{t.customReports.push(a.payload)}).addCase(XO.fulfilled,(t,a)=>{t.realTimeEnabled&&(t.stats={...t.stats,...a.payload},t.lastUpdate=new Date().toISOString())})}}),JO=QO.reducer;nc.register(Ru,Ou,lo,Xa,oo,vi,uO,mS,cS,rO);const sj=()=>{var U;const s=qO(),{stats:t,loading:a,error:r}=YO(O=>O.dashboard),[n,i]=b.useState(!0),[l,o]=b.useState(6e4),[c,d]=b.useState(new Date),[u,m]=b.useState(!1),[h,y]=b.useState(["revenue","appointments","customers"]),[g,j]=b.useState({start:"",end:""}),[v,x]=b.useState("line"),[f,p]=b.useState(!1),[N,w]=b.useState({dateRange:"7d",serviceType:"all",technician:"all",status:"all"}),S=b.useCallback(()=>{s(zd(N)),d(new Date)},[s,N]);b.useEffect(()=>{S()},[S]),b.useEffect(()=>{if(!n)return;const O=setInterval(()=>{S()},l);return()=>clearInterval(O)},[n,l,S]);const C=(O,E)=>{w(W=>({...W,[O]:E}))},T=O=>{y(E=>E.includes(O)?E.filter(W=>W!==O):[...E,O])},_=O=>{switch(O){case"appointments":window.location.href="/admin/dashboard/appointments";break;case"report":const E={stats:t,dateRange:N.dateRange,generatedAt:new Date().toISOString()},W=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),Z=URL.createObjectURL(W),I=document.createElement("a");I.href=Z,I.download=`dashboard-report-${new Date().toISOString().split("T")[0]}.json`,I.click(),URL.revokeObjectURL(Z);break;case"tasks":window.location.href="/admin/dashboard/tasks";break;case"analytics":window.location.href="/admin/dashboard/customers";break}},F={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Revenue",data:(t==null?void 0:t.revenueHistory)||[12e3,19e3,15e3,25e3,22e3,3e4],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]},D={labels:["Oil Change","Brake Service","Tire Rotation","Engine Repair","Other"],datasets:[{data:(t==null?void 0:t.serviceDistribution)||[30,25,20,15,10],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)"],borderWidth:2,borderColor:"#ffffff"}]},R={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Appointments",data:(t==null?void 0:t.weeklyAppointments)||[12,19,15,25,22,18,14],backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgb(16, 185, 129)",borderWidth:1}]};return a&&!t?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Dashboard"}),e.jsx("p",{className:"text-gray-600 mb-4",children:r}),e.jsx("button",{onClick:S,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Real-time overview of your auto repair business"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>p(!f),className:`p-3 rounded-xl transition-colors ${f?"bg-blue-100 text-blue-600":"bg-white text-gray-600 hover:bg-gray-50"} border border-gray-200`,title:"Toggle Filters",children:e.jsx(_1,{className:"w-5 h-5"})}),e.jsx("button",{onClick:S,className:"p-3 bg-white text-gray-600 hover:bg-gray-50 rounded-xl border border-gray-200 transition-colors",title:"Refresh Data",children:e.jsx(Ea,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>m(!u),className:`p-3 rounded-xl transition-colors ${u?"bg-blue-100 text-blue-600":"bg-white text-gray-600 hover:bg-gray-50"} border border-gray-200`,title:"Report Builder",children:e.jsx(Xt,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-sm text-gray-600",children:n?"Auto-refresh enabled":"Auto-refresh disabled"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Last updated: ",c.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i(!n),className:`p-2 rounded-lg transition-colors ${n?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,title:n?"Disable Auto-refresh":"Enable Auto-refresh",children:n?e.jsx(St,{className:"w-4 h-4"}):e.jsx(Q_,{className:"w-4 h-4"})}),e.jsxs("select",{value:l/1e3,onChange:O=>o(parseInt(O.target.value)*1e3),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:30,children:"30s"}),e.jsx("option",{value:60,children:"1m"}),e.jsx("option",{value:300,children:"5m"}),e.jsx("option",{value:600,children:"10m"})]})]})]})]}),f&&e.jsxs("div",{className:"mb-6 bg-white p-6 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(Qr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:N.dateRange,onChange:O=>C("dateRange",O.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"1d",children:"Last 24 hours"}),e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type"}),e.jsxs("select",{value:N.serviceType,onChange:O=>C("serviceType",O.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Services"}),e.jsx("option",{value:"oil_change",children:"Oil Change"}),e.jsx("option",{value:"brake_service",children:"Brake Service"}),e.jsx("option",{value:"tire_rotation",children:"Tire Rotation"}),e.jsx("option",{value:"engine_repair",children:"Engine Repair"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Technician"}),e.jsxs("select",{value:N.technician,onChange:O=>C("technician",O.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Technicians"}),e.jsx("option",{value:"tech1",children:"John Smith"}),e.jsx("option",{value:"tech2",children:"Sarah Johnson"}),e.jsx("option",{value:"tech3",children:"Mike Wilson"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:N.status,onChange:O=>C("status",O.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})]}),u&&e.jsxs("div",{className:"mb-6 bg-white p-6 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Custom Report Builder"}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(Qr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metrics"}),e.jsx("div",{className:"space-y-2",children:["revenue","appointments","customers","tasks"].map(O=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.includes(O),onChange:()=>T(O),className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:O})]},O))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"date",value:g.start,onChange:O=>j(E=>({...E,start:O.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("input",{type:"date",value:g.end,onChange:O=>j(E=>({...E,end:O.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chart Type"}),e.jsxs("select",{value:v,onChange:O=>x(O.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"line",children:"Line Chart"}),e.jsx("option",{value:"bar",children:"Bar Chart"}),e.jsx("option",{value:"doughnut",children:"Doughnut Chart"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",((U=t==null?void 0:t.totalRevenue)==null?void 0:U.toLocaleString())||"0"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(Me,{className:"w-6 h-6 text-blue-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-green-600",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"+12.5% from last month"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(t==null?void 0:t.totalCustomers)||"0"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(nt,{className:"w-6 h-6 text-green-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-green-600",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"+8.2% from last month"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(t==null?void 0:t.totalAppointments)||"0"})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(be,{className:"w-6 h-6 text-purple-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-green-600",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"+15.3% from last month"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(t==null?void 0:t.pendingTasks)||"0"})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:e.jsx(xa,{className:"w-6 h-6 text-orange-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-red-600",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"+5.7% from last month"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue Trends"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Last 6 months"})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(p0,{data:F,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(O){return"$"+O.toLocaleString()}}}}}})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service Distribution"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dm,{className:"text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"This month"})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(g0,{data:D,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Weekly Appointments"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"This week"})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(f0,{data:R,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>_("appointments"),className:"w-full text-left p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"View Today's Appointments"}),e.jsx(be,{className:"text-blue-600"})]})}),e.jsx("button",{onClick:()=>_("report"),className:"w-full text-left p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Generate Monthly Report"}),e.jsx(ns,{className:"text-green-600"})]})}),e.jsx("button",{onClick:()=>_("tasks"),className:"w-full text-left p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"View Pending Tasks"}),e.jsx(xa,{className:"text-red-600"})]})}),e.jsx("button",{onClick:()=>_("analytics"),className:"w-full text-left p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Customer Analytics"}),e.jsx(nt,{className:"text-purple-600"})]})})]})]})]})]})},ZO=()=>{const[s,t]=b.useState(!1),a=Oa(),{isAuthenticated:r}=As(),n=[{name:"Home",href:"/"},{name:"Services",href:"/services"},{name:"About",href:"/about"},{name:"Contact",href:"/contact"},{name:"Appointments",href:"/appointments"}],i=l=>a.pathname===l;return e.jsxs("nav",{className:"bg-white shadow-lg sticky top-0 z-50 border-b border-gray-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(me,{to:r?"/admin/dashboard":"/",className:"flex items-center group",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center mr-3 shadow-lg group-hover:shadow-xl transition-all duration-300",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"A"})}),e.jsxs("div",{children:[e.jsx("div",{className:`text-xl font-bold ${r?"text-yellow-600 hover:text-yellow-700":"text-gray-900"} transition-colors`,children:"Auto Repair Pro"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Professional Auto Care"})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"ml-10 flex items-baseline space-x-8",children:n.map(l=>e.jsx(me,{to:l.href,className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 ${i(l.href)?"text-blue-600 bg-blue-50 shadow-sm":"text-gray-700 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"}`,children:l.name},l.name))})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600 bg-gray-50 px-3 py-2 rounded-xl",children:[e.jsx(kt,{className:"w-4 h-4 mr-2 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"(555) 123-4567"})]}),r?e.jsx(me,{to:Ye.isAdmin()?"/admin/dashboard":"/customer/dashboard",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl",children:"Dashboard"}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{to:"/auth/login",className:"text-gray-700 hover:text-blue-600 px-4 py-2 text-sm font-medium transition-all duration-300 rounded-xl hover:bg-gray-50",children:"Sign In"}),e.jsx(me,{to:"/auth/register",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl",children:"Sign Up"})]}),e.jsx(me,{to:"/appointments",className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl",children:"Book Now"})]}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:()=>t(!s),className:"text-gray-700 hover:text-blue-600 focus:outline-none focus:text-blue-600 p-2 rounded-xl hover:bg-gray-100 transition-all duration-300",children:s?e.jsx(Qr,{className:"h-6 w-6"}):e.jsx(DA,{className:"h-6 w-6"})})})]})}),s&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t border-gray-200",children:[n.map(l=>e.jsx(me,{to:l.href,className:`block px-4 py-3 rounded-xl text-base font-medium transition-all duration-300 ${i(l.href)?"text-blue-600 bg-blue-50 shadow-sm":"text-gray-700 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"}`,onClick:()=>t(!1),children:l.name},l.name)),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center px-4 py-3 text-gray-600 bg-gray-50 rounded-xl mx-2",children:[e.jsx(kt,{className:"w-4 h-4 mr-2 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"(555) 123-4567"})]}),r?e.jsx(me,{to:Ye.isAdmin()?"/admin/dashboard":"/customer/dashboard",className:"block px-4 py-3 text-green-600 hover:text-green-700 text-base font-medium transition-all duration-300 rounded-xl hover:bg-green-50 mx-2",onClick:()=>t(!1),children:"Dashboard"}):e.jsxs(e.Fragment,{children:[e.jsx(me,{to:"/auth/login",className:"block px-4 py-3 text-gray-700 hover:text-blue-600 text-base font-medium transition-all duration-300 rounded-xl hover:bg-gray-50 mx-2",onClick:()=>t(!1),children:"Sign In"}),e.jsx(me,{to:"/auth/register",className:"block px-4 py-3 text-blue-600 hover:text-blue-700 text-base font-medium transition-all duration-300 rounded-xl hover:bg-blue-50 mx-2",onClick:()=>t(!1),children:"Sign Up"})]}),e.jsx(me,{to:"/appointments",className:"block mt-2 mx-2 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-4 py-3 rounded-xl text-center font-medium transition-all duration-300 shadow-lg",onClick:()=>t(!1),children:"Book Appointment"})]})]})})]})},e7=()=>{const s=new Date().getFullYear(),t=[{name:"Home",href:"/"},{name:"Services",href:"/services"},{name:"About Us",href:"/about"},{name:"Contact",href:"/contact"},{name:"Appointments",href:"/appointments"}],a=[{name:"Oil Change",href:"/services"},{name:"Brake Service",href:"/services"},{name:"Engine Diagnostics",href:"/services"},{name:"Tire Service",href:"/services"},{name:"AC/Heating",href:"/services"}],r=[{icon:e.jsx(Mm,{className:"w-4 h-4"}),href:"#",label:"Share"},{icon:e.jsx(Ut,{className:"w-4 h-4"}),href:"#",label:"Message"},{icon:e.jsx(Tf,{className:"w-4 h-4"}),href:"#",label:"Like"},{icon:e.jsx(M1,{className:"w-4 h-4"}),href:"#",label:"Link"}];return e.jsxs("footer",{className:"bg-gray-900 text-white",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"A"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold",children:"Auto Repair Pro"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Professional Auto Care"})]})]}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Your trusted partner in automotive care for over 15 years. We're committed to providing honest, reliable, and professional auto repair services."}),e.jsx("div",{className:"flex space-x-4",children:r.map((n,i)=>e.jsx("a",{href:n.href,className:"w-10 h-10 bg-gray-800 hover:bg-gradient-to-r hover:from-blue-600 hover:to-indigo-600 text-white rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 shadow-lg hover:shadow-xl","aria-label":n.label,children:n.icon},i))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),e.jsx("ul",{className:"space-y-2",children:t.map((n,i)=>e.jsx("li",{children:e.jsxs(me,{to:n.href,className:"text-gray-400 hover:text-white transition-all duration-300 flex items-center group",children:[e.jsx(gu,{className:"w-3 h-3 mr-2 group-hover:translate-x-1 transition-transform duration-300"}),n.name]})},i))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Our Services"}),e.jsx("ul",{className:"space-y-2",children:a.map((n,i)=>e.jsx("li",{children:e.jsxs(me,{to:n.href,className:"text-gray-400 hover:text-white transition-all duration-300 flex items-center group",children:[e.jsx(gu,{className:"w-3 h-3 mr-2 group-hover:translate-x-1 transition-transform duration-300"}),n.name]})},i))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact Info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(kt,{className:"text-blue-500 mr-3 mt-1 w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-white",children:"(555) 123-4567"}),e.jsx("p",{className:"text-white",children:"(555) 123-4568 (Emergency)"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(jt,{className:"text-blue-500 mr-3 mt-1 w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Email"}),e.jsx("p",{className:"text-white",children:"info@autorepair.com"}),e.jsx("p",{className:"text-white",children:"service@autorepair.com"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(pa,{className:"text-blue-500 mr-3 mt-1 w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Address"}),e.jsx("p",{className:"text-white",children:"123 Auto Repair Street"}),e.jsx("p",{className:"text-white",children:"City, State 12345"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(vt,{className:"text-blue-500 mr-3 mt-1 w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Hours"}),e.jsx("p",{className:"text-white",children:"Mon-Fri: 8AM-6PM"}),e.jsx("p",{className:"text-white",children:"Sat: 9AM-4PM"})]})]})]})]})]})}),e.jsx("div",{className:"bg-gray-800 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Stay Updated"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Subscribe to our newsletter for maintenance tips and special offers."}),e.jsxs("div",{className:"max-w-md mx-auto flex",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-2 rounded-l-xl border-0 focus:ring-2 focus:ring-blue-500 text-gray-900 transition-all duration-200"}),e.jsx("button",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-2 rounded-r-xl transition-all duration-300 shadow-lg hover:shadow-xl",children:"Subscribe"})]})]})})}),e.jsx("div",{className:"bg-gray-950 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"text-gray-400 text-sm",children:["© ",s," Auto Repair Pro. All rights reserved."]}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx(me,{to:"/privacy",className:"text-gray-400 hover:text-white text-sm transition-all duration-300 hover:scale-105",children:"Privacy Policy"}),e.jsx(me,{to:"/terms",className:"text-gray-400 hover:text-white text-sm transition-all duration-300 hover:scale-105",children:"Terms of Service"}),e.jsx(me,{to:"/sitemap",className:"text-gray-400 hover:text-white text-sm transition-all duration-300 hover:scale-105",children:"Sitemap"})]})]})})})]})},t7=()=>{const[s,t]=b.useState(!1),[a,r]=b.useState(!1),[n,i]=b.useState([{id:"1",text:"Hello! Welcome to Auto Repair Pro. How can we help you today?",sender:"agent",timestamp:new Date}]),[l,o]=b.useState(""),[c,d]=b.useState(!1),u=b.useRef(null),m=b.useRef(null),h=()=>{var v;(v=u.current)==null||v.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{h()},[n]),b.useEffect(()=>{s&&m.current&&m.current.focus()},[s]);const y=()=>{if(!l.trim())return;const v={id:Date.now().toString(),text:l,sender:"user",timestamp:new Date};i(x=>[...x,v]),o(""),d(!0),setTimeout(()=>{const x={id:(Date.now()+1).toString(),text:g(l),sender:"agent",timestamp:new Date};i(f=>[...f,x]),d(!1)},1e3+Math.random()*2e3)},g=v=>{const x=v.toLowerCase();return x.includes("appointment")||x.includes("book")||x.includes("schedule")?"Great! You can book an appointment through our website or call us at (555) 123-4567. What type of service do you need?":x.includes("price")||x.includes("cost")||x.includes("quote")?"Our prices vary depending on the service needed. You can view our service prices on our website, or call us for a detailed quote. What specific service are you looking for?":x.includes("hours")||x.includes("open")||x.includes("time")?"We're open Monday through Friday from 8:00 AM to 6:00 PM, and Saturdays from 9:00 AM to 4:00 PM. We're closed on Sundays.":x.includes("emergency")||x.includes("urgent")||x.includes("help")?"For emergency services, please call our emergency line at (555) 123-4568. We provide 24/7 roadside assistance and emergency repairs.":x.includes("location")||x.includes("address")||x.includes("where")?"We're located at 123 Auto Repair Street, City, State 12345. You can find directions on our website or call us for assistance.":"Thank you for your message! A live agent will be with you shortly. In the meantime, you can also call us at (555) 123-4567 for immediate assistance."},j=v=>{v.key==="Enter"&&y()};return a?e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsx("button",{onClick:()=>r(!1),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white p-3 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-110",children:e.jsx(Ut,{className:"w-6 h-6"})})}):e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:s?e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200 w-80 h-96 flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4 rounded-t-xl flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ut,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Live Chat"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>r(!0),className:"hover:bg-blue-700 p-1 rounded-lg transition-all duration-300",children:e.jsx(w1,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(!1),className:"hover:bg-blue-700 p-1 rounded-lg transition-all duration-300",children:e.jsx(Qr,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-3",children:[n.map(v=>e.jsx("div",{className:`flex ${v.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs px-4 py-3 rounded-xl shadow-sm ${v.sender==="user"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white":"bg-gray-50 text-gray-800 border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v.sender==="user"?e.jsx(Vt,{className:"w-3 h-3"}):e.jsx(xa,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs opacity-75",children:v.sender==="user"?"You":"Auto Repair Pro"})]}),e.jsx("p",{className:"text-sm",children:v.text}),e.jsx("p",{className:"text-xs opacity-75 mt-2",children:v.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},v.id)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"bg-gray-50 text-gray-800 px-4 py-3 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xa,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Agent is typing..."})]}),e.jsxs("div",{className:"flex space-x-1 mt-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})}),e.jsx("div",{ref:u})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{ref:m,type:"text",value:l,onChange:v=>o(v.target.value),onKeyPress:j,placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white"}),e.jsx("button",{onClick:y,disabled:!l.trim(),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white p-2 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl disabled:shadow-none",children:e.jsx(ec,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send • Usually responds in a few seconds"})]})]}):e.jsxs("button",{onClick:()=>t(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white p-4 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center space-x-2 hover:scale-105",children:[e.jsx(Ut,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-medium",children:"Chat with us"})]})})},wl=({children:s})=>e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(ZO,{}),e.jsx("main",{className:"flex-grow",children:s}),e.jsx(e7,{}),e.jsx(t7,{})]}),aj=()=>{const{isAuthenticated:s}=As(),t=[{icon:e.jsx(Fe,{className:"text-4xl text-blue-600"}),title:"Engine Diagnostics",description:"Advanced computer diagnostics to identify engine issues quickly and accurately."},{icon:e.jsx(xa,{className:"text-4xl text-blue-600"}),title:"Brake Service",description:"Complete brake system inspection, repair, and replacement services."},{icon:e.jsx(Xt,{className:"text-4xl text-blue-600"}),title:"Oil Change",description:"Professional oil change service with quality filters and lubricants."},{icon:e.jsx(qe,{className:"text-4xl text-blue-600"}),title:"Preventive Maintenance",description:"Regular maintenance to keep your vehicle running smoothly and safely."}],a=[{name:"John Smith",rating:5,text:"Excellent service! They fixed my transmission issues quickly and at a fair price. Highly recommended!",vehicle:"2018 Toyota Camry"},{name:"Sarah Johnson",rating:5,text:"Very professional and honest. They explained everything clearly and didn't try to sell unnecessary repairs.",vehicle:"2020 Honda CR-V"},{name:"Mike Davis",rating:5,text:"Fast turnaround time and great communication throughout the entire process. Will definitely return!",vehicle:"2019 Ford F-150"}],r=[{number:"5000+",label:"Happy Customers"},{number:"15+",label:"Years Experience"},{number:"24/7",label:"Emergency Service"},{number:"100%",label:"Satisfaction Guarantee"}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("section",{className:"relative text-white",style:{backgroundImage:"url(/images/banner.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-60"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:s?e.jsx(me,{to:"/admin/dashboard",className:"text-yellow-400 hover:text-yellow-300 transition-colors cursor-pointer",children:"Professional Auto Repair Services"}):"Professional Auto Repair Services"}),e.jsx("p",{className:"text-xl mb-8 text-blue-100",children:"Expert mechanics, quality parts, and honest service. Your vehicle deserves the best care."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(me,{to:"/appointments",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold text-center transition duration-300",children:"Book Appointment"}),!s&&e.jsx(me,{to:"/auth/register",className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-semibold text-center transition duration-300",children:"Join Now"}),e.jsx(me,{to:"/services",className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-8 py-3 rounded-lg font-semibold text-center transition duration-300",children:"Our Services"})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-8",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Quick Contact"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(kt,{className:"text-blue-300 mr-3"}),e.jsx("span",{children:"(555) 123-4567"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pa,{className:"text-blue-300 mr-3"}),e.jsx("span",{children:"123 Auto Repair St, City, State 12345"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(vt,{className:"text-blue-300 mr-3"}),e.jsx("span",{children:"Mon-Fri: 8AM-6PM, Sat: 9AM-4PM"})]})]})]})})]})})]}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Services"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"We provide comprehensive auto repair and maintenance services to keep your vehicle running at its best."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,i)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-lg hover:border-blue-300 transition-all duration-300 group",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:bg-blue-200 transition-colors duration-300",children:n.icon})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:n.title}),e.jsx("p",{className:"text-gray-600",children:n.description})]},i))}),e.jsx("div",{className:"text-center mt-12",children:e.jsx(me,{to:"/services",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-300",children:"View All Services"})})]})}),e.jsx("section",{className:"py-16 bg-blue-600 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:r.map((n,i)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:n.number}),e.jsx("div",{className:"text-blue-100",children:n.label})]},i))})})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"What Our Customers Say"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Don't just take our word for it - hear from our satisfied customers."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:a.map((n,i)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"flex mb-4",children:[...Array(n.rating)].map((l,o)=>e.jsx(ts,{className:"text-yellow-400 w-5 h-5"},o))}),e.jsxs("p",{className:"text-gray-700 mb-4 italic text-lg",children:['"',n.text,'"']}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:n.name}),e.jsx("p",{className:"text-sm text-gray-600",children:n.vehicle})]})]},i))})]})}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose Us?"}),e.jsx("p",{className:"text-xl text-gray-600",children:"We're committed to providing the best auto repair experience."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"flex items-start p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:e.jsx(ke,{className:"text-green-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Certified Technicians"}),e.jsx("p",{className:"text-gray-600",children:"Our team consists of ASE-certified mechanics with years of experience."})]})]}),e.jsxs("div",{className:"flex items-start p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:e.jsx(ke,{className:"text-green-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Quality Parts"}),e.jsx("p",{className:"text-gray-600",children:"We use only high-quality OEM and aftermarket parts for all repairs."})]})]}),e.jsxs("div",{className:"flex items-start p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:e.jsx(ke,{className:"text-green-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Warranty"}),e.jsx("p",{className:"text-gray-600",children:"All our work comes with a comprehensive warranty for your peace of mind."})]})]}),e.jsxs("div",{className:"flex items-start p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:e.jsx(ke,{className:"text-green-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Transparent Pricing"}),e.jsx("p",{className:"text-gray-600",children:"No hidden fees or surprises - we provide clear, upfront pricing."})]})]}),e.jsxs("div",{className:"flex items-start p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:e.jsx(ke,{className:"text-green-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Fast Service"}),e.jsx("p",{className:"text-gray-600",children:"Most repairs completed same-day or within 24 hours."})]})]}),e.jsxs("div",{className:"flex items-start p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:e.jsx(ke,{className:"text-green-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Customer Service"}),e.jsx("p",{className:"text-gray-600",children:"Dedicated customer service team to answer all your questions."})]})]})]})]})}),!s&&e.jsx("section",{className:"py-16 bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Join Our Community"}),e.jsx("p",{className:"text-xl mb-8 text-purple-100",children:"Create an account to manage your vehicles, track service history, and book appointments easily."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(me,{to:"/auth/register",className:"bg-white hover:bg-gray-100 text-purple-600 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Create Account"}),e.jsx(me,{to:"/auth/login",className:"border-2 border-white text-white hover:bg-white hover:text-purple-600 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Sign In"})]}),e.jsx("div",{className:"mt-6 text-sm text-purple-200",children:e.jsx("p",{children:"For business owners and staff, create an admin account to manage operations."})})]})}),e.jsx("section",{className:"py-16 bg-blue-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-xl mb-8 text-blue-100",children:"Schedule your appointment today and experience the difference professional auto care makes."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(me,{to:"/appointments",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Book Appointment"}),e.jsx(me,{to:"/contact",className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Contact Us"})]})]})})]})},s7=()=>{const s=[{id:1,name:"Oil Change Service",icon:e.jsx(C1,{className:"w-8 h-8 text-blue-600"}),description:"Complete oil change service with premium quality oil and filter replacement.",price:"$29.99",duration:"30-45 min",features:["Premium quality oil","Oil filter replacement","Multi-point inspection","Free top-off service"]},{id:2,name:"Brake Service",icon:e.jsx(ot,{className:"w-8 h-8 text-red-600"}),description:"Complete brake system inspection and repair including pads, rotors, and fluid.",price:"$149.99",duration:"2-3 hours",features:["Brake pad replacement","Rotor inspection/resurfacing","Brake fluid check","Caliper inspection"]},{id:3,name:"Engine Diagnostics",icon:e.jsx(Xt,{className:"w-8 h-8 text-green-600"}),description:"Computer diagnostics to identify engine problems and performance issues.",price:"$89.99",duration:"1-2 hours",features:["Computer scan","Error code reading","Performance analysis","Detailed report"]},{id:4,name:"Tire Service",icon:e.jsx(Fe,{className:"w-8 h-8 text-gray-600"}),description:"Tire rotation, balancing, and replacement services for optimal performance.",price:"$39.99",duration:"1 hour",features:["Tire rotation","Wheel balancing","Tire pressure check","Tread depth inspection"]},{id:5,name:"AC/Heating Service",icon:e.jsx(Gn,{className:"w-8 h-8 text-purple-600"}),description:"Complete air conditioning and heating system service and repair.",price:"$129.99",duration:"2-4 hours",features:["AC system check","Refrigerant recharge","Heater core inspection","Thermostat replacement"]},{id:6,name:"Warranty Service",icon:e.jsx(qe,{className:"w-8 h-8 text-blue-400"}),description:"Factory warranty service and extended warranty claim processing.",price:"Varies",duration:"Varies",features:["Warranty verification","Claim processing","Factory parts","Labor coverage"]},{id:7,name:"General Repairs",icon:e.jsx(xa,{className:"w-8 h-8 text-yellow-600"}),description:"General automotive repairs and maintenance for all makes and models.",price:"Varies",duration:"Varies",features:["All makes and models","Quality parts","Expert technicians","Warranty included"]},{id:8,name:"Custom Work",icon:e.jsx(xa,{className:"w-8 h-8 text-orange-600"}),description:"Custom modifications and specialty work for performance and appearance.",price:"Varies",duration:"Varies",features:["Performance upgrades","Custom modifications","Specialty work","Expert consultation"]}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Our Services"}),e.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Comprehensive auto repair and maintenance services to keep your vehicle running at peak performance."})]})})}),e.jsx("section",{className:"py-8 bg-white border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex flex-wrap justify-center gap-4"})})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(t=>e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[t.icon,e.jsx("h3",{className:"text-xl font-semibold text-gray-900 ml-3",children:t.name})]})}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center text-green-600 font-semibold",children:[e.jsx(Me,{className:"mr-1"}),t.price]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(vt,{className:"mr-1"}),t.duration]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Includes:"}),e.jsx("ul",{className:"space-y-1",children:t.features.map((a,r)=>e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Wt,{className:"text-green-500 mr-2 text-xs"}),a]},r))})]}),e.jsxs("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold text-center transition duration-300 flex items-center justify-center",children:["Book Service",e.jsx(gu,{className:"ml-2"})]})]})},t.id))})})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Service Packages"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Save money with our comprehensive service packages."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Basic Package"}),e.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-6",children:"$99.99"}),e.jsxs("ul",{className:"space-y-3 mb-8",children:[e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Oil Change"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Tire Rotation"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Multi-point Inspection"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Fluid Level Check"]})]}),e.jsx("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition duration-300",children:"Book Package"})]}),e.jsxs("div",{className:"bg-blue-600 rounded-lg p-8 text-center text-white relative",children:[e.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-red-500 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"Most Popular"})}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Premium Package"}),e.jsx("div",{className:"text-4xl font-bold mb-6",children:"$199.99"}),e.jsxs("ul",{className:"space-y-3 mb-8",children:[e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"mr-2"}),"Everything in Basic"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"mr-2"}),"Brake Inspection"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"mr-2"}),"AC System Check"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"mr-2"}),"Battery Test"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"mr-2"}),"Engine Diagnostics"]})]}),e.jsx("button",{className:"w-full bg-white text-blue-600 hover:bg-gray-100 py-3 px-6 rounded-lg font-semibold transition duration-300",children:"Book Package"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ultimate Package"}),e.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-6",children:"$349.99"}),e.jsxs("ul",{className:"space-y-3 mb-8",children:[e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Everything in Premium"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Transmission Service"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Coolant Flush"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Fuel System Clean"]}),e.jsxs("li",{className:"flex items-center justify-center",children:[e.jsx(Wt,{className:"text-green-500 mr-2"}),"Full Detail"]})]}),e.jsx("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition duration-300",children:"Book Package"})]})]})]})}),e.jsx("section",{className:"py-16 bg-blue-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Need a Custom Service?"}),e.jsx("p",{className:"text-xl mb-8 text-blue-100",children:"Contact us for custom service packages or specific repairs not listed above."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Contact Us"}),e.jsx("button",{className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Book Appointment"})]})]})})]})},a7=()=>{const s=[{name:"John Smith",position:"Owner & Master Technician",experience:"20+ years",specialties:["Engine Diagnostics","Transmission Repair","Electrical Systems"],image:"https://via.placeholder.com/200x200?text=John+Smith"},{name:"Sarah Johnson",position:"Service Manager",experience:"15+ years",specialties:["Customer Service","Service Coordination","Quality Control"],image:"https://via.placeholder.com/200x200?text=Sarah+Johnson"},{name:"Mike Davis",position:"Senior Technician",experience:"12+ years",specialties:["Brake Systems","Suspension","AC/Heating"],image:"https://via.placeholder.com/200x200?text=Mike+Davis"},{name:"Lisa Chen",position:"Diagnostic Specialist",experience:"10+ years",specialties:["Computer Diagnostics","Hybrid Vehicles","Emission Systems"],image:"https://via.placeholder.com/200x200?text=Lisa+Chen"}],t=[{icon:e.jsx(Tf,{className:"w-8 h-8 text-red-500"}),title:"Passion for Excellence",description:"We're passionate about cars and committed to delivering the highest quality service to every customer."},{icon:e.jsx(qe,{className:"w-8 h-8 text-blue-500"}),title:"Integrity & Trust",description:"We believe in honest, transparent communication and building lasting relationships with our customers."},{icon:e.jsx(Df,{className:"w-8 h-8 text-yellow-500"}),title:"Innovation",description:"We stay current with the latest automotive technology and continuously improve our processes."},{icon:e.jsx(uA,{className:"w-8 h-8 text-green-500"}),title:"Customer Focus",description:"Your satisfaction is our priority. We treat every vehicle as if it were our own."}],a=[{number:"5000+",label:"Happy Customers",description:"Satisfied customers who trust us with their vehicles"},{number:"15+",label:"Years Experience",description:"Decades of combined automotive expertise"},{number:"100%",label:"Satisfaction Rate",description:"Customer satisfaction guarantee on all work"},{number:"24/7",label:"Emergency Service",description:"Round-the-clock emergency roadside assistance"}],r=["ASE Certified Master Technician","BMW Certified Service Center","Toyota Certified Service Center","Honda Certified Service Center","Ford Certified Service Center","GM Certified Service Center","EPA Certified Refrigerant Handler","OSHA Safety Certified"];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"About Us"}),e.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Your trusted partner in automotive care for over 15 years. We're committed to providing honest, reliable, and professional auto repair services."})]})})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Our Story"}),e.jsxs("div",{className:"space-y-4 text-gray-600",children:[e.jsx("p",{children:"Founded in 2008, Auto Repair Pro has been serving the community with dedication and expertise. What started as a small family-owned shop has grown into one of the most trusted auto repair facilities in the region."}),e.jsx("p",{children:"Our founder, John Smith, began his automotive career as an apprentice mechanic at the age of 16. His passion for cars and commitment to honest service led him to establish Auto Repair Pro with a simple mission: to provide reliable, affordable, and honest auto repair services."}),e.jsx("p",{children:"Over the years, we've expanded our team, invested in state-of-the-art diagnostic equipment, and maintained our commitment to customer satisfaction. Today, we're proud to serve thousands of customers with the same dedication and integrity that started it all."})]})]}),e.jsx("div",{className:"bg-gray-200 rounded-lg h-96 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(Fe,{className:"text-6xl mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Company Image"}),e.jsx("p",{className:"text-sm",children:"(Shop photo would go here)"})]})})]})})}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Values"}),e.jsx("p",{className:"text-xl text-gray-600",children:"The principles that guide everything we do."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,i)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:n.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:n.title}),e.jsx("p",{className:"text-gray-600",children:n.description})]},i))})]})}),e.jsx("section",{className:"py-16 bg-blue-600 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Our Achievements"}),e.jsx("p",{className:"text-xl text-blue-100",children:"Numbers that speak for themselves."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((n,i)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:n.number}),e.jsx("div",{className:"text-xl font-semibold mb-2",children:n.label}),e.jsx("div",{className:"text-blue-100",children:n.description})]},i))})]})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Meet Our Team"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Experienced professionals dedicated to your vehicle's care."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:s.map((n,i)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg overflow-hidden shadow-md",children:[e.jsx("div",{className:"bg-gray-200 h-48 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(nt,{className:"text-4xl mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Photo"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-1",children:n.name}),e.jsx("p",{className:"text-blue-600 font-medium mb-2",children:n.position}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[n.experience," experience"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Specialties:"}),e.jsx("ul",{className:"space-y-1",children:n.specialties.map((l,o)=>e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ke,{className:"text-green-500 mr-2 text-xs"}),l]},o))})]})]})]},i))})]})}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Certifications & Training"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Our team maintains the highest standards of professional certification."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((n,i)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx(ts,{className:"text-3xl text-blue-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-900 font-medium",children:n})]},i))})]})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose Auto Repair Pro?"}),e.jsx("p",{className:"text-xl text-gray-600",children:"We're not just another auto repair shop - we're your automotive partners."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Expert Technicians"}),e.jsx("p",{className:"text-gray-600",children:"Our ASE-certified technicians have years of experience and ongoing training to stay current with the latest automotive technology."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Quality Parts"}),e.jsx("p",{className:"text-gray-600",children:"We use only high-quality OEM and aftermarket parts backed by manufacturer warranties."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Honest Pricing"}),e.jsx("p",{className:"text-gray-600",children:"No hidden fees or surprises. We provide clear, upfront pricing and detailed estimates before any work begins."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Warranty Protection"}),e.jsx("p",{className:"text-gray-600",children:"All our work comes with a comprehensive warranty for your peace of mind."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Convenient Service"}),e.jsx("p",{className:"text-gray-600",children:"Online appointment booking, shuttle service, and loaner vehicles available for your convenience."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"text-yellow-500 text-2xl mr-4 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Customer Focus"}),e.jsx("p",{className:"text-gray-600",children:"We treat every customer like family and every vehicle as if it were our own."})]})]})]})]})}),e.jsx("section",{className:"py-16 bg-blue-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Experience the Difference?"}),e.jsx("p",{className:"text-xl mb-8 text-blue-100",children:"Join thousands of satisfied customers who trust Auto Repair Pro with their vehicles."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("a",{href:"/appointments",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Schedule Service"}),e.jsx("a",{href:"/contact",className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-8 py-3 rounded-lg font-semibold transition duration-300",children:"Contact Us"})]})]})})]})},r7=()=>{const[s,t]=b.useState({name:"",email:"",phone:"",subject:"",message:""}),[a,r]=b.useState(!1),n=c=>{const{name:d,value:u}=c.target;t(m=>({...m,[d]:u}))},i=c=>{c.preventDefault(),console.log("Form submitted:",s),r(!0),t({name:"",email:"",phone:"",subject:"",message:""}),setTimeout(()=>r(!1),5e3)},l=[{icon:e.jsx(kt,{className:"w-6 h-6 text-blue-600"}),title:"Phone",details:["(555) 123-4567","(555) 123-4568 (Emergency)"]},{icon:e.jsx(jt,{className:"w-6 h-6 text-blue-600"}),title:"Email",details:["info@autorepair.com","service@autorepair.com"]},{icon:e.jsx(pa,{className:"w-6 h-6 text-blue-600"}),title:"Address",details:["123 Auto Repair Street","City, State 12345"]},{icon:e.jsx(vt,{className:"w-6 h-6 text-blue-600"}),title:"Hours",details:["Mon-Fri: 8AM-6PM","Sat: 9AM-4PM"]}],o=[{icon:e.jsx(Mm,{className:"w-5 h-5"}),href:"#",label:"Share"},{icon:e.jsx(Ut,{className:"w-5 h-5"}),href:"#",label:"Message"},{icon:e.jsx(Tf,{className:"w-5 h-5"}),href:"#",label:"Like"},{icon:e.jsx(M1,{className:"w-5 h-5"}),href:"#",label:"Link"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Contact Us"}),e.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Get in touch with us for any questions, quotes, or to schedule your next service appointment."})]})})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:l.map((c,d)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:c.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:c.title}),e.jsx("div",{className:"space-y-1",children:c.details.map((u,m)=>e.jsx("p",{className:"text-gray-600",children:u},m))})]},d))})})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Send us a Message"}),a&&e.jsxs("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Thank you! Your message has been sent successfully. We'll get back to you soon."]}),e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:n,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:n,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your.email@example.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:n,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),e.jsxs("select",{id:"subject",name:"subject",value:s.subject,onChange:n,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select a subject"}),e.jsx("option",{value:"general",children:"General Inquiry"}),e.jsx("option",{value:"appointment",children:"Appointment Request"}),e.jsx("option",{value:"quote",children:"Quote Request"}),e.jsx("option",{value:"service",children:"Service Question"}),e.jsx("option",{value:"complaint",children:"Complaint"}),e.jsx("option",{value:"feedback",children:"Feedback"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),e.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:n,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please describe your inquiry or request..."})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition duration-300",children:"Send Message"})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Our Location"}),e.jsx("div",{className:"bg-gray-200 rounded-lg h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(pa,{className:"text-4xl mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Interactive Map"}),e.jsx("p",{className:"text-sm",children:"123 Auto Repair Street, City, State 12345"}),e.jsx("p",{className:"text-sm mt-2",children:"(Map integration would go here)"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Follow Us"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Stay connected with us on social media for updates, tips, and special offers."}),e.jsx("div",{className:"flex space-x-4",children:o.map((c,d)=>e.jsx("a",{href:c.href,className:"w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition duration-300","aria-label":c.label,children:c.icon},d))})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-red-800 mb-2",children:"Emergency Service"}),e.jsx("p",{className:"text-red-700 mb-4",children:"Need immediate assistance? Call our emergency line:"}),e.jsx("div",{className:"text-2xl font-bold text-red-800",children:"(555) 123-4568"}),e.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Available 24/7 for roadside assistance and emergency repairs"})]})]})]})})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Find answers to common questions about our services."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What are your business hours?"}),e.jsx("p",{className:"text-gray-600",children:"We're open Monday through Friday from 8:00 AM to 6:00 PM, and Saturdays from 9:00 AM to 4:00 PM. We're closed on Sundays."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Do you offer emergency services?"}),e.jsx("p",{className:"text-gray-600",children:"Yes, we provide 24/7 emergency roadside assistance and emergency repair services. Call our emergency line at (555) 123-4568."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What types of vehicles do you service?"}),e.jsx("p",{className:"text-gray-600",children:"We service all makes and models of cars, trucks, and SUVs. Our certified technicians are trained to work on domestic and foreign vehicles."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Do you provide warranties on your work?"}),e.jsx("p",{className:"text-gray-600",children:"Yes, all our work comes with a comprehensive warranty. We stand behind the quality of our repairs and parts."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Can I get a quote over the phone?"}),e.jsx("p",{className:"text-gray-600",children:"While we can provide general estimates over the phone, we recommend an in-person inspection for accurate pricing as vehicle conditions vary."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Do you accept insurance claims?"}),e.jsx("p",{className:"text-gray-600",children:"Yes, we work with most major insurance companies and can help you navigate the claims process for accident-related repairs."})]})]})]})]})})]})};function n7(){const{isAuthenticated:s,isLoading:t}=As();return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs(F4,{children:[e.jsx(fe,{path:"/",element:e.jsx(wl,{children:e.jsx(aj,{})})}),e.jsx(fe,{path:"/services",element:e.jsx(wl,{children:e.jsx(s7,{})})}),e.jsx(fe,{path:"/about",element:e.jsx(wl,{children:e.jsx(a7,{})})}),e.jsx(fe,{path:"/contact",element:e.jsx(wl,{children:e.jsx(r7,{})})}),e.jsx(fe,{path:"/appointments",element:e.jsx(wl,{children:e.jsx(aj,{})})}),e.jsx(fe,{path:"/auth/login",element:e.jsx(ov,{})}),e.jsx(fe,{path:"/auth/register",element:e.jsx(ov,{})}),e.jsx(fe,{path:"/admin/login",element:e.jsx(fn,{to:"/auth/login",replace:!0})}),e.jsx(fe,{path:"/admin/register",element:e.jsx(fn,{to:"/auth/register",replace:!0})}),e.jsx(fe,{path:"/customer/login",element:e.jsx(fn,{to:"/auth/login",replace:!0})}),e.jsx(fe,{path:"/customer/register",element:e.jsx(fn,{to:"/auth/register",replace:!0})}),e.jsx(fe,{path:"/admin",element:e.jsx(fn,{to:"/auth/login",replace:!0})}),e.jsxs(fe,{path:"/admin/dashboard",element:e.jsx(Sc,{requireAnyAdmin:!0,children:e.jsx(oP,{})}),children:[e.jsx(fe,{index:!0,element:e.jsx(sj,{})}),e.jsx(fe,{path:"overview",element:e.jsx(sj,{})}),e.jsx(fe,{path:"appointments",element:e.jsx(_M,{})}),e.jsx(fe,{path:"customers",element:e.jsx(kE,{})}),e.jsx(fe,{path:"customers/new",element:e.jsx(qE,{})}),e.jsx(fe,{path:"customers/:id",element:e.jsx(HE,{})}),e.jsx(fe,{path:"business-clients",element:e.jsx(QE,{})}),e.jsx(fe,{path:"services",element:e.jsx(l8,{})}),e.jsx(fe,{path:"invoices",element:e.jsx(G8,{})}),e.jsx(fe,{path:"inventory",element:e.jsx(L8,{})}),e.jsx(fe,{path:"reports",element:e.jsx(Sc,{requireAnyAdmin:!0,children:e.jsx(WO,{})})}),e.jsx(fe,{path:"reminders",element:e.jsx(S8,{})}),e.jsx(fe,{path:"tasks",element:e.jsx(aE,{})}),e.jsx(fe,{path:"promotions",element:e.jsx(cE,{})}),e.jsx(fe,{path:"contact-logs",element:e.jsx(xE,{})}),e.jsx(fe,{path:"mailchimp",element:e.jsx(pE,{})}),e.jsx(fe,{path:"marketing",element:e.jsx(jE,{})}),e.jsx(fe,{path:"sms",element:e.jsx(wE,{})}),e.jsx(fe,{path:"live-chat",element:e.jsx(SE,{})}),e.jsx(fe,{path:"yellowpages",element:e.jsx(CE,{})}),e.jsx(fe,{path:"system-admin",element:e.jsx(Sc,{requireSuperAdmin:!0,children:e.jsx(h8,{})})})]}),e.jsxs(fe,{path:"/customer/dashboard",element:e.jsx(Sc,{requireCustomer:!0,children:e.jsx(dP,{})}),children:[e.jsx(fe,{index:!0,element:e.jsx(uP,{})}),e.jsx(fe,{path:"vehicles",element:e.jsx(xP,{})}),e.jsx(fe,{path:"appointments",element:e.jsx(pP,{})}),e.jsx(fe,{path:"services",element:e.jsx(fP,{})}),e.jsx(fe,{path:"invoices",element:e.jsx(gP,{})}),e.jsx(fe,{path:"messages",element:e.jsx(yP,{})}),e.jsx(fe,{path:"notifications",element:e.jsx(vP,{})}),e.jsx(fe,{path:"profile",element:e.jsx(bP,{})}),e.jsx(fe,{path:"portal/:customerId",element:e.jsx(MP,{})}),e.jsx(fe,{path:"memberships",element:e.jsx(EP,{})}),e.jsx(fe,{path:"warranties",element:e.jsx(IP,{})}),e.jsx(fe,{path:"analytics",element:e.jsx(RP,{})}),e.jsx(fe,{path:"vehicle-database",element:e.jsx(LP,{})}),e.jsx(fe,{path:"payment-options",element:e.jsx(OP,{})}),e.jsx(fe,{path:"live-chat",element:e.jsx(MD,{})}),e.jsx(fe,{path:"reports",element:e.jsx(ED,{})})]}),e.jsx(fe,{path:"*",element:e.jsx(fn,{to:"/",replace:!0})})]}),!1,e.jsx(LT,{})]})}const i7={list:[],loading:!1,error:null,selectedCustomer:null,pagination:null,stats:null,searchResults:[],searchLoading:!1},l7=Rt({name:"customers",initialState:i7,reducers:{setSelectedCustomer:(s,t)=>{s.selectedCustomer=t.payload},clearError:s=>{s.error=null},clearSelectedCustomer:s=>{s.selectedCustomer=null},clearSearchResults:s=>{s.searchResults=[],s.searchLoading=!1}},extraReducers:s=>{s.addCase(zt.pending,t=>{t.loading=!0,t.error=null}).addCase(zt.fulfilled,(t,a)=>{t.loading=!1,console.log("fetchCustomers.fulfilled payload:",a.payload);const r=a.payload,n=(r==null?void 0:r.customers)||[];console.log("fetchCustomers.fulfilled customers:",n);const i=n.map(l=>({...l,id:l._id||l.id}));t.list=i,t.pagination=(r==null?void 0:r.pagination)||null,t.error=null}).addCase(zt.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(ia.pending,t=>{t.loading=!0,t.error=null}).addCase(ia.fulfilled,(t,a)=>{t.loading=!1;const r=a.payload;r&&(r.id=r._id||r.id),t.selectedCustomer=r,t.error=null}).addCase(ia.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Rn.pending,t=>{t.loading=!0,t.error=null}).addCase(Rn.fulfilled,(t,a)=>{t.loading=!1;const r=a.payload;r&&(r.id=r._id||r.id),t.list.unshift(r),t.error=null}).addCase(Rn.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Ln.pending,t=>{t.loading=!0,t.error=null}).addCase(Ln.fulfilled,(t,a)=>{t.loading=!1;const r=a.payload;r&&(r.id=r._id||r.id);const n=t.list.findIndex(i=>i._id===r._id||i.id===r.id);n!==-1&&(t.list[n]=r),t.selectedCustomer&&(t.selectedCustomer._id===r._id||t.selectedCustomer.id===r.id)&&(t.selectedCustomer=r),t.error=null}).addCase(Ln.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(On.pending,t=>{t.loading=!0,t.error=null}).addCase(On.fulfilled,(t,a)=>{t.loading=!1;const r=a.payload;t.list=t.list.filter(n=>n._id!==r&&n.id!==r),t.selectedCustomer&&(t.selectedCustomer._id===r||t.selectedCustomer.id===r)&&(t.selectedCustomer=null),t.error=null}).addCase(On.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Ja.pending,t=>{t.loading=!0,t.error=null}).addCase(Ja.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload,t.error=null}).addCase(Ja.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Mi.pending,t=>{t.searchLoading=!0,t.error=null}).addCase(Mi.fulfilled,(t,a)=>{t.searchLoading=!1;const n=(a.payload||[]).map(i=>({...i,id:i._id||i.id}));t.searchResults=n,t.error=null}).addCase(Mi.rejected,(t,a)=>{t.searchLoading=!1,t.error=a.payload})}}),o7=l7.reducer,c7={reminders:[],templates:[],settings:{emailEnabled:!0,smsEnabled:!1,emailProvider:{smtp:"",port:587,username:"",password:""},smsProvider:{apiKey:"",serviceName:"twilio"},businessInfo:{name:"",phone:"",email:"",address:"",website:""}},loading:!1,error:null},d7=Rt({name:"reminders",initialState:c7,reducers:{addReminder:(s,t)=>{s.reminders.push(t.payload)},updateReminder:(s,t)=>{const a=s.reminders.findIndex(r=>r.id===t.payload.id);a!==-1&&(s.reminders[a]=t.payload)},deleteReminder:(s,t)=>{s.reminders=s.reminders.filter(a=>a.id!==t.payload)},updateReminderStatus:(s,t)=>{const a=s.reminders.find(r=>r.id===t.payload.id);a&&(a.status=t.payload.status,t.payload.sentDate&&(a.sentDate=t.payload.sentDate))},addTemplate:(s,t)=>{s.templates.push(t.payload)},updateTemplate:(s,t)=>{const a=s.templates.findIndex(r=>r.id===t.payload.id);a!==-1&&(s.templates[a]=t.payload)},deleteTemplate:(s,t)=>{s.templates=s.templates.filter(a=>a.id!==t.payload)},toggleTemplate:(s,t)=>{const a=s.templates.find(r=>r.id===t.payload);a&&(a.isActive=!a.isActive)},updateNotificationSettings:(s,t)=>{s.settings={...s.settings,...t.payload}},markAllAsSent:(s,t)=>{t.payload.forEach(a=>{const r=s.reminders.find(n=>n.id===a);r&&(r.status="sent",r.sentDate=new Date().toISOString())})},setLoading:(s,t)=>{s.loading=t.payload},setError:(s,t)=>{s.error=t.payload,s.loading=!1}},extraReducers:s=>{s.addCase(Ca.pending,t=>{t.loading=!0,t.error=null}).addCase(Ca.fulfilled,(t,a)=>{t.loading=!1;const r=(a.payload.data||[]).map(n=>({...n,id:n._id||n.id}));t.reminders=r}).addCase(Ca.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to fetch reminders"}),s.addCase(la.pending,t=>{t.loading=!0,t.error=null}).addCase(la.fulfilled,(t,a)=>{t.loading=!1,t.templates=(a.payload.data||[]).map(r=>({...r,id:r._id||r.id}))}).addCase(la.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to fetch templates"}),s.addCase($n.pending,t=>{t.loading=!0,t.error=null}).addCase($n.fulfilled,(t,a)=>{t.loading=!1,t.settings=a.payload||t.settings}).addCase($n.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to fetch notification settings"}),s.addCase(Yl.pending,t=>{t.loading=!0,t.error=null}).addCase(Yl.fulfilled,(t,a)=>{if(t.loading=!1,a.payload){const r={...a.payload,id:a.payload._id||a.payload.id};t.reminders.push(r)}}).addCase(Yl.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to create reminder"}),s.addCase(Ei.pending,t=>{t.loading=!0,t.error=null}).addCase(Ei.fulfilled,(t,a)=>{if(t.loading=!1,a.payload){const r={...a.payload,id:a.payload._id||a.payload.id},n=t.reminders.findIndex(i=>i.id===r.id||i._id===r.id);n!==-1&&(t.reminders[n]=r)}}).addCase(Ei.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to update reminder"}),s.addCase(Kl.pending,t=>{t.loading=!0,t.error=null}).addCase(Kl.fulfilled,(t,a)=>{t.loading=!1,t.reminders=t.reminders.filter(r=>r.id!==a.payload&&r._id!==a.payload)}).addCase(Kl.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to delete reminder"}),s.addCase(Gl.pending,t=>{t.loading=!0,t.error=null}).addCase(Gl.fulfilled,(t,a)=>{if(t.loading=!1,a.payload){const r={...a.payload,id:a.payload._id||a.payload.id};t.templates.push(r)}}).addCase(Gl.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to create reminder template"}),s.addCase(Ii.pending,t=>{t.loading=!0,t.error=null}).addCase(Ii.fulfilled,(t,a)=>{if(t.loading=!1,a.payload){const r={...a.payload,id:a.payload._id||a.payload.id},n=t.templates.findIndex(i=>i.id===r.id||i._id===r.id);n!==-1&&(t.templates[n]=r)}}).addCase(Ii.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to update reminder template"}),s.addCase(Xl.pending,t=>{t.loading=!0,t.error=null}).addCase(Xl.fulfilled,(t,a)=>{t.loading=!1,t.templates=t.templates.filter(r=>r.id!==a.payload&&r._id!==a.payload)}).addCase(Xl.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to delete reminder template"})}}),u7=d7.reducer,m7={items:[],transactions:[],suppliers:[],purchaseOrders:[],categories:[],locations:[],loading:!1,error:null},h7=Rt({name:"inventory",initialState:m7,reducers:{addInventoryItemLocal:(s,t)=>{s.items.push(t.payload)},updateInventoryItemLocal:(s,t)=>{const a=s.items.findIndex(r=>r.id===t.payload.id);a!==-1&&(s.items[a]={...t.payload,lastUpdated:new Date().toISOString()})},deleteInventoryItemLocal:(s,t)=>{s.items=s.items.filter(a=>a.id!==t.payload)},adjustInventoryQuantity:(s,t)=>{const a=s.items.find(r=>r.id===t.payload.itemId);if(a){const r=a.currentStock||0;a.currentStock=t.payload.newQuantity,a.lastUpdated=new Date().toISOString();const n={id:`txn_${Date.now()}`,itemId:t.payload.itemId,type:"adjustment",quantity:t.payload.newQuantity-r,date:new Date().toISOString(),reference:"MANUAL_ADJ",notes:t.payload.reason,employeeId:"system",employeeName:"System"};s.transactions.push(n)}},addTransaction:(s,t)=>{s.transactions.push(t.payload);const a=s.items.find(r=>r.id===t.payload.itemId);a&&(a.currentStock=(a.currentStock||0)+t.payload.quantity,a.lastUpdated=new Date().toISOString())},addSupplierLocal:(s,t)=>{s.suppliers.push(t.payload)},updateSupplierLocal:(s,t)=>{const a=s.suppliers.findIndex(r=>r.id===t.payload.id);a!==-1&&(s.suppliers[a]=t.payload)},deleteSupplierLocal:(s,t)=>{s.suppliers=s.suppliers.filter(a=>a.id!==t.payload)},addPurchaseOrderLocal:(s,t)=>{s.purchaseOrders.push(t.payload)},updatePurchaseOrderLocal:(s,t)=>{const a=s.purchaseOrders.findIndex(r=>r.id===t.payload.id);a!==-1&&(s.purchaseOrders[a]=t.payload)},updatePurchaseOrderStatus:(s,t)=>{const a=s.purchaseOrders.find(r=>r.id===t.payload.id);a&&(a.status=t.payload.status,t.payload.status==="received"&&(a.receivedDate=new Date().toISOString(),a.items.forEach(r=>{const n={id:`txn_${Date.now()}_${r.item}`,itemId:r.item,type:"purchase",quantity:r.quantity,unitCost:r.unitPrice,totalCost:r.totalPrice,date:new Date().toISOString(),reference:a.id,notes:`Received from ${a.supplierName}`,employeeId:"system",employeeName:"System"};s.transactions.push(n);const i=s.items.find(l=>l.id===r.item);i&&(i.currentStock=(i.currentStock||0)+r.quantity,i.lastUpdated=new Date().toISOString())})))},deletePurchaseOrderLocal:(s,t)=>{s.purchaseOrders=s.purchaseOrders.filter(a=>a.id!==t.payload)},addCategory:(s,t)=>{s.categories.includes(t.payload)||(s.categories.push(t.payload),s.categories.sort())},removeCategory:(s,t)=>{s.categories=s.categories.filter(a=>a!==t.payload)},addLocation:(s,t)=>{s.locations.includes(t.payload)||(s.locations.push(t.payload),s.locations.sort())},removeLocation:(s,t)=>{s.locations=s.locations.filter(a=>a!==t.payload)},setLoading:(s,t)=>{s.loading=t.payload},setError:(s,t)=>{s.error=t.payload,s.loading=!1}},extraReducers:s=>{s.addCase(Za.pending,t=>{t.loading=!0,t.error=null}).addCase(Za.fulfilled,(t,a)=>{var r;t.loading=!1,t.items=((r=a.payload.data)==null?void 0:r.items)||a.payload.items||a.payload}).addCase(Za.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Vr.pending,t=>{t.loading=!0,t.error=null}).addCase(Vr.fulfilled,(t,a)=>{var r;t.loading=!1,t.transactions=((r=a.payload.data)==null?void 0:r.transactions)||a.payload.transactions||a.payload}).addCase(Vr.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Hr.pending,t=>{t.loading=!0,t.error=null}).addCase(Hr.fulfilled,(t,a)=>{var r;t.loading=!1,t.suppliers=((r=a.payload.data)==null?void 0:r.suppliers)||a.payload.suppliers||a.payload}).addCase(Hr.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Da.pending,t=>{t.loading=!0,t.error=null}).addCase(Da.fulfilled,(t,a)=>{var r;t.loading=!1,t.purchaseOrders=((r=a.payload.data)==null?void 0:r.purchaseOrders)||a.payload.purchaseOrders||a.payload}).addCase(Da.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Jl.pending,t=>{t.loading=!0,t.error=null}).addCase(Jl.fulfilled,(t,a)=>{var r;t.loading=!1,t.categories=((r=a.payload.data)==null?void 0:r.categories)||a.payload.categories||a.payload}).addCase(Jl.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Zl.pending,t=>{t.loading=!0,t.error=null}).addCase(Zl.fulfilled,(t,a)=>{var r;t.loading=!1,t.locations=((r=a.payload.data)==null?void 0:r.locations)||a.payload.locations||a.payload}).addCase(Zl.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(qf.fulfilled,(t,a)=>{var n;const r=((n=a.payload.data)==null?void 0:n.item)||a.payload.data||a.payload;t.items.push(r)}),s.addCase(Yf.fulfilled,(t,a)=>{var i;const r=((i=a.payload.data)==null?void 0:i.item)||a.payload.data||a.payload,n=t.items.findIndex(l=>l._id===r._id||l.id===r.id);n!==-1&&(t.items[n]=r)}),s.addCase(Kf.fulfilled,(t,a)=>{const r=a.payload;t.items=t.items.filter(n=>n._id!==r&&n.id!==r)}),s.addCase(Jf.fulfilled,(t,a)=>{var r;t.suppliers.push(((r=a.payload.data)==null?void 0:r.supplier)||a.payload.data||a.payload)}),s.addCase(Zf.fulfilled,(t,a)=>{var i;const r=((i=a.payload.data)==null?void 0:i.supplier)||a.payload.data||a.payload,n=t.suppliers.findIndex(l=>l._id===r._id||l.id===r.id);n!==-1&&(t.suppliers[n]=r)}),s.addCase(v2.fulfilled,(t,a)=>{const r=a.payload;t.suppliers=t.suppliers.filter(n=>n._id!==r&&n.id!==r)}),s.addCase(Gf.fulfilled,(t,a)=>{t.purchaseOrders.push(a.payload.data||a.payload)}),s.addCase(Xf.fulfilled,(t,a)=>{const r=a.payload.data||a.payload,n=t.purchaseOrders.findIndex(i=>i._id===r._id||i.id===r.id);n!==-1&&(t.purchaseOrders[n]=r)}),s.addCase(Qf.fulfilled,(t,a)=>{const r=a.payload;t.purchaseOrders=t.purchaseOrders.filter(n=>n._id!==r&&n.id!==r)})}}),x7=h7.reducer,p7={invoices:[],settings:{companyInfo:{name:"Auto Repair Service",address:"123 Main St, City, State 12345",phone:"(555) 123-4567",email:"info@autorepair.com",website:"www.autorepair.com"},invoiceDefaults:{invoicePrefix:"INV-",nextInvoiceNumber:1001,paymentTerms:30,taxRate:8.5,currency:"USD"},template:{headerColor:"#3B82F6",footerText:"Thank you for your business!",includeLogo:!0,includeTerms:!0}},loading:!1,error:null,stats:null,paymentStats:null,templates:[]},f7=Rt({name:"invoices",initialState:p7,reducers:{addInvoice:(s,t)=>{s.invoices.push(t.payload),s.settings.invoiceDefaults.nextInvoiceNumber+=1},updateInvoiceStatus:(s,t)=>{const a=s.invoices.find(r=>r._id===t.payload.id);a&&(a.status=t.payload.status)},recordPayment:(s,t)=>{const a=s.invoices.find(r=>r._id===t.payload.invoiceId);a&&(a.paidAmount=(a.paidAmount||0)+t.payload.amount,a.paymentMethod=t.payload.method,a.paidDate=t.payload.date,a.paidAmount>=a.total?a.status="paid":a.paidAmount>0&&(a.status="sent"))},updateInvoiceSettings:(s,t)=>{s.settings={...s.settings,...t.payload}},updateCompanyInfo:(s,t)=>{s.settings.companyInfo={...s.settings.companyInfo,...t.payload}},updateInvoiceDefaults:(s,t)=>{s.settings.invoiceDefaults={...s.settings.invoiceDefaults,...t.payload}},updateTemplate:(s,t)=>{s.settings.template={...s.settings.template,...t.payload}},generateInvoiceFromWorkOrder:(s,t)=>{var l;const{workOrder:a,customer:r}=t.payload,n=(l=r.vehicles)==null?void 0:l.find(o=>o.id===a.vehicleId),i={_id:`${s.settings.invoiceDefaults.invoicePrefix}${s.settings.invoiceDefaults.nextInvoiceNumber.toString().padStart(3,"0")}`,workOrderId:a.id,customerId:r.id,customerName:r.name,vehicleInfo:n?`${n.year} ${n.make} ${n.model}`:"Unknown Vehicle",date:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"draft",services:a.services||[],parts:a.partsUsed||[],laborHours:a.laborHours||0,laborRate:s.settings.invoiceDefaults.taxRate||120,subtotal:a.subtotal||0,tax:(a.subtotal||0)*(s.settings.invoiceDefaults.taxRate/100),total:a.total||0,paidAmount:0,notes:a.notes||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.invoices.push(i),s.settings.invoiceDefaults.nextInvoiceNumber+=1},setLoading:(s,t)=>{s.loading=t.payload},setError:(s,t)=>{s.error=t.payload,s.loading=!1}},extraReducers:s=>{s.addCase(eo.pending,t=>{t.loading=!0,t.error=null}).addCase(eo.fulfilled,(t,a)=>{t.loading=!1,t.invoices=a.payload.data||[]}).addCase(eo.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to fetch invoices"}),s.addCase(Ed.pending,t=>{t.loading=!0,t.error=null}).addCase(Ed.fulfilled,(t,a)=>{t.loading=!1,t.invoices.push(a.payload.data)}).addCase(Ed.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to create invoice"}),s.addCase(Id.pending,t=>{t.loading=!0,t.error=null}).addCase(Id.fulfilled,(t,a)=>{t.loading=!1;const r=t.invoices.findIndex(n=>n._id===a.payload.data._id);r!==-1&&(t.invoices[r]=a.payload.data)}).addCase(Id.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to update invoice"}),s.addCase(Xh.pending,t=>{t.loading=!0,t.error=null}).addCase(Xh.fulfilled,(t,a)=>{t.loading=!1,t.invoices=t.invoices.filter(r=>r._id!==a.payload)}).addCase(Xh.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to delete invoice"}),s.addCase(Qh.pending,t=>{t.loading=!0,t.error=null}).addCase(Qh.fulfilled,(t,a)=>{t.loading=!1;const r=t.invoices.findIndex(n=>n._id===a.payload.data._id);r!==-1&&(t.invoices[r]=a.payload.data)}).addCase(Qh.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to send invoice"}),s.addCase(Rd.pending,t=>{t.loading=!0,t.error=null}).addCase(Rd.fulfilled,(t,a)=>{t.loading=!1;const r=t.invoices.findIndex(n=>n._id===a.payload.data._id);r!==-1&&(t.invoices[r]=a.payload.data)}).addCase(Rd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to add payment"}),s.addCase(to.pending,t=>{t.loading=!0,t.error=null}).addCase(to.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload.data}).addCase(to.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to fetch invoice stats"}),s.addCase(Pd.pending,t=>{t.loading=!0,t.error=null}).addCase(Pd.fulfilled,(t,a)=>{t.loading=!1,t.paymentStats=a.payload.data}).addCase(Pd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to fetch payment stats"}),s.addCase(Dd.pending,t=>{t.loading=!0,t.error=null}).addCase(Dd.fulfilled,(t,a)=>{t.loading=!1,t.templates=a.payload.data||[]}).addCase(Dd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to fetch invoice templates"}),s.addCase(Md.pending,t=>{t.loading=!0,t.error=null}).addCase(Md.fulfilled,(t,a)=>{t.loading=!1,a.payload.data&&(t.invoices=a.payload.data)}).addCase(Md.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to update overdue invoices"})}}),g7=f7.reducer;class y7{async getUsers(t){return(await M.get("/admin/users",{params:t})).data}async getUserById(t){return(await M.get(`/admin/users/${t}`)).data.data}async createUser(t){return(await M.post("/admin/users",t)).data.data}async updateUser(t,a){return(await M.put(`/admin/users/${t}`,a)).data.data}async deleteUser(t){await M.delete(`/admin/users/${t}`)}async toggleUserStatus(t){return(await M.patch(`/admin/users/${t}/toggle-status`)).data.data}async getUserStats(){return(await M.get("/admin/users/stats")).data.data}async getSystemSettings(){return(await M.get("/admin/settings")).data.data}async updateSystemSettings(t){return(await M.put("/admin/settings",t)).data.data}async getSystemLogs(t){return(await M.get("/admin/logs",{params:t})).data}async getSystemHealth(){return(await M.get("/admin/health")).data.data}}const ya=new y7,mx=Y("admin/fetchUsers",async s=>await ya.getUsers(s)),hx=Y("admin/fetchUserById",async s=>await ya.getUserById(s)),xx=Y("admin/createUser",async s=>await ya.createUser(s)),px=Y("admin/updateUser",async({id:s,userData:t})=>await ya.updateUser(s,t)),fx=Y("admin/deleteUser",async s=>(await ya.deleteUser(s),s)),rj=Y("admin/toggleUserStatus",async s=>{const t=await ya.toggleUserStatus(s);return{id:s,isActive:t.isActive}}),gx=Y("admin/fetchUserStats",async()=>await ya.getUserStats()),yx=Y("admin/fetchSystemSettings",async()=>await ya.getSystemSettings()),vx=Y("admin/updateSystemSettings",async s=>await ya.updateSystemSettings(s)),bx=Y("admin/fetchSystemLogs",async s=>await ya.getSystemLogs(s)),jx=Y("admin/fetchSystemHealth",async()=>await ya.getSystemHealth()),v7={users:[],selectedUser:null,userStats:null,usersLoading:!1,userStatsLoading:!1,createUserLoading:!1,updateUserLoading:!1,deleteUserLoading:!1,systemSettings:null,systemSettingsLoading:!1,updateSettingsLoading:!1,systemLogs:[],systemLogsLoading:!1,systemHealth:null,systemHealthLoading:!1,pagination:{page:1,limit:10,totalDocs:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1},error:null},b7=Rt({name:"admin",initialState:v7,reducers:{clearError:s=>{s.error=null},clearSelectedUser:s=>{s.selectedUser=null},setPagination:(s,t)=>{s.pagination={...s.pagination,...t.payload}}},extraReducers:s=>{s.addCase(mx.pending,t=>{t.usersLoading=!0,t.error=null}).addCase(mx.fulfilled,(t,a)=>{t.usersLoading=!1,t.users=a.payload.data,t.pagination=a.payload.pagination}).addCase(mx.rejected,(t,a)=>{t.usersLoading=!1,t.error=a.error.message||"Failed to fetch users"}),s.addCase(hx.pending,t=>{t.error=null}).addCase(hx.fulfilled,(t,a)=>{t.selectedUser=a.payload}).addCase(hx.rejected,(t,a)=>{t.error=a.error.message||"Failed to fetch user"}),s.addCase(xx.pending,t=>{t.createUserLoading=!0,t.error=null}).addCase(xx.fulfilled,(t,a)=>{t.createUserLoading=!1,t.users.unshift(a.payload)}).addCase(xx.rejected,(t,a)=>{t.createUserLoading=!1,t.error=a.error.message||"Failed to create user"}),s.addCase(px.pending,t=>{t.updateUserLoading=!0,t.error=null}).addCase(px.fulfilled,(t,a)=>{var n;t.updateUserLoading=!1;const r=t.users.findIndex(i=>i._id===a.payload._id);r!==-1&&(t.users[r]=a.payload),((n=t.selectedUser)==null?void 0:n._id)===a.payload._id&&(t.selectedUser=a.payload)}).addCase(px.rejected,(t,a)=>{t.updateUserLoading=!1,t.error=a.error.message||"Failed to update user"}),s.addCase(fx.pending,t=>{t.deleteUserLoading=!0,t.error=null}).addCase(fx.fulfilled,(t,a)=>{var r;t.deleteUserLoading=!1,t.users=t.users.filter(n=>n._id!==a.payload),((r=t.selectedUser)==null?void 0:r._id)===a.payload&&(t.selectedUser=null)}).addCase(fx.rejected,(t,a)=>{t.deleteUserLoading=!1,t.error=a.error.message||"Failed to delete user"}),s.addCase(rj.fulfilled,(t,a)=>{var n;const r=t.users.findIndex(i=>i._id===a.payload.id);r!==-1&&(t.users[r].isActive=a.payload.isActive),((n=t.selectedUser)==null?void 0:n._id)===a.payload.id&&(t.selectedUser.isActive=a.payload.isActive)}).addCase(rj.rejected,(t,a)=>{t.error=a.error.message||"Failed to toggle user status"}),s.addCase(gx.pending,t=>{t.userStatsLoading=!0,t.error=null}).addCase(gx.fulfilled,(t,a)=>{t.userStatsLoading=!1,t.userStats=a.payload}).addCase(gx.rejected,(t,a)=>{t.userStatsLoading=!1,t.error=a.error.message||"Failed to fetch user stats"}),s.addCase(yx.pending,t=>{t.systemSettingsLoading=!0,t.error=null}).addCase(yx.fulfilled,(t,a)=>{t.systemSettingsLoading=!1,t.systemSettings=a.payload}).addCase(yx.rejected,(t,a)=>{t.systemSettingsLoading=!1,t.error=a.error.message||"Failed to fetch system settings"}),s.addCase(vx.pending,t=>{t.updateSettingsLoading=!0,t.error=null}).addCase(vx.fulfilled,(t,a)=>{t.updateSettingsLoading=!1,t.systemSettings=a.payload}).addCase(vx.rejected,(t,a)=>{t.updateSettingsLoading=!1,t.error=a.error.message||"Failed to update system settings"}),s.addCase(bx.pending,t=>{t.systemLogsLoading=!0,t.error=null}).addCase(bx.fulfilled,(t,a)=>{t.systemLogsLoading=!1,t.systemLogs=a.payload.data,t.pagination=a.payload.pagination}).addCase(bx.rejected,(t,a)=>{t.systemLogsLoading=!1,t.error=a.error.message||"Failed to fetch system logs"}),s.addCase(jx.pending,t=>{t.systemHealthLoading=!0,t.error=null}).addCase(jx.fulfilled,(t,a)=>{t.systemHealthLoading=!1,t.systemHealth=a.payload}).addCase(jx.rejected,(t,a)=>{t.systemHealthLoading=!1,t.error=a.error.message||"Failed to fetch system health"})}}),j7=b7.reducer;class N7{async getEmailTemplates(){return(await M.get("/email/templates")).data.data}async createEmailTemplate(t){return(await M.post("/email/templates",t)).data.data}async updateEmailTemplate(t,a){return(await M.put(`/email/templates/${t}`,a)).data.data}async deleteEmailTemplate(t){await M.delete(`/email/templates/${t}`)}async getEmailCampaigns(){return(await M.get("/email/campaigns")).data.data}async createEmailCampaign(t){return(await M.post("/email/campaigns",t)).data.data}async sendEmailCampaign(t){return(await M.post(`/email/campaigns/${t}/send`)).data.data}async sendEmail(t){return(await M.post("/email/send",t)).data.data}async getEmailAnalytics(){return(await M.get("/email/analytics")).data.data}}const or=new N7,Nx=Y("email/fetchEmailTemplates",async()=>await or.getEmailTemplates()),wx=Y("email/createEmailTemplate",async s=>await or.createEmailTemplate(s)),Sx=Y("email/updateEmailTemplate",async({id:s,templateData:t})=>await or.updateEmailTemplate(s,t)),Cx=Y("email/deleteEmailTemplate",async s=>(await or.deleteEmailTemplate(s),s)),kx=Y("email/fetchEmailCampaigns",async()=>await or.getEmailCampaigns()),_x=Y("email/createEmailCampaign",async s=>await or.createEmailCampaign(s)),Ax=Y("email/sendEmailCampaign",async s=>await or.sendEmailCampaign(s)),Tx=Y("email/sendEmail",async s=>await or.sendEmail(s)),Px=Y("email/fetchEmailAnalytics",async()=>await or.getEmailAnalytics()),w7={templates:[],templatesLoading:!1,createTemplateLoading:!1,updateTemplateLoading:!1,deleteTemplateLoading:!1,campaigns:[],campaignsLoading:!1,createCampaignLoading:!1,sendCampaignLoading:!1,sendEmailLoading:!1,analytics:null,analyticsLoading:!1,error:null},S7=Rt({name:"email",initialState:w7,reducers:{clearError:s=>{s.error=null}},extraReducers:s=>{s.addCase(Nx.pending,t=>{t.templatesLoading=!0,t.error=null}).addCase(Nx.fulfilled,(t,a)=>{t.templatesLoading=!1,t.templates=a.payload}).addCase(Nx.rejected,(t,a)=>{t.templatesLoading=!1,t.error=a.error.message||"Failed to fetch email templates"}),s.addCase(wx.pending,t=>{t.createTemplateLoading=!0,t.error=null}).addCase(wx.fulfilled,(t,a)=>{t.createTemplateLoading=!1,t.templates.unshift(a.payload)}).addCase(wx.rejected,(t,a)=>{t.createTemplateLoading=!1,t.error=a.error.message||"Failed to create email template"}),s.addCase(Sx.pending,t=>{t.updateTemplateLoading=!0,t.error=null}).addCase(Sx.fulfilled,(t,a)=>{t.updateTemplateLoading=!1;const r=t.templates.findIndex(n=>n.id===a.payload.id);r!==-1&&(t.templates[r]=a.payload)}).addCase(Sx.rejected,(t,a)=>{t.updateTemplateLoading=!1,t.error=a.error.message||"Failed to update email template"}),s.addCase(Cx.pending,t=>{t.deleteTemplateLoading=!0,t.error=null}).addCase(Cx.fulfilled,(t,a)=>{t.deleteTemplateLoading=!1,t.templates=t.templates.filter(r=>r.id!==a.payload)}).addCase(Cx.rejected,(t,a)=>{t.deleteTemplateLoading=!1,t.error=a.error.message||"Failed to delete email template"}),s.addCase(kx.pending,t=>{t.campaignsLoading=!0,t.error=null}).addCase(kx.fulfilled,(t,a)=>{t.campaignsLoading=!1,t.campaigns=a.payload}).addCase(kx.rejected,(t,a)=>{t.campaignsLoading=!1,t.error=a.error.message||"Failed to fetch email campaigns"}),s.addCase(_x.pending,t=>{t.createCampaignLoading=!0,t.error=null}).addCase(_x.fulfilled,(t,a)=>{t.createCampaignLoading=!1,t.campaigns.unshift(a.payload)}).addCase(_x.rejected,(t,a)=>{t.createCampaignLoading=!1,t.error=a.error.message||"Failed to create email campaign"}),s.addCase(Ax.pending,t=>{t.sendCampaignLoading=!0,t.error=null}).addCase(Ax.fulfilled,(t,a)=>{t.sendCampaignLoading=!1;const r=t.campaigns.findIndex(n=>n.id===a.payload.id);r!==-1&&(t.campaigns[r]=a.payload)}).addCase(Ax.rejected,(t,a)=>{t.sendCampaignLoading=!1,t.error=a.error.message||"Failed to send email campaign"}),s.addCase(Tx.pending,t=>{t.sendEmailLoading=!0,t.error=null}).addCase(Tx.fulfilled,t=>{t.sendEmailLoading=!1}).addCase(Tx.rejected,(t,a)=>{t.sendEmailLoading=!1,t.error=a.error.message||"Failed to send email"}),s.addCase(Px.pending,t=>{t.analyticsLoading=!0,t.error=null}).addCase(Px.fulfilled,(t,a)=>{t.analyticsLoading=!1,t.analytics=a.payload}).addCase(Px.rejected,(t,a)=>{t.analyticsLoading=!1,t.error=a.error.message||"Failed to fetch email analytics"})}}),C7=S7.reducer,k7={logs:[],stats:{totalLogs:0,byType:{phone:0,email:0,"in-person":0,sms:0},byDirection:{inbound:0,outbound:0}},loading:!1,error:null,pagination:{currentPage:1,totalPages:1,totalItems:0,hasNextPage:!1,hasPrevPage:!1}},_7=Rt({name:"communicationLogs",initialState:k7,reducers:{clearError:s=>{s.error=null},setLoading:(s,t)=>{s.loading=t.payload}},extraReducers:s=>{s.addCase(_n.pending,t=>{t.loading=!0,t.error=null}).addCase(_n.fulfilled,(t,a)=>{t.loading=!1;const r=(a.payload||[]).map(n=>({...n,id:n._id||n.id}));t.logs=r,t.pagination={currentPage:1,totalPages:1,totalItems:r.length,hasNextPage:!1,hasPrevPage:!1}}).addCase(_n.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to fetch communication logs"}),s.addCase(Sd.pending,t=>{t.loading=!0,t.error=null}).addCase(Sd.fulfilled,(t,a)=>{t.loading=!1;const r=a.payload;if(r&&(r.id=r._id||r.id),r&&r.customer){const n={...r,id:r._id||r.id,customerId:r.customer._id||r.customer.id||r.customer};t.logs.unshift(n)}else t.logs.unshift(r);t.error=null}).addCase(Sd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Cd.pending,t=>{t.loading=!0,t.error=null}).addCase(Cd.fulfilled,(t,a)=>{if(t.loading=!1,a.payload){const r={...a.payload,id:a.payload._id||a.payload.id},n=t.logs.findIndex(i=>i.id===r.id||i._id===r.id);n!==-1&&(t.logs[n]=r)}}).addCase(Cd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to update communication log"}),s.addCase(kd.pending,t=>{t.loading=!0,t.error=null}).addCase(kd.fulfilled,(t,a)=>{t.loading=!1;const r=a.payload.logId;t.logs=t.logs.filter(n=>n.id!==r&&n._id!==r),t.stats.totalLogs=Math.max(0,t.stats.totalLogs-1)}).addCase(kd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to delete communication log"}),s.addCase(wd.pending,t=>{t.loading=!0,t.error=null}).addCase(wd.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload||t.stats}).addCase(wd.rejected,(t,a)=>{t.loading=!1,t.error=a.payload||"Failed to fetch communication statistics"})}}),A7=_7.reducer,Dx=Y("sms/fetchHistory",async(s={},{rejectWithValue:t})=>{var a,r;try{const n=new URLSearchParams;return Object.entries(s).forEach(([l,o])=>{o&&n.append(l,o)}),(await M.get(`/sms/history?${n.toString()}`)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch SMS history")}}),Mx=Y("sms/fetchStats",async(s,{rejectWithValue:t})=>{var a,r;try{return(await M.get("/sms/analytics")).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch SMS stats")}}),Ex=Y("sms/sendSMS",async(s,{rejectWithValue:t})=>{var a,r;try{return(await M.post("/sms/send",s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to send SMS")}}),Ix=Y("sms/sendBulkSMS",async(s,{rejectWithValue:t})=>{var a,r;try{return(await M.post("/sms/bulk",s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to send bulk SMS")}}),Rx=Y("sms/fetchTemplates",async(s={},{rejectWithValue:t})=>{var a,r;try{const n=new URLSearchParams;return Object.entries(s).forEach(([l,o])=>{o!==void 0&&n.append(l,o.toString())}),(await M.get(`/sms/templates?${n.toString()}`)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch SMS templates")}}),Lx=Y("sms/createTemplate",async(s,{rejectWithValue:t})=>{var a,r;try{return(await M.post("/sms/templates",s)).data}catch(n){return t(((r=(a=n.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create SMS template")}}),Ox=Y("sms/useTemplate",async({templateId:s,recipients:t},{rejectWithValue:a})=>{var r,n;try{return(await M.post(`/sms/templates/${s}/use`,{recipients:t})).data}catch(i){return a(((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to use SMS template")}}),T7={history:[],templates:[],stats:null,loading:!1,error:null,pagination:null},P7=Rt({name:"sms",initialState:T7,reducers:{clearError:s=>{s.error=null},clearHistory:s=>{s.history=[],s.pagination=null}},extraReducers:s=>{s.addCase(Dx.pending,t=>{t.loading=!0,t.error=null}).addCase(Dx.fulfilled,(t,a)=>{t.loading=!1,t.history=a.payload.data.records,t.pagination=a.payload.data.pagination}).addCase(Dx.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Mx.pending,t=>{t.loading=!0,t.error=null}).addCase(Mx.fulfilled,(t,a)=>{t.loading=!1,t.stats=a.payload.data}).addCase(Mx.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Ex.pending,t=>{t.loading=!0,t.error=null}).addCase(Ex.fulfilled,(t,a)=>{t.loading=!1,t.history.unshift(a.payload.data)}).addCase(Ex.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Ix.pending,t=>{t.loading=!0,t.error=null}).addCase(Ix.fulfilled,(t,a)=>{t.loading=!1,t.history.unshift(...a.payload.data.records)}).addCase(Ix.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Rx.pending,t=>{t.loading=!0,t.error=null}).addCase(Rx.fulfilled,(t,a)=>{t.loading=!1,t.templates=a.payload.data}).addCase(Rx.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Lx.pending,t=>{t.loading=!0,t.error=null}).addCase(Lx.fulfilled,(t,a)=>{t.loading=!1,t.templates.push(a.payload.data)}).addCase(Lx.rejected,(t,a)=>{t.loading=!1,t.error=a.payload}),s.addCase(Ox.pending,t=>{t.loading=!0,t.error=null}).addCase(Ox.fulfilled,(t,a)=>{t.loading=!1,t.history.unshift(...a.payload.data.records);const r=a.meta.arg.templateId,n=t.templates.find(i=>i._id===r);n&&(n.usageCount+=a.payload.data.sentCount)}).addCase(Ox.rejected,(t,a)=>{t.loading=!1,t.error=a.payload})}}),D7=P7.reducer,Fx=Y("chat/fetchChats",async s=>{const t=new URLSearchParams;return Object.entries(s).forEach(([r,n])=>{n&&n!==""&&t.append(r,n.toString())}),(await M.get(`/chat?${t}`)).data.data}),M7=Y("chat/fetchChat",async s=>(await M.get(`/chat/${s}`)).data.data.chat),E7=Y("chat/assignChat",async({chatId:s,assignedTo:t,reason:a})=>(await M.put(`/chat/${s}/assign`,{assignedTo:t,reason:a})).data.data.chat),I7=Y("chat/resolveChat",async({chatId:s,notes:t})=>(await M.put(`/chat/${s}/resolve`,{notes:t})).data.data.chat),R7=Y("chat/closeChat",async s=>(await M.put(`/chat/${s}/close`)).data.data.chat),L7=Y("chat/sendMessage",async({chatId:s,content:t,messageType:a="text"})=>{const r=await M.post(`/chat/${s}/messages`,{content:t,messageType:a});return{chatId:s,message:r.data.data.message}}),O7=Y("chat/fetchChatStats",async()=>(await M.get("/chat/stats")).data.data.stats),F7={chats:[],selectedChat:null,loading:!1,error:null,stats:null,pagination:{currentPage:1,totalPages:1,totalChats:0,hasNextPage:!1,hasPrevPage:!1}},$7=Rt({name:"chat",initialState:F7,reducers:{clearError:s=>{s.error=null},setSelectedChat:(s,t)=>{s.selectedChat=t.payload},addMessageToChat:(s,t)=>{var i;const{chatId:a,message:r}=t.payload,n=s.chats.find(l=>l._id===a);n&&(n.messages.push(r),n.lastActivity=new Date().toISOString()),((i=s.selectedChat)==null?void 0:i._id)===a&&(s.selectedChat.messages.push(r),s.selectedChat.lastActivity=new Date().toISOString())},updateChatStatus:(s,t)=>{var i;const{chatId:a,status:r}=t.payload,n=s.chats.find(l=>l._id===a);n&&(n.status=r),((i=s.selectedChat)==null?void 0:i._id)===a&&(s.selectedChat.status=r)}},extraReducers:s=>{s.addCase(Fx.pending,t=>{t.loading=!0,t.error=null}).addCase(Fx.fulfilled,(t,a)=>{t.loading=!1,t.chats=a.payload.chats,t.pagination=a.payload.pagination}).addCase(Fx.rejected,(t,a)=>{t.loading=!1,t.error=a.error.message||"Failed to fetch chats"}).addCase(M7.fulfilled,(t,a)=>{t.selectedChat=a.payload}).addCase(E7.fulfilled,(t,a)=>{var i;const r=a.payload,n=t.chats.findIndex(l=>l._id===r._id);n!==-1&&(t.chats[n]=r),((i=t.selectedChat)==null?void 0:i._id)===r._id&&(t.selectedChat=r)}).addCase(I7.fulfilled,(t,a)=>{var i;const r=a.payload,n=t.chats.findIndex(l=>l._id===r._id);n!==-1&&(t.chats[n]=r),((i=t.selectedChat)==null?void 0:i._id)===r._id&&(t.selectedChat=r)}).addCase(R7.fulfilled,(t,a)=>{var i;const r=a.payload,n=t.chats.findIndex(l=>l._id===r._id);n!==-1&&(t.chats[n]=r),((i=t.selectedChat)==null?void 0:i._id)===r._id&&(t.selectedChat=r)}).addCase(L7.fulfilled,(t,a)=>{var l;const{chatId:r,message:n}=a.payload,i=t.chats.find(o=>o._id===r);i&&(i.messages.push(n),i.lastActivity=new Date().toISOString()),((l=t.selectedChat)==null?void 0:l._id)===r&&(t.selectedChat.messages.push(n),t.selectedChat.lastActivity=new Date().toISOString())}).addCase(O7.fulfilled,(t,a)=>{t.stats=a.payload})}}),z7=$7.reducer,B7=mM({reducer:{appointments:CM,tasks:sE,promotions:oE,marketing:yE,customers:o7,services:YM,reminders:u7,inventory:x7,invoices:g7,dashboard:JO,admin:j7,email:C7,vehicles:H8,communicationLogs:A7,sms:D7,chat:z7},middleware:s=>s({serializableCheck:{ignoredActions:["persist/PERSIST"]}})});$x.createRoot(document.getElementById("root")).render(e.jsx(oa.StrictMode,{children:e.jsx(L5,{store:B7,children:e.jsx(W4,{children:e.jsxs(d_,{children:[e.jsx(n7,{}),e.jsx(Ak,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}));
